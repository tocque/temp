var oxe=Object.defineProperty;var axe=(i,e,t)=>e in i?oxe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Cs=(i,e,t)=>axe(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mi(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zue={exports:{}},o3={},Uue={exports:{}},fi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT=Symbol.for("react.element"),lxe=Symbol.for("react.portal"),cxe=Symbol.for("react.fragment"),uxe=Symbol.for("react.strict_mode"),hxe=Symbol.for("react.profiler"),dxe=Symbol.for("react.provider"),fxe=Symbol.for("react.context"),gxe=Symbol.for("react.forward_ref"),pxe=Symbol.for("react.suspense"),mxe=Symbol.for("react.memo"),_xe=Symbol.for("react.lazy"),NQ=Symbol.iterator;function vxe(i){return i===null||typeof i!="object"?null:(i=NQ&&i[NQ]||i["@@iterator"],typeof i=="function"?i:null)}var Vue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wue=Object.assign,Hue={};function xC(i,e,t){this.props=i,this.context=e,this.refs=Hue,this.updater=t||Vue}xC.prototype.isReactComponent={};xC.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};xC.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function $ue(){}$ue.prototype=xC.prototype;function V$(i,e,t){this.props=i,this.context=e,this.refs=Hue,this.updater=t||Vue}var W$=V$.prototype=new $ue;W$.constructor=V$;Wue(W$,xC.prototype);W$.isPureReactComponent=!0;var RQ=Array.isArray,Gue=Object.prototype.hasOwnProperty,H$={current:null},jue={key:!0,ref:!0,__self:!0,__source:!0};function Kue(i,e,t){var n,s={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Gue.call(e,n)&&!jue.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:RT,type:i,key:r,ref:o,props:s,_owner:H$.current}}function yxe(i,e){return{$$typeof:RT,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function G$(i){return typeof i=="object"&&i!==null&&i.$$typeof===RT}function bxe(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var PQ=/\/+/g;function qF(i,e){return typeof i=="object"&&i!==null&&i.key!=null?bxe(""+i.key):e.toString(36)}function oI(i,e,t,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case RT:case lxe:o=!0}}if(o)return o=i,s=s(o),i=n===""?"."+qF(o,0):n,RQ(s)?(t="",i!=null&&(t=i.replace(PQ,"$&/")+"/"),oI(s,e,t,"",function(c){return c})):s!=null&&(G$(s)&&(s=yxe(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(PQ,"$&/")+"/")+i)),e.push(s)),1;if(o=0,n=n===""?".":n+":",RQ(i))for(var a=0;a<i.length;a++){r=i[a];var l=n+qF(r,a);o+=oI(r,e,t,l,s)}else if(l=vxe(i),typeof l=="function")for(i=l.call(i),a=0;!(r=i.next()).done;)r=r.value,l=n+qF(r,a++),o+=oI(r,e,t,l,s);else if(r==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function PM(i,e,t){if(i==null)return i;var n=[],s=0;return oI(i,n,"","",function(r){return e.call(t,r,s++)}),n}function wxe(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var ll={current:null},aI={transition:null},Cxe={ReactCurrentDispatcher:ll,ReactCurrentBatchConfig:aI,ReactCurrentOwner:H$};function que(){throw Error("act(...) is not supported in production builds of React.")}fi.Children={map:PM,forEach:function(i,e,t){PM(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return PM(i,function(){e++}),e},toArray:function(i){return PM(i,function(e){return e})||[]},only:function(i){if(!G$(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};fi.Component=xC;fi.Fragment=cxe;fi.Profiler=hxe;fi.PureComponent=V$;fi.StrictMode=uxe;fi.Suspense=pxe;fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cxe;fi.act=que;fi.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=Wue({},i.props),s=i.key,r=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=H$.current),e.key!==void 0&&(s=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(l in e)Gue.call(e,l)&&!jue.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:RT,type:i.type,key:s,ref:r,props:n,_owner:o}};fi.createContext=function(i){return i={$$typeof:fxe,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:dxe,_context:i},i.Consumer=i};fi.createElement=Kue;fi.createFactory=function(i){var e=Kue.bind(null,i);return e.type=i,e};fi.createRef=function(){return{current:null}};fi.forwardRef=function(i){return{$$typeof:gxe,render:i}};fi.isValidElement=G$;fi.lazy=function(i){return{$$typeof:_xe,_payload:{_status:-1,_result:i},_init:wxe}};fi.memo=function(i,e){return{$$typeof:mxe,type:i,compare:e===void 0?null:e}};fi.startTransition=function(i){var e=aI.transition;aI.transition={};try{i()}finally{aI.transition=e}};fi.unstable_act=que;fi.useCallback=function(i,e){return ll.current.useCallback(i,e)};fi.useContext=function(i){return ll.current.useContext(i)};fi.useDebugValue=function(){};fi.useDeferredValue=function(i){return ll.current.useDeferredValue(i)};fi.useEffect=function(i,e){return ll.current.useEffect(i,e)};fi.useId=function(){return ll.current.useId()};fi.useImperativeHandle=function(i,e,t){return ll.current.useImperativeHandle(i,e,t)};fi.useInsertionEffect=function(i,e){return ll.current.useInsertionEffect(i,e)};fi.useLayoutEffect=function(i,e){return ll.current.useLayoutEffect(i,e)};fi.useMemo=function(i,e){return ll.current.useMemo(i,e)};fi.useReducer=function(i,e,t){return ll.current.useReducer(i,e,t)};fi.useRef=function(i){return ll.current.useRef(i)};fi.useState=function(i){return ll.current.useState(i)};fi.useSyncExternalStore=function(i,e,t){return ll.current.useSyncExternalStore(i,e,t)};fi.useTransition=function(){return ll.current.useTransition()};fi.version="18.3.1";Uue.exports=fi;var G=Uue.exports;const re=Mi(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sxe=G,xxe=Symbol.for("react.element"),Exe=Symbol.for("react.fragment"),Lxe=Object.prototype.hasOwnProperty,Txe=Sxe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kxe={key:!0,ref:!0,__self:!0,__source:!0};function Xue(i,e,t){var n,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Lxe.call(e,n)&&!kxe.hasOwnProperty(n)&&(s[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:xxe,type:i,key:r,ref:o,props:s,_owner:Txe.current}}o3.Fragment=Exe;o3.jsx=Xue;o3.jsxs=Xue;zue.exports=o3;var ge=zue.exports,Yue={exports:{}},Tc={},Zue={exports:{}},Que={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(H,U){var j=H.length;H.push(U);e:for(;0<j;){var W=j-1>>>1,X=H[W];if(0<s(X,U))H[W]=U,H[j]=X,j=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var U=H[0],j=H.pop();if(j!==U){H[0]=j;e:for(var W=0,X=H.length,ee=X>>>1;W<ee;){var le=2*(W+1)-1,fe=H[le],be=le+1,ye=H[be];if(0>s(fe,j))be<X&&0>s(ye,fe)?(H[W]=ye,H[be]=j,W=be):(H[W]=fe,H[le]=j,W=le);else if(be<X&&0>s(ye,j))H[W]=ye,H[be]=j,W=be;else break e}}return U}function s(H,U){var j=H.sortIndex-U.sortIndex;return j!==0?j:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(H){for(var U=t(c);U!==null;){if(U.callback===null)n(c);else if(U.startTime<=H)n(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function C(H){if(p=!1,y(H),!g)if(t(l)!==null)g=!0,z(S);else{var U=t(c);U!==null&&K(C,U.startTime-H)}}function S(H,U){g=!1,p&&(p=!1,m(L),L=-1),f=!0;var j=d;try{for(y(U),h=t(l);h!==null&&(!(h.expirationTime>U)||H&&!I());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var X=W(h.expirationTime<=U);U=i.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&n(l),y(U)}else n(l);h=t(l)}if(h!==null)var ee=!0;else{var le=t(c);le!==null&&K(C,le.startTime-U),ee=!1}return ee}finally{h=null,d=j,f=!1}}var x=!1,E=null,L=-1,T=5,D=-1;function I(){return!(i.unstable_now()-D<T)}function N(){if(E!==null){var H=i.unstable_now();D=H;var U=!0;try{U=E(!0,H)}finally{U?P():(x=!1,E=null)}}else x=!1}var P;if(typeof v=="function")P=function(){v(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,V=O.port2;O.port1.onmessage=N,P=function(){V.postMessage(null)}}else P=function(){_(N,0)};function z(H){E=H,x||(x=!0,P())}function K(H,U){L=_(function(){H(i.unstable_now())},U)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){g||f||(g=!0,z(S))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(H){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var j=d;d=U;try{return H()}finally{d=j}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=d;d=H;try{return U()}finally{d=j}},i.unstable_scheduleCallback=function(H,U,j){var W=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?W+j:W):j=W,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,H={id:u++,callback:U,priorityLevel:H,startTime:j,expirationTime:X,sortIndex:-1},j>W?(H.sortIndex=j,e(c,H),t(l)===null&&H===t(c)&&(p?(m(L),L=-1):p=!0,K(C,j-W))):(H.sortIndex=X,e(l,H),g||f||(g=!0,z(S))),H},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(H){var U=d;return function(){var j=d;d=U;try{return H.apply(this,arguments)}finally{d=j}}}})(Que);Zue.exports=Que;var Mxe=Zue.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dxe=G,Cc=Mxe;function bt(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jue=new Set,$L={};function jv(i,e){Aw(i,e),Aw(i+"Capture",e)}function Aw(i,e){for($L[i]=e,i=0;i<e.length;i++)Jue.add(e[i])}var Tg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T7=Object.prototype.hasOwnProperty,Axe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OQ={},FQ={};function Ixe(i){return T7.call(FQ,i)?!0:T7.call(OQ,i)?!1:Axe.test(i)?FQ[i]=!0:(OQ[i]=!0,!1)}function Nxe(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function Rxe(i,e,t,n){if(e===null||typeof e>"u"||Nxe(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cl(i,e,t,n,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Xo[i]=new cl(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Xo[e]=new cl(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Xo[i]=new cl(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Xo[i]=new cl(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Xo[i]=new cl(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Xo[i]=new cl(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Xo[i]=new cl(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Xo[i]=new cl(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Xo[i]=new cl(i,5,!1,i.toLowerCase(),null,!1,!1)});var j$=/[\-:]([a-z])/g;function K$(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(j$,K$);Xo[e]=new cl(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(j$,K$);Xo[e]=new cl(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(j$,K$);Xo[e]=new cl(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Xo[i]=new cl(i,1,!1,i.toLowerCase(),null,!1,!1)});Xo.xlinkHref=new cl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Xo[i]=new cl(i,1,!1,i.toLowerCase(),null,!0,!0)});function q$(i,e,t,n){var s=Xo.hasOwnProperty(e)?Xo[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rxe(e,t,s,n)&&(t=null),n||s===null?Ixe(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):s.mustUseProperty?i[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?i.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Bg=Dxe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OM=Symbol.for("react.element"),Hy=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),X$=Symbol.for("react.strict_mode"),k7=Symbol.for("react.profiler"),ehe=Symbol.for("react.provider"),the=Symbol.for("react.context"),Y$=Symbol.for("react.forward_ref"),M7=Symbol.for("react.suspense"),D7=Symbol.for("react.suspense_list"),Z$=Symbol.for("react.memo"),xp=Symbol.for("react.lazy"),nhe=Symbol.for("react.offscreen"),BQ=Symbol.iterator;function RS(i){return i===null||typeof i!="object"?null:(i=BQ&&i[BQ]||i["@@iterator"],typeof i=="function"?i:null)}var ir=Object.assign,XF;function iE(i){if(XF===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);XF=e&&e[1]||""}return`
`+XF+i}var YF=!1;function ZF(i,e){if(!i||YF)return"";YF=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){n=c}i.call(e.prototype)}else{try{throw Error()}catch(c){n=c}i()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=n.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=o&&0<=a);break}}}finally{YF=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?iE(i):""}function Pxe(i){switch(i.tag){case 5:return iE(i.type);case 16:return iE("Lazy");case 13:return iE("Suspense");case 19:return iE("SuspenseList");case 0:case 2:case 15:return i=ZF(i.type,!1),i;case 11:return i=ZF(i.type.render,!1),i;case 1:return i=ZF(i.type,!0),i;default:return""}}function A7(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case $y:return"Fragment";case Hy:return"Portal";case k7:return"Profiler";case X$:return"StrictMode";case M7:return"Suspense";case D7:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case the:return(i.displayName||"Context")+".Consumer";case ehe:return(i._context.displayName||"Context")+".Provider";case Y$:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Z$:return e=i.displayName||null,e!==null?e:A7(i.type)||"Memo";case xp:e=i._payload,i=i._init;try{return A7(i(e))}catch{}}return null}function Oxe(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A7(e);case 8:return e===X$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wm(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ihe(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fxe(i){var e=ihe(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function FM(i){i._valueTracker||(i._valueTracker=Fxe(i))}function she(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=ihe(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function fN(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function I7(i,e){var t=e.checked;return ir({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function zQ(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=wm(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rhe(i,e){e=e.checked,e!=null&&q$(i,"checked",e,!1)}function N7(i,e){rhe(i,e);var t=wm(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?R7(i,e.type,t):e.hasOwnProperty("defaultValue")&&R7(i,e.type,wm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function UQ(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function R7(i,e,t){(e!=="number"||fN(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var sE=Array.isArray;function Gb(i,e,t,n){if(i=i.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<i.length;t++)s=e.hasOwnProperty("$"+i[t].value),i[t].selected!==s&&(i[t].selected=s),s&&n&&(i[t].defaultSelected=!0)}else{for(t=""+wm(t),e=null,s=0;s<i.length;s++){if(i[s].value===t){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}e!==null||i[s].disabled||(e=i[s])}e!==null&&(e.selected=!0)}}function P7(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(bt(91));return ir({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function VQ(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(bt(92));if(sE(t)){if(1<t.length)throw Error(bt(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:wm(t)}}function ohe(i,e){var t=wm(e.value),n=wm(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function WQ(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function ahe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function O7(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?ahe(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var BM,lhe=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,s)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(BM=BM||document.createElement("div"),BM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=BM.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function GL(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var LE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bxe=["Webkit","ms","Moz","O"];Object.keys(LE).forEach(function(i){Bxe.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),LE[e]=LE[i]})});function che(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||LE.hasOwnProperty(i)&&LE[i]?(""+e).trim():e+"px"}function uhe(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=che(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,s):i[t]=s}}var zxe=ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F7(i,e){if(e){if(zxe[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(bt(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(bt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(bt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(bt(62))}}function B7(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z7=null;function Q$(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var U7=null,jb=null,Kb=null;function HQ(i){if(i=FT(i)){if(typeof U7!="function")throw Error(bt(280));var e=i.stateNode;e&&(e=h3(e),U7(i.stateNode,i.type,e))}}function hhe(i){jb?Kb?Kb.push(i):Kb=[i]:jb=i}function dhe(){if(jb){var i=jb,e=Kb;if(Kb=jb=null,HQ(i),e)for(i=0;i<e.length;i++)HQ(e[i])}}function fhe(i,e){return i(e)}function ghe(){}var QF=!1;function phe(i,e,t){if(QF)return i(e,t);QF=!0;try{return fhe(i,e,t)}finally{QF=!1,(jb!==null||Kb!==null)&&(ghe(),dhe())}}function jL(i,e){var t=i.stateNode;if(t===null)return null;var n=h3(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(bt(231,e,typeof t));return t}var V7=!1;if(Tg)try{var PS={};Object.defineProperty(PS,"passive",{get:function(){V7=!0}}),window.addEventListener("test",PS,PS),window.removeEventListener("test",PS,PS)}catch{V7=!1}function Uxe(i,e,t,n,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var TE=!1,gN=null,pN=!1,W7=null,Vxe={onError:function(i){TE=!0,gN=i}};function Wxe(i,e,t,n,s,r,o,a,l){TE=!1,gN=null,Uxe.apply(Vxe,arguments)}function Hxe(i,e,t,n,s,r,o,a,l){if(Wxe.apply(this,arguments),TE){if(TE){var c=gN;TE=!1,gN=null}else throw Error(bt(198));pN||(pN=!0,W7=c)}}function Kv(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function mhe(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function $Q(i){if(Kv(i)!==i)throw Error(bt(188))}function $xe(i){var e=i.alternate;if(!e){if(e=Kv(i),e===null)throw Error(bt(188));return e!==i?null:i}for(var t=i,n=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return $Q(s),i;if(r===n)return $Q(s),e;r=r.sibling}throw Error(bt(188))}if(t.return!==n.return)t=s,n=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,n=r;break}if(a===n){o=!0,n=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,n=s;break}if(a===n){o=!0,n=r,t=s;break}a=a.sibling}if(!o)throw Error(bt(189))}}if(t.alternate!==n)throw Error(bt(190))}if(t.tag!==3)throw Error(bt(188));return t.stateNode.current===t?i:e}function _he(i){return i=$xe(i),i!==null?vhe(i):null}function vhe(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=vhe(i);if(e!==null)return e;i=i.sibling}return null}var yhe=Cc.unstable_scheduleCallback,GQ=Cc.unstable_cancelCallback,Gxe=Cc.unstable_shouldYield,jxe=Cc.unstable_requestPaint,Mr=Cc.unstable_now,Kxe=Cc.unstable_getCurrentPriorityLevel,J$=Cc.unstable_ImmediatePriority,bhe=Cc.unstable_UserBlockingPriority,mN=Cc.unstable_NormalPriority,qxe=Cc.unstable_LowPriority,whe=Cc.unstable_IdlePriority,a3=null,Td=null;function Xxe(i){if(Td&&typeof Td.onCommitFiberRoot=="function")try{Td.onCommitFiberRoot(a3,i,void 0,(i.current.flags&128)===128)}catch{}}var ph=Math.clz32?Math.clz32:Qxe,Yxe=Math.log,Zxe=Math.LN2;function Qxe(i){return i>>>=0,i===0?32:31-(Yxe(i)/Zxe|0)|0}var zM=64,UM=4194304;function rE(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _N(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?n=rE(a):(r&=o,r!==0&&(n=rE(r)))}else o=t&~s,o!==0?n=rE(o):r!==0&&(n=rE(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-ph(e),s=1<<t,n|=i[t],e&=~s;return n}function Jxe(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eEe(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var o=31-ph(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&n)&&(s[o]=Jxe(a,e)):l<=e&&(i.expiredLanes|=a),r&=~a}}function H7(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Che(){var i=zM;return zM<<=1,!(zM&4194240)&&(zM=64),i}function JF(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function PT(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-ph(e),i[e]=t}function tEe(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var s=31-ph(t),r=1<<s;e[s]=0,n[s]=-1,i[s]=-1,t&=~r}}function eG(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-ph(t),s=1<<n;s&e|i[n]&e&&(i[n]|=e),t&=~s}}var ns=0;function She(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var xhe,tG,Ehe,Lhe,The,$7=!1,VM=[],em=null,tm=null,nm=null,KL=new Map,qL=new Map,Np=[],nEe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jQ(i,e){switch(i){case"focusin":case"focusout":em=null;break;case"dragenter":case"dragleave":tm=null;break;case"mouseover":case"mouseout":nm=null;break;case"pointerover":case"pointerout":KL.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qL.delete(e.pointerId)}}function OS(i,e,t,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},e!==null&&(e=FT(e),e!==null&&tG(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),i)}function iEe(i,e,t,n,s){switch(e){case"focusin":return em=OS(em,i,e,t,n,s),!0;case"dragenter":return tm=OS(tm,i,e,t,n,s),!0;case"mouseover":return nm=OS(nm,i,e,t,n,s),!0;case"pointerover":var r=s.pointerId;return KL.set(r,OS(KL.get(r)||null,i,e,t,n,s)),!0;case"gotpointercapture":return r=s.pointerId,qL.set(r,OS(qL.get(r)||null,i,e,t,n,s)),!0}return!1}function khe(i){var e=w0(i.target);if(e!==null){var t=Kv(e);if(t!==null){if(e=t.tag,e===13){if(e=mhe(t),e!==null){i.blockedOn=e,The(i.priority,function(){Ehe(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function lI(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=G7(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);z7=n,t.target.dispatchEvent(n),z7=null}else return e=FT(t),e!==null&&tG(e),i.blockedOn=t,!1;e.shift()}return!0}function KQ(i,e,t){lI(i)&&t.delete(e)}function sEe(){$7=!1,em!==null&&lI(em)&&(em=null),tm!==null&&lI(tm)&&(tm=null),nm!==null&&lI(nm)&&(nm=null),KL.forEach(KQ),qL.forEach(KQ)}function FS(i,e){i.blockedOn===e&&(i.blockedOn=null,$7||($7=!0,Cc.unstable_scheduleCallback(Cc.unstable_NormalPriority,sEe)))}function XL(i){function e(s){return FS(s,i)}if(0<VM.length){FS(VM[0],i);for(var t=1;t<VM.length;t++){var n=VM[t];n.blockedOn===i&&(n.blockedOn=null)}}for(em!==null&&FS(em,i),tm!==null&&FS(tm,i),nm!==null&&FS(nm,i),KL.forEach(e),qL.forEach(e),t=0;t<Np.length;t++)n=Np[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Np.length&&(t=Np[0],t.blockedOn===null);)khe(t),t.blockedOn===null&&Np.shift()}var qb=Bg.ReactCurrentBatchConfig,vN=!0;function rEe(i,e,t,n){var s=ns,r=qb.transition;qb.transition=null;try{ns=1,nG(i,e,t,n)}finally{ns=s,qb.transition=r}}function oEe(i,e,t,n){var s=ns,r=qb.transition;qb.transition=null;try{ns=4,nG(i,e,t,n)}finally{ns=s,qb.transition=r}}function nG(i,e,t,n){if(vN){var s=G7(i,e,t,n);if(s===null)cB(i,e,n,yN,t),jQ(i,n);else if(iEe(s,i,e,t,n))n.stopPropagation();else if(jQ(i,n),e&4&&-1<nEe.indexOf(i)){for(;s!==null;){var r=FT(s);if(r!==null&&xhe(r),r=G7(i,e,t,n),r===null&&cB(i,e,n,yN,t),r===s)break;s=r}s!==null&&n.stopPropagation()}else cB(i,e,n,null,t)}}var yN=null;function G7(i,e,t,n){if(yN=null,i=Q$(n),i=w0(i),i!==null)if(e=Kv(i),e===null)i=null;else if(t=e.tag,t===13){if(i=mhe(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return yN=i,null}function Mhe(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kxe()){case J$:return 1;case bhe:return 4;case mN:case qxe:return 16;case whe:return 536870912;default:return 16}default:return 16}}var Vp=null,iG=null,cI=null;function Dhe(){if(cI)return cI;var i,e=iG,t=e.length,n,s="value"in Vp?Vp.value:Vp.textContent,r=s.length;for(i=0;i<t&&e[i]===s[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===s[r-n];n++);return cI=s.slice(i,1<n?1-n:void 0)}function uI(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function WM(){return!0}function qQ(){return!1}function kc(i){function e(t,n,s,r,o){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?WM:qQ,this.isPropagationStopped=qQ,this}return ir(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=WM)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=WM)},persist:function(){},isPersistent:WM}),e}var EC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sG=kc(EC),OT=ir({},EC,{view:0,detail:0}),aEe=kc(OT),eB,tB,BS,l3=ir({},OT,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rG,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==BS&&(BS&&i.type==="mousemove"?(eB=i.screenX-BS.screenX,tB=i.screenY-BS.screenY):tB=eB=0,BS=i),eB)},movementY:function(i){return"movementY"in i?i.movementY:tB}}),XQ=kc(l3),lEe=ir({},l3,{dataTransfer:0}),cEe=kc(lEe),uEe=ir({},OT,{relatedTarget:0}),nB=kc(uEe),hEe=ir({},EC,{animationName:0,elapsedTime:0,pseudoElement:0}),dEe=kc(hEe),fEe=ir({},EC,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gEe=kc(fEe),pEe=ir({},EC,{data:0}),YQ=kc(pEe),mEe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_Ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vEe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yEe(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=vEe[i])?!!e[i]:!1}function rG(){return yEe}var bEe=ir({},OT,{key:function(i){if(i.key){var e=mEe[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=uI(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?_Ee[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rG,charCode:function(i){return i.type==="keypress"?uI(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?uI(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wEe=kc(bEe),CEe=ir({},l3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZQ=kc(CEe),SEe=ir({},OT,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rG}),xEe=kc(SEe),EEe=ir({},EC,{propertyName:0,elapsedTime:0,pseudoElement:0}),LEe=kc(EEe),TEe=ir({},l3,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),kEe=kc(TEe),MEe=[9,13,27,32],oG=Tg&&"CompositionEvent"in window,kE=null;Tg&&"documentMode"in document&&(kE=document.documentMode);var DEe=Tg&&"TextEvent"in window&&!kE,Ahe=Tg&&(!oG||kE&&8<kE&&11>=kE),QQ=" ",JQ=!1;function Ihe(i,e){switch(i){case"keyup":return MEe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nhe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gy=!1;function AEe(i,e){switch(i){case"compositionend":return Nhe(e);case"keypress":return e.which!==32?null:(JQ=!0,QQ);case"textInput":return i=e.data,i===QQ&&JQ?null:i;default:return null}}function IEe(i,e){if(Gy)return i==="compositionend"||!oG&&Ihe(i,e)?(i=Dhe(),cI=iG=Vp=null,Gy=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ahe&&e.locale!=="ko"?null:e.data;default:return null}}var NEe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eJ(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!NEe[i.type]:e==="textarea"}function Rhe(i,e,t,n){hhe(n),e=bN(e,"onChange"),0<e.length&&(t=new sG("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var ME=null,YL=null;function REe(i){Ghe(i,0)}function c3(i){var e=qy(i);if(she(e))return i}function PEe(i,e){if(i==="change")return e}var Phe=!1;if(Tg){var iB;if(Tg){var sB="oninput"in document;if(!sB){var tJ=document.createElement("div");tJ.setAttribute("oninput","return;"),sB=typeof tJ.oninput=="function"}iB=sB}else iB=!1;Phe=iB&&(!document.documentMode||9<document.documentMode)}function nJ(){ME&&(ME.detachEvent("onpropertychange",Ohe),YL=ME=null)}function Ohe(i){if(i.propertyName==="value"&&c3(YL)){var e=[];Rhe(e,YL,i,Q$(i)),phe(REe,e)}}function OEe(i,e,t){i==="focusin"?(nJ(),ME=e,YL=t,ME.attachEvent("onpropertychange",Ohe)):i==="focusout"&&nJ()}function FEe(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return c3(YL)}function BEe(i,e){if(i==="click")return c3(e)}function zEe(i,e){if(i==="input"||i==="change")return c3(e)}function UEe(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var bh=typeof Object.is=="function"?Object.is:UEe;function ZL(i,e){if(bh(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!T7.call(e,s)||!bh(i[s],e[s]))return!1}return!0}function iJ(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sJ(i,e){var t=iJ(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=iJ(t)}}function Fhe(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Fhe(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Bhe(){for(var i=window,e=fN();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=fN(i.document)}return e}function aG(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function VEe(i){var e=Bhe(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Fhe(t.ownerDocument.documentElement,t)){if(n!==null&&aG(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=sJ(t,r);var o=sJ(t,n);s&&o&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var WEe=Tg&&"documentMode"in document&&11>=document.documentMode,jy=null,j7=null,DE=null,K7=!1;function rJ(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;K7||jy==null||jy!==fN(n)||(n=jy,"selectionStart"in n&&aG(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),DE&&ZL(DE,n)||(DE=n,n=bN(j7,"onSelect"),0<n.length&&(e=new sG("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=jy)))}function HM(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Ky={animationend:HM("Animation","AnimationEnd"),animationiteration:HM("Animation","AnimationIteration"),animationstart:HM("Animation","AnimationStart"),transitionend:HM("Transition","TransitionEnd")},rB={},zhe={};Tg&&(zhe=document.createElement("div").style,"AnimationEvent"in window||(delete Ky.animationend.animation,delete Ky.animationiteration.animation,delete Ky.animationstart.animation),"TransitionEvent"in window||delete Ky.transitionend.transition);function u3(i){if(rB[i])return rB[i];if(!Ky[i])return i;var e=Ky[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in zhe)return rB[i]=e[t];return i}var Uhe=u3("animationend"),Vhe=u3("animationiteration"),Whe=u3("animationstart"),Hhe=u3("transitionend"),$he=new Map,oJ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bm(i,e){$he.set(i,e),jv(e,[i])}for(var oB=0;oB<oJ.length;oB++){var aB=oJ[oB],HEe=aB.toLowerCase(),$Ee=aB[0].toUpperCase()+aB.slice(1);Bm(HEe,"on"+$Ee)}Bm(Uhe,"onAnimationEnd");Bm(Vhe,"onAnimationIteration");Bm(Whe,"onAnimationStart");Bm("dblclick","onDoubleClick");Bm("focusin","onFocus");Bm("focusout","onBlur");Bm(Hhe,"onTransitionEnd");Aw("onMouseEnter",["mouseout","mouseover"]);Aw("onMouseLeave",["mouseout","mouseover"]);Aw("onPointerEnter",["pointerout","pointerover"]);Aw("onPointerLeave",["pointerout","pointerover"]);jv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jv("onBeforeInput",["compositionend","keypress","textInput","paste"]);jv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GEe=new Set("cancel close invalid load scroll toggle".split(" ").concat(oE));function aJ(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,Hxe(n,e,void 0,i),i.currentTarget=null}function Ghe(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],s=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;aJ(s,a,c),r=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;aJ(s,a,c),r=l}}}if(pN)throw i=W7,pN=!1,W7=null,i}function Ts(i,e){var t=e[Q7];t===void 0&&(t=e[Q7]=new Set);var n=i+"__bubble";t.has(n)||(jhe(e,i,2,!1),t.add(n))}function lB(i,e,t){var n=0;e&&(n|=4),jhe(t,i,n,e)}var $M="_reactListening"+Math.random().toString(36).slice(2);function QL(i){if(!i[$M]){i[$M]=!0,Jue.forEach(function(t){t!=="selectionchange"&&(GEe.has(t)||lB(t,!1,i),lB(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[$M]||(e[$M]=!0,lB("selectionchange",!1,e))}}function jhe(i,e,t,n){switch(Mhe(e)){case 1:var s=rEe;break;case 4:s=oEe;break;default:s=nG}t=s.bind(null,e,t,i),s=void 0,!V7||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(e,t,{capture:!0,passive:s}):i.addEventListener(e,t,!0):s!==void 0?i.addEventListener(e,t,{passive:s}):i.addEventListener(e,t,!1)}function cB(i,e,t,n,s){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=w0(a),o===null)return;if(l=o.tag,l===5||l===6){n=r=o;continue e}a=a.parentNode}}n=n.return}phe(function(){var c=r,u=Q$(t),h=[];e:{var d=$he.get(i);if(d!==void 0){var f=sG,g=i;switch(i){case"keypress":if(uI(t)===0)break e;case"keydown":case"keyup":f=wEe;break;case"focusin":g="focus",f=nB;break;case"focusout":g="blur",f=nB;break;case"beforeblur":case"afterblur":f=nB;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=XQ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=cEe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=xEe;break;case Uhe:case Vhe:case Whe:f=dEe;break;case Hhe:f=LEe;break;case"scroll":f=aEe;break;case"wheel":f=kEe;break;case"copy":case"cut":case"paste":f=gEe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ZQ}var p=(e&4)!==0,_=!p&&i==="scroll",m=p?d!==null?d+"Capture":null:d;p=[];for(var v=c,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,m!==null&&(C=jL(v,m),C!=null&&p.push(JL(v,C,y)))),_)break;v=v.return}0<p.length&&(d=new f(d,g,null,t,u),h.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=i==="mouseover"||i==="pointerover",f=i==="mouseout"||i==="pointerout",d&&t!==z7&&(g=t.relatedTarget||t.fromElement)&&(w0(g)||g[kg]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?w0(g):null,g!==null&&(_=Kv(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(p=XQ,C="onMouseLeave",m="onMouseEnter",v="mouse",(i==="pointerout"||i==="pointerover")&&(p=ZQ,C="onPointerLeave",m="onPointerEnter",v="pointer"),_=f==null?d:qy(f),y=g==null?d:qy(g),d=new p(C,v+"leave",f,t,u),d.target=_,d.relatedTarget=y,C=null,w0(u)===c&&(p=new p(m,v+"enter",g,t,u),p.target=y,p.relatedTarget=_,C=p),_=C,f&&g)t:{for(p=f,m=g,v=0,y=p;y;y=z1(y))v++;for(y=0,C=m;C;C=z1(C))y++;for(;0<v-y;)p=z1(p),v--;for(;0<y-v;)m=z1(m),y--;for(;v--;){if(p===m||m!==null&&p===m.alternate)break t;p=z1(p),m=z1(m)}p=null}else p=null;f!==null&&lJ(h,d,f,p,!1),g!==null&&_!==null&&lJ(h,_,g,p,!0)}}e:{if(d=c?qy(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=PEe;else if(eJ(d))if(Phe)S=zEe;else{S=FEe;var x=OEe}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=BEe);if(S&&(S=S(i,c))){Rhe(h,S,t,u);break e}x&&x(i,d,c),i==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&R7(d,"number",d.value)}switch(x=c?qy(c):window,i){case"focusin":(eJ(x)||x.contentEditable==="true")&&(jy=x,j7=c,DE=null);break;case"focusout":DE=j7=jy=null;break;case"mousedown":K7=!0;break;case"contextmenu":case"mouseup":case"dragend":K7=!1,rJ(h,t,u);break;case"selectionchange":if(WEe)break;case"keydown":case"keyup":rJ(h,t,u)}var E;if(oG)e:{switch(i){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Gy?Ihe(i,t)&&(L="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(Ahe&&t.locale!=="ko"&&(Gy||L!=="onCompositionStart"?L==="onCompositionEnd"&&Gy&&(E=Dhe()):(Vp=u,iG="value"in Vp?Vp.value:Vp.textContent,Gy=!0)),x=bN(c,L),0<x.length&&(L=new YQ(L,i,null,t,u),h.push({event:L,listeners:x}),E?L.data=E:(E=Nhe(t),E!==null&&(L.data=E)))),(E=DEe?AEe(i,t):IEe(i,t))&&(c=bN(c,"onBeforeInput"),0<c.length&&(u=new YQ("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=E))}Ghe(h,e)})}function JL(i,e,t){return{instance:i,listener:e,currentTarget:t}}function bN(i,e){for(var t=e+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=jL(i,t),r!=null&&n.unshift(JL(i,r,s)),r=jL(i,e),r!=null&&n.push(JL(i,r,s))),i=i.return}return n}function z1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function lJ(i,e,t,n,s){for(var r=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=jL(t,r),l!=null&&o.unshift(JL(t,l,a))):s||(l=jL(t,r),l!=null&&o.push(JL(t,l,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var jEe=/\r\n?/g,KEe=/\u0000|\uFFFD/g;function cJ(i){return(typeof i=="string"?i:""+i).replace(jEe,`
`).replace(KEe,"")}function GM(i,e,t){if(e=cJ(e),cJ(i)!==e&&t)throw Error(bt(425))}function wN(){}var q7=null,X7=null;function Y7(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Z7=typeof setTimeout=="function"?setTimeout:void 0,qEe=typeof clearTimeout=="function"?clearTimeout:void 0,uJ=typeof Promise=="function"?Promise:void 0,XEe=typeof queueMicrotask=="function"?queueMicrotask:typeof uJ<"u"?function(i){return uJ.resolve(null).then(i).catch(YEe)}:Z7;function YEe(i){setTimeout(function(){throw i})}function uB(i,e){var t=e,n=0;do{var s=t.nextSibling;if(i.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){i.removeChild(s),XL(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);XL(e)}function im(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function hJ(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var LC=Math.random().toString(36).slice(2),yd="__reactFiber$"+LC,e2="__reactProps$"+LC,kg="__reactContainer$"+LC,Q7="__reactEvents$"+LC,ZEe="__reactListeners$"+LC,QEe="__reactHandles$"+LC;function w0(i){var e=i[yd];if(e)return e;for(var t=i.parentNode;t;){if(e=t[kg]||t[yd]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=hJ(i);i!==null;){if(t=i[yd])return t;i=hJ(i)}return e}i=t,t=i.parentNode}return null}function FT(i){return i=i[yd]||i[kg],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qy(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(bt(33))}function h3(i){return i[e2]||null}var J7=[],Xy=-1;function zm(i){return{current:i}}function Ms(i){0>Xy||(i.current=J7[Xy],J7[Xy]=null,Xy--)}function Ls(i,e){Xy++,J7[Xy]=i.current,i.current=e}var Cm={},Ta=zm(Cm),Bl=zm(!1),cv=Cm;function Iw(i,e){var t=i.type.contextTypes;if(!t)return Cm;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=s),s}function zl(i){return i=i.childContextTypes,i!=null}function CN(){Ms(Bl),Ms(Ta)}function dJ(i,e,t){if(Ta.current!==Cm)throw Error(bt(168));Ls(Ta,e),Ls(Bl,t)}function Khe(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(bt(108,Oxe(i)||"Unknown",s));return ir({},t,n)}function SN(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Cm,cv=Ta.current,Ls(Ta,i),Ls(Bl,Bl.current),!0}function fJ(i,e,t){var n=i.stateNode;if(!n)throw Error(bt(169));t?(i=Khe(i,e,cv),n.__reactInternalMemoizedMergedChildContext=i,Ms(Bl),Ms(Ta),Ls(Ta,i)):Ms(Bl),Ls(Bl,t)}var Hf=null,d3=!1,hB=!1;function qhe(i){Hf===null?Hf=[i]:Hf.push(i)}function JEe(i){d3=!0,qhe(i)}function Um(){if(!hB&&Hf!==null){hB=!0;var i=0,e=ns;try{var t=Hf;for(ns=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Hf=null,d3=!1}catch(s){throw Hf!==null&&(Hf=Hf.slice(i+1)),yhe(J$,Um),s}finally{ns=e,hB=!1}}return null}var Yy=[],Zy=0,xN=null,EN=0,tu=[],nu=0,uv=null,ng=1,ig="";function F_(i,e){Yy[Zy++]=EN,Yy[Zy++]=xN,xN=i,EN=e}function Xhe(i,e,t){tu[nu++]=ng,tu[nu++]=ig,tu[nu++]=uv,uv=i;var n=ng;i=ig;var s=32-ph(n)-1;n&=~(1<<s),t+=1;var r=32-ph(e)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ng=1<<32-ph(e)+s|t<<s|n,ig=r+i}else ng=1<<r|t<<s|n,ig=i}function lG(i){i.return!==null&&(F_(i,1),Xhe(i,1,0))}function cG(i){for(;i===xN;)xN=Yy[--Zy],Yy[Zy]=null,EN=Yy[--Zy],Yy[Zy]=null;for(;i===uv;)uv=tu[--nu],tu[nu]=null,ig=tu[--nu],tu[nu]=null,ng=tu[--nu],tu[nu]=null}var vc=null,fc=null,Os=!1,ih=null;function Yhe(i,e){var t=hu(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function gJ(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,vc=i,fc=im(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,vc=i,fc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=uv!==null?{id:ng,overflow:ig}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=hu(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,vc=i,fc=null,!0):!1;default:return!1}}function e9(i){return(i.mode&1)!==0&&(i.flags&128)===0}function t9(i){if(Os){var e=fc;if(e){var t=e;if(!gJ(i,e)){if(e9(i))throw Error(bt(418));e=im(t.nextSibling);var n=vc;e&&gJ(i,e)?Yhe(n,t):(i.flags=i.flags&-4097|2,Os=!1,vc=i)}}else{if(e9(i))throw Error(bt(418));i.flags=i.flags&-4097|2,Os=!1,vc=i}}}function pJ(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vc=i}function jM(i){if(i!==vc)return!1;if(!Os)return pJ(i),Os=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Y7(i.type,i.memoizedProps)),e&&(e=fc)){if(e9(i))throw Zhe(),Error(bt(418));for(;e;)Yhe(i,e),e=im(e.nextSibling)}if(pJ(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(bt(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){fc=im(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}fc=null}}else fc=vc?im(i.stateNode.nextSibling):null;return!0}function Zhe(){for(var i=fc;i;)i=im(i.nextSibling)}function Nw(){fc=vc=null,Os=!1}function uG(i){ih===null?ih=[i]:ih.push(i)}var eLe=Bg.ReactCurrentBatchConfig;function zS(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(bt(309));var n=t.stateNode}if(!n)throw Error(bt(147,i));var s=n,r=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof i!="string")throw Error(bt(284));if(!t._owner)throw Error(bt(290,i))}return i}function KM(i,e){throw i=Object.prototype.toString.call(e),Error(bt(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function mJ(i){var e=i._init;return e(i._payload)}function Qhe(i){function e(m,v){if(i){var y=m.deletions;y===null?(m.deletions=[v],m.flags|=16):y.push(v)}}function t(m,v){if(!i)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function n(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=am(m,v),m.index=0,m.sibling=null,m}function r(m,v,y){return m.index=y,i?(y=m.alternate,y!==null?(y=y.index,y<v?(m.flags|=2,v):y):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return i&&m.alternate===null&&(m.flags|=2),m}function a(m,v,y,C){return v===null||v.tag!==6?(v=vB(y,m.mode,C),v.return=m,v):(v=s(v,y),v.return=m,v)}function l(m,v,y,C){var S=y.type;return S===$y?u(m,v,y.props.children,C,y.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xp&&mJ(S)===v.type)?(C=s(v,y.props),C.ref=zS(m,v,y),C.return=m,C):(C=_I(y.type,y.key,y.props,null,m.mode,C),C.ref=zS(m,v,y),C.return=m,C)}function c(m,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=yB(y,m.mode,C),v.return=m,v):(v=s(v,y.children||[]),v.return=m,v)}function u(m,v,y,C,S){return v===null||v.tag!==7?(v=F0(y,m.mode,C,S),v.return=m,v):(v=s(v,y),v.return=m,v)}function h(m,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=vB(""+v,m.mode,y),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case OM:return y=_I(v.type,v.key,v.props,null,m.mode,y),y.ref=zS(m,null,v),y.return=m,y;case Hy:return v=yB(v,m.mode,y),v.return=m,v;case xp:var C=v._init;return h(m,C(v._payload),y)}if(sE(v)||RS(v))return v=F0(v,m.mode,y,null),v.return=m,v;KM(m,v)}return null}function d(m,v,y,C){var S=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(m,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case OM:return y.key===S?l(m,v,y,C):null;case Hy:return y.key===S?c(m,v,y,C):null;case xp:return S=y._init,d(m,v,S(y._payload),C)}if(sE(y)||RS(y))return S!==null?null:u(m,v,y,C,null);KM(m,y)}return null}function f(m,v,y,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(y)||null,a(v,m,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case OM:return m=m.get(C.key===null?y:C.key)||null,l(v,m,C,S);case Hy:return m=m.get(C.key===null?y:C.key)||null,c(v,m,C,S);case xp:var x=C._init;return f(m,v,y,x(C._payload),S)}if(sE(C)||RS(C))return m=m.get(y)||null,u(v,m,C,S,null);KM(v,C)}return null}function g(m,v,y,C){for(var S=null,x=null,E=v,L=v=0,T=null;E!==null&&L<y.length;L++){E.index>L?(T=E,E=null):T=E.sibling;var D=d(m,E,y[L],C);if(D===null){E===null&&(E=T);break}i&&E&&D.alternate===null&&e(m,E),v=r(D,v,L),x===null?S=D:x.sibling=D,x=D,E=T}if(L===y.length)return t(m,E),Os&&F_(m,L),S;if(E===null){for(;L<y.length;L++)E=h(m,y[L],C),E!==null&&(v=r(E,v,L),x===null?S=E:x.sibling=E,x=E);return Os&&F_(m,L),S}for(E=n(m,E);L<y.length;L++)T=f(E,m,L,y[L],C),T!==null&&(i&&T.alternate!==null&&E.delete(T.key===null?L:T.key),v=r(T,v,L),x===null?S=T:x.sibling=T,x=T);return i&&E.forEach(function(I){return e(m,I)}),Os&&F_(m,L),S}function p(m,v,y,C){var S=RS(y);if(typeof S!="function")throw Error(bt(150));if(y=S.call(y),y==null)throw Error(bt(151));for(var x=S=null,E=v,L=v=0,T=null,D=y.next();E!==null&&!D.done;L++,D=y.next()){E.index>L?(T=E,E=null):T=E.sibling;var I=d(m,E,D.value,C);if(I===null){E===null&&(E=T);break}i&&E&&I.alternate===null&&e(m,E),v=r(I,v,L),x===null?S=I:x.sibling=I,x=I,E=T}if(D.done)return t(m,E),Os&&F_(m,L),S;if(E===null){for(;!D.done;L++,D=y.next())D=h(m,D.value,C),D!==null&&(v=r(D,v,L),x===null?S=D:x.sibling=D,x=D);return Os&&F_(m,L),S}for(E=n(m,E);!D.done;L++,D=y.next())D=f(E,m,L,D.value,C),D!==null&&(i&&D.alternate!==null&&E.delete(D.key===null?L:D.key),v=r(D,v,L),x===null?S=D:x.sibling=D,x=D);return i&&E.forEach(function(N){return e(m,N)}),Os&&F_(m,L),S}function _(m,v,y,C){if(typeof y=="object"&&y!==null&&y.type===$y&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case OM:e:{for(var S=y.key,x=v;x!==null;){if(x.key===S){if(S=y.type,S===$y){if(x.tag===7){t(m,x.sibling),v=s(x,y.props.children),v.return=m,m=v;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xp&&mJ(S)===x.type){t(m,x.sibling),v=s(x,y.props),v.ref=zS(m,x,y),v.return=m,m=v;break e}t(m,x);break}else e(m,x);x=x.sibling}y.type===$y?(v=F0(y.props.children,m.mode,C,y.key),v.return=m,m=v):(C=_I(y.type,y.key,y.props,null,m.mode,C),C.ref=zS(m,v,y),C.return=m,m=C)}return o(m);case Hy:e:{for(x=y.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){t(m,v.sibling),v=s(v,y.children||[]),v.return=m,m=v;break e}else{t(m,v);break}else e(m,v);v=v.sibling}v=yB(y,m.mode,C),v.return=m,m=v}return o(m);case xp:return x=y._init,_(m,v,x(y._payload),C)}if(sE(y))return g(m,v,y,C);if(RS(y))return p(m,v,y,C);KM(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(t(m,v.sibling),v=s(v,y),v.return=m,m=v):(t(m,v),v=vB(y,m.mode,C),v.return=m,m=v),o(m)):t(m,v)}return _}var Rw=Qhe(!0),Jhe=Qhe(!1),LN=zm(null),TN=null,Qy=null,hG=null;function dG(){hG=Qy=TN=null}function fG(i){var e=LN.current;Ms(LN),i._currentValue=e}function n9(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Xb(i,e){TN=i,hG=Qy=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Rl=!0),i.firstContext=null)}function bu(i){var e=i._currentValue;if(hG!==i)if(i={context:i,memoizedValue:e,next:null},Qy===null){if(TN===null)throw Error(bt(308));Qy=i,TN.dependencies={lanes:0,firstContext:i}}else Qy=Qy.next=i;return e}var C0=null;function gG(i){C0===null?C0=[i]:C0.push(i)}function ede(i,e,t,n){var s=e.interleaved;return s===null?(t.next=t,gG(e)):(t.next=s.next,s.next=t),e.interleaved=t,Mg(i,n)}function Mg(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Ep=!1;function pG(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tde(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function pg(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function sm(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,ki&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Mg(i,t)}return s=n.interleaved,s===null?(e.next=e,gG(n)):(e.next=s.next,s.next=e),n.interleaved=e,Mg(i,t)}function hI(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,eG(i,t)}}function _J(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function kN(i,e,t,n){var s=i.updateQueue;Ep=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=i.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=i,p=a;switch(d=e,f=t,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=ir({},h,d);break e;case 2:Ep=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);dv|=o,i.lanes=o,i.memoizedState=h}}function vJ(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(bt(191,s));s.call(n)}}}var BT={},kd=zm(BT),t2=zm(BT),n2=zm(BT);function S0(i){if(i===BT)throw Error(bt(174));return i}function mG(i,e){switch(Ls(n2,e),Ls(t2,i),Ls(kd,BT),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:O7(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=O7(e,i)}Ms(kd),Ls(kd,e)}function Pw(){Ms(kd),Ms(t2),Ms(n2)}function nde(i){S0(n2.current);var e=S0(kd.current),t=O7(e,i.type);e!==t&&(Ls(t2,i),Ls(kd,t))}function _G(i){t2.current===i&&(Ms(kd),Ms(t2))}var $s=zm(0);function MN(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dB=[];function vG(){for(var i=0;i<dB.length;i++)dB[i]._workInProgressVersionPrimary=null;dB.length=0}var dI=Bg.ReactCurrentDispatcher,fB=Bg.ReactCurrentBatchConfig,hv=0,er=null,so=null,Mo=null,DN=!1,AE=!1,i2=0,tLe=0;function la(){throw Error(bt(321))}function yG(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!bh(i[t],e[t]))return!1;return!0}function bG(i,e,t,n,s,r){if(hv=r,er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dI.current=i===null||i.memoizedState===null?rLe:oLe,i=t(n,s),AE){r=0;do{if(AE=!1,i2=0,25<=r)throw Error(bt(301));r+=1,Mo=so=null,e.updateQueue=null,dI.current=aLe,i=t(n,s)}while(AE)}if(dI.current=AN,e=so!==null&&so.next!==null,hv=0,Mo=so=er=null,DN=!1,e)throw Error(bt(300));return i}function wG(){var i=i2!==0;return i2=0,i}function rd(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?er.memoizedState=Mo=i:Mo=Mo.next=i,Mo}function wu(){if(so===null){var i=er.alternate;i=i!==null?i.memoizedState:null}else i=so.next;var e=Mo===null?er.memoizedState:Mo.next;if(e!==null)Mo=e,so=i;else{if(i===null)throw Error(bt(310));so=i,i={memoizedState:so.memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},Mo===null?er.memoizedState=Mo=i:Mo=Mo.next=i}return Mo}function s2(i,e){return typeof e=="function"?e(i):e}function gB(i){var e=wu(),t=e.queue;if(t===null)throw Error(bt(311));t.lastRenderedReducer=i;var n=so,s=n.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}n.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,n=n.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((hv&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:i(n,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,er.lanes|=u,dv|=u}c=c.next}while(c!==null&&c!==r);l===null?o=n:l.next=a,bh(n,e.memoizedState)||(Rl=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(i=t.interleaved,i!==null){s=i;do r=s.lane,er.lanes|=r,dv|=r,s=s.next;while(s!==i)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function pB(i){var e=wu(),t=e.queue;if(t===null)throw Error(bt(311));t.lastRenderedReducer=i;var n=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=i(r,o.action),o=o.next;while(o!==s);bh(r,e.memoizedState)||(Rl=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function ide(){}function sde(i,e){var t=er,n=wu(),s=e(),r=!bh(n.memoizedState,s);if(r&&(n.memoizedState=s,Rl=!0),n=n.queue,CG(ade.bind(null,t,n,i),[i]),n.getSnapshot!==e||r||Mo!==null&&Mo.memoizedState.tag&1){if(t.flags|=2048,r2(9,ode.bind(null,t,n,s,e),void 0,null),No===null)throw Error(bt(349));hv&30||rde(t,e,s)}return s}function rde(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function ode(i,e,t,n){e.value=t,e.getSnapshot=n,lde(e)&&cde(i)}function ade(i,e,t){return t(function(){lde(e)&&cde(i)})}function lde(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!bh(i,t)}catch{return!0}}function cde(i){var e=Mg(i,1);e!==null&&mh(e,i,1,-1)}function yJ(i){var e=rd();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s2,lastRenderedState:i},e.queue=i,i=i.dispatch=sLe.bind(null,er,i),[e.memoizedState,i]}function r2(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function ude(){return wu().memoizedState}function fI(i,e,t,n){var s=rd();er.flags|=i,s.memoizedState=r2(1|e,t,void 0,n===void 0?null:n)}function f3(i,e,t,n){var s=wu();n=n===void 0?null:n;var r=void 0;if(so!==null){var o=so.memoizedState;if(r=o.destroy,n!==null&&yG(n,o.deps)){s.memoizedState=r2(e,t,r,n);return}}er.flags|=i,s.memoizedState=r2(1|e,t,r,n)}function bJ(i,e){return fI(8390656,8,i,e)}function CG(i,e){return f3(2048,8,i,e)}function hde(i,e){return f3(4,2,i,e)}function dde(i,e){return f3(4,4,i,e)}function fde(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function gde(i,e,t){return t=t!=null?t.concat([i]):null,f3(4,4,fde.bind(null,e,i),t)}function SG(){}function pde(i,e){var t=wu();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&yG(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function mde(i,e){var t=wu();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&yG(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function _de(i,e,t){return hv&21?(bh(t,e)||(t=Che(),er.lanes|=t,dv|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Rl=!0),i.memoizedState=t)}function nLe(i,e){var t=ns;ns=t!==0&&4>t?t:4,i(!0);var n=fB.transition;fB.transition={};try{i(!1),e()}finally{ns=t,fB.transition=n}}function vde(){return wu().memoizedState}function iLe(i,e,t){var n=om(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},yde(i))bde(e,t);else if(t=ede(i,e,t,n),t!==null){var s=nl();mh(t,i,n,s),wde(t,e,n)}}function sLe(i,e,t){var n=om(i),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(yde(i))bde(e,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,bh(a,o)){var l=e.interleaved;l===null?(s.next=s,gG(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=ede(i,e,s,n),t!==null&&(s=nl(),mh(t,i,n,s),wde(t,e,n))}}function yde(i){var e=i.alternate;return i===er||e!==null&&e===er}function bde(i,e){AE=DN=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function wde(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,eG(i,t)}}var AN={readContext:bu,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useInsertionEffect:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useMutableSource:la,useSyncExternalStore:la,useId:la,unstable_isNewReconciler:!1},rLe={readContext:bu,useCallback:function(i,e){return rd().memoizedState=[i,e===void 0?null:e],i},useContext:bu,useEffect:bJ,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,fI(4194308,4,fde.bind(null,e,i),t)},useLayoutEffect:function(i,e){return fI(4194308,4,i,e)},useInsertionEffect:function(i,e){return fI(4,2,i,e)},useMemo:function(i,e){var t=rd();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=rd();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=iLe.bind(null,er,i),[n.memoizedState,i]},useRef:function(i){var e=rd();return i={current:i},e.memoizedState=i},useState:yJ,useDebugValue:SG,useDeferredValue:function(i){return rd().memoizedState=i},useTransition:function(){var i=yJ(!1),e=i[0];return i=nLe.bind(null,i[1]),rd().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=er,s=rd();if(Os){if(t===void 0)throw Error(bt(407));t=t()}else{if(t=e(),No===null)throw Error(bt(349));hv&30||rde(n,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,bJ(ade.bind(null,n,r,i),[i]),n.flags|=2048,r2(9,ode.bind(null,n,r,t,e),void 0,null),t},useId:function(){var i=rd(),e=No.identifierPrefix;if(Os){var t=ig,n=ng;t=(n&~(1<<32-ph(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=i2++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=tLe++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},oLe={readContext:bu,useCallback:pde,useContext:bu,useEffect:CG,useImperativeHandle:gde,useInsertionEffect:hde,useLayoutEffect:dde,useMemo:mde,useReducer:gB,useRef:ude,useState:function(){return gB(s2)},useDebugValue:SG,useDeferredValue:function(i){var e=wu();return _de(e,so.memoizedState,i)},useTransition:function(){var i=gB(s2)[0],e=wu().memoizedState;return[i,e]},useMutableSource:ide,useSyncExternalStore:sde,useId:vde,unstable_isNewReconciler:!1},aLe={readContext:bu,useCallback:pde,useContext:bu,useEffect:CG,useImperativeHandle:gde,useInsertionEffect:hde,useLayoutEffect:dde,useMemo:mde,useReducer:pB,useRef:ude,useState:function(){return pB(s2)},useDebugValue:SG,useDeferredValue:function(i){var e=wu();return so===null?e.memoizedState=i:_de(e,so.memoizedState,i)},useTransition:function(){var i=pB(s2)[0],e=wu().memoizedState;return[i,e]},useMutableSource:ide,useSyncExternalStore:sde,useId:vde,unstable_isNewReconciler:!1};function Qu(i,e){if(i&&i.defaultProps){e=ir({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function i9(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:ir({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var g3={isMounted:function(i){return(i=i._reactInternals)?Kv(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=nl(),s=om(i),r=pg(n,s);r.payload=e,t!=null&&(r.callback=t),e=sm(i,r,s),e!==null&&(mh(e,i,s,n),hI(e,i,s))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=nl(),s=om(i),r=pg(n,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=sm(i,r,s),e!==null&&(mh(e,i,s,n),hI(e,i,s))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=nl(),n=om(i),s=pg(t,n);s.tag=2,e!=null&&(s.callback=e),e=sm(i,s,n),e!==null&&(mh(e,i,n,t),hI(e,i,n))}};function wJ(i,e,t,n,s,r,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!ZL(t,n)||!ZL(s,r):!0}function Cde(i,e,t){var n=!1,s=Cm,r=e.contextType;return typeof r=="object"&&r!==null?r=bu(r):(s=zl(e)?cv:Ta.current,n=e.contextTypes,r=(n=n!=null)?Iw(i,s):Cm),e=new e(t,r),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=g3,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),e}function CJ(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&g3.enqueueReplaceState(e,e.state,null)}function s9(i,e,t,n){var s=i.stateNode;s.props=t,s.state=i.memoizedState,s.refs={},pG(i);var r=e.contextType;typeof r=="object"&&r!==null?s.context=bu(r):(r=zl(e)?cv:Ta.current,s.context=Iw(i,r)),s.state=i.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(i9(i,e,r,t),s.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&g3.enqueueReplaceState(s,s.state,null),kN(i,t,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function Ow(i,e){try{var t="",n=e;do t+=Pxe(n),n=n.return;while(n);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:e,stack:s,digest:null}}function mB(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function r9(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var lLe=typeof WeakMap=="function"?WeakMap:Map;function Sde(i,e,t){t=pg(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){NN||(NN=!0,p9=n),r9(i,e)},t}function xde(i,e,t){t=pg(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){r9(i,e)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){r9(i,e),typeof n!="function"&&(rm===null?rm=new Set([this]):rm.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function SJ(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new lLe;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),i=CLe.bind(null,i,e,t),e.then(i,i))}function xJ(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function EJ(i,e,t,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=pg(-1,1),e.tag=2,sm(t,e,1))),t.lanes|=1),i)}var cLe=Bg.ReactCurrentOwner,Rl=!1;function Xa(i,e,t,n){e.child=i===null?Jhe(e,null,t,n):Rw(e,i.child,t,n)}function LJ(i,e,t,n,s){t=t.render;var r=e.ref;return Xb(e,s),n=bG(i,e,t,n,r,s),t=wG(),i!==null&&!Rl?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,Dg(i,e,s)):(Os&&t&&lG(e),e.flags|=1,Xa(i,e,n,s),e.child)}function TJ(i,e,t,n,s){if(i===null){var r=t.type;return typeof r=="function"&&!AG(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Ede(i,e,r,n,s)):(i=_I(t.type,null,n,e,e.mode,s),i.ref=e.ref,i.return=e,e.child=i)}if(r=i.child,!(i.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:ZL,t(o,n)&&i.ref===e.ref)return Dg(i,e,s)}return e.flags|=1,i=am(r,n),i.ref=e.ref,i.return=e,e.child=i}function Ede(i,e,t,n,s){if(i!==null){var r=i.memoizedProps;if(ZL(r,n)&&i.ref===e.ref)if(Rl=!1,e.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&(Rl=!0);else return e.lanes=i.lanes,Dg(i,e,s)}return o9(i,e,t,n,s)}function Lde(i,e,t){var n=e.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ls(eb,cc),cc|=t;else{if(!(t&1073741824))return i=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Ls(eb,cc),cc|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,Ls(eb,cc),cc|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,Ls(eb,cc),cc|=n;return Xa(i,e,s,t),e.child}function Tde(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function o9(i,e,t,n,s){var r=zl(t)?cv:Ta.current;return r=Iw(e,r),Xb(e,s),t=bG(i,e,t,n,r,s),n=wG(),i!==null&&!Rl?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,Dg(i,e,s)):(Os&&n&&lG(e),e.flags|=1,Xa(i,e,t,s),e.child)}function kJ(i,e,t,n,s){if(zl(t)){var r=!0;SN(e)}else r=!1;if(Xb(e,s),e.stateNode===null)gI(i,e),Cde(e,t,n),s9(e,t,n,s),n=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=bu(c):(c=zl(t)?cv:Ta.current,c=Iw(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&CJ(e,o,n,c),Ep=!1;var d=e.memoizedState;o.state=d,kN(e,n,o,s),l=e.memoizedState,a!==n||d!==l||Bl.current||Ep?(typeof u=="function"&&(i9(e,t,u,n),l=e.memoizedState),(a=Ep||wJ(e,t,a,n,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,tde(i,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qu(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=bu(l):(l=zl(t)?cv:Ta.current,l=Iw(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&CJ(e,o,n,l),Ep=!1,d=e.memoizedState,o.state=d,kN(e,n,o,s);var g=e.memoizedState;a!==h||d!==g||Bl.current||Ep?(typeof f=="function"&&(i9(e,t,f,n),g=e.memoizedState),(c=Ep||wJ(e,t,c,n,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),n=!1)}return a9(i,e,t,n,r,s)}function a9(i,e,t,n,s,r){Tde(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&fJ(e,t,!1),Dg(i,e,r);n=e.stateNode,cLe.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=Rw(e,i.child,null,r),e.child=Rw(e,null,a,r)):Xa(i,e,a,r),e.memoizedState=n.state,s&&fJ(e,t,!0),e.child}function kde(i){var e=i.stateNode;e.pendingContext?dJ(i,e.pendingContext,e.pendingContext!==e.context):e.context&&dJ(i,e.context,!1),mG(i,e.containerInfo)}function MJ(i,e,t,n,s){return Nw(),uG(s),e.flags|=256,Xa(i,e,t,n),e.child}var l9={dehydrated:null,treeContext:null,retryLane:0};function c9(i){return{baseLanes:i,cachePool:null,transitions:null}}function Mde(i,e,t){var n=e.pendingProps,s=$s.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),Ls($s,s&1),i===null)return t9(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=_3(o,n,0,null),i=F0(i,n,t,null),r.return=e,i.return=e,r.sibling=i,e.child=r,e.child.memoizedState=c9(t),e.memoizedState=l9,i):xG(e,o));if(s=i.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return uLe(i,e,o,n,a,s,t);if(r){r=n.fallback,o=e.mode,s=i.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=am(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=am(a,r):(r=F0(r,o,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=i.child.memoizedState,o=o===null?c9(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=i.childLanes&~t,e.memoizedState=l9,n}return r=i.child,i=r.sibling,n=am(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function xG(i,e){return e=_3({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function qM(i,e,t,n){return n!==null&&uG(n),Rw(e,i.child,null,t),i=xG(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function uLe(i,e,t,n,s,r,o){if(t)return e.flags&256?(e.flags&=-257,n=mB(Error(bt(422))),qM(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(r=n.fallback,s=e.mode,n=_3({mode:"visible",children:n.children},s,0,null),r=F0(r,s,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&Rw(e,i.child,null,o),e.child.memoizedState=c9(o),e.memoizedState=l9,r);if(!(e.mode&1))return qM(i,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(bt(419)),n=mB(r,n,void 0),qM(i,e,o,n)}if(a=(o&i.childLanes)!==0,Rl||a){if(n=No,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Mg(i,s),mh(n,i,s,-1))}return DG(),n=mB(Error(bt(421))),qM(i,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=i.child,e=SLe.bind(null,i),s._reactRetry=e,null):(i=r.treeContext,fc=im(s.nextSibling),vc=e,Os=!0,ih=null,i!==null&&(tu[nu++]=ng,tu[nu++]=ig,tu[nu++]=uv,ng=i.id,ig=i.overflow,uv=e),e=xG(e,n.children),e.flags|=4096,e)}function DJ(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),n9(i.return,e,t)}function _B(i,e,t,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=s)}function Dde(i,e,t){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(Xa(i,e,n.children,t),n=$s.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&DJ(i,t,e);else if(i.tag===19)DJ(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Ls($s,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)i=t.alternate,i!==null&&MN(i)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),_B(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(i=s.alternate,i!==null&&MN(i)===null){e.child=s;break}i=s.sibling,s.sibling=t,t=s,s=i}_B(e,!0,t,null,r);break;case"together":_B(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gI(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Dg(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),dv|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(bt(153));if(e.child!==null){for(i=e.child,t=am(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=am(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function hLe(i,e,t){switch(e.tag){case 3:kde(e),Nw();break;case 5:nde(e);break;case 1:zl(e.type)&&SN(e);break;case 4:mG(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ls(LN,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ls($s,$s.current&1),e.flags|=128,null):t&e.child.childLanes?Mde(i,e,t):(Ls($s,$s.current&1),i=Dg(i,e,t),i!==null?i.sibling:null);Ls($s,$s.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return Dde(i,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ls($s,$s.current),n)break;return null;case 22:case 23:return e.lanes=0,Lde(i,e,t)}return Dg(i,e,t)}var Ade,u9,Ide,Nde;Ade=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};u9=function(){};Ide=function(i,e,t,n){var s=i.memoizedProps;if(s!==n){i=e.stateNode,S0(kd.current);var r=null;switch(t){case"input":s=I7(i,s),n=I7(i,n),r=[];break;case"select":s=ir({},s,{value:void 0}),n=ir({},n,{value:void 0}),r=[];break;case"textarea":s=P7(i,s),n=P7(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=wN)}F7(t,n);var o;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($L.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($L.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ts("scroll",i),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};Nde=function(i,e,t,n){t!==n&&(e.flags|=4)};function US(i,e){if(!Os)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function ca(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function dLe(i,e,t){var n=e.pendingProps;switch(cG(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(e),null;case 1:return zl(e.type)&&CN(),ca(e),null;case 3:return n=e.stateNode,Pw(),Ms(Bl),Ms(Ta),vG(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(jM(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ih!==null&&(v9(ih),ih=null))),u9(i,e),ca(e),null;case 5:_G(e);var s=S0(n2.current);if(t=e.type,i!==null&&e.stateNode!=null)Ide(i,e,t,n,s),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(bt(166));return ca(e),null}if(i=S0(kd.current),jM(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[yd]=e,n[e2]=r,i=(e.mode&1)!==0,t){case"dialog":Ts("cancel",n),Ts("close",n);break;case"iframe":case"object":case"embed":Ts("load",n);break;case"video":case"audio":for(s=0;s<oE.length;s++)Ts(oE[s],n);break;case"source":Ts("error",n);break;case"img":case"image":case"link":Ts("error",n),Ts("load",n);break;case"details":Ts("toggle",n);break;case"input":zQ(n,r),Ts("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Ts("invalid",n);break;case"textarea":VQ(n,r),Ts("invalid",n)}F7(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&GM(n.textContent,a,i),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&GM(n.textContent,a,i),s=["children",""+a]):$L.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ts("scroll",n)}switch(t){case"input":FM(n),UQ(n,r,!0);break;case"textarea":FM(n),WQ(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=wN)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ahe(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[yd]=e,i[e2]=n,Ade(i,e,!1,!1),e.stateNode=i;e:{switch(o=B7(t,n),t){case"dialog":Ts("cancel",i),Ts("close",i),s=n;break;case"iframe":case"object":case"embed":Ts("load",i),s=n;break;case"video":case"audio":for(s=0;s<oE.length;s++)Ts(oE[s],i);s=n;break;case"source":Ts("error",i),s=n;break;case"img":case"image":case"link":Ts("error",i),Ts("load",i),s=n;break;case"details":Ts("toggle",i),s=n;break;case"input":zQ(i,n),s=I7(i,n),Ts("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=ir({},n,{value:void 0}),Ts("invalid",i);break;case"textarea":VQ(i,n),s=P7(i,n),Ts("invalid",i);break;default:s=n}F7(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?uhe(i,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lhe(i,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&GL(i,l):typeof l=="number"&&GL(i,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&($L.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Ts("scroll",i):l!=null&&q$(i,r,l,o))}switch(t){case"input":FM(i),UQ(i,n,!1);break;case"textarea":FM(i),WQ(i);break;case"option":n.value!=null&&i.setAttribute("value",""+wm(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?Gb(i,!!n.multiple,r,!1):n.defaultValue!=null&&Gb(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=wN)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ca(e),null;case 6:if(i&&e.stateNode!=null)Nde(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(bt(166));if(t=S0(n2.current),S0(kd.current),jM(e)){if(n=e.stateNode,t=e.memoizedProps,n[yd]=e,(r=n.nodeValue!==t)&&(i=vc,i!==null))switch(i.tag){case 3:GM(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&GM(n.nodeValue,t,(i.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[yd]=e,e.stateNode=n}return ca(e),null;case 13:if(Ms($s),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Os&&fc!==null&&e.mode&1&&!(e.flags&128))Zhe(),Nw(),e.flags|=98560,r=!1;else if(r=jM(e),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(bt(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(bt(317));r[yd]=e}else Nw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ca(e),r=!1}else ih!==null&&(v9(ih),ih=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||$s.current&1?ao===0&&(ao=3):DG())),e.updateQueue!==null&&(e.flags|=4),ca(e),null);case 4:return Pw(),u9(i,e),i===null&&QL(e.stateNode.containerInfo),ca(e),null;case 10:return fG(e.type._context),ca(e),null;case 17:return zl(e.type)&&CN(),ca(e),null;case 19:if(Ms($s),r=e.memoizedState,r===null)return ca(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)US(r,!1);else{if(ao!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=MN(i),o!==null){for(e.flags|=128,US(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,i=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Ls($s,$s.current&1|2),e.child}i=i.sibling}r.tail!==null&&Mr()>Fw&&(e.flags|=128,n=!0,US(r,!1),e.lanes=4194304)}else{if(!n)if(i=MN(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),US(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Os)return ca(e),null}else 2*Mr()-r.renderingStartTime>Fw&&t!==1073741824&&(e.flags|=128,n=!0,US(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Mr(),e.sibling=null,t=$s.current,Ls($s,n?t&1|2:t&1),e):(ca(e),null);case 22:case 23:return MG(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?cc&1073741824&&(ca(e),e.subtreeFlags&6&&(e.flags|=8192)):ca(e),null;case 24:return null;case 25:return null}throw Error(bt(156,e.tag))}function fLe(i,e){switch(cG(e),e.tag){case 1:return zl(e.type)&&CN(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Pw(),Ms(Bl),Ms(Ta),vG(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return _G(e),null;case 13:if(Ms($s),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(bt(340));Nw()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Ms($s),null;case 4:return Pw(),null;case 10:return fG(e.type._context),null;case 22:case 23:return MG(),null;case 24:return null;default:return null}}var XM=!1,va=!1,gLe=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Jy(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){dr(i,e,n)}else t.current=null}function h9(i,e,t){try{t()}catch(n){dr(i,e,n)}}var AJ=!1;function pLe(i,e){if(q7=vN,i=Bhe(),aG(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=i,d=null;t:for(;;){for(var f;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==r||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===i)break t;if(d===t&&++c===s&&(a=o),d===r&&++u===n&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(X7={focusedElem:i,selectionRange:t},vN=!1,qt=e;qt!==null;)if(e=qt,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,qt=i;else for(;qt!==null;){e=qt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,_=g.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?p:Qu(e.type,p),_);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(C){dr(e,e.return,C)}if(i=e.sibling,i!==null){i.return=e.return,qt=i;break}qt=e.return}return g=AJ,AJ=!1,g}function IE(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&h9(e,t,r)}s=s.next}while(s!==n)}}function p3(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function d9(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Rde(i){var e=i.alternate;e!==null&&(i.alternate=null,Rde(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[yd],delete e[e2],delete e[Q7],delete e[ZEe],delete e[QEe])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Pde(i){return i.tag===5||i.tag===3||i.tag===4}function IJ(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Pde(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function f9(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=wN));else if(n!==4&&(i=i.child,i!==null))for(f9(i,e,t),i=i.sibling;i!==null;)f9(i,e,t),i=i.sibling}function g9(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(g9(i,e,t),i=i.sibling;i!==null;)g9(i,e,t),i=i.sibling}var Uo=null,nh=!1;function ap(i,e,t){for(t=t.child;t!==null;)Ode(i,e,t),t=t.sibling}function Ode(i,e,t){if(Td&&typeof Td.onCommitFiberUnmount=="function")try{Td.onCommitFiberUnmount(a3,t)}catch{}switch(t.tag){case 5:va||Jy(t,e);case 6:var n=Uo,s=nh;Uo=null,ap(i,e,t),Uo=n,nh=s,Uo!==null&&(nh?(i=Uo,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):Uo.removeChild(t.stateNode));break;case 18:Uo!==null&&(nh?(i=Uo,t=t.stateNode,i.nodeType===8?uB(i.parentNode,t):i.nodeType===1&&uB(i,t),XL(i)):uB(Uo,t.stateNode));break;case 4:n=Uo,s=nh,Uo=t.stateNode.containerInfo,nh=!0,ap(i,e,t),Uo=n,nh=s;break;case 0:case 11:case 14:case 15:if(!va&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&h9(t,e,o),s=s.next}while(s!==n)}ap(i,e,t);break;case 1:if(!va&&(Jy(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){dr(t,e,a)}ap(i,e,t);break;case 21:ap(i,e,t);break;case 22:t.mode&1?(va=(n=va)||t.memoizedState!==null,ap(i,e,t),va=n):ap(i,e,t);break;default:ap(i,e,t)}}function NJ(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new gLe),e.forEach(function(n){var s=xLe.bind(null,i,n);t.has(n)||(t.add(n),n.then(s,s))})}}function Pu(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var r=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Uo=a.stateNode,nh=!1;break e;case 3:Uo=a.stateNode.containerInfo,nh=!0;break e;case 4:Uo=a.stateNode.containerInfo,nh=!0;break e}a=a.return}if(Uo===null)throw Error(bt(160));Ode(r,o,s),Uo=null,nh=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){dr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fde(e,i),e=e.sibling}function Fde(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Pu(e,i),Kh(i),n&4){try{IE(3,i,i.return),p3(3,i)}catch(p){dr(i,i.return,p)}try{IE(5,i,i.return)}catch(p){dr(i,i.return,p)}}break;case 1:Pu(e,i),Kh(i),n&512&&t!==null&&Jy(t,t.return);break;case 5:if(Pu(e,i),Kh(i),n&512&&t!==null&&Jy(t,t.return),i.flags&32){var s=i.stateNode;try{GL(s,"")}catch(p){dr(i,i.return,p)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,o=t!==null?t.memoizedProps:r,a=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&rhe(s,r),B7(a,o);var c=B7(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?uhe(s,h):u==="dangerouslySetInnerHTML"?lhe(s,h):u==="children"?GL(s,h):q$(s,u,h,c)}switch(a){case"input":N7(s,r);break;case"textarea":ohe(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?Gb(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?Gb(s,!!r.multiple,r.defaultValue,!0):Gb(s,!!r.multiple,r.multiple?[]:"",!1))}s[e2]=r}catch(p){dr(i,i.return,p)}}break;case 6:if(Pu(e,i),Kh(i),n&4){if(i.stateNode===null)throw Error(bt(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(p){dr(i,i.return,p)}}break;case 3:if(Pu(e,i),Kh(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{XL(e.containerInfo)}catch(p){dr(i,i.return,p)}break;case 4:Pu(e,i),Kh(i);break;case 13:Pu(e,i),Kh(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(TG=Mr())),n&4&&NJ(i);break;case 22:if(u=t!==null&&t.memoizedState!==null,i.mode&1?(va=(c=va)||u,Pu(e,i),va=c):Pu(e,i),Kh(i),n&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!u&&i.mode&1)for(qt=i,u=i.child;u!==null;){for(h=qt=u;qt!==null;){switch(d=qt,f=d.child,d.tag){case 0:case 11:case 14:case 15:IE(4,d,d.return);break;case 1:Jy(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){dr(n,t,p)}}break;case 5:Jy(d,d.return);break;case 22:if(d.memoizedState!==null){PJ(h);continue}}f!==null?(f.return=d,qt=f):PJ(h)}u=u.sibling}e:for(u=null,h=i;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=che("display",o))}catch(p){dr(i,i.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){dr(i,i.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pu(e,i),Kh(i),n&4&&NJ(i);break;case 21:break;default:Pu(e,i),Kh(i)}}function Kh(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(Pde(t)){var n=t;break e}t=t.return}throw Error(bt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(GL(s,""),n.flags&=-33);var r=IJ(i);g9(i,r,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=IJ(i);f9(i,a,o);break;default:throw Error(bt(161))}}catch(l){dr(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function mLe(i,e,t){qt=i,Bde(i)}function Bde(i,e,t){for(var n=(i.mode&1)!==0;qt!==null;){var s=qt,r=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||XM;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||va;a=XM;var c=va;if(XM=o,(va=l)&&!c)for(qt=s;qt!==null;)o=qt,l=o.child,o.tag===22&&o.memoizedState!==null?OJ(s):l!==null?(l.return=o,qt=l):OJ(s);for(;r!==null;)qt=r,Bde(r),r=r.sibling;qt=s,XM=a,va=c}RJ(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,qt=r):RJ(i)}}function RJ(i){for(;qt!==null;){var e=qt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:va||p3(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!va)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Qu(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&vJ(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vJ(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&XL(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}va||e.flags&512&&d9(e)}catch(d){dr(e,e.return,d)}}if(e===i){qt=null;break}if(t=e.sibling,t!==null){t.return=e.return,qt=t;break}qt=e.return}}function PJ(i){for(;qt!==null;){var e=qt;if(e===i){qt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,qt=t;break}qt=e.return}}function OJ(i){for(;qt!==null;){var e=qt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{p3(4,e)}catch(l){dr(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){dr(e,s,l)}}var r=e.return;try{d9(e)}catch(l){dr(e,r,l)}break;case 5:var o=e.return;try{d9(e)}catch(l){dr(e,o,l)}}}catch(l){dr(e,e.return,l)}if(e===i){qt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qt=a;break}qt=e.return}}var _Le=Math.ceil,IN=Bg.ReactCurrentDispatcher,EG=Bg.ReactCurrentOwner,mu=Bg.ReactCurrentBatchConfig,ki=0,No=null,Yr=null,jo=0,cc=0,eb=zm(0),ao=0,o2=null,dv=0,m3=0,LG=0,NE=null,kl=null,TG=0,Fw=1/0,Af=null,NN=!1,p9=null,rm=null,YM=!1,Wp=null,RN=0,RE=0,m9=null,pI=-1,mI=0;function nl(){return ki&6?Mr():pI!==-1?pI:pI=Mr()}function om(i){return i.mode&1?ki&2&&jo!==0?jo&-jo:eLe.transition!==null?(mI===0&&(mI=Che()),mI):(i=ns,i!==0||(i=window.event,i=i===void 0?16:Mhe(i.type)),i):1}function mh(i,e,t,n){if(50<RE)throw RE=0,m9=null,Error(bt(185));PT(i,t,n),(!(ki&2)||i!==No)&&(i===No&&(!(ki&2)&&(m3|=t),ao===4&&Rp(i,jo)),Ul(i,n),t===1&&ki===0&&!(e.mode&1)&&(Fw=Mr()+500,d3&&Um()))}function Ul(i,e){var t=i.callbackNode;eEe(i,e);var n=_N(i,i===No?jo:0);if(n===0)t!==null&&GQ(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&GQ(t),e===1)i.tag===0?JEe(FJ.bind(null,i)):qhe(FJ.bind(null,i)),XEe(function(){!(ki&6)&&Um()}),t=null;else{switch(She(n)){case 1:t=J$;break;case 4:t=bhe;break;case 16:t=mN;break;case 536870912:t=whe;break;default:t=mN}t=jde(t,zde.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function zde(i,e){if(pI=-1,mI=0,ki&6)throw Error(bt(327));var t=i.callbackNode;if(Yb()&&i.callbackNode!==t)return null;var n=_N(i,i===No?jo:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=PN(i,n);else{e=n;var s=ki;ki|=2;var r=Vde();(No!==i||jo!==e)&&(Af=null,Fw=Mr()+500,O0(i,e));do try{bLe();break}catch(a){Ude(i,a)}while(!0);dG(),IN.current=r,ki=s,Yr!==null?e=0:(No=null,jo=0,e=ao)}if(e!==0){if(e===2&&(s=H7(i),s!==0&&(n=s,e=_9(i,s))),e===1)throw t=o2,O0(i,0),Rp(i,n),Ul(i,Mr()),t;if(e===6)Rp(i,n);else{if(s=i.current.alternate,!(n&30)&&!vLe(s)&&(e=PN(i,n),e===2&&(r=H7(i),r!==0&&(n=r,e=_9(i,r))),e===1))throw t=o2,O0(i,0),Rp(i,n),Ul(i,Mr()),t;switch(i.finishedWork=s,i.finishedLanes=n,e){case 0:case 1:throw Error(bt(345));case 2:B_(i,kl,Af);break;case 3:if(Rp(i,n),(n&130023424)===n&&(e=TG+500-Mr(),10<e)){if(_N(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){nl(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=Z7(B_.bind(null,i,kl,Af),e);break}B_(i,kl,Af);break;case 4:if(Rp(i,n),(n&4194240)===n)break;for(e=i.eventTimes,s=-1;0<n;){var o=31-ph(n);r=1<<o,o=e[o],o>s&&(s=o),n&=~r}if(n=s,n=Mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_Le(n/1960))-n,10<n){i.timeoutHandle=Z7(B_.bind(null,i,kl,Af),n);break}B_(i,kl,Af);break;case 5:B_(i,kl,Af);break;default:throw Error(bt(329))}}}return Ul(i,Mr()),i.callbackNode===t?zde.bind(null,i):null}function _9(i,e){var t=NE;return i.current.memoizedState.isDehydrated&&(O0(i,e).flags|=256),i=PN(i,e),i!==2&&(e=kl,kl=t,e!==null&&v9(e)),i}function v9(i){kl===null?kl=i:kl.push.apply(kl,i)}function vLe(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],r=s.getSnapshot;s=s.value;try{if(!bh(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rp(i,e){for(e&=~LG,e&=~m3,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-ph(e),n=1<<t;i[t]=-1,e&=~n}}function FJ(i){if(ki&6)throw Error(bt(327));Yb();var e=_N(i,0);if(!(e&1))return Ul(i,Mr()),null;var t=PN(i,e);if(i.tag!==0&&t===2){var n=H7(i);n!==0&&(e=n,t=_9(i,n))}if(t===1)throw t=o2,O0(i,0),Rp(i,e),Ul(i,Mr()),t;if(t===6)throw Error(bt(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,B_(i,kl,Af),Ul(i,Mr()),null}function kG(i,e){var t=ki;ki|=1;try{return i(e)}finally{ki=t,ki===0&&(Fw=Mr()+500,d3&&Um())}}function fv(i){Wp!==null&&Wp.tag===0&&!(ki&6)&&Yb();var e=ki;ki|=1;var t=mu.transition,n=ns;try{if(mu.transition=null,ns=1,i)return i()}finally{ns=n,mu.transition=t,ki=e,!(ki&6)&&Um()}}function MG(){cc=eb.current,Ms(eb)}function O0(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,qEe(t)),Yr!==null)for(t=Yr.return;t!==null;){var n=t;switch(cG(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&CN();break;case 3:Pw(),Ms(Bl),Ms(Ta),vG();break;case 5:_G(n);break;case 4:Pw();break;case 13:Ms($s);break;case 19:Ms($s);break;case 10:fG(n.type._context);break;case 22:case 23:MG()}t=t.return}if(No=i,Yr=i=am(i.current,null),jo=cc=e,ao=0,o2=null,LG=m3=dv=0,kl=NE=null,C0!==null){for(e=0;e<C0.length;e++)if(t=C0[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,n.next=o}t.pending=n}C0=null}return i}function Ude(i,e){do{var t=Yr;try{if(dG(),dI.current=AN,DN){for(var n=er.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}DN=!1}if(hv=0,Mo=so=er=null,AE=!1,i2=0,EG.current=null,t===null||t.return===null){ao=1,o2=e,Yr=null;break}e:{var r=i,o=t.return,a=t,l=e;if(e=jo,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=xJ(o);if(f!==null){f.flags&=-257,EJ(f,o,a,r,e),f.mode&1&&SJ(r,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){SJ(r,c,e),DG();break e}l=Error(bt(426))}}else if(Os&&a.mode&1){var _=xJ(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),EJ(_,o,a,r,e),uG(Ow(l,a));break e}}r=l=Ow(l,a),ao!==4&&(ao=2),NE===null?NE=[r]:NE.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var m=Sde(r,l,e);_J(r,m);break e;case 1:a=l;var v=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rm===null||!rm.has(y)))){r.flags|=65536,e&=-e,r.lanes|=e;var C=xde(r,a,e);_J(r,C);break e}}r=r.return}while(r!==null)}Hde(t)}catch(S){e=S,Yr===t&&t!==null&&(Yr=t=t.return);continue}break}while(!0)}function Vde(){var i=IN.current;return IN.current=AN,i===null?AN:i}function DG(){(ao===0||ao===3||ao===2)&&(ao=4),No===null||!(dv&268435455)&&!(m3&268435455)||Rp(No,jo)}function PN(i,e){var t=ki;ki|=2;var n=Vde();(No!==i||jo!==e)&&(Af=null,O0(i,e));do try{yLe();break}catch(s){Ude(i,s)}while(!0);if(dG(),ki=t,IN.current=n,Yr!==null)throw Error(bt(261));return No=null,jo=0,ao}function yLe(){for(;Yr!==null;)Wde(Yr)}function bLe(){for(;Yr!==null&&!Gxe();)Wde(Yr)}function Wde(i){var e=Gde(i.alternate,i,cc);i.memoizedProps=i.pendingProps,e===null?Hde(i):Yr=e,EG.current=null}function Hde(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=fLe(t,e),t!==null){t.flags&=32767,Yr=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ao=6,Yr=null;return}}else if(t=dLe(t,e,cc),t!==null){Yr=t;return}if(e=e.sibling,e!==null){Yr=e;return}Yr=e=i}while(e!==null);ao===0&&(ao=5)}function B_(i,e,t){var n=ns,s=mu.transition;try{mu.transition=null,ns=1,wLe(i,e,t,n)}finally{mu.transition=s,ns=n}return null}function wLe(i,e,t,n){do Yb();while(Wp!==null);if(ki&6)throw Error(bt(327));t=i.finishedWork;var s=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(bt(177));i.callbackNode=null,i.callbackPriority=0;var r=t.lanes|t.childLanes;if(tEe(i,r),i===No&&(Yr=No=null,jo=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||YM||(YM=!0,jde(mN,function(){return Yb(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=mu.transition,mu.transition=null;var o=ns;ns=1;var a=ki;ki|=4,EG.current=null,pLe(i,t),Fde(t,i),VEe(X7),vN=!!q7,X7=q7=null,i.current=t,mLe(t),jxe(),ki=a,ns=o,mu.transition=r}else i.current=t;if(YM&&(YM=!1,Wp=i,RN=s),r=i.pendingLanes,r===0&&(rm=null),Xxe(t.stateNode),Ul(i,Mr()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(NN)throw NN=!1,i=p9,p9=null,i;return RN&1&&i.tag!==0&&Yb(),r=i.pendingLanes,r&1?i===m9?RE++:(RE=0,m9=i):RE=0,Um(),null}function Yb(){if(Wp!==null){var i=She(RN),e=mu.transition,t=ns;try{if(mu.transition=null,ns=16>i?16:i,Wp===null)var n=!1;else{if(i=Wp,Wp=null,RN=0,ki&6)throw Error(bt(331));var s=ki;for(ki|=4,qt=i.current;qt!==null;){var r=qt,o=r.child;if(qt.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(qt=c;qt!==null;){var u=qt;switch(u.tag){case 0:case 11:case 15:IE(8,u,r)}var h=u.child;if(h!==null)h.return=u,qt=h;else for(;qt!==null;){u=qt;var d=u.sibling,f=u.return;if(Rde(u),u===c){qt=null;break}if(d!==null){d.return=f,qt=d;break}qt=f}}}var g=r.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var _=p.sibling;p.sibling=null,p=_}while(p!==null)}}qt=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,qt=o;else e:for(;qt!==null;){if(r=qt,r.flags&2048)switch(r.tag){case 0:case 11:case 15:IE(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,qt=m;break e}qt=r.return}}var v=i.current;for(qt=v;qt!==null;){o=qt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,qt=y;else e:for(o=v;qt!==null;){if(a=qt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p3(9,a)}}catch(S){dr(a,a.return,S)}if(a===o){qt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,qt=C;break e}qt=a.return}}if(ki=s,Um(),Td&&typeof Td.onPostCommitFiberRoot=="function")try{Td.onPostCommitFiberRoot(a3,i)}catch{}n=!0}return n}finally{ns=t,mu.transition=e}}return!1}function BJ(i,e,t){e=Ow(t,e),e=Sde(i,e,1),i=sm(i,e,1),e=nl(),i!==null&&(PT(i,1,e),Ul(i,e))}function dr(i,e,t){if(i.tag===3)BJ(i,i,t);else for(;e!==null;){if(e.tag===3){BJ(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rm===null||!rm.has(n))){i=Ow(t,i),i=xde(e,i,1),e=sm(e,i,1),i=nl(),e!==null&&(PT(e,1,i),Ul(e,i));break}}e=e.return}}function CLe(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=nl(),i.pingedLanes|=i.suspendedLanes&t,No===i&&(jo&t)===t&&(ao===4||ao===3&&(jo&130023424)===jo&&500>Mr()-TG?O0(i,0):LG|=t),Ul(i,e)}function $de(i,e){e===0&&(i.mode&1?(e=UM,UM<<=1,!(UM&130023424)&&(UM=4194304)):e=1);var t=nl();i=Mg(i,e),i!==null&&(PT(i,e,t),Ul(i,t))}function SLe(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),$de(i,t)}function xLe(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(bt(314))}n!==null&&n.delete(e),$de(i,t)}var Gde;Gde=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Bl.current)Rl=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Rl=!1,hLe(i,e,t);Rl=!!(i.flags&131072)}else Rl=!1,Os&&e.flags&1048576&&Xhe(e,EN,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;gI(i,e),i=e.pendingProps;var s=Iw(e,Ta.current);Xb(e,t),s=bG(null,e,n,i,s,t);var r=wG();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zl(n)?(r=!0,SN(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pG(e),s.updater=g3,e.stateNode=s,s._reactInternals=e,s9(e,n,i,t),e=a9(null,e,n,!0,r,t)):(e.tag=0,Os&&r&&lG(e),Xa(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(gI(i,e),i=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=LLe(n),i=Qu(n,i),s){case 0:e=o9(null,e,n,i,t);break e;case 1:e=kJ(null,e,n,i,t);break e;case 11:e=LJ(null,e,n,i,t);break e;case 14:e=TJ(null,e,n,Qu(n.type,i),t);break e}throw Error(bt(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qu(n,s),o9(i,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qu(n,s),kJ(i,e,n,s,t);case 3:e:{if(kde(e),i===null)throw Error(bt(387));n=e.pendingProps,r=e.memoizedState,s=r.element,tde(i,e),kN(e,n,null,t);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Ow(Error(bt(423)),e),e=MJ(i,e,n,t,s);break e}else if(n!==s){s=Ow(Error(bt(424)),e),e=MJ(i,e,n,t,s);break e}else for(fc=im(e.stateNode.containerInfo.firstChild),vc=e,Os=!0,ih=null,t=Jhe(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Nw(),n===s){e=Dg(i,e,t);break e}Xa(i,e,n,t)}e=e.child}return e;case 5:return nde(e),i===null&&t9(e),n=e.type,s=e.pendingProps,r=i!==null?i.memoizedProps:null,o=s.children,Y7(n,s)?o=null:r!==null&&Y7(n,r)&&(e.flags|=32),Tde(i,e),Xa(i,e,o,t),e.child;case 6:return i===null&&t9(e),null;case 13:return Mde(i,e,t);case 4:return mG(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Rw(e,null,n,t):Xa(i,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qu(n,s),LJ(i,e,n,s,t);case 7:return Xa(i,e,e.pendingProps,t),e.child;case 8:return Xa(i,e,e.pendingProps.children,t),e.child;case 12:return Xa(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Ls(LN,n._currentValue),n._currentValue=o,r!==null)if(bh(r.value,o)){if(r.children===s.children&&!Bl.current){e=Dg(i,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(r.tag===1){l=pg(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),n9(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(bt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),n9(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Xa(i,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Xb(e,t),s=bu(s),n=n(s),e.flags|=1,Xa(i,e,n,t),e.child;case 14:return n=e.type,s=Qu(n,e.pendingProps),s=Qu(n.type,s),TJ(i,e,n,s,t);case 15:return Ede(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Qu(n,s),gI(i,e),e.tag=1,zl(n)?(i=!0,SN(e)):i=!1,Xb(e,t),Cde(e,n,s),s9(e,n,s,t),a9(null,e,n,!0,i,t);case 19:return Dde(i,e,t);case 22:return Lde(i,e,t)}throw Error(bt(156,e.tag))};function jde(i,e){return yhe(i,e)}function ELe(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hu(i,e,t,n){return new ELe(i,e,t,n)}function AG(i){return i=i.prototype,!(!i||!i.isReactComponent)}function LLe(i){if(typeof i=="function")return AG(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Y$)return 11;if(i===Z$)return 14}return 2}function am(i,e){var t=i.alternate;return t===null?(t=hu(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function _I(i,e,t,n,s,r){var o=2;if(n=i,typeof i=="function")AG(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case $y:return F0(t.children,s,r,e);case X$:o=8,s|=8;break;case k7:return i=hu(12,t,e,s|2),i.elementType=k7,i.lanes=r,i;case M7:return i=hu(13,t,e,s),i.elementType=M7,i.lanes=r,i;case D7:return i=hu(19,t,e,s),i.elementType=D7,i.lanes=r,i;case nhe:return _3(t,s,r,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ehe:o=10;break e;case the:o=9;break e;case Y$:o=11;break e;case Z$:o=14;break e;case xp:o=16,n=null;break e}throw Error(bt(130,i==null?i:typeof i,""))}return e=hu(o,t,e,s),e.elementType=i,e.type=n,e.lanes=r,e}function F0(i,e,t,n){return i=hu(7,i,n,e),i.lanes=t,i}function _3(i,e,t,n){return i=hu(22,i,n,e),i.elementType=nhe,i.lanes=t,i.stateNode={isHidden:!1},i}function vB(i,e,t){return i=hu(6,i,null,e),i.lanes=t,i}function yB(i,e,t){return e=hu(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function TLe(i,e,t,n,s){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=JF(0),this.expirationTimes=JF(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=JF(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function IG(i,e,t,n,s,r,o,a,l){return i=new TLe(i,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=hu(3,null,null,e),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pG(r),i}function kLe(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hy,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function Kde(i){if(!i)return Cm;i=i._reactInternals;e:{if(Kv(i)!==i||i.tag!==1)throw Error(bt(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(bt(171))}if(i.tag===1){var t=i.type;if(zl(t))return Khe(i,t,e)}return e}function qde(i,e,t,n,s,r,o,a,l){return i=IG(t,n,!0,i,s,r,o,a,l),i.context=Kde(null),t=i.current,n=nl(),s=om(t),r=pg(n,s),r.callback=e??null,sm(t,r,s),i.current.lanes=s,PT(i,s,n),Ul(i,n),i}function v3(i,e,t,n){var s=e.current,r=nl(),o=om(s);return t=Kde(t),e.context===null?e.context=t:e.pendingContext=t,e=pg(r,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=sm(s,e,o),i!==null&&(mh(i,s,o,r),hI(i,s,o)),o}function ON(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function zJ(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function NG(i,e){zJ(i,e),(i=i.alternate)&&zJ(i,e)}function MLe(){return null}var Xde=typeof reportError=="function"?reportError:function(i){console.error(i)};function RG(i){this._internalRoot=i}y3.prototype.render=RG.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(bt(409));v3(i,e,null,null)};y3.prototype.unmount=RG.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;fv(function(){v3(null,i,null,null)}),e[kg]=null}};function y3(i){this._internalRoot=i}y3.prototype.unstable_scheduleHydration=function(i){if(i){var e=Lhe();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Np.length&&e!==0&&e<Np[t].priority;t++);Np.splice(t,0,i),t===0&&khe(i)}};function PG(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function b3(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function UJ(){}function DLe(i,e,t,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var c=ON(o);r.call(c)}}var o=qde(e,n,i,0,null,!1,!1,"",UJ);return i._reactRootContainer=o,i[kg]=o.current,QL(i.nodeType===8?i.parentNode:i),fv(),o}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=ON(l);a.call(c)}}var l=IG(i,0,!1,null,null,!1,!1,"",UJ);return i._reactRootContainer=l,i[kg]=l.current,QL(i.nodeType===8?i.parentNode:i),fv(function(){v3(e,l,t,n)}),l}function w3(i,e,t,n,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=ON(o);a.call(l)}}v3(e,o,i,s)}else o=DLe(t,e,i,s,n);return ON(o)}xhe=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=rE(e.pendingLanes);t!==0&&(eG(e,t|1),Ul(e,Mr()),!(ki&6)&&(Fw=Mr()+500,Um()))}break;case 13:fv(function(){var n=Mg(i,1);if(n!==null){var s=nl();mh(n,i,1,s)}}),NG(i,1)}};tG=function(i){if(i.tag===13){var e=Mg(i,134217728);if(e!==null){var t=nl();mh(e,i,134217728,t)}NG(i,134217728)}};Ehe=function(i){if(i.tag===13){var e=om(i),t=Mg(i,e);if(t!==null){var n=nl();mh(t,i,e,n)}NG(i,e)}};Lhe=function(){return ns};The=function(i,e){var t=ns;try{return ns=i,e()}finally{ns=t}};U7=function(i,e,t){switch(e){case"input":if(N7(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var s=h3(n);if(!s)throw Error(bt(90));she(n),N7(n,s)}}}break;case"textarea":ohe(i,t);break;case"select":e=t.value,e!=null&&Gb(i,!!t.multiple,e,!1)}};fhe=kG;ghe=fv;var ALe={usingClientEntryPoint:!1,Events:[FT,qy,h3,hhe,dhe,kG]},VS={findFiberByHostInstance:w0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ILe={bundleType:VS.bundleType,version:VS.version,rendererPackageName:VS.rendererPackageName,rendererConfig:VS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bg.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_he(i),i===null?null:i.stateNode},findFiberByHostInstance:VS.findFiberByHostInstance||MLe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZM.isDisabled&&ZM.supportsFiber)try{a3=ZM.inject(ILe),Td=ZM}catch{}}Tc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ALe;Tc.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PG(e))throw Error(bt(200));return kLe(i,e,null,t)};Tc.createRoot=function(i,e){if(!PG(i))throw Error(bt(299));var t=!1,n="",s=Xde;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=IG(i,1,!1,null,null,t,!1,n,s),i[kg]=e.current,QL(i.nodeType===8?i.parentNode:i),new RG(e)};Tc.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(bt(188)):(i=Object.keys(i).join(","),Error(bt(268,i)));return i=_he(e),i=i===null?null:i.stateNode,i};Tc.flushSync=function(i){return fv(i)};Tc.hydrate=function(i,e,t){if(!b3(e))throw Error(bt(200));return w3(null,i,e,!0,t)};Tc.hydrateRoot=function(i,e,t){if(!PG(i))throw Error(bt(405));var n=t!=null&&t.hydratedSources||null,s=!1,r="",o=Xde;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qde(e,null,i,1,t??null,s,!1,r,o),i[kg]=e.current,QL(i),n)for(i=0;i<n.length;i++)t=n[i],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new y3(e)};Tc.render=function(i,e,t){if(!b3(e))throw Error(bt(200));return w3(null,i,e,!1,t)};Tc.unmountComponentAtNode=function(i){if(!b3(i))throw Error(bt(40));return i._reactRootContainer?(fv(function(){w3(null,null,i,!1,function(){i._reactRootContainer=null,i[kg]=null})}),!0):!1};Tc.unstable_batchedUpdates=kG;Tc.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!b3(t))throw Error(bt(200));if(i==null||i._reactInternals===void 0)throw Error(bt(38));return w3(i,e,t,!1,n)};Tc.version="18.3.1-next-f1338f8080-20240426";function Yde(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yde)}catch(i){console.error(i)}}Yde(),Yue.exports=Tc;var zT=Yue.exports;const sg=Mi(zT);var OG,VJ=zT;OG=VJ.createRoot,VJ.hydrateRoot;function NLe(){}var RLe=NLe;const li=Mi(RLe);var PLe=Array.isArray,Mc=PLe;const OLe=Mi(Mc);var FLe=typeof Wy=="object"&&Wy&&Wy.Object===Object&&Wy,Zde=FLe,BLe=Zde,zLe=typeof self=="object"&&self&&self.Object===Object&&self,ULe=BLe||zLe||Function("return this")(),Dh=ULe,VLe=Dh,WLe=VLe.Symbol,TC=WLe,WJ=TC,Qde=Object.prototype,HLe=Qde.hasOwnProperty,$Le=Qde.toString,WS=WJ?WJ.toStringTag:void 0;function GLe(i){var e=HLe.call(i,WS),t=i[WS];try{i[WS]=void 0;var n=!0}catch{}var s=$Le.call(i);return n&&(e?i[WS]=t:delete i[WS]),s}var jLe=GLe,KLe=Object.prototype,qLe=KLe.toString;function XLe(i){return qLe.call(i)}var YLe=XLe,HJ=TC,ZLe=jLe,QLe=YLe,JLe="[object Null]",e2e="[object Undefined]",$J=HJ?HJ.toStringTag:void 0;function t2e(i){return i==null?i===void 0?e2e:JLe:$J&&$J in Object(i)?ZLe(i):QLe(i)}var zg=t2e;function n2e(i){return i!=null&&typeof i=="object"}var Du=n2e,i2e=zg,s2e=Du,r2e="[object Symbol]";function o2e(i){return typeof i=="symbol"||s2e(i)&&i2e(i)==r2e}var C3=o2e,a2e=Mc,l2e=C3,c2e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u2e=/^\w*$/;function h2e(i,e){if(a2e(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||l2e(i)?!0:u2e.test(i)||!c2e.test(i)||e!=null&&i in Object(e)}var d2e=h2e;function f2e(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Ah=f2e,g2e=zg,p2e=Ah,m2e="[object AsyncFunction]",_2e="[object Function]",v2e="[object GeneratorFunction]",y2e="[object Proxy]";function b2e(i){if(!p2e(i))return!1;var e=g2e(i);return e==_2e||e==v2e||e==m2e||e==y2e}var S3=b2e;const x3=Mi(S3);var w2e=Dh,C2e=w2e["__core-js_shared__"],S2e=C2e,bB=S2e,GJ=function(){var i=/[^.]+$/.exec(bB&&bB.keys&&bB.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function x2e(i){return!!GJ&&GJ in i}var E2e=x2e,L2e=Function.prototype,T2e=L2e.toString;function k2e(i){if(i!=null){try{return T2e.call(i)}catch{}try{return i+""}catch{}}return""}var Jde=k2e,M2e=S3,D2e=E2e,A2e=Ah,I2e=Jde,N2e=/[\\^$.*+?()[\]{}|]/g,R2e=/^\[object .+?Constructor\]$/,P2e=Function.prototype,O2e=Object.prototype,F2e=P2e.toString,B2e=O2e.hasOwnProperty,z2e=RegExp("^"+F2e.call(B2e).replace(N2e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function U2e(i){if(!A2e(i)||D2e(i))return!1;var e=M2e(i)?z2e:R2e;return e.test(I2e(i))}var V2e=U2e;function W2e(i,e){return i==null?void 0:i[e]}var H2e=W2e,$2e=V2e,G2e=H2e;function j2e(i,e){var t=G2e(i,e);return $2e(t)?t:void 0}var qv=j2e,K2e=qv,q2e=K2e(Object,"create"),E3=q2e,jJ=E3;function X2e(){this.__data__=jJ?jJ(null):{},this.size=0}var Y2e=X2e;function Z2e(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var Q2e=Z2e,J2e=E3,eTe="__lodash_hash_undefined__",tTe=Object.prototype,nTe=tTe.hasOwnProperty;function iTe(i){var e=this.__data__;if(J2e){var t=e[i];return t===eTe?void 0:t}return nTe.call(e,i)?e[i]:void 0}var sTe=iTe,rTe=E3,oTe=Object.prototype,aTe=oTe.hasOwnProperty;function lTe(i){var e=this.__data__;return rTe?e[i]!==void 0:aTe.call(e,i)}var cTe=lTe,uTe=E3,hTe="__lodash_hash_undefined__";function dTe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=uTe&&e===void 0?hTe:e,this}var fTe=dTe,gTe=Y2e,pTe=Q2e,mTe=sTe,_Te=cTe,vTe=fTe;function kC(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}kC.prototype.clear=gTe;kC.prototype.delete=pTe;kC.prototype.get=mTe;kC.prototype.has=_Te;kC.prototype.set=vTe;var yTe=kC;function bTe(){this.__data__=[],this.size=0}var wTe=bTe;function CTe(i,e){return i===e||i!==i&&e!==e}var UT=CTe,STe=UT;function xTe(i,e){for(var t=i.length;t--;)if(STe(i[t][0],e))return t;return-1}var L3=xTe,ETe=L3,LTe=Array.prototype,TTe=LTe.splice;function kTe(i){var e=this.__data__,t=ETe(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():TTe.call(e,t,1),--this.size,!0}var MTe=kTe,DTe=L3;function ATe(i){var e=this.__data__,t=DTe(e,i);return t<0?void 0:e[t][1]}var ITe=ATe,NTe=L3;function RTe(i){return NTe(this.__data__,i)>-1}var PTe=RTe,OTe=L3;function FTe(i,e){var t=this.__data__,n=OTe(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var BTe=FTe,zTe=wTe,UTe=MTe,VTe=ITe,WTe=PTe,HTe=BTe;function MC(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}MC.prototype.clear=zTe;MC.prototype.delete=UTe;MC.prototype.get=VTe;MC.prototype.has=WTe;MC.prototype.set=HTe;var T3=MC,$Te=qv,GTe=Dh,jTe=$Te(GTe,"Map"),FG=jTe,KJ=yTe,KTe=T3,qTe=FG;function XTe(){this.size=0,this.__data__={hash:new KJ,map:new(qTe||KTe),string:new KJ}}var YTe=XTe;function ZTe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var QTe=ZTe,JTe=QTe;function eke(i,e){var t=i.__data__;return JTe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var k3=eke,tke=k3;function nke(i){var e=tke(this,i).delete(i);return this.size-=e?1:0,e}var ike=nke,ske=k3;function rke(i){return ske(this,i).get(i)}var oke=rke,ake=k3;function lke(i){return ake(this,i).has(i)}var cke=lke,uke=k3;function hke(i,e){var t=uke(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var dke=hke,fke=YTe,gke=ike,pke=oke,mke=cke,_ke=dke;function DC(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}DC.prototype.clear=fke;DC.prototype.delete=gke;DC.prototype.get=pke;DC.prototype.has=mke;DC.prototype.set=_ke;var BG=DC,efe=BG,vke="Expected a function";function zG(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(vke);var t=function(){var n=arguments,s=e?e.apply(this,n):n[0],r=t.cache;if(r.has(s))return r.get(s);var o=i.apply(this,n);return t.cache=r.set(s,o)||r,o};return t.cache=new(zG.Cache||efe),t}zG.Cache=efe;var yke=zG,bke=yke,wke=500;function Cke(i){var e=bke(i,function(n){return t.size===wke&&t.clear(),n}),t=e.cache;return e}var Ske=Cke,xke=Ske,Eke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lke=/\\(\\)?/g,Tke=xke(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(Eke,function(t,n,s,r){e.push(s?r.replace(Lke,"$1"):n||t)}),e}),kke=Tke;function Mke(i,e){for(var t=-1,n=i==null?0:i.length,s=Array(n);++t<n;)s[t]=e(i[t],t,i);return s}var UG=Mke,qJ=TC,Dke=UG,Ake=Mc,Ike=C3,Nke=1/0,XJ=qJ?qJ.prototype:void 0,YJ=XJ?XJ.toString:void 0;function tfe(i){if(typeof i=="string")return i;if(Ake(i))return Dke(i,tfe)+"";if(Ike(i))return YJ?YJ.call(i):"";var e=i+"";return e=="0"&&1/i==-Nke?"-0":e}var Rke=tfe,Pke=Rke;function Oke(i){return i==null?"":Pke(i)}var Fke=Oke,Bke=Mc,zke=d2e,Uke=kke,Vke=Fke;function Wke(i,e){return Bke(i)?i:zke(i,e)?[i]:Uke(Vke(i))}var VG=Wke,Hke=C3,$ke=1/0;function Gke(i){if(typeof i=="string"||Hke(i))return i;var e=i+"";return e=="0"&&1/i==-$ke?"-0":e}var nfe=Gke,jke=VG,Kke=nfe;function qke(i,e){e=jke(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[Kke(e[t++])];return t&&t==n?i:void 0}var ife=qke,Xke=ife;function Yke(i,e,t){var n=i==null?void 0:Xke(i,e);return n===void 0?t:n}var Zke=Yke;const ts=Mi(Zke),sfe=function(i){if(ts(process,"env.NODE_ENV")==="development"){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console.log(i,...t)}};class Dc{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:li,getProps:li,getState:li,getStates:li,setState:li,getContext:li,getContexts:li,getCache:li,setCache:li,getCaches:li,stopPropagation:li,persistEvent:li}}constructor(e){this._adapter=Object.assign(Object.assign({},Dc.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"value";const t=this.getProps();return e in t}_isInProps(e){const t=this.getProps();return e in t}init(e){}destroy(){}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];sfe(e,...n)}_persistEvent(e){this._adapter.persistEvent(e)}}function WG(i){return Object.keys(i).reduce((e,t)=>(t.substr(0,5)==="data-"&&(e[t]=i[t]),e),{})}const{hasOwnProperty:Qke}=Object.prototype;class Aa extends G.Component{constructor(e){super(e),this.isControlled=t=>!!(t&&this.props&&typeof this.props=="object"&&Qke.call(this.props,t)),this.setStateAsync=t=>new Promise(n=>{this.setState(t,n)}),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&typeof this.foundation.init=="function"&&this.foundation.init()}componentWillUnmount(){this.foundation&&typeof this.foundation.destroy=="function"&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch{}},persistEvent:e=>{e&&e.persist&&typeof e.persist=="function"&&e.persist()}}}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return sfe(e,...n)}getDataAttr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return WG(e)}}Aa.propTypes={};Aa.defaultProps={};var Jke=Dh,eMe=function(){return Jke.Date.now()},tMe=eMe,nMe=/\s/;function iMe(i){for(var e=i.length;e--&&nMe.test(i.charAt(e)););return e}var sMe=iMe,rMe=sMe,oMe=/^\s+/;function aMe(i){return i&&i.slice(0,rMe(i)+1).replace(oMe,"")}var lMe=aMe,cMe=lMe,ZJ=Ah,uMe=C3,QJ=NaN,hMe=/^[-+]0x[0-9a-f]+$/i,dMe=/^0b[01]+$/i,fMe=/^0o[0-7]+$/i,gMe=parseInt;function pMe(i){if(typeof i=="number")return i;if(uMe(i))return QJ;if(ZJ(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=ZJ(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=cMe(i);var t=dMe.test(i);return t||fMe.test(i)?gMe(i.slice(2),t?2:8):hMe.test(i)?QJ:+i}var mMe=pMe,_Me=Ah,wB=tMe,JJ=mMe,vMe="Expected a function",yMe=Math.max,bMe=Math.min;function wMe(i,e,t){var n,s,r,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof i!="function")throw new TypeError(vMe);e=JJ(e)||0,_Me(t)&&(u=!!t.leading,h="maxWait"in t,r=h?yMe(JJ(t.maxWait)||0,e):r,d="trailing"in t?!!t.trailing:d);function f(x){var E=n,L=s;return n=s=void 0,c=x,o=i.apply(L,E),o}function g(x){return c=x,a=setTimeout(m,e),u?f(x):o}function p(x){var E=x-l,L=x-c,T=e-E;return h?bMe(T,r-L):T}function _(x){var E=x-l,L=x-c;return l===void 0||E>=e||E<0||h&&L>=r}function m(){var x=wB();if(_(x))return v(x);a=setTimeout(m,p(x))}function v(x){return a=void 0,d&&n?f(x):(n=s=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,n=l=s=a=void 0}function C(){return a===void 0?o:v(wB())}function S(){var x=wB(),E=_(x);if(n=arguments,s=this,l=x,E){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return S.cancel=y,S.flush=C,S}var CMe=wMe,SMe=CMe,xMe=Ah,EMe="Expected a function";function LMe(i,e,t){var n=!0,s=!0;if(typeof i!="function")throw new TypeError(EMe);return xMe(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),SMe(i,e,{leading:n,maxWait:e,trailing:s})}var TMe=LMe;const eee=Mi(TMe);var rfe={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var r="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(r=s(r,n(a)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var a in r)e.call(r,a)&&r[a]&&(o=s(o,a));return o}function s(r,o){return o?r?r+" "+o:r+o:r}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(rfe);var kMe=rfe.exports;const It=Mi(kMe);var ofe={exports:{}},MMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DMe=MMe,AMe=DMe;function afe(){}function lfe(){}lfe.resetWarningCache=afe;var IMe=function(){function i(n,s,r,o,a,l){if(l!==AMe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}i.isRequired=i;function e(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lfe,resetWarningCache:afe};return t.PropTypes=t,t};ofe.exports=IMe();var vt=ofe.exports;const B=Mi(vt),$i="semi",M3={PREFIX:`${$i}-typography`},Sa={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small","inherit"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]};var NMe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const RMe=M3.PREFIX;let D3=class extends G.PureComponent{render(){const e=this.props,{component:t,className:n,children:s,forwardRef:r}=e,o=NMe(e,["component","className","children","forwardRef"]),a=t,l=It(RMe,n);return re.createElement(a,Object.assign({className:l,ref:r},o),s)}};D3.defaultProps={component:"article",style:{},className:""};D3.propTypes={component:B.string,style:B.object,className:B.string};function PMe(i){return i===null}var OMe=PMe;const FMe=Mi(OMe);var BMe=zg,zMe=Mc,UMe=Du,VMe="[object String]";function WMe(i){return typeof i=="string"||!zMe(i)&&UMe(i)&&BMe(i)==VMe}var HMe=WMe;const Zb=Mi(HMe);var $Me=T3;function GMe(){this.__data__=new $Me,this.size=0}var jMe=GMe;function KMe(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var qMe=KMe;function XMe(i){return this.__data__.get(i)}var YMe=XMe;function ZMe(i){return this.__data__.has(i)}var QMe=ZMe,JMe=T3,eDe=FG,tDe=BG,nDe=200;function iDe(i,e){var t=this.__data__;if(t instanceof JMe){var n=t.__data__;if(!eDe||n.length<nDe-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new tDe(n)}return t.set(i,e),this.size=t.size,this}var sDe=iDe,rDe=T3,oDe=jMe,aDe=qMe,lDe=YMe,cDe=QMe,uDe=sDe;function AC(i){var e=this.__data__=new rDe(i);this.size=e.size}AC.prototype.clear=oDe;AC.prototype.delete=aDe;AC.prototype.get=lDe;AC.prototype.has=cDe;AC.prototype.set=uDe;var HG=AC,hDe=qv,dDe=function(){try{var i=hDe(Object,"defineProperty");return i({},"",{}),i}catch{}}(),cfe=dDe,tee=cfe;function fDe(i,e,t){e=="__proto__"&&tee?tee(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var $G=fDe,gDe=$G,pDe=UT;function mDe(i,e,t){(t!==void 0&&!pDe(i[e],t)||t===void 0&&!(e in i))&&gDe(i,e,t)}var ufe=mDe;function _De(i){return function(e,t,n){for(var s=-1,r=Object(e),o=n(e),a=o.length;a--;){var l=o[i?a:++s];if(t(r[l],l,r)===!1)break}return e}}var vDe=_De,yDe=vDe,bDe=yDe(),hfe=bDe,FN={exports:{}};FN.exports;(function(i,e){var t=Dh,n=e&&!e.nodeType&&e,s=n&&!0&&i&&!i.nodeType&&i,r=s&&s.exports===n,o=r?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,d=a?a(h):new c.constructor(h);return c.copy(d),d}i.exports=l})(FN,FN.exports);var dfe=FN.exports,wDe=Dh,CDe=wDe.Uint8Array,ffe=CDe,nee=ffe;function SDe(i){var e=new i.constructor(i.byteLength);return new nee(e).set(new nee(i)),e}var GG=SDe,xDe=GG;function EDe(i,e){var t=e?xDe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var gfe=EDe;function LDe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var pfe=LDe,TDe=Ah,iee=Object.create,kDe=function(){function i(){}return function(e){if(!TDe(e))return{};if(iee)return iee(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),MDe=kDe;function DDe(i,e){return function(t){return i(e(t))}}var mfe=DDe,ADe=mfe,IDe=ADe(Object.getPrototypeOf,Object),jG=IDe,NDe=Object.prototype;function RDe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||NDe;return i===t}var A3=RDe,PDe=MDe,ODe=jG,FDe=A3;function BDe(i){return typeof i.constructor=="function"&&!FDe(i)?PDe(ODe(i)):{}}var _fe=BDe,zDe=zg,UDe=Du,VDe="[object Arguments]";function WDe(i){return UDe(i)&&zDe(i)==VDe}var HDe=WDe,see=HDe,$De=Du,vfe=Object.prototype,GDe=vfe.hasOwnProperty,jDe=vfe.propertyIsEnumerable,KDe=see(function(){return arguments}())?see:function(i){return $De(i)&&GDe.call(i,"callee")&&!jDe.call(i,"callee")},I3=KDe,qDe=9007199254740991;function XDe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=qDe}var yfe=XDe,YDe=S3,ZDe=yfe;function QDe(i){return i!=null&&ZDe(i.length)&&!YDe(i)}var IC=QDe,JDe=IC,eAe=Du;function tAe(i){return eAe(i)&&JDe(i)}var bfe=tAe,BN={exports:{}};function nAe(){return!1}var iAe=nAe;BN.exports;(function(i,e){var t=Dh,n=iAe,s=e&&!e.nodeType&&e,r=s&&!0&&i&&!i.nodeType&&i,o=r&&r.exports===s,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;i.exports=c})(BN,BN.exports);var VT=BN.exports,sAe=zg,rAe=jG,oAe=Du,aAe="[object Object]",lAe=Function.prototype,cAe=Object.prototype,wfe=lAe.toString,uAe=cAe.hasOwnProperty,hAe=wfe.call(Object);function dAe(i){if(!oAe(i)||sAe(i)!=aAe)return!1;var e=rAe(i);if(e===null)return!0;var t=uAe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&wfe.call(t)==hAe}var Cfe=dAe,fAe=zg,gAe=yfe,pAe=Du,mAe="[object Arguments]",_Ae="[object Array]",vAe="[object Boolean]",yAe="[object Date]",bAe="[object Error]",wAe="[object Function]",CAe="[object Map]",SAe="[object Number]",xAe="[object Object]",EAe="[object RegExp]",LAe="[object Set]",TAe="[object String]",kAe="[object WeakMap]",MAe="[object ArrayBuffer]",DAe="[object DataView]",AAe="[object Float32Array]",IAe="[object Float64Array]",NAe="[object Int8Array]",RAe="[object Int16Array]",PAe="[object Int32Array]",OAe="[object Uint8Array]",FAe="[object Uint8ClampedArray]",BAe="[object Uint16Array]",zAe="[object Uint32Array]",ks={};ks[AAe]=ks[IAe]=ks[NAe]=ks[RAe]=ks[PAe]=ks[OAe]=ks[FAe]=ks[BAe]=ks[zAe]=!0;ks[mAe]=ks[_Ae]=ks[MAe]=ks[vAe]=ks[DAe]=ks[yAe]=ks[bAe]=ks[wAe]=ks[CAe]=ks[SAe]=ks[xAe]=ks[EAe]=ks[LAe]=ks[TAe]=ks[kAe]=!1;function UAe(i){return pAe(i)&&gAe(i.length)&&!!ks[fAe(i)]}var VAe=UAe;function WAe(i){return function(e){return i(e)}}var N3=WAe,zN={exports:{}};zN.exports;(function(i,e){var t=Zde,n=e&&!e.nodeType&&e,s=n&&!0&&i&&!i.nodeType&&i,r=s&&s.exports===n,o=r&&t.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();i.exports=a})(zN,zN.exports);var KG=zN.exports,HAe=VAe,$Ae=N3,ree=KG,oee=ree&&ree.isTypedArray,GAe=oee?$Ae(oee):HAe,R3=GAe;function jAe(i,e){if(!(e==="constructor"&&typeof i[e]=="function")&&e!="__proto__")return i[e]}var Sfe=jAe,KAe=$G,qAe=UT,XAe=Object.prototype,YAe=XAe.hasOwnProperty;function ZAe(i,e,t){var n=i[e];(!(YAe.call(i,e)&&qAe(n,t))||t===void 0&&!(e in i))&&KAe(i,e,t)}var xfe=ZAe,QAe=xfe,JAe=$G;function eIe(i,e,t,n){var s=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=n?n(t[a],i[a],a,t,i):void 0;l===void 0&&(l=i[a]),s?JAe(t,a,l):QAe(t,a,l)}return t}var NC=eIe;function tIe(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var nIe=tIe,iIe=9007199254740991,sIe=/^(?:0|[1-9]\d*)$/;function rIe(i,e){var t=typeof i;return e=e??iIe,!!e&&(t=="number"||t!="symbol"&&sIe.test(i))&&i>-1&&i%1==0&&i<e}var Efe=rIe,oIe=nIe,aIe=I3,lIe=Mc,cIe=VT,uIe=Efe,hIe=R3,dIe=Object.prototype,fIe=dIe.hasOwnProperty;function gIe(i,e){var t=lIe(i),n=!t&&aIe(i),s=!t&&!n&&cIe(i),r=!t&&!n&&!s&&hIe(i),o=t||n||s||r,a=o?oIe(i.length,String):[],l=a.length;for(var c in i)(e||fIe.call(i,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||uIe(c,l)))&&a.push(c);return a}var Lfe=gIe;function pIe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var mIe=pIe,_Ie=Ah,vIe=A3,yIe=mIe,bIe=Object.prototype,wIe=bIe.hasOwnProperty;function CIe(i){if(!_Ie(i))return yIe(i);var e=vIe(i),t=[];for(var n in i)n=="constructor"&&(e||!wIe.call(i,n))||t.push(n);return t}var SIe=CIe,xIe=Lfe,EIe=SIe,LIe=IC;function TIe(i){return LIe(i)?xIe(i,!0):EIe(i)}var WT=TIe,kIe=NC,MIe=WT;function DIe(i){return kIe(i,MIe(i))}var AIe=DIe,aee=ufe,IIe=dfe,NIe=gfe,RIe=pfe,PIe=_fe,lee=I3,cee=Mc,OIe=bfe,FIe=VT,BIe=S3,zIe=Ah,UIe=Cfe,VIe=R3,uee=Sfe,WIe=AIe;function HIe(i,e,t,n,s,r,o){var a=uee(i,t),l=uee(e,t),c=o.get(l);if(c){aee(i,t,c);return}var u=r?r(a,l,t+"",i,e,o):void 0,h=u===void 0;if(h){var d=cee(l),f=!d&&FIe(l),g=!d&&!f&&VIe(l);u=l,d||f||g?cee(a)?u=a:OIe(a)?u=RIe(a):f?(h=!1,u=IIe(l,!0)):g?(h=!1,u=NIe(l,!0)):u=[]:UIe(l)||lee(l)?(u=a,lee(a)?u=WIe(a):(!zIe(a)||BIe(a))&&(u=PIe(l))):h=!1}h&&(o.set(l,u),s(u,l,n,r,o),o.delete(l)),aee(i,t,u)}var $Ie=HIe,GIe=HG,jIe=ufe,KIe=hfe,qIe=$Ie,XIe=Ah,YIe=WT,ZIe=Sfe;function Tfe(i,e,t,n,s){i!==e&&KIe(e,function(r,o){if(s||(s=new GIe),XIe(r))qIe(i,e,o,t,Tfe,n,s);else{var a=n?n(ZIe(i,o),r,o+"",i,e,s):void 0;a===void 0&&(a=r),jIe(i,o,a)}},YIe)}var QIe=Tfe;function JIe(i){return i}var qG=JIe;function eNe(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}var tNe=eNe,nNe=tNe,hee=Math.max;function iNe(i,e,t){return e=hee(e===void 0?i.length-1:e,0),function(){for(var n=arguments,s=-1,r=hee(n.length-e,0),o=Array(r);++s<r;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=t(o),nNe(i,this,a)}}var kfe=iNe;function sNe(i){return function(){return i}}var rNe=sNe,oNe=rNe,dee=cfe,aNe=qG,lNe=dee?function(i,e){return dee(i,"toString",{configurable:!0,enumerable:!1,value:oNe(e),writable:!0})}:aNe,cNe=lNe,uNe=800,hNe=16,dNe=Date.now;function fNe(i){var e=0,t=0;return function(){var n=dNe(),s=hNe-(n-t);if(t=n,s>0){if(++e>=uNe)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}var gNe=fNe,pNe=cNe,mNe=gNe,_Ne=mNe(pNe),Mfe=_Ne,vNe=qG,yNe=kfe,bNe=Mfe;function wNe(i,e){return bNe(yNe(i,e,vNe),i+"")}var Dfe=wNe,CNe=UT,SNe=IC,xNe=Efe,ENe=Ah;function LNe(i,e,t){if(!ENe(t))return!1;var n=typeof e;return(n=="number"?SNe(t)&&xNe(e,t.length):n=="string"&&e in t)?CNe(t[e],i):!1}var TNe=LNe,kNe=Dfe,MNe=TNe;function DNe(i){return kNe(function(e,t){var n=-1,s=t.length,r=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(r=i.length>3&&typeof r=="function"?(s--,r):void 0,o&&MNe(t[0],t[1],o)&&(r=s<3?void 0:r,s=1),e=Object(e);++n<s;){var a=t[n];a&&i(e,a,n,r)}return e})}var ANe=DNe,INe=QIe,NNe=ANe,RNe=NNe(function(i,e,t){INe(i,e,t)}),PNe=RNe;const ONe=Mi(PNe);function FNe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var Afe=FNe,BNe=mfe,zNe=BNe(Object.keys,Object),UNe=zNe,VNe=A3,WNe=UNe,HNe=Object.prototype,$Ne=HNe.hasOwnProperty;function GNe(i){if(!VNe(i))return WNe(i);var e=[];for(var t in Object(i))$Ne.call(i,t)&&t!="constructor"&&e.push(t);return e}var Ife=GNe,jNe=Lfe,KNe=Ife,qNe=IC;function XNe(i){return qNe(i)?jNe(i):KNe(i)}var P3=XNe,YNe=NC,ZNe=P3;function QNe(i,e){return i&&YNe(e,ZNe(e),i)}var JNe=QNe,eRe=NC,tRe=WT;function nRe(i,e){return i&&eRe(e,tRe(e),i)}var iRe=nRe;function sRe(i,e){for(var t=-1,n=i==null?0:i.length,s=0,r=[];++t<n;){var o=i[t];e(o,t,i)&&(r[s++]=o)}return r}var rRe=sRe;function oRe(){return[]}var Nfe=oRe,aRe=rRe,lRe=Nfe,cRe=Object.prototype,uRe=cRe.propertyIsEnumerable,fee=Object.getOwnPropertySymbols,hRe=fee?function(i){return i==null?[]:(i=Object(i),aRe(fee(i),function(e){return uRe.call(i,e)}))}:lRe,XG=hRe,dRe=NC,fRe=XG;function gRe(i,e){return dRe(i,fRe(i),e)}var pRe=gRe;function mRe(i,e){for(var t=-1,n=e.length,s=i.length;++t<n;)i[s+t]=e[t];return i}var YG=mRe,_Re=YG,vRe=jG,yRe=XG,bRe=Nfe,wRe=Object.getOwnPropertySymbols,CRe=wRe?function(i){for(var e=[];i;)_Re(e,yRe(i)),i=vRe(i);return e}:bRe,Rfe=CRe,SRe=NC,xRe=Rfe;function ERe(i,e){return SRe(i,xRe(i),e)}var LRe=ERe,TRe=YG,kRe=Mc;function MRe(i,e,t){var n=e(i);return kRe(i)?n:TRe(n,t(i))}var Pfe=MRe,DRe=Pfe,ARe=XG,IRe=P3;function NRe(i){return DRe(i,IRe,ARe)}var Ofe=NRe,RRe=Pfe,PRe=Rfe,ORe=WT;function FRe(i){return RRe(i,ORe,PRe)}var Ffe=FRe,BRe=qv,zRe=Dh,URe=BRe(zRe,"DataView"),VRe=URe,WRe=qv,HRe=Dh,$Re=WRe(HRe,"Promise"),GRe=$Re,jRe=qv,KRe=Dh,qRe=jRe(KRe,"Set"),XRe=qRe,YRe=qv,ZRe=Dh,QRe=YRe(ZRe,"WeakMap"),JRe=QRe,y9=VRe,b9=FG,w9=GRe,C9=XRe,S9=JRe,Bfe=zg,RC=Jde,gee="[object Map]",ePe="[object Object]",pee="[object Promise]",mee="[object Set]",_ee="[object WeakMap]",vee="[object DataView]",tPe=RC(y9),nPe=RC(b9),iPe=RC(w9),sPe=RC(C9),rPe=RC(S9),z_=Bfe;(y9&&z_(new y9(new ArrayBuffer(1)))!=vee||b9&&z_(new b9)!=gee||w9&&z_(w9.resolve())!=pee||C9&&z_(new C9)!=mee||S9&&z_(new S9)!=_ee)&&(z_=function(i){var e=Bfe(i),t=e==ePe?i.constructor:void 0,n=t?RC(t):"";if(n)switch(n){case tPe:return vee;case nPe:return gee;case iPe:return pee;case sPe:return mee;case rPe:return _ee}return e});var HT=z_,oPe=Object.prototype,aPe=oPe.hasOwnProperty;function lPe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&aPe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var cPe=lPe,uPe=GG;function hPe(i,e){var t=e?uPe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var dPe=hPe,fPe=/\w*$/;function gPe(i){var e=new i.constructor(i.source,fPe.exec(i));return e.lastIndex=i.lastIndex,e}var pPe=gPe,yee=TC,bee=yee?yee.prototype:void 0,wee=bee?bee.valueOf:void 0;function mPe(i){return wee?Object(wee.call(i)):{}}var _Pe=mPe,vPe=GG,yPe=dPe,bPe=pPe,wPe=_Pe,CPe=gfe,SPe="[object Boolean]",xPe="[object Date]",EPe="[object Map]",LPe="[object Number]",TPe="[object RegExp]",kPe="[object Set]",MPe="[object String]",DPe="[object Symbol]",APe="[object ArrayBuffer]",IPe="[object DataView]",NPe="[object Float32Array]",RPe="[object Float64Array]",PPe="[object Int8Array]",OPe="[object Int16Array]",FPe="[object Int32Array]",BPe="[object Uint8Array]",zPe="[object Uint8ClampedArray]",UPe="[object Uint16Array]",VPe="[object Uint32Array]";function WPe(i,e,t){var n=i.constructor;switch(e){case APe:return vPe(i);case SPe:case xPe:return new n(+i);case IPe:return yPe(i,t);case NPe:case RPe:case PPe:case OPe:case FPe:case BPe:case zPe:case UPe:case VPe:return CPe(i,t);case EPe:return new n;case LPe:case MPe:return new n(i);case TPe:return bPe(i);case kPe:return new n;case DPe:return wPe(i)}}var HPe=WPe,$Pe=HT,GPe=Du,jPe="[object Map]";function KPe(i){return GPe(i)&&$Pe(i)==jPe}var qPe=KPe,XPe=qPe,YPe=N3,Cee=KG,See=Cee&&Cee.isMap,ZPe=See?YPe(See):XPe,QPe=ZPe,JPe=HT,eOe=Du,tOe="[object Set]";function nOe(i){return eOe(i)&&JPe(i)==tOe}var iOe=nOe,sOe=iOe,rOe=N3,xee=KG,Eee=xee&&xee.isSet,oOe=Eee?rOe(Eee):sOe,aOe=oOe,lOe=HG,cOe=Afe,uOe=xfe,hOe=JNe,dOe=iRe,fOe=dfe,gOe=pfe,pOe=pRe,mOe=LRe,_Oe=Ofe,vOe=Ffe,yOe=HT,bOe=cPe,wOe=HPe,COe=_fe,SOe=Mc,xOe=VT,EOe=QPe,LOe=Ah,TOe=aOe,kOe=P3,MOe=WT,DOe=1,AOe=2,IOe=4,zfe="[object Arguments]",NOe="[object Array]",ROe="[object Boolean]",POe="[object Date]",OOe="[object Error]",Ufe="[object Function]",FOe="[object GeneratorFunction]",BOe="[object Map]",zOe="[object Number]",Vfe="[object Object]",UOe="[object RegExp]",VOe="[object Set]",WOe="[object String]",HOe="[object Symbol]",$Oe="[object WeakMap]",GOe="[object ArrayBuffer]",jOe="[object DataView]",KOe="[object Float32Array]",qOe="[object Float64Array]",XOe="[object Int8Array]",YOe="[object Int16Array]",ZOe="[object Int32Array]",QOe="[object Uint8Array]",JOe="[object Uint8ClampedArray]",e3e="[object Uint16Array]",t3e="[object Uint32Array]",xs={};xs[zfe]=xs[NOe]=xs[GOe]=xs[jOe]=xs[ROe]=xs[POe]=xs[KOe]=xs[qOe]=xs[XOe]=xs[YOe]=xs[ZOe]=xs[BOe]=xs[zOe]=xs[Vfe]=xs[UOe]=xs[VOe]=xs[WOe]=xs[HOe]=xs[QOe]=xs[JOe]=xs[e3e]=xs[t3e]=!0;xs[OOe]=xs[Ufe]=xs[$Oe]=!1;function vI(i,e,t,n,s,r){var o,a=e&DOe,l=e&AOe,c=e&IOe;if(t&&(o=s?t(i,n,s,r):t(i)),o!==void 0)return o;if(!LOe(i))return i;var u=SOe(i);if(u){if(o=bOe(i),!a)return gOe(i,o)}else{var h=yOe(i),d=h==Ufe||h==FOe;if(xOe(i))return fOe(i,a);if(h==Vfe||h==zfe||d&&!s){if(o=l||d?{}:COe(i),!a)return l?mOe(i,dOe(o,i)):pOe(i,hOe(o,i))}else{if(!xs[h])return s?i:{};o=wOe(i,h,a)}}r||(r=new lOe);var f=r.get(i);if(f)return f;r.set(i,o),TOe(i)?i.forEach(function(_){o.add(vI(_,e,t,_,i,r))}):EOe(i)&&i.forEach(function(_,m){o.set(m,vI(_,e,t,m,i,r))});var g=c?l?vOe:_Oe:l?MOe:kOe,p=u?void 0:g(i);return cOe(p||i,function(_,m){p&&(m=_,_=i[m]),uOe(o,m,vI(_,e,t,m,i,r))}),o}var n3e=vI;function i3e(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}var s3e=i3e;function r3e(i,e,t){var n=-1,s=i.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(s);++n<s;)r[n]=i[n+e];return r}var o3e=r3e,a3e=ife,l3e=o3e;function c3e(i,e){return e.length<2?i:a3e(i,l3e(e,0,-1))}var u3e=c3e,h3e=VG,d3e=s3e,f3e=u3e,g3e=nfe;function p3e(i,e){return e=h3e(e,i),i=f3e(i,e),i==null||delete i[g3e(d3e(e))]}var m3e=p3e,_3e=Cfe;function v3e(i){return _3e(i)?void 0:i}var y3e=v3e,Lee=TC,b3e=I3,w3e=Mc,Tee=Lee?Lee.isConcatSpreadable:void 0;function C3e(i){return w3e(i)||b3e(i)||!!(Tee&&i&&i[Tee])}var S3e=C3e,x3e=YG,E3e=S3e;function Wfe(i,e,t,n,s){var r=-1,o=i.length;for(t||(t=E3e),s||(s=[]);++r<o;){var a=i[r];e>0&&t(a)?e>1?Wfe(a,e-1,t,n,s):x3e(s,a):n||(s[s.length]=a)}return s}var L3e=Wfe,T3e=L3e;function k3e(i){var e=i==null?0:i.length;return e?T3e(i,1):[]}var M3e=k3e,D3e=M3e,A3e=kfe,I3e=Mfe;function N3e(i){return I3e(A3e(i,void 0,D3e),i+"")}var R3e=N3e,P3e=UG,O3e=n3e,F3e=m3e,B3e=VG,z3e=NC,U3e=y3e,V3e=R3e,W3e=Ffe,H3e=1,$3e=2,G3e=4,j3e=V3e(function(i,e){var t={};if(i==null)return t;var n=!1;e=P3e(e,function(r){return r=B3e(r,i),n||(n=r.length>1),r}),z3e(i,W3e(i),t),n&&(t=O3e(t,H3e|$3e|G3e,U3e));for(var s=e.length;s--;)F3e(t,e[s]);return t}),K3e=j3e;const PC=Mi(K3e);function q3e(i){return i===void 0}var X3e=q3e;const aE=Mi(X3e);var Y3e="__lodash_hash_undefined__";function Z3e(i){return this.__data__.set(i,Y3e),this}var Q3e=Z3e;function J3e(i){return this.__data__.has(i)}var e4e=J3e,t4e=BG,n4e=Q3e,i4e=e4e;function UN(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new t4e;++e<t;)this.add(i[e])}UN.prototype.add=UN.prototype.push=n4e;UN.prototype.has=i4e;var Hfe=UN;function s4e(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var r4e=s4e;function o4e(i,e){return i.has(e)}var $fe=o4e,a4e=Hfe,l4e=r4e,c4e=$fe,u4e=1,h4e=2;function d4e(i,e,t,n,s,r){var o=t&u4e,a=i.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(i),u=r.get(e);if(c&&u)return c==e&&u==i;var h=-1,d=!0,f=t&h4e?new a4e:void 0;for(r.set(i,e),r.set(e,i);++h<a;){var g=i[h],p=e[h];if(n)var _=o?n(p,g,h,e,i,r):n(g,p,h,i,e,r);if(_!==void 0){if(_)continue;d=!1;break}if(f){if(!l4e(e,function(m,v){if(!c4e(f,v)&&(g===m||s(g,m,t,n,r)))return f.push(v)})){d=!1;break}}else if(!(g===p||s(g,p,t,n,r))){d=!1;break}}return r.delete(i),r.delete(e),d}var Gfe=d4e;function f4e(i){var e=-1,t=Array(i.size);return i.forEach(function(n,s){t[++e]=[s,n]}),t}var g4e=f4e;function p4e(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var m4e=p4e,kee=TC,Mee=ffe,_4e=UT,v4e=Gfe,y4e=g4e,b4e=m4e,w4e=1,C4e=2,S4e="[object Boolean]",x4e="[object Date]",E4e="[object Error]",L4e="[object Map]",T4e="[object Number]",k4e="[object RegExp]",M4e="[object Set]",D4e="[object String]",A4e="[object Symbol]",I4e="[object ArrayBuffer]",N4e="[object DataView]",Dee=kee?kee.prototype:void 0,CB=Dee?Dee.valueOf:void 0;function R4e(i,e,t,n,s,r,o){switch(t){case N4e:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case I4e:return!(i.byteLength!=e.byteLength||!r(new Mee(i),new Mee(e)));case S4e:case x4e:case T4e:return _4e(+i,+e);case E4e:return i.name==e.name&&i.message==e.message;case k4e:case D4e:return i==e+"";case L4e:var a=y4e;case M4e:var l=n&w4e;if(a||(a=b4e),i.size!=e.size&&!l)return!1;var c=o.get(i);if(c)return c==e;n|=C4e,o.set(i,e);var u=v4e(a(i),a(e),n,s,r,o);return o.delete(i),u;case A4e:if(CB)return CB.call(i)==CB.call(e)}return!1}var P4e=R4e,Aee=Ofe,O4e=1,F4e=Object.prototype,B4e=F4e.hasOwnProperty;function z4e(i,e,t,n,s,r){var o=t&O4e,a=Aee(i),l=a.length,c=Aee(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:B4e.call(e,d)))return!1}var f=r.get(i),g=r.get(e);if(f&&g)return f==e&&g==i;var p=!0;r.set(i,e),r.set(e,i);for(var _=o;++h<l;){d=a[h];var m=i[d],v=e[d];if(n)var y=o?n(v,m,d,e,i,r):n(m,v,d,i,e,r);if(!(y===void 0?m===v||s(m,v,t,n,r):y)){p=!1;break}_||(_=d=="constructor")}if(p&&!_){var C=i.constructor,S=e.constructor;C!=S&&"constructor"in i&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(p=!1)}return r.delete(i),r.delete(e),p}var U4e=z4e,SB=HG,V4e=Gfe,W4e=P4e,H4e=U4e,Iee=HT,Nee=Mc,Ree=VT,$4e=R3,G4e=1,Pee="[object Arguments]",Oee="[object Array]",QM="[object Object]",j4e=Object.prototype,Fee=j4e.hasOwnProperty;function K4e(i,e,t,n,s,r){var o=Nee(i),a=Nee(e),l=o?Oee:Iee(i),c=a?Oee:Iee(e);l=l==Pee?QM:l,c=c==Pee?QM:c;var u=l==QM,h=c==QM,d=l==c;if(d&&Ree(i)){if(!Ree(e))return!1;o=!0,u=!1}if(d&&!u)return r||(r=new SB),o||$4e(i)?V4e(i,e,t,n,s,r):W4e(i,e,l,t,n,s,r);if(!(t&G4e)){var f=u&&Fee.call(i,"__wrapped__"),g=h&&Fee.call(e,"__wrapped__");if(f||g){var p=f?i.value():i,_=g?e.value():e;return r||(r=new SB),s(p,_,t,n,r)}}return d?(r||(r=new SB),H4e(i,e,t,n,s,r)):!1}var q4e=K4e,X4e=q4e,Bee=Du;function jfe(i,e,t,n,s){return i===e?!0:i==null||e==null||!Bee(i)&&!Bee(e)?i!==i&&e!==e:X4e(i,e,t,n,jfe,s)}var Y4e=jfe,Z4e=Y4e;function Q4e(i,e){return Z4e(i,e)}var J4e=Q4e;const Kfe=Mi(J4e);var e5e=Ife,t5e=HT,n5e=I3,i5e=Mc,s5e=IC,r5e=VT,o5e=A3,a5e=R3,l5e="[object Map]",c5e="[object Set]",u5e=Object.prototype,h5e=u5e.hasOwnProperty;function d5e(i){if(i==null)return!0;if(s5e(i)&&(i5e(i)||typeof i=="string"||typeof i.splice=="function"||r5e(i)||a5e(i)||n5e(i)))return!i.length;var e=t5e(i);if(e==l5e||e==c5e)return!i.size;if(o5e(i))return!e5e(i).length;for(var t in i)if(h5e.call(i,t))return!1;return!0}var f5e=d5e;const Lp=Mi(f5e);var g5e=hfe,p5e=P3;function m5e(i,e){return i&&g5e(i,e,p5e)}var _5e=m5e,v5e=IC;function y5e(i,e){return function(t,n){if(t==null)return t;if(!v5e(t))return i(t,n);for(var s=t.length,r=e?s:-1,o=Object(t);(e?r--:++r<s)&&n(o[r],r,o)!==!1;);return t}}var b5e=y5e,w5e=_5e,C5e=b5e,S5e=C5e(w5e),x5e=S5e,E5e=qG;function L5e(i){return typeof i=="function"?i:E5e}var T5e=L5e,k5e=Afe,M5e=x5e,D5e=T5e,A5e=Mc;function I5e(i,e){var t=A5e(i)?k5e:M5e;return t(i,D5e(e))}var N5e=I5e,R5e=N5e;const P5e=Mi(R5e);function a2(i,e){i&&console.warn(`Warning: ${e}`)}function ZG(i){return i==null}let O5e=class{constructor(){this._eventMap=new Map}on(e,t){return e&&typeof t=="function"&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var n=this;if(e&&typeof t=="function"){const s=function(){t(...arguments),n.off(e,s)};this.on(e,s)}}off(e,t){if(e)if(typeof t=="function"){const n=this._eventMap.get(e);if(Array.isArray(n)&&n.length){let s=-1;for(;(s=n.findIndex(r=>r===t))>-1;)n.splice(s,1)}}else ZG(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this._eventMap.has(e)?([...this._eventMap.get(e)].forEach(o=>o(...n)),!0):!1}};function tb(i){try{return i instanceof HTMLElement}catch{return typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object"}}function F5e(i){if(i&&typeof i=="object")return typeof i.toJSON=="function"?i.toJSON():["left","top","right","bottom","width","height"].reduce((t,n)=>(t[n]=i[n],t),{})}function VN(i){i.stopPropagation(),i.preventDefault()}const JM={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},U1={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};let B5e=class extends Dc{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(n,s)=>{this._adapter.setDisplayNone(n,s)},this.updateStateIfCursorOnTrigger=n=>{var s,r;if(!((s=n==null?void 0:n.matches)===null||s===void 0)&&s.call(n,":hover")){const o=this._adapter.getEventName(),a=this.getState("triggerEventSet");(r=a[o.mouseEnter])===null||r===void 0||r.call(a)}},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const n=this.getProp("mouseEnterDelay");this.clearDelayTimer(),n>0?this._timer=setTimeout(()=>{this.show(),this.clearDelayTimer()},n):this.show()},this.show=()=>{if(this._adapter.getAnimatingState())return;const n=this.getProp("content"),s=this.getProp("trigger"),r=this.getProp("clickTriggerToHide"),{visible:o,displayNone:a}=this.getStates();if(a&&this.setDisplayNone(!1),!o){if(this.clearDelayTimer(),this._adapter.on("portalInserted",()=>{this.calcPosition()}),s==="hover"){const l=()=>{var c;const u=this._adapter.getTriggerDOM();s&&!(!((c=u==null?void 0:u.matches)===null||c===void 0)&&c.call(u,":hover"))&&this.hide(),this._adapter.off("portalInserted",l)};this._adapter.on("portalInserted",l)}this._adapter.on("positionUpdated",()=>{this._togglePortalVisible(!0)}),this._adapter.insertPortal(n,{left:-9999,top:-9999}),s==="custom"&&this._adapter.registerClickOutsideHandler(()=>{}),(s==="click"||r||s==="contextMenu")&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent()}},this.calcPosition=function(n,s,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;n=(Lp(n)?t._adapter.getTriggerBounding():n)||Object.assign({},U1),r=(Lp(r)?t._adapter.getPopupContainerRect():r)||Object.assign({},U1),s=(Lp(s)?t._adapter.getWrapperBounding():s)||Object.assign({},U1);let a=t.calcPosStyle({triggerRect:n,wrapperRect:s,containerRect:r}),l=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:c,isHeightOverFlow:u,isWidthOverFlow:h}=t.adjustPosIfNeed(l,a,n,s,r);(l!==c||u||h)&&(l=c,a=t.calcPosStyle({triggerRect:n,wrapperRect:s,containerRect:r,position:l,spacing:null,isOverFlow:[u,h]}))}return o&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},a),{position:l})),a},this.delayHide=()=>{const n=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),n>0?this._timer=setTimeout(()=>{this.hide(),this.clearDelayTimer()},n):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=n=>{const{guardFocus:s,closeOnEsc:r}=this.getProps();switch(n&&n.key){case"Escape":r&&this._handleEscKeyDown(n);break;case"Tab":if(s){const o=this._adapter.getContainer(),a=this._adapter.getFocusableElements(o);a.length&&(n.shiftKey?this._handleContainerShiftTabKeyDown(a,n):this._handleContainerTabKeyDown(a,n))}break}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:n}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(n),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"reverse",s=arguments.length>3?arguments[3]:void 0;switch(n){case"reverse":return this._reversePos(e,t);case"expand":return this._expandPos(e,s);case"reduce":return this._reducePos(e);default:return this._reversePos(e,t)}}_reversePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){if(JM.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(JM.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(JM.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(JM.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e.concat(t)}_reducePos(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find(n=>e.endsWith(n));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),n={[t.keydown]:r=>{this._handleTriggerKeydown(r)}};let s={};switch(e){case"focus":n[t.focus]=()=>{this.delayShow()},n[t.blur]=()=>{this.delayHide()},s=n;break;case"click":n[t.click]=()=>{this.show()},s={};break;case"hover":n[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},n[t.mouseLeave]=()=>{this.delayHide()},n[t.focus]=()=>{const{disableFocusListener:r}=this.getProps();!r&&this.delayShow()},n[t.blur]=()=>{const{disableFocusListener:r}=this.getProps();!r&&this.delayHide()},s=Object.assign({},n),this.getProp("clickToHide")&&(s[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},s[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":break;case"contextMenu":n[t.contextMenu]=r=>{r.preventDefault(),this.show()};break}return{triggerEventSet:n,portalEventSet:s}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)})}_roundPixel(e){return typeof e=="number"?Math.round(e):e}calcTransformOrigin(e,t,n,s){if(e&&t&&n!=null&&s!=null){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(t.width/2)}px ${-s*100}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(t.width/2)}px) ${-s*100}%`;if(["leftTop","rightTop"].includes(e))return`${-n*100}% ${this._roundPixel(t.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${-n*100}% calc(100% - ${this._roundPixel(t.height/2)}px)`}return`${-n*100}% ${-s*100}%`}return null}calcPosStyle(e){var t;const{spacing:n,isOverFlow:s}=e,{innerWidth:r}=window,o=(Lp(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},U1),a=(Lp(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},U1),l=(Lp(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},U1),c=e.position!=null?e.position:this.getProp("position"),u=n??this.getProp("spacing"),{arrowPointAtCenter:h,showArrow:d,arrowBounding:f}=this.getProps(),g=d&&h;let p=u,_=0;if(typeof u!="number"){const He=c.includes("top")||c.includes("bottom");p=He?u.y:u.x,_=He?u.x:u.y}const m=ts(f,"width",24),v=ts(f,"width",24),y=ts(f,"offsetY",0),C=6,S=6;let x,E,L=0,T=0;const D=o.left+o.width/2,I=o.top+o.height/2,N=C+m/2,P=S+v/2,O=l.height-a.height,V=l.width-a.width,z=O>0?O:0,K=V>0?V:0,H=s&&s[0],U=s&&s[1],j=D-a.left<a.right-D,W=I-a.top<a.bottom-I,X=l.width>r,ee=Math.abs((l==null?void 0:l.width)-((t=this._adapter.getContainer())===null||t===void 0?void 0:t.clientWidth))>1;switch(ee&&(p=p*l.width/this._adapter.getContainer().clientWidth),c){case"top":x=U?j?a.left+l.width/2:a.right-l.width/2+K:D+_,E=H?a.bottom+z:o.top-p,L=-.5,T=-1;break;case"topLeft":x=U?X?a.left:a.right-l.width:g?D-N+_:o.left+_,E=H?a.bottom+z:o.top-p,T=-1;break;case"topRight":x=U?a.right+K:g?D+N+_:o.right+_,E=H?a.bottom+z:o.top-p,T=-1,L=-1;break;case"left":x=U?a.right+K-p+N:o.left-p,E=H?W?a.top+l.height/2:a.bottom-l.height/2+z:I+_,L=-1,T=-.5;break;case"leftTop":x=U?a.right+K-p+N:o.left-p,E=H?a.top:g?I-P+_:o.top+_,L=-1;break;case"leftBottom":x=U?a.right+K-p+N:o.left-p,E=H?a.bottom+z:g?I+P+_:o.bottom+_,L=-1,T=-1;break;case"bottom":x=U?j?a.left+l.width/2:a.right-l.width/2+K:D+_,E=H?a.top+P-p:o.top+o.height+p,L=-.5;break;case"bottomLeft":x=U?X?a.left:a.right-l.width:g?D-N+_:o.left+_,E=H?a.top+P-p:o.top+o.height+p;break;case"bottomRight":x=U?a.right+K:g?D+N+_:o.right+_,E=H?a.top+P-p:o.top+o.height+p,L=-1;break;case"right":x=U?a.left-p+N:o.right+p,E=H?W?a.top+l.height/2:a.bottom-l.height/2+z:I+_,T=-.5;break;case"rightTop":x=U?a.left-p+N:o.right+p,E=H?a.top:g?I-P+_:o.top+_;break;case"rightBottom":x=U?a.left-p+N:o.right+p,E=H?a.bottom+z:g?I+P+_:o.bottom+_,T=-1;break;case"leftTopOver":x=o.left-p,E=o.top-p;break;case"rightTopOver":x=o.right+p,E=o.top-p,L=-1;break;case"leftBottomOver":x=o.left-p,E=o.bottom+p,T=-1;break;case"rightBottomOver":x=o.right+p,E=o.bottom+p,L=-1,T=-1;break}const le=this.calcTransformOrigin(c,o,L,T),fe=this._adapter.containerIsBody();if(x=x-a.left,E=E-a.top,ee&&(x/=l.width/this._adapter.getContainer().clientWidth),ee&&(E/=l.height/this._adapter.getContainer().clientHeight),fe&&!this._adapter.containerIsRelativeOrAbsolute()){const He=this._adapter.getDocumentElementBounding();x+=a.left-He.left,E+=a.top-He.top}x=fe?x:x+a.scrollLeft,E=fe?E:E+a.scrollTop;const be=o.height;if(this.getProp("showArrow")&&!h&&be<=(v/2+y)*2){const He=be/2-(y+v/2);(c.includes("Top")||c.includes("Bottom"))&&!c.includes("Over")&&(E=c.includes("Top")?E+He:E-He)}const ye={left:this._roundPixel(x),top:this._roundPixel(E)};let xe="";return L!=null&&(xe+=`translateX(${L*100}%) `,Object.defineProperty(ye,"translateX",{enumerable:!1,value:L})),T!=null&&(xe+=`translateY(${T*100}%) `,Object.defineProperty(ye,"translateY",{enumerable:!1,value:T})),le!=null&&(ye.transformOrigin=le),xe&&(ye.transform=xe),ye}isLR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,n){return e<n&&t>n}isOverFlow(e,t,n){return e<n&&t<n}isHalfOverFlow(e,t,n){return e<n||t<n}isHalfAllEnough(e,t,n){return e>=n||t>=n}getReverse(e,t,n,s){return e&&s||n}adjustPosIfNeed(e,t,n,s,r){const{innerWidth:o,innerHeight:a}=window,{margin:l}=this.getProps(),c=typeof l=="number"?l:l.marginLeft,u=typeof l=="number"?l:l.marginTop,h=typeof l=="number"?l:l.marginRight,d=typeof l=="number"?l:l.marginBottom;let f=!1,g=!1;const p=this.getProp("spacing");let _=p,m=0;if(typeof p!="number"){const v=e.includes("top")||e.includes("bottom");_=v?p.y:p.x,m=v?p.x:p.y}if(s.width>0&&s.height>0){const v=n.left,y=n.right,C=n.top,S=n.bottom,x=o-v,E=a-C,L=o-y,T=a-S,D=s.width>n.width,I=s.height>n.height,N=C-u<s.height+_&&T-d>s.height+_,P=v-c<s.width+_&&L-h>s.width+_,O=T-d<s.height+_&&C-u>s.height+_,V=L-h<s.width+_&&v-c>s.width+_;E-d<s.height+_&&S-u>s.height+_,S-u<s.height+_&&E-d>s.height+_;const z=E<s.height+m&&S>s.height+m,K=S<s.height+m&&E>s.height+m,H=x<s.width+m&&y>s.width+m,U=y<s.width+m&&x>s.width+m,j=E<s.height+_&&S>s.height+_,W=S<s.height+_&&E>s.height+_,X=x<s.width&&y>s.width,ee=y<s.width&&x>s.width,le=C-r.top,fe=v-r.left,be=le+n.height,ye=fe+n.width,xe=r.bottom-S,He=r.right-y,qe=xe+n.height,ke=He+n.width,q=this.isReverse(le-u,xe-d,s.height+_),Ee=this.isReverse(fe-c,He-h,s.width+_),De=this.isReverse(xe-d,le-u,s.height+_),Ae=this.isReverse(He-h,fe-c,s.width+_);this.isReverse(qe-d,be-u,s.height+_),this.isReverse(be-u,qe-d,s.height+_);const Me=this.isReverse(qe,be,s.height+m),Je=this.isReverse(be,qe,s.height+m),Pe=this.isReverse(ke,ye,s.width+m),Xe=this.isReverse(ye,ke,s.width+m),Re=n.height/2,Fe=n.width/2,wt=this.isOverFlow(C-u,T-d,s.height+_),te=this.isOverFlow(v-c,L-h,s.width+_),Z=this.isOverFlow(S-u,E-d,s.height+_),we=this.isOverFlow(y-c,x-h,s.width+_),Ye=this.isHalfOverFlow(S-Re,E-Re,(s.height+m)/2),je=this.isHalfOverFlow(y-Fe,x-Fe,(s.width+m)/2),Ge=this.isHalfAllEnough(S-Re,E-Re,(s.height+m)/2),ot=this.isHalfAllEnough(y-Fe,x-Fe,(s.width+m)/2),tt=this.isOverFlow(le-u,xe-d,s.height+_),Oe=this.isOverFlow(fe-c,He-h,s.width+_),lt=this.isOverFlow(be-u,qe-d,s.height+_),xt=this.isOverFlow(ye-c,ke-h,s.width+_),ut=this.isHalfOverFlow(be-Re,qe-Re,(s.height+m)/2),nt=this.isHalfOverFlow(ye-Fe,ke-Fe,(s.width+m)/2),ft=this.isHalfAllEnough(be-Re,qe-Re,(s.height+m)/2),At=this.isHalfAllEnough(ye-Fe,ke-Fe,(s.width+m)/2),kt=this.getReverse(wt,tt,N,q),he=this.getReverse(te,Oe,P,Ee),at=this.getReverse(wt,tt,O,De),Ue=this.getReverse(te,Oe,V,Ae),gt=this.getReverse(Z,lt,z,Me),Ct=this.getReverse(Z,lt,K,Je),cn=this.getReverse(we,xt,H,Pe),wn=this.getReverse(we,xt,U,Xe),qn=Ye&&ut,St=je&&nt;switch(e){case"top":kt&&(e=this._adjustPos(e,!0)),St&&(cn||wn)&&(e=this._adjustPos(e,!0,"expand",cn?"Right":"Left"));break;case"topLeft":kt&&(e=this._adjustPos(e,!0)),cn&&D&&(e=this._adjustPos(e)),g&&(ot||At)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":kt&&(e=this._adjustPos(e,!0)),wn&&D&&(e=this._adjustPos(e)),g&&(ot||At)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":he&&(e=this._adjustPos(e)),qn&&(gt||Ct)&&(e=this._adjustPos(e,!1,"expand",gt?"Bottom":"Top"));break;case"leftTop":he&&(e=this._adjustPos(e)),gt&&I&&(e=this._adjustPos(e,!0)),f&&(Ge||ft)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":he&&(e=this._adjustPos(e)),Ct&&I&&(e=this._adjustPos(e,!0)),f&&(Ge||ft)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":at&&(e=this._adjustPos(e,!0)),St&&(cn||wn)&&(e=this._adjustPos(e,!0,"expand",cn?"Right":"Left"));break;case"bottomLeft":at&&(e=this._adjustPos(e,!0)),cn&&D&&(e=this._adjustPos(e)),g&&(ot||At)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":at&&(e=this._adjustPos(e,!0)),wn&&D&&(e=this._adjustPos(e)),g&&(ot||At)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":Ue&&(e=this._adjustPos(e)),qn&&(gt||Ct)&&(e=this._adjustPos(e,!1,"expand",gt?"Bottom":"Top"));break;case"rightTop":Ue&&(e=this._adjustPos(e)),gt&&I&&(e=this._adjustPos(e,!0)),f&&(Ge||ft)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":Ue&&(e=this._adjustPos(e)),Ct&&I&&(e=this._adjustPos(e,!0)),f&&(Ge||ft)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":j&&(e=this._adjustPos(e,!0)),X&&(e=this._adjustPos(e));break;case"leftBottomOver":W&&(e=this._adjustPos(e,!0)),X&&(e=this._adjustPos(e));break;case"rightTopOver":j&&(e=this._adjustPos(e,!0)),ee&&(e=this._adjustPos(e));break;case"rightBottomOver":W&&(e=this._adjustPos(e,!0)),ee&&(e=this._adjustPos(e));break}this.isTB(e)&&(f=wt&&tt,e==="top"||e==="bottom"?g=je&&nt||y<0||L<0:g=we&&xt||y<0||L<0),this.isLR(e)&&(g=te&&Oe,e==="left"||e==="right"?f=Ye&&ut||C<0||E<0:f=Z&&lt||C<0||E<0)}return{position:e,isHeightOverFlow:f,isWidthOverFlow:g}}_bindScrollEvent(){this._adapter.registerScrollHandler(()=>this.calcPosition())}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:n}=this.getProps(),s=this._adapter.getContainer(),r=this._adapter.getFocusableElements(s),o=r.length;switch(e&&e.key){case"Escape":VN(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!n&&o&&this._handleTriggerArrowUpKeydown(r,e);break;case"ArrowDown":!n&&o&&this._handleTriggerArrowDownKeydown(r,e);break}}focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:n}=this.getProps();if(t&&e!=="custom"){const s=this._adapter.getTriggerNode();s&&"focus"in s&&s.focus({preventScroll:n})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();t!=="custom"&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),s=this._adapter.getActiveElement();e[e.length-1]===s&&(e[0].focus({preventScroll:n}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),s=this._adapter.getActiveElement();e[0]===s&&(e[e.length-1].focus({preventScroll:n}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:n}=this.getProps();e[0].focus({preventScroll:n}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:n}=this.getProps();e[e.length-1].focus({preventScroll:n}),t.preventDefault()}};const z5e={PREFIX:`${$i}-tooltip`},PE={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},U_={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};function x9(i){return`${i}-${new Date().getTime()}-${Math.random()}`}function WN(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{prefix:e="",length:t=7}=i,n="0123456789abcdefghijklmnopqrstuvwxyz",s=n.length;let r="";for(let o=0;o<t;o++){const a=Math.floor(Math.random()*s);r+=n.charAt(a)}return e?`${e}-${r}`:r}class U5e{constructor(){this.config={}}}const xB=new U5e;var zee=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function eD(i,e){i&&typeof i.stopPropagation=="function"&&i.stopPropagation(),i.nativeEvent&&typeof i.nativeEvent.stopImmediatePropagation=="function"&&i.nativeEvent.stopImmediatePropagation()}const V5e=(i,e)=>{let{match:t,unmatch:n,callInInit:s=!0}=e;if(typeof window<"u"){let o=function(a){a.matches?t&&t(a):n&&n(a)};const r=window.matchMedia(i);return s&&o(r),Object.prototype.hasOwnProperty.call(r,"addEventListener")?(r.addEventListener("change",o),()=>r.removeEventListener("change",o)):(r.addListener(o),()=>r.removeListener(o))}return()=>{}},QG=i=>re.isValidElement(i)&&ts(i.type,"elementType")==="Icon";function W5e(){return document?document.activeElement:null}function H5e(i){if(!tb(i))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(i.querySelectorAll(t))}function JG(i,e){return zee(this,void 0,void 0,function*(){if(e===0){yield i();return}else{yield new Promise(t=>{setTimeout(()=>zee(this,void 0,void 0,function*(){yield JG(i,e-1),t()}),0)});return}})}function $5e(){return globalThis&&Object.prototype.toString.call(globalThis)==="[object Window]"?window.innerWidth-document.documentElement.clientWidth:0}function OC(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=()=>{var n,s;return((s=(n=xB==null?void 0:xB.config)===null||n===void 0?void 0:n.overrideDefaultProps)===null||s===void 0?void 0:s[i])||{}};return new Proxy(Object.assign({},e),{get(n,s,r){const o=t();return s in o?o[s]:Reflect.get(n,s,r)},set(n,s,r,o){return Reflect.set(n,s,r,o)},ownKeys(){const n=t();return Array.from(new Set([...Reflect.ownKeys(e),...Object.keys(n)]))},getOwnPropertyDescriptor(n,s){const r=t();return s in r?Reflect.getOwnPropertyDescriptor(r,s):Reflect.getOwnPropertyDescriptor(n,s)}})}const FC=re.createContext({}),G5e=()=>document.body;class $T extends G.PureComponent{constructor(e,t){var n;super(e),n=this,this.initContainer=function(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var o,a;try{let l;if(!n.el||!(!((o=n.state)===null||o===void 0)&&o.container)||!Array.from(n.state.container.childNodes).includes(n.el)){n.el=document.createElement("div");const u=(n.props.getPopupContainer||s.getPopupContainer||G5e)();return u.appendChild(n.el),n.addStyle(n.props.style),n.addClass(n.props.prefixCls,s,n.props.className),l=u,l}}catch(l){if(!r)throw l}return(a=n.state)===null||a===void 0?void 0:a.container},this.addStyle=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(n.el)for(const r of Object.keys(s))n.el.style[r]=s[r]},this.addClass=function(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.context;const{direction:o}=r;for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];const u=It(s,...l,{[`${s}-rtl`]:o==="rtl"});n.el&&(n.el.className=u)},this.state={container:this.initContainer(t,!0)}}componentDidMount(){const e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?zT.createPortal(t.children,this.el):null}}$T.contextType=FC;$T.defaultProps={prefixCls:`${$i}-portal`};$T.propTypes={children:B.node,prefixCls:B.string,getPopupContainer:B.func,className:B.string,didUpdate:B.func};var j5e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const K5e=i=>{const{className:e,style:t}=i,n=j5e(i,["className","style"]);return re.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},n,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),re.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var q5e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const X5e=i=>{const{className:e,style:t}=i,n=q5e(i,["className","style"]);return re.createElement("svg",Object.assign({"aria-hidden":!0,className:e,style:t},n,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),re.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},Y5e=B.shape({offsetX:B.number,offsetY:B.number,width:B.number,height:B.number});class l2 extends re.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var t,n;(n=(t=this.props).onAnimationStart)===null||n===void 0||n.call(t)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},()=>{var t,n;(n=(t=this.props).onAnimationEnd)===null||n===void 0||n.call(t,!1)})},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,n,s;(t=(e=this.props).onAnimationStart)===null||t===void 0||t.call(e),this.props.motion||((s=(n=this.props).onAnimationEnd)===null||s===void 0||s.call(n,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,n){const s=Object.keys(this.props).filter(r=>!Kfe(this.props[r],e[r]));s.includes("animationState"),(s.includes("startClassName")||s.includes("replayKey")||s.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},()=>{var r,o,a,l;(o=(r=this.props).onAnimationStart)===null||o===void 0||o.call(r),this.props.motion||((l=(a=this.props).onAnimationEnd)===null||l===void 0||l.call(a,this.state.isAnimating),this.setState({isAnimating:!1}))})}render(){var e;return this.props.motion?this.props.children({animationClassName:(e=this.state.currentClassName)!==null&&e!==void 0?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}l2.defaultProps={motion:!0,replayKey:""};var Uee=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const yI=z5e.PREFIX,Z5e=PE.POSITION_SET,Q5e=PE.TRIGGER_SET,J5e=["flex","block","table","flow-root","grid"],eFe=()=>document.body;class Sm extends Aa{constructor(e){super(e),this.isAnimating=!1,this.setContainerEl=t=>this.containerEl={current:t},this.isSpecial=t=>{if(tb(t))return!!t.disabled;if(G.isValidElement(t)){if(ts(t,"props.disabled"))return PE.STATUS_DISABLED;const s=ts(t,"props.loading"),r=!Lp(t)&&!Lp(t.type)&&(ts(t,"type.elementType")==="Button"||ts(t,"type.elementType")==="IconButton");if(s&&r)return PE.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:t}=this.state,{showArrow:n,prefixCls:s,style:r}=this.props;let o=null;const a=It([`${s}-icon-arrow`]),l=ts(r,"backgroundColor"),c=t!=null&&t.includes("left")||t!=null&&t.includes("right")?re.createElement(X5e,null):re.createElement(K5e,null);return n&&(G.isValidElement(n)?o=n:o=re.cloneElement(c,{className:a,style:{color:l,fill:"currentColor"}})),o},this.handlePortalInnerClick=t=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&eD(t)},this.handlePortalMouseDown=t=>{this.props.stopPropagation&&eD(t)},this.handlePortalFocus=t=>{this.props.stopPropagation&&eD(t)},this.handlePortalBlur=t=>{this.props.stopPropagation&&eD(t)},this.handlePortalInnerKeyDown=t=>{this.foundation.handleContainerKeydown(t)},this.renderContentNode=t=>{const n={initialFocusRef:this.initialFocusRef};return x3(t)?t(n):t},this.renderPortal=()=>{const{containerStyle:t={},visible:n,portalEventSet:s,placement:r,displayNone:o,transitionState:a,id:l,isPositionUpdated:c}=this.state,{prefixCls:u,content:h,showArrow:d,style:f,motion:g,role:p,zIndex:_}=this.props,m=this.renderContentNode(h),{className:v}=this.props,y=this.context.direction,C=It(v,{[`${u}-wrapper`]:!0,[`${u}-wrapper-show`]:n,[`${u}-with-arrow`]:!!d,[`${u}-rtl`]:y==="rtl"}),S=this.renderIcon(),x=PC(t,g?["transformOrigin"]:void 0),E=ts(t,"transformOrigin"),L=ts(f,"opacity",null),T=L||1,D=re.createElement(l2,{fillMode:"forwards",animationState:a,motion:g&&c,startClassName:a==="enter"?`${yI}-animation-show`:`${yI}-animation-hide`,onAnimationStart:()=>this.isAnimating=!0,onAnimationEnd:()=>{var I,N;a==="leave"&&(this.didLeave(),(N=(I=this.props).afterClose)===null||N===void 0||N.call(I)),this.isAnimating=!1}},I=>{let{animationStyle:N,animationClassName:P,animationEventsNeedBind:O}=I;return re.createElement("div",Object.assign({className:It(C,P),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},N),o?{display:"none"}:{}),{transformOrigin:E}),f),L?{opacity:c?T:"0"}:{})},s,O,{role:p,"x-placement":r,id:l}),re.createElement("div",{className:`${yI}-content`},m),S)});return re.createElement($T,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:_}},re.createElement("div",{tabIndex:-1,className:`${$i}-portal-inner`,style:x,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},D))},this.wrapSpan=t=>{const{wrapperClassName:n}=this.props,s=ts(t,"props.style.display"),r=ts(t,"props.block"),o=typeof t=="string",a={};return o||(a.display="inline-block"),(r||J5e.includes(s))&&(a.width="100%"),re.createElement("span",{className:n,style:a},t)},this.mergeEvents=(t,n)=>{const s={};return P5e(n,(r,o)=>{typeof r=="function"&&(s[o]=function(){r(...arguments),t&&typeof t[o]=="function"&&t[o](...arguments)})}),s},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new B5e(this.adapter),this.eventManager=new O5e,this.triggerEl=re.createRef(),this.containerEl=re.createRef(),this.initialFocusRef=re.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},getAnimatingState:()=>this.isAnimating,insertPortal:(t,n)=>{var s=Uee(n,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),s)},()=>{setTimeout(()=>{this.eventManager.emit("portalInserted")},0)})},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:t=>{this.setState({triggerEventSet:t})},registerPortalEvent:t=>{this.setState({portalEventSet:t})},getTriggerBounding:()=>{const t=this.adapter.getTriggerNode();return this.triggerEl.current=t,t&&t.getBoundingClientRect()},getPopupContainerRect:()=>{const t=this.getPopupContainer();let n=null;if(t&&tb(t)){const s=F5e(t.getBoundingClientRect());n=Object.assign(Object.assign({},s),{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}return n},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const t=this.getPopupContainer();return window.getComputedStyle(t).getPropertyValue("position")==="relative"},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const t=this.containerEl&&this.containerEl.current;return t&&t.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:t=>{var{position:n}=t,s=Uee(t,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),s),placement:n,isPositionUpdated:!0},()=>{this.eventManager.emit("positionUpdated")})},setDisplayNone:(t,n)=>{this.setState({displayNone:t},n)},updatePlacementAttr:t=>{this.setState({placement:t})},togglePortalVisible:(t,n)=>{const s={};s.transitionState=t?"enter":"leave",s.visible=t,this.mounted&&this.setState(s,()=>{n()})},registerClickOutsideHandler:t=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=n=>{if(!this.mounted)return!1;let s=this.triggerEl&&this.triggerEl.current,r=this.containerEl&&this.containerEl.current;s=sg.findDOMNode(s),r=sg.findDOMNode(r);const o=n.target,a=n.composedPath&&n.composedPath()||[o],l=this.props.clickTriggerToHide?s&&s.contains(o)||a.includes(s):!1;(s&&!s.contains(o)&&r&&!r.contains(o)&&!(a.includes(r)||a.includes(s))||l)&&(this.props.onClickOutSide(n),t())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:t=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=eee(n=>{if(!this.mounted)return!1;t(n)},10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:t=>{this.props.onVisibleChange(t)},registerScrollHandler:t=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=eee(n=>{if(!this.mounted)return!1;const s=this.adapter.getTriggerNode();if(n.target.contains(s)){const o={x:n.target.scrollLeft,y:n.target.scrollTop};t(o)}},10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>!!this.props.motion,updateContainerPosition:()=>{const t=this.getPopupContainer();if(t&&tb(t)){const s=window.getComputedStyle(t).getPropertyValue("position");this.containerPosition=s}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let t=this.triggerEl.current;return tb(this.triggerEl.current)||(t=sg.findDOMNode(this.triggerEl.current)),t},getFocusableElements:t=>H5e(t),getActiveElement:()=>W5e(),setInitialFocus:()=>{const{preventScroll:t}=this.props,n=ts(this,"initialFocusRef.current");n&&"focus"in n&&n.focus({preventScroll:t})},notifyEscKeydown:t=>{this.props.onEscKeyDown(t)},setId:()=>{this.setState({id:WN()})},getTriggerDOM:()=>this.triggerEl.current?sg.findDOMNode(this.triggerEl.current):null})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||eFe,this.foundation.init(),JG(()=>{let e=this.triggerEl.current;e&&(e instanceof HTMLElement||(e=zT.findDOMNode(e))),this.foundation.updateStateIfCursorOnTrigger(e)},1)}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){a2(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),Kfe(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:n,id:s}=this.state,{wrapWhenSpecial:r,role:o,trigger:a}=this.props;let{children:l}=this.props;const c=Object.assign({},ts(l,"props.style")),u={};if(r){const f=this.isSpecial(l);f?(c.pointerEvents="none",f===PE.STATUS_DISABLED&&(u.cursor="not-allowed"),l=G.cloneElement(l,{style:c}),a!=="custom"&&(l=this.wrapSpan(l)),this.isWrapped=!0):G.isValidElement(l)||(l=this.wrapSpan(l),this.isWrapped=!0)}let h={};o==="dialog"?(h["aria-expanded"]=n?"true":"false",h["aria-haspopup"]="dialog",h["aria-controls"]=s):h["aria-describedby"]=s;const d=re.cloneElement(l,Object.assign(Object.assign(Object.assign(Object.assign({},h),l.props),this.mergeEvents(l.props,t)),{style:Object.assign(Object.assign({},ts(l,"props.style")),u),className:It(ts(l,"props.className")),ref:f=>{this.triggerEl.current=f;const{ref:g}=l;typeof g=="function"?g(f):g&&typeof g=="object"&&(g.current=f)},tabIndex:l.props.tabIndex||0,"data-popupid":s}));return re.createElement(re.Fragment,null,e?this.renderPortal():null,d)}}Sm.contextType=FC;Sm.propTypes={children:B.node,motion:B.bool,autoAdjustOverflow:B.bool,position:B.oneOf(Z5e),getPopupContainer:B.func,mouseEnterDelay:B.number,mouseLeaveDelay:B.number,trigger:B.oneOf(Q5e).isRequired,className:B.string,wrapperClassName:B.string,clickToHide:B.bool,clickTriggerToHide:B.bool,visible:B.bool,style:B.object,content:B.oneOfType([B.node,B.func]),prefixCls:B.string,onVisibleChange:B.func,onClickOutSide:B.func,spacing:B.oneOfType([B.number,B.object]),margin:B.oneOfType([B.number,B.object]),showArrow:B.oneOfType([B.bool,B.node]),zIndex:B.number,rePosKey:B.oneOfType([B.string,B.number]),arrowBounding:Y5e,transformFromCenter:B.bool,arrowPointAtCenter:B.bool,stopPropagation:B.bool,role:B.string,wrapWhenSpecial:B.bool,guardFocus:B.bool,returnFocusOnClose:B.bool,preventScroll:B.bool,keepDOM:B.bool};Sm.__SemiComponentName__="Tooltip";Sm.defaultProps=OC(Sm.__SemiComponentName__,{arrowBounding:U_.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:yI,role:"tooltip",mouseEnterDelay:U_.MOUSE_ENTER_DELAY,mouseLeaveDelay:U_.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:li,onClickOutSide:li,spacing:U_.SPACING,margin:U_.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:U_.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:li,disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1});var ej={exports:{}};const qfe=(i,{target:e=document.body}={})=>{const t=document.createElement("textarea"),n=document.activeElement;t.value=i,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const s=document.getSelection();let r=!1;s.rangeCount>0&&(r=s.getRangeAt(0)),e.append(t),t.select(),t.selectionStart=0,t.selectionEnd=i.length;let o=!1;try{o=document.execCommand("copy")}catch{}return t.remove(),r&&(s.removeAllRanges(),s.addRange(r)),n&&n.focus(),o};ej.exports=qfe;ej.exports.default=qfe;var tFe=ej.exports;const nFe=Mi(tFe);function rg(){}const iFe=re.createContext(null);function EB(i){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):i.defaultWidth,n=i.formats[t]||i.formats[i.defaultWidth];return n}}function HS(i){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",s;if(n==="formatting"&&i.formattingValues){var r=i.defaultFormattingWidth||i.defaultWidth,o=t!=null&&t.width?String(t.width):r;s=i.formattingValues[o]||i.formattingValues[r]}else{var a=i.defaultWidth,l=t!=null&&t.width?String(t.width):i.defaultWidth;s=i.values[l]||i.values[a]}var c=i.argumentCallback?i.argumentCallback(e):e;return s[c]}}function $S(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,s=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],r=e.match(s);if(!r)return null;var o=r[0],a=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],l=Array.isArray(a)?rFe(a,function(h){return h.test(o)}):sFe(a,function(h){return h.test(o)}),c;c=i.valueCallback?i.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function sFe(i,e){for(var t in i)if(i.hasOwnProperty(t)&&e(i[t]))return t}function rFe(i,e){for(var t=0;t<i.length;t++)if(e(i[t]))return t}function oFe(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(i.matchPattern);if(!n)return null;var s=n[0],r=e.match(i.parsePattern);if(!r)return null;var o=i.valueCallback?i.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}function E9(i){"@babel/helpers - typeof";return E9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E9(i)}function aFe(i){if(i===null||i===!0||i===!1)return NaN;var e=Number(i);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function tj(i,e){if(e.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+e.length+" present")}function lFe(i){tj(1,arguments);var e=Object.prototype.toString.call(i);return i instanceof Date||E9(i)==="object"&&e==="[object Date]"?new Date(i.getTime()):typeof i=="number"||e==="[object Number]"?new Date(i):((typeof i=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var cFe={};function uFe(){return cFe}function Vee(i,e){var t,n,s,r,o,a,l,c;tj(1,arguments);var u=uFe(),h=aFe((t=(n=(s=(r=e==null?void 0:e.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&n!==void 0?n:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=lFe(i),f=d.getUTCDay(),g=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-g),d.setUTCHours(0,0,0,0),d}function hFe(i,e,t){tj(2,arguments);var n=Vee(i,t),s=Vee(e,t);return n.getTime()===s.getTime()}var dFe={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},fFe=function(e,t,n){var s,r=dFe[e];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?s+"内":s+"前":s},gFe={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},pFe={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},mFe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},_Fe={date:EB({formats:gFe,defaultWidth:"full"}),time:EB({formats:pFe,defaultWidth:"full"}),dateTime:EB({formats:mFe,defaultWidth:"full"})};function Wee(i,e,t){var n="eeee p";return hFe(i,e,t)?n:i.getTime()>e.getTime()?"'下个'"+n:"'上个'"+n}var vFe={lastWeek:Wee,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:Wee,other:"PP p"},yFe=function(e,t,n,s){var r=vFe[e];return typeof r=="function"?r(t,n,s):r},bFe={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},wFe={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},CFe={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},SFe={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},xFe={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},EFe={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},LFe=function(e,t){var n=Number(e);switch(t==null?void 0:t.unit){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},TFe={ordinalNumber:LFe,era:HS({values:bFe,defaultWidth:"wide"}),quarter:HS({values:wFe,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:HS({values:CFe,defaultWidth:"wide"}),day:HS({values:SFe,defaultWidth:"wide"}),dayPeriod:HS({values:xFe,defaultWidth:"wide",formattingValues:EFe,defaultFormattingWidth:"wide"})},kFe=/^(第\s*)?\d+(日|时|分|秒)?/i,MFe=/\d+/i,DFe={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},AFe={any:[/^(前)/i,/^(公元)/i]},IFe={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},NFe={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},RFe={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},PFe={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},OFe={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},FFe={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},BFe={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},zFe={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},UFe={ordinalNumber:oFe({matchPattern:kFe,parsePattern:MFe,valueCallback:function(e){return parseInt(e,10)}}),era:$S({matchPatterns:DFe,defaultMatchWidth:"wide",parsePatterns:AFe,defaultParseWidth:"any"}),quarter:$S({matchPatterns:IFe,defaultMatchWidth:"wide",parsePatterns:NFe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$S({matchPatterns:RFe,defaultMatchWidth:"wide",parsePatterns:PFe,defaultParseWidth:"any"}),day:$S({matchPatterns:OFe,defaultMatchWidth:"wide",parsePatterns:FFe,defaultParseWidth:"any"}),dayPeriod:$S({matchPatterns:BFe,defaultMatchWidth:"any",parsePatterns:zFe,defaultParseWidth:"any"})},VFe={code:"zh-CN",formatDistance:fFe,formatLong:_Fe,formatRelative:yFe,localize:TFe,match:UFe,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Hee={code:"zh-CN",dateFnsLocale:VFe,Pagination:{pageSize:"每页条数：${pageSize}",total:"总页数：${total}",jumpTo:"跳至",page:"页"},Modal:{confirm:"确定",cancel:"取消"},Tabs:{more:"更多"},TimePicker:{placeholder:{time:"请选择时间",timeRange:"请选择时间范围"},begin:"开始时间",end:"结束时间",hour:"时",minute:"分",second:"秒",AM:"上午",PM:"下午"},DatePicker:{placeholder:{date:"请选择日期",dateTime:"请选择日期及时间",dateRange:["开始日期","结束日期"],dateTimeRange:["开始日期","结束日期"],monthRange:["开始月份","结束月份"]},presets:"快捷选择",footer:{confirm:"确定",cancel:"取消"},selectDate:"返回选择日期",selectTime:"选择时间",year:"年",month:"月",day:"日",monthText:"${year}年 ${month}",months:{1:"1月",2:"2月",3:"3月",4:"4月",5:"5月",6:"6月",7:"7月",8:"8月",9:"9月",10:"10月",11:"11月",12:"12月"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"一",Tue:"二",Wed:"三",Thu:"四",Fri:"五",Sat:"六",Sun:"日"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"收起侧边栏",expandText:"展开侧边栏"},Popconfirm:{confirm:"确定",cancel:"取消"},Table:{emptyText:"暂无数据",pageText:"显示第 ${currentStart} 条-第 ${currentEnd} 条，共 ${total} 条",descend:"点击降序",ascend:"点击升序",cancelSort:"取消排序"},Select:{emptyText:"暂无数据",createText:"创建"},Cascader:{emptyText:"暂无数据"},Tree:{emptyText:"暂无数据",searchPlaceholder:"搜索"},List:{emptyText:"暂无数据"},Calendar:{allDay:"全天",AM:"上午${time}时",PM:"下午${time}时",datestring:"日",remaining:"还有${remained}项"},Upload:{mainText:"点击上传文件或拖拽文件到这里",illegalTips:"不支持此类型文件",legalTips:"松手开始上传",retry:"重试",replace:"替换文件",clear:"清空",selectedFiles:"已选择文件",illegalSize:"文件尺寸不合法",fail:"上传失败"},TreeSelect:{searchPlaceholder:"搜索"},Typography:{copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Transfer:{emptyLeft:"暂无数据",emptySearch:"无搜索结果",emptyRight:"暂无内容，可从左侧勾选",placeholder:"搜索",clear:"清空",selectAll:"全选",clearSelectAll:"取消全选",total:"总个数：${total}",selected:"已选个数：${total}"},Form:{optional:"（可选）"},Image:{preview:"预览",loading:"加载中",loadError:"加载失败",prevTip:"上一张",nextTip:"下一张",zoomInTip:"放大",zoomOutTip:"缩小",rotateTip:"旋转",downloadTip:"下载",adaptiveTip:"适应页面",originTip:"原始尺寸"},Chat:{deleteConfirm:"确认删除该会话吗？",clearContext:"上下文已清除",copySuccess:"复制成功",stop:"停止",copy:"复制",copied:"复制成功",dropAreaText:"将文件放到这里"}};class gv extends G.Component{renderChildren(e,t){const{componentName:n}=this.props;let s=e;e!=null&&e.code||(s=Hee);const r=ts(Hee,"dateFnsLocale"),o=ts(s,"dateFnsLocale",r);return t(s[n],s.code,o)}render(){const{children:e}=this.props;return re.createElement(FC.Consumer,null,t=>{let{locale:n}=t;return re.createElement(iFe.Consumer,null,s=>this.renderChildren(n||s,e))})}}gv.propTypes={componentName:B.string.isRequired,children:B.any};gv.defaultProps={componentName:""};const WFe="semi";var HFe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Xfe=re.forwardRef((i,e)=>{const{svg:t,spin:n=!1,rotate:s,style:r,className:o,prefixCls:a=WFe,type:l,size:c="default"}=i,u=HFe(i,["svg","spin","rotate","style","className","prefixCls","type","size"]),h=It(`${a}-icon`,{[`${a}-icon-extra-small`]:c==="extra-small",[`${a}-icon-small`]:c==="small",[`${a}-icon-default`]:c==="default",[`${a}-icon-large`]:c==="large",[`${a}-icon-extra-large`]:c==="extra-large",[`${a}-icon-spinning`]:n===!0,[`${a}-icon-${l}`]:!!l},o),d={};return Number.isSafeInteger(s)&&(d.transform=`rotate(${s}deg)`),Object.assign(d,r),re.createElement("span",Object.assign({role:"img",ref:e,"aria-label":l,className:h,style:d},u),t)});Xfe.elementType="Icon";const Ia=(i,e)=>{const t=re.forwardRef((n,s)=>re.createElement(Xfe,Object.assign({svg:re.createElement(i),type:e,ref:s},n)));return t.elementType="Icon",t};function $Fe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}const Yfe=Ia($Fe,"alert_circle");function GFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}const Zfe=Ia(GFe,"alert_triangle");function jFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2782 4.23933C16.864 4.82511 16.864 5.77486 16.2782 6.36065L10.6213 12.0175L16.2782 17.6744C16.864 18.2601 16.864 19.2099 16.2782 19.7957C15.6924 20.3815 14.7426 20.3815 14.1569 19.7957L7.43934 13.0782C6.85355 12.4924 6.85355 11.5426 7.43934 10.9568L14.1569 4.23933C14.7426 3.65354 15.6924 3.65354 16.2782 4.23933Z",fill:"currentColor"}))}const KFe=Ia(jFe,"chevron_left");function qFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.43934 19.7957C6.85355 19.2099 6.85355 18.2601 7.43934 17.6744L13.0962 12.0175L7.43934 6.36065C6.85355 5.77486 6.85355 4.82511 7.43934 4.23933C8.02513 3.65354 8.97487 3.65354 9.56066 4.23933L16.2782 10.9568C16.864 11.5426 16.864 12.4924 16.2782 13.0782L9.56066 19.7957C8.97487 20.3815 8.02513 20.3815 7.43934 19.7957Z",fill:"currentColor"}))}const XFe=Ia(qFe,"chevron_right");function YFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}const nj=Ia(YFe,"close");function ZFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),G.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}const QFe=Ia(ZFe,"copy");function JFe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}const eBe=Ia(JFe,"help_circle");function tBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}const Qfe=Ia(tBe,"info_circle");function nBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17 15C17.476 15 17.9408 14.9525 18.3901 14.862C17.296 17.3011 14.8464 19 12 19C8.13401 19 5 15.866 5 12C5 8.60996 7.40983 5.78277 10.6099 5.13803C10.218 6.01173 10 6.98041 10 8C10 11.866 13.134 15 17 15Z",fill:"currentColor"}))}const iBe=Ia(nBe,"moon");function sBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M4.5 4.75C4.5 3.23122 5.73122 2 7.25 2C8.76878 2 10 3.23122 10 4.75V19.25C10 20.7688 8.76878 22 7.25 22C5.73122 22 4.5 20.7688 4.5 19.25V4.75Z",fill:"currentColor"}),G.createElement("path",{d:"M14 4.75C14 3.23122 15.2312 2 16.75 2C18.2688 2 19.5 3.23122 19.5 4.75V19.25C19.5 20.7688 18.2688 22 16.75 22C15.2312 22 14 20.7688 14 19.25V4.75Z",fill:"currentColor"}))}const rBe=Ia(sBe,"pause");function oBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M5 2.90101C5 2.09583 5.90303 1.62081 6.56653 2.07697L19.8014 11.1759C20.3794 11.5733 20.3794 12.4267 19.8014 12.824L6.56653 21.923C5.90303 22.3792 5 21.9041 5 21.0989V2.90101Z",fill:"currentColor"}))}const aBe=Ia(oBe,"play");function lBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}const cBe=Ia(lBe,"radio");function uBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6Z",fill:"currentColor"}))}const hBe=Ia(uBe,"stop");function dBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{d:"M10.5 1.5C10.5 0.671573 11.1716 0 12 0C12.8284 0 13.5 0.671573 13.5 1.5V2.5C13.5 3.32843 12.8284 4 12 4C11.1716 4 10.5 3.32843 10.5 2.5V1.5Z",fill:"currentColor"}),G.createElement("path",{d:"M10.5 21.5C10.5 20.6716 11.1716 20 12 20C12.8284 20 13.5 20.6716 13.5 21.5V22.5C13.5 23.3284 12.8284 24 12 24C11.1716 24 10.5 23.3284 10.5 22.5V21.5Z",fill:"currentColor"}),G.createElement("path",{d:"M24 12C24 11.1716 23.3284 10.5 22.5 10.5H21.5C20.6716 10.5 20 11.1716 20 12C20 12.8284 20.6716 13.5 21.5 13.5H22.5C23.3284 13.5 24 12.8284 24 12Z",fill:"currentColor"}),G.createElement("path",{d:"M2.5 10.5C3.32843 10.5 4 11.1716 4 12C4 12.8284 3.32843 13.5 2.5 13.5H1.5C0.671573 13.5 0 12.8284 0 12C0 11.1716 0.671573 10.5 1.5 10.5H2.5Z",fill:"currentColor"}),G.createElement("path",{d:"M20.4853 3.51472C19.8995 2.92893 18.9497 2.92893 18.364 3.51472L17.6569 4.22182C17.0711 4.80761 17.0711 5.75736 17.6569 6.34314C18.2426 6.92893 19.1924 6.92893 19.7782 6.34314L20.4853 5.63604C21.0711 5.05025 21.0711 4.1005 20.4853 3.51472Z",fill:"currentColor"}),G.createElement("path",{d:"M4.22181 17.6569C4.8076 17.0711 5.75734 17.0711 6.34313 17.6569C6.92892 18.2426 6.92892 19.1924 6.34313 19.7782L5.63602 20.4853C5.05024 21.0711 4.10049 21.0711 3.5147 20.4853C2.92892 19.8995 2.92892 18.9497 3.5147 18.364L4.22181 17.6569Z",fill:"currentColor"}),G.createElement("path",{d:"M3.5147 3.51472C2.92891 4.1005 2.92891 5.05025 3.5147 5.63604L4.22181 6.34315C4.80759 6.92893 5.75734 6.92893 6.34313 6.34315C6.92891 5.75736 6.92891 4.80761 6.34313 4.22183L5.63602 3.51472C5.05023 2.92893 4.10049 2.92893 3.5147 3.51472Z",fill:"currentColor"}),G.createElement("path",{d:"M17.6569 19.7782C17.0711 19.1924 17.0711 18.2426 17.6569 17.6569C18.2426 17.0711 19.1924 17.0711 19.7782 17.6569L20.4853 18.364C21.0711 18.9497 21.0711 19.8995 20.4853 20.4853C19.8995 21.0711 18.9497 21.0711 18.364 20.4853L17.6569 19.7782Z",fill:"currentColor"}),G.createElement("path",{d:"M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19Z",fill:"currentColor"}))}const fBe=Ia(dBe,"sun");function gBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}const pBe=Ia(gBe,"tick");function mBe(i){return G.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},i),G.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}const Jfe=Ia(mBe,"tick_circle"),_Be={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229},vBe="Enter";function ege(i){return ts(i,"key")===vBe}const LB=M3.PREFIX;class ij extends re.PureComponent{constructor(e){super(e),this.copy=t=>{const{content:n,duration:s,onCopy:r}=this.props,o=nFe(n);r&&r(t,n,o),this.setCopied(n,s)},this.setCopied=(t,n)=>{this.setState({copied:!0,item:t}),this._timeId=setTimeout(()=>{this.resetCopied()},n*1e3)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:t}=this.props;return typeof t<"u"?t:re.createElement(gv,{componentName:"Typography"},n=>re.createElement("span",null,re.createElement(pBe,null),n.copied))},this.renderCopyIcon=()=>{const{icon:t}=this.props,n={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:r=>ege(r)&&this.copy(r)},s=re.createElement("a",{className:`${LB}-action-copy-icon`},re.createElement(QFe,Object.assign({onClick:this.copy},n)));return re.isValidElement(t)?re.cloneElement(t,n):s},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:n,copyTip:s,render:r}=this.props,{copied:o}=this.state,a=It(t,{[`${LB}-action-copy`]:!o,[`${LB}-action-copied`]:o});return r?r(o,this.copy,this.props):re.createElement(gv,{componentName:"Typography"},l=>re.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:a,ref:n},o?this.renderSuccessTip():re.createElement(Sm,{content:typeof s<"u"?s:l.copy},this.renderCopyIcon())))}}ij.propTypes={content:B.string,onCopy:B.func,successTip:B.node,copyTip:B.node,duration:B.number,style:B.object,className:B.string,icon:B.node};ij.defaultProps={content:"",onCopy:rg,duration:3,style:{},className:""};const tge={PREFIX:`${$i}-popover`,ARROW:`${$i}-popover-icon-arrow`},OE={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},Bw={ARROW_BOUNDING:Object.assign(Object.assign({},U_.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var yBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const nge=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{position:e="",className:t,arrowStyle:n,popStyle:s}=i,r=yBe(i,["position","className","arrowStyle","popStyle"]),o=e.indexOf("top")===0||e.indexOf("bottom")===0,a=It(t,tge.ARROW),l=ts(n,"borderOpacity",OE.DEFAULT_ARROW_STYLE.borderOpacity),c=ts(n,"backgroundColor",ts(s,"backgroundColor",OE.DEFAULT_ARROW_STYLE.backgroundColor)),u=ts(n,"borderColor",ts(s,"borderColor",OE.DEFAULT_ARROW_STYLE.borderColor)),h=Object.assign(Object.assign({},r),{width:Bw.ARROW_BOUNDING.width,height:Bw.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:a});return o?re.createElement("svg",Object.assign({},h),re.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:u,opacity:l}),re.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:c})):re.createElement("svg",Object.assign({},h),re.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:u,opacity:l}),re.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:c}))};nge.propTypes={position:B.string,className:B.string,arrowStyle:B.object,popStyle:B.object};var bBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const wBe=OE.POSITION_SET,CBe=OE.TRIGGER_SET;class zw extends re.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var t;(t=this.tooltipRef.current)===null||t===void 0||t.focusTrigger()},this.renderPopCard=t=>{let{initialFocusRef:n}=t;const{content:s,contentClassName:r,prefixCls:o}=this.props,{direction:a}=this.context,l=It(o,r,{[`${o}-rtl`]:a==="rtl"}),c=this.renderContentNode({initialFocusRef:n,content:s});return re.createElement("div",{className:l},re.createElement("div",{className:`${o}-content`},c))},this.renderContentNode=t=>{const{initialFocusRef:n,content:s}=t,r={initialFocusRef:n};return x3(s)?s(r):s},this.tooltipRef=re.createRef()}render(){const e=this.props,{children:t,prefixCls:n,showArrow:s,arrowStyle:r={},arrowBounding:o,position:a,style:l,trigger:c}=e,u=bBe(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:h}=this.props;const d={position:a,className:"",popStyle:l,arrowStyle:r},f=s?re.createElement(nge,Object.assign({},d)):!1;ZG(h)&&(h=s?Bw.SPACING_WITH_ARROW:Bw.SPACING);const g=c==="click"||c==="custom"?"dialog":"tooltip";return re.createElement(Sm,Object.assign({guardFocus:!0,ref:this.tooltipRef},u,{trigger:c,position:a,style:l,content:this.renderPopCard,prefixCls:n,spacing:h,showArrow:f,arrowBounding:o,role:g}),t)}}zw.contextType=FC;zw.propTypes={children:B.node,content:B.oneOfType([B.node,B.func]),visible:B.bool,autoAdjustOverflow:B.bool,motion:B.bool,position:B.oneOf(wBe),margin:B.oneOfType([B.number,B.object]),mouseEnterDelay:B.number,mouseLeaveDelay:B.number,trigger:B.oneOf(CBe).isRequired,contentClassName:B.oneOfType([B.string,B.array]),onVisibleChange:B.func,onClickOutSide:B.func,style:B.object,spacing:B.oneOfType([B.number,B.object]),zIndex:B.number,showArrow:B.bool,arrowStyle:B.shape({borderColor:B.string,backgroundColor:B.string,borderOpacity:B.oneOfType([B.string,B.number])}),arrowPointAtCenter:B.bool,arrowBounding:B.object,prefixCls:B.string,guardFocus:B.bool,disableArrowKeyDown:B.bool};zw.__SemiComponentName__="Popover";zw.defaultProps=OC(zw.__SemiComponentName__,{arrowBounding:Bw.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:Bw.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:tge.PREFIX,onClickOutSide:li,onEscKeyDown:li,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0});let Us;function TB(i){if(!i)return 0;const e=i.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}function SBe(i){return Array.prototype.slice.apply(i).map(t=>`${t}: ${i.getPropertyValue(t)};`).join("")}const xBe=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;if(t.length===0)return"";Us||(Us=document.createElement("div"),Us.setAttribute("aria-hidden","true"),document.body.appendChild(Us));const l=window.getComputedStyle(i),c=SBe(l),u=TB(l.lineHeight),h=Math.round(u*(e+1)+TB(l.paddingTop)+TB(l.paddingBottom));Us.setAttribute("style",c),Us.style.position="fixed",Us.style.left="0",Us.style.height="auto",Us.style.top="-999999px",Us.style.zIndex="-1000",a&&(Us.style.fontWeight="600"),Us.style.textOverflow="clip",Us.style.webkitLineClamp="none",sg.render(re.createElement(re.Fragment,null),Us);function d(){const y=Us.scrollWidth<=Us.offsetWidth,C=Us.scrollHeight<h;return e===1?y&&C:C}const f=document.createElement("span"),g=document.createTextNode(t);if(f.appendChild(g),r.length>0){const y=document.createTextNode(r);f.appendChild(y)}Us.appendChild(f),Object.values(PC(n,"expand")).map(y=>y&&Us.appendChild(y.cloneNode(!0)));function p(){Us.innerHTML="",Us.appendChild(f),Object.values(n).map(y=>y&&Us.appendChild(y.cloneNode(!0)))}function _(y,C){const S=y.length;return C?o==="end"?y.slice(0,C)+s:y.slice(0,C)+s+y.slice(S-C,S):s}function m(y,C){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:C.length,E=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const L=Math.floor((S+x)/2),T=_(C,L);if(y.textContent=T,S>=x-1&&x>0)for(let D=x;D>=S;D-=1){const I=_(C,D);if(y.textContent=I,d())return I}else if(x===0)return s;return d()?m(y,C,L,x,L):m(y,C,S,L,E)}let v=t;return d()||(p(),v=m(g,t,0,o==="middle"?Math.floor(t.length/2):t.length)),Us.innerHTML="",v},ige=re.createContext("normal");var HN;(function(i){i.Width="width",i.Height="height",i.All="all"})(HN||(HN={}));class sj extends Aa{constructor(e){var t;super(e),t=this,this.formerPropertyValue=new Map,this.getElement=()=>{try{return zT.findDOMNode(this.childNode||this)}catch{return null}},this.handleResizeEventTriggered=n=>{var s,r,o,a;if(this.props.observerProperty===HN.All)(r=(s=this.props).onResize)===null||r===void 0||r.call(s,n);else{const l=[];for(const c of n)this.formerPropertyValue.has(c.target)?c.contentRect[this.props.observerProperty]!==this.formerPropertyValue.get(c.target)&&(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),l.push(c)):(this.formerPropertyValue.set(c.target,c.contentRect[this.props.observerProperty]),l.push(c));l.length>0&&((a=(o=this.props).onResize)===null||a===void 0||a.call(o,l))}},this.observeElement=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const s=t.getElement();if(t.observer||(t.observer=new ResizeObserver(t.handleResizeEventTriggered)),!(s&&s instanceof Element)){t.observer.disconnect();return}s===t.element&&!n||(t.observer.disconnect(),t.element=s,t.observer.observe(s),t.props.observeParent&&s.parentNode&&s.parentNode.ownerDocument&&s.parentNode.ownerDocument.defaultView&&s.parentNode instanceof s.parentNode.ownerDocument.defaultView.HTMLElement&&(t._parentNode=s.parentNode,t.observer.observe(t._parentNode)))},this.mergeRef=(n,s)=>{this.childNode=s,typeof n=="function"?n(s):typeof n=="object"&&n&&"current"in n&&(n.current=s)},globalThis.ResizeObserver&&(this.observer=new ResizeObserver(this.handleResizeEventTriggered))}componentDidMount(){var e;(e=this.observeElement)===null||e===void 0||e.call(this)}componentDidUpdate(e){var t;(t=this.observeElement)===null||t===void 0||t.call(this,this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}render(){const e=re.Children.only(this.props.children),{ref:t}=e;return re.cloneElement(e,{ref:n=>this.mergeRef(t,n)})}}sj.propTypes={onResize:B.func,observeParent:B.bool,observerProperty:B.string,delayTick:B.number};sj.defaultProps={onResize:()=>{},observeParent:!1,observerProperty:"all",delayTick:0};var kB=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},EBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const yo=M3.PREFIX,LBe="...",TBe=(i,e)=>{const{mark:t,code:n,underline:s,strong:r,link:o,disabled:a}=i;let l=e;const c=(u,h)=>{let d={};u&&(typeof u=="object"&&(d=Object.assign({},u)),l=re.createElement(h,d,l))};return c(t,"mark"),c(n,"code"),c(s&&!o,"u"),c(r,"strong"),c(i.delete,"del"),c(o,a?"span":"a"),l};class Xv extends G.Component{constructor(e){super(e),this.observerTakingEffect=!1,this.onResize=t=>kB(this,void 0,void 0,function*(){return this.rafId&&window.cancelAnimationFrame(this.rafId),new Promise(n=>{this.rafId=window.requestAnimationFrame(()=>kB(this,void 0,void 0,function*(){yield this.getEllipsisState(),n()}))})}),this.canUseCSSEllipsis=()=>{const{copyable:t}=this.props,{expandable:n,expandText:s,pos:r,suffix:o}=this.getEllipsisOpt();return!n&&aE(s)&&!t&&r==="end"&&!o.length},this.shouldTruncated=t=>!t||t<1?!1:t<=1?this.compareSingleRow():this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight,this.compareSingleRow=()=>{if(!(document&&document.createRange))return!1;const t=this.wrapperRef.current,n=t.getBoundingClientRect().width,s=Array.from(t.childNodes),r=document.createRange(),o=s.reduce((a,l)=>{var c;return r.selectNodeContents(l),a+((c=r.getBoundingClientRect().width)!==null&&c!==void 0?c:0)},0);return r.detach(),o>n},this.showTooltip=()=>{var t,n;const{isOverflowed:s,isTruncated:r,expanded:o}=this.state,{showTooltip:a,expandable:l,expandText:c}=this.getEllipsisOpt(),u=this.canUseCSSEllipsis(),h=!o&&(u?s:r),f=!l&&aE(c)&&h&&a;if(!f)return f;const g={type:"tooltip"};return typeof a=="object"?a.type&&a.type.toLowerCase()==="popover"?ONe({opts:{showArrow:!0}},a,{opts:{className:It({[`${yo}-ellipsis-popover`]:!0,[(t=a==null?void 0:a.opts)===null||t===void 0?void 0:t.className]:!!(!((n=a==null?void 0:a.opts)===null||n===void 0)&&n.className)})}}):Object.assign(Object.assign({},g),a):g},this.onHover=()=>{if(this.canUseCSSEllipsis()){const{rows:n,suffix:s,pos:r}=this.getEllipsisOpt(),o=this.shouldTruncated(n);this.setState({isOverflowed:o,isTruncated:!1});return}},this.getEllipsisState=()=>kB(this,void 0,void 0,function*(){const{rows:t,suffix:n,pos:s}=this.getEllipsisOpt(),{children:r,strong:o}=this.props;if(!this.wrapperRef||!this.wrapperRef.current){yield this.onResize();return}const{expanded:a}=this.state;if(this.canUseCSSEllipsis())return;if(FMe(r))return new Promise(d=>{this.setState({isTruncated:!1,isOverflowed:!1},d)});if(a2("children"in this.props&&typeof r!="string","[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!t||t<0||a)return;const c={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},u=Array.isArray(r)?r.join(""):String(r),h=xBe(this.wrapperRef.current,t,u,c,LBe,n,s,o);return new Promise(d=>{this.setState({isOverflowed:!1,ellipsisContent:h,isTruncated:u!==h},d)})}),this.toggleOverflow=t=>{const{onExpand:n,expandable:s,collapsible:r}=this.getEllipsisOpt(),{expanded:o}=this.state;n&&n(!o,t),(s&&!o||r&&o)&&this.setState({expanded:!o})},this.getEllipsisOpt=()=>{const{ellipsis:t}=this.props;return t?Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:t.expandable?this.expandStr:void 0,collapseText:t.collapsible?this.collapseStr:void 0},typeof t=="object"?t:null):{}},this.renderExpandable=()=>{const{expanded:t,isTruncated:n}=this.state;if(!n)return null;const{expandText:s,expandable:r,collapseText:o,collapsible:a}=this.getEllipsisOpt(),l=!r&&aE(s),c=!a&&aE(o);let u;return!t&&!l?u=s:t&&!c&&(u=o),!l||!c?re.createElement("a",{role:"button",tabIndex:0,className:`${yo}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":u,onClick:this.toggleOverflow,onKeyPress:h=>ege(h)&&this.toggleOverflow(h)},u):null},this.getEllipsisStyle=()=>{const{ellipsis:t,component:n}=this.props;if(!t)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:s}=this.getEllipsisOpt(),{expanded:r}=this.state,o=!r&&this.canUseCSSEllipsis(),a=It({[`${yo}-ellipsis`]:!0,[`${yo}-ellipsis-single-line`]:s===1,[`${yo}-ellipsis-multiple-line`]:s>1,[`${yo}-ellipsis-multiple-line-text`]:s>1&&n==="span",[`${yo}-ellipsis-overflow-ellipsis`]:s===1&&o,[`${yo}-ellipsis-overflow-ellipsis-text`]:s===1&&o&&n==="span"}),l=o&&s>1?{WebkitLineClamp:s}:{};return{ellipsisCls:a,ellipsisStyle:l}},this.renderEllipsisText=t=>{const{suffix:n}=t,{children:s}=this.props,{isTruncated:r,expanded:o,ellipsisContent:a}=this.state;return o||!r?re.createElement("span",{onMouseEnter:this.onHover},s,n&&n.length?n:null):re.createElement("span",{onMouseEnter:this.onHover},a,n)},this.state={editable:!1,copied:!1,isOverflowed:!1,ellipsisContent:e.children,expanded:!1,isTruncated:!1,prevChildren:null},this.wrapperRef=re.createRef(),this.expandRef=re.createRef(),this.copyRef=re.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize().then(()=>JG(()=>this.observerTakingEffect=!0,1))}static getDerivedStateFromProps(e,t){const{prevChildren:n}=t,s={};return s.prevChildren=e.children,e.ellipsis&&n!==e.children&&(s.isOverflowed=!1,s.ellipsisContent=e.children,s.expanded=!1,s.isTruncated=!0),s}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}renderOperations(){return re.createElement(re.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:n}=this.props;if(!t)return null;const s=(e=t==null?void 0:t.content)!==null&&e!==void 0?e:n;let r,o=!1;Array.isArray(s)?(r="",s.forEach(l=>{typeof l=="object"&&(o=!0),r+=String(l)})):(typeof s!="object"||(o=!0),r=String(s)),a2(o,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const a=Object.assign({content:r,duration:3},typeof t=="object"?t:null);return re.createElement(ij,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props,n=t==="inherit"?this.context:t;if(!e)return null;const s=n==="small"?"small":"default";return re.createElement("span",{className:`${yo}-icon`,"x-semi-prop":"icon"},QG(e)?re.cloneElement(e,{size:s}):e)}renderContent(){const e=this.props,{component:t,children:n,className:s,type:r,spacing:o,disabled:a,style:l,ellipsis:c,icon:u,size:h,link:d,heading:f,weight:g}=e,p=EBe(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),_=PC(p,["strong","editable","mark","copyable","underline","code","delete"]),m=h==="inherit"?this.context:h,v=this.renderIcon(),y=this.getEllipsisOpt(),{ellipsisCls:C,ellipsisStyle:S}=this.getEllipsisStyle();let x=c?this.renderEllipsisText(y):n;const E=It({[`${yo}-link-text`]:d,[`${yo}-link-underline`]:this.props.underline&&d});x=TBe(this.props,re.createElement(re.Fragment,null,v,this.props.link?re.createElement("span",{className:E},x):x));const L=/^h[1-6]$/,T=Zb(f)&&L.test(f),D=It(s,C,{[`${yo}-${r}`]:r&&!d,[`${yo}-${m}`]:m,[`${yo}-link`]:d,[`${yo}-disabled`]:a,[`${yo}-${o}`]:o,[`${yo}-${f}`]:T,[`${yo}-${f}-weight-${g}`]:T&&g&&isNaN(Number(g))}),I=Object.assign(Object.assign({},isNaN(Number(g))?{}:{fontWeight:g}),l);return re.createElement(D3,Object.assign({className:D,style:Object.assign(Object.assign({},I),S),component:t,forwardRef:this.wrapperRef},_),x,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),n=this.renderContent();if(t){const{type:s,opts:r,renderTooltip:o}=t;return x3(o)?o(e,n):s.toLowerCase()==="popover"?re.createElement(zw,Object.assign({content:e,position:"top"},r),n):re.createElement(Sm,Object.assign({content:e,position:"top"},r),n)}else return n}render(){var e=this;const{size:t}=this.props,n=t==="inherit"?this.context:t,s=re.createElement(ige.Provider,{value:n},re.createElement(gv,{componentName:"Typography"},r=>(this.expandStr=r.expand,this.collapseStr=r.collapse,this.renderTipWrapper())));return this.props.ellipsis?re.createElement(sj,{onResize:function(){e.observerTakingEffect&&e.onResize(...arguments)},observeParent:!0,observerProperty:HN.Width},s):s}}Xv.propTypes={children:B.node,copyable:B.oneOfType([B.shape({text:B.string,onCopy:B.func,successTip:B.node,copyTip:B.node}),B.bool]),delete:B.bool,disabled:B.bool,ellipsis:B.oneOfType([B.shape({rows:B.number,expandable:B.bool,expandText:B.string,onExpand:B.func,suffix:B.string,showTooltip:B.oneOfType([B.shape({type:B.string,opts:B.object}),B.bool]),collapsible:B.bool,collapseText:B.string,pos:B.oneOf(["end","middle"])}),B.bool]),mark:B.bool,underline:B.bool,link:B.oneOfType([B.object,B.bool]),spacing:B.oneOf(Sa.SPACING),strong:B.bool,size:B.oneOf(Sa.SIZE),type:B.oneOf(Sa.TYPE),style:B.object,className:B.string,icon:B.oneOfType([B.node,B.string]),heading:B.string,component:B.string};Xv.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""};Xv.contextType=ige;let rj=class extends G.PureComponent{render(){return re.createElement(Xv,Object.assign({component:"span"},this.props))}};rj.propTypes={copyable:B.oneOfType([B.object,B.bool]),delete:B.bool,disabled:B.bool,icon:B.oneOfType([B.node,B.string]),ellipsis:B.oneOfType([B.object,B.bool]),mark:B.bool,underline:B.bool,link:B.oneOfType([B.object,B.bool]),strong:B.bool,type:B.oneOf(Sa.TYPE),size:B.oneOf(Sa.SIZE),style:B.object,className:B.string,code:B.bool,component:B.string,weight:B.number};rj.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var kBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let oj=class extends G.PureComponent{render(){const e=this.props,{heading:t}=e,n=kBe(e,["heading"]),s=Sa.HEADING.indexOf(t)!==-1?`h${t}`:"h1";return re.createElement(Xv,Object.assign({component:s,heading:s},n))}};oj.propTypes={copyable:B.oneOfType([B.object,B.bool]),delete:B.bool,disabled:B.bool,ellipsis:B.oneOfType([B.object,B.bool]),mark:B.bool,link:B.oneOfType([B.object,B.bool]),underline:B.bool,strong:B.bool,type:B.oneOf(Sa.TYPE),heading:B.oneOf(Sa.HEADING),style:B.object,className:B.string,component:B.string,weight:B.oneOfType([B.oneOf(Sa.WEIGHT),B.number])};oj.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};const MBe=M3.PREFIX;let aj=class extends G.PureComponent{render(){const{className:e}=this.props,t=It(e,`${MBe}-paragraph`);return re.createElement(Xv,Object.assign({component:"p"},this.props,{className:t}))}};aj.propTypes={copyable:B.oneOfType([B.object,B.bool]),delete:B.bool,disabled:B.bool,ellipsis:B.oneOfType([B.object,B.bool]),mark:B.bool,link:B.oneOfType([B.object,B.bool]),underline:B.bool,strong:B.bool,type:B.oneOf(Sa.TYPE),size:B.oneOf(Sa.SIZE),spacing:B.oneOf(Sa.SPACING),style:B.object,className:B.string,component:B.string};aj.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};class DBe{constructor(e,t,n,s,r){this.ruleMethods={"bytes-decimal":o=>{const a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0;for(;o>=1e3;)o/=1e3,l++;return`${this.truncatePrecision(o)} ${a[l]}`},"bytes-binary":o=>{const a=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let l=0;for(;o>=1024;)o/=1024,l++;return`${this.truncatePrecision(o)} ${a[l]}`},percentages:o=>`${this.truncatePrecision(o*100)}%`,exponential:o=>{const l=o.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(l[0]))}e${l[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=typeof r<"u",this.content=e,this.rule=t,this.precision=n,this.truncate=s,this.parser=r}format(){return this.isDiyParser?this.parser(this.content):this.rule==="text"?MB(this.content).map(e=>DB(e)?this.truncatePrecision(e):e).join(""):this.rule==="numbers"?MB(this.content).filter(e=>DB(e)).map(e=>this.truncatePrecision(e)).join(","):MB(this.content).map(e=>DB(e)?this.ruleMethods[this.rule](Number(e)):e).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),n=t.toString().split(".");if(n.length===1)return t.toFixed(this.precision);const s=n[1].length;return s<this.precision?`${n[0]}.${n[1]}${"0".repeat(this.precision-s)}`:t.toString()}}function MB(i){const e=/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g;return i.match(e)||[]}function DB(i){return!(isNaN(Number(i))||i.replace(/\s+/g,"")==="")}class lj extends G.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),e=e.map(t=>typeof t=="string"||typeof t=="number"?new DBe(String(t),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():typeof t=="function"?this.formatNodeDFS(t()):typeof t=="object"&&"children"in t.props?Object.assign(Object.assign({},t),{props:Object.assign(Object.assign({},t.props),{children:this.formatNodeDFS(t.props.children)})}):t),e.length===1?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),re.createElement(Xv,Object.assign({component:"span"},e))}}lj.propTypes={rule:B.oneOf(Sa.RULE),precision:B.number,truncate:B.oneOf(Sa.TRUNCATE),parser:B.func,copyable:B.oneOfType([B.object,B.bool]),delete:B.bool,disabled:B.bool,icon:B.oneOfType([B.node,B.string]),mark:B.bool,underline:B.bool,link:B.oneOfType([B.object,B.bool]),strong:B.bool,type:B.oneOf(Sa.TYPE),size:B.oneOf(Sa.SIZE),style:B.object,className:B.string,code:B.bool,component:B.string};lj.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const Yv=D3;Yv.Text=rj;Yv.Title=oj;Yv.Paragraph=aj;Yv.Numeral=lj;var ABe=zg,IBe=Du,NBe="[object Number]";function RBe(i){return typeof i=="number"||IBe(i)&&ABe(i)==NBe}var PBe=RBe;const bI=Mi(PBe),OBe=`${$i}-spin`,FBe={PREFIX:OBe},BBe={SIZE:["small","middle","large"]};class cj extends Dc{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},cj.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){const s=this;this._timer=setTimeout(()=>{s._adapter.setState({loading:e,delay:0})},t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}var zBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let $ee=-1;function sge(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:e,className:t}=i,n=zBe(i,["id","className"]);let s=e;ZG(s)&&($ee++,s=$ee);const r=`linearGradient-${s}`;return re.createElement("svg",Object.assign({},n,{className:t,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),re.createElement("defs",null,re.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:r},re.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),re.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),re.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),re.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},re.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),re.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${r})`,strokeWidth:"4",strokeLinecap:"round"})))}var UBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const f_=FBe.PREFIX;class uj extends Aa{constructor(e){super(e),this.foundation=new cj(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?e.spinning===!1?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:n}=this.state;return n?re.createElement("div",{className:`${f_}-wrapper`},e?re.createElement("div",{className:`${f_}-animate`,"x-semi-prop":"indicator"},e):re.createElement(sge,null),t?re.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:n,wrapperClassName:s,childStyle:r,size:o}=e,a=UBe(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,c=It(f_,s,{[`${f_}-${o}`]:o,[`${f_}-block`]:t,[`${f_}-hidden`]:!l});return re.createElement("div",Object.assign({className:c,style:n},this.getDataAttr(a)),this.renderSpin(),re.createElement("div",{className:`${f_}-children`,style:r,"x-semi-prop":"children"},t))}}uj.propTypes={size:B.oneOf(BBe.SIZE),spinning:B.bool,children:B.node,indicator:B.node,delay:B.number,tip:B.node,wrapperClassName:B.string,childStyle:B.object,style:B.object};uj.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const VBe={PREFIX:`${$i}-avatar`},BC={SHAPE:["circle","square"],SIZE:["extra-extra-small","extra-small","small","default","medium","large","extra-large"],COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],OVERLAP_FROM:["start","end"]};class WBe extends Dc{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=t=>{const{target:n}=t;try{n.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{a2(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:t}=this.getProps(),n=this._adapter.getAvatarNode(),s=n==null?void 0:n.firstChild,[r,o]=[(n==null?void 0:n.offsetWidth)||0,(s==null?void 0:s.offsetWidth)||0];if(r!==0&&o!==0&&t*2<r){const a=r-t*2>o?1:(r-t*2)/o;this._adapter.setScale(a)}}}init(){const{children:e}=this.getProps();typeof e=="string"&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();(e?e():void 0)!==!1&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}const HBe=i=>{let{gradientStart:e,gradientEnd:t}=i;const n=WN();return re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"51",height:"52",viewBox:"0 0 51 52",fill:"none"},re.createElement("g",{filter:"url(#filter0_d_6_2)"},re.createElement("path",{d:"M40.4918 46.5592C44.6795 43.176 46.261 34.1333 47.5301 25.6141C49.5854 11.8168 39.6662 1 25.8097 1C11.2857 1 3 11.4279 3 25.3518C3 33.7866 6.29361 43.8947 10.4602 46.5592C12.5868 47.9192 12.5868 47.9051 25.8097 47.9192C38.3651 47.9282 38.5352 48.14 40.4918 46.5592Z",fill:`url(#${n})`})),re.createElement("defs",null,re.createElement("filter",{id:"filter0_d_6_2",x:"0.789215",y:"0.447304",width:"49.2216",height:"51.3549",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},re.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),re.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),re.createElement("feOffset",{dy:"1.65809"}),re.createElement("feGaussianBlur",{stdDeviation:"1.10539"}),re.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"}),re.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_6_2"}),re.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_6_2",result:"shape"})),re.createElement("linearGradient",{id:n,x1:"17.671",y1:"31.7392",x2:"17.671",y2:"47.9333",gradientUnits:"userSpaceOnUse"},re.createElement("stop",{stopColor:e}),re.createElement("stop",{offset:"1",stopColor:t}))))};var $Be=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const GBe=BC.SIZE,jBe=BC.SHAPE,KBe=BC.COLOR,Ni=VBe.PREFIX;let Uw=class extends Aa{constructor(e){super(e),this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:t,onClick:n,imgAttr:s,src:r,srcSet:o,alt:a}=this.props,{isImgExist:l}=this.state;let c=t;const u=n!==rg,h=r&&l,d={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(h){const f=u?`clickable Avatar: ${a}`:a,g=Object.assign(Object.assign({src:r,srcSet:o,onError:this.handleError},s),{className:It({[`${Ni}-no-focus-visible`]:u})}),p=u?Object.assign(Object.assign({},g),d):g;c=re.createElement("img",Object.assign({alt:f},p))}else if(typeof t=="string"){const f=a??t,p={role:"img","aria-label":u?`clickable Avatar: ${f}`:f,className:It(`${Ni}-label`,{[`${Ni}-no-focus-visible`]:u})},_=u?Object.assign(Object.assign({},p),d):p,m={transform:`scale(${this.state.scale})`};c=re.createElement("span",{className:`${Ni}-content`,style:m},re.createElement("span",Object.assign({},_,{"x-semi-prop":"children"}),t))}return c},this.renderBottomSlot=()=>{var t,n;if(!this.props.bottomSlot)return null;if(this.props.bottomSlot.render)return this.props.bottomSlot.render();const s=(t=this.props.bottomSlot.render)!==null&&t!==void 0?t:()=>{var r;const o={};return this.props.bottomSlot.bgColor&&(o.backgroundColor=this.props.bottomSlot.bgColor),this.props.bottomSlot.textColor&&(o.color=this.props.bottomSlot.textColor),re.createElement("span",{style:o,className:It(`${Ni}-bottom_slot-shape_${this.props.bottomSlot.shape}`,`${Ni}-bottom_slot-shape_${this.props.bottomSlot.shape}-${this.props.size}`,(r=this.props.bottomSlot.className)!==null&&r!==void 0?r:"")},this.props.bottomSlot.text)};return re.createElement("div",{className:It([`${Ni}-bottom_slot`]),style:(n=this.props.bottomSlot.style)!==null&&n!==void 0?n:{}},s())},this.renderTopSlot=()=>{var t,n,s,r;if(!this.props.topSlot)return null;if(this.props.topSlot.render)return this.props.topSlot.render();const o={};return this.props.topSlot.textColor&&(o.color=this.props.topSlot.textColor),re.createElement("div",{style:(t=this.props.topSlot.style)!==null&&t!==void 0?t:{},className:It([`${Ni}-top_slot-wrapper`,(n=this.props.topSlot.className)!==null&&n!==void 0?n:"",{[`${Ni}-animated`]:this.props.contentMotion}])},re.createElement("div",{className:It([`${Ni}-top_slot-bg`,`${Ni}-top_slot-bg-${this.props.size}`])},re.createElement("div",{className:It([`${Ni}-top_slot-bg-svg`,`${Ni}-top_slot-bg-svg-${this.props.size}`])},re.createElement(HBe,{gradientStart:(s=this.props.topSlot.gradientStart)!==null&&s!==void 0?s:"var(--semi-color-primary)",gradientEnd:(r=this.props.topSlot.gradientEnd)!==null&&r!==void 0?r:"var(--semi-color-primary)"}))),re.createElement("div",{className:It([`${Ni}-top_slot`])},re.createElement("div",{style:o,className:It([`${Ni}-top_slot-content`,`${Ni}-top_slot-content-${this.props.size}`])},this.props.topSlot.text)))},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=re.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,n=t;this.setState({hoverContent:n},()=>{const{onMouseEnter:s}=this.props;s&&s(e)})},notifyLeave:e=>{this.setState({hoverContent:""},()=>{const{onMouseLeave:t}=this.props;t&&t(e)})},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return(e=this.avatarRef)===null||e===void 0?void 0:e.current}})}componentDidMount(){this.foundation=new WBe(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const t=new Image(0,0);t.src=this.props.src,t.onload=()=>{this.setState({isImgExist:!0})},t.onerror=()=>{this.setState({isImgExist:!1})},t.onabort=()=>{this.setState({isImgExist:!1})}}typeof this.props.children=="string"&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),VN(e);break;case"Escape":e.target.blur();break}}render(){var e;const t=this.props,{shape:n,children:s,size:r,color:o,className:a,hoverMask:l,onClick:c,imgAttr:u,src:h,srcSet:d,style:f,alt:g,gap:p,bottomSlot:_,topSlot:m,border:v,contentMotion:y}=t,C=$Be(t,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap","bottomSlot","topSlot","border","contentMotion"]),{isImgExist:S,hoverContent:x,focusVisible:E}=this.state;let L={};BC.SIZE.includes(r)||(L={width:r,height:r}),L=Object.assign(Object.assign({},L),f);const T=_||m||v,D={onClick:c,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave},I=h&&S,N=It(Ni,{[`${Ni}-${n}`]:n,[`${Ni}-${r}`]:r,[`${Ni}-${o}`]:o&&!I,[`${Ni}-img`]:I,[`${Ni}-focus`]:E,[`${Ni}-animated`]:y},a),P=x?re.createElement("div",{className:`${Ni}-hover`,"x-semi-prop":"hoverContent"},x):null;let O=re.createElement("span",Object.assign({},C,{style:T?{}:L,className:N},T?{}:D,{role:"listitem",ref:this.avatarRef}),this.getContent(),P);if(v){const V={};typeof v=="object"&&(v!=null&&v.color)&&(V.borderColor=v==null?void 0:v.color),O=re.createElement("div",{style:Object.assign({position:"relative"},L)},O,re.createElement("span",{style:V,className:It([`${Ni}-additionalBorder`,`${Ni}-additionalBorder-${r}`,{[`${Ni}-${n}`]:n}])}),typeof this.props.border=="object"&&this.props.border.motion&&re.createElement("span",{style:V,className:It([`${Ni}-additionalBorder`,`${Ni}-additionalBorder-${r}`,{[`${Ni}-${n}`]:n,[`${Ni}-additionalBorder-animated`]:typeof this.props.border=="object"&&((e=this.props.border)===null||e===void 0?void 0:e.motion)}])}))}return T?re.createElement("span",Object.assign({className:It([`${Ni}-wrapper`]),style:L},D),O,m&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&n==="circle"&&this.renderTopSlot(),_&&["extra-small","small","default","medium","large","extra-large"].includes(r)&&this.renderBottomSlot()):O}};Uw.__SemiComponentName__="Avatar";Uw.defaultProps=OC(Uw.__SemiComponentName__,{size:"medium",color:"grey",shape:"circle",gap:3,onClick:rg,onMouseEnter:rg,onMouseLeave:rg});Uw.propTypes={children:B.node,color:B.oneOf(KBe),shape:B.oneOf(jBe),size:B.oneOf(GBe),hoverMask:B.node,className:B.string,style:B.object,gap:B.number,imgAttr:B.object,src:B.string,srcSet:B.string,alt:B.string,onError:B.func,onClick:B.func,onMouseEnter:B.func,onMouseLeave:B.func,bottomSlot:B.shape({render:B.func,shape:B.oneOf(["circle","square"]),text:B.node,bgColor:B.string,textColor:B.string,className:B.string,style:B.object}),topSlot:B.shape({render:B.func,gradientStart:B.string,gradientEnd:B.string,text:B.node,textColor:B.string,className:B.string,style:B.object}),border:B.oneOfType([B.shape({color:B.string,motion:B.bool}),B.bool]),contentMotion:B.bool};Uw.elementType="Avatar";const hj={PREFIX:`${$i}-button`},Zv={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light","outline"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"},qBe={SIZE:["extra-small","small","default","large","extra-large","custom"],ICON_PREFIX:"semi-icon-"};var XBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const YBe=Zv.sizes,{htmlTypes:ZBe,btnTypes:QBe}=Zv;let GT=class extends G.PureComponent{render(){const e=this.props,{children:t,block:n,htmlType:s,loading:r,circle:o,className:a,style:l,disabled:c,size:u,theme:h,type:d,prefixCls:f,iconPosition:g}=e,p=XBe(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),_=Object.assign(Object.assign({disabled:c},PC(p,["x-semi-children-alias"])),{className:It(f,{[`${f}-${d}`]:!c&&d,[`${f}-disabled`]:c,[`${f}-size-large`]:u==="large",[`${f}-size-small`]:u==="small",[`${f}-light`]:h==="light",[`${f}-block`]:n,[`${f}-circle`]:o,[`${f}-borderless`]:h==="borderless",[`${f}-outline`]:h==="outline",[`${f}-${d}-disabled`]:c&&d},a),type:s,"aria-disabled":c}),m={};return a&&a.includes("-with-icon")||(m["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),re.createElement("button",Object.assign({},_,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),re.createElement("span",Object.assign({className:It(`${f}-content`,this.props.contentClassName),onClick:v=>c&&v.stopPropagation()},m),t))}};GT.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:rg,onClick:rg,onMouseEnter:rg,onMouseLeave:rg,prefixCls:hj.PREFIX};GT.propTypes={children:B.node,disabled:B.bool,prefixCls:B.string,style:B.object,size:B.oneOf(YBe),type:B.oneOf(QBe),block:B.bool,onClick:B.func,onMouseDown:B.func,circle:B.bool,loading:B.bool,htmlType:B.oneOf(ZBe),theme:B.oneOf(Zv.themes),className:B.string,onMouseEnter:B.func,onMouseLeave:B.func,"aria-label":B.string,contentClassName:B.string};var JBe=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const e8e=qBe.SIZE;class Qv extends G.PureComponent{render(){const e=this.props,{children:t,iconPosition:n,iconSize:s,iconStyle:r,style:o,icon:a,noHorizontalPadding:l,theme:c,className:u,prefixCls:h,loading:d}=e,f=JBe(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),g=Object.assign({},o);Array.isArray(l)?(l.includes("left")&&(g.paddingLeft=0),l.includes("right")&&(g.paddingRight=0)):l===!0?(g.paddingLeft=0,g.paddingRight=0):typeof l=="string"&&(l==="left"&&(g.paddingLeft=0),l==="right"&&(g.paddingRight=0));let p=null,_=null;d&&!f.disabled?_=re.createElement(sge,null):re.isValidElement(a)&&(_=a);const m=It({[`${h}-content-left`]:n==="right",[`${h}-content-right`]:n==="left"}),v=this.props["x-semi-children-alias"]||"children",y=t!=null?re.createElement("span",{className:m,"x-semi-prop":v},t):null;n==="left"?p=re.createElement(re.Fragment,null,_,y):p=re.createElement(re.Fragment,null,y,_);const C=It(u,`${h}-with-icon`,{[`${h}-with-icon-only`]:y==null||y==="",[`${h}-loading`]:d});return re.createElement(GT,Object.assign({},f,{className:C,theme:c,style:g}),p)}}Qv.defaultProps={iconPosition:Zv.DEFAULT_ICON_POSITION,prefixCls:hj.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:li,onMouseLeave:li};Qv.elementType="IconButton";Qv.propTypes={iconStyle:B.object,style:B.object,loading:B.bool,prefixCls:B.string,icon:B.oneOfType([B.object,B.string,B.node]),iconSize:B.oneOf(e8e),noHorizontalPadding:B.oneOfType([B.bool,B.string,B.array]),children:B.node,theme:B.string,iconPosition:B.oneOf(Zv.iconPositions),className:B.string,onMouseEnter:B.func,onMouseLeave:B.func};let Za=class extends re.PureComponent{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e)}render(){const e=Object.assign({},this.props),t=!!e.icon,n=!!e.loading,s=!!e.disabled;return t||n&&!s?re.createElement(Qv,Object.assign({},e)):re.createElement(GT,Object.assign({},e))}};Za.__SemiComponentName__="Button";Za.propTypes=Object.assign(Object.assign({},GT.propTypes),Qv.propTypes);Za.defaultProps=OC(Za.__SemiComponentName__);Za.elementType="Button";var t8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const GS=hj.PREFIX,n8e=Zv.sizes;class dj extends Aa{getInnerWithLine(e){const t=[];return e.length>1?(e.slice(0,-1).forEach((n,s)=>{const r=ts(n,"type.elementType")==="Button",o=ts(n,"props"),{type:a,theme:l,disabled:c}=o??{};if(r&&l!=="outline"){const u=It(`${GS}-group-line`,`${GS}-group-line-${l??"light"}`,`${GS}-group-line-${a??"primary"}`,{[`${GS}-group-line-disabled`]:c});t.push(n,re.createElement("span",{className:u,key:`line-${s}`}))}else t.push(n)}),t.push(e.slice(-1)),t):e}render(){const e=this.props,{children:t,disabled:n,size:s,type:r,className:o,style:a,"aria-label":l}=e,c=t8e(e,["children","disabled","size","type","className","style","aria-label"]);let u,h=[];const d=It(`${GS}-group`,o);return t&&(u=(Array.isArray(t)?t:[t]).map((f,g)=>{var p;return G.isValidElement(f)?G.cloneElement(f,Object.assign(Object.assign(Object.assign({disabled:n,size:s,type:r},f.props),c),{key:(p=f.key)!==null&&p!==void 0?p:g})):f}),h=this.getInnerWithLine(u)),re.createElement("div",{className:d,style:a,role:"group","aria-label":l},h)}}dj.propTypes={children:B.node,disabled:B.bool,type:B.string,size:B.oneOf(n8e),theme:B.oneOf(Zv.themes),"aria-label":B.string};dj.defaultProps={size:"default"};const fj={PREFIX:`${$i}-card`},rge={SHADOWS:["hover","always"],TYPE:["grid"]};var i8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const jS=fj.PREFIX;class oge extends G.PureComponent{render(){const e=this.props,{avatar:t,className:n,description:s,style:r,title:o}=e,a=i8e(e,["avatar","className","description","style","title"]),l=It(`${jS}-meta`,n),c=t&&re.createElement("div",{className:`${jS}-meta-avatar`},t),u=o&&re.createElement("div",{className:`${jS}-meta-wrapper-title`},o),h=s&&re.createElement("div",{className:`${jS}-meta-wrapper-description`},s),d=o||s?re.createElement("div",{className:`${jS}-meta-wrapper`},u,h):null;return re.createElement("div",Object.assign({},a,{className:l,style:r}),c,d)}}oge.propTypes={avatar:B.node,className:B.string,description:B.node,style:B.object,title:B.node};const gj={PREFIX:`${$i}-skeleton`};var s8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const r8e=BC.SIZE,o8e=BC.SHAPE,O3=i=>e=>t=>re.createElement(e,Object.assign({type:i},t));class zC extends G.PureComponent{render(){const e=this.props,{prefixCls:t,className:n,type:s,size:r,shape:o}=e,a=s8e(e,["prefixCls","className","type","size","shape"]),l=It(n,`${t}-${s}`,{[`${t}-${s}-${r}`]:s.toUpperCase()==="AVATAR"},{[`${t}-${s}-${o}`]:s.toUpperCase()==="AVATAR"});return re.createElement("div",Object.assign({className:l},a))}}zC.propTypes={type:B.string,prefixCls:B.string,style:B.object,className:B.string,size:B.oneOf(r8e),shape:B.oneOf(o8e)};zC.defaultProps={prefixCls:gj.PREFIX,size:"medium",shape:"circle"};const a8e=O3("avatar")(zC),l8e=O3("image")(zC),c8e=O3("title")(zC),u8e=O3("button")(zC);class pj extends G.PureComponent{render(){const{prefixCls:e,className:t,style:n,rows:s}=this.props,r=It(t,`${e}-paragraph`);return re.createElement("ul",{className:r,style:n},[...Array(s)].map((o,a)=>re.createElement("li",{key:a})))}}pj.propTypes={rows:B.number,prefixCls:B.string,style:B.object,className:B.string};pj.defaultProps={prefixCls:gj.PREFIX,rows:4};var h8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Gee=gj.PREFIX;let Md=class extends G.PureComponent{render(){const e=this.props,{placeholder:t,active:n,children:s,className:r,loading:o,style:a}=e,l=h8e(e,["placeholder","active","children","className","loading","style"]),c=It(Gee,{[`${Gee}-active`]:!!n},r);let u;return o?u=re.createElement("div",Object.assign({className:c,style:a},l,{"x-semi-prop":"placeholder"}),t):u=s,u}};Md.Avatar=a8e;Md.Title=c8e;Md.Button=u8e;Md.Paragraph=pj;Md.Image=l8e;Md.defaultProps={loading:!0};Md.propTypes={active:B.bool,placeholder:B.node,style:B.object,className:B.string,loading:B.bool,children:B.node};const d8e={PREFIX:`${$i}-space`},V_={ALIGN_SET:["start","end","center","baseline"],SPACING_LOOSE:"loose",SPACING_MEDIUM:"medium",SPACING_TIGHT:"tight"},f8e="Symbol(react.fragment)",L9=i=>{let e=[];return re.Children.forEach(i,t=>{t!=null&&(Array.isArray(t)?e=e.concat(L9(t)):G.isValidElement(t)&&t.type&&t.type.toString()===f8e&&t.props?e=e.concat(L9(t.props.children)):e.push(t))}),e},Ou=d8e.PREFIX;let F3=class extends G.PureComponent{render(){const{children:e=null,style:t,className:n,spacing:s,wrap:r,align:o,vertical:a}=this.props,l=r&&a?!1:r,c=Object.assign({},t);let u="",h="";Zb(s)?(u=s,h=s):bI(s)?(c.rowGap=s,c.columnGap=s):OLe(s)&&(Zb(s[0])?u=s[0]:bI(s[0])&&(c.columnGap=`${s[0]}px`),Zb(s[1])?h=s[1]:bI(s[1])&&(c.rowGap=`${s[1]}px`));const d=It(Ou,n,{[`${Ou}-align-${o}`]:o,[`${Ou}-vertical`]:a,[`${Ou}-horizontal`]:!a,[`${Ou}-wrap`]:l,[`${Ou}-tight-horizontal`]:u===V_.SPACING_TIGHT,[`${Ou}-tight-vertical`]:h===V_.SPACING_TIGHT,[`${Ou}-medium-horizontal`]:u===V_.SPACING_MEDIUM,[`${Ou}-medium-vertical`]:h===V_.SPACING_MEDIUM,[`${Ou}-loose-horizontal`]:u===V_.SPACING_LOOSE,[`${Ou}-loose-vertical`]:h===V_.SPACING_LOOSE}),f=L9(e),g=WG(this.props);return re.createElement("div",Object.assign({},g,{className:d,style:c,"x-semi-prop":"children"}),f)}};F3.propTypes={wrap:B.bool,align:B.oneOf(V_.ALIGN_SET),vertical:B.bool,spacing:B.oneOfType([B.string,B.number,B.array]),children:B.node,style:B.object,className:B.string};F3.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};var g8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const ua=fj.PREFIX;class B3 extends G.PureComponent{constructor(){super(...arguments),this.renderHeader=()=>{const{title:e,headerExtraContent:t,header:n,headerLine:s,headerStyle:r}=this.props,o=It(`${ua}-header`,{[`${ua}-header-bordered`]:!!s}),a=It(`${ua}-header-wrapper`),l=It(`${ua}-header-wrapper-title`,{[`${ua}-header-wrapper-spacing`]:!!t});return n||t||e?re.createElement("div",{style:r,className:o},n||re.createElement("div",{className:a},t&&re.createElement("div",{className:`${ua}-header-wrapper-extra`,"x-semi-prop":"headerExtraContent"},t),e&&re.createElement("div",{className:l},Zb(e)?re.createElement(Yv.Title,{heading:6,ellipsis:{showTooltip:!0,rows:1},"x-semi-prop":"title"},e):e))):null},this.renderCover=()=>{const{cover:e}=this.props,t=It(`${ua}-cover`);return e&&re.createElement("div",{className:t,"x-semi-prop":"cover"},e)},this.renderBody=()=>{const{bodyStyle:e,children:t,actions:n,loading:s}=this.props,r=It(`${ua}-body`),o=It(`${ua}-body-actions`),a=It(`${ua}-body-actions-item`),l=re.createElement("div",null,re.createElement(Md.Title,null),re.createElement("br",null),re.createElement(Md.Paragraph,{rows:3}));return re.createElement("div",{style:e,className:r},t&&re.createElement(Md,{placeholder:l,loading:s,active:!0},t),Array.isArray(n)&&re.createElement("div",{className:o},re.createElement(F3,{spacing:12},n.map((c,u)=>re.createElement("div",{key:u,className:a,"x-semi-prop":`actions.${u}`},c)))))},this.renderFooter=()=>{const{footer:e,footerLine:t,footerStyle:n}=this.props,s=It(`${ua}-footer`,{[`${ua}-footer-bordered`]:t});return e&&re.createElement("div",{style:n,className:s,"x-semi-prop":"footer"},e)}}render(){const e=this.props,{bordered:t,shadows:n,style:s,className:r}=e,o=g8e(e,["bordered","shadows","style","className"]),a=PC(o,["actions","bodyStyle","cover","headerExtraContent","footer","footerLine","footerStyle","header","headerLine","headerStyle","loading","title"]),l=It(ua,r,{[`${ua}-bordered`]:t,[`${ua}-shadows`]:n,[`${ua}-shadows-${n}`]:n});return re.createElement("div",Object.assign({},a,{"aria-busy":this.props.loading,className:l,style:s}),this.renderHeader(),this.renderCover(),this.renderBody(),this.renderFooter())}}B3.Meta=oge;B3.propTypes={actions:B.array,bodyStyle:B.object,bordered:B.bool,children:B.node,className:B.string,cover:B.node,footer:B.node,footerLine:B.bool,footerStyle:B.object,header:B.node,headerExtraContent:B.node,headerLine:B.bool,headerStyle:B.object,loading:B.bool,shadows:B.oneOf(rge.SHADOWS),style:B.object,title:B.node,"aria-label":B.string};B3.defaultProps={bordered:!0,footerLine:!1,headerLine:!0,loading:!1};var p8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const jee=fj.PREFIX;class mj extends G.PureComponent{render(){const e=this.props,{children:t,className:n,spacing:s,style:r,type:o}=e,a=p8e(e,["children","className","spacing","style","type"]),l=o==="grid",c=It(`${jee}-group`,n,{[`${jee}-group-grid`]:l});return re.createElement(F3,Object.assign({spacing:l?0:s,wrap:!0,className:c,style:r},a),t)}}mj.propTypes={children:B.node,className:B.string,spacing:B.oneOfType([B.number,B.array]),style:B.object,type:B.oneOf(rge.TYPE)};mj.defaultProps={spacing:16};function m8e(i,e,t,n){for(var s=i.length,r=t+(n?1:-1);n?r--:++r<s;)if(e(i[r],r,i))return r;return-1}var _8e=m8e;function v8e(i){return i!==i}var y8e=v8e;function b8e(i,e,t){for(var n=t-1,s=i.length;++n<s;)if(i[n]===e)return n;return-1}var w8e=b8e,C8e=_8e,S8e=y8e,x8e=w8e;function E8e(i,e,t){return e===e?x8e(i,e,t):C8e(i,S8e,t)}var L8e=E8e,T8e=L8e;function k8e(i,e){var t=i==null?0:i.length;return!!t&&T8e(i,e,0)>-1}var M8e=k8e;function D8e(i,e,t){for(var n=-1,s=i==null?0:i.length;++n<s;)if(t(e,i[n]))return!0;return!1}var A8e=D8e,I8e=Hfe,N8e=M8e,R8e=A8e,P8e=UG,O8e=N3,F8e=$fe,B8e=200;function z8e(i,e,t,n){var s=-1,r=N8e,o=!0,a=i.length,l=[],c=e.length;if(!a)return l;t&&(e=P8e(e,O8e(t))),n?(r=R8e,o=!1):e.length>=B8e&&(r=F8e,o=!1,e=new I8e(e));e:for(;++s<a;){var u=i[s],h=t==null?u:t(u);if(u=n||u!==0?u:0,o&&h===h){for(var d=c;d--;)if(e[d]===h)continue e;l.push(u)}else r(e,h,n)||l.push(u)}return l}var U8e=z8e,V8e=zg,W8e=Du,H8e="[object Boolean]";function $8e(i){return i===!0||i===!1||W8e(i)&&V8e(i)==H8e}var G8e=$8e;const j8e=Mi(G8e);function pv(){return pv=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},pv.apply(null,arguments)}const K8e={PREFIX:`${$i}-tag`},z3={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]};var q8e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const ha=K8e.PREFIX,age=z3.TAG_COLOR,lge=z3.TAG_SIZE,cge=z3.TAG_TYPE,X8e=z3.AVATAR_SHAPE;class mv extends G.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,n){const{onClose:s}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),s&&s(t,e,n),!e.defaultPrevented&&this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:n,onKeyDown:s}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),VN(e);break;case"Enter":n(e),VN(e);break;case"Escape":e.target.blur();break}s&&s(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return re.createElement(Uw,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:n,size:s,color:r,closable:o,visible:a,onClose:l,onClick:c,className:u,type:h,shape:d,avatarSrc:f,avatarShape:g,tabIndex:p,prefixIcon:_,suffixIcon:m}=e,v=q8e(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:y}=this.state,C=c!==mv.defaultProps.onClick||o,S={role:"button",tabIndex:p||0,onKeyDown:this.handleKeyDown},x=Object.assign(Object.assign({},v),{onClick:c,tabIndex:p,className:It(ha,{[`${ha}-default`]:s==="default",[`${ha}-small`]:s==="small",[`${ha}-large`]:s==="large",[`${ha}-square`]:d==="square",[`${ha}-circle`]:d==="circle",[`${ha}-${h}`]:h,[`${ha}-${r}-${h}`]:r&&h,[`${ha}-closable`]:o,[`${ha}-invisible`]:!y,[`${ha}-avatar-${g}`]:f},u)}),E=C?Object.assign(Object.assign({},x),S):x,L=o?re.createElement("div",{className:`${ha}-close`,onClick:I=>this.close(I,n,t)},re.createElement(nj,{size:"small"})):null,T=Zb(n),D=It(`${ha}-content`,`${ha}-content-${T?"ellipsis":"center"}`);return re.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||T?`${o?"Closable ":""}Tag: ${n}`:""},E),_?re.createElement("div",{className:`${ha}-prefix-icon`},_):null,f?this.renderAvatar():null,re.createElement("div",{className:D},n),m?re.createElement("div",{className:`${ha}-suffix-icon`},m):null,L)}}mv.defaultProps={size:lge[0],color:age[0],closable:!1,type:cge[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null};mv.propTypes={children:B.node,tagKey:B.oneOfType([B.string,B.number]),size:B.oneOf(lge),color:B.oneOf(age),type:B.oneOf(cge),closable:B.bool,visible:B.bool,onClose:B.func,onClick:B.func,prefixIcon:B.node,suffixIcon:B.node,style:B.object,className:B.string,avatarSrc:B.string,avatarShape:B.oneOf(X8e),"aria-label":B.string};const Hi={DIALOG:`${$i}-modal`},Kee={cancelKey:"cancel",confirmKey:"confirm",SIZE:["small","medium","large","full-width"],directions:["ltr","rtl"]};function Y8e(i){return i!==null&&typeof i=="object"}function qee(i){return Y8e(i)&&typeof i.then=="function"}class Z8e extends Dc{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(t,n)=>{this._adapter.toggleDisplayNone(t,n)}}destroy(){this.afterHide()}handleCancel(e){var t;const n=this._adapter.notifyCancel(e);qee(n)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),(t=n==null?void 0:n.then(()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(s=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),s}))}handleOk(e){var t;const n=this._adapter.notifyOk(e);qee(n)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),(t=n==null?void 0:n.then(()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})}))===null||t===void 0||t.catch(s=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),s}))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}enabledBodyScroll(){this._adapter.enabledBodyScroll()}}class _j extends Dc{constructor(e){super(Object.assign(Object.assign({},_j.defaultAdapter),e)),this.handleKeyDown=t=>{const{closeOnEsc:n}=this.getProps();if(n&&t.keyCode===_Be.ESC){t.stopPropagation(),this.close(t);return}}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target===e.currentTarget&&!t&&this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}var Q8e=U8e,J8e=Dfe,e6e=bfe,t6e=J8e(function(i,e){return e6e(i)?Q8e(i,e):[]}),n6e=t6e;const i6e=Mi(n6e);class Hp{constructor(e,t){var n;this.addFocusRedirectListener=s=>(this.focusRedirectListenerList.push(s),()=>this.removeFocusRedirectListener(s)),this.removeFocusRedirectListener=s=>{this.focusRedirectListenerList=i6e(this.focusRedirectListenerList,s)},this.destroy=()=>{var s;(s=this.container)===null||s===void 0||s.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=s=>{if(!this.enable)return!1;for(const r of this.focusRedirectListenerList)if(!r(s))return!1;return!0},this.focusElement=(s,r)=>{const{preventScroll:o}=this.options;s==null||s.focus({preventScroll:o}),r.preventDefault()},this.onKeyPress=s=>{if(s&&s.key==="Tab"){const r=Hp.getFocusableElements(this.container);r.length&&(s.shiftKey?this.handleContainerShiftTabKeyDown(r,s):this.handleContainerTabKeyDown(r,s))}},this.handleContainerTabKeyDown=(s,r)=>{const o=Hp.getActiveElement(),a=s[s.length-1]===o,l=s[0];a&&this.shouldFocusRedirect(l)&&this.focusElement(l,r)},this.handleContainerShiftTabKeyDown=(s,r)=>{const o=Hp.getActiveElement(),a=s[0]===o,l=s[s.length-1];a&&this.shouldFocusRedirect(l)&&this.focusElement(l,r)},Object.freeze(t),this.container=e,this.options=t,this.enable=(n=t==null?void 0:t.enable)!==null&&n!==void 0?n:!0,this.focusRedirectListenerList=t!=null&&t.onFocusRedirectListener?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!tb(e))return[];const n=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(n))}static getActiveElement(){return document?document.activeElement:null}}var AB=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let s6e=0;class U3 extends Aa{constructor(e){super(e),this.onKeyDown=t=>{this.foundation.handleKeyDown(t)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=t=>{this.foundation.handleMaskClick(t)},this.close=t=>{this.foundation.close(t)},this.getMaskElement=()=>{const t=AB(this.props,[]),{mask:n,maskClassName:s}=t;if(n){const r=It(`${Hi.DIALOG}-mask`,{});return re.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:It(r,s),style:t.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:t,closeIcon:n}=this.props;let s;if(t){const r=n||re.createElement(nj,{"x-semi-prop":"closeIcon"});s=re.createElement(Qv,{"aria-label":"close",className:`${Hi.DIALOG}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:r,theme:"borderless",size:"small"})}return s},this.renderIcon=()=>{const{icon:t}=this.props;return t?re.createElement("span",{className:`${Hi.DIALOG}-icon-wrapper`,"x-semi-prop":"icon"},t):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:t}=this.props,n=this.renderCloseBtn(),s=this.renderIcon();return t==null?null:re.createElement("div",{className:`${Hi.DIALOG}-header`},s,re.createElement(Yv.Title,{heading:5,className:`${Hi.DIALOG}-title`,id:`${Hi.DIALOG}-title`,"x-semi-prop":"title"},t),n)},this.renderBody=()=>{const{bodyStyle:t,children:n,title:s}=this.props,r=It(`${Hi.DIALOG}-body`,{[`${Hi.DIALOG}-withIcon`]:this.props.icon}),o=this.renderCloseBtn(),a=this.renderIcon();return s!=null||"header"in this.props?re.createElement("div",{className:r,id:`${Hi.DIALOG}-body`,style:t,"x-semi-prop":"children"},n):re.createElement("div",{className:`${Hi.DIALOG}-body-wrapper`},a,re.createElement("div",{className:r,style:t,"x-semi-prop":"children"},n),o)},this.getDialogElement=()=>{const t=AB(this.props,[]),n={},s=It(`${Hi.DIALOG}`,{[`${Hi.DIALOG}-centered`]:t.centered,[`${Hi.DIALOG}-${t.size}`]:t.size});t.width&&(n.width=t.width),t.height&&(n.height=t.height),t.isFullScreen&&(n.width="100%",n.height="100%",n.margin="unset");const r=this.renderBody(),o=this.renderHeader(),a=t.footer?re.createElement("div",{className:`${Hi.DIALOG}-footer`,"x-semi-prop":"footer"},t.footer):null;return re.createElement("div",{key:"dialog-element",className:s,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},t.style),n),id:this.dialogId},re.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":`${Hi.DIALOG}-title`,"aria-describedby":`${Hi.DIALOG}-body`,onAnimationEnd:t.onAnimationEnd,className:It([`${Hi.DIALOG}-content`,t.contentClassName,{[`${Hi.DIALOG}-content-fullScreen`]:t.isFullScreen}])},o,r,a))},this.state={dialogMouseDown:!1,prevFocusElement:Hp.getActiveElement()},this.foundation=new _j(this.adapter),this.dialogId=`dialog-${s6e++}`,this.modalDialogRef=re.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout(()=>{this.setState({dialogMouseDown:!1})},0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,n;const{preventScroll:s}=this.props;let r;if(this.modalDialogRef){const o=Hp.getActiveElement();r=this.modalDialogRef.current.contains(o),(e=this.focusTrapHandle)===null||e===void 0||e.destroy(),this.focusTrapHandle=new Hp(this.modalDialogRef.current,{preventScroll:s})}r||(n=(t=this.modalDialogRef)===null||t===void 0?void 0:t.current)===null||n===void 0||n.focus({preventScroll:s})},modalDialogBlur:()=>{var e,t;(e=this.modalDialogRef)===null||e===void 0||e.current.blur(),(t=this.focusTrapHandle)===null||t===void 0||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,n=ts(e,"focus");x3(n)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=Hp.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||(e=t[0])===null||e===void 0||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){var e;const t=this.props,{maskClosable:n,className:s,getPopupContainer:r,maskFixed:o,getContainerContext:a}=t,l=AB(t,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:c}=this.context,u=It(s,{[`${Hi.DIALOG}-popup`]:r&&r()!==((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body)&&!o,[`${Hi.DIALOG}-fixed`]:o,[`${Hi.DIALOG}-rtl`]:c==="rtl"}),h=a(),d=this.getDataAttr(l),f=re.createElement("div",Object.assign({className:u},d),this.getMaskElement(),re.createElement("div",Object.assign({role:"none",className:It({[`${Hi.DIALOG}-wrap`]:!0,[`${Hi.DIALOG}-wrap-center`]:this.props.centered}),onClick:n?this.onMaskClick:null,onMouseUp:n?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return h&&h.Provider?re.createElement(h.Provider,{value:h.value},f):f}}U3.contextType=FC;U3.propTypes={close:B.func,getContainerContext:B.func,contentClassName:B.string,maskClassName:B.string,onAnimationEnd:B.func,preventScroll:B.bool};U3.defaultProps={close:li,getContainerContext:li,contentClassName:"",maskClassName:""};var r6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const uge=i=>{const[e,t]=G.useState(!0),[n,s]=G.useState(),[r,o]=G.useState(),{direction:a}=i,{title:l,content:c,icon:u,type:h,onCancel:d,onOk:f,className:g}=i,p=r6e(i,["title","content","icon","type","onCancel","onOk","className"]),_=G.useCallback(L=>{const T=f&&f(L);T&&T.then?(s(!0),T.then(function(){t(!1),s(!1)},D=>{s(!1)})):t(!1)},[f]),m=G.useCallback(L=>{const T=d&&d(L);T&&T.then?(o(!0),T.then(function(){t(!1),o(!1)},D=>{o(!1)})):t(!1)},[d]),v=`${Hi.DIALOG}-confirm`,y=It(g,v,{[`${v}-rtl`]:a==="rtl"}),C=It(`${Hi.DIALOG}-${h}`),S=QG(u)?re.cloneElement(u,{className:`${v}-icon ${C}-icon`,size:"extra-large"}):u,x=l==null?null:re.createElement("span",{className:`${v}-title-text`},l),E=It(`${v}-content`,{[`${v}-content-withIcon`]:i.icon});return re.createElement(Sc,Object.assign({className:y,title:x,confirmLoading:n,cancelLoading:r,onOk:_,onCancel:m,icon:S,visible:e},p),re.createElement("div",{className:E,"x-semi-prop":"content"},c))};function jT(i){const e=document.createElement("div");document.body.appendChild(e);let t=Object.assign({},i);const n=()=>{sg.unmountComponentAtNode(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let l=0;l<x0.length;l++)if(x0[l]===r){x0.splice(l,1);break}};function s(a){const{afterClose:l}=a;sg.render(re.createElement(uge,Object.assign({},a,{afterClose:function(){l==null||l(...arguments),n()},motion:i.motion})),e)}function r(){t=Object.assign(Object.assign({},t),{visible:!1}),s(t)}function o(a){t=Object.assign(Object.assign({},t),a),s(t)}return s(t),x0.push(r),{destroy:r,update:o}}function hge(i){return Object.assign({type:"info",icon:re.createElement(Qfe,null)},i)}function dge(i){return Object.assign({type:"success",icon:re.createElement(Jfe,null)},i)}function fge(i){return Object.assign({type:"warning",icon:re.createElement(Zfe,null)},i)}function gge(i){return Object.assign({type:"error",icon:re.createElement(Yfe,null),okButtonProps:Object.assign({type:"danger"},i.okButtonProps)},PC(i,["okButtonProps"]))}function pge(i){return Object.assign({type:"confirm",icon:re.createElement(eBe,null)},i)}var o6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const a6e=(i,e)=>{var{afterClose:t,config:n}=i;o6e(i,["afterClose","config"]);const[s,r]=re.useState(n);re.useImperativeHandle(e,()=>({destroy:()=>{r(a=>Object.assign(Object.assign({},a),{visible:!1}))},update:a=>{r(l=>Object.assign(Object.assign({},l),a))}}));const o=()=>{var a;(a=n==null?void 0:n.afterClose)===null||a===void 0||a.call(n),t()};return re.createElement(uge,Object.assign({},s,{afterClose:o}))},l6e=re.forwardRef(a6e);let Xee=0;function c6e(){const[i,e]=re.useState([]);function t(n){return e(s=>[...s,n]),()=>{e(s=>s.filter(r=>r!==n))}}return[i,t]}function u6e(){const[i,e]=c6e();function t(n){return function(r){Xee+=1;const o=re.createRef();let a;const l=re.createElement(l6e,{key:`semi-modal-${Xee}`,config:n(r),ref:o,afterClose:()=>{a()}});return a=e(l),{destroy:()=>{o.current&&o.current.destroy()},update:c=>{o.current&&o.current.update(c)}}}}return[{info:t(hge),success:t(dge),error:t(gge),warning:t(fge),confirm:t(pge)},re.createElement(re.Fragment,null,i)]}var h6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};let x0=[];class Sc extends Aa{constructor(e){super(e),this.bodyOverflow=null,this.handleCancel=t=>{this.foundation.handleCancel(t)},this.handleOk=t=>{this.foundation.handleOk(t)},this.updateState=()=>{const{visible:t}=this.props;this.foundation.toggleDisplayNone(!t)},this.renderFooter=()=>{const{okText:t,okType:n,cancelText:s,confirmLoading:r,cancelLoading:o,hasCancel:a,footerFill:l}=this.props,c=u=>{var h;return a?re.createElement(Za,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:o===void 0?this.state.onCancelReturnPromiseStatus==="pending":o,type:"tertiary",block:l,autoFocus:!0},this.props.cancelButtonProps,{style:Object.assign(Object.assign({},l?{marginLeft:"unset"}:{}),(h=this.props.cancelButtonProps)===null||h===void 0?void 0:h.style),"x-semi-children-alias":"cancelText"}),s||u.cancel):null};return re.createElement(gv,{componentName:"Modal"},(u,h)=>re.createElement("div",{className:It({[`${Hi.DIALOG}-footerfill`]:l})},c(u),re.createElement(Za,Object.assign({"aria-label":"confirm",type:n,theme:"solid",block:l,loading:r===void 0?this.state.onOKReturnPromiseStatus==="pending":r,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),t||u.confirm)))},this.renderDialog=()=>{var t;let n=this.props,{footer:s,className:r,motion:o,maskStyle:a,keepDOM:l,style:c,zIndex:u,getPopupContainer:h,visible:d,modalContentClass:f}=n,g=h6e(n,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible","modalContentClass"]),p=c;const _=a,m="footer"in this.props?s:this.renderFooter();let v={zIndex:u};h&&h()!==((t=globalThis==null?void 0:globalThis.document)===null||t===void 0?void 0:t.body)&&(v={zIndex:u,position:"static"});const y=It(r,{[`${Hi.DIALOG}-displayNone`]:l&&this.state.displayNone}),C=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return C&&(this._haveRendered=!0),re.createElement(l2,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${Hi.DIALOG}-content-animate-show`:`${Hi.DIALOG}-content-animate-hide`,onAnimationEnd:()=>{this.updateState()}},S=>{let{animationClassName:x,animationEventsNeedBind:E}=S;return re.createElement(l2,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${Hi.DIALOG}-mask-animate-show`:`${Hi.DIALOG}-mask-animate-hide`,onAnimationEnd:()=>{this.updateState()}},L=>{let{animationClassName:T,animationEventsNeedBind:D}=L;return C?re.createElement($T,{style:v,getPopupContainer:h}," ",re.createElement(U3,Object.assign({},g,{contentExtraProps:E,maskExtraProps:D,isFullScreen:this.state.isFullScreen,contentClassName:`${x} ${f}`,maskClassName:T,className:y,getPopupContainer:h,maskStyle:_,style:p,ref:this.modalRef,footer:m,onClose:this.handleCancel}))):re.createElement(re.Fragment,null)})})},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new Z8e(this.adapter),this.modalRef=re.createRef(),this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;this.bodyOverflow=document.body.style.overflow||"",(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{var e;const{getPopupContainer:t}=this.props;(!t||t()===((e=globalThis==null?void 0:globalThis.document)===null||e===void 0?void 0:e.body))&&this.bodyOverflow!==null&&this.bodyOverflow!=="hidden"&&(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||li)},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const n={};return e.fullScreen!==t.isFullScreen&&(n.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(n.displayNone=!1),n}componentDidMount(){this.scrollBarWidth=$5e(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,n){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible?this.foundation.destroy():this.foundation.enabledBodyScroll()}render(){return this.props,this.renderDialog()}}Sc.propTypes={mask:B.bool,closable:B.bool,centered:B.bool,visible:B.bool,width:B.oneOfType([B.string,B.number]),height:B.oneOfType([B.string,B.number]),confirmLoading:B.bool,cancelLoading:B.bool,okText:B.string,okType:B.string,cancelText:B.string,maskClosable:B.bool,onCancel:B.func,onOk:B.func,afterClose:B.func,okButtonProps:B.object,cancelButtonProps:B.object,style:B.object,className:B.string,maskStyle:B.object,bodyStyle:B.object,zIndex:B.number,title:B.node,icon:B.node,header:B.node,footer:B.node,hasCancel:B.bool,motion:B.bool,children:B.node,getPopupContainer:B.func,getContainerContext:B.func,maskFixed:B.bool,closeIcon:B.node,closeOnEsc:B.bool,size:B.oneOf(Kee.SIZE),keepDOM:B.bool,lazyRender:B.bool,direction:B.oneOf(Kee.directions),fullScreen:B.bool,footerFill:B.bool};Sc.__SemiComponentName__="Modal";Sc.defaultProps=OC(Sc.__SemiComponentName__,{zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:li,onOk:li,afterClose:li,maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1});Sc.useModal=u6e;Sc.info=function(i){return jT(hge(i))};Sc.success=function(i){return jT(dge(i))};Sc.error=function(i){return jT(gge(i))};Sc.warning=function(i){return jT(fge(i))};Sc.confirm=function(i){return jT(pge(i))};Sc.destroyAll=function(){for(let e=0,t=x0.length;e<t;e++){const n=x0[e];n&&n()}x0=[]};const mge={PREFIX:`${$i}`};var d6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const Yee=["xxl","xl","lg","md","sm","xs"],_ge=re.createContext(null),Zee={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class V3 extends re.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(Zee).map(e=>V5e(Zee[e],{match:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})}))},unmatch:()=>{typeof this.props.gutter=="object"&&this.setState(t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})}))}}))}componentWillUnmount(){this.unRegisters.forEach(e=>e())}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach((s,r)=>{if(typeof s=="object")for(let o=0;o<Yee.length;o++){const a=Yee[o];if(this.state.screens[a]&&s[a]!==void 0){t[r]=s[a];break}}else t[r]=s||0}),t}render(){const e=this.props,{prefixCls:t,type:n,justify:s,align:r,className:o,style:a,children:l}=e,c=d6e(e,["prefixCls","type","justify","align","className","style","children"]),u=this.getGutter(),h=`${t}-row`,d=It({[h]:n!=="flex",[`${h}-${n}`]:n,[`${h}-${n}-${s}`]:n&&s,[`${h}-${n}-${r}`]:n&&r},o),f=Object.assign(Object.assign(Object.assign({},u[0]>0?{marginLeft:u[0]/-2,marginRight:u[0]/-2}:{}),u[1]>0?{marginTop:u[1]/-2,marginBottom:u[1]/-2}:{}),a),g=Object.assign({},c);return delete g.gutter,re.createElement(_ge.Provider,{value:{gutters:u}},re.createElement("div",Object.assign({},g,{className:d,style:f,"x-semi-prop":"children"}),l))}}V3.propTypes={type:B.oneOf(["flex"]),align:B.oneOf(["top","middle","bottom"]),justify:B.oneOf(["start","end","center","space-around","space-between"]),className:B.string,style:B.object,children:B.node,gutter:B.oneOfType([B.object,B.number,B.array]),prefixCls:B.string};V3.defaultProps={prefixCls:mge.PREFIX};V3.RowContext={gutters:B.any};var f6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const V1=B.oneOfType([B.object,B.number]);class W3 extends re.Component{render(){const{props:e}=this,{prefixCls:t,span:n,order:s,offset:r,push:o,pull:a,className:l,children:c}=e,u=f6e(e,["prefixCls","span","order","offset","push","pull","className","children"]);let h={};const d=`${t}-col`;["xs","sm","md","lg","xl","xxl"].forEach(_=>{let m={};typeof e[_]=="number"?m.span=e[_]:typeof e[_]=="object"&&(m=e[_]||{}),delete u[_],h=Object.assign(Object.assign({},h),{[`${d}-${_}-${m.span}`]:m.span!==void 0,[`${d}-${_}-order-${m.order}`]:m.order||m.order===0,[`${d}-${_}-offset-${m.offset}`]:m.offset||m.offset===0,[`${d}-${_}-push-${m.push}`]:m.push||m.push===0,[`${d}-${_}-pull-${m.pull}`]:m.pull||m.pull===0})});const f=It(d,{[`${d}-${n}`]:n!==void 0,[`${d}-order-${s}`]:s,[`${d}-offset-${r}`]:r,[`${d}-push-${o}`]:o,[`${d}-pull-${a}`]:a},l,h);let{style:g}=u,p;try{p=this.context.gutters}catch{throw new Error("please make sure <Col> inside <Row>")}return g=Object.assign(Object.assign(Object.assign({},p[0]>0?{paddingLeft:p[0]/2,paddingRight:p[0]/2}:{}),p[1]>0?{paddingTop:p[1]/2,paddingBottom:p[1]/2}:{}),g),re.createElement("div",Object.assign({},u,{style:g,className:f,"x-semi-prop":"children"}),c)}}W3.contextType=_ge;W3.propTypes={span:B.number,order:B.number,offset:B.number,push:B.number,pull:B.number,className:B.string,children:B.node,xs:V1,sm:V1,md:V1,lg:V1,xl:V1,xxl:V1,prefixCls:B.string};W3.defaultProps={prefixCls:mge.PREFIX};const nb={PREFIX:`${$i}-list`},T9={SIZE:["large","small","default"],LAYOUT:["vertical","horizontal"],ALIGN:["flex-start","flex-end","center","baseline","stretch"]},vge=re.createContext(null);var Qee=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const W1=nb.PREFIX;class H3 extends G.PureComponent{wrapWithGrid(e){const{grid:t}=this.context,n=Qee(t,["gutter","justify","type","align"]);return re.createElement(W3,Object.assign({},n),e)}render(){const e=this.props,{header:t,main:n,className:s,style:r,extra:o,children:a,align:l,onClick:c,onRightClick:u,onMouseEnter:h,onMouseLeave:d}=e,f=Qee(e,["header","main","className","style","extra","children","align","onClick","onRightClick","onMouseEnter","onMouseLeave"]),{onRightClick:g,onClick:p,grid:_}=this.context,m=u||g,v=c||p,y=It(`${W1}-item`,s),C=It(`${W1}-item-body`,{[`${W1}-item-body-${l}`]:l});let S;(t||n)&&(S=re.createElement("div",{className:C},t?re.createElement("div",{className:`${W1}-item-body-header`},t):null,n?re.createElement("div",{className:`${W1}-item-body-main`},n):null));let x=re.createElement("li",Object.assign({className:y,style:r,onClick:v,onContextMenu:m,onMouseEnter:h,onMouseLeave:d},WG(f)),S||null,a,o?re.createElement("div",{className:`${W1}-item-extra`},o):null);return this.context&&_&&(x=this.wrapWithGrid(x)),x}}H3.contextType=vge;H3.propTypes={extra:B.node,header:B.node,main:B.node,align:B.oneOf(T9.ALIGN),className:B.string,children:B.node,style:B.object,onClick:B.func,onRightClick:B.func,onMouseEnter:B.func,onMouseLeave:B.func};H3.defaultProps={align:"flex-start",onMouseEnter:li,onMouseLeave:li};var g6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const g_=nb.PREFIX;let c2=class extends Aa{constructor(){super(...arguments),this.renderEmpty=()=>{const{emptyContent:e}=this.props;return e?re.createElement("div",{className:`${nb.PREFIX}-empty`,"x-semi-prop":"emptyContent"},e):re.createElement(gv,{componentName:"List"},t=>re.createElement("div",{className:`${nb.PREFIX}-empty`},t.emptyText))}}wrapChildren(e,t){const{grid:n}=this.props;if(n){const s={};return["align","gutter","justify","type"].forEach(r=>{r in n&&(s[r]=n[r])}),re.createElement(V3,Object.assign({type:"flex"},s),e||null,t)}return re.createElement("ul",{className:`${g_}-items`},e||null,t)}render(){const e=this.props,{style:t,className:n,header:s,loading:r,onRightClick:o,onClick:a,footer:l,layout:c,grid:u,size:h,split:d,loadMore:f,bordered:g,dataSource:p,renderItem:_,children:m}=e,v=g6e(e,["style","className","header","loading","onRightClick","onClick","footer","layout","grid","size","split","loadMore","bordered","dataSource","renderItem","children"]),y=It(g_,n,{[`${g_}-flex`]:c==="horizontal",[`${g_}-${h}`]:h,[`${g_}-grid`]:u,[`${g_}-split`]:d,[`${g_}-bordered`]:g});let C;if(p&&p.length){C=[];const S=_?p.map((x,E)=>_(x,E)):[];re.Children.forEach(S,(x,E)=>{const L=x.key||`list-item-${E}`;C.push(re.cloneElement(x,{key:L}))})}else!m&&!r&&(C=this.renderEmpty());return re.createElement("div",Object.assign({className:y,style:t},this.getDataAttr(v)),s?re.createElement("div",{className:`${nb.PREFIX}-header`,"x-semi-prop":"header"},s):null,re.createElement(vge.Provider,{value:{grid:u,onRightClick:o,onClick:a}},re.createElement(uj,{spinning:r,size:"large"},this.wrapChildren(C,m))),l?re.createElement("div",{className:`${nb.PREFIX}-footer`,"x-semi-prop":"footer"},l):null,f||null)}};c2.Item=H3;c2.propTypes={style:B.object,className:B.string,bordered:B.bool,footer:B.node,header:B.node,layout:B.oneOf(T9.LAYOUT),size:B.oneOf(T9.SIZE),split:B.bool,emptyContent:B.node,dataSource:B.array,renderItem:B.func,grid:B.object,loading:B.bool,loadMore:B.node,onRightClick:B.func,onClick:B.func};c2.defaultProps={bordered:!1,split:!0,loading:!1,layout:"vertical",size:"default",onRightClick:li,onClick:li};const yge={PREFIX:`${$i}-radio`,INNER:`${$i}-radio-inner`,TEXT:`${$i}-radio-text`,INPUT:`${$i}-radio-input`,CHECKED:`${$i}-radio-checked`,DISABLED:`${$i}-radio-disabled`,BUTTON:`${$i}-radio-button`},p6e={PREFIX:`${$i}-radioGroup`,INNER:`${$i}-radioGroup-inner`,TEXT:`${$i}-radioGroup-text`,INPUT:`${$i}-radioGroup-input`,CHECKED:`${$i}-radioGroup-checked`,DISABLED:`${$i}-radioGroup-disabled`},Lr={DIRECTION_SET:["horizontal","vertical"],DEFAULT_DIRECTION:"horizontal",MODE:["advanced",""],TYPE_DEFAULT:"default",TYPE_BUTTON:"button",TYPE_CARD:"card",TYPE_PURECARD:"pureCard",BUTTON_SIZE:["middle","small","large"]};class m6e extends Dc{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let n;return"value"in this.getProps()?n=e:"defaultValue"in this.getProps()&&(n=t),n}handleChange(e){const t=this.getProp("mode"),n=this.getState("value"),{checked:s,value:r}=e.target,o=this._adapter.isInProps("value"),a=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:r})});t==="advanced"&&!s&&(a.target.value=void 0),o||(t==="advanced"&&!s?this._setValue(void 0):this._setValue(r)),(t==="advanced"||n!==r)&&this._adapter.notifyChange(a)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}class _6e extends Dc{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch{a2(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:n,addonId:s}=this._adapter.getProps();e&&!s&&this._adapter.setAddonId(),t&&!n&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}class v6e extends Dc{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:n}=e.target,s=()=>{e.stopPropagation()},r=()=>{e.preventDefault()},o={target:Object.assign(Object.assign({},this.getProps()),{checked:n}),stopPropagation:s,preventDefault:r};t?this._adapter.notifyChange(o):(this.setChecked(n),this._adapter.notifyChange(o))}destroy(){}}const vj=re.createContext(null);class $3 extends Aa{constructor(e){super(e),this.state={checked:!1},this.foundation=new v6e(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:n,name:s,isButtonRadio:r,isPureCardRadioGroup:o,addonId:a,extraId:l,"aria-label":c,focusInner:u,onInputFocus:h,onInputBlur:d}=this.props,{checked:f}=this.state,g=this.props.prefixCls||yge.PREFIX,p=It({[`${g}-inner`]:!0,[`${g}-inner-checked`]:!!f,[`${g}-inner-buttonRadio`]:r,[`${g}-inner-pureCardRadio`]:o}),_=It({[`${g}-focus`]:u,[`${g}-focus-border`]:u&&!f,[`${g}-inner-display`]:!r});return re.createElement("span",{className:p},re.createElement("input",{ref:m=>{this.inputEntity=m},autoFocus:n,type:t==="advanced"?"checkbox":"radio",checked:!!f,disabled:e,onChange:this.onChange,name:s,"aria-label":c,"aria-labelledby":a,"aria-describedby":l,onFocus:h,onBlur:d}),re.createElement("span",{className:_},f?re.createElement(cBe,null):null))}}$3.contextType=vj;$3.propTypes={checked:B.bool,disabled:B.bool,isButtonRadio:B.bool,onChange:B.func,mode:B.oneOf(["advanced",""]),"aria-label":B.string,focusInner:B.bool,onInputFocus:B.func,onInputBlur:B.func,preventScroll:B.bool};$3.defaultProps={onChange:li,isButtonRadio:!1};var y6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class _v extends Aa{constructor(e){super(e),this.onChange=t=>{const{onChange:n}=this.props;if(this.isInGroup()){const{radioGroup:s}=this.context;s.onChange&&s.onChange(t)}!("checked"in this.props)&&this.foundation.setChecked(t.target.checked),n&&n(t)},this.handleMouseEnter=t=>{this.props.onMouseEnter(t),this.foundation.setHover(!0)},this.handleMouseLeave=t=>{this.props.onMouseLeave(t),this.foundation.setHover(!1)},this.handleFocusVisible=t=>{this.foundation.handleFocusVisible(t)},this.handleBlur=t=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new _6e(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(aE(this.props.checked)?this.foundation.setChecked(!1):j8e(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:WN({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:WN({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:n,disabled:s,style:r,className:o,prefixCls:a,displayMode:l,children:c,extra:u,mode:h,type:d,value:f,name:g}=e,p=y6e(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let _,m,v,y,C,S,x,E,L;const{hover:T,addonId:D,extraId:I,focusVisible:N,checked:P}=this.state,O={checked:P,disabled:s};this.isInGroup()?(_=this.context.radioGroup.value===f,m=s||this.context.radioGroup.disabled,v=this.context.mode,y=this.context.radioGroup.isButtonRadio,C=this.context.radioGroup.isCardRadio,S=this.context.radioGroup.isPureCardRadio,E=this.context.radioGroup.buttonSize,L=a||this.context.radioGroup.prefixCls,O.checked=_,O.disabled=m):(_=P,m=s,v=h,x=d==="button",L=a,y=d===Lr.TYPE_BUTTON,S=d===Lr.TYPE_PURECARD,C=d===Lr.TYPE_CARD||S);const V=typeof y>"u"?x:y,z=L||yge.PREFIX,K=C||S||V,H=It(z,{[`${z}-disabled`]:m,[`${z}-checked`]:_,[`${z}-${l}`]:!!l,[`${z}-buttonRadioComponent`]:x,[`${z}-buttonRadioGroup`]:y,[`${z}-buttonRadioGroup-${E}`]:y&&E,[`${z}-cardRadioGroup`]:C,[`${z}-cardRadioGroup_disabled`]:m&&C,[`${z}-cardRadioGroup_checked`]:C&&_&&!m,[`${z}-cardRadioGroup_checked_disabled`]:C&&_&&m,[`${z}-cardRadioGroup_hover`]:C&&!_&&T&&!m,[o]:!!o,[`${z}-focus`]:N&&(C||S)}),U=this.isInGroup()&&this.context.radioGroup.name,j=It({[`${z}-addon`]:!V,[`${z}-addon-buttonRadio`]:V,[`${z}-addon-buttonRadio-checked`]:V&&_,[`${z}-addon-buttonRadio-disabled`]:V&&m,[`${z}-addon-buttonRadio-hover`]:V&&!_&&!m&&T,[`${z}-addon-buttonRadio-${E}`]:V&&E,[`${z}-focus`]:N&&V},t),W=()=>!c&&!u?null:re.createElement("div",{className:It([`${z}-content`,{[`${z}-isCardRadioGroup_content`]:C}])},c?re.createElement("span",{className:j,style:n,id:D,"x-semi-prop":"children"},c):null,u&&!V?re.createElement("div",{className:`${z}-extra`,id:I,"x-semi-prop":"extra"},u):null);return re.createElement("label",Object.assign({style:r,className:H,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(p)),re.createElement($3,Object.assign({},this.props,O,{mode:v,name:g??U,isButtonRadio:V,isPureCardRadioGroup:S,onChange:this.onChange,ref:X=>{this.radioEntity=X},addonId:c&&D,extraId:u&&I,focusInner:N&&!K,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),W())}}_v.contextType=vj;_v.propTypes={autoFocus:B.bool,checked:B.bool,defaultChecked:B.bool,value:B.any,style:B.object,className:B.string,disabled:B.bool,prefixCls:B.string,displayMode:B.oneOf(["vertical",""]),onChange:B.func,onMouseEnter:B.func,onMouseLeave:B.func,mode:B.oneOf(Lr.MODE),extra:B.node,addonStyle:B.object,addonClassName:B.string,type:B.oneOf([Lr.TYPE_DEFAULT,Lr.TYPE_BUTTON,Lr.TYPE_CARD,Lr.TYPE_PURECARD]),"aria-label":B.string,preventScroll:B.bool};_v.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:li,onMouseLeave:li,mode:"",type:"default"};_v.elementType="Radio";var b6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};class yj extends Aa{constructor(e){super(e),this.onChange=t=>{this.foundation.handleChange(t)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new m6e(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){typeof e.value=="number"&&isNaN(e.value)&&typeof this.props.value=="number"&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>e in this.props,notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:n,mode:s,prefixCls:r,className:o,style:a,direction:l,type:c,buttonSize:u,id:h}=e,d=b6e(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),f=c===Lr.TYPE_BUTTON,g=c===Lr.TYPE_PURECARD,p=c===Lr.TYPE_CARD||g,_=c===Lr.TYPE_DEFAULT,m=r||p6e.PREFIX,v=It(o,{[m]:!0,[`${m}-wrapper`]:!0,[`${m}-${l}`]:l&&!f,[`${m}-${l}-default`]:l&&_,[`${m}-${l}-card`]:l&&p,[`${m}-buttonRadio`]:f}),y=this.state.value;let C;return n?C=(n||[]).map((S,x)=>typeof S=="string"?re.createElement(_v,{key:x,disabled:this.props.disabled,value:S},S):re.createElement(_v,{key:x,disabled:S.disabled||this.props.disabled,value:S.value,extra:S.extra,className:S.className,style:S.style},S.label)):t&&(C=re.Children.map(t,(S,x)=>re.isValidElement(S)?re.cloneElement(S,{key:x}):null)),re.createElement("div",Object.assign({className:v,style:a,id:h,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(d)),re.createElement(vj.Provider,{value:{radioGroup:{onChange:this.onChange,value:y,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:f,isCardRadio:p,isPureCardRadio:g,buttonSize:u,prefixCls:r},mode:s}},C))}}yj.propTypes={defaultValue:B.any,disabled:B.bool,name:B.string,options:B.array,buttonSize:B.oneOf(Lr.BUTTON_SIZE),type:B.oneOf([Lr.TYPE_DEFAULT,Lr.TYPE_BUTTON,Lr.TYPE_CARD,Lr.TYPE_PURECARD]),value:B.any,onChange:B.func,children:B.node,prefixCls:B.string,className:B.string,style:B.object,direction:B.oneOf(Lr.DIRECTION_SET),mode:B.oneOf(Lr.MODE),"aria-label":B.string,"aria-describedby":B.string,"aria-errormessage":B.string,"aria-invalid":B.bool,"aria-labelledby":B.string,"aria-required":B.bool,id:B.string};yj.defaultProps={disabled:!1,onChange:li,direction:Lr.DEFAULT_DIRECTION,mode:"",type:Lr.TYPE_DEFAULT,buttonSize:"middle"};class bge extends _v{}bge.Group=yj;class bj extends Dc{constructor(e){super(Object.assign(Object.assign({},bj.defaultAdapter),e)),this.handleMouseInSideChange=t=>{this._adapter.handleMouseInSideChange(t)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map(n=>{let{id:s}=n;return s}).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let n=this._adapter.getState("list");n=n.map(r=>r.id===e?Object.assign(Object.assign({},r),t):r);const s=n.filter(r=>r.id===e);this._adapter.updateToast(n,[],s)}removeToast(e){let t=this._adapter.getState("list");const n=[];t=t.filter(s=>s.id===e?(n.push(s),!1):!0),this._adapter.updateToast(t,n,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const IB=`${$i}-toast`,Fy={PREFIX:IB,WRAPPER:`${IB}-wrapper`,LIST:`${IB}-list`},FE={types:["warning","success","info","error","default"],themes:["normal","light"],directions:["ltr","rtl"]},w6e={duration:3};class wj extends Dc{constructor(e){super(Object.assign(Object.assign({},wj.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&bI(e)&&(this._timer=setTimeout(()=>{this.close()},e*1e3))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const Fu=Fy.PREFIX;let vv=class extends Aa{constructor(e){super(e),this.toastEle=re.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new wj(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,s={warning:re.createElement(Zfe,null),success:re.createElement(Jfe,null),info:re.createElement(Qfe,null),error:re.createElement(Yfe,null)}[e],r="large",o=It(`${Fu}-icon`,`${Fu}-icon-${e}`);return t?QG(t)?re.cloneElement(t,{size:r,className:`${Fu}-icon`}):t:e&&s?re.cloneElement(s,{size:r,className:o}):null}render(){const{content:e,type:t,theme:n,showClose:s,textMaxWidth:r,className:o,style:a}=this.props,l=this.props.direction||this.context.direction,c=It(Fu,o,{[`${Fu}-${t}`]:!0,[`${Fu}-${n}`]:n==="light",[`${Fu}-rtl`]:l==="rtl"}),u={};u.maxWidth=r;const h="borderless",d="small",f=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,g=re.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${t||"default"} type`,className:c,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${f*-10}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},re.createElement("div",{className:`${Fu}-content`},this.renderIcon(),re.createElement("span",{className:`${Fu}-content-text`,style:u,"x-semi-prop":"content"},e),s&&re.createElement("div",{className:`${Fu}-close-button`},re.createElement(Qv,{onClick:p=>this.close(p),type:"tertiary",icon:re.createElement(nj,{"x-semi-prop":"icon"}),theme:h,size:d}))));if(this.props.stack){const p=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return re.createElement("div",{className:`${Fu}-zero-height-wrapper`,style:{height:p}},g)}else return g}};vv.contextType=FC;vv.propTypes={onClose:B.func,content:B.node,close:B.func,duration:B.number,theme:B.oneOf(FE.themes),type:B.oneOf(FE.types),textMaxWidth:B.oneOfType([B.string,B.number]),style:B.object,className:B.string,showClose:B.bool,stack:B.bool,stackExpanded:B.bool,icon:B.node,direction:B.oneOf(FE.directions)};vv.__SemiComponentName__="Toast";vv.defaultProps=OC(vv.__SemiComponentName__,{onClose:li,content:"",close:li,duration:w6e.duration,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"});var C6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const S6e=(i,e)=>{var{afterClose:t}=i,n=C6e(i,["afterClose"]);const[s,r]=G.useState(!0),o=()=>{r(!1)};return re.useImperativeHandle(e,()=>({close:()=>{r(!1)}})),G.useEffect(()=>{s||t(n.id)},[s]),s?re.createElement(vv,Object.assign({},n,{close:o})):null},x6e=re.forwardRef(S6e),KS={motion:!0,zIndex:1010,duration:3};function E6e(){const[i,e]=re.useState([]);function t(n,s){return e(r=>[{element:n,config:s},...r]),r=>{e(o=>o.filter(a=>{let{config:l}=a;return l.id!==r}))}}return[i,t]}function L6e(){const[i,e]=E6e(),t=G.useRef(new Map),n=r=>{const o=x9("semi_toast_"),a=Object.assign(Object.assign({},r),{id:o});let l;const c=re.createElement(x6e,Object.assign({},a,{key:o,afterClose:u=>l(u),ref:u=>{var h;t.current.set(o,{close:(h=u==null?void 0:u.close)!==null&&h!==void 0?h:li})}}));return l=e(c,Object.assign({},a)),o},s=r=>{var o;const{close:a}=(o=t.current.get(r))!==null&&o!==void 0?o:{};a==null||a()};return[{success:r=>n(Object.assign(Object.assign(Object.assign({},KS),r),{type:"success"})),info:r=>n(Object.assign(Object.assign(Object.assign({},KS),r),{type:"info"})),error:r=>n(Object.assign(Object.assign(Object.assign({},KS),r),{type:"error"})),warning:r=>n(Object.assign(Object.assign(Object.assign({},KS),r),{type:"warning"})),open:r=>n(Object.assign(Object.assign(Object.assign({},KS),r),{type:"default"})),close:r=>s(r)},re.createElement(re.Fragment,null,Array.isArray(i)&&i.length?re.createElement(re.Fragment,null,i.map(r=>r.element)):null)]}const T6e=()=>{var i;return i=class qi extends Aa{constructor(t){super(t),this.stack=!1,this.innerWrapperRef=re.createRef(),this.handleMouseEnter=n=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=n=>{var s;this.stack&&(!((s=this.foundation.getInputWrapperRect())===null||s===void 0)&&s.height)&&this.foundation.handleMouseInSideChange(!1)},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new bj(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(t,n,s)=>{this.setState({list:t,removedItems:n,updatedItems:s})},handleMouseInSideChange:t=>{this.setState({mouseInSide:t})},getInputWrapperRect:()=>{var t;return(t=this.innerWrapperRef.current)===null||t===void 0?void 0:t.getBoundingClientRect()}})}static create(t){var n;const s=(n=t.id)!==null&&n!==void 0?n:x9("toast");if(qi.ref){const r=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map(o=>{o in t&&(r.style[o]=typeof t[o]=="number"?`${t[o]}px`:t[o])}),!!t.stack!==qi.ref.stack&&(qi.ref.stack=!!t.stack),qi.ref.has(s)?qi.ref.update(s,Object.assign(Object.assign({},t),{id:s})):qi.ref.add(Object.assign(Object.assign({},t),{id:s}))}else{const r=document.createElement("div");this.wrapperId||(this.wrapperId=x9("toast-wrapper").slice(0,26)),r.className=Fy.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String(typeof t.zIndex=="number"?t.zIndex:qi.defaultOpts.zIndex),["top","left","bottom","right"].map(o=>{if(o in qi.defaultOpts||o in t){const a=t[o]?t[o]:qi.defaultOpts[o];r.style[o]=typeof a=="number"?`${a}px`:a}}),qi.defaultOpts.getPopupContainer?qi.defaultOpts.getPopupContainer().appendChild(r):document.body.appendChild(r),sg.render(re.createElement(qi,{ref:o=>qi.ref=o}),r,()=>{qi.ref.add(Object.assign(Object.assign({},t),{id:s})),qi.ref.stack=!!t.stack})}return s}static close(t){qi.ref&&qi.ref.remove(t)}static destroyAll(){if(qi.ref){qi.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);sg.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),qi.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},qi.defaultOpts),t),{type:"info"}))}static warning(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},qi.defaultOpts),t),{type:"warning"}))}static error(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},qi.defaultOpts),t),{type:"error"}))}static success(t){return typeof t=="string"&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},qi.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach(n=>{n in t&&(qi.defaultOpts[n]=t[n])}),typeof t.theme=="string"&&FE.themes.includes(t.theme)&&(qi.defaultOpts.theme=t.theme),typeof t.zIndex=="number"&&(qi.defaultOpts.zIndex=t.zIndex),typeof t.duration=="number"&&(qi.defaultOpts.duration=t.duration),typeof t.getPopupContainer=="function"&&(qi.defaultOpts.getPopupContainer=t.getPopupContainer)}has(t){return this.foundation.hasToast(t)}add(t){return this.foundation.addToast(t)}update(t,n){return this.foundation.updateToast(t,n)}remove(t){return this.foundation.removeToast(t)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:t}=this.state;const{removedItems:n,updatedItems:s}=this.state;t=Array.from(new Set([...t,...n]));const r=s.map(a=>{let{id:l}=a;return l}),o=a=>{var l;!((l=a==null?void 0:a.foundation)===null||l===void 0)&&l._id&&r.includes(a.foundation._id)&&a.foundation.restartCloseTimer()};return re.createElement(re.Fragment,null,re.createElement("div",{className:It({[`${Fy.PREFIX}-innerWrapper`]:!0,[`${Fy.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},t.map((a,l)=>{const c=n.find(u=>u.id===a.id)!==void 0;return re.createElement(l2,{key:a.id,motion:a.motion,animationState:c?"leave":"enter",startClassName:c?`${Fy.PREFIX}-animation-hide`:`${Fy.PREFIX}-animation-show`},u=>{let{animationClassName:h,animationEventsNeedBind:d,isAnimating:f}=u;return c&&!f?null:re.createElement(vv,Object.assign({},a,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:t.length,index:l},className:It({[a.className]:!!a.className,[h]:!0})},d,{style:Object.assign({},a.style),close:g=>this.remove(g),ref:o}))})})))}},i.defaultOpts={motion:!0,zIndex:1010,content:""},i.propTypes={content:B.node,duration:B.number,onClose:B.func,icon:B.node,direction:B.oneOf(FE.directions),stack:B.bool},i.defaultProps={},i};class k6e{static create(e){const t=T6e();return t.useToast=L6e,e&&t.config(e),t}}const wge=k6e.create(),M6e={PREFIX:`${$i}-hotKeys`},D6e={a:"KeyA",b:"KeyB",c:"KeyC",d:"KeyD",e:"KeyE",f:"KeyF",g:"KeyG",h:"KeyH",i:"KeyI",j:"KeyJ",k:"KeyK",l:"KeyL",m:"KeyM",n:"KeyN",o:"KeyO",p:"KeyP",q:"KeyQ",r:"KeyR",s:"KeyS",t:"KeyT",u:"KeyU",v:"KeyV",w:"KeyW",x:"KeyX",y:"KeyY",z:"KeyZ",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9"," ":"Space",enter:"Enter",escape:"Escape",backspace:"Backspace",tab:"Tab","-":"Minus","=":"Equal","[":"BracketLeft","]":"BracketRight","\\":"Backslash",";":"Semicolon","'":"Quote","`":"Backquote",",":"Comma",".":"Period","/":"Slash","?":"Slash","!":"Digit1","@":"Digit2","#":"Digit3",$:"Digit4","%":"Digit5","^":"Digit6","&":"Digit7","*":"Digit8","(":"Digit9",")":"Digit0",arrowup:"ArrowUp",arrowdown:"ArrowDown",arrowleft:"ArrowLeft",arrowright:"ArrowRight",shift:"ShiftLeft",control:"ControlLeft",alt:"AltLeft",meta:"MetaLeft",capslock:"CapsLock",f1:"F1",f2:"F2",f3:"F3",f4:"F4",f5:"F5",f6:"F6",f7:"F7",f8:"F8",f9:"F9",f10:"F10",f11:"F11",f12:"F12",insert:"Insert",delete:"Delete",home:"Home",end:"End",pageup:"PageUp",pagedown:"PageDown",numlock:"NumLock",scrolllock:"ScrollLock",pause:"Pause",numpad0:"Numpad0",numpad1:"Numpad1",numpad2:"Numpad2",numpad3:"Numpad3",numpad4:"Numpad4",numpad5:"Numpad5",numpad6:"Numpad6",numpad7:"Numpad7",numpad8:"Numpad8",numpad9:"Numpad9",numpaddecimal:"NumpadDecimal",numpaddivide:"NumpadDivide",numpadmultiply:"NumpadMultiply",numpadsubtract:"NumpadSubtract",numpadadd:"NumpadAdd",numpadenter:"NumpadEnter"};function A6e(i){return D6e[i.toLowerCase()]||void 0}var Zc;(function(i){i.A="a",i.B="b",i.C="c",i.D="d",i.E="e",i.F="f",i.G="g",i.H="h",i.I="i",i.J="j",i.K="k",i.L="l",i.M="m",i.N="n",i.O="o",i.P="p",i.Q="q",i.R="r",i.S="s",i.T="t",i.U="u",i.V="v",i.W="w",i.X="x",i.Y="y",i.Z="z",i.Digit0="0",i.Digit1="1",i.Digit2="2",i.Digit3="3",i.Digit4="4",i.Digit5="5",i.Digit6="6",i.Digit7="7",i.Digit8="8",i.Digit9="9",i.Space=" ",i.Enter="enter",i.Escape="escape",i.Backspace="backspace",i.Tab="tab",i.Minus="-",i.Equal="=",i.BracketLeft="[",i.BracketRight="]",i.Backslash="\\",i.Semicolon=";",i.Quote="'",i.Backquote="`",i.Comma=",",i.Period=".",i.Slash="/",i.Exclamation="!",i.At="@",i.Hash="#",i.Dollar="$",i.Percent="%",i.Caret="^",i.Ampersand="&",i.Asterisk="*",i.LeftParenthesis="(",i.RightParenthesis=")",i.ArrowUp="arrowup",i.ArrowDown="arrowdown",i.ArrowLeft="arrowleft",i.ArrowRight="arrowright",i.Shift="shift",i.Control="control",i.Alt="alt",i.Meta="meta",i.CapsLock="capslock",i.F1="f1",i.F2="f2",i.F3="f3",i.F4="f4",i.F5="f5",i.F6="f6",i.F7="f7",i.F8="f8",i.F9="f9",i.F10="f10",i.F11="f11",i.F12="f12",i.Insert="insert",i.Delete="delete",i.Home="home",i.End="end",i.PageUp="pageup",i.PageDown="pagedown",i.NumLock="numlock",i.ScrollLock="scrolllock",i.Pause="pause",i.Numpad0="numpad0",i.Numpad1="numpad1",i.Numpad2="numpad2",i.Numpad3="numpad3",i.Numpad4="numpad4",i.Numpad5="numpad5",i.Numpad6="numpad6",i.Numpad7="numpad7",i.Numpad8="numpad8",i.Numpad9="numpad9",i.NumpadDecimal="numpaddecimal",i.NumpadDivide="numpaddivide",i.NumpadMultiply="numpadmultiply",i.NumpadSubtract="numpadsubtract",i.NumpadAdd="numpadadd",i.NumpadEnter="numpadenter"})(Zc||(Zc={}));class I6e extends Dc{constructor(e){super(Object.assign({},e)),this.isValidHotKeys=t=>{let n=0;const s=[Zc.Meta,Zc.Alt,Zc.Shift,Zc.Control];return t.forEach(r=>{if(r=r.toLowerCase(),!Object.values(Zc).some(o=>o===r))throw new Error(`${r} is not a valid key`);s.includes(r)||(n+=1)}),n===1},this.handleKeyDown=t=>{const{mergeMetaCtrl:n,hotKeys:s,preventDefault:r}=this.getProps();let o=new Array(4).fill(!1),a=[t.metaKey,t.shiftKey,t.altKey,t.ctrlKey];const l=s==null?void 0:s.map(c=>(c=c.toLowerCase(),c===Zc.Meta?(o[0]=!0,t.metaKey):c===Zc.Shift?(o[1]=!0,t.shiftKey):c===Zc.Alt?(o[2]=!0,t.altKey):c===Zc.Control?(o[3]=!0,t.ctrlKey):t.code===A6e(c)));if(o.every((c,u)=>c===a[u])&&l.every(Boolean)){r&&t.preventDefault(),this._adapter.notifyHotKey(t);return}}}init(){const e=this._adapter.getListenerTarget();e==null||e.addEventListener("keydown",this.handleKeyDown);const t=this.getProps().hotKeys;if(!this.isValidHotKeys(t))throw new Error("HotKeys must have one common key and 0/some modifier key")}destroy(){const e=this._adapter.getListenerTarget();e==null||e.removeEventListener("keydown",this.handleKeyDown)}}var N6e=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const qS=M6e.PREFIX;class u2 extends Aa{constructor(e){super(e),this.state={},this.foundation=new I6e(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyHotKey:e=>{var t,n;(n=(t=this.props).onHotKey)===null||n===void 0||n.call(t,e)},getListenerTarget:()=>{var e,t,n;return(n=(t=(e=this.props).getListenerTarget)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:document.body}})}render(){const e=this.props,{hotKeys:t,content:n,onClick:s,render:r,getListenerTarget:o,className:a,style:l}=e,c=N6e(e,["hotKeys","content","onClick","render","getListenerTarget","className","style"]);if(typeof r<"u")return r===null||typeof r=="function"&&r()===null?null:re.createElement("div",Object.assign({onClick:s,className:It(qS,a),style:l},this.getDataAttr(c)),typeof r=="function"?r():r);const u=n??t;return re.createElement("div",Object.assign({onClick:s,className:It(qS,a),style:l},this.getDataAttr(c)),u.map((h,d)=>d===0?re.createElement("span",{key:d},re.createElement("span",{className:qS+"-content"},h)):re.createElement("span",{key:d},re.createElement("span",{className:qS+"-split"},"+"),re.createElement("span",{className:qS+"-content"},h))))}}u2.propTypes={preventDefault:B.bool,hotKeys:B.arrayOf(B.string),content:B.arrayOf(B.string),onClick:B.func,onHotKey:B.func,mergeMetaCtrl:B.bool,render:B.oneOfType([B.func,B.node]),getListenerTarget:B.func,className:B.string,style:B.object};u2.defaultProps={preventDefault:!1,hotKeys:null,content:null,onClick:li,onHotKey:li,mergeMetaCtrl:!1,render:void 0,getListenerTarget:()=>document.body,className:"",style:null};u2.Keys=Zc;var Jee=function(){},R6e=typeof window<"u",P6e=function(i,e,t){if(!R6e)return[e,Jee,Jee];var n=JSON.parse,s=G.useRef(function(u){try{var h=t?t.raw?String:t.serializer:JSON.stringify,d=localStorage.getItem(u);return d!==null?n(d):(e&&localStorage.setItem(u,h(e)),e)}catch{return e}}),r=G.useState(function(){return s.current(i)}),o=r[0],a=r[1];G.useLayoutEffect(function(){return a(s.current(i))},[i]);var l=G.useCallback(function(u){try{var h=typeof u=="function"?u(o):u;if(typeof h>"u")return;var d=void 0;t||(d=JSON.stringify(h)),localStorage.setItem(i,d),a(n(d))}catch{}},[i,a]),c=G.useCallback(function(){try{localStorage.removeItem(i),a(void 0)}catch{}},[i,a]);return[o,l,c]};const ete=Symbol("EMPTY");function Cge(i){const e=G.createContext(ete);return{Provider:s=>{const r=i(s.argument);return ge.jsx(e.Provider,{value:r,children:s.children})},useStore:()=>{const s=G.useContext(e);if(s===ete)throw new Error("Component must be wrapped with <Container.Provider>");return s}}}const KT=Cge(()=>{const[e=!0,t]=P6e("dark-mode");return{isDarkMode:e??!0,setIsDarkMode:t}}),O6e=i=>{const{isDarkMode:e,setIsDarkMode:t}=KT.useStore();return ge.jsx(Za,{type:"tertiary",icon:e?ge.jsx(iBe,{}):ge.jsx(fBe,{}),onClick:()=>{t(!e)},...i})};var Sge={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(typeof window<"u"?window:Wy,function(){if(typeof window>"u")return null;var t=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(u){return t.setTimeout(u,20)},s=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(u){t.clearTimeout(u)};function r(u,h){var d=Object.prototype.toString.call(u),f=d==="[object Array]"||d==="[object NodeList]"||d==="[object HTMLCollection]"||d==="[object Object]"||typeof jQuery<"u"&&u instanceof jQuery||typeof Elements<"u"&&u instanceof Elements,g=0,p=u.length;if(f)for(;g<p;g++)h(u[g]);else h(u)}function o(u){if(!u.getBoundingClientRect)return{width:u.offsetWidth,height:u.offsetHeight};var h=u.getBoundingClientRect();return{width:Math.round(h.width),height:Math.round(h.height)}}function a(u,h){Object.keys(h).forEach(function(d){u.style[d]=h[d]})}var l=function(u,h){var d=0;function f(){var p=[];this.add=function(v){p.push(v)};var _,m;this.call=function(v){for(_=0,m=p.length;_<m;_++)p[_].call(this,v)},this.remove=function(v){var y=[];for(_=0,m=p.length;_<m;_++)p[_]!==v&&y.push(p[_]);p=y},this.length=function(){return p.length}}function g(p,_){if(p){if(p.resizedAttached){p.resizedAttached.add(_);return}p.resizedAttached=new f,p.resizedAttached.add(_),p.resizeSensor=document.createElement("div"),p.resizeSensor.dir="ltr",p.resizeSensor.className="resize-sensor";var m={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},v={position:"absolute",left:"0px",top:"0px",transition:"0s"};a(p.resizeSensor,m);var y=document.createElement("div");y.className="resize-sensor-expand",a(y,m);var C=document.createElement("div");a(C,v),y.appendChild(C);var S=document.createElement("div");S.className="resize-sensor-shrink",a(S,m);var x=document.createElement("div");a(x,v),a(x,{width:"200%",height:"200%"}),S.appendChild(x),p.resizeSensor.appendChild(y),p.resizeSensor.appendChild(S),p.appendChild(p.resizeSensor);var E=window.getComputedStyle(p),L=E?E.getPropertyValue("position"):null;L!=="absolute"&&L!=="relative"&&L!=="fixed"&&L!=="sticky"&&(p.style.position="relative");var T=!1,D=0,I=o(p),N=0,P=0,O=!0;d=0;var V=function(){var j=p.offsetWidth,W=p.offsetHeight;C.style.width=j+10+"px",C.style.height=W+10+"px",y.scrollLeft=j+10,y.scrollTop=W+10,S.scrollLeft=j+10,S.scrollTop=W+10},z=function(){if(O){var j=p.offsetWidth===0&&p.offsetHeight===0;if(j){d||(d=n(function(){d=0,z()}));return}else O=!1}V()};p.resizeSensor.resetSensor=z;var K=function(){D=0,T&&(N=I.width,P=I.height,p.resizedAttached&&p.resizedAttached.call(I))},H=function(){I=o(p),T=I.width!==N||I.height!==P,T&&!D&&(D=n(K)),z()},U=function(j,W,X){j.attachEvent?j.attachEvent("on"+W,X):j.addEventListener(W,X)};U(y,"scroll",H),U(S,"scroll",H),d=n(function(){d=0,z()})}}r(u,function(p){g(p,h)}),this.detach=function(p){d||(s(d),d=0),l.detach(u,p)},this.reset=function(){u.resizeSensor.resetSensor()}};if(l.reset=function(u){r(u,function(h){h.resizeSensor.resetSensor()})},l.detach=function(u,h){r(u,function(d){d&&(d.resizedAttached&&typeof h=="function"&&(d.resizedAttached.remove(h),d.resizedAttached.length())||d.resizeSensor&&(d.contains(d.resizeSensor)&&d.removeChild(d.resizeSensor),delete d.resizeSensor,delete d.resizedAttached))})},typeof MutationObserver<"u"){var c=new MutationObserver(function(u){for(var h in u)if(u.hasOwnProperty(h))for(var d=u[h].addedNodes,f=0;f<d.length;f++)d[f].resizeSensor&&l.reset(d[f])});document.addEventListener("DOMContentLoaded",function(u){c.observe(document.body,{childList:!0,subtree:!0})})}return l})})(Sge);var xge=Sge.exports,Ege={exports:{}};(function(i,e){(function(t,n){i.exports=n(xge)})(typeof window<"u"?window:Wy,function(t){var n=function(){var r,o={},a=[];function l(E){E||(E=document.documentElement);var L=window.getComputedStyle(E,null).fontSize;return parseFloat(L)||16}function c(E){if(!E.getBoundingClientRect)return{width:E.offsetWidth,height:E.offsetHeight};var L=E.getBoundingClientRect();return{width:Math.round(L.width),height:Math.round(L.height)}}function u(E,L){var T=L.split(/\d/),D=T[T.length-1];switch(L=parseFloat(L),D){case"px":return L;case"em":return L*l(E);case"rem":return L*l();case"vw":return L*document.documentElement.clientWidth/100;case"vh":return L*document.documentElement.clientHeight/100;case"vmin":case"vmax":var I=document.documentElement.clientWidth/100,N=document.documentElement.clientHeight/100,P=Math[D==="vmin"?"min":"max"];return L*P(I,N);default:return L}}function h(E,L){this.element=E;var T,D,I,N,P,O,V,z,K=["min-width","min-height","max-width","max-height"];this.call=function(){I=c(this.element),O={};for(T in o[L])o[L].hasOwnProperty(T)&&(D=o[L][T],N=u(this.element,D.value),P=D.property==="width"?I.width:I.height,z=D.mode+"-"+D.property,V="",D.mode==="min"&&P>=N&&(V+=D.value),D.mode==="max"&&P<=N&&(V+=D.value),O[z]||(O[z]=""),V&&(" "+O[z]+" ").indexOf(" "+V+" ")===-1&&(O[z]+=" "+V));for(var H in K)K.hasOwnProperty(H)&&(O[K[H]]?this.element.setAttribute(K[H],O[K[H]].substr(1)):this.element.removeAttribute(K[H]))}}function d(E,L){E.elementQueriesSetupInformation||(E.elementQueriesSetupInformation=new h(E,L)),E.elementQueriesSensor||(E.elementQueriesSensor=new t(E,function(){E.elementQueriesSetupInformation.call()}))}function f(E,L,T,D){if(typeof o[E]>"u"){o[E]=[];var I=a.length;r.innerHTML+=`
`+E+" {animation: 0.1s element-queries;}",r.innerHTML+=`
`+E+" > .resize-sensor {min-width: "+I+"px;}",a.push(E)}o[E].push({mode:L,property:T,value:D})}function g(E){var L;if(document.querySelectorAll&&(L=E?E.querySelectorAll.bind(E):document.querySelectorAll.bind(document)),!L&&typeof $$<"u"&&(L=$$),!L&&typeof jQuery<"u"&&(L=jQuery),!L)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return L}function p(E){var L=g(E);for(var T in o)if(o.hasOwnProperty(T))for(var D=L(T,E),I=0,N=D.length;I<N;I++)d(D[I],T)}function _(E){var L=[],T=[],D=[],I=0,N=-1,P=[];for(var O in E.children)if(E.children.hasOwnProperty(O)&&E.children[O].tagName&&E.children[O].tagName.toLowerCase()==="img"){L.push(E.children[O]);var V=E.children[O].getAttribute("min-width")||E.children[O].getAttribute("data-min-width"),z=E.children[O].getAttribute("data-src")||E.children[O].getAttribute("url");D.push(z);var K={minWidth:V};T.push(K),V?E.children[O].style.display="none":(I=L.length-1,E.children[O].style.display="block")}N=I;function H(){var U=!1,j;for(j in L)L.hasOwnProperty(j)&&T[j].minWidth&&E.offsetWidth>T[j].minWidth&&(U=j);if(U||(U=I),N!==U)if(P[U])L[N].style.display="none",L[U].style.display="block",N=U;else{var W=new Image;W.onload=function(){L[U].src=D[U],L[N].style.display="none",L[U].style.display="block",P[U]=!0,N=U},W.src=D[U]}else L[U].src=D[U]}E.resizeSensorInstance=new t(E,H),H()}function m(){for(var E=g(),L=E("[data-responsive-image],[responsive-image]"),T=0,D=L.length;T<D;T++)_(L[T])}var v=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,y=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function C(E){var L,T,D,I;for(E=E.replace(/'/g,'"');(L=v.exec(E))!==null;)for(T=L[1]+L[3],D=L[2];(I=y.exec(D))!==null;)f(T,I[1],I[2],I[3])}function S(E){var L="";if(E)if(typeof E=="string")E=E.toLowerCase(),(E.indexOf("min-width")!==-1||E.indexOf("max-width")!==-1)&&C(E);else for(var T=0,D=E.length;T<D;T++)E[T].type===1?(L=E[T].selectorText||E[T].cssText,(L.indexOf("min-height")!==-1||L.indexOf("max-height")!==-1||L.indexOf("min-width")!==-1||L.indexOf("max-width")!==-1)&&C(L)):E[T].type===4?S(E[T].cssRules||E[T].rules):E[T].type===3&&E[T].styleSheet.hasOwnProperty("cssRules")&&S(E[T].styleSheet.cssRules)}var x=!1;this.init=function(){var E="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?E="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?E="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(E="oanimationstart"),document.body.addEventListener(E,function(D){var I=D.target,N=I&&window.getComputedStyle(I,null),P=N&&N.getPropertyValue("animation-name"),O=P&&P.indexOf("element-queries")!==-1;if(O){I.elementQueriesSensor=new t(I,function(){I.elementQueriesSetupInformation&&I.elementQueriesSetupInformation.call()});var V=window.getComputedStyle(I.resizeSensor,null),z=V.getPropertyValue("min-width");z=parseInt(z.replace("px","")),d(D.target,a[z])}}),x||(r=document.createElement("style"),r.type="text/css",r.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",r.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(r),x=!0);for(var L=0,T=document.styleSheets.length;L<T;L++)try{document.styleSheets[L].href&&document.styleSheets[L].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[L].href),S(document.styleSheets[L].cssRules||document.styleSheets[L].rules||document.styleSheets[L].cssText)}catch{}m()},this.findElementQueriesElements=function(E){p(E)},this.update=function(){this.init()}};n.update=function(){n.instance.update()},n.detach=function(r){r.elementQueriesSetupInformation?(r.elementQueriesSensor.detach(),delete r.elementQueriesSetupInformation,delete r.elementQueriesSensor):r.resizeSensorInstance&&(r.resizeSensorInstance.detach(),delete r.resizeSensorInstance)},n.init=function(){n.instance||(n.instance=new n),n.instance.init()};var s=function(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",r,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var o=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(r(),clearInterval(o))},10);else window.onload=r};return n.findElementQueriesElements=function(r){n.instance.findElementQueriesElements(r)},n.listen=function(){s(n.init)},n})})(Ege);var F6e=Ege.exports,B6e={ResizeSensor:xge,ElementQueries:F6e};function z6e(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}var U6e='.spaces-centered,.spaces-centered-vertically{position:relative;top:50%;transform:translateY(-50%)}.spaces-centered{text-align:center}.spaces-clearfix:after{content:"";display:table;clear:both}.spaces-resize-handle{position:absolute;z-index:9999;background:transparent}.spaces-resize-handle:before{content:"";position:absolute;left:0;top:0;right:0;bottom:0;z-index:2}.spaces-resize-handle:after{content:"";position:absolute;z-index:1}.spaces-touch-handle{position:absolute;z-index:9998;pointer-events:all;background:transparent}.spaces-resize-handle.resize-left:before{cursor:w-resize}.spaces-resize-handle.resize-top-left:before{cursor:nw-resize}.spaces-resize-handle.resize-right:before{cursor:e-resize}.spaces-resize-handle.resize-top-right:before{cursor:ne-resize}.spaces-resize-handle.resize-top:before{cursor:n-resize}.spaces-resize-handle.resize-bottom:before{cursor:s-resize}.spaces-resize-handle.resize-bottom-left:before{cursor:sw-resize}.spaces-resize-handle.resize-bottom-right:before{cursor:se-resize}.spaces-space{overflow:hidden;touch-action:none;box-sizing:border-box}.spaces-resizing .spaces-space{transition:none!important}.spaces-space .spaces-space-inner{position:absolute;left:0;top:0;right:0;bottom:0;box-sizing:border-box}.spaces-space.scrollable .spaces-space-inner{overflow:auto;touch-action:auto}';z6e(U6e);var k9=function(i,e){return k9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},k9(i,e)};function V6e(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");k9(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ri=function(){return ri=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ri.apply(this,arguments)};function G3(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function iu(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}var Ir;(function(i){i.ViewPort="viewport",i.Fixed="fixed",i.Fill="fill",i.Positioned="positioned",i.Anchored="anchored",i.Custom="custom"})(Ir||(Ir={}));var Yi;(function(i){i.Left="anchor-left",i.Right="anchor-right",i.Top="anchor-top",i.Bottom="anchor-bottom"})(Yi||(Yi={}));var yv;(function(i){i[i.Horizontal=0]="Horizontal",i[i.Vertical=1]="Vertical"})(yv||(yv={}));var Xi;(function(i){i.All="resize-all",i.Left="resize-left",i.Right="resize-right",i.Top="resize-top",i.Bottom="resize-bottom",i.TopLeft="resize-topleft",i.TopRight="resize-topright",i.BottomLeft="resize-bottomleft",i.BottomRight="resize-bottomright"})(Xi||(Xi={}));var Dd;(function(i){i.OverlayInside="overlay-inside",i.Inside="inside",i.OverlayBoundary="overlay-boundary"})(Dd||(Dd={}));var Ad;(function(i){i.None="none",i.Vertical="vertical",i.HorizontalVertical="horizontalVertical"})(Ad||(Ad={}));var ib;(function(i){i.Mouse="mousemove",i.Touch="touchmove"})(ib||(ib={}));var sb;(function(i){i.Mouse="mouseup",i.Touch="touchend"})(sb||(sb={}));var NB=function(i){return i};function W6e(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=Object.create(null);e.forEach(function(r){n[r]=!0});var s=Object.create(null);return Object.keys(i).forEach(function(r){NB(n)[r]||(NB(s)[r]=NB(i)[r])}),s}function H6e(){var i=Math.random()*46656|0,e=Math.random()*46656|0;return("000"+i.toString(36)).slice(-3)+("000"+e.toString(36)).slice(-3)}function RB(i){return typeof i=="string"?i:i+"px"}function an(i,e){if(i.size===0&&i.adjusted.length===0&&i.resized===0)return"0px";var t=[];if(i.size!==void 0&&t.push(RB(i.size)),i.adjusted.forEach(function(n){return t.push(RB(n))}),i.resized!==0&&t.push(RB(i.resized)),t.length!==0)return t.length===1?t[0]:e?t.join(" + "):"calc("+t.join(" + ")+")"}function xl(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return i.find(function(t){return t!=null})}function tD(i,e){if(i.length!==e.length)return!1;for(var t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function $6e(i,e){var t=!1;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];t||(i.apply(void 0,n),t=!0,setTimeout(function(){t=!1},e))}}function G6e(i){var e=[],t={position:i.position,left:an(i.left),top:an(i.top),right:an(i.right),bottom:an(i.bottom),width:an(i.width),height:an(i.height),zIndex:i.zIndex},n=[];t.position&&n.push("position: "+t.position+";"),t.left&&n.push("left: "+t.left+";"),t.top&&n.push("top: "+t.top+";"),t.right&&n.push("right: "+t.right+";"),t.bottom&&n.push("bottom: "+t.bottom+";"),t.width&&n.push("width: "+t.width+";"),t.height&&n.push("height: "+t.height+";"),t.zIndex&&n.push("z-index: "+t.zIndex+";"),i.allowOverflow&&n.push("overflow: visible;"),n.length>0&&e.push("#"+i.id+" { "+n.join(" ")+" }"),i.scrollable&&e.push("#"+i.id+" > .spaces-space-inner { overflow: auto; touch-action: auto; }");var s=0,r=i.handleSize+"px",o="-"+(i.touchHandleSize/2-i.handleSize/2)+"px",a=i.touchHandleSize/2-i.handleSize/2+"px";switch(i.handlePlacement){case Dd.Inside:case Dd.OverlayInside:s=i.handleSize,i.type===Ir.Positioned&&(s=0);break;case Dd.OverlayBoundary:s=i.handleSize/2;break}var l=s+"px",c=function(h,d){var f=[];d.left&&f.push("left: "+d.left),d.top&&f.push("top: "+d.top),d.right&&f.push("right: "+d.right),d.bottom&&f.push("bottom: "+d.bottom),d.width&&f.push("width: "+d.width),d.height&&f.push("height: "+d.height),e.push("#"+i.id+"-"+h+" { "+f.join("; ")+"}")},u=function(){return i.type===Ir.Positioned?i.width.size&&i.height.size:i.orientation==yv.Horizontal?i.width.size:i.height.size};return i.canResizeLeft&&(i.anchor?c("ml",{right:"calc("+an(i.right,!0)+" + "+an(i.width)+" - "+l+")",top:"0",bottom:"0",width:r}):c("ml",{left:"calc("+an(i.left,!0)+" - "+l+")",top:an(i.top),bottom:an(i.bottom),width:r,height:an(i.height)}),c("ml:after",{left:o,right:o,top:o,bottom:o})),i.canResizeTop&&(i.anchor?(c("mt",{left:"0",right:"0",bottom:"calc("+an(i.bottom)+" + "+an(i.height)+" - "+l+")",height:r}),c("mt:after",{top:o,bottom:o,left:o,width:an(i.width),right:o})):(c("mt",{top:"calc("+an(i.top,!0)+" - "+l+")",left:an(i.left),right:an(i.right),width:an(i.width),height:r}),u()?c("mt:after",{top:o,bottom:o,left:o,width:"calc("+an(i.width,!0)+" - "+l+") + "+a,right:o}):c("mt:after",{top:o,bottom:o,left:o,width:an(i.width),right:o}))),i.canResizeRight&&(u()?c("mr",{left:"calc("+an(i.left,!0)+" + "+an(i.width,!0)+" - "+r+" + "+l+")",top:an(i.top),bottom:an(i.bottom),width:r,height:an(i.height)}):c("mr",{right:"calc("+an(i.right,!0)+" - "+l+")",top:an(i.top),bottom:an(i.bottom),width:r,height:an(i.height)}),c("mr:after",{left:o,right:o,top:o,bottom:o})),i.canResizeBottom&&(u()?c("mb",{top:"calc("+an(i.top,!0)+" + "+an(i.height,!0)+" - "+r+" + "+l+")",left:an(i.left),right:an(i.right),width:an(i.width),height:r}):c("mb",{bottom:"calc("+an(i.bottom,!0)+" - "+l+")",left:an(i.left),right:an(i.right),width:an(i.width),height:r}),c("mb:after",{top:o,bottom:o,left:o,right:o})),i.canResizeTopLeft&&(c("mtl",{left:"calc("+an(i.left,!0)+" - "+l+")",top:an(i.top),width:r,height:r}),c("mtl:after",{top:o,bottom:o,left:o,right:o})),i.canResizeTopRight&&(u()?c("mtr",{left:"calc("+an(i.left,!0)+" + "+an(i.width,!0)+" - "+r+" + "+l+")",top:an(i.top),width:r,height:r}):c("mtr",{right:"calc("+an(i.right,!0)+" - "+l+")",top:an(i.top),width:r,height:r}),c("mtr:after",{top:o,bottom:o,left:o,right:o})),i.canResizeBottomLeft&&(u()?c("mbl",{top:"calc("+an(i.top,!0)+" + "+an(i.height,!0)+" - "+r+" + "+l+")",left:an(i.left),width:r,height:r}):c("mbl",{bottom:"calc("+an(i.bottom,!0)+" - "+l+")",left:an(i.left),width:r,height:r}),c("mbl:after",{top:o,bottom:o,left:o,right:o})),i.canResizeBottomRight&&(u()?c("mbr",{left:"calc("+an(i.left,!0)+" + "+an(i.width,!0)+" - "+r+" + "+l+")",top:"calc("+an(i.top,!0)+" + "+an(i.height,!0)+" - "+r+" + "+l+")",width:r,height:r}):c("mbr",{right:"calc("+an(i.right,!0)+" - "+l+")",bottom:"calc("+an(i.bottom,!0)+" - "+l+")",width:r,height:r}),c("mbr:after",{top:o,bottom:o,left:o,right:o})),e.join(" ")}function nD(i){var e=G6e(i);if(K6e())i.ssrStyle=e;else{var t=document.getElementById("style_"+i.id);if(t)t.innerHTML!==e&&(t.innerHTML=e);else{var n=document.createElement("style");n.id="style_"+i.id,n.innerHTML=e,document.head.appendChild(n)}}}function j6e(i){var e=document.getElementById("style_"+i.id);e&&document.head.removeChild(e)}function K6e(){return!(typeof document<"u"&&document)}function lE(i){return i===Xi.Left||i===Xi.Right}function Wc(i,e,t,n,s,r){var o=e===Xi.Right||e===Xi.Bottom?function(f){return-f}:function(f){return f},a=lE(e)?n.width:n.height,l=t.resized,c=a.resized,u=lE(e)?i.width:i.height,h=xl(n.minimumSize,20)-u+0,d=n.maximumSize?n.maximumSize-u+0:void 0;return function(f,g){var p=(lE(e)?s:r)-(lE(e)?f:g),_=o(p);n.type!==Ir.Positioned&&(_=Math.max(o(p),h),_<h&&(_=h),typeof d=="number"&&_>d&&(_=d)),t.size!==void 0?(t.resized=o(-p)+l,a.size&&(a.resized=o(p)+c)):a.resized=_+c}}function q6e(i,e,t,n){var s=e.element.getBoundingClientRect();switch(i){case Xi.Left:return Wc(s,i,e.left,e,t,n);case Xi.Right:return Wc(s,i,e.right,e,t,n);case Xi.Bottom:return Wc(s,i,e.bottom,e,t,n);case Xi.Top:return Wc(s,i,e.top,e,t,n);case Xi.TopLeft:var r=Wc(s,Xi.Top,e.top,e,t,n),o=Wc(s,Xi.Left,e.left,e,t,n);return function(f,g){r(f,g),o(f,g)};case Xi.TopRight:var a=Wc(s,Xi.Top,e.top,e,t,n),l=Wc(s,Xi.Right,e.right,e,t,n);return function(f,g){a(f,g),l(f,g)};case Xi.BottomLeft:var c=Wc(s,Xi.Bottom,e.bottom,e,t,n),u=Wc(s,Xi.Left,e.left,e,t,n);return function(f,g){c(f,g),u(f,g)};case Xi.BottomRight:var h=Wc(s,Xi.Bottom,e.bottom,e,t,n),d=Wc(s,Xi.Right,e.right,e,t,n);return function(f,g){h(f,g),d(f,g)};default:throw"Resize type "+i+" not supported"}}function X6e(i){return{startResize:function(e,t,n,s,r,o,a){if(n.onResizeStart){var l=n.onResizeStart(t);if(typeof l=="boolean"&&!l)return}var c=o(e),u=q6e(t,n,c.x,c.y);n.resizing=!0,n.updateParent();var h=0,d=0,f=!1,g=function(m,v){u(m,v),i.updateStyles(n)},p=function(m){f=!0;var v=o(m);h=v.x,d=v.y,m.preventDefault(),window.requestAnimationFrame(function(){n.resizing&&g(h,d)})},_=function(){n.resizing=!1,f&&g(h,d),window.removeEventListener(r,p),window.removeEventListener(s,_),n.updateParent();var m=a||n.onResizeEnd;if(m){var v=n.element.getBoundingClientRect();m(Math.floor(lE(t)?v.width:v.height),v,t)}};window.addEventListener(r,p),window.addEventListener(s,_)}}}function Y6e(i){function e(t,n,s,r,o){var a=-(n-r),l=-(s-o);t.left.adjusted=[a],t.top.adjusted=[l],t.right.size&&(t.right.adjusted=[-a]),t.bottom.size&&(t.bottom.adjusted=[-l]),i.updateStyles(t)}return{startDrag:function(t,n,s,r,o,a){if(n.element){var l=o(t),c=n.left.adjusted.length===0?0:n.left.adjusted[0],u=n.top.adjusted.length===0?0:n.top.adjusted[0],h=l.x-c,d=l.y-u,f=0,g=0,p=!1,_=function(C,S){return e(n,h,d,C,S)},m=$6e(_,5),v=function(C){p=!0;var S=o(C);f=S.x,g=S.y,C.preventDefault(),m(f,g)},y=function(){var C;if(p&&_(f,g),window.removeEventListener(r,v),window.removeEventListener(s,y),a){var S=n.parentId&&((C=i.getSpace(n.parentId))===null||C===void 0?void 0:C.element.getBoundingClientRect())||{left:0,top:0,right:0,bottom:0,width:0,height:0},x=function(E){var L=E.left,T=E.top,D=E.right,I=E.bottom,N=E.width,P=E.height;return{left:L,top:T,right:D,bottom:I,width:N,height:P}}(n.element.getBoundingClientRect());a(ri(ri({},x),{left:x.left-S.left,top:x.top-S.top}),p)}};window.addEventListener(r,v),window.addEventListener(s,y)}}}}var XS={id:"",zIndex:0,scrollable:!1,resizing:!1,allowOverflow:!1,centerContent:"none",dimension:{left:0,top:0,right:0,bottom:0,width:0,height:0,x:0,y:0,toJSON:function(){return""}},handleSize:5,touchHandleSize:5,handlePlacement:Dd.OverlayInside,adjustLeft:function(){return!1},adjustRight:function(){return!1},adjustTop:function(){return!1},adjustBottom:function(){return!1},adjustEdge:function(){return!1},anchoredChildren:function(){return[]}},Z6e=[Yi.Left,Yi.Top,Yi.Right,Yi.Bottom];function tte(i){return i===Ir.ViewPort?"fixed":i===Ir.Fixed?"relative":"absolute"}function nte(i){return i===Yi.Bottom||i===Yi.Top?yv.Vertical:yv.Horizontal}function Q6e(i){return[{anchor:Yi.Left,update:i.adjustLeft},{anchor:Yi.Top,update:i.adjustTop},{anchor:Yi.Right,update:i.adjustRight},{anchor:Yi.Bottom,update:i.adjustBottom}]}function H1(i){return{size:i,adjusted:[],resized:0}}function J6e(){var i=[],e=function(l){i=l},t=function(l){return n().find(function(c){return c.id===l})},n=function(){return i},s=function(l){for(var c=function(p,_,m){return m.indexOf(p)===_},u=function(p){var _=[];return Z6e.forEach(function(m){var v=p.filter(function(C){return C.anchor!==void 0&&C.anchor===m}),y=v.map(function(C){return C.zIndex}).filter(c);y.forEach(function(C){var S=v.filter(function(T){return T.zIndex===C}),x=S.filter(function(T){return T.order!==void 0}),E=S.filter(function(T){return T.order===void 0}),L=x.length>0?x.map(function(T){return T.order}).reduce(function(T,D){return Math.max(T,D)}):0;_=iu(iu([],_,!0),iu(iu([],x,!0),E.map(function(T,D){return ri(ri({},T),{order:L+D+1})}),!0),!0)})}),iu(iu([],_,!0),p.filter(function(m){return m.anchor===void 0}),!0)},h=u(l.children),d=function(){var p=h[f],_=!1;if(p.type===Ir.Fill)Q6e(p).forEach(function(y){var C=[],S=l.anchoredChildren(h,y.anchor,p.zIndex);S.forEach(function(x){x.orientation===yv.Vertical?(x.height.size&&C.push(x.height.size),x.height.resized&&C.push(x.height.resized)):(x.width.size&&C.push(x.width.size),x.width.resized&&C.push(x.width.resized))}),y.update(C)&&(_=!0)});else if(p.type===Ir.Anchored){var m=[],v=l.anchoredChildren(h,p.anchor,p.zIndex).filter(function(y){return y.id!==p.id&&y.order<=p.order});v.forEach(function(y){y.orientation===yv.Vertical?(y.height.size&&m.push(y.height.size),y.height.resized&&m.push(y.height.resized)):(y.width.size&&m.push(y.width.size),y.width.resized&&m.push(y.width.resized))}),p.adjustEdge(m)&&(_=!0)}_&&nD(p)},f=0,g=h.length;f<g;f++)d()},r={getSpaces:n,getSpace:t,addSpace:function(l){if(n().push(l),l.parentId){var c=t(l.parentId);c&&(c.children.push(l),s(c))}nD(l)},removeSpace:function(l){if(e(n().filter(function(u){return u.id!==l.id})),l.parentId){var c=t(l.parentId);c&&(c.children=c.children.filter(function(u){return u.id!==l.id}),s(c))}j6e(l)},updateStyles:function(l){if(l.parentId){var c=t(l.parentId);c&&s(c)}nD(l)},updateSpace:function(l,c){var u=c.type,h=c.anchor,d=c.order,f=c.zIndex,g=c.scrollable,p=c.position,_=c.centerContent,m=c.minimumSize,v=c.maximumSize,y=c.handleSize,C=c.touchHandleSize,S=c.handlePlacement,x=c.allowOverflow,E=p&&p.leftResizable||!1,L=p&&p.rightResizable||!1,T=p&&p.topResizable||!1,D=p&&p.bottomResizable||!1,I=p&&p.topLeftResizable||!1,N=p&&p.topRightResizable||!1,P=p&&p.bottomLeftResizable||!1,O=p&&p.bottomRightResizable||!1,V=!1;if(l.type!==u&&(l.type=u,l.position=tte(u),V=!0),l.anchor!==h&&(l.anchor=h,l.orientation=nte(h),V=!0,u===Ir.Anchored&&(h===Yi.Left?l.adjustEdge=l.adjustLeft:h===Yi.Top?l.adjustEdge=l.adjustTop:h===Yi.Right?l.adjustEdge=l.adjustRight:h===Yi.Bottom&&(l.adjustEdge=l.adjustBottom))),l.left.size!==(p&&p.left)&&(l.left.size=p&&p.left,l.left.resized=0,l.left.adjusted=[],V=!0),l.right.size!==(p&&p.right)&&(l.right.size=p&&p.right,l.right.resized=0,l.right.adjusted=[],V=!0),l.top.size!==(p&&p.top)&&(l.top.size=p&&p.top,l.top.resized=0,l.top.adjusted=[],V=!0),l.bottom.size!==(p&&p.bottom)&&(l.bottom.size=p&&p.bottom,l.bottom.resized=0,l.bottom.adjusted=[],V=!0),l.width.size!==(p&&p.width)&&(l.width.size=p&&p.width,l.width.resized=0,l.width.adjusted=[],V=!0),l.height.size!==(p&&p.height)&&(l.height.size=p&&p.height,l.height.resized=0,l.height.adjusted=[],V=!0),xl(l.order,0)!==xl(d,0)&&(l.order=xl(d,0),V=!0),xl(l.zIndex,0)!==xl(f,0)&&(l.zIndex=xl(f,0),V=!0),xl(l.scrollable,!1)!==xl(g,!1)&&(l.scrollable=xl(g,!1),V=!0),l.minimumSize!==m&&(l.minimumSize=m,V=!0),l.maximumSize!==v&&(l.maximumSize=v,V=!0),xl(l.centerContent,Ad.None)!==xl(_,Ad.None)&&(l.centerContent=xl(_,Ad.None),V=!0),l.handleSize!==y&&(l.handleSize=y||XS.handleSize,V=!0),l.touchHandleSize!==C&&(l.touchHandleSize=C||XS.touchHandleSize,V=!0),l.handlePlacement!==S&&(l.handlePlacement=S||XS.handlePlacement,V=!0),l.canResizeBottom!==D&&(l.canResizeBottom=D,V=!0),l.canResizeTop!==T&&(l.canResizeTop=T,V=!0),l.canResizeLeft!==E&&(l.canResizeLeft=E,V=!0),l.canResizeRight!==L&&(l.canResizeRight=L,V=!0),l.canResizeTopLeft!==I&&(l.canResizeTopLeft=I,V=!0),l.canResizeTopRight!==N&&(l.canResizeTopRight=N,V=!0),l.canResizeBottomLeft!==P&&(l.canResizeBottomLeft=P,V=!0),l.canResizeBottomRight!==O&&(l.canResizeBottomRight=O,V=!0),l.allowOverflow!==x&&(l.allowOverflow=x||XS.allowOverflow,V=!0),V){if(l.parentId){var z=t(l.parentId);z&&s(z)}nD(l)}},createSpace:function(){return{}},startMouseResize:function(){return null},startTouchResize:function(){return null},startMouseDrag:function(){return null},startTouchDrag:function(){return null}},o=X6e(r),a=Y6e(r);return r.createSpace=function(l,c,u){var h=c.position,d=c.anchor,f=c.type,g=G3(c,["position","anchor","type"]),p=h&&h.rightResizable||!1,_=h&&h.leftResizable||!1,m=h&&h.bottomResizable||!1,v=h&&h.topResizable||!1,y=h&&h.topLeftResizable||!1,C=h&&h.topRightResizable||!1,S=h&&h.bottomLeftResizable||!1,x=h&&h.bottomRightResizable||!1,E=ri(ri(ri({},XS),g),{store:r,update:u,updateParent:function(){if(l){var L=r.getSpace(l);L&&L.update()}},parentId:l,children:[],anchor:d,type:f,orientation:nte(d),position:tte(f),left:H1(h&&h.left),right:H1(h&&h.right),top:H1(h&&h.top),bottom:H1(h&&h.bottom),width:H1(h&&h.width),height:H1(h&&h.height),canResizeLeft:p,canResizeRight:_,canResizeTop:m,canResizeBottom:v,canResizeTopLeft:y,canResizeTopRight:C,canResizeBottomLeft:S,canResizeBottomRight:x});return E.anchoredChildren=function(L,T,D){return L.filter(function(I){return I.type===Ir.Anchored&&I.anchor===T&&I.zIndex===D})},E.adjustLeft=function(L){return tD(E.left.adjusted,L)?!1:(E.left.adjusted=L,!0)},E.adjustRight=function(L){return tD(E.right.adjusted,L)?!1:(E.right.adjusted=L,!0)},E.adjustTop=function(L){return tD(E.top.adjusted,L)?!1:(E.top.adjusted=L,!0)},E.adjustBottom=function(L){return tD(E.bottom.adjusted,L)?!1:(E.bottom.adjusted=L,!0)},f===Ir.Anchored&&(d===Yi.Left?E.adjustEdge=E.adjustLeft:d===Yi.Top?E.adjustEdge=E.adjustTop:d===Yi.Right?E.adjustEdge=E.adjustRight:d===Yi.Bottom&&(E.adjustEdge=E.adjustBottom)),E},r.startMouseResize=function(l,c,u,h){o.startResize(u,l,c,sb.Mouse,ib.Mouse,function(d){return{x:d.clientX,y:d.clientY}},h)},r.startTouchResize=function(l,c,u,h){o.startResize(u,l,c,sb.Touch,ib.Touch,function(d){return{x:d.touches[0].clientX,y:d.touches[0].clientY}},h)},r.startMouseDrag=function(l,c,u){a.startDrag(c,l,sb.Mouse,ib.Mouse,function(h){return{x:h.clientX,y:h.clientY}},u)},r.startTouchDrag=function(l,c,u){a.startDrag(c,l,sb.Touch,ib.Touch,function(h){return{x:h.touches[0].clientX,y:h.touches[0].clientY}},u)},r}var Lge=function(i){var e=G.useRef(),t=G.useRef(!1),n=G.useRef(!1),s=G.useState(0);s[0];var r=s[1];t.current&&(n.current=!0),G.useEffect(function(){return t.current||(e.current=i(),t.current=!0),r(function(o){return o+1}),function(){n.current&&e.current&&e.current()}},[])},Tge=G.createContext(void 0),e7e=G.createContext(void 0),kge=G.createContext(void 0),t7e=G.createContext({}),n7e=J6e(),qT={id:vt.string,className:vt.string,style:vt.oneOfType([vt.object,vt.array]),as:vt.any,centerContent:vt.oneOf([Ad.None,Ad.Vertical,Ad.HorizontalVertical]),zIndex:vt.number,scrollable:vt.bool,trackSize:vt.bool,allowOverflow:vt.bool,handleRender:vt.func,onClick:vt.func,onDoubleClick:vt.func,onMouseDown:vt.func,onMouseEnter:vt.func,onMouseLeave:vt.func,onMouseMove:vt.func,onTouchStart:vt.func,onTouchMove:vt.func,onTouchEnd:vt.func};function i7e(){var i=G.useState(0),e=i[1];return G.useCallback(function(){e(function(t){return t+1})},[])}function Mge(){return"s"+H6e()}function s7e(i){var e=n7e,t=i7e(),n=G.useContext(Tge),s=G.useContext(kge),r=G.useContext(t7e).debug,o=Mge(),a=G.useState(i.id||o)[0],l=G.useRef(),c=G.useRef(),u=G.useState(),h=u[0],d=u[1],f=e.getSpace(a);r&&console.table(e.getSpaces());var g=ri(ri({},i),{id:a,zIndex:xl(i.zIndex,s)});f?e.updateSpace(f,g):(f=e.createSpace(n,g,t),e.addSpace(f));var p=o7e(e,f);return Lge(function(){var _=l.current?l.current.getBoundingClientRect():new DOMRect;return f.dimension=ri(ri({},_),{left:Math.floor(_.left),top:Math.floor(_.top),right:Math.floor(_.right),bottom:Math.floor(_.bottom),width:Math.floor(_.width),height:Math.floor(_.height),x:Math.floor(_.x),y:Math.floor(_.y)}),d(f.dimension),i.trackSize&&(c.current=new B6e.ResizeSensor(l.current,function(m){f.dimension=ri(ri({},_),{width:Math.floor(m.width),height:Math.floor(m.height)}),d(f.dimension)})),function(){c.current&&c.current.detach(),e.removeSpace(f)}}),{space:f,resizeHandles:p,domRect:h,elementRef:l}}var r7e=[{id:"ml",className:"resize-left",resizeType:Xi.Left,condition:function(i){return i.canResizeLeft}},{id:"mr",className:"resize-right",resizeType:Xi.Right,condition:function(i){return i.canResizeRight}},{id:"mt",className:"resize-top",resizeType:Xi.Top,condition:function(i){return i.canResizeTop}},{id:"mb",className:"resize-bottom",resizeType:Xi.Bottom,condition:function(i){return i.canResizeBottom}},{id:"mtl",className:"resize-top-left",resizeType:Xi.TopLeft,condition:function(i){return i.canResizeTopLeft}},{id:"mtr",className:"resize-top-right",resizeType:Xi.TopRight,condition:function(i){return i.canResizeTopRight}},{id:"mbl",className:"resize-bottom-left",resizeType:Xi.BottomLeft,condition:function(i){return i.canResizeBottomLeft}},{id:"mbr",className:"resize-bottom-right",resizeType:Xi.BottomRight,condition:function(i){return i.canResizeBottomRight}}];function o7e(i,e){var t=[],n=function(s,r,o){t.push({id:e.id+"-"+s,key:s,className:"spaces-resize-handle "+r,onMouseDown:function(a){return i.startMouseResize(o,e,a)},onTouchStart:function(a){return i.startTouchResize(o,e,a)}})};return r7e.forEach(function(s){s.condition(e)&&n(s.id,s.className,s.resizeType)}),{mouseHandles:t}}var a7e=!1,l7e=function(i){return G.createElement("div",{className:"spaces-centered"},i.children)},c7e=function(i){return G.createElement("div",{className:"spaces-centered-vertically"},i.children)};function u7e(i,e){switch(e){case Ad.Vertical:return G.createElement(c7e,null,i);case Ad.HorizontalVertical:return G.createElement(l7e,null,i)}return i}var j3=function(i){V6e(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.render=function(){return G.createElement(d7e,ri({},this.props,{wrapperInstance:this}))},e}(G.Component),Dge="_react_spaces_uniqueid",ite=function(i){return i[Dge]},h7e=function(i,e){i[Dge]=e},d7e=function(i){var e,t=(e=i.id)!==null&&e!==void 0?e:ite(i.wrapperInstance),n=G.useState(!1);n[0],n[1];var s=Mge();t||(h7e(i.wrapperInstance,s),t=ite(i.wrapperInstance));var r=i.innerComponentStyle,o=i.className,a=i.onClick,l=i.onDoubleClick,c=i.onMouseDown,u=i.onMouseEnter,h=i.onMouseLeave,d=i.onMouseMove,f=i.onTouchStart,g=i.onTouchMove,p=i.onTouchEnd,_=i.children,m=i.handleRender,v=i.style,y={onClick:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:h,onMouseMove:d,onTouchStart:f,onTouchMove:g,onTouchEnd:p},C=s7e(ri(ri({},i),{id:t})),S=C.space,x=C.domRect,E=C.elementRef,L=C.resizeHandles;Lge(function(){S.element=E.current});var T=o?o.split(" ").map(function(V){return V.trim()}):[],D=iu(iu(iu(iu([],["spaces-space",S.children.find(function(V){return V.resizing})?"spaces-resizing":void 0],!1),[S.type===Ir.Fixed?"spaces-fixedsize-layout":void 0],!1),[S.type===Ir.ViewPort?"spaces-fullpage-layout":void 0],!1),T.map(function(V){return V+"-container"}),!0).filter(function(V){return V}),I=iu(iu([],["spaces-space-inner"],!1),T,!0),N=r;S.handlePlacement===Dd.Inside&&(N=ri(ri({},N),{left:S.anchor===Yi.Right?S.handleSize:void 0,right:S.anchor===Yi.Left?S.handleSize:void 0,top:S.anchor===Yi.Bottom?S.handleSize:void 0,bottom:S.anchor===Yi.Top?S.handleSize:void 0}));var P=u7e(_,i.centerContent),O=ri(ri({id:S.id,ref:E,className:D.join(" ")},y),{style:v});return G.createElement(G.Fragment,null,L.mouseHandles.map(function(V){return(m==null?void 0:m(V))||G.createElement("div",ri({},V))}),a7e,G.createElement(i.as||"div",O,G.createElement("div",{className:I.join(" "),style:N},G.createElement(Tge.Provider,{value:S.id},G.createElement(kge.Provider,{value:void 0},G.createElement(e7e.Provider,{value:x},P))))))},Age=ri(ri({},qT),{size:vt.oneOfType([vt.string,vt.number]).isRequired,order:vt.number,handleSize:vt.number,touchHandleSize:vt.number,handlePlacement:vt.oneOf([Dd.Inside,Dd.OverlayBoundary,Dd.OverlayInside]),handleRender:vt.func,minimumSize:vt.number,maximumSize:vt.number,onResizeStart:vt.func,onResizeEnd:vt.func}),Ige=ri(ri({},Age),{resizable:vt.bool}),Nge=function(i){var e=i.children,t=i.size,n=G3(i,["children","size"]);return G.createElement(j3,ri({},n,{type:Ir.Anchored,anchor:Yi.Left,position:{left:0,top:0,bottom:0,rightResizable:!0,width:t}}),e)};Nge.propTypes=Age;var Rge=function(i){var e=i.size,t=i.children,n=i.resizable,s=G3(i,["size","children","resizable"]);return G.createElement(j3,ri({},s,{type:Ir.Anchored,anchor:Yi.Top,position:{left:0,top:0,right:0,bottomResizable:n,height:e}}),t)};Rge.propTypes=Ige;W6e(ri(ri({},Ige),{type:vt.oneOf([Ir.Positioned,Ir.Fill,Ir.Anchored]),anchor:vt.oneOf([Yi.Left,Yi.Top,Yi.Right,Yi.Bottom]),anchorSize:vt.oneOfType([vt.string,vt.number]),left:vt.oneOfType([vt.string,vt.number]),top:vt.oneOfType([vt.string,vt.number]),right:vt.oneOfType([vt.string,vt.number]),bottom:vt.oneOfType([vt.string,vt.number]),width:vt.oneOfType([vt.string,vt.number]),height:vt.oneOfType([vt.string,vt.number]),resizeTypes:vt.array}),"size");var M9=function(i){return G.createElement(j3,ri({},i,{type:Ir.Fill,position:{left:0,top:0,right:0,bottom:0}}),i.children)};M9.propTypes=qT;ri(ri({},qT),{width:vt.oneOfType([vt.string,vt.number]),height:vt.oneOfType([vt.string,vt.number]).isRequired});vt.number.isRequired;ri(ri({},qT),{left:vt.oneOfType([vt.string,vt.number]),top:vt.oneOfType([vt.string,vt.number]),right:vt.oneOfType([vt.string,vt.number]),bottom:vt.oneOfType([vt.string,vt.number]),width:vt.oneOfType([vt.string,vt.number]),height:vt.oneOfType([vt.string,vt.number]),resizable:vt.array});var Pge=function(i){var e=i.left,t=i.top,n=i.right,s=i.bottom,r=i.children,o=G3(i,["left","top","right","bottom","children"]);return G.createElement(j3,ri({},o,{type:Ir.ViewPort,position:{left:e||0,top:t||0,right:n||0,bottom:s||0}}),r)};Pge.propTypes=ri(ri({},qT),{left:vt.oneOfType([vt.string,vt.number]),top:vt.oneOfType([vt.string,vt.number]),right:vt.oneOfType([vt.string,vt.number]),bottom:vt.oneOfType([vt.string,vt.number])});var Oge=Symbol.for("immer-nothing"),ste=Symbol.for("immer-draftable"),xc=Symbol.for("immer-state");function uh(i,...e){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var Vw=Object.getPrototypeOf;function Ww(i){return!!i&&!!i[xc]}function bv(i){var e;return i?Fge(i)||Array.isArray(i)||!!i[ste]||!!((e=i.constructor)!=null&&e[ste])||q3(i)||X3(i):!1}var f7e=Object.prototype.constructor.toString();function Fge(i){if(!i||typeof i!="object")return!1;const e=Vw(i);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===f7e}function $N(i,e){K3(i)===0?Reflect.ownKeys(i).forEach(t=>{e(t,i[t],i)}):i.forEach((t,n)=>e(n,t,i))}function K3(i){const e=i[xc];return e?e.type_:Array.isArray(i)?1:q3(i)?2:X3(i)?3:0}function D9(i,e){return K3(i)===2?i.has(e):Object.prototype.hasOwnProperty.call(i,e)}function Bge(i,e,t){const n=K3(i);n===2?i.set(e,t):n===3?i.add(t):i[e]=t}function g7e(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e}function q3(i){return i instanceof Map}function X3(i){return i instanceof Set}function W_(i){return i.copy_||i.base_}function A9(i,e){if(q3(i))return new Map(i);if(X3(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);const t=Fge(i);if(e===!0||e==="class_only"&&!t){const n=Object.getOwnPropertyDescriptors(i);delete n[xc];let s=Reflect.ownKeys(n);for(let r=0;r<s.length;r++){const o=s[r],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:i[o]})}return Object.create(Vw(i),n)}else{const n=Vw(i);if(n!==null&&t)return{...i};const s=Object.create(n);return Object.assign(s,i)}}function Cj(i,e=!1){return Y3(i)||Ww(i)||!bv(i)||(K3(i)>1&&(i.set=i.add=i.clear=i.delete=p7e),Object.freeze(i),e&&Object.entries(i).forEach(([t,n])=>Cj(n,!0))),i}function p7e(){uh(2)}function Y3(i){return Object.isFrozen(i)}var m7e={};function wv(i){const e=m7e[i];return e||uh(0,i),e}var h2;function zge(){return h2}function _7e(i,e){return{drafts_:[],parent_:i,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rte(i,e){e&&(wv("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=e)}function I9(i){N9(i),i.drafts_.forEach(v7e),i.drafts_=null}function N9(i){i===h2&&(h2=i.parent_)}function ote(i){return h2=_7e(h2,i)}function v7e(i){const e=i[xc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ate(i,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return i!==void 0&&i!==t?(t[xc].modified_&&(I9(e),uh(4)),bv(i)&&(i=GN(e,i),e.parent_||jN(e,i)),e.patches_&&wv("Patches").generateReplacementPatches_(t[xc].base_,i,e.patches_,e.inversePatches_)):i=GN(e,t,[]),I9(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),i!==Oge?i:void 0}function GN(i,e,t){if(Y3(e))return e;const n=e[xc];if(!n)return $N(e,(s,r)=>lte(i,n,e,s,r,t)),e;if(n.scope_!==i)return e;if(!n.modified_)return jN(i,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let r=s,o=!1;n.type_===3&&(r=new Set(s),s.clear(),o=!0),$N(r,(a,l)=>lte(i,n,s,a,l,t,o)),jN(i,s,!1),t&&i.patches_&&wv("Patches").generatePatches_(n,t,i.patches_,i.inversePatches_)}return n.copy_}function lte(i,e,t,n,s,r,o){if(Ww(s)){const a=r&&e&&e.type_!==3&&!D9(e.assigned_,n)?r.concat(n):void 0,l=GN(i,s,a);if(Bge(t,n,l),Ww(l))i.canAutoFreeze_=!1;else return}else o&&t.add(s);if(bv(s)&&!Y3(s)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;GN(i,s),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&jN(i,s)}}function jN(i,e,t=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&Cj(e,t)}function y7e(i,e){const t=Array.isArray(i),n={type_:t?1:0,scope_:e?e.scope_:zge(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,r=Sj;t&&(s=[n],r=d2);const{revoke:o,proxy:a}=Proxy.revocable(s,r);return n.draft_=a,n.revoke_=o,a}var Sj={get(i,e){if(e===xc)return i;const t=W_(i);if(!D9(t,e))return b7e(i,t,e);const n=t[e];return i.finalized_||!bv(n)?n:n===PB(i.base_,e)?(OB(i),i.copy_[e]=P9(n,i)):n},has(i,e){return e in W_(i)},ownKeys(i){return Reflect.ownKeys(W_(i))},set(i,e,t){const n=Uge(W_(i),e);if(n!=null&&n.set)return n.set.call(i.draft_,t),!0;if(!i.modified_){const s=PB(W_(i),e),r=s==null?void 0:s[xc];if(r&&r.base_===t)return i.copy_[e]=t,i.assigned_[e]=!1,!0;if(g7e(t,s)&&(t!==void 0||D9(i.base_,e)))return!0;OB(i),R9(i)}return i.copy_[e]===t&&(t!==void 0||e in i.copy_)||Number.isNaN(t)&&Number.isNaN(i.copy_[e])||(i.copy_[e]=t,i.assigned_[e]=!0),!0},deleteProperty(i,e){return PB(i.base_,e)!==void 0||e in i.base_?(i.assigned_[e]=!1,OB(i),R9(i)):delete i.assigned_[e],i.copy_&&delete i.copy_[e],!0},getOwnPropertyDescriptor(i,e){const t=W_(i),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:i.type_!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty(){uh(11)},getPrototypeOf(i){return Vw(i.base_)},setPrototypeOf(){uh(12)}},d2={};$N(Sj,(i,e)=>{d2[i]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});d2.deleteProperty=function(i,e){return d2.set.call(this,i,e,void 0)};d2.set=function(i,e,t){return Sj.set.call(this,i[0],e,t,i[0])};function PB(i,e){const t=i[xc];return(t?W_(t):i)[e]}function b7e(i,e,t){var s;const n=Uge(e,t);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(i.draft_):void 0}function Uge(i,e){if(!(e in i))return;let t=Vw(i);for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Vw(t)}}function R9(i){i.modified_||(i.modified_=!0,i.parent_&&R9(i.parent_))}function OB(i){i.copy_||(i.copy_=A9(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var w7e=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if(typeof e=="function"&&typeof t!="function"){const r=t;t=e;const o=this;return function(l=r,...c){return o.produce(l,u=>t.call(this,u,...c))}}typeof t!="function"&&uh(6),n!==void 0&&typeof n!="function"&&uh(7);let s;if(bv(e)){const r=ote(this),o=P9(e,void 0);let a=!0;try{s=t(o),a=!1}finally{a?I9(r):N9(r)}return rte(r,n),ate(s,r)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===Oge&&(s=void 0),this.autoFreeze_&&Cj(s,!0),n){const r=[],o=[];wv("Patches").generateReplacementPatches_(e,s,r,o),n(r,o)}return s}else uh(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let n,s;return[this.produce(e,t,(o,a)=>{n=o,s=a}),n,s]},typeof(i==null?void 0:i.autoFreeze)=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof(i==null?void 0:i.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){bv(i)||uh(8),Ww(i)&&(i=C7e(i));const e=ote(this),t=P9(i,void 0);return t[xc].isManual_=!0,N9(e),t}finishDraft(i,e){const t=i&&i[xc];(!t||!t.isManual_)&&uh(9);const{scope_:n}=t;return rte(n,e),ate(void 0,n)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){i=s.value;break}}t>-1&&(e=e.slice(t+1));const n=wv("Patches").applyPatches_;return Ww(i)?n(i,e):this.produce(i,s=>n(s,e))}};function P9(i,e){const t=q3(i)?wv("MapSet").proxyMap_(i,e):X3(i)?wv("MapSet").proxySet_(i,e):y7e(i,e);return(e?e.scope_:zge()).drafts_.push(t),t}function C7e(i){return Ww(i)||uh(10,i),Vge(i)}function Vge(i){if(!bv(i)||Y3(i))return i;const e=i[xc];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=A9(i,e.scope_.immer_.useStrictShallowCopy_)}else t=A9(i,!0);return $N(t,(n,s)=>{Bge(t,n,Vge(s))}),e&&(e.finalized_=!1),t}var Ec=new w7e,S7e=Ec.produce;Ec.produceWithPatches.bind(Ec);Ec.setAutoFreeze.bind(Ec);Ec.setUseStrictShallowCopy.bind(Ec);Ec.applyPatches.bind(Ec);Ec.createDraft.bind(Ec);Ec.finishDraft.bind(Ec);var su=(i=>(i.Solving="solving",i.FullUnSAT="full-unsat",i.PartialUnSAT="partial-unsat",i))(su||{}),bd=(i=>(i.Solving="solving",i.Terminated="terminated",i.Waiting="waiting",i.UNSAT="unsat",i.UnSATBySplit="unsat-by-split",i))(bd||{}),O9=(i=>(i.Idle="idle",i.Solving="solving",i))(O9||{}),no=(i=>(i.Start="start",i.AssignRoot="assign-root",i.SplitCoordinator="split",i.FullUnSAT="full-unsat",i.PartialUnSAT="partial-unsat",i.SetupCoordinator="setup",i.PrePartitionDone="pre-partition-done",i.StartSolving="start-solving",i.NewNode="new-node",i.Solve="solve",i.UnSAT="unsat",i.UnSATByPushUp="unsat-by-push-up",i.UnSATByPushDown="unsat-by-push-down",i.PerformSplit="perform-split",i.Terminate="terminate",i.Done="done",i.Comment="comment",i.Unknown="unknown",i))(no||{});const x7e=i=>{let e=0;const t=l=>{let c=e;for(;!l(i.charCodeAt(e))&&e<i.length;)e++;return i.slice(c,e)},n=l=>t(c=>c===l.charCodeAt(0)),s=()=>t(l=>l!==32);s();const r=n(" ");s();const o=n(" ");s();const a=new Map;for(;e<i.length;){const l=n("=");e++;let c="";i.charCodeAt(e)===34?(e++,c=n('"'),e++):c=n(" "),a.set(l,c),s()}return{source:r,type:o,namedParams:a}},E7e=i=>i.split(/\r?\n/).filter(e=>e.trim()!=="").map(e=>{if(e.startsWith("#"))return{type:"comment",source:"comment",raw:e};const{source:t,type:n,namedParams:s}=x7e(e),r=l=>s.get(l),o=l=>{const c=s.get(l);if(c===void 0)throw new Error(`Unexpect ${n} event ${e}, missing ${l}`);return c},a=l=>Number(o(l));switch(n){case"start":return{type:n,source:t,formula:o("formula"),raw:e};case"assign-root":return{type:n,source:t,raw:e};case"split":return{type:n,source:t,coordinatorId:a("coord-id"),leaderFatherNodeId:a("father-id"),leaderNodeId:a("node-id"),raw:e};case"full-unsat":return{type:n,source:t,leaderNodeId:a("node-id"),raw:e};case"partial-unsat":return{type:n,source:t,leaderNodeId:a("node-id"),coordinatorId:a("coord-id"),raw:e};case"setup":return{type:n,source:t,cores:a("cores"),alives:a("alives"),raw:e};case"pre-partition-done":return{type:n,source:t,formula:o("formula"),raw:e};case"start-solving":return{type:n,source:t,formula:r("formula"),round:a("round"),leaderNodeId:a("node-id-in-leader"),raw:e};case"new-node":return{type:n,source:t,nodeId:a("node-id"),fatherNodeId:a("father-id"),label:r("label"),raw:e};case"solve":return{type:n,source:t,nodeId:a("node-id"),oldStatus:o("old-status"),raw:e};case"unsat":case"unsat-by-push-down":case"unsat-by-push-up":return{type:n,source:t,nodeId:a("node-id"),oldStatus:o("old-status"),raw:e};case"perform-split":return{type:n,source:t,nodeId:a("node-id"),coordinatorId:a("coord-id"),oldStatus:o("old-status"),raw:e};case"terminate":return{type:n,source:t,nodeId:a("node-id"),oldStatus:o("old-status"),raw:e};case"done":return{type:n,source:t,raw:e};default:return{type:"unknown",source:t,params:[...s],raw:e}}}),cte=()=>({root:Wge(0),coordinators:new Map}),Wge=i=>({id:i,status:"solving",label:"",children:[]}),ute=(i,e)=>({id:i,status:"waiting",label:e,children:[]}),L7e=i=>({id:i,status:"idle",round:0,root:[]}),KN=(i,e)=>({...i,root:e(i.root),coordinators:i.coordinators}),T7e=(i,e)=>({...i,coordinators:new Map([...i.coordinators,[e,L7e(e)]])}),k7e=(i,e)=>({...i,coordinators:new Map([...i.coordinators].filter(([t])=>t!==e))}),Qb=(i,e,t)=>{const n=i.coordinators.get(e);return{...i,coordinators:new Map([...i.coordinators,[e,t(n)]])}},wd=(i,e,t)=>{const n=i.coordinators.get(e);return{...i,coordinators:new Map([...i.coordinators,[e,{...n,root:n.root.with(-1,t(n.root.at(-1)))}]])}},M7e=(i,e)=>S7e(i,t=>{const n=s=>{e(s),s.children&&s.children.forEach(r=>n(r))};return n(t)}),xj=(i,e,t)=>M7e(i,n=>{n.id===e&&t(n)}),hte=(i,e,t)=>xj(i,e,n=>{n.children.push(t)}),dte=(i,e,t)=>xj(i,e,n=>{n.children=n.children.filter(s=>s.id!==t)}),ru=(i,e,t)=>xj(i,e,n=>{n.status=t}),D7e=(i,e)=>{switch(e.type){case"start":return{...i,formula:e.formula};case"assign-root":return i;case"split":return{...i,root:hte(i.root,e.leaderFatherNodeId,Wge(e.leaderNodeId))};case"partial-unsat":return KN(i,t=>ru(t,e.leaderNodeId,"partial-unsat"));case"full-unsat":return KN(i,t=>ru(t,e.leaderNodeId,"full-unsat"));case"setup":return T7e(i,e.source);case"pre-partition-done":return Qb(i,e.source,t=>({...t,formula:e.formula}));case"start-solving":return Qb(i,e.source,t=>({...t,root:[...t.root,ute(0)],formula:e.formula,round:e.round,status:"solving"}));case"new-node":return wd(i,e.source,t=>hte(t,e.fatherNodeId,ute(e.nodeId,e.label)));case"solve":return wd(i,e.source,t=>ru(t,e.nodeId,"solving"));case"unsat":case"unsat-by-push-down":case"unsat-by-push-up":return wd(i,e.source,t=>ru(t,e.nodeId,"unsat"));case"perform-split":return wd(i,e.source,t=>ru(t,e.nodeId,"unsat-by-split"));case"terminate":return wd(i,e.source,t=>ru(t,e.nodeId,"terminated"));case"done":return Qb(i,e.source,t=>({...t,status:"idle"}));case"comment":case"unknown":return i}throw new Error("Unreachable")},A7e=(i,e)=>{for(const t of e)i=D7e(i,t);return i},I7e=(i,e)=>{switch(e.type){case"start":return{...i,formula:void 0};case"assign-root":return i;case"split":return{root:dte(i.root,e.leaderFatherNodeId,e.leaderNodeId),coordinators:i.coordinators};case"partial-unsat":return KN(i,t=>ru(t,e.leaderNodeId,"solving"));case"full-unsat":return KN(i,t=>ru(t,e.leaderNodeId,"partial-unsat"));case"setup":return k7e(i,e.source);case"pre-partition-done":return Qb(i,e.source,t=>({...t,formula:void 0}));case"start-solving":return Qb(i,e.source,t=>({...t,root:t.root.slice(0,-1),round:e.round-1,status:"idle"}));case"new-node":return wd(i,e.source,t=>dte(t,e.fatherNodeId,e.nodeId));case"solve":return wd(i,e.source,t=>({...t,root:ru(t,e.nodeId,e.oldStatus)}));case"unsat":case"unsat-by-push-down":case"unsat-by-push-up":return wd(i,e.source,t=>ru(t,e.nodeId,e.oldStatus));case"perform-split":return wd(i,e.source,t=>ru(t,e.nodeId,e.oldStatus));case"terminate":return wd(i,e.source,t=>ru(t,e.nodeId,e.oldStatus));case"done":return Qb(i,e.source,t=>({...t,status:"solving"}));case"comment":case"unknown":return i}throw new Error("Unreachable")},N7e=(i,e)=>{for(const t of e)i=I7e(i,t);return i},R7e=i=>{const e=G.useRef(i);return e.current=i,e},P7e=i=>{const e=R7e(i);return(...t)=>e.current(...t)},O7e=i=>{const{value:e,total:t,speed:n,onChange:s,children:r}=i,o=G.useRef(0),[a,l]=G.useState(!1),c=P7e(u=>{u-o.current<n||(e===t-1?l(!1):(s(e+1),o.current=u))});return G.useLayoutEffect(()=>{if(!a)return;let u=!1;const h=d=>{u||(c(d),window.requestAnimationFrame(h))};return window.requestAnimationFrame(h),()=>{u=!0}},[a]),ge.jsxs(dj,{children:[ge.jsx(Za,{icon:ge.jsx(KFe,{}),disabled:e===0,onClick:()=>s(e-1)}),ge.jsxs(Za,{disabled:!0,style:{minWidth:60},children:[e+1,"/",t]}),ge.jsx(Za,{icon:ge.jsx(XFe,{}),disabled:e>=t-1,onClick:()=>s(e+1)}),ge.jsx(Za,{icon:ge.jsx(aBe,{}),disabled:a||e>=t-1,onClick:()=>l(!0)}),ge.jsx(Za,{icon:ge.jsx(rBe,{}),disabled:!a,onClick:()=>l(!1)}),ge.jsx(Za,{icon:ge.jsx(hBe,{}),disabled:!a&&e===0,onClick:()=>{l(!1),s(0)}}),ge.jsx(u2,{hotKeys:[u2.Keys.P],render:()=>null,onHotKey:()=>l(u=>!u)}),r&&r(e,a)]})},Z3=Cge(()=>{const[i,e]=G.useState(!1),[t,n]=G.useState([]),[s,r]=G.useState(()=>cte()),[o,a]=G.useState(0),l=G.useMemo(()=>t.at(o),[t,o]);return{isDevMode:i,setIsDevMode:e,actionList:t,loadActionList:h=>{a(0),r(cte()),n(h)},currentAction:l,currentState:s,currentIndex:o,moveTo:h=>{a(d=>(r(f=>{try{return d<h?A7e(f,t.slice(d,h)):h<d?N7e(f,t.slice(h,d).reverse()):f}catch(g){return wge.error(String(g)),f}}),h))}}});var F7e=typeof global=="object"&&global&&global.Object===Object&&global,B7e=typeof self=="object"&&self&&self.Object===Object&&self,z7e=F7e||B7e||Function("return this")(),qN=z7e.Symbol,Hge=Object.prototype,U7e=Hge.hasOwnProperty,V7e=Hge.toString,YS=qN?qN.toStringTag:void 0;function W7e(i){var e=U7e.call(i,YS),t=i[YS];try{i[YS]=void 0;var n=!0}catch{}var s=V7e.call(i);return n&&(e?i[YS]=t:delete i[YS]),s}var H7e=Object.prototype,$7e=H7e.toString;function G7e(i){return $7e.call(i)}var j7e="[object Null]",K7e="[object Undefined]",fte=qN?qN.toStringTag:void 0;function $ge(i){return i==null?i===void 0?K7e:j7e:fte&&fte in Object(i)?W7e(i):G7e(i)}function q7e(i){return i!=null&&typeof i=="object"}var X7e="[object Symbol]";function Y7e(i){return typeof i=="symbol"||q7e(i)&&$ge(i)==X7e}var Z7e=/\s/;function Q7e(i){for(var e=i.length;e--&&Z7e.test(i.charAt(e)););return e}var J7e=/^\s+/;function e9e(i){return i&&i.slice(0,Q7e(i)+1).replace(J7e,"")}function XN(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var gte=NaN,t9e=/^[-+]0x[0-9a-f]+$/i,n9e=/^0b[01]+$/i,i9e=/^0o[0-7]+$/i,s9e=parseInt;function r9e(i){if(typeof i=="number")return i;if(Y7e(i))return gte;if(XN(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=XN(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=e9e(i);var t=n9e.test(i);return t||i9e.test(i)?s9e(i.slice(2),t?2:8):t9e.test(i)?gte:+i}var pte=1/0,o9e=17976931348623157e292;function mte(i){if(!i)return i===0?i:0;if(i=r9e(i),i===pte||i===-pte){var e=i<0?-1:1;return e*o9e}return i===i?i:0}var a9e="[object AsyncFunction]",l9e="[object Function]",c9e="[object GeneratorFunction]",u9e="[object Proxy]";function h9e(i){if(!XN(i))return!1;var e=$ge(i);return e==l9e||e==c9e||e==a9e||e==u9e}var d9e=9007199254740991,f9e=/^(?:0|[1-9]\d*)$/;function g9e(i,e){var t=typeof i;return e=e??d9e,!!e&&(t=="number"||t!="symbol"&&f9e.test(i))&&i>-1&&i%1==0&&i<e}function p9e(i,e){return i===e||i!==i&&e!==e}var m9e=9007199254740991;function _9e(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=m9e}function v9e(i){return i!=null&&_9e(i.length)&&!h9e(i)}function y9e(i,e,t){if(!XN(t))return!1;var n=typeof e;return(n=="number"?v9e(t)&&g9e(e,t.length):n=="string"&&e in t)?p9e(t[e],i):!1}var b9e=Math.floor,w9e=Math.random;function C9e(i,e){return i+b9e(w9e()*(e-i+1))}var S9e=parseFloat,x9e=Math.min,E9e=Math.random;function L9e(i,e,t){if(t&&typeof t!="boolean"&&y9e(i,e,t)&&(e=t=void 0),t===void 0&&(typeof e=="boolean"?(t=e,e=void 0):typeof i=="boolean"&&(t=i,i=void 0)),i===void 0&&e===void 0?(i=0,e=1):(i=mte(i),e===void 0?(e=i,i=0):e=mte(e)),i>e){var n=i;i=e,e=n}if(t||i%1||e%1){var s=E9e();return x9e(i+s*(e-i+S9e("1e-"+((s+"").length-1))),e)}return C9e(i,e)}function ic(i,e=0){return i[i.length-(1+e)]}function T9e(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function tr(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function k9e(i,e){const t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}function M9e(i,e,t){return D9e(i.length,n=>t(i[n],e))}function D9e(i,e){let t=0,n=i-1;for(;t<=n;){const s=(t+n)/2|0,r=e(s);if(r<0)t=s+1;else if(r>0)n=s-1;else return s}return-(t+1)}function*Ej(i,e){let t,n;for(const s of i)n!==void 0&&e(n,s)?t.push(s):(t&&(yield t),t=[s]),n=s;t&&(yield t)}function Gge(i,e){for(let t=0;t<=i.length;t++)e(t===0?void 0:i[t-1],t===i.length?void 0:i[t])}function A9e(i,e){for(let t=0;t<i.length;t++)e(t===0?void 0:i[t-1],i[t],t+1===i.length?void 0:i[t+1])}function Lj(i){return i.filter(e=>!!e)}function _te(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function I9e(i){return!Array.isArray(i)||i.length===0}function Q3(i){return Array.isArray(i)&&i.length>0}function Cv(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function Tj(i,e){return i.length>0?i[0]:e}function ma(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function J3(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function FB(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function iD(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function F9(i,e){for(const t of e)i.push(t)}function N9e(i,e,t){const n=jge(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function vte(i,e,t,n){const s=jge(i,e);let r=i.splice(s,t);return r===void 0&&(r=[]),N9e(i,s,n),r}function jge(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}var f2;(function(i){function e(r){return r<0}i.isLessThan=e;function t(r){return r<=0}i.isLessThanOrEqual=t;function n(r){return r>0}i.isGreaterThan=n;function s(r){return r===0}i.isNeitherLessOrGreaterThan=s,i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(f2||(f2={}));function _u(i,e){return(t,n)=>e(i(t),i(n))}function R9e(...i){return(e,t)=>{for(const n of i){const s=n(e,t);if(!f2.isNeitherLessOrGreaterThan(s))return s}return f2.neitherLessOrGreaterThan}}const lm=(i,e)=>i-e,P9e=(i,e)=>lm(i?1:0,e?1:0);function O9e(i){return(e,t)=>-i(e,t)}class Ag{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Nb=class Nb{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Nb(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Nb(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(s=>((n||f2.isGreaterThan(e(s,t)))&&(n=!1,t=s),!0)),t}};Nb.empty=new Nb(e=>{});let B0=Nb;function Vl(i){return typeof i=="string"}function wa(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function F9e(i){const e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}function UC(i){return typeof i=="number"&&!isNaN(i)}function yte(i){return!!i&&typeof i[Symbol.iterator]=="function"}function Kge(i){return i===!0||i===!1}function gc(i){return typeof i>"u"}function Hw(i){return!Al(i)}function Al(i){return gc(i)||i===null}function cm(i,e){if(!i)throw new Error("Unexpected type")}function qge(i){if(Al(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function YN(i){return typeof i=="function"}function B9e(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)z9e(i[n],e[n])}function z9e(i,e){if(Vl(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(YN(e)){try{if(i instanceof e)return}catch{}if(!Al(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Tp(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?Tp(n):n}),e}function U9e(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Xge.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&!F9e(s)&&e.push(s)}}return i}const Xge=Object.prototype.hasOwnProperty;function Yge(i,e){return B9(i,e,new Set)}function B9(i,e,t){if(Al(i))return i;const n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){const s=[];for(const r of i)s.push(B9(r,e,t));return s}if(wa(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(const r in i)Xge.call(i,r)&&(s[r]=B9(i[r],e,t));return t.delete(i),s}return i}function il(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!il(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!il(s,r))return!1;for(t=0;t<s.length;t++)if(!il(i[s[t]],e[s[t]]))return!1}return!0}function V9e(i){let e=[];for(;Object.prototype!==i;)e=e.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return e}function z9(i){const e=[];for(const t of V9e(i))typeof i[t]=="function"&&e.push(t);return e}function W9e(i,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)},n={};for(const s of i)n[s]=t(s);return n}function Zge(){return globalThis._VSCODE_NLS_MESSAGES}function kj(){return globalThis._VSCODE_NLS_LANGUAGE}const H9e=kj()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function bte(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,s)=>{const r=s[0],o=e[r];let a=n;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),H9e&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function k(i,e,...t){return bte(typeof i=="number"?$9e(i,e):e,t)}function $9e(i,e){var n;const t=(n=Zge())==null?void 0:n[i];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${i} !!!`)}return t}const rb="en";let ZN=!1,QN=!1,wI=!1,Qge=!1,Mj=!1,Dj=!1,Jge=!1,sD,BB=rb,wte=rb,G9e,Ku;const mg=globalThis;let Vo;var Pue;typeof mg.vscode<"u"&&typeof mg.vscode.process<"u"?Vo=mg.vscode.process:typeof process<"u"&&typeof((Pue=process==null?void 0:process.versions)==null?void 0:Pue.node)=="string"&&(Vo=process);var Oue;const j9e=typeof((Oue=Vo==null?void 0:Vo.versions)==null?void 0:Oue.electron)=="string",K9e=j9e&&(Vo==null?void 0:Vo.type)==="renderer";var Fue;if(typeof Vo=="object"){ZN=Vo.platform==="win32",QN=Vo.platform==="darwin",wI=Vo.platform==="linux",wI&&Vo.env.SNAP&&Vo.env.SNAP_REVISION,Vo.env.CI||Vo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,sD=rb,BB=rb;const i=Vo.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i);sD=e.userLocale,wte=e.osLocale,BB=e.resolvedLanguage||rb,G9e=(Fue=e.languagePack)==null?void 0:Fue.translationsConfigFile}catch{}Qge=!0}else typeof navigator=="object"&&!K9e?(Ku=navigator.userAgent,ZN=Ku.indexOf("Windows")>=0,QN=Ku.indexOf("Macintosh")>=0,Dj=(Ku.indexOf("Macintosh")>=0||Ku.indexOf("iPad")>=0||Ku.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,wI=Ku.indexOf("Linux")>=0,Jge=(Ku==null?void 0:Ku.indexOf("Mobi"))>=0,Mj=!0,BB=kj()||rb,sD=navigator.language.toLowerCase(),wte=sD):console.error("Unable to resolve platform.");const rl=ZN,Tn=QN,ka=wI,BE=Qge,VC=Mj,q9e=Mj&&typeof mg.importScripts=="function",X9e=q9e?mg.origin:void 0,Sv=Dj,epe=Jge,zd=Ku,Y9e=typeof mg.postMessage=="function"&&!mg.importScripts,tpe=(()=>{if(Y9e){const i=[];mg.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,s=i.length;n<s;n++){const r=i[n];if(r.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),r.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),mg.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),du=QN||Dj?2:ZN?1:3;let Cte=!0,Ste=!1;function Z9e(){if(!Ste){Ste=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,Cte=new Uint16Array(i.buffer)[0]===513}return Cte}const npe=!!(zd&&zd.indexOf("Chrome")>=0),Q9e=!!(zd&&zd.indexOf("Firefox")>=0),J9e=!!(!npe&&zd&&zd.indexOf("Safari")>=0),eze=!!(zd&&zd.indexOf("Edg/")>=0),tze=!!(zd&&zd.indexOf("Android")>=0),oo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Fn;(function(i){function e(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(C){yield C}i.single=s;function r(C){return e(C)?C:s(C)}i.wrap=r;function o(C){return C||t}i.from=o;function*a(C){for(let S=C.length-1;S>=0;S--)yield C[S]}i.reverse=a;function l(C){return!C||C[Symbol.iterator]().next().done===!0}i.isEmpty=l;function c(C){return C[Symbol.iterator]().next().value}i.first=c;function u(C,S){let x=0;for(const E of C)if(S(E,x++))return!0;return!1}i.some=u;function h(C,S){for(const x of C)if(S(x))return x}i.find=h;function*d(C,S){for(const x of C)S(x)&&(yield x)}i.filter=d;function*f(C,S){let x=0;for(const E of C)yield S(E,x++)}i.map=f;function*g(C,S){let x=0;for(const E of C)yield*S(E,x++)}i.flatMap=g;function*p(...C){for(const S of C)yield*S}i.concat=p;function _(C,S,x){let E=x;for(const L of C)E=S(E,L);return E}i.reduce=_;function*m(C,S,x=C.length){for(S<0&&(S+=C.length),x<0?x+=C.length:x>C.length&&(x=C.length);S<x;S++)yield C[S]}i.slice=m;function v(C,S=Number.POSITIVE_INFINITY){const x=[];if(S===0)return[x,C];const E=C[Symbol.iterator]();for(let L=0;L<S;L++){const T=E.next();if(T.done)return[x,i.empty()];x.push(T.value)}return[x,{[Symbol.iterator](){return E}}]}i.consume=v;async function y(C){const S=[];for await(const x of C)S.push(x);return Promise.resolve(S)}i.asyncToArray=y})(Fn||(Fn={}));var dg;let Vs=(dg=class{constructor(e){this.element=e,this.next=dg.Undefined,this.prev=dg.Undefined}},dg.Undefined=new dg(void 0),dg);class tl{constructor(){this._first=Vs.Undefined,this._last=Vs.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Vs.Undefined}clear(){let e=this._first;for(;e!==Vs.Undefined;){const t=e.next;e.prev=Vs.Undefined,e.next=Vs.Undefined,e=t}this._first=Vs.Undefined,this._last=Vs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Vs(e);if(this._first===Vs.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Vs.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Vs.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Vs.Undefined&&e.next!==Vs.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Vs.Undefined&&e.next===Vs.Undefined?(this._first=Vs.Undefined,this._last=Vs.Undefined):e.next===Vs.Undefined?(this._last=this._last.prev,this._last.next=Vs.Undefined):e.prev===Vs.Undefined&&(this._first=this._first.next,this._first.prev=Vs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Vs.Undefined;)yield e.element,e=e.next}}const ipe="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function nze(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of ipe)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Aj=nze();function Ij(i){let e=Aj;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const spe=new tl;spe.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function g2(i,e,t,n,s){if(e=Ij(e),s||(s=Fn.first(spe)),t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),g2(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const u=o-s.windowSize*c;e.lastIndex=Math.max(0,u);const h=ize(e,t,o,a);if(!h&&l||(l=h,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function ize(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}const id=8;class rpe{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class ope{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ei{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return e4(e,t)}compute(e,t,n){return n}}class zE{constructor(e,t){this.newValue=e,this.didChange=t}}function e4(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new zE(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&tr(i,e);return new zE(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const s=e4(i[n],e[n]);s.didChange&&(i[n]=s.newValue,t=!0)}return new zE(i,t)}class XT{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return e4(e,t)}validate(e){return this.defaultValue}}class WC{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return e4(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function _t(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class yn extends WC{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return _t(e,this.defaultValue)}}function H_(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class ci extends WC{static clampedInt(e,t,n,s){return H_(e,t,n,s)}constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}validate(e){return ci.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function sze(i,e,t,n){if(typeof i>"u")return e;const s=Pl.float(i,e);return Pl.clamp(s,t,n)}class Pl extends WC{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}validate(e){return this.validationFn(Pl.float(e,this.defaultValue))}}class Do extends WC{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return Do.string(e,this.defaultValue)}}function Zi(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}class Gi extends WC{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return Zi(e,this.defaultValue,this._allowedValues)}}class rD extends Ei{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function rze(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class oze extends Ei{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[k("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),k("accessibilitySupport.on","Optimize for usage with a Screen Reader."),k("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:k("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class aze extends Ei{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:k("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:k("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:_t(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:_t(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function lze(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Dr;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(Dr||(Dr={}));function cze(i){switch(i){case"line":return Dr.Line;case"block":return Dr.Block;case"underline":return Dr.Underline;case"line-thin":return Dr.LineThin;case"block-outline":return Dr.BlockOutline;case"underline-thin":return Dr.UnderlineThin}}class uze extends XT{constructor(){super(143)}compute(e,t,n){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(112)&&s.push("showUnused"),t.get(141)&&s.push("showDeprecated"),s.join(" ")}}class hze extends yn{constructor(){super(37,"emptySelectionClipboard",!0,{description:k("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class dze extends Ei{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:k("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[k("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),k("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),k("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:k("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[k("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),k("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),k("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:k("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:k("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Tn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:k("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:k("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:_t(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Zi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Zi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:_t(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:_t(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:_t(t.loop,this.defaultValue.loop)}}}const Bf=class Bf extends Ei{constructor(){super(51,"fontLigatures",Bf.OFF,{anyOf:[{type:"boolean",description:k("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:k("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:k("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Bf.OFF:e==="true"?Bf.ON:e:e?Bf.ON:Bf.OFF}};Bf.OFF='"liga" off, "calt" off',Bf.ON='"liga" on, "calt" on';let xv=Bf;const zf=class zf extends Ei{constructor(){super(54,"fontVariations",zf.OFF,{anyOf:[{type:"boolean",description:k("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:k("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:k("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?zf.OFF:e==="true"?zf.TRANSLATE:e:e?zf.TRANSLATE:zf.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}};zf.OFF="normal",zf.TRANSLATE="translate";let p2=zf;class fze extends XT{constructor(){super(50)}compute(e,t,n){return e.fontInfo}}class gze extends WC{constructor(){super(52,"fontSize",Wl.fontSize,{type:"number",minimum:6,maximum:100,default:Wl.fontSize,description:k("fontSize","Controls the font size in pixels.")})}validate(e){const t=Pl.float(e,this.defaultValue);return t===0?Wl.fontSize:Pl.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}const ld=class ld extends Ei{constructor(){super(53,"fontWeight",Wl.fontWeight,{anyOf:[{type:"number",minimum:ld.MINIMUM_VALUE,maximum:ld.MAXIMUM_VALUE,errorMessage:k("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ld.SUGGESTION_VALUES}],default:Wl.fontWeight,description:k("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(ci.clampedInt(e,Wl.fontWeight,ld.MINIMUM_VALUE,ld.MAXIMUM_VALUE))}};ld.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],ld.MINIMUM_VALUE=1,ld.MAXIMUM_VALUE=1e3;let U9=ld;class pze extends Ei{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[k("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),k("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),k("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:k("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:k("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:k("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:k("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:k("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:k("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:k("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:k("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:k("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:k("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:k("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Zi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Zi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Zi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Zi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Zi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Zi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Zi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Do.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Do.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Do.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Do.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Do.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Do.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class mze extends Ei{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:k("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:k("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:k("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:k("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:k("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),delay:ci.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:_t(t.sticky,this.defaultValue.sticky),hidingDelay:ci.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:_t(t.above,this.defaultValue.above)}}}class Jb extends XT{constructor(){super(146)}compute(e,t,n){return Jb.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const r=(n+e.viewLineCount+s)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:s,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let d=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,_=e.verticalScrollbarWidth,m=e.viewLineCount,v=e.remainingWidth,y=e.isViewportWrapping,C=h?2:3;let S=Math.floor(r*s);const x=S/r;let E=!1,L=!1,T=C*d,D=d/r,I=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:H,extraLinesBeforeFirstLine:U,extraLinesBeyondLastLine:j,desiredRatio:W,minimapLineCount:X}=Jb.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(m/X>1)E=!0,L=!0,d=1,T=1,D=d/r;else{let le=!1,fe=d+1;if(g==="fit"){const be=Math.ceil((U+m+j)*T);y&&a&&v<=t.stableFitRemainingWidth?(le=!0,fe=t.stableFitMaxMinimapScale):le=be>S}if(g==="fill"||le){E=!0;const be=d;T=Math.min(l*r,Math.max(1,Math.floor(1/W))),y&&a&&v<=t.stableFitRemainingWidth&&(fe=t.stableFitMaxMinimapScale),d=Math.min(fe,Math.max(1,Math.floor(T/C))),d>be&&(I=Math.min(2,d/be)),D=d/r/I,S=Math.ceil(Math.max(H,U+m+j)*T),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const N=Math.floor(f*D),P=Math.min(N,Math.max(0,Math.floor((v-_-2)*D/(c+D)))+id);let O=Math.floor(r*P);const V=O/r;O=Math.floor(O*I);const z=h?1:2,K=p==="left"?0:n-P-_;return{renderMinimap:z,minimapLeft:K,minimapWidth:P,minimapHeightIsEditorHeight:E,minimapIsSampling:L,minimapScale:d,minimapLineHeight:T,minimapCanvasInnerWidth:O,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:V,minimapCanvasOuterHeight:x}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,h=e.get(138),d=h==="inherit"?e.get(137):h,f=d==="inherit"?e.get(133):d,g=e.get(136),p=t.isDominatedByLongLines,_=e.get(57),m=e.get(68).renderType!==0,v=e.get(69),y=e.get(106),C=e.get(84),S=e.get(73),x=e.get(104),E=x.verticalScrollbarSize,L=x.verticalHasArrows,T=x.arrowSize,D=x.horizontalScrollbarSize,I=e.get(43),N=e.get(111)!=="never";let P=e.get(66);I&&N&&(P+=16);let O=0;if(m){const xe=Math.max(o,v);O=Math.round(xe*l)}let V=0;_&&(V=r*t.glyphMarginDecorationLaneCount);let z=0,K=z+V,H=K+O,U=H+P;const j=n-V-O-P;let W=!1,X=!1,ee=-1;d==="inherit"&&p?(W=!0,X=!0):f==="on"||f==="bounded"?X=!0:f==="wordWrapColumn"&&(ee=g);const le=Jb._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,paddingTop:C.top,paddingBottom:C.bottom,minimap:S,verticalScrollbarWidth:E,viewLineCount:u,remainingWidth:j,isViewportWrapping:X},t.memory||new ope);le.renderMinimap!==0&&le.minimapLeft===0&&(z+=le.minimapWidth,K+=le.minimapWidth,H+=le.minimapWidth,U+=le.minimapWidth);const fe=j-le.minimapWidth,be=Math.max(1,Math.floor((fe-E-2)/a)),ye=L?T:0;return X&&(ee=Math.max(1,be),f==="bounded"&&(ee=Math.min(ee,g))),{width:n,height:s,glyphMarginLeft:z,glyphMarginWidth:V,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:K,lineNumbersWidth:O,decorationsLeft:H,decorationsWidth:P,contentLeft:U,contentWidth:fe,minimap:le,viewportColumn:be,isWordWrapMinified:W,isViewportWrapping:X,wrappingColumn:ee,verticalScrollbarWidth:E,horizontalScrollbarHeight:D,overviewRuler:{top:ye,width:E,height:s-2*ye,right:0}}}}class _ze extends Ei{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[k("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),k("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:k("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Zi(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}}var If;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(If||(If={}));class vze extends Ei{constructor(){const e={enabled:If.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[If.Off,If.OnCode,If.On],default:e.enabled,enumDescriptions:[k("editor.lightbulb.enabled.off","Disable the code action menu."),k("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),k("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:k("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Zi(e.enabled,this.defaultValue.enabled,[If.Off,If.OnCode,If.On])}}}class yze extends Ei{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:k("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:k("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:k("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:k("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),maxLineCount:ci.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Zi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:_t(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class bze extends Ei{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:k("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[k("editor.inlayHints.on","Inlay hints are enabled"),k("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Tn?"Ctrl+Option":"Ctrl+Alt"),k("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Tn?"Ctrl+Option":"Ctrl+Alt"),k("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:k("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:k("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:k("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Zi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:ci.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Do.string(t.fontFamily,this.defaultValue.fontFamily),padding:_t(t.padding,this.defaultValue.padding)}}}class wze extends Ei{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):ci.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?ci.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class Cze extends Pl{constructor(){super(67,"lineHeight",Wl.lineHeight,e=>Pl.clamp(e,0,150),{markdownDescription:k("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Sze extends Ei{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:k("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:k("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[k("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),k("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),k("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:k("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:k("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:k("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:k("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:k("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:k("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:k("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:k("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:k("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:k("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),autohide:_t(t.autohide,this.defaultValue.autohide),size:Zi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Zi(t.side,this.defaultValue.side,["right","left"]),showSlider:Zi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:_t(t.renderCharacters,this.defaultValue.renderCharacters),scale:ci.clampedInt(t.scale,1,1,3),maxColumn:ci.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:_t(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:_t(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Pl.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Pl.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function xze(i){return i==="ctrlCmd"?Tn?"metaKey":"ctrlKey":"altKey"}class Eze extends Ei{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:k("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:k("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:ci.clampedInt(t.top,0,0,1e3),bottom:ci.clampedInt(t.bottom,0,0,1e3)}}}class Lze extends Ei{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:k("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:k("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),cycle:_t(t.cycle,this.defaultValue.cycle)}}}class Tze extends XT{constructor(){super(144)}compute(e,t,n){return e.pixelRatio}}class kze extends Ei{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class Mze extends Ei{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[k("on","Quick suggestions show inside the suggest widget"),k("inline","Quick suggestions show as ghost text"),k("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:k("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:k("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:k("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:k("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:s}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=Zi(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=Zi(n,this.defaultValue.comments,r),typeof s=="boolean"?l=s?"on":"off":l=Zi(s,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class Dze extends Ei{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[k("lineNumbers.off","Line numbers are not rendered."),k("lineNumbers.on","Line numbers are rendered as absolute number."),k("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),k("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:k("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function JN(i){const e=i.get(99);return e==="editable"?i.get(92):e!=="on"}class Aze extends Ei{constructor(){const e=[],t={type:"number",description:k("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:k("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:k("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:ci.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:ci.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}class Ize extends Ei{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function xte(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let Nze=class extends Ei{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[k("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),k("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),k("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:k("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[k("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),k("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),k("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:k("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:k("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:k("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:k("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:k("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=ci.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=ci.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:ci.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:xte(t.vertical,this.defaultValue.vertical),horizontal:xte(t.horizontal,this.defaultValue.horizontal),useShadows:_t(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:_t(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:_t(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:_t(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:_t(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:ci.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:ci.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:_t(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:_t(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Bu="inUntrustedWorkspace",p_={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Rze extends Ei{constructor(){const e={nonBasicASCII:Bu,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Bu,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[p_.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bu],default:e.nonBasicASCII,description:k("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[p_.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:k("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[p_.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:k("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[p_.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bu],default:e.includeComments,description:k("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[p_.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Bu],default:e.includeStrings,description:k("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[p_.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:k("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[p_.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:k("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(il(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(il(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const s=super.applyUpdate(e,t);return n?new zE(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:ew(t.nonBasicASCII,Bu,[!0,!1,Bu]),invisibleCharacters:_t(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:_t(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:ew(t.includeComments,Bu,[!0,!1,Bu]),includeStrings:ew(t.includeStrings,Bu,[!0,!1,Bu]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[s,r]of Object.entries(e))r===!0&&(n[s]=!0);return n}}class Pze extends Ei{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:k("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[k("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),k("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),k("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:k("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:k("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:k("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),mode:Zi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Zi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:_t(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:_t(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Do.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Oze extends Ei{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:k("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[k("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),k("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),k("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:k("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:k("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),showToolbar:Zi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Do.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:_t(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Fze extends Ei{constructor(){const e={enabled:oo.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:oo.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:k("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:k("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:_t(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class Bze extends Ei{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[k("editor.guides.bracketPairs.true","Enables bracket pair guides."),k("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),k("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:k("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[k("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),k("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),k("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:k("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:k("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:k("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[k("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),k("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),k("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:k("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ew(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ew(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:_t(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:_t(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:ew(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function ew(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class zze extends Ei{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[k("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),k("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:k("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:k("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:k("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:k("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[k("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),k("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),k("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),k("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:k("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:k("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:k("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:k("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:k("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:k("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:k("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:k("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:k("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Zi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:_t(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:_t(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:_t(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:_t(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Zi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:_t(t.showIcons,this.defaultValue.showIcons),showStatusBar:_t(t.showStatusBar,this.defaultValue.showStatusBar),preview:_t(t.preview,this.defaultValue.preview),previewMode:Zi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:_t(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:_t(t.showMethods,this.defaultValue.showMethods),showFunctions:_t(t.showFunctions,this.defaultValue.showFunctions),showConstructors:_t(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:_t(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:_t(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:_t(t.showFields,this.defaultValue.showFields),showVariables:_t(t.showVariables,this.defaultValue.showVariables),showClasses:_t(t.showClasses,this.defaultValue.showClasses),showStructs:_t(t.showStructs,this.defaultValue.showStructs),showInterfaces:_t(t.showInterfaces,this.defaultValue.showInterfaces),showModules:_t(t.showModules,this.defaultValue.showModules),showProperties:_t(t.showProperties,this.defaultValue.showProperties),showEvents:_t(t.showEvents,this.defaultValue.showEvents),showOperators:_t(t.showOperators,this.defaultValue.showOperators),showUnits:_t(t.showUnits,this.defaultValue.showUnits),showValues:_t(t.showValues,this.defaultValue.showValues),showConstants:_t(t.showConstants,this.defaultValue.showConstants),showEnums:_t(t.showEnums,this.defaultValue.showEnums),showEnumMembers:_t(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:_t(t.showKeywords,this.defaultValue.showKeywords),showWords:_t(t.showWords,this.defaultValue.showWords),showColors:_t(t.showColors,this.defaultValue.showColors),showFiles:_t(t.showFiles,this.defaultValue.showFiles),showReferences:_t(t.showReferences,this.defaultValue.showReferences),showFolders:_t(t.showFolders,this.defaultValue.showFolders),showTypeParameters:_t(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:_t(t.showSnippets,this.defaultValue.showSnippets),showUsers:_t(t.showUsers,this.defaultValue.showUsers),showIssues:_t(t.showIssues,this.defaultValue.showIssues)}}}class Uze extends Ei{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:k("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:k("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:_t(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:_t(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Vze extends Ei{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:k("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:k("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}}class Wze extends Ei{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[k("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),k("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),k("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),k("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:k("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}}class Hze extends XT{constructor(){super(147)}compute(e,t,n){const s=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class $ze extends Ei{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:k("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:k("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[k("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),k("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),showDropSelector:Zi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Gze extends Ei{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:k("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:k("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[k("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),k("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:_t(t.enabled,this.defaultValue.enabled),showPasteSelector:Zi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const jze="Consolas, 'Courier New', monospace",Kze="Menlo, Monaco, 'Courier New', monospace",qze="'Droid Sans Mono', 'monospace', monospace",Wl={fontFamily:Tn?Kze:ka?qze:jze,fontWeight:"normal",fontSize:Tn?12:14,lineHeight:0,letterSpacing:0},ob=[];function We(i){return ob[i.id]=i,i}const Jv={acceptSuggestionOnCommitCharacter:We(new yn(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:k("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:We(new Gi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",k("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:k("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:We(new oze),accessibilityPageSize:We(new ci(3,"accessibilityPageSize",10,1,1073741824,{description:k("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:We(new Do(4,"ariaLabel",k("editorViewAccessibleLabel","Editor content"))),ariaRequired:We(new yn(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:We(new yn(8,"screenReaderAnnounceInlineSuggestion",!0,{description:k("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:We(new Gi(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",k("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),k("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:k("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:We(new Gi(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",k("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),k("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:k("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:We(new Gi(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",k("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:k("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:We(new Gi(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",k("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:k("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:We(new Gi(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",k("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),k("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:k("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:We(new rD(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],rze,{enumDescriptions:[k("editor.autoIndent.none","The editor will not insert indentation automatically."),k("editor.autoIndent.keep","The editor will keep the current line's indentation."),k("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),k("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),k("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:k("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:We(new yn(13,"automaticLayout",!1)),autoSurround:We(new Gi(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[k("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),k("editor.autoSurround.quotes","Surround with quotes but not brackets."),k("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:k("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:We(new Fze),bracketPairGuides:We(new Bze),stickyTabStops:We(new yn(117,"stickyTabStops",!1,{description:k("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:We(new yn(17,"codeLens",!0,{description:k("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:We(new Do(18,"codeLensFontFamily","",{description:k("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:We(new ci(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:k("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:We(new yn(20,"colorDecorators",!0,{description:k("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:We(new Gi(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[k("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),k("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),k("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:k("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:We(new ci(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:k("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:We(new yn(22,"columnSelection",!1,{description:k("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:We(new aze),contextmenu:We(new yn(24,"contextmenu",!0)),copyWithSyntaxHighlighting:We(new yn(25,"copyWithSyntaxHighlighting",!0,{description:k("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:We(new rD(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],lze,{description:k("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:We(new Gi(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[k("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),k("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),k("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:k("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:We(new rD(28,"cursorStyle",Dr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],cze,{description:k("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:We(new ci(29,"cursorSurroundingLines",0,0,1073741824,{description:k("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:We(new Gi(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[k("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),k("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:k("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:We(new ci(31,"cursorWidth",0,0,1073741824,{markdownDescription:k("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:We(new yn(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:We(new yn(33,"disableMonospaceOptimizations",!1)),domReadOnly:We(new yn(34,"domReadOnly",!1)),dragAndDrop:We(new yn(35,"dragAndDrop",!0,{description:k("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:We(new hze),dropIntoEditor:We(new $ze),stickyScroll:We(new yze),experimentalWhitespaceRendering:We(new Gi(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[k("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),k("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),k("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:k("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:We(new Do(39,"extraEditorClassName","")),fastScrollSensitivity:We(new Pl(40,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:k("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:We(new dze),fixedOverflowWidgets:We(new yn(42,"fixedOverflowWidgets",!1)),folding:We(new yn(43,"folding",!0,{description:k("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:We(new Gi(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[k("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),k("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:k("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:We(new yn(45,"foldingHighlight",!0,{description:k("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:We(new yn(46,"foldingImportsByDefault",!1,{description:k("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:We(new ci(47,"foldingMaximumRegions",5e3,10,65e3,{description:k("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:We(new yn(48,"unfoldOnClickAfterEndOfLine",!1,{description:k("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:We(new Do(49,"fontFamily",Wl.fontFamily,{description:k("fontFamily","Controls the font family.")})),fontInfo:We(new fze),fontLigatures2:We(new xv),fontSize:We(new gze),fontWeight:We(new U9),fontVariations:We(new p2),formatOnPaste:We(new yn(55,"formatOnPaste",!1,{description:k("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:We(new yn(56,"formatOnType",!1,{description:k("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:We(new yn(57,"glyphMargin",!0,{description:k("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:We(new pze),hideCursorInOverviewRuler:We(new yn(59,"hideCursorInOverviewRuler",!1,{description:k("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:We(new mze),inDiffEditor:We(new yn(61,"inDiffEditor",!1)),letterSpacing:We(new Pl(64,"letterSpacing",Wl.letterSpacing,i=>Pl.clamp(i,-5,20),{description:k("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:We(new vze),lineDecorationsWidth:We(new wze),lineHeight:We(new Cze),lineNumbers:We(new Dze),lineNumbersMinChars:We(new ci(69,"lineNumbersMinChars",5,1,300)),linkedEditing:We(new yn(70,"linkedEditing",!1,{description:k("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:We(new yn(71,"links",!0,{description:k("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:We(new Gi(72,"matchBrackets","always",["always","near","never"],{description:k("matchBrackets","Highlight matching brackets.")})),minimap:We(new Sze),mouseStyle:We(new Gi(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:We(new Pl(75,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:k("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:We(new yn(76,"mouseWheelZoom",!1,{markdownDescription:Tn?k("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):k("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:We(new yn(77,"multiCursorMergeOverlapping",!0,{description:k("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:We(new rD(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],xze,{markdownEnumDescriptions:[k("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),k("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:k({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:We(new Gi(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[k("multiCursorPaste.spread","Each cursor pastes a single line of the text."),k("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:k("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:We(new ci(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:k("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:We(new Gi(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[k("occurrencesHighlight.off","Does not highlight occurrences."),k("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),k("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:k("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:We(new yn(82,"overviewRulerBorder",!0,{description:k("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:We(new ci(83,"overviewRulerLanes",3,0,3)),padding:We(new Eze),pasteAs:We(new Gze),parameterHints:We(new Lze),peekWidgetDefaultFocus:We(new Gi(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[k("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),k("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:k("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:We(new kze),definitionLinkOpensInPeek:We(new yn(89,"definitionLinkOpensInPeek",!1,{description:k("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:We(new Mze),quickSuggestionsDelay:We(new ci(91,"quickSuggestionsDelay",10,0,1073741824,{description:k("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:We(new yn(92,"readOnly",!1)),readOnlyMessage:We(new Ize),renameOnType:We(new yn(94,"renameOnType",!1,{description:k("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:k("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:We(new yn(95,"renderControlCharacters",!0,{description:k("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:We(new Gi(96,"renderFinalNewline",ka?"dimmed":"on",["off","on","dimmed"],{description:k("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:We(new Gi(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",k("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:k("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:We(new yn(98,"renderLineHighlightOnlyWhenFocus",!1,{description:k("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:We(new Gi(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:We(new Gi(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",k("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),k("renderWhitespace.selection","Render whitespace characters only on selected text."),k("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:k("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:We(new ci(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:We(new yn(102,"roundedSelection",!0,{description:k("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:We(new Aze),scrollbar:We(new Nze),scrollBeyondLastColumn:We(new ci(105,"scrollBeyondLastColumn",4,0,1073741824,{description:k("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:We(new yn(106,"scrollBeyondLastLine",!0,{description:k("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:We(new yn(107,"scrollPredominantAxis",!0,{description:k("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:We(new yn(108,"selectionClipboard",!0,{description:k("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ka})),selectionHighlight:We(new yn(109,"selectionHighlight",!0,{description:k("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:We(new yn(110,"selectOnLineNumbers",!0)),showFoldingControls:We(new Gi(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[k("showFoldingControls.always","Always show the folding controls."),k("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),k("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:k("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:We(new yn(112,"showUnused",!0,{description:k("showUnused","Controls fading out of unused code.")})),showDeprecated:We(new yn(141,"showDeprecated",!0,{description:k("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:We(new bze),snippetSuggestions:We(new Gi(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[k("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),k("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),k("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),k("snippetSuggestions.none","Do not show snippet suggestions.")],description:k("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:We(new Uze),smoothScrolling:We(new yn(115,"smoothScrolling",!1,{description:k("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:We(new ci(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:We(new zze),inlineSuggest:We(new Pze),inlineEdit:We(new Oze),inlineCompletionsAccessibilityVerbose:We(new yn(150,"inlineCompletionsAccessibilityVerbose",!1,{description:k("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:We(new ci(120,"suggestFontSize",0,0,1e3,{markdownDescription:k("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:We(new ci(121,"suggestLineHeight",0,0,1e3,{markdownDescription:k("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:We(new yn(122,"suggestOnTriggerCharacters",!0,{description:k("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:We(new Gi(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[k("suggestSelection.first","Always select the first suggestion."),k("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),k("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:k("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:We(new Gi(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[k("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),k("tabCompletion.off","Disable tab completions."),k("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:k("tabCompletion","Enables tab completions.")})),tabIndex:We(new ci(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:We(new Rze),unusualLineTerminators:We(new Gi(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[k("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),k("unusualLineTerminators.off","Unusual line terminators are ignored."),k("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:k("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:We(new yn(128,"useShadowDOM",!0)),useTabStops:We(new yn(129,"useTabStops",!0,{description:k("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:We(new Gi(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[k("wordBreak.normal","Use the default line break rule."),k("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:k("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:We(new Vze),wordSeparators:We(new Do(132,"wordSeparators",ipe,{description:k("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:We(new Gi(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[k("wordWrap.off","Lines will never wrap."),k("wordWrap.on","Lines will wrap at the viewport width."),k({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),k({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:k({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:We(new Do(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:We(new Do(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:We(new ci(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:k({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:We(new Gi(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:We(new Gi(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:We(new uze),defaultColorDecorators:We(new yn(148,"defaultColorDecorators",!1,{markdownDescription:k("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:We(new Tze),tabFocusMode:We(new yn(145,"tabFocusMode",!1,{markdownDescription:k("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:We(new Jb),wrappingInfo:We(new Hze),wrappingIndent:We(new Wze),wrappingStrategy:We(new _ze)};class Xze{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?$w.isErrorNoTelemetry(e)?new $w(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const ape=new Xze;function di(i){YT(i)||ape.onUnexpectedError(i)}function Nj(i){YT(i)||ape.onUnexpectedExternalError(i)}function Ete(i){if(i instanceof Error){const{name:e,message:t}=i,n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:$w.isErrorNoTelemetry(i)}}return i}const eR="Canceled";function YT(i){return i instanceof ZT?!0:i instanceof Error&&i.name===eR&&i.message===eR}class ZT extends Error{constructor(){super(eR),this.name=this.message}}function Yze(){const i=new Error(eR);return i.name=i.message,i}function t4(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function Rj(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class Zze extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class $w extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof $w)return e;const t=new $w;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Qn extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Qn.prototype)}}function Gw(i,e){const t=this;let n=!1,s;return function(){return n||(n=!0,s=i.apply(t,arguments)),s}}function lpe(i){return typeof i=="object"&&i!==null&&typeof i.dispose=="function"&&i.dispose.length===0}function Jr(i){if(Fn.is(i)){const e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Id(...i){return en(()=>Jr(i))}function en(i){return{dispose:Gw(()=>{i()})}}const fO=class fO{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Jr(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?fO.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};fO.DISABLE_DISPOSED_WARNING=!1;let Tt=fO;const nZ=class nZ{constructor(){this._store=new Tt,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};nZ.None=Object.freeze({dispose(){}});let Be=nZ;class Ig{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class Qze{constructor(e){this.object=e}dispose(){}}class Pj{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Jr(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(s=this._store.get(e))==null||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Jze=globalThis.performance&&typeof globalThis.performance.now=="function";class e1{static create(e){return new e1(e)}constructor(e){this._now=Jze&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Qe;(function(i){i.None=()=>Be.None;function e(P,O){return d(P,()=>{},0,void 0,!0,void 0,O)}i.defer=e;function t(P){return(O,V=null,z)=>{let K=!1,H;return H=P(U=>{if(!K)return H?H.dispose():K=!0,O.call(V,U)},null,z),K&&H.dispose(),H}}i.once=t;function n(P,O){return i.once(i.filter(P,O))}i.onceIf=n;function s(P,O,V){return u((z,K=null,H)=>P(U=>z.call(K,O(U)),null,H),V)}i.map=s;function r(P,O,V){return u((z,K=null,H)=>P(U=>{O(U),z.call(K,U)},null,H),V)}i.forEach=r;function o(P,O,V){return u((z,K=null,H)=>P(U=>O(U)&&z.call(K,U),null,H),V)}i.filter=o;function a(P){return P}i.signal=a;function l(...P){return(O,V=null,z)=>{const K=Id(...P.map(H=>H(U=>O.call(V,U))));return h(K,z)}}i.any=l;function c(P,O,V,z){let K=V;return s(P,H=>(K=O(K,H),K),z)}i.reduce=c;function u(P,O){let V;const z={onWillAddFirstListener(){V=P(K.fire,K)},onDidRemoveLastListener(){V==null||V.dispose()}},K=new me(z);return O==null||O.add(K),K.event}function h(P,O){return O instanceof Array?O.push(P):O&&O.add(P),P}function d(P,O,V=100,z=!1,K=!1,H,U){let j,W,X,ee=0,le;const fe={leakWarningThreshold:H,onWillAddFirstListener(){j=P(ye=>{ee++,W=O(W,ye),z&&!X&&(be.fire(W),W=void 0),le=()=>{const xe=W;W=void 0,X=void 0,(!z||ee>1)&&be.fire(xe),ee=0},typeof V=="number"?(clearTimeout(X),X=setTimeout(le,V)):X===void 0&&(X=0,queueMicrotask(le))})},onWillRemoveListener(){K&&ee>0&&(le==null||le())},onDidRemoveLastListener(){le=void 0,j.dispose()}},be=new me(fe);return U==null||U.add(be),be.event}i.debounce=d;function f(P,O=0,V){return i.debounce(P,(z,K)=>z?(z.push(K),z):[K],O,void 0,!0,void 0,V)}i.accumulate=f;function g(P,O=(z,K)=>z===K,V){let z=!0,K;return o(P,H=>{const U=z||!O(H,K);return z=!1,K=H,U},V)}i.latch=g;function p(P,O,V){return[i.filter(P,O,V),i.filter(P,z=>!O(z),V)]}i.split=p;function _(P,O=!1,V=[],z){let K=V.slice(),H=P(W=>{K?K.push(W):j.fire(W)});z&&z.add(H);const U=()=>{K==null||K.forEach(W=>j.fire(W)),K=null},j=new me({onWillAddFirstListener(){H||(H=P(W=>j.fire(W)),z&&z.add(H))},onDidAddFirstListener(){K&&(O?setTimeout(U):U())},onDidRemoveLastListener(){H&&H.dispose(),H=null}});return z&&z.add(j),j.event}i.buffer=_;function m(P,O){return(z,K,H)=>{const U=O(new y);return P(function(j){const W=U.evaluate(j);W!==v&&z.call(K,W)},void 0,H)}}i.chain=m;const v=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(O){return this.steps.push(O),this}forEach(O){return this.steps.push(V=>(O(V),V)),this}filter(O){return this.steps.push(V=>O(V)?V:v),this}reduce(O,V){let z=V;return this.steps.push(K=>(z=O(z,K),z)),this}latch(O=(V,z)=>V===z){let V=!0,z;return this.steps.push(K=>{const H=V||!O(K,z);return V=!1,z=K,H?K:v}),this}evaluate(O){for(const V of this.steps)if(O=V(O),O===v)break;return O}}function C(P,O,V=z=>z){const z=(...j)=>U.fire(V(...j)),K=()=>P.on(O,z),H=()=>P.removeListener(O,z),U=new me({onWillAddFirstListener:K,onDidRemoveLastListener:H});return U.event}i.fromNodeEventEmitter=C;function S(P,O,V=z=>z){const z=(...j)=>U.fire(V(...j)),K=()=>P.addEventListener(O,z),H=()=>P.removeEventListener(O,z),U=new me({onWillAddFirstListener:K,onDidRemoveLastListener:H});return U.event}i.fromDOMEventEmitter=S;function x(P){return new Promise(O=>t(P)(O))}i.toPromise=x;function E(P){const O=new me;return P.then(V=>{O.fire(V)},()=>{O.fire(void 0)}).finally(()=>{O.dispose()}),O.event}i.fromPromise=E;function L(P,O){return P(V=>O.fire(V))}i.forward=L;function T(P,O,V){return O(V),P(z=>O(z))}i.runAndSubscribe=T;class D{constructor(O,V){this._observable=O,this._counter=0,this._hasChanged=!1;const z={onWillAddFirstListener:()=>{O.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{O.removeObserver(this)}};this.emitter=new me(z),V&&V.add(this.emitter)}beginUpdate(O){this._counter++}handlePossibleChange(O){}handleChange(O,V){this._hasChanged=!0}endUpdate(O){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function I(P,O){return new D(P,O).emitter.event}i.fromObservable=I;function N(P){return(O,V,z)=>{let K=0,H=!1;const U={beginUpdate(){K++},endUpdate(){K--,K===0&&(P.reportChanges(),H&&(H=!1,O.call(V)))},handlePossibleChange(){},handleChange(){H=!0}};P.addObserver(U),P.reportChanges();const j={dispose(){P.removeObserver(U)}};return z instanceof Tt?z.add(j):Array.isArray(z)&&z.push(j),j}}i.fromObservableLight=N})(Qe||(Qe={}));const Rb=class Rb{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Rb._idPool++}`,Rb.all.add(this)}start(e){this._stopWatch=new e1,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};Rb.all=new Set,Rb._idPool=0;let V9=Rb,eUe=-1;const gO=class gO{constructor(e,t,n=(gO._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=n,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new tUe(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[n,s]of this._stacks)(!e||t<s)&&(e=[n,s],t=s);return e}};gO._idPool=1;let W9=gO;class Oj{static create(){const e=new Error;return new Oj(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class tUe extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class nUe extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class zB{constructor(e){this.value=e}}const iUe=2;let me=class{constructor(e){var t,n,s,r;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new W9((e==null?void 0:e.onListenerError)??di,((n=this._options)==null?void 0:n.leakWarningThreshold)??eUe):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new V9(this._options._profName):void 0,this._deliveryQueue=(r=this._options)==null?void 0:r.deliveryQueue}dispose(){var e,t,n,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||n.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,n)=>{var a,l,c,u,h;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const d=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(d);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],g=new nUe(`${d}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||di)(g),Be.None}if(this._disposed)return Be.None;t&&(e=e.bind(t));const s=new zB(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=Oj.create(),r=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof zB?(this._deliveryQueue??(this._deliveryQueue=new cpe),this._listeners=[this._listeners,s]):this._listeners.push(s):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=s,(h=(u=this._options)==null?void 0:u.onDidAddFirstListener)==null||h.call(u,this)),this._size++;const o=en(()=>{r==null||r(),this._removeListener(s)});return n instanceof Tt?n.add(o):Array.isArray(n)&&n.push(o),o}),this._event}_removeListener(e){var r,o,a,l;if((o=(r=this._options)==null?void 0:r.onWillRemoveListener)==null||o.call(r,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;const s=this._deliveryQueue.current===this;if(this._size*iUe<=t.length){let c=0;for(let u=0;u<t.length;u++)t[u]?t[c++]=t[u]:s&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var s;if(!e)return;const n=((s=this._options)==null?void 0:s.onListenerError)||di;if(!n){e.value(t);return}try{e.value(t)}catch(r){n(r)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,s,r;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof zB)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(r=this._perfMon)==null||r.stop()}hasListeners(){return this._size>0}};const sUe=()=>new cpe;class cpe{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class m2 extends me{constructor(e){super(e),this._isPaused=0,this._eventQueue=new tl,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class upe extends m2{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class rUe extends me{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class oUe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new me({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),en(Gw(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class QT{constructor(){this.data=[]}wrapEvent(e,t,n){return(s,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(r,a)):s.call(r,a);return}const c=l;if(!c){s.call(r,t(n,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=n?c.items.reduce(t,n):c.items.reduce(t)),s.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(s=>s()),n}}class Lte{constructor(){this.listening=!1,this.inputEvent=Qe.None,this.inputEventListener=Be.None,this.emitter=new me({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const hpe=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Cu;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof CI?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qe.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:hpe})})(Cu||(Cu={}));class CI{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?hpe:(this._emitter||(this._emitter=new me),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let HC=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new CI),this._token}cancel(){this._token?this._token instanceof CI&&this._token.cancel():this._token=Cu.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof CI&&this._token.dispose():this._token=Cu.None}};class Fj{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const SI=new Fj,H9=new Fj,$9=new Fj,dpe=new Array(230),aUe=Object.create(null),lUe=Object.create(null),Bj=[];for(let i=0;i<=193;i++)Bj[i]=-1;(function(){const i="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",131,"VK_F20",i,i],[1,118,"F21",79,"F21",132,"VK_F21",i,i],[1,119,"F22",80,"F22",133,"VK_F22",i,i],[1,120,"F23",81,"F23",134,"VK_F23",i,i],[1,121,"F24",82,"F24",135,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(const s of e){const[r,o,a,l,c,u,h,d,f]=s;if(n[o]||(n[o]=!0,aUe[a]=o,lUe[a.toLowerCase()]=o,r&&(Bj[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);SI.define(l,c),H9.define(l,d||c),$9.define(l,f||d||c)}u&&(dpe[u]=l)}})();var qf;(function(i){function e(a){return SI.keyCodeToStr(a)}i.toString=e;function t(a){return SI.strToKeyCode(a)}i.fromString=t;function n(a){return H9.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return $9.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return H9.strToKeyCode(a)||$9.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return SI.keyCodeToStr(a)}i.toElectronAccelerator=o})(qf||(qf={}));function cUe(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}var Tte={};let tw;const UB=globalThis.vscode;var Bue;if(typeof UB<"u"&&typeof UB.process<"u"){const i=UB.process;tw={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"&&typeof((Bue=process==null?void 0:process.versions)==null?void 0:Bue.node)=="string"?tw={get platform(){return process.platform},get arch(){return process.arch},get env(){return Tte},cwd(){return Tte.VSCODE_CWD||process.cwd()}}:tw={get platform(){return rl?"win32":Tn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const tR=tw.cwd,G9=tw.env,uUe=tw.platform,hUe=65,dUe=97,fUe=90,gUe=122,um=46,Eo=47,Cl=92,lp=58,pUe=63;class fpe extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function mUe(i,e){if(i===null||typeof i!="object")throw new fpe(e,"Object",i)}function hr(i,e){if(typeof i!="string")throw new fpe(e,"string",i)}const Ug=uUe==="win32";function Xn(i){return i===Eo||i===Cl}function j9(i){return i===Eo}function cp(i){return i>=hUe&&i<=fUe||i>=dUe&&i<=gUe}function nR(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=Eo}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==um||s.charCodeAt(s.length-2)!==um){if(s.length>2){const u=s.lastIndexOf(t);u===-1?(s="",r=0):(s=s.slice(0,u),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,c)}`:s=i.slice(o+1,c),r=c-o-1;o=c,a=0}else l===um&&a!==-1?++a:a=-1}return s}function _Ue(i){return i?`${i[0]==="."?"":"."}${i}`:""}function gpe(i,e){mUe(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${_Ue(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const xa={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],hr(r,`paths[${s}]`),r.length===0)continue}else e.length===0?r=tR():(r=G9[`=${e}`]||tR(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===Cl)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const u=r.charCodeAt(0);if(o===1)Xn(u)&&(a=1,c=!0);else if(Xn(u))if(c=!0,Xn(r.charCodeAt(1))){let h=2,d=h;for(;h<o&&!Xn(r.charCodeAt(h));)h++;if(h<o&&h!==d){const f=r.slice(d,h);for(d=h;h<o&&Xn(r.charCodeAt(h));)h++;if(h<o&&h!==d){for(d=h;h<o&&!Xn(r.charCodeAt(h));)h++;(h===o||h!==d)&&(l=`\\\\${f}\\${r.slice(d,h)}`,a=h)}}}else a=1;else cp(u)&&r.charCodeAt(1)===lp&&(l=r.slice(0,2),a=2,o>2&&Xn(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=nR(t,!n,"\\",Xn),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){hr(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return j9(r)?"\\":i;if(Xn(r))if(s=!0,Xn(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xn(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&Xn(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xn(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else cp(r)&&i.charCodeAt(1)===lp&&(n=i.slice(0,2),t=2,e>2&&Xn(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?nR(i.slice(t),!s,"\\",Xn):"";return o.length===0&&!s&&(o="."),o.length>0&&Xn(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){hr(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return Xn(t)||e>2&&cp(t)&&i.charCodeAt(1)===lp&&Xn(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];hr(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&Xn(t.charCodeAt(0))){++s;const r=t.length;r>1&&Xn(t.charCodeAt(1))&&(++s,r>2&&(Xn(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&Xn(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return xa.normalize(e)},relative(i,e){if(hr(i,"from"),hr(e,"to"),i===e)return"";const t=xa.resolve(i),n=xa.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===Cl;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===Cl;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===Cl;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Cl;)l--;const c=l-a,u=o<c?o:c;let h=-1,d=0;for(;d<u;d++){const g=i.charCodeAt(s+d);if(g!==e.charCodeAt(a+d))break;g===Cl&&(h=d)}if(d!==u){if(h===-1)return n}else{if(c>u){if(e.charCodeAt(a+d)===Cl)return n.slice(a+d+1);if(d===2)return n.slice(a+d)}o>u&&(i.charCodeAt(s+d)===Cl?h=d:d===2&&(h=3)),h===-1&&(h=0)}let f="";for(d=s+h+1;d<=r;++d)(d===r||i.charCodeAt(d)===Cl)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Cl&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const e=xa.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===Cl){if(e.charCodeAt(1)===Cl){const t=e.charCodeAt(2);if(t!==pUe&&t!==um)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(cp(e.charCodeAt(0))&&e.charCodeAt(1)===lp&&e.charCodeAt(2)===Cl)return`\\\\?\\${e}`;return i},dirname(i){hr(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return Xn(s)?i:".";if(Xn(s)){if(t=n=1,Xn(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Xn(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Xn(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Xn(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else cp(s)&&i.charCodeAt(1)===lp&&(t=e>2&&Xn(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(Xn(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&hr(e,"suffix"),hr(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&cp(i.charCodeAt(0))&&i.charCodeAt(1)===lp&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(Xn(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(Xn(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){hr(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===lp&&cp(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(Xn(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===um?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:gpe.bind(null,"\\"),parse(i){hr(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return Xn(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Xn(s)){if(n=1,Xn(i.charCodeAt(1))){let h=2,d=h;for(;h<t&&!Xn(i.charCodeAt(h));)h++;if(h<t&&h!==d){for(d=h;h<t&&Xn(i.charCodeAt(h));)h++;if(h<t&&h!==d){for(d=h;h<t&&!Xn(i.charCodeAt(h));)h++;h===t?n=h:h!==d&&(n=h+1)}}}}else if(cp(s)&&i.charCodeAt(1)===lp){if(t<=2)return e.root=e.dir=i,e;if(n=2,Xn(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,c=i.length-1,u=0;for(;c>=n;--c){if(s=i.charCodeAt(c),Xn(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===um?r===-1?r=c:u!==1&&(u=1):r!==-1&&(u=-1)}return a!==-1&&(r===-1||u===0||u===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},vUe=(()=>{if(Ug){const i=/\\/g;return()=>{const e=tR().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>tR()})(),vs={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:vUe();hr(s,`paths[${n}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Eo)}return e=nR(e,!t,"/",j9),t?`/${e}`:e.length>0?e:"."},normalize(i){if(hr(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Eo,t=i.charCodeAt(i.length-1)===Eo;return i=nR(i,!e,"/",j9),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return hr(i,"path"),i.length>0&&i.charCodeAt(0)===Eo},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];hr(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":vs.normalize(e)},relative(i,e){if(hr(i,"from"),hr(e,"to"),i===e||(i=vs.resolve(i),e=vs.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const h=i.charCodeAt(t+c);if(h!==e.charCodeAt(r+c))break;h===Eo&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===Eo)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(i.charCodeAt(t+c)===Eo?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===Eo)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(hr(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Eo;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===Eo){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&hr(e,"ext"),hr(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===Eo){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===Eo){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){hr(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===Eo){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===um?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:gpe.bind(null,"/"),parse(i){hr(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Eo;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const u=i.charCodeAt(l);if(u===Eo){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),u===um?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const u=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(u,o):(e.name=i.slice(u,s),e.base=i.slice(u,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};vs.win32=xa.win32=xa;vs.posix=xa.posix=vs;const ppe=Ug?xa.normalize:vs.normalize,yUe=Ug?xa.join:vs.join,bUe=Ug?xa.resolve:vs.resolve,wUe=Ug?xa.relative:vs.relative,CUe=Ug?xa.dirname:vs.dirname,mpe=Ug?xa.basename:vs.basename,SUe=Ug?xa.extname:vs.extname,hm=Ug?xa.sep:vs.sep,xUe=/^\w[\w\d+.-]*$/,EUe=/^\//,LUe=/^\/\//;function TUe(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!xUe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!EUe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(LUe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function kUe(i,e){return!i&&!e?"file":i}function MUe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==sh&&(e=sh+e):e=sh;break}return e}const gs="",sh="/",DUe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class fn{static isUri(e){return e instanceof fn?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||gs,this.authority=e.authority||gs,this.path=e.path||gs,this.query=e.query||gs,this.fragment=e.fragment||gs):(this.scheme=kUe(e,o),this.authority=t||gs,this.path=MUe(this.scheme,n||gs),this.query=s||gs,this.fragment=r||gs,TUe(this,o))}get fsPath(){return iR(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=gs),n===void 0?n=this.authority:n===null&&(n=gs),s===void 0?s=this.path:s===null&&(s=gs),r===void 0?r=this.query:r===null&&(r=gs),o===void 0?o=this.fragment:o===null&&(o=gs),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new $1(t,n,s,r,o)}static parse(e,t=!1){const n=DUe.exec(e);return n?new $1(n[2]||gs,oD(n[4]||gs),oD(n[5]||gs),oD(n[7]||gs),oD(n[9]||gs),t):new $1(gs,gs,gs,gs,gs)}static file(e){let t=gs;if(rl&&(e=e.replace(/\\/g,sh)),e[0]===sh&&e[1]===sh){const n=e.indexOf(sh,2);n===-1?(t=e.substring(2),e=sh):(t=e.substring(2,n),e=e.substring(n)||sh)}return new $1("file",t,e,gs,gs)}static from(e,t){return new $1(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return rl&&e.scheme==="file"?n=fn.file(xa.join(iR(e,!0),...t)).path:n=vs.join(e.path,...t),e.with({path:n})}toString(e=!1){return K9(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof fn)return e;{const t=new $1(e);return t._formatted=e.external??null,t._fsPath=e._sep===_pe?e.fsPath??null:null,t}}else return e}}const _pe=rl?1:void 0;let $1=class extends fn{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=iR(this,!1)),this._fsPath}toString(e=!1){return e?K9(this,!0):(this._formatted||(this._formatted=K9(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=_pe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const vpe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function kte(i,e,t){let n,s=-1;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n!==void 0&&(n+=i.charAt(r));else{n===void 0&&(n=i.substr(0,r));const a=vpe[o];a!==void 0?(s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n+=a):s===-1&&(s=r)}}return s!==-1&&(n+=encodeURIComponent(i.substring(s))),n!==void 0?n:i}function AUe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=vpe[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function iR(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,rl&&(t=t.replace(/\//g,"\\")),t}function K9(i,e){const t=e?AUe:kte;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=sh,n+=sh),r){let c=r.indexOf("@");if(c!==-1){const u=r.substr(0,c);r=r.substr(c+1),c=u.lastIndexOf(":"),c===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,c),!1,!1),n+=":",n+=t(u.substr(c+1),!1,!0)),n+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?n+=t(r,!1,!0):(n+=t(r.substr(0,c),!1,!0),n+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:kte(l,!1,!1)),n}function ype(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+ype(i.substr(3)):i}}const Mte=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function oD(i){return i.match(Mte)?i.replace(Mte,e=>ype(e)):i}let Se=class $_{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new $_(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return $_.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return $_.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return $_.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){const r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new $_(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new $_(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},de=class Er{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return Er.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Er.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Er.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Er.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Er.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new Er(n,s,r,o)}intersectRanges(e){return Er.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>c?(r=c,o=u):r===c&&(o=Math.min(o,u)),n>r||n===r&&s>o?null:new Er(n,s,r,o)}equalsRange(e){return Er.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Er.getEndPosition(this)}static getEndPosition(e){return new Se(e.endLineNumber,e.endColumn)}getStartPosition(){return Er.getStartPosition(this)}static getStartPosition(e){return new Se(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Er(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Er(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Er.collapseToStart(this)}static collapseToStart(e){return new Er(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Er.collapseToEnd(this)}static collapseToEnd(e){return new Er(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Er(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Er(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Er(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const h=e.endColumn|0,d=t.endColumn|0;return h-d}return c-u}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},gi=class Kc extends de{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Kc.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Kc(this.startLineNumber,this.startColumn,e,t):new Kc(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Se(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Se(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Kc(e,t,this.endLineNumber,this.endColumn):new Kc(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Kc(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Kc(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Kc(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Kc(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===0?new Kc(e,t,n,s):new Kc(n,s,e,t)}};const q9=Object.create(null);function F(i,e){if(Vl(e)){const t=q9[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return q9[i]=e,{id:i}}function bpe(){return q9}const IUe={add:F("add",6e4),plus:F("plus",6e4),gistNew:F("gist-new",6e4),repoCreate:F("repo-create",6e4),lightbulb:F("lightbulb",60001),lightBulb:F("light-bulb",60001),repo:F("repo",60002),repoDelete:F("repo-delete",60002),gistFork:F("gist-fork",60003),repoForked:F("repo-forked",60003),gitPullRequest:F("git-pull-request",60004),gitPullRequestAbandoned:F("git-pull-request-abandoned",60004),recordKeys:F("record-keys",60005),keyboard:F("keyboard",60005),tag:F("tag",60006),gitPullRequestLabel:F("git-pull-request-label",60006),tagAdd:F("tag-add",60006),tagRemove:F("tag-remove",60006),person:F("person",60007),personFollow:F("person-follow",60007),personOutline:F("person-outline",60007),personFilled:F("person-filled",60007),gitBranch:F("git-branch",60008),gitBranchCreate:F("git-branch-create",60008),gitBranchDelete:F("git-branch-delete",60008),sourceControl:F("source-control",60008),mirror:F("mirror",60009),mirrorPublic:F("mirror-public",60009),star:F("star",60010),starAdd:F("star-add",60010),starDelete:F("star-delete",60010),starEmpty:F("star-empty",60010),comment:F("comment",60011),commentAdd:F("comment-add",60011),alert:F("alert",60012),warning:F("warning",60012),search:F("search",60013),searchSave:F("search-save",60013),logOut:F("log-out",60014),signOut:F("sign-out",60014),logIn:F("log-in",60015),signIn:F("sign-in",60015),eye:F("eye",60016),eyeUnwatch:F("eye-unwatch",60016),eyeWatch:F("eye-watch",60016),circleFilled:F("circle-filled",60017),primitiveDot:F("primitive-dot",60017),closeDirty:F("close-dirty",60017),debugBreakpoint:F("debug-breakpoint",60017),debugBreakpointDisabled:F("debug-breakpoint-disabled",60017),debugHint:F("debug-hint",60017),terminalDecorationSuccess:F("terminal-decoration-success",60017),primitiveSquare:F("primitive-square",60018),edit:F("edit",60019),pencil:F("pencil",60019),info:F("info",60020),issueOpened:F("issue-opened",60020),gistPrivate:F("gist-private",60021),gitForkPrivate:F("git-fork-private",60021),lock:F("lock",60021),mirrorPrivate:F("mirror-private",60021),close:F("close",60022),removeClose:F("remove-close",60022),x:F("x",60022),repoSync:F("repo-sync",60023),sync:F("sync",60023),clone:F("clone",60024),desktopDownload:F("desktop-download",60024),beaker:F("beaker",60025),microscope:F("microscope",60025),vm:F("vm",60026),deviceDesktop:F("device-desktop",60026),file:F("file",60027),fileText:F("file-text",60027),more:F("more",60028),ellipsis:F("ellipsis",60028),kebabHorizontal:F("kebab-horizontal",60028),mailReply:F("mail-reply",60029),reply:F("reply",60029),organization:F("organization",60030),organizationFilled:F("organization-filled",60030),organizationOutline:F("organization-outline",60030),newFile:F("new-file",60031),fileAdd:F("file-add",60031),newFolder:F("new-folder",60032),fileDirectoryCreate:F("file-directory-create",60032),trash:F("trash",60033),trashcan:F("trashcan",60033),history:F("history",60034),clock:F("clock",60034),folder:F("folder",60035),fileDirectory:F("file-directory",60035),symbolFolder:F("symbol-folder",60035),logoGithub:F("logo-github",60036),markGithub:F("mark-github",60036),github:F("github",60036),terminal:F("terminal",60037),console:F("console",60037),repl:F("repl",60037),zap:F("zap",60038),symbolEvent:F("symbol-event",60038),error:F("error",60039),stop:F("stop",60039),variable:F("variable",60040),symbolVariable:F("symbol-variable",60040),array:F("array",60042),symbolArray:F("symbol-array",60042),symbolModule:F("symbol-module",60043),symbolPackage:F("symbol-package",60043),symbolNamespace:F("symbol-namespace",60043),symbolObject:F("symbol-object",60043),symbolMethod:F("symbol-method",60044),symbolFunction:F("symbol-function",60044),symbolConstructor:F("symbol-constructor",60044),symbolBoolean:F("symbol-boolean",60047),symbolNull:F("symbol-null",60047),symbolNumeric:F("symbol-numeric",60048),symbolNumber:F("symbol-number",60048),symbolStructure:F("symbol-structure",60049),symbolStruct:F("symbol-struct",60049),symbolParameter:F("symbol-parameter",60050),symbolTypeParameter:F("symbol-type-parameter",60050),symbolKey:F("symbol-key",60051),symbolText:F("symbol-text",60051),symbolReference:F("symbol-reference",60052),goToFile:F("go-to-file",60052),symbolEnum:F("symbol-enum",60053),symbolValue:F("symbol-value",60053),symbolRuler:F("symbol-ruler",60054),symbolUnit:F("symbol-unit",60054),activateBreakpoints:F("activate-breakpoints",60055),archive:F("archive",60056),arrowBoth:F("arrow-both",60057),arrowDown:F("arrow-down",60058),arrowLeft:F("arrow-left",60059),arrowRight:F("arrow-right",60060),arrowSmallDown:F("arrow-small-down",60061),arrowSmallLeft:F("arrow-small-left",60062),arrowSmallRight:F("arrow-small-right",60063),arrowSmallUp:F("arrow-small-up",60064),arrowUp:F("arrow-up",60065),bell:F("bell",60066),bold:F("bold",60067),book:F("book",60068),bookmark:F("bookmark",60069),debugBreakpointConditionalUnverified:F("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:F("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:F("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:F("debug-breakpoint-data-unverified",60072),debugBreakpointData:F("debug-breakpoint-data",60073),debugBreakpointDataDisabled:F("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:F("debug-breakpoint-log-unverified",60074),debugBreakpointLog:F("debug-breakpoint-log",60075),debugBreakpointLogDisabled:F("debug-breakpoint-log-disabled",60075),briefcase:F("briefcase",60076),broadcast:F("broadcast",60077),browser:F("browser",60078),bug:F("bug",60079),calendar:F("calendar",60080),caseSensitive:F("case-sensitive",60081),check:F("check",60082),checklist:F("checklist",60083),chevronDown:F("chevron-down",60084),chevronLeft:F("chevron-left",60085),chevronRight:F("chevron-right",60086),chevronUp:F("chevron-up",60087),chromeClose:F("chrome-close",60088),chromeMaximize:F("chrome-maximize",60089),chromeMinimize:F("chrome-minimize",60090),chromeRestore:F("chrome-restore",60091),circleOutline:F("circle-outline",60092),circle:F("circle",60092),debugBreakpointUnverified:F("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:F("terminal-decoration-incomplete",60092),circleSlash:F("circle-slash",60093),circuitBoard:F("circuit-board",60094),clearAll:F("clear-all",60095),clippy:F("clippy",60096),closeAll:F("close-all",60097),cloudDownload:F("cloud-download",60098),cloudUpload:F("cloud-upload",60099),code:F("code",60100),collapseAll:F("collapse-all",60101),colorMode:F("color-mode",60102),commentDiscussion:F("comment-discussion",60103),creditCard:F("credit-card",60105),dash:F("dash",60108),dashboard:F("dashboard",60109),database:F("database",60110),debugContinue:F("debug-continue",60111),debugDisconnect:F("debug-disconnect",60112),debugPause:F("debug-pause",60113),debugRestart:F("debug-restart",60114),debugStart:F("debug-start",60115),debugStepInto:F("debug-step-into",60116),debugStepOut:F("debug-step-out",60117),debugStepOver:F("debug-step-over",60118),debugStop:F("debug-stop",60119),debug:F("debug",60120),deviceCameraVideo:F("device-camera-video",60121),deviceCamera:F("device-camera",60122),deviceMobile:F("device-mobile",60123),diffAdded:F("diff-added",60124),diffIgnored:F("diff-ignored",60125),diffModified:F("diff-modified",60126),diffRemoved:F("diff-removed",60127),diffRenamed:F("diff-renamed",60128),diff:F("diff",60129),diffSidebyside:F("diff-sidebyside",60129),discard:F("discard",60130),editorLayout:F("editor-layout",60131),emptyWindow:F("empty-window",60132),exclude:F("exclude",60133),extensions:F("extensions",60134),eyeClosed:F("eye-closed",60135),fileBinary:F("file-binary",60136),fileCode:F("file-code",60137),fileMedia:F("file-media",60138),filePdf:F("file-pdf",60139),fileSubmodule:F("file-submodule",60140),fileSymlinkDirectory:F("file-symlink-directory",60141),fileSymlinkFile:F("file-symlink-file",60142),fileZip:F("file-zip",60143),files:F("files",60144),filter:F("filter",60145),flame:F("flame",60146),foldDown:F("fold-down",60147),foldUp:F("fold-up",60148),fold:F("fold",60149),folderActive:F("folder-active",60150),folderOpened:F("folder-opened",60151),gear:F("gear",60152),gift:F("gift",60153),gistSecret:F("gist-secret",60154),gist:F("gist",60155),gitCommit:F("git-commit",60156),gitCompare:F("git-compare",60157),compareChanges:F("compare-changes",60157),gitMerge:F("git-merge",60158),githubAction:F("github-action",60159),githubAlt:F("github-alt",60160),globe:F("globe",60161),grabber:F("grabber",60162),graph:F("graph",60163),gripper:F("gripper",60164),heart:F("heart",60165),home:F("home",60166),horizontalRule:F("horizontal-rule",60167),hubot:F("hubot",60168),inbox:F("inbox",60169),issueReopened:F("issue-reopened",60171),issues:F("issues",60172),italic:F("italic",60173),jersey:F("jersey",60174),json:F("json",60175),kebabVertical:F("kebab-vertical",60176),key:F("key",60177),law:F("law",60178),lightbulbAutofix:F("lightbulb-autofix",60179),linkExternal:F("link-external",60180),link:F("link",60181),listOrdered:F("list-ordered",60182),listUnordered:F("list-unordered",60183),liveShare:F("live-share",60184),loading:F("loading",60185),location:F("location",60186),mailRead:F("mail-read",60187),mail:F("mail",60188),markdown:F("markdown",60189),megaphone:F("megaphone",60190),mention:F("mention",60191),milestone:F("milestone",60192),gitPullRequestMilestone:F("git-pull-request-milestone",60192),mortarBoard:F("mortar-board",60193),move:F("move",60194),multipleWindows:F("multiple-windows",60195),mute:F("mute",60196),noNewline:F("no-newline",60197),note:F("note",60198),octoface:F("octoface",60199),openPreview:F("open-preview",60200),package:F("package",60201),paintcan:F("paintcan",60202),pin:F("pin",60203),play:F("play",60204),run:F("run",60204),plug:F("plug",60205),preserveCase:F("preserve-case",60206),preview:F("preview",60207),project:F("project",60208),pulse:F("pulse",60209),question:F("question",60210),quote:F("quote",60211),radioTower:F("radio-tower",60212),reactions:F("reactions",60213),references:F("references",60214),refresh:F("refresh",60215),regex:F("regex",60216),remoteExplorer:F("remote-explorer",60217),remote:F("remote",60218),remove:F("remove",60219),replaceAll:F("replace-all",60220),replace:F("replace",60221),repoClone:F("repo-clone",60222),repoForcePush:F("repo-force-push",60223),repoPull:F("repo-pull",60224),repoPush:F("repo-push",60225),report:F("report",60226),requestChanges:F("request-changes",60227),rocket:F("rocket",60228),rootFolderOpened:F("root-folder-opened",60229),rootFolder:F("root-folder",60230),rss:F("rss",60231),ruby:F("ruby",60232),saveAll:F("save-all",60233),saveAs:F("save-as",60234),save:F("save",60235),screenFull:F("screen-full",60236),screenNormal:F("screen-normal",60237),searchStop:F("search-stop",60238),server:F("server",60240),settingsGear:F("settings-gear",60241),settings:F("settings",60242),shield:F("shield",60243),smiley:F("smiley",60244),sortPrecedence:F("sort-precedence",60245),splitHorizontal:F("split-horizontal",60246),splitVertical:F("split-vertical",60247),squirrel:F("squirrel",60248),starFull:F("star-full",60249),starHalf:F("star-half",60250),symbolClass:F("symbol-class",60251),symbolColor:F("symbol-color",60252),symbolConstant:F("symbol-constant",60253),symbolEnumMember:F("symbol-enum-member",60254),symbolField:F("symbol-field",60255),symbolFile:F("symbol-file",60256),symbolInterface:F("symbol-interface",60257),symbolKeyword:F("symbol-keyword",60258),symbolMisc:F("symbol-misc",60259),symbolOperator:F("symbol-operator",60260),symbolProperty:F("symbol-property",60261),wrench:F("wrench",60261),wrenchSubaction:F("wrench-subaction",60261),symbolSnippet:F("symbol-snippet",60262),tasklist:F("tasklist",60263),telescope:F("telescope",60264),textSize:F("text-size",60265),threeBars:F("three-bars",60266),thumbsdown:F("thumbsdown",60267),thumbsup:F("thumbsup",60268),tools:F("tools",60269),triangleDown:F("triangle-down",60270),triangleLeft:F("triangle-left",60271),triangleRight:F("triangle-right",60272),triangleUp:F("triangle-up",60273),twitter:F("twitter",60274),unfold:F("unfold",60275),unlock:F("unlock",60276),unmute:F("unmute",60277),unverified:F("unverified",60278),verified:F("verified",60279),versions:F("versions",60280),vmActive:F("vm-active",60281),vmOutline:F("vm-outline",60282),vmRunning:F("vm-running",60283),watch:F("watch",60284),whitespace:F("whitespace",60285),wholeWord:F("whole-word",60286),window:F("window",60287),wordWrap:F("word-wrap",60288),zoomIn:F("zoom-in",60289),zoomOut:F("zoom-out",60290),listFilter:F("list-filter",60291),listFlat:F("list-flat",60292),listSelection:F("list-selection",60293),selection:F("selection",60293),listTree:F("list-tree",60294),debugBreakpointFunctionUnverified:F("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:F("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:F("debug-breakpoint-function-disabled",60296),debugStackframeActive:F("debug-stackframe-active",60297),circleSmallFilled:F("circle-small-filled",60298),debugStackframeDot:F("debug-stackframe-dot",60298),terminalDecorationMark:F("terminal-decoration-mark",60298),debugStackframe:F("debug-stackframe",60299),debugStackframeFocused:F("debug-stackframe-focused",60299),debugBreakpointUnsupported:F("debug-breakpoint-unsupported",60300),symbolString:F("symbol-string",60301),debugReverseContinue:F("debug-reverse-continue",60302),debugStepBack:F("debug-step-back",60303),debugRestartFrame:F("debug-restart-frame",60304),debugAlt:F("debug-alt",60305),callIncoming:F("call-incoming",60306),callOutgoing:F("call-outgoing",60307),menu:F("menu",60308),expandAll:F("expand-all",60309),feedback:F("feedback",60310),gitPullRequestReviewer:F("git-pull-request-reviewer",60310),groupByRefType:F("group-by-ref-type",60311),ungroupByRefType:F("ungroup-by-ref-type",60312),account:F("account",60313),gitPullRequestAssignee:F("git-pull-request-assignee",60313),bellDot:F("bell-dot",60314),debugConsole:F("debug-console",60315),library:F("library",60316),output:F("output",60317),runAll:F("run-all",60318),syncIgnored:F("sync-ignored",60319),pinned:F("pinned",60320),githubInverted:F("github-inverted",60321),serverProcess:F("server-process",60322),serverEnvironment:F("server-environment",60323),pass:F("pass",60324),issueClosed:F("issue-closed",60324),stopCircle:F("stop-circle",60325),playCircle:F("play-circle",60326),record:F("record",60327),debugAltSmall:F("debug-alt-small",60328),vmConnect:F("vm-connect",60329),cloud:F("cloud",60330),merge:F("merge",60331),export:F("export",60332),graphLeft:F("graph-left",60333),magnet:F("magnet",60334),notebook:F("notebook",60335),redo:F("redo",60336),checkAll:F("check-all",60337),pinnedDirty:F("pinned-dirty",60338),passFilled:F("pass-filled",60339),circleLargeFilled:F("circle-large-filled",60340),circleLarge:F("circle-large",60341),circleLargeOutline:F("circle-large-outline",60341),combine:F("combine",60342),gather:F("gather",60342),table:F("table",60343),variableGroup:F("variable-group",60344),typeHierarchy:F("type-hierarchy",60345),typeHierarchySub:F("type-hierarchy-sub",60346),typeHierarchySuper:F("type-hierarchy-super",60347),gitPullRequestCreate:F("git-pull-request-create",60348),runAbove:F("run-above",60349),runBelow:F("run-below",60350),notebookTemplate:F("notebook-template",60351),debugRerun:F("debug-rerun",60352),workspaceTrusted:F("workspace-trusted",60353),workspaceUntrusted:F("workspace-untrusted",60354),workspaceUnknown:F("workspace-unknown",60355),terminalCmd:F("terminal-cmd",60356),terminalDebian:F("terminal-debian",60357),terminalLinux:F("terminal-linux",60358),terminalPowershell:F("terminal-powershell",60359),terminalTmux:F("terminal-tmux",60360),terminalUbuntu:F("terminal-ubuntu",60361),terminalBash:F("terminal-bash",60362),arrowSwap:F("arrow-swap",60363),copy:F("copy",60364),personAdd:F("person-add",60365),filterFilled:F("filter-filled",60366),wand:F("wand",60367),debugLineByLine:F("debug-line-by-line",60368),inspect:F("inspect",60369),layers:F("layers",60370),layersDot:F("layers-dot",60371),layersActive:F("layers-active",60372),compass:F("compass",60373),compassDot:F("compass-dot",60374),compassActive:F("compass-active",60375),azure:F("azure",60376),issueDraft:F("issue-draft",60377),gitPullRequestClosed:F("git-pull-request-closed",60378),gitPullRequestDraft:F("git-pull-request-draft",60379),debugAll:F("debug-all",60380),debugCoverage:F("debug-coverage",60381),runErrors:F("run-errors",60382),folderLibrary:F("folder-library",60383),debugContinueSmall:F("debug-continue-small",60384),beakerStop:F("beaker-stop",60385),graphLine:F("graph-line",60386),graphScatter:F("graph-scatter",60387),pieChart:F("pie-chart",60388),bracket:F("bracket",60175),bracketDot:F("bracket-dot",60389),bracketError:F("bracket-error",60390),lockSmall:F("lock-small",60391),azureDevops:F("azure-devops",60392),verifiedFilled:F("verified-filled",60393),newline:F("newline",60394),layout:F("layout",60395),layoutActivitybarLeft:F("layout-activitybar-left",60396),layoutActivitybarRight:F("layout-activitybar-right",60397),layoutPanelLeft:F("layout-panel-left",60398),layoutPanelCenter:F("layout-panel-center",60399),layoutPanelJustify:F("layout-panel-justify",60400),layoutPanelRight:F("layout-panel-right",60401),layoutPanel:F("layout-panel",60402),layoutSidebarLeft:F("layout-sidebar-left",60403),layoutSidebarRight:F("layout-sidebar-right",60404),layoutStatusbar:F("layout-statusbar",60405),layoutMenubar:F("layout-menubar",60406),layoutCentered:F("layout-centered",60407),target:F("target",60408),indent:F("indent",60409),recordSmall:F("record-small",60410),errorSmall:F("error-small",60411),terminalDecorationError:F("terminal-decoration-error",60411),arrowCircleDown:F("arrow-circle-down",60412),arrowCircleLeft:F("arrow-circle-left",60413),arrowCircleRight:F("arrow-circle-right",60414),arrowCircleUp:F("arrow-circle-up",60415),layoutSidebarRightOff:F("layout-sidebar-right-off",60416),layoutPanelOff:F("layout-panel-off",60417),layoutSidebarLeftOff:F("layout-sidebar-left-off",60418),blank:F("blank",60419),heartFilled:F("heart-filled",60420),map:F("map",60421),mapHorizontal:F("map-horizontal",60421),foldHorizontal:F("fold-horizontal",60421),mapFilled:F("map-filled",60422),mapHorizontalFilled:F("map-horizontal-filled",60422),foldHorizontalFilled:F("fold-horizontal-filled",60422),circleSmall:F("circle-small",60423),bellSlash:F("bell-slash",60424),bellSlashDot:F("bell-slash-dot",60425),commentUnresolved:F("comment-unresolved",60426),gitPullRequestGoToChanges:F("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:F("git-pull-request-new-changes",60428),searchFuzzy:F("search-fuzzy",60429),commentDraft:F("comment-draft",60430),send:F("send",60431),sparkle:F("sparkle",60432),insert:F("insert",60433),mic:F("mic",60434),thumbsdownFilled:F("thumbsdown-filled",60435),thumbsupFilled:F("thumbsup-filled",60436),coffee:F("coffee",60437),snake:F("snake",60438),game:F("game",60439),vr:F("vr",60440),chip:F("chip",60441),piano:F("piano",60442),music:F("music",60443),micFilled:F("mic-filled",60444),repoFetch:F("repo-fetch",60445),copilot:F("copilot",60446),lightbulbSparkle:F("lightbulb-sparkle",60447),robot:F("robot",60448),sparkleFilled:F("sparkle-filled",60449),diffSingle:F("diff-single",60450),diffMultiple:F("diff-multiple",60451),surroundWith:F("surround-with",60452),share:F("share",60453),gitStash:F("git-stash",60454),gitStashApply:F("git-stash-apply",60455),gitStashPop:F("git-stash-pop",60456),vscode:F("vscode",60457),vscodeInsiders:F("vscode-insiders",60458),codeOss:F("code-oss",60459),runCoverage:F("run-coverage",60460),runAllCoverage:F("run-all-coverage",60461),coverage:F("coverage",60462),githubProject:F("github-project",60463),mapVertical:F("map-vertical",60464),foldVertical:F("fold-vertical",60464),mapVerticalFilled:F("map-vertical-filled",60465),foldVerticalFilled:F("fold-vertical-filled",60465),goToSearch:F("go-to-search",60466),percentage:F("percentage",60467),sortPercentage:F("sort-percentage",60467),attach:F("attach",60468)},NUe={dialogError:F("dialog-error","error"),dialogWarning:F("dialog-warning","warning"),dialogInfo:F("dialog-info","info"),dialogClose:F("dialog-close","close"),treeItemExpanded:F("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:F("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:F("tree-filter-on-type-off","list-selection"),treeFilterClear:F("tree-filter-clear","close"),treeItemLoading:F("tree-item-loading","loading"),menuSelection:F("menu-selection","check"),menuSubmenu:F("menu-submenu","chevron-right"),menuBarMore:F("menubar-more","more"),scrollbarButtonLeft:F("scrollbar-button-left","triangle-left"),scrollbarButtonRight:F("scrollbar-button-right","triangle-right"),scrollbarButtonUp:F("scrollbar-button-up","triangle-up"),scrollbarButtonDown:F("scrollbar-button-down","triangle-down"),toolBarMore:F("toolbar-more","more"),quickInputBack:F("quick-input-back","arrow-left"),dropDownButton:F("drop-down-button",60084),symbolCustomColor:F("symbol-customcolor",60252),exportIcon:F("export",60332),workspaceUnspecified:F("workspace-unspecified",60355),newLine:F("newline",60394),thumbsDownFilled:F("thumbsdown-filled",60435),thumbsUpFilled:F("thumbsup-filled",60436),gitFetch:F("git-fetch",60445),lightbulbSparkleAutofix:F("lightbulb-sparkle-autofix",60447),debugBreakpointPending:F("debug-breakpoint-pending",60377)},yt={...IUe,...NUe};let wpe=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new me,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),en(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var s;(s=this._factories.get(e))==null||s.dispose();const n=new RUe(this,e,t);return this._factories.set(e,n),en(()=>{const r=this._factories.get(e);!r||r!==n||(this._factories.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class RUe extends Be{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let _2=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class zj{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class n4{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var Dte;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(Dte||(Dte={}));var Ate;(function(i){const e=new Map;e.set(0,yt.symbolMethod),e.set(1,yt.symbolFunction),e.set(2,yt.symbolConstructor),e.set(3,yt.symbolField),e.set(4,yt.symbolVariable),e.set(5,yt.symbolClass),e.set(6,yt.symbolStruct),e.set(7,yt.symbolInterface),e.set(8,yt.symbolModule),e.set(9,yt.symbolProperty),e.set(10,yt.symbolEvent),e.set(11,yt.symbolOperator),e.set(12,yt.symbolUnit),e.set(13,yt.symbolValue),e.set(15,yt.symbolEnum),e.set(14,yt.symbolConstant),e.set(15,yt.symbolEnum),e.set(16,yt.symbolEnumMember),e.set(17,yt.symbolKeyword),e.set(27,yt.symbolSnippet),e.set(18,yt.symbolText),e.set(19,yt.symbolColor),e.set(20,yt.symbolFile),e.set(21,yt.symbolReference),e.set(22,yt.symbolCustomColor),e.set(23,yt.symbolFolder),e.set(24,yt.symbolTypeParameter),e.set(25,yt.account),e.set(26,yt.issues);function t(r){let o=e.get(r);return o||(console.info("No codicon found for CompletionItemKind "+r),o=yt.symbolProperty),o}i.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function s(r,o){let a=n.get(r);return typeof a>"u"&&!o&&(a=9),a}i.fromString=s})(Ate||(Ate={}));var Ite;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Ite||(Ite={}));class PUe{constructor(e,t,n,s){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=s}equals(e){return de.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var Nte;(function(i){i[i.Automatic=0]="Automatic",i[i.PasteAs=1]="PasteAs"})(Nte||(Nte={}));var Rte;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(Rte||(Rte={}));var Pte;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(Pte||(Pte={}));k("Array","array"),k("Boolean","boolean"),k("Class","class"),k("Constant","constant"),k("Constructor","constructor"),k("Enum","enumeration"),k("EnumMember","enumeration member"),k("Event","event"),k("Field","field"),k("File","file"),k("Function","function"),k("Interface","interface"),k("Key","key"),k("Method","method"),k("Module","module"),k("Namespace","namespace"),k("Null","null"),k("Number","number"),k("Object","object"),k("Operator","operator"),k("Package","package"),k("Property","property"),k("String","string"),k("Struct","struct"),k("TypeParameter","type parameter"),k("Variable","variable");var X9;(function(i){const e=new Map;e.set(0,yt.symbolFile),e.set(1,yt.symbolModule),e.set(2,yt.symbolNamespace),e.set(3,yt.symbolPackage),e.set(4,yt.symbolClass),e.set(5,yt.symbolMethod),e.set(6,yt.symbolProperty),e.set(7,yt.symbolField),e.set(8,yt.symbolConstructor),e.set(9,yt.symbolEnum),e.set(10,yt.symbolInterface),e.set(11,yt.symbolFunction),e.set(12,yt.symbolVariable),e.set(13,yt.symbolConstant),e.set(14,yt.symbolString),e.set(15,yt.symbolNumber),e.set(16,yt.symbolBoolean),e.set(17,yt.symbolArray),e.set(18,yt.symbolObject),e.set(19,yt.symbolKey),e.set(20,yt.symbolNull),e.set(21,yt.symbolEnumMember),e.set(22,yt.symbolStruct),e.set(23,yt.symbolEvent),e.set(24,yt.symbolOperator),e.set(25,yt.symbolTypeParameter);function t(n){let s=e.get(n);return s||(console.info("No codicon found for SymbolKind "+n),s=yt.symbolProperty),s}i.toIcon=t})(X9||(X9={}));const Yc=class Yc{static fromValue(e){switch(e){case"comment":return Yc.Comment;case"imports":return Yc.Imports;case"region":return Yc.Region}return new Yc(e)}constructor(e){this.value=e}};Yc.Comment=new Yc("comment"),Yc.Imports=new Yc("imports"),Yc.Region=new Yc("region");let Y9=Yc;var Ote;(function(i){i[i.AIGenerated=1]="AIGenerated"})(Ote||(Ote={}));var Fte;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Fte||(Fte={}));var Bte;(function(i){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e})(Bte||(Bte={}));var zte;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(zte||(zte={}));class OUe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Es=new wpe,Z9=new wpe;var Ute;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Ute||(Ute={}));var Q9;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(Q9||(Q9={}));var J9;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(J9||(J9={}));var ez;(function(i){i[i.None=0]="None",i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(ez||(ez={}));var tz;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(tz||(tz={}));var nz;(function(i){i[i.Deprecated=1]="Deprecated"})(nz||(nz={}));var iz;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(iz||(iz={}));var sz;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(sz||(sz={}));var rz;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(rz||(rz={}));var oz;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(oz||(oz={}));var az;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(az||(az={}));var lz;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(lz||(lz={}));var cz;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.ariaRequired=5]="ariaRequired",i[i.autoClosingBrackets=6]="autoClosingBrackets",i[i.autoClosingComments=7]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=9]="autoClosingDelete",i[i.autoClosingOvertype=10]="autoClosingOvertype",i[i.autoClosingQuotes=11]="autoClosingQuotes",i[i.autoIndent=12]="autoIndent",i[i.automaticLayout=13]="automaticLayout",i[i.autoSurround=14]="autoSurround",i[i.bracketPairColorization=15]="bracketPairColorization",i[i.guides=16]="guides",i[i.codeLens=17]="codeLens",i[i.codeLensFontFamily=18]="codeLensFontFamily",i[i.codeLensFontSize=19]="codeLensFontSize",i[i.colorDecorators=20]="colorDecorators",i[i.colorDecoratorsLimit=21]="colorDecoratorsLimit",i[i.columnSelection=22]="columnSelection",i[i.comments=23]="comments",i[i.contextmenu=24]="contextmenu",i[i.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",i[i.cursorBlinking=26]="cursorBlinking",i[i.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",i[i.cursorStyle=28]="cursorStyle",i[i.cursorSurroundingLines=29]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",i[i.cursorWidth=31]="cursorWidth",i[i.disableLayerHinting=32]="disableLayerHinting",i[i.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",i[i.domReadOnly=34]="domReadOnly",i[i.dragAndDrop=35]="dragAndDrop",i[i.dropIntoEditor=36]="dropIntoEditor",i[i.emptySelectionClipboard=37]="emptySelectionClipboard",i[i.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",i[i.extraEditorClassName=39]="extraEditorClassName",i[i.fastScrollSensitivity=40]="fastScrollSensitivity",i[i.find=41]="find",i[i.fixedOverflowWidgets=42]="fixedOverflowWidgets",i[i.folding=43]="folding",i[i.foldingStrategy=44]="foldingStrategy",i[i.foldingHighlight=45]="foldingHighlight",i[i.foldingImportsByDefault=46]="foldingImportsByDefault",i[i.foldingMaximumRegions=47]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=49]="fontFamily",i[i.fontInfo=50]="fontInfo",i[i.fontLigatures=51]="fontLigatures",i[i.fontSize=52]="fontSize",i[i.fontWeight=53]="fontWeight",i[i.fontVariations=54]="fontVariations",i[i.formatOnPaste=55]="formatOnPaste",i[i.formatOnType=56]="formatOnType",i[i.glyphMargin=57]="glyphMargin",i[i.gotoLocation=58]="gotoLocation",i[i.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",i[i.hover=60]="hover",i[i.inDiffEditor=61]="inDiffEditor",i[i.inlineSuggest=62]="inlineSuggest",i[i.inlineEdit=63]="inlineEdit",i[i.letterSpacing=64]="letterSpacing",i[i.lightbulb=65]="lightbulb",i[i.lineDecorationsWidth=66]="lineDecorationsWidth",i[i.lineHeight=67]="lineHeight",i[i.lineNumbers=68]="lineNumbers",i[i.lineNumbersMinChars=69]="lineNumbersMinChars",i[i.linkedEditing=70]="linkedEditing",i[i.links=71]="links",i[i.matchBrackets=72]="matchBrackets",i[i.minimap=73]="minimap",i[i.mouseStyle=74]="mouseStyle",i[i.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=76]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",i[i.multiCursorModifier=78]="multiCursorModifier",i[i.multiCursorPaste=79]="multiCursorPaste",i[i.multiCursorLimit=80]="multiCursorLimit",i[i.occurrencesHighlight=81]="occurrencesHighlight",i[i.overviewRulerBorder=82]="overviewRulerBorder",i[i.overviewRulerLanes=83]="overviewRulerLanes",i[i.padding=84]="padding",i[i.pasteAs=85]="pasteAs",i[i.parameterHints=86]="parameterHints",i[i.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",i[i.placeholder=88]="placeholder",i[i.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",i[i.quickSuggestions=90]="quickSuggestions",i[i.quickSuggestionsDelay=91]="quickSuggestionsDelay",i[i.readOnly=92]="readOnly",i[i.readOnlyMessage=93]="readOnlyMessage",i[i.renameOnType=94]="renameOnType",i[i.renderControlCharacters=95]="renderControlCharacters",i[i.renderFinalNewline=96]="renderFinalNewline",i[i.renderLineHighlight=97]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=99]="renderValidationDecorations",i[i.renderWhitespace=100]="renderWhitespace",i[i.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",i[i.roundedSelection=102]="roundedSelection",i[i.rulers=103]="rulers",i[i.scrollbar=104]="scrollbar",i[i.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=106]="scrollBeyondLastLine",i[i.scrollPredominantAxis=107]="scrollPredominantAxis",i[i.selectionClipboard=108]="selectionClipboard",i[i.selectionHighlight=109]="selectionHighlight",i[i.selectOnLineNumbers=110]="selectOnLineNumbers",i[i.showFoldingControls=111]="showFoldingControls",i[i.showUnused=112]="showUnused",i[i.snippetSuggestions=113]="snippetSuggestions",i[i.smartSelect=114]="smartSelect",i[i.smoothScrolling=115]="smoothScrolling",i[i.stickyScroll=116]="stickyScroll",i[i.stickyTabStops=117]="stickyTabStops",i[i.stopRenderingLineAfter=118]="stopRenderingLineAfter",i[i.suggest=119]="suggest",i[i.suggestFontSize=120]="suggestFontSize",i[i.suggestLineHeight=121]="suggestLineHeight",i[i.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",i[i.suggestSelection=123]="suggestSelection",i[i.tabCompletion=124]="tabCompletion",i[i.tabIndex=125]="tabIndex",i[i.unicodeHighlighting=126]="unicodeHighlighting",i[i.unusualLineTerminators=127]="unusualLineTerminators",i[i.useShadowDOM=128]="useShadowDOM",i[i.useTabStops=129]="useTabStops",i[i.wordBreak=130]="wordBreak",i[i.wordSegmenterLocales=131]="wordSegmenterLocales",i[i.wordSeparators=132]="wordSeparators",i[i.wordWrap=133]="wordWrap",i[i.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=136]="wordWrapColumn",i[i.wordWrapOverride1=137]="wordWrapOverride1",i[i.wordWrapOverride2=138]="wordWrapOverride2",i[i.wrappingIndent=139]="wrappingIndent",i[i.wrappingStrategy=140]="wrappingStrategy",i[i.showDeprecated=141]="showDeprecated",i[i.inlayHints=142]="inlayHints",i[i.editorClassName=143]="editorClassName",i[i.pixelRatio=144]="pixelRatio",i[i.tabFocusMode=145]="tabFocusMode",i[i.layoutInfo=146]="layoutInfo",i[i.wrappingInfo=147]="wrappingInfo",i[i.defaultColorDecorators=148]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(cz||(cz={}));var uz;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(uz||(uz={}));var hz;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(hz||(hz={}));var dz;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(dz||(dz={}));var fz;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(fz||(fz={}));var gz;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(gz||(gz={}));var pz;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(pz||(pz={}));var mz;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(mz||(mz={}));var _z;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(_z||(_z={}));var vz;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(vz||(vz={}));var yz;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE"})(yz||(yz={}));var bz;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(bz||(bz={}));var wz;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(wz||(wz={}));var Cz;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Cz||(Cz={}));var Sz;(function(i){i[i.Normal=1]="Normal",i[i.Underlined=2]="Underlined"})(Sz||(Sz={}));var xz;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(xz||(xz={}));var Ez;(function(i){i[i.AIGenerated=1]="AIGenerated"})(Ez||(Ez={}));var Lz;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Lz||(Lz={}));var Tz;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(Tz||(Tz={}));var kz;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(kz||(kz={}));var Mz;(function(i){i[i.Word=0]="Word",i[i.Line=1]="Line",i[i.Suggest=2]="Suggest"})(Mz||(Mz={}));var Dz;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(Dz||(Dz={}));var Az;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(Az||(Az={}));var Iz;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(Iz||(Iz={}));var Nz;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(Nz||(Nz={}));var Rz;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(Rz||(Rz={}));var Pz;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(Pz||(Pz={}));var Oz;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(Oz||(Oz={}));var Fz;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(Fz||(Fz={}));var Bz;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(Bz||(Bz={}));var zz;(function(i){i[i.Deprecated=1]="Deprecated"})(zz||(zz={}));var Uz;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(Uz||(Uz={}));var Vz;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(Vz||(Vz={}));var Wz;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(Wz||(Wz={}));var Hz;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(Hz||(Hz={}));var fg;let FUe=(fg=class{static chord(e,t){return cUe(e,t)}},fg.CtrlCmd=2048,fg.Shift=1024,fg.Alt=512,fg.WinCtrl=256,fg);function Cpe(){return{editor:void 0,languages:void 0,CancellationTokenSource:HC,Emitter:me,KeyCode:yz,KeyMod:FUe,Position:Se,Range:de,Selection:gi,SelectionDirection:Pz,MarkerSeverity:bz,MarkerTag:wz,Uri:fn,Token:_2}}function BUe(i,e){const t=i;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const ui=window;function Spe(i){return i}class zUe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=Spe):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class Vte{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=Spe):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}class xm{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function UUe(i){return!i||typeof i!="string"?!0:i.trim().length===0}const VUe=/{(\d+)}/g;function $z(i,...e){return e.length===0?i:i.replace(VUe,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function WUe(i){return i.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function UE(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ng(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function i4(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function HUe(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function $Ue(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function xpe(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=Ng(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function GUe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function $C(i){return i.split(/\r\n|\r|\n/)}function sl(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Wo(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==32&&s!==9)return i.substring(e,n)}return i.substring(e,t)}function t1(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Gz(i,e){return i<e?-1:i>e?1:0}function Uj(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){const l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function Wte(i,e){return JT(i,e,0,i.length,0,e.length)}function JT(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return Uj(i.toLowerCase(),e.toLowerCase(),t,n,s,r);ab(l)&&(l-=32),ab(c)&&(c-=32);const u=l-c;if(u!==0)return u}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function aD(i){return i>=48&&i<=57}function ab(i){return i>=97&&i<=122}function kp(i){return i>=65&&i<=90}function lb(i,e){return i.length===e.length&&JT(i,e)===0}function Vj(i,e){const t=e.length;return e.length>i.length?!1:JT(i,e,0,t)===0}function jz(i,e){const t=Math.min(i.length,e.length);let n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function Kz(i,e){const t=Math.min(i.length,e.length);let n;const s=i.length-1,r=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(s-n)!==e.charCodeAt(r-n))return n;return t}function fr(i){return 55296<=i&&i<=56319}function jw(i){return 56320<=i&&i<=57343}function Wj(i,e){return(i-55296<<10)+(e-56320)+65536}function sR(i,e,t){const n=i.charCodeAt(t);if(fr(n)&&t+1<e){const s=i.charCodeAt(t+1);if(jw(s))return Wj(n,s)}return n}function jUe(i,e){const t=i.charCodeAt(e-1);if(jw(t)&&e>1){const n=i.charCodeAt(e-2);if(fr(n))return Wj(n,t)}return t}class Hj{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=jUe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=sR(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class rR{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Hj(e,t)}nextGraphemeLength(){const e=oR.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(Hte(s,o)){t.setOffset(r);break}s=o}return t.offset-n}prevGraphemeLength(){const e=oR.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(Hte(o,s)){t.setOffset(r);break}s=o}return n-t.offset}eol(){return this._iterator.eol()}}function $j(i,e){return new rR(i,e).nextGraphemeLength()}function Epe(i,e){return new rR(i,e).prevGraphemeLength()}function KUe(i,e){e>0&&jw(i.charCodeAt(e))&&e--;const t=e+$j(i,e);return[t-Epe(i,t),t]}let VB;function qUe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function v2(i){return VB||(VB=qUe()),VB.test(i)}const XUe=/^[\t\n\r\x20-\x7E]*$/;function Gj(i){return XUe.test(i)}const Lpe=/[\u2028\u2029]/;function Tpe(i){return Lpe.test(i)}function Em(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function jj(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const YUe="\uFEFF";function Kj(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function kpe(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function Hte(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}const m0=class m0{static getInstance(){return m0._INSTANCE||(m0._INSTANCE=new m0),m0._INSTANCE}constructor(){this._data=ZUe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}};m0._INSTANCE=null;let oR=m0;function ZUe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function QUe(i,e){if(i===0)return 0;const t=JUe(i,e);if(t!==void 0)return t;const n=new Hj(e,i);return n.prevCodePoint(),n.offset}function JUe(i,e){const t=new Hj(e,i);let n=t.prevCodePoint();for(;eVe(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!jj(n))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function eVe(i){return 127995<=i&&i<=127999}const cd=class cd{static getInstance(e){return cd.cache.get(Array.from(e))}static getLocales(){return cd._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};cd.ambiguousCharacterData=new xm(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),cd.cache=new zUe({getCacheKey:JSON.stringify},e=>{function t(u){const h=new Map;for(let d=0;d<u.length;d+=2)h.set(u[d],u[d+1]);return h}function n(u,h){const d=new Map(u);for(const[f,g]of h)d.set(f,g);return d}function s(u,h){if(!u)return h;const d=new Map;for(const[f,g]of u)h.has(f)&&d.set(f,g);return d}const r=cd.ambiguousCharacterData.value;let o=e.filter(u=>!u.startsWith("_")&&u in r);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=t(r[u]);a=s(a,h)}const l=t(r._common),c=n(l,a);return new cd(c)}),cd._locales=new xm(()=>Object.keys(cd.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let y2=cd;const Pb=class Pb{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Pb.getRawData())),this._data}static isInvisibleCharacter(e){return Pb.getData().has(e)}static get codePoints(){return Pb.getData()}};Pb._data=void 0;let VE=Pb;const pO=class pO{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};pO.INSTANCE=new pO;let qz=pO;function Mpe(i,e,t){typeof e=="string"&&(e=i.matchMedia(e)),e.addEventListener("change",t)}function tVe(i){return qz.INSTANCE.getZoomFactor(i)}const GC=navigator.userAgent,Su=GC.indexOf("Firefox")>=0,z0=GC.indexOf("AppleWebKit")>=0,ek=GC.indexOf("Chrome")>=0,Rg=!ek&&GC.indexOf("Safari")>=0,Dpe=!ek&&!Rg&&z0;GC.indexOf("Electron/")>=0;const $te=GC.indexOf("Android")>=0;let xI=!1;if(typeof ui.matchMedia=="function"){const i=ui.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=ui.matchMedia("(display-mode: fullscreen)");xI=i.matches,Mpe(ui,i,({matches:t})=>{xI&&e.matches||(xI=t)})}function nVe(){return xI}const Ape={clipboard:{writeText:BE||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:BE||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:BE||nVe()?0:navigator.keyboard||Rg?1:2,touch:"ontouchstart"in ui||navigator.maxTouchPoints>0,pointerEvents:ui.PointerEvent&&("ontouchstart"in ui||navigator.maxTouchPoints>0)};function Xz(i,e){if(typeof i=="number"){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new WB([lD(t,e),lD(n,e)]):new WB([lD(t,e)])}else{const t=[];for(let n=0;n<i.length;n++)t.push(lD(i[n],e));return new WB(t)}}function lD(i,e){const t=!!(i&2048),n=!!(i&256),s=e===2?n:t,r=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new Ev(s,r,o,a,l)}class Ev{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return e instanceof Ev&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class WB{constructor(e){if(e.length===0)throw t4("chords");this.chords=e}}class iVe{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class sVe{}function rVe(i){if(i.charCode){const t=String.fromCharCode(i.charCode).toUpperCase();return qf.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(Su)switch(e){case 59:return 85;case 60:if(ka)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Tn)return 57;break}else if(z0){if(Tn&&e===93)return 57;if(!Tn&&e===92)return 57}return dpe[e]||0}const oVe=Tn?256:2048,aVe=512,lVe=1024,cVe=Tn?2048:256;class xi{constructor(e){var n;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(n=t.getModifierState)==null?void 0:n.call(t,"AltGraph"),this.keyCode=rVe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=oVe),this.altKey&&(t|=aVe),this.shiftKey&&(t|=lVe),this.metaKey&&(t|=cVe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Ev(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Gte=new WeakMap;function uVe(i){if(!i.parent||i.parent===i)return null;try{const e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return i.parent}class hVe{static getSameOriginWindowChain(e){let t=Gte.get(e);if(!t){t=[],Gte.set(e,t);let n=e,s;do s=uVe(n),s?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(n+=(a==null?void 0:a.scrollY)??0,s+=(a==null?void 0:a.scrollX)??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();n+=l.top,s+=l.left}return{top:n,left:s}}}class dh{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=hVe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Lv{constructor(e,t=0,n=0){var r;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let s=!1;if(ek){const o=navigator.userAgent.match(/Chrome\/(\d+)/);s=(o?parseInt(o[1]):123)<=122}if(e){const o=e,a=e,l=((r=e.view)==null?void 0:r.devicePixelRatio)||1;if(typeof o.wheelDeltaY<"u")s?this.deltaY=o.wheelDeltaY/(120*l):this.deltaY=o.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Su&&!Tn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Rg&&rl?this.deltaX=-(o.wheelDeltaX/120):s?this.deltaX=o.wheelDeltaX/(120*l):this.deltaX=o.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Su&&!Tn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const Ipe=Symbol("MicrotaskDelay");function Yz(i){return!!i&&typeof i.then=="function"}function Npe(i){const e=new HC,t=i(e.token),n=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),r(new ZT)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,r){return n.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}class dVe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}dispose(){this.isDisposed=!0}}const fVe=(i,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},gVe=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class tk{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,r)=>{this.doResolve=s,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const n=()=>{var s;this.deferred=null,(s=this.doResolve)==null||s.call(this,null)};return this.deferred=t===Ipe?gVe(n):fVe(t,n),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new ZT),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class Rpe{constructor(e){this.delayer=new tk(e),this.throttler=new dVe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function b2(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(new ZT)})}):Npe(t=>b2(i,t))}function Zz(i,e=0,t){const n=setTimeout(()=>{i(),t&&s.dispose()},e),s=en(()=>{clearTimeout(n),t==null||t.deleteAndLeak(s)});return t==null||t.add(s),s}class n1{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Qn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Qn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class qj{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new Qn("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=n.setInterval(()=>{e()},t);this.disposable=en(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class Ro{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let Ppe,WE;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?WE=(i,e)=>{tpe(()=>{if(t)return;const n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:WE=(i,e,t)=>{const n=i.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,i.cancelIdleCallback(n))}}},Ppe=i=>WE(globalThis,i)})();class pVe{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=WE(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class mVe extends pVe{constructor(e){super(globalThis,e)}}class Ope{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new ZT)}}var Qz;(function(i){async function e(n){let s;const r=await Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r}i.settled=e;function t(n){return new Promise(async(s,r)=>{try{await n(s,r)}catch(o){r(o)}})}i.withAsyncBody=t})(Qz||(Qz={}));const qa=class qa{static fromArray(e){return new qa(t=>{t.emitMany(e)})}static fromPromise(e){return new qa(async t=>{t.emitMany(await e)})}static fromPromises(e){return new qa(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new qa(async t=>{await Promise.all(e.map(async n=>{for await(const s of n)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new me,queueMicrotask(async()=>{const n={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(n)),this.resolve()}catch(s){this.reject(s)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Qe.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new qa(async n=>{for await(const s of e)n.emitOne(t(s))})}map(e){return qa.map(this,e)}static filter(e,t){return new qa(async n=>{for await(const s of e)t(s)&&n.emitOne(s)})}filter(e){return qa.filter(this,e)}static coalesce(e){return qa.filter(e,t=>!!t)}coalesce(){return qa.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return qa.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};qa.EMPTY=qa.fromArray([]);let jte=qa;/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:Fpe,setPrototypeOf:Kte,isFrozen:_Ve,getPrototypeOf:vVe,getOwnPropertyDescriptor:yVe}=Object;let{freeze:ol,seal:wh,create:bVe}=Object,{apply:Jz,construct:eU}=typeof Reflect<"u"&&Reflect;Jz||(Jz=function(e,t,n){return e.apply(t,n)});ol||(ol=function(e){return e});wh||(wh=function(e){return e});eU||(eU=function(e,t){return new e(...t)});const wVe=xu(Array.prototype.forEach),qte=xu(Array.prototype.pop),ZS=xu(Array.prototype.push),EI=xu(String.prototype.toLowerCase),HB=xu(String.prototype.toString),CVe=xu(String.prototype.match),zu=xu(String.prototype.replace),SVe=xu(String.prototype.indexOf),xVe=xu(String.prototype.trim),sc=xu(RegExp.prototype.test),QS=EVe(TypeError);function xu(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return Jz(i,e,n)}}function EVe(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eU(i,t)}}function ti(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:EI,Kte&&Kte(i,null);let s=e.length;for(;s--;){let r=e[s];if(typeof r=="string"){const o=t(r);o!==r&&(_Ve(e)||(e[s]=o),r=o)}i[r]=!0}return i}function G1(i){const e=bVe(null);for(const[t,n]of Fpe(i))e[t]=n;return e}function cD(i,e){for(;i!==null;){const n=yVe(i,e);if(n){if(n.get)return xu(n.get);if(typeof n.value=="function")return xu(n.value)}i=vVe(i)}function t(n){return console.warn("fallback value for",n),null}return t}const Xte=ol(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$B=ol(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),GB=ol(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),LVe=ol(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jB=ol(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),TVe=ol(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Yte=ol(["#text"]),Zte=ol(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),KB=ol(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Qte=ol(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uD=ol(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kVe=wh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),MVe=wh(/<%[\w\W]*|[\w\W]*%>/gm),DVe=wh(/\${[\w\W]*}/gm),AVe=wh(/^data-[\-\w.\u00B7-\uFFFF]/),IVe=wh(/^aria-[\-\w]+$/),Bpe=wh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),NVe=wh(/^(?:\w+script|data):/i),RVe=wh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zpe=wh(/^html$/i);var Jte=Object.freeze({__proto__:null,MUSTACHE_EXPR:kVe,ERB_EXPR:MVe,TMPLIT_EXPR:DVe,DATA_ATTR:AVe,ARIA_ATTR:IVe,IS_ALLOWED_URI:Bpe,IS_SCRIPT_OR_DATA:NVe,ATTR_WHITESPACE:RVe,DOCTYPE_NAME:zpe});const PVe=()=>typeof window>"u"?null:window,OVe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Upe(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:PVe();const e=_e=>Upe(_e);if(e.version="3.0.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const t=i.document,n=t.currentScript;let{document:s}=i;const{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=i,g=l.prototype,p=cD(g,"cloneNode"),_=cD(g,"nextSibling"),m=cD(g,"childNodes"),v=cD(g,"parentNode");if(typeof o=="function"){const _e=s.createElement("template");_e.content&&_e.content.ownerDocument&&(s=_e.content.ownerDocument)}let y,C="";const{implementation:S,createNodeIterator:x,createDocumentFragment:E,getElementsByTagName:L}=s,{importNode:T}=t;let D={};e.isSupported=typeof Fpe=="function"&&typeof v=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:I,ERB_EXPR:N,TMPLIT_EXPR:P,DATA_ATTR:O,ARIA_ATTR:V,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:K}=Jte;let{IS_ALLOWED_URI:H}=Jte,U=null;const j=ti({},[...Xte,...$B,...GB,...jB,...Yte]);let W=null;const X=ti({},[...Zte,...KB,...Qte,...uD]);let ee=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,fe=null,be=!0,ye=!0,xe=!1,He=!0,qe=!1,ke=!1,q=!1,Ee=!1,De=!1,Ae=!1,Me=!1,Je=!0,Pe=!1;const Xe="user-content-";let Re=!0,Fe=!1,wt={},te=null;const Z=ti({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let we=null;const Ye=ti({},["audio","video","img","source","image","track"]);let je=null;const Ge=ti({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ot="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",Oe="http://www.w3.org/1999/xhtml";let lt=Oe,xt=!1,ut=null;const nt=ti({},[ot,tt,Oe],HB);let ft;const At=["application/xhtml+xml","text/html"],kt="text/html";let he,at=null;const Ue=s.createElement("form"),gt=function(ie){return ie instanceof RegExp||ie instanceof Function},Ct=function(ie){if(!(at&&at===ie)){if((!ie||typeof ie!="object")&&(ie={}),ie=G1(ie),ft=At.indexOf(ie.PARSER_MEDIA_TYPE)===-1?ft=kt:ft=ie.PARSER_MEDIA_TYPE,he=ft==="application/xhtml+xml"?HB:EI,U="ALLOWED_TAGS"in ie?ti({},ie.ALLOWED_TAGS,he):j,W="ALLOWED_ATTR"in ie?ti({},ie.ALLOWED_ATTR,he):X,ut="ALLOWED_NAMESPACES"in ie?ti({},ie.ALLOWED_NAMESPACES,HB):nt,je="ADD_URI_SAFE_ATTR"in ie?ti(G1(Ge),ie.ADD_URI_SAFE_ATTR,he):Ge,we="ADD_DATA_URI_TAGS"in ie?ti(G1(Ye),ie.ADD_DATA_URI_TAGS,he):Ye,te="FORBID_CONTENTS"in ie?ti({},ie.FORBID_CONTENTS,he):Z,le="FORBID_TAGS"in ie?ti({},ie.FORBID_TAGS,he):{},fe="FORBID_ATTR"in ie?ti({},ie.FORBID_ATTR,he):{},wt="USE_PROFILES"in ie?ie.USE_PROFILES:!1,be=ie.ALLOW_ARIA_ATTR!==!1,ye=ie.ALLOW_DATA_ATTR!==!1,xe=ie.ALLOW_UNKNOWN_PROTOCOLS||!1,He=ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=ie.SAFE_FOR_TEMPLATES||!1,ke=ie.WHOLE_DOCUMENT||!1,De=ie.RETURN_DOM||!1,Ae=ie.RETURN_DOM_FRAGMENT||!1,Me=ie.RETURN_TRUSTED_TYPE||!1,Ee=ie.FORCE_BODY||!1,Je=ie.SANITIZE_DOM!==!1,Pe=ie.SANITIZE_NAMED_PROPS||!1,Re=ie.KEEP_CONTENT!==!1,Fe=ie.IN_PLACE||!1,H=ie.ALLOWED_URI_REGEXP||Bpe,lt=ie.NAMESPACE||Oe,ee=ie.CUSTOM_ELEMENT_HANDLING||{},ie.CUSTOM_ELEMENT_HANDLING&&gt(ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&gt(ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&typeof ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(ye=!1),Ae&&(De=!0),wt&&(U=ti({},[...Yte]),W=[],wt.html===!0&&(ti(U,Xte),ti(W,Zte)),wt.svg===!0&&(ti(U,$B),ti(W,KB),ti(W,uD)),wt.svgFilters===!0&&(ti(U,GB),ti(W,KB),ti(W,uD)),wt.mathMl===!0&&(ti(U,jB),ti(W,Qte),ti(W,uD))),ie.ADD_TAGS&&(U===j&&(U=G1(U)),ti(U,ie.ADD_TAGS,he)),ie.ADD_ATTR&&(W===X&&(W=G1(W)),ti(W,ie.ADD_ATTR,he)),ie.ADD_URI_SAFE_ATTR&&ti(je,ie.ADD_URI_SAFE_ATTR,he),ie.FORBID_CONTENTS&&(te===Z&&(te=G1(te)),ti(te,ie.FORBID_CONTENTS,he)),Re&&(U["#text"]=!0),ke&&ti(U,["html","head","body"]),U.table&&(ti(U,["tbody"]),delete le.tbody),ie.TRUSTED_TYPES_POLICY){if(typeof ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw QS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw QS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=ie.TRUSTED_TYPES_POLICY,C=y.createHTML("")}else y===void 0&&(y=OVe(f,n)),y!==null&&typeof C=="string"&&(C=y.createHTML(""));ol&&ol(ie),at=ie}},cn=ti({},["mi","mo","mn","ms","mtext"]),wn=ti({},["foreignobject","desc","title","annotation-xml"]),qn=ti({},["title","style","font","a","script"]),St=ti({},$B);ti(St,GB),ti(St,LVe);const Q=ti({},jB);ti(Q,TVe);const J=function(ie){let ce=v(ie);(!ce||!ce.tagName)&&(ce={namespaceURI:lt,tagName:"template"});const Ce=EI(ie.tagName),mt=EI(ce.tagName);return ut[ie.namespaceURI]?ie.namespaceURI===tt?ce.namespaceURI===Oe?Ce==="svg":ce.namespaceURI===ot?Ce==="svg"&&(mt==="annotation-xml"||cn[mt]):!!St[Ce]:ie.namespaceURI===ot?ce.namespaceURI===Oe?Ce==="math":ce.namespaceURI===tt?Ce==="math"&&wn[mt]:!!Q[Ce]:ie.namespaceURI===Oe?ce.namespaceURI===tt&&!wn[mt]||ce.namespaceURI===ot&&!cn[mt]?!1:!Q[Ce]&&(qn[Ce]||!St[Ce]):!!(ft==="application/xhtml+xml"&&ut[ie.namespaceURI]):!1},ne=function(ie){ZS(e.removed,{element:ie});try{ie.parentNode.removeChild(ie)}catch{ie.remove()}},pe=function(ie,ce){try{ZS(e.removed,{attribute:ce.getAttributeNode(ie),from:ce})}catch{ZS(e.removed,{attribute:null,from:ce})}if(ce.removeAttribute(ie),ie==="is"&&!W[ie])if(De||Ae)try{ne(ce)}catch{}else try{ce.setAttribute(ie,"")}catch{}},ve=function(ie){let ce,Ce;if(Ee)ie="<remove></remove>"+ie;else{const jt=CVe(ie,/^[\r\n\t ]+/);Ce=jt&&jt[0]}ft==="application/xhtml+xml"&&lt===Oe&&(ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ie+"</body></html>");const mt=y?y.createHTML(ie):ie;if(lt===Oe)try{ce=new d().parseFromString(mt,ft)}catch{}if(!ce||!ce.documentElement){ce=S.createDocument(lt,"template",null);try{ce.documentElement.innerHTML=xt?C:mt}catch{}}const Bt=ce.body||ce.documentElement;return ie&&Ce&&Bt.insertBefore(s.createTextNode(Ce),Bt.childNodes[0]||null),lt===Oe?L.call(ce,ke?"html":"body")[0]:ke?ce.documentElement:Bt},Te=function(ie){return x.call(ie.ownerDocument||ie,ie,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ze=function(ie){return ie instanceof h&&(typeof ie.nodeName!="string"||typeof ie.textContent!="string"||typeof ie.removeChild!="function"||!(ie.attributes instanceof u)||typeof ie.removeAttribute!="function"||typeof ie.setAttribute!="function"||typeof ie.namespaceURI!="string"||typeof ie.insertBefore!="function"||typeof ie.hasChildNodes!="function")},ht=function(ie){return typeof a=="object"?ie instanceof a:ie&&typeof ie=="object"&&typeof ie.nodeType=="number"&&typeof ie.nodeName=="string"},ct=function(ie,ce,Ce){D[ie]&&wVe(D[ie],mt=>{mt.call(e,ce,Ce,at)})},zt=function(ie){let ce;if(ct("beforeSanitizeElements",ie,null),ze(ie))return ne(ie),!0;const Ce=he(ie.nodeName);if(ct("uponSanitizeElement",ie,{tagName:Ce,allowedTags:U}),ie.hasChildNodes()&&!ht(ie.firstElementChild)&&(!ht(ie.content)||!ht(ie.content.firstElementChild))&&sc(/<[/\w]/g,ie.innerHTML)&&sc(/<[/\w]/g,ie.textContent))return ne(ie),!0;if(!U[Ce]||le[Ce]){if(!le[Ce]&&Hn(Ce)&&(ee.tagNameCheck instanceof RegExp&&sc(ee.tagNameCheck,Ce)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Ce)))return!1;if(Re&&!te[Ce]){const mt=v(ie)||ie.parentNode,Bt=m(ie)||ie.childNodes;if(Bt&&mt){const jt=Bt.length;for(let Ut=jt-1;Ut>=0;--Ut)mt.insertBefore(p(Bt[Ut],!0),_(ie))}}return ne(ie),!0}return ie instanceof l&&!J(ie)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&sc(/<\/no(script|embed|frames)/i,ie.innerHTML)?(ne(ie),!0):(qe&&ie.nodeType===3&&(ce=ie.textContent,ce=zu(ce,I," "),ce=zu(ce,N," "),ce=zu(ce,P," "),ie.textContent!==ce&&(ZS(e.removed,{element:ie.cloneNode()}),ie.textContent=ce)),ct("afterSanitizeElements",ie,null),!1)},sn=function(ie,ce,Ce){if(Je&&(ce==="id"||ce==="name")&&(Ce in s||Ce in Ue))return!1;if(!(ye&&!fe[ce]&&sc(O,ce))){if(!(be&&sc(V,ce))){if(!W[ce]||fe[ce]){if(!(Hn(ie)&&(ee.tagNameCheck instanceof RegExp&&sc(ee.tagNameCheck,ie)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(ie))&&(ee.attributeNameCheck instanceof RegExp&&sc(ee.attributeNameCheck,ce)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(ce))||ce==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&sc(ee.tagNameCheck,Ce)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Ce))))return!1}else if(!je[ce]){if(!sc(H,zu(Ce,K,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&ie!=="script"&&SVe(Ce,"data:")===0&&we[ie])){if(!(xe&&!sc(z,zu(Ce,K,"")))){if(Ce)return!1}}}}}}return!0},Hn=function(ie){return ie.indexOf("-")>0},On=function(ie){let ce,Ce,mt,Bt;ct("beforeSanitizeAttributes",ie,null);const{attributes:jt}=ie;if(!jt)return;const Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W};for(Bt=jt.length;Bt--;){ce=jt[Bt];const{name:dn,namespaceURI:dt}=ce;if(Ce=dn==="value"?ce.value:xVe(ce.value),mt=he(dn),Ut.attrName=mt,Ut.attrValue=Ce,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,ct("uponSanitizeAttribute",ie,Ut),Ce=Ut.attrValue,Ut.forceKeepAttr||(pe(dn,ie),!Ut.keepAttr))continue;if(!He&&sc(/\/>/i,Ce)){pe(dn,ie);continue}qe&&(Ce=zu(Ce,I," "),Ce=zu(Ce,N," "),Ce=zu(Ce,P," "));const un=he(ie.nodeName);if(sn(un,mt,Ce)){if(Pe&&(mt==="id"||mt==="name")&&(pe(dn,ie),Ce=Xe+Ce),y&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!dt)switch(f.getAttributeType(un,mt)){case"TrustedHTML":{Ce=y.createHTML(Ce);break}case"TrustedScriptURL":{Ce=y.createScriptURL(Ce);break}}try{dt?ie.setAttributeNS(dt,dn,Ce):ie.setAttribute(dn,Ce),qte(e.removed)}catch{}}}ct("afterSanitizeAttributes",ie,null)},ae=function _e(ie){let ce;const Ce=Te(ie);for(ct("beforeSanitizeShadowDOM",ie,null);ce=Ce.nextNode();)ct("uponSanitizeShadowNode",ce,null),!zt(ce)&&(ce.content instanceof r&&_e(ce.content),On(ce));ct("afterSanitizeShadowDOM",ie,null)};return e.sanitize=function(_e){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce,Ce,mt,Bt;if(xt=!_e,xt&&(_e="<!-->"),typeof _e!="string"&&!ht(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw QS("dirty is not a string, aborting")}else throw QS("toString is not a function");if(!e.isSupported)return _e;if(q||Ct(ie),e.removed=[],typeof _e=="string"&&(Fe=!1),Fe){if(_e.nodeName){const dn=he(_e.nodeName);if(!U[dn]||le[dn])throw QS("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof a)ce=ve("<!---->"),Ce=ce.ownerDocument.importNode(_e,!0),Ce.nodeType===1&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?ce=Ce:ce.appendChild(Ce);else{if(!De&&!qe&&!ke&&_e.indexOf("<")===-1)return y&&Me?y.createHTML(_e):_e;if(ce=ve(_e),!ce)return De?null:Me?C:""}ce&&Ee&&ne(ce.firstChild);const jt=Te(Fe?_e:ce);for(;mt=jt.nextNode();)zt(mt)||(mt.content instanceof r&&ae(mt.content),On(mt));if(Fe)return _e;if(De){if(Ae)for(Bt=E.call(ce.ownerDocument);ce.firstChild;)Bt.appendChild(ce.firstChild);else Bt=ce;return(W.shadowroot||W.shadowrootmode)&&(Bt=T.call(t,Bt,!0)),Bt}let Ut=ke?ce.outerHTML:ce.innerHTML;return ke&&U["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&sc(zpe,ce.ownerDocument.doctype.name)&&(Ut="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+Ut),qe&&(Ut=zu(Ut,I," "),Ut=zu(Ut,N," "),Ut=zu(Ut,P," ")),y&&Me?y.createHTML(Ut):Ut},e.setConfig=function(_e){Ct(_e),q=!0},e.clearConfig=function(){at=null,q=!1},e.isValidAttribute=function(_e,ie,ce){at||Ct({});const Ce=he(_e),mt=he(ie);return sn(Ce,mt,ce)},e.addHook=function(_e,ie){typeof ie=="function"&&(D[_e]=D[_e]||[],ZS(D[_e],ie))},e.removeHook=function(_e){if(D[_e])return qte(D[_e])},e.removeHooks=function(_e){D[_e]&&(D[_e]=[])},e.removeAllHooks=function(){D={}},e}var Xd=Upe();Xd.version;Xd.isSupported;const Vpe=Xd.sanitize;Xd.setConfig;Xd.clearConfig;Xd.isValidAttribute;const Wpe=Xd.addHook,Hpe=Xd.removeHook;Xd.removeHooks;Xd.removeAllHooks;var hn;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeManagedRemoteResource="vscode-managed-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",i.vscodeNotebookMetadata="vscode-notebook-metadata",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeChatCodeBlock="vscode-chat-code-block",i.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",i.vscodeChatSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm",i.commentsInput="comment",i.codeSetting="code-setting",i.outputChannel="output"})(hn||(hn={}));function Xj(i,e){return fn.isUri(i)?lb(i.scheme,e):Vj(i,e+":")}function ene(i,...e){return e.some(t=>Xj(i,t))}const FVe="tkn";class BVe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return vs.join(this._serverRootPath,hn.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return di(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${FVe}=${encodeURIComponent(r)}`),fn.from({scheme:VC?this._preferredWebSchema:hn.vscodeRemoteResource,authority:`${n}:${s}`,path:this._remoteResourcesPath,query:o})}}const $pe=new BVe,zVe="vscode-app",DL=class DL{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===hn.vscodeRemote?$pe.rewrite(e):e.scheme===hn.file&&(BE||X9e===`${hn.vscodeFileResource}://${DL.FALLBACK_AUTHORITY}`)?e.with({scheme:hn.vscodeFileResource,authority:e.authority||DL.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(fn.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return fn.joinPath(fn.parse(n,!0),e);const s=yUe(n,e);return fn.file(s)}return fn.parse(t.toUrl(e))}};DL.FALLBACK_AUTHORITY=zVe;let tU=DL;const s4=new tU;var nU;(function(i){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:fn.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}i.getHeadersFromQuery=n;function s(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}i.addSearchParam=s})(nU||(nU={}));function Gpe(i){return r4(i,0)}function r4(i,e){switch(typeof i){case"object":return i===null?og(349,e):Array.isArray(i)?VVe(i,e):WVe(i,e);case"string":return Yj(i,e);case"boolean":return UVe(i,e);case"number":return og(i,e);case"undefined":return og(937,e);default:return og(617,e)}}function og(i,e){return(e<<5)-e+i|0}function UVe(i,e){return og(i?433:863,e)}function Yj(i,e){e=og(149417,e);for(let t=0,n=i.length;t<n;t++)e=og(i.charCodeAt(t),e);return e}function VVe(i,e){return e=og(104579,e),i.reduce((t,n)=>r4(n,t),e)}function WVe(i,e){return e=og(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=Yj(n,t),r4(i[n],t)),e)}function qB(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function tne(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}function HVe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function JS(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):HVe((i>>>0).toString(16),e/4)}const mO=class mO{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(fr(o))if(a+1<t){const c=e.charCodeAt(a+1);jw(c)?(a++,l=Wj(o,c)):l=65533}else{r=o;break}else jw(o)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),JS(this._h0)+JS(this._h1)+JS(this._h2)+JS(this._h3)+JS(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,tne(this._buff,this._buffLen),this._buffLen>56&&(this._step(),tne(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=mO._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,qB(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,u;for(let h=0;h<80;h++)h<20?(l=s&r|~s&o,c=1518500249):h<40?(l=s^r^o,c=1859775393):h<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),u=qB(n,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=o,o=r,r=qB(s,30),s=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};mO._bigBlock32=new DataView(new ArrayBuffer(320));let iU=mO;const{registerWindow:sTt,getWindow:Nt,getDocument:rTt,getWindows:jpe,getWindowsCount:$Ve,getWindowId:aR,getWindowById:nne,hasWindow:oTt,onDidRegisterWindow:o4,onWillUnregisterWindow:GVe,onDidUnregisterWindow:jVe}=function(){const i=new Map;BUe(ui,1);const e={window:ui,disposables:new Tt};i.set(ui.vscodeWindowId,e);const t=new me,n=new me,s=new me;function r(o,a){return(typeof o=="number"?i.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(o){if(i.has(o.vscodeWindowId))return Be.None;const a=new Tt,l={window:o,disposables:a.add(new Tt)};return i.set(o.vscodeWindowId,l),a.add(en(()=>{i.delete(o.vscodeWindowId),n.fire(o)})),a.add(Ne(o,it.BEFORE_UNLOAD,()=>{s.fire(o)})),t.fire(l),a},getWindows(){return i.values()},getWindowsCount(){return i.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return i.has(o)},getWindowById:r,getWindow(o){var c;const a=o;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l!=null&&l.view?l.view.window:ui},getDocument(o){return Nt(o).document}}}();function Ch(i){for(;i.firstChild;)i.firstChild.remove()}class KVe{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function Ne(i,e,t,n){return new KVe(i,e,t,n)}function qVe(i,e){return function(t){return e(new dh(i,t))}}function XVe(i){return function(e){return i(new xi(e))}}const vr=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"||t==="contextmenu"?r=qVe(Nt(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=XVe(n)),Ne(e,t,r,s)};function hD(i,e,t){return WE(i,e,t)}let Kpe,al;class Zj extends qj{constructor(e){super(),this.defaultTarget=e&&Nt(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}}class XB{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){di(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const i=new Map,e=new Map,t=new Map,n=new Map,s=r=>{t.set(r,!1);const o=i.get(r)??[];for(e.set(r,o),i.set(r,[]),n.set(r,!0);o.length>0;)o.sort(XB.sort),o.shift().execute();n.set(r,!1)};al=(r,o,a=0)=>{const l=aR(r),c=new XB(o,a);let u=i.get(l);return u||(u=[],i.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>s(l))),c},Kpe=(r,o,a)=>{const l=aR(r);if(n.get(l)){const c=new XB(o,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return al(r,o,a)}})();function Qj(i){return Nt(i).getComputedStyle(i,null)}function sU(i,e){const t=Nt(i),n=t.document;if(i!==n.body)return new Xf(i.clientWidth,i.clientHeight);if(Sv&&(t!=null&&t.visualViewport))return new Xf(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new Xf(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Xf(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Xf(n.documentElement.clientWidth,n.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class as{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const s=Qj(e),r=s?s.getPropertyValue(t):"0";return as.convertToPixels(e,r)}static getBorderLeftWidth(e){return as.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return as.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return as.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return as.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return as.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return as.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return as.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return as.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return as.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return as.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return as.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return as.getDimension(e,"margin-bottom","marginBottom")}}const _0=class _0{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new _0(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof _0?e:new _0(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};_0.None=new _0(0,0);let Xf=_0;function YVe(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;const s=Xpe(i)?null:Qj(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=as.getBorderLeftWidth(i),t+=as.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function pc(i){const e=i.getBoundingClientRect(),t=Nt(i);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function qpe(i){let e=i,t=1;do{const n=Qj(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Jj(i){const e=as.getMarginLeft(i)+as.getMarginRight(i);return i.offsetWidth+e}function YB(i){const e=as.getBorderLeftWidth(i)+as.getBorderRightWidth(i),t=as.getPaddingLeft(i)+as.getPaddingRight(i);return i.offsetWidth-e-t}function ZVe(i){const e=as.getBorderTopWidth(i)+as.getBorderBottomWidth(i),t=as.getPaddingTop(i)+as.getPaddingBottom(i);return i.offsetHeight-e-t}function rU(i){const e=as.getMarginTop(i)+as.getMarginBottom(i);return i.offsetHeight+e}function mr(i,e){return!!(e!=null&&e.contains(i))}function QVe(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function ZB(i,e,t){return!!QVe(i,e,t)}function Xpe(i){return i&&!!i.host&&!!i.mode}function lR(i){return!!Kw(i)}function Kw(i){var e;for(;i.parentNode;){if(i===((e=i.ownerDocument)==null?void 0:e.body))return null;i=i.parentNode}return Xpe(i)?i:null}function Po(){let i=tK().activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function eK(i){return Po()===i}function Ype(i){return mr(Po(),i)}function tK(){return $Ve()<=1?ui.document:Array.from(jpe()).map(({window:e})=>e.document).find(e=>e.hasFocus())??ui.document}function cE(){var e;return((e=tK().defaultView)==null?void 0:e.window)??ui}const Zpe=new Map;function Lc(i=ui.document.head,e,t){const n=document.createElement("style");if(n.type="text/css",n.media="screen",e==null||e(n),i.appendChild(n),t&&t.add(en(()=>n.remove())),i===ui.document.head){const s=new Set;Zpe.set(n,s);for(const{window:r,disposables:o}of jpe()){if(r===ui)continue;const a=o.add(JVe(n,s,r));t==null||t.add(a)}}return n}function JVe(i,e,t){var r,o;const n=new Tt,s=i.cloneNode(!0);t.document.head.appendChild(s),n.add(en(()=>s.remove()));for(const a of nWe(i))(o=s.sheet)==null||o.insertRule(a.cssText,(r=s.sheet)==null?void 0:r.cssRules.length);return n.add(eWe.observe(i,n,{childList:!0})(()=>{s.textContent=i.textContent})),e.add(s),n.add(en(()=>e.delete(s))),n}const eWe=new class{constructor(){this.mutationObservers=new Map}observe(i,e,t){let n=this.mutationObservers.get(i);n||(n=new Map,this.mutationObservers.set(i,n));const s=Gpe(t);let r=n.get(s);if(r)r.users+=1;else{const o=new me,a=new MutationObserver(c=>o.fire(c));a.observe(i,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(en(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),n==null||n.delete(s),(n==null?void 0:n.size)===0&&this.mutationObservers.delete(i))})),n.set(s,r)}return r.onDidMutate}};let QB=null;function tWe(){return QB||(QB=Lc()),QB}function nWe(i){var e,t;return(e=i==null?void 0:i.sheet)!=null&&e.rules?i.sheet.rules:(t=i==null?void 0:i.sheet)!=null&&t.cssRules?i.sheet.cssRules:[]}function oU(i,e,t=tWe()){var n;if(!(!t||!e)){(n=t.sheet)==null||n.insertRule(`${i} {${e}}`,0);for(const s of Zpe.get(t)??[])oU(i,e,s)}}function Nr(i){return i instanceof HTMLElement||i instanceof Nt(i).HTMLElement}function ine(i){return i instanceof HTMLAnchorElement||i instanceof Nt(i).HTMLAnchorElement}function iWe(i){return i instanceof SVGElement||i instanceof Nt(i).SVGElement}function nK(i){return i instanceof MouseEvent||i instanceof Nt(i).MouseEvent}function $f(i){return i instanceof KeyboardEvent||i instanceof Nt(i).KeyboardEvent}const it={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:z0?"webkitAnimationStart":"animationstart",ANIMATION_END:z0?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:z0?"webkitAnimationIteration":"animationiteration"};function sWe(i){const e=i;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const bn={stop:(i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i)};function rWe(i){const e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function oWe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class cR extends Be{static hasFocusWithin(e){if(Nr(e)){const t=Kw(e),n=t?t.activeElement:e.ownerDocument.activeElement;return mr(n,e)}else{const t=e;return mr(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new me),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new me),this.onDidBlur=this._onDidBlur.event;let t=cR.hasFocusWithin(e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,(Nr(e)?Nt(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{cR.hasFocusWithin(e)!==t&&(t?r():s())},this._register(Ne(e,it.FOCUS,s,!0)),this._register(Ne(e,it.BLUR,r,!0)),Nr(e)&&(this._register(Ne(e,it.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Ne(e,it.FOCUS_OUT,()=>this._refreshStateHandler())))}}function w2(i){return new cR(i)}function aWe(i,e){return i.after(e),e}function Et(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function iK(i,e){return i.insertBefore(e,i.firstChild),e}function Ko(i,...e){i.innerText="",Et(i,...e)}const lWe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var C2;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(C2||(C2={}));function Qpe(i,e,t,...n){const s=lWe.exec(e);if(!s)throw new Error("Bad use of emmet");const r=s[1]||"div";let o;return i!==C2.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function Ht(i,e,...t){return Qpe(C2.HTML,i,e,...t)}Ht.SVG=function(i,e,...t){return Qpe(C2.SVG,i,e,...t)};function Jpe(...i){for(const e of i)e.style.display="",e.removeAttribute("aria-hidden")}function sne(...i){for(const e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function rne(i,e){const t=i.devicePixelRatio*e;return Math.max(1,Math.floor(t))/i.devicePixelRatio}function eme(i){ui.open(i,"_blank","noopener")}function cWe(i,e){const t=()=>{e(),n=al(i,t)};let n=al(i,t);return en(()=>n.dispose())}$pe.setPreferredWebSchema(/^https:/.test(ui.location.href)?"https":"http");function Pg(i){return i?`url('${s4.uriToBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function JB(i){return`'${i.replace(/'/g,"%27")}'`}function _g(i,e){if(i!==void 0){const t=i.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=_g(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}function uWe(i,e=!1){const t=document.createElement("a");return Wpe("afterSanitizeAttributes",n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const r=n.getAttribute(s);if(s==="href"&&r.startsWith("#"))continue;if(t.href=r,!i.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(s)}}}),en(()=>{Hpe("afterSanitizeAttributes")})}const hWe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class $p extends me{constructor(){super(),this._subscriptions=new Tt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Qe.runAndSubscribe(o4,({window:e,disposables:t})=>this.registerListeners(e,t),{window:ui,disposables:this._subscriptions}))}registerListeners(e,t){t.add(Ne(e,"keydown",n=>{if(n.defaultPrevented)return;const s=new xi(n);if(!(s.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(Ne(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(Ne(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Ne(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Ne(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(Ne(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return $p.instance||($p.instance=new $p),$p.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class dWe extends Be{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(Ne(this.element,it.DRAG_START,e=>{var t,n;(n=(t=this.callbacks).onDragStart)==null||n.call(t,e)})),this.callbacks.onDrag&&this._register(Ne(this.element,it.DRAG,e=>{var t,n;(n=(t=this.callbacks).onDrag)==null||n.call(t,e)})),this._register(Ne(this.element,it.DRAG_ENTER,e=>{var t,n;this.counter++,this.dragStartTime=e.timeStamp,(n=(t=this.callbacks).onDragEnter)==null||n.call(t,e)})),this._register(Ne(this.element,it.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)==null||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(Ne(this.element,it.DRAG_LEAVE,e=>{var t,n;this.counter--,this.counter===0&&(this.dragStartTime=0,(n=(t=this.callbacks).onDragLeave)==null||n.call(t,e))})),this._register(Ne(this.element,it.DRAG_END,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDragEnd)==null||n.call(t,e)})),this._register(Ne(this.element,it.DROP,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDrop)==null||n.call(t,e)}))}}const fWe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Mn(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const s=fWe.exec(i);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElement(r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),n)for(const c of n)Nr(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,d]of Object.entries(u))o.style.setProperty(one(h),typeof d=="number"?d+"px":""+d);else c==="tabIndex"?o.tabIndex=u:o.setAttribute(one(c),u.toString());return l.root=o,l}function one(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class gWe extends Be{constructor(e){super(),this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var n;(n=this._mediaQueryList)==null||n.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class pWe extends Be{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new gWe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/s}}class mWe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=aR(e);let n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=new pWe(e),this.mapWindowIdToPixelRatioMonitor.set(t,n),Qe.once(jVe)(({vscodeWindowId:s})=>{s===t&&(n==null||n.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const uR=new mWe;class tme{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Uu(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Uu(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Uu(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Uu(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Uu(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Uu(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Uu(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Uu(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Uu(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Uu(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Uu(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Uu(i){return typeof i=="number"?`${i}px`:i}function Nn(i){return new tme(i)}function lo(i,e){i instanceof tme?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}class _We{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class sK{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");lo(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");lo(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const s=document.createElement("div");lo(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=n),o.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");sK._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let n=" ";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function vWe(i,e,t){new sK(e,t).read(i)}const Pp=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new me,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},yWe=Tn?1.5:1.35,e8=8;class U0{static createFromValidatedSettings(e,t,n){const s=e.get(49),r=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return U0._create(s,r,o,a,l,c,u,t,n)}static _create(e,t,n,s,r,o,a,l,c){o===0?o=yWe*n:o<e8&&(o=o*n),o=Math.round(o),o<e8&&(o=e8);const u=1+(c?0:Pp.getZoomLevel()*.1);return n*=u,o*=u,r===p2.TRANSLATE&&(t==="normal"||t==="bold"?r=p2.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new U0({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Wl.fontFamily,t=U0._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const bWe=2;class aU extends U0{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=bWe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class wWe extends Be{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=aR(e);let n=this._cache.get(t);return n||(n=new CWe,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),n=t.getValues();let s=!1;for(const r of n)r.isTrusted||(s=!0,t.remove(r));s&&this._onDidChange.fire()}readFontInfo(e,t){const n=this._ensureCache(e);if(!n.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new aU({pixelRatio:uR.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return n.get(t)}_createRequest(e,t,n,s){const r=new _We(e,t);return n.push(r),s==null||s.push(r),r}_actualReadFontInfo(e,t){const n=[],s=[],r=this._createRequest("n",0,n,s),o=this._createRequest("ｍ",0,n,null),a=this._createRequest(" ",0,n,s),l=this._createRequest("0",0,n,s),c=this._createRequest("1",0,n,s),u=this._createRequest("2",0,n,s),h=this._createRequest("3",0,n,s),d=this._createRequest("4",0,n,s),f=this._createRequest("5",0,n,s),g=this._createRequest("6",0,n,s),p=this._createRequest("7",0,n,s),_=this._createRequest("8",0,n,s),m=this._createRequest("9",0,n,s),v=this._createRequest("→",0,n,s),y=this._createRequest("￫",0,n,null),C=this._createRequest("·",0,n,s),S=this._createRequest("⸱",0,n,null),x="|/-_ilm%";for(let I=0,N=x.length;I<N;I++)this._createRequest(x.charAt(I),0,n,s),this._createRequest(x.charAt(I),1,n,s),this._createRequest(x.charAt(I),2,n,s);vWe(e,t,n);const E=Math.max(l.width,c.width,u.width,h.width,d.width,f.width,g.width,p.width,_.width,m.width);let L=t.fontFeatureSettings===xv.OFF;const T=s[0].width;for(let I=1,N=s.length;L&&I<N;I++){const P=T-s[I].width;if(P<-.001||P>.001){L=!1;break}}let D=!0;return L&&y.width!==T&&(D=!1),y.width>v.width&&(D=!1),new aU({pixelRatio:uR.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:L,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:a.width,middotWidth:C.width,wsmiddotWidth:S.width,maxDigitWidth:E},!0)}}class CWe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const lU=new wWe;var fh;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(fh||(fh={}));const oi=En("instantiationService");function SWe(i,e,t){e[fh.DI_TARGET]===e?e[fh.DI_DEPENDENCIES].push({id:i,index:t}):(e[fh.DI_DEPENDENCIES]=[{id:i,index:t}],e[fh.DI_TARGET]=e)}function En(i){if(fh.serviceIds.has(i))return fh.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");SWe(e,t,s)};return e.toString=()=>i,fh.serviceIds.set(i,e),e}const sr=En("codeEditorService"),Jo=En("modelService"),a4=En("textModelService");class vg extends Be{constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Tv extends Be{constructor(){super(...arguments),this._onWillRun=this._register(new me),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new me),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}const AL=class AL{constructor(){this.id=AL.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new AL,...n]:t=n);return t}async run(){}};AL.ID="vs.actions.separator";let Oo=AL;class l4{get actions(){return this._actions}constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=n}async run(){}}const _O=class _O extends vg{constructor(){super(_O.ID,k("submenu.empty","(empty)"),void 0,!1)}};_O.ID="vs.actions.empty";let cU=_O;function nw(i){return{id:i.id,label:i.label,tooltip:i.tooltip??i.label,class:i.class,enabled:i.enabled??!0,checked:i.checked,run:async(...e)=>i.run(...e)}}var uU;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(uU||(uU={}));var An;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(d){const f=e.exec(d.id);if(!f)return t(yt.error);const[,g,p]=f,_=["codicon","codicon-"+g];return p&&_.push("codicon-modifier-"+p.substring(1)),_}i.asClassNameArray=t;function n(d){return t(d).join(" ")}i.asClassName=n;function s(d){return"."+t(d).join(".")}i.asCSSSelector=s;function r(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||uU.isThemeColor(d.color))}i.isThemeIcon=r;const o=new RegExp(`^\\$\\((${i.iconNameExpression}(?:${i.iconModifierExpression})?)\\)$`);function a(d){const f=o.exec(d);if(!f)return;const[,g]=f;return{id:g}}i.fromString=a;function l(d){return{id:d}}i.fromId=l;function c(d,f){let g=d.id;const p=g.lastIndexOf("~");return p!==-1&&(g=g.substring(0,p)),f&&(g=`${g}~${f}`),{id:g}}i.modify=c;function u(d){const f=d.id.lastIndexOf("~");if(f!==-1)return d.id.substring(f+1)}i.getModifier=u;function h(d,f){var g,p;return d.id===f.id&&((g=d.color)==null?void 0:g.id)===((p=f.color)==null?void 0:p.id)}i.isEqual=h})(An||(An={}));const jl=En("commandService"),Na=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new me,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.metadata&&Array.isArray(i.metadata.args)){const o=[];for(const l of i.metadata.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return B9e(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new tl,this._commands.set(t,n));const s=n.unshift(i),r=en(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return Na.registerCommand(i,(t,...n)=>t.get(jl).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Fn.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Na.registerCommand("noop",()=>{});function t8(...i){switch(i.length){case 1:return k("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",i[0]);case 2:return k("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",i[0],i[1]);case 3:return k("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}const xWe=k("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),EWe=k("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),Ob=class Ob{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw Rj(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(t8("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(t8("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(t8("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=Ob._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(xWe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(EWe);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!n){e++;break}else r===91?n=!0:r===92?t=!0:r===93&&(n=!1);e++}for(;e<this._input.length&&Ob._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};Ob._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),Ob._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let J_=Ob;const co=new Map;co.set("false",!1);co.set("true",!0);co.set("isMac",Tn);co.set("isLinux",ka);co.set("isWindows",rl);co.set("isWeb",VC);co.set("isMacNative",Tn&&!VC);co.set("isEdge",eze);co.set("isFirefox",Q9e);co.set("isChrome",npe);co.set("isSafari",J9e);const LWe=Object.prototype.hasOwnProperty,TWe={regexParsingWithErrorRecovery:!0},kWe=k("contextkey.parser.error.emptyString","Empty context key expression"),MWe=k("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),DWe=k("contextkey.parser.error.noInAfterNot","'in' after 'not'."),ane=k("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),AWe=k("contextkey.parser.error.unexpectedToken","Unexpected token"),IWe=k("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),NWe=k("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),RWe=k("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var xd;let PWe=(xd=class{constructor(e=TWe){this._config=e,this._scanner=new J_,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:kWe,offset:0,lexeme:"",additionalInfo:MWe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),s=n.type===17?IWe:void 0;throw this._parsingErrors.push({message:AWe,offset:n.offset,lexeme:J_.getLexeme(n),additionalInfo:s}),xd._parseError}return t}catch(t){if(t!==xd._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:jn.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:jn.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Yo.INSTANCE;case 12:return this._advance(),Ma.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,ane),t==null?void 0:t.negate()}case 17:return this._advance(),s1.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),jn.true();case 12:return this._advance(),jn.false();case 0:{this._advance();const t=this._expr();return this._consume(1,ane),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const r=s.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",s)}return S2.create(t,l)}switch(s.type){case 10:case 19:{const r=[s.lexeme];this._advance();let o=this._peek(),a=0;for(let d=0;d<s.lexeme.length;d++)s.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;r.push(J_.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let h;try{h=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",s)}return jn.regex(t,h)}case 18:{const r=s.lexeme;this._advance();let o=null;if(!UUe(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),u=r[l+1]==="i"?"i":"";try{o=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(o===null)throw this._errExpectedButGot("REGEX",s);return S2.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,DWe);const s=this._value();return jn.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return jn.equals(t,s);switch(s){case"true":return jn.has(t);case"false":return jn.not(t);default:return jn.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return jn.notEquals(t,s);switch(s){case"true":return jn.not(t);case"false":return jn.has(t);default:return jn.notEquals(t,s)}}case 5:return this._advance(),p4.create(t,this._value());case 6:return this._advance(),m4.create(t,this._value());case 7:return this._advance(),f4.create(t,this._value());case 8:return this._advance(),g4.create(t,this._value());case 13:return this._advance(),jn.in(t,this._value());default:return jn.has(t)}}case 20:throw this._parsingErrors.push({message:NWe,offset:e.offset,lexeme:"",additionalInfo:RWe}),xd._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const s=k("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,J_.getLexeme(t)),r=t.offset,o=J_.getLexeme(t);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:n}),xd._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},xd._parseError=new Error,xd);const iZ=class iZ{static false(){return Yo.INSTANCE}static true(){return Ma.INSTANCE}static has(e){return i1.create(e)}static equals(e,t){return nk.create(e,t)}static notEquals(e,t){return h4.create(e,t)}static regex(e,t){return S2.create(e,t)}static in(e,t){return c4.create(e,t)}static notIn(e,t){return u4.create(e,t)}static not(e){return s1.create(e)}static and(...e){return E0.create(e,null,!0)}static or(...e){return Yf.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};iZ._parser=new PWe({regexParsingWithErrorRecovery:!1});let jn=iZ;function OWe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function HE(i,e){return i.cmp(e)}const vO=class vO{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Ma.INSTANCE}};vO.INSTANCE=new vO;let Yo=vO;const yO=class yO{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Yo.INSTANCE}};yO.INSTANCE=new yO;let Ma=yO;class i1{static create(e,t=null){const n=co.get(e);return typeof n=="boolean"?n?Ma.INSTANCE:Yo.INSTANCE:new i1(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:ime(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=co.get(this.key);return typeof e=="boolean"?e?Ma.INSTANCE:Yo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=s1.create(this.key,this)),this.negated}}class nk{static create(e,t,n=null){if(typeof t=="boolean")return t?i1.create(e,n):s1.create(e,n);const s=co.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Ma.INSTANCE:Yo.INSTANCE:new nk(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=co.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ma.INSTANCE:Yo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=h4.create(this.key,this.value,this)),this.negated}}class c4{static create(e,t){return new c4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?LWe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=u4.create(this.key,this.valueKey)),this.negated}}class u4{static create(e,t){return new u4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=c4.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class h4{static create(e,t,n=null){if(typeof t=="boolean")return t?s1.create(e,n):i1.create(e,n);const s=co.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Yo.INSTANCE:Ma.INSTANCE:new h4(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=co.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Yo.INSTANCE:Ma.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=nk.create(this.key,this.value,this)),this.negated}}class s1{static create(e,t=null){const n=co.get(e);return typeof n=="boolean"?n?Yo.INSTANCE:Ma.INSTANCE:new s1(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:ime(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=co.get(this.key);return typeof e=="boolean"?e?Yo.INSTANCE:Ma.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=i1.create(this.key,this)),this.negated}}function d4(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Yo.INSTANCE}class f4{static create(e,t,n=null){return d4(t,s=>new f4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=m4.create(this.key,this.value,this)),this.negated}}class g4{static create(e,t,n=null){return d4(t,s=>new g4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=p4.create(this.key,this.value,this)),this.negated}}class p4{static create(e,t,n=null){return d4(t,s=>new p4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=g4.create(this.key,this.value,this)),this.negated}}class m4{static create(e,t,n=null){return d4(t,s=>new m4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:r1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=f4.create(this.key,this.value,this)),this.negated}}class S2{static create(e,t){return new S2(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=rK.create(this)),this.negated}}class rK{static create(e){return new rK(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function nme(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class E0{static create(e,t,n){return E0._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=HE(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=nme(this.expr);return e===this.expr?this:E0.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const s=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Yo.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&r)return Ma.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(HE);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=Yf.create(o.expr.map(u=>E0.create([u,a],null,n)),null,l);c&&(s.push(c),s.sort(HE))}if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Yo.INSTANCE;if(s.length===1)return s[0]}return new E0(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Yf.create(e,this,!0)}return this.negated}}class Yf{static create(e,t,n){return Yf._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=HE(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=nme(this.expr);return e===this.expr?this:Yf.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Ma.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Yo.INSTANCE;s.sort(HE)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Ma.INSTANCE;if(s.length===1)return s[0]}return new Yf(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const r of cne(t))for(const o of cne(n))s.push(E0.create([r,o],null,!1));e.unshift(Yf.create(s,null,!1))}this.negated=Yf.create(e,this,!0)}return this.negated}}const Fb=class Fb extends i1{static all(){return Fb._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Fb._info.push({...n,key:e}):n!==!0&&Fb._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return nk.create(this.key,e)}};Fb._info=[];let Mt=Fb;const Jn=En("contextKeyService");function ime(i,e){return i<e?-1:i>e?1:0}function r1(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function hU(i,e){if(i.type===0||e.type===1)return!0;if(i.type===9)return e.type===9?lne(i.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(hU(i,t))return!0;return!1}if(i.type===6){if(e.type===6)return lne(e.expr,i.expr);for(const t of i.expr)if(hU(t,e))return!0;return!1}return i.equals(e)}function lne(i,e){let t=0,n=0;for(;t<i.length&&n<e.length;){const s=i[t].cmp(e[n]);if(s<0)return!1;s===0&&t++,n++}return t===i.length}function cne(i){return i.type===9?i.expr:[i]}function n8(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function oK(i,e="Unreachable"){throw new Error(e)}function une(i){i||di(new Qn("Soft Assertion Failed"))}function kv(i){if(!i()){debugger;i(),di(new Qn("Assertion Failed"))}}function aK(i,e){let t=0;for(;t<i.length-1;){const n=i[t],s=i[t+1];if(!e(n,s))return!1;t++}return!0}class FWe{constructor(){this.data=new Map}add(e,t){n8(Vl(e)),n8(wa(t)),n8(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Or=new FWe;class lK{constructor(){this._coreKeybindings=new tl,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(du===1){if(e&&e.win)return e.win}else if(du===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=lK.bindToCurrentPlatform(e),n=new Tt;if(t&&t.primary){const s=Xz(t.primary,du);s&&n.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,r=t.secondary.length;s<r;s++){const o=t.secondary[s],a=Xz(o,du);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Id(this.registerKeybindingRule(e),Na.registerCommand(e))}_registerDefaultKeybinding(e,t,n,s,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,en(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(zWe)),this._cachedMergedKeybindings.slice(0)}}const ik=new lK,BWe={EditorModes:"platform.keybindingsRegistry"};Or.add(BWe.EditorModes,ik);function zWe(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}var UWe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hne=function(i,e){return function(t,n){e(t,n,i)}},LI;function $E(i){return i.command!==void 0}function VWe(i){return i.submenu!==void 0}const Y=class Y{constructor(e){if(Y._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);Y._instances.set(e,this),this.id=e}};Y._instances=new Map,Y.CommandPalette=new Y("CommandPalette"),Y.DebugBreakpointsContext=new Y("DebugBreakpointsContext"),Y.DebugCallStackContext=new Y("DebugCallStackContext"),Y.DebugConsoleContext=new Y("DebugConsoleContext"),Y.DebugVariablesContext=new Y("DebugVariablesContext"),Y.NotebookVariablesContext=new Y("NotebookVariablesContext"),Y.DebugHoverContext=new Y("DebugHoverContext"),Y.DebugWatchContext=new Y("DebugWatchContext"),Y.DebugToolBar=new Y("DebugToolBar"),Y.DebugToolBarStop=new Y("DebugToolBarStop"),Y.DebugCallStackToolbar=new Y("DebugCallStackToolbar"),Y.DebugCreateConfiguration=new Y("DebugCreateConfiguration"),Y.EditorContext=new Y("EditorContext"),Y.SimpleEditorContext=new Y("SimpleEditorContext"),Y.EditorContent=new Y("EditorContent"),Y.EditorLineNumberContext=new Y("EditorLineNumberContext"),Y.EditorContextCopy=new Y("EditorContextCopy"),Y.EditorContextPeek=new Y("EditorContextPeek"),Y.EditorContextShare=new Y("EditorContextShare"),Y.EditorTitle=new Y("EditorTitle"),Y.EditorTitleRun=new Y("EditorTitleRun"),Y.EditorTitleContext=new Y("EditorTitleContext"),Y.EditorTitleContextShare=new Y("EditorTitleContextShare"),Y.EmptyEditorGroup=new Y("EmptyEditorGroup"),Y.EmptyEditorGroupContext=new Y("EmptyEditorGroupContext"),Y.EditorTabsBarContext=new Y("EditorTabsBarContext"),Y.EditorTabsBarShowTabsSubmenu=new Y("EditorTabsBarShowTabsSubmenu"),Y.EditorTabsBarShowTabsZenModeSubmenu=new Y("EditorTabsBarShowTabsZenModeSubmenu"),Y.EditorActionsPositionSubmenu=new Y("EditorActionsPositionSubmenu"),Y.ExplorerContext=new Y("ExplorerContext"),Y.ExplorerContextShare=new Y("ExplorerContextShare"),Y.ExtensionContext=new Y("ExtensionContext"),Y.GlobalActivity=new Y("GlobalActivity"),Y.CommandCenter=new Y("CommandCenter"),Y.CommandCenterCenter=new Y("CommandCenterCenter"),Y.LayoutControlMenuSubmenu=new Y("LayoutControlMenuSubmenu"),Y.LayoutControlMenu=new Y("LayoutControlMenu"),Y.MenubarMainMenu=new Y("MenubarMainMenu"),Y.MenubarAppearanceMenu=new Y("MenubarAppearanceMenu"),Y.MenubarDebugMenu=new Y("MenubarDebugMenu"),Y.MenubarEditMenu=new Y("MenubarEditMenu"),Y.MenubarCopy=new Y("MenubarCopy"),Y.MenubarFileMenu=new Y("MenubarFileMenu"),Y.MenubarGoMenu=new Y("MenubarGoMenu"),Y.MenubarHelpMenu=new Y("MenubarHelpMenu"),Y.MenubarLayoutMenu=new Y("MenubarLayoutMenu"),Y.MenubarNewBreakpointMenu=new Y("MenubarNewBreakpointMenu"),Y.PanelAlignmentMenu=new Y("PanelAlignmentMenu"),Y.PanelPositionMenu=new Y("PanelPositionMenu"),Y.ActivityBarPositionMenu=new Y("ActivityBarPositionMenu"),Y.MenubarPreferencesMenu=new Y("MenubarPreferencesMenu"),Y.MenubarRecentMenu=new Y("MenubarRecentMenu"),Y.MenubarSelectionMenu=new Y("MenubarSelectionMenu"),Y.MenubarShare=new Y("MenubarShare"),Y.MenubarSwitchEditorMenu=new Y("MenubarSwitchEditorMenu"),Y.MenubarSwitchGroupMenu=new Y("MenubarSwitchGroupMenu"),Y.MenubarTerminalMenu=new Y("MenubarTerminalMenu"),Y.MenubarViewMenu=new Y("MenubarViewMenu"),Y.MenubarHomeMenu=new Y("MenubarHomeMenu"),Y.OpenEditorsContext=new Y("OpenEditorsContext"),Y.OpenEditorsContextShare=new Y("OpenEditorsContextShare"),Y.ProblemsPanelContext=new Y("ProblemsPanelContext"),Y.SCMInputBox=new Y("SCMInputBox"),Y.SCMChangesSeparator=new Y("SCMChangesSeparator"),Y.SCMChangesContext=new Y("SCMChangesContext"),Y.SCMIncomingChanges=new Y("SCMIncomingChanges"),Y.SCMIncomingChangesContext=new Y("SCMIncomingChangesContext"),Y.SCMIncomingChangesSetting=new Y("SCMIncomingChangesSetting"),Y.SCMOutgoingChanges=new Y("SCMOutgoingChanges"),Y.SCMOutgoingChangesContext=new Y("SCMOutgoingChangesContext"),Y.SCMOutgoingChangesSetting=new Y("SCMOutgoingChangesSetting"),Y.SCMIncomingChangesAllChangesContext=new Y("SCMIncomingChangesAllChangesContext"),Y.SCMIncomingChangesHistoryItemContext=new Y("SCMIncomingChangesHistoryItemContext"),Y.SCMOutgoingChangesAllChangesContext=new Y("SCMOutgoingChangesAllChangesContext"),Y.SCMOutgoingChangesHistoryItemContext=new Y("SCMOutgoingChangesHistoryItemContext"),Y.SCMChangeContext=new Y("SCMChangeContext"),Y.SCMResourceContext=new Y("SCMResourceContext"),Y.SCMResourceContextShare=new Y("SCMResourceContextShare"),Y.SCMResourceFolderContext=new Y("SCMResourceFolderContext"),Y.SCMResourceGroupContext=new Y("SCMResourceGroupContext"),Y.SCMSourceControl=new Y("SCMSourceControl"),Y.SCMSourceControlInline=new Y("SCMSourceControlInline"),Y.SCMSourceControlTitle=new Y("SCMSourceControlTitle"),Y.SCMHistoryTitle=new Y("SCMHistoryTitle"),Y.SCMTitle=new Y("SCMTitle"),Y.SearchContext=new Y("SearchContext"),Y.SearchActionMenu=new Y("SearchActionContext"),Y.StatusBarWindowIndicatorMenu=new Y("StatusBarWindowIndicatorMenu"),Y.StatusBarRemoteIndicatorMenu=new Y("StatusBarRemoteIndicatorMenu"),Y.StickyScrollContext=new Y("StickyScrollContext"),Y.TestItem=new Y("TestItem"),Y.TestItemGutter=new Y("TestItemGutter"),Y.TestProfilesContext=new Y("TestProfilesContext"),Y.TestMessageContext=new Y("TestMessageContext"),Y.TestMessageContent=new Y("TestMessageContent"),Y.TestPeekElement=new Y("TestPeekElement"),Y.TestPeekTitle=new Y("TestPeekTitle"),Y.TestCallStack=new Y("TestCallStack"),Y.TouchBarContext=new Y("TouchBarContext"),Y.TitleBarContext=new Y("TitleBarContext"),Y.TitleBarTitleContext=new Y("TitleBarTitleContext"),Y.TunnelContext=new Y("TunnelContext"),Y.TunnelPrivacy=new Y("TunnelPrivacy"),Y.TunnelProtocol=new Y("TunnelProtocol"),Y.TunnelPortInline=new Y("TunnelInline"),Y.TunnelTitle=new Y("TunnelTitle"),Y.TunnelLocalAddressInline=new Y("TunnelLocalAddressInline"),Y.TunnelOriginInline=new Y("TunnelOriginInline"),Y.ViewItemContext=new Y("ViewItemContext"),Y.ViewContainerTitle=new Y("ViewContainerTitle"),Y.ViewContainerTitleContext=new Y("ViewContainerTitleContext"),Y.ViewTitle=new Y("ViewTitle"),Y.ViewTitleContext=new Y("ViewTitleContext"),Y.CommentEditorActions=new Y("CommentEditorActions"),Y.CommentThreadTitle=new Y("CommentThreadTitle"),Y.CommentThreadActions=new Y("CommentThreadActions"),Y.CommentThreadAdditionalActions=new Y("CommentThreadAdditionalActions"),Y.CommentThreadTitleContext=new Y("CommentThreadTitleContext"),Y.CommentThreadCommentContext=new Y("CommentThreadCommentContext"),Y.CommentTitle=new Y("CommentTitle"),Y.CommentActions=new Y("CommentActions"),Y.CommentsViewThreadActions=new Y("CommentsViewThreadActions"),Y.InteractiveToolbar=new Y("InteractiveToolbar"),Y.InteractiveCellTitle=new Y("InteractiveCellTitle"),Y.InteractiveCellDelete=new Y("InteractiveCellDelete"),Y.InteractiveCellExecute=new Y("InteractiveCellExecute"),Y.InteractiveInputExecute=new Y("InteractiveInputExecute"),Y.InteractiveInputConfig=new Y("InteractiveInputConfig"),Y.ReplInputExecute=new Y("ReplInputExecute"),Y.IssueReporter=new Y("IssueReporter"),Y.NotebookToolbar=new Y("NotebookToolbar"),Y.NotebookStickyScrollContext=new Y("NotebookStickyScrollContext"),Y.NotebookCellTitle=new Y("NotebookCellTitle"),Y.NotebookCellDelete=new Y("NotebookCellDelete"),Y.NotebookCellInsert=new Y("NotebookCellInsert"),Y.NotebookCellBetween=new Y("NotebookCellBetween"),Y.NotebookCellListTop=new Y("NotebookCellTop"),Y.NotebookCellExecute=new Y("NotebookCellExecute"),Y.NotebookCellExecuteGoTo=new Y("NotebookCellExecuteGoTo"),Y.NotebookCellExecutePrimary=new Y("NotebookCellExecutePrimary"),Y.NotebookDiffCellInputTitle=new Y("NotebookDiffCellInputTitle"),Y.NotebookDiffCellMetadataTitle=new Y("NotebookDiffCellMetadataTitle"),Y.NotebookDiffCellOutputsTitle=new Y("NotebookDiffCellOutputsTitle"),Y.NotebookOutputToolbar=new Y("NotebookOutputToolbar"),Y.NotebookOutlineFilter=new Y("NotebookOutlineFilter"),Y.NotebookOutlineActionMenu=new Y("NotebookOutlineActionMenu"),Y.NotebookEditorLayoutConfigure=new Y("NotebookEditorLayoutConfigure"),Y.NotebookKernelSource=new Y("NotebookKernelSource"),Y.BulkEditTitle=new Y("BulkEditTitle"),Y.BulkEditContext=new Y("BulkEditContext"),Y.TimelineItemContext=new Y("TimelineItemContext"),Y.TimelineTitle=new Y("TimelineTitle"),Y.TimelineTitleContext=new Y("TimelineTitleContext"),Y.TimelineFilterSubMenu=new Y("TimelineFilterSubMenu"),Y.AccountsContext=new Y("AccountsContext"),Y.SidebarTitle=new Y("SidebarTitle"),Y.PanelTitle=new Y("PanelTitle"),Y.AuxiliaryBarTitle=new Y("AuxiliaryBarTitle"),Y.AuxiliaryBarHeader=new Y("AuxiliaryBarHeader"),Y.TerminalInstanceContext=new Y("TerminalInstanceContext"),Y.TerminalEditorInstanceContext=new Y("TerminalEditorInstanceContext"),Y.TerminalNewDropdownContext=new Y("TerminalNewDropdownContext"),Y.TerminalTabContext=new Y("TerminalTabContext"),Y.TerminalTabEmptyAreaContext=new Y("TerminalTabEmptyAreaContext"),Y.TerminalStickyScrollContext=new Y("TerminalStickyScrollContext"),Y.WebviewContext=new Y("WebviewContext"),Y.InlineCompletionsActions=new Y("InlineCompletionsActions"),Y.InlineEditsActions=new Y("InlineEditsActions"),Y.InlineEditActions=new Y("InlineEditActions"),Y.NewFile=new Y("NewFile"),Y.MergeInput1Toolbar=new Y("MergeToolbar1Toolbar"),Y.MergeInput2Toolbar=new Y("MergeToolbar2Toolbar"),Y.MergeBaseToolbar=new Y("MergeBaseToolbar"),Y.MergeInputResultToolbar=new Y("MergeToolbarResultToolbar"),Y.InlineSuggestionToolbar=new Y("InlineSuggestionToolbar"),Y.InlineEditToolbar=new Y("InlineEditToolbar"),Y.ChatContext=new Y("ChatContext"),Y.ChatCodeBlock=new Y("ChatCodeblock"),Y.ChatCompareBlock=new Y("ChatCompareBlock"),Y.ChatMessageTitle=new Y("ChatMessageTitle"),Y.ChatExecute=new Y("ChatExecute"),Y.ChatExecuteSecondary=new Y("ChatExecuteSecondary"),Y.ChatInputSide=new Y("ChatInputSide"),Y.AccessibleView=new Y("AccessibleView"),Y.MultiDiffEditorFileToolbar=new Y("MultiDiffEditorFileToolbar"),Y.DiffEditorHunkToolbar=new Y("DiffEditorHunkToolbar"),Y.DiffEditorSelectionToolbar=new Y("DiffEditorSelectionToolbar");let Zr=Y;const o1=En("menuService"),IL=class IL{static for(e){let t=this._all.get(e);return t||(t=new IL(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof IL&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};IL._all=new Map;let e0=IL;const qw=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new rUe({merge:e0.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(e0.for(Zr.CommandPalette)),en(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(e0.for(Zr.CommandPalette))})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new tl,this._menuItems.set(i,t));const n=t.push(e);return this._onDidChangeMenu.fire(e0.for(i)),en(()=>{n(),this._onDidChangeMenu.fire(e0.for(i))})}appendMenuItems(i){const e=new Tt;for(const{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Zr.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)$E(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class GE extends l4{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let yg=LI=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,s,r,o,a){var c;this.hideActions=s,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=LI.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&An.isThemeIcon(u.icon)&&(l=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}l||(l=An.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new LI(t,void 0,n,s,void 0,o,a):void 0,this._options=n,this.class=l&&An.asClassName(l)}run(...e){var n,s;let t=[];return(n=this._options)!=null&&n.arg&&(t=[...t,this._options.arg]),(s=this._options)!=null&&s.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};yg=LI=UWe([hne(5,Jn),hne(6,jl)],yg);const a1=En("telemetryService"),Ih=En("logService");var ya;(function(i){i[i.Off=0]="Off",i[i.Trace=1]="Trace",i[i.Debug=2]="Debug",i[i.Info=3]="Info",i[i.Warning=4]="Warning",i[i.Error=5]="Error"})(ya||(ya={}));const sme=ya.Info;class rme extends Be{constructor(){super(...arguments),this.level=sme,this._onDidChangeLogLevel=this._register(new me),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==ya.Off&&this.level<=e}}class WWe extends rme{constructor(e=sme,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(ya.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(ya.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(ya.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(ya.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(ya.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class HWe extends rme{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function $We(i){switch(i){case ya.Trace:return"trace";case ya.Debug:return"debug";case ya.Info:return"info";case ya.Warning:return"warn";case ya.Error:return"error";case ya.Off:return"off"}}new Mt("logLevel",$We(ya.Info));class _4{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=jn.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ik.registerKeybindingRule(s)}}Na.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){qw.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class cK extends _4{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,s){return this._implementations.push({priority:e,name:t,implementation:n,when:s}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(Ih),s=e.get(Jn);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=s.getContext(Po());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class ome extends _4{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Mv extends _4{static bindToContribution(e){return class extends Mv{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){const o=e(s);o&&this._callback(o,r)}}}static runEditorCommand(e,t,n,s){const r=e.get(sr),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(Jn).contextMatchesRules(n??void 0))return s(a,o,t)})}runCommand(e,t){return Mv.runEditorCommand(e,t,this.precondition,(n,s,r)=>this.runEditorCommand(n,s,r))}}function Zt(i){return Cd.INSTANCE.registerEditorCommand(i),i}function ame(i,e,t){Cd.INSTANCE.registerEditorContribution(i,e,t)}var iw;(function(i){function e(o){return Cd.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Cd.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Cd.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return Cd.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return Cd.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(iw||(iw={}));const GWe={EditorCommonContributions:"editor.contributions"},bO=class bO{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};bO.INSTANCE=new bO;let Cd=bO;Or.add(GWe.EditorCommonContributions,Cd.INSTANCE);function sk(i){return i.register(),i}const lme=sk(new cK({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Zr.MenubarEditMenu,group:"1_do",title:k({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Zr.CommandPalette,group:"",title:k("undo","Undo"),order:1}]}));sk(new ome(lme,{id:"default:undo",precondition:void 0}));const cme=sk(new cK({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Zr.MenubarEditMenu,group:"1_do",title:k({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Zr.CommandPalette,group:"",title:k("redo","Redo"),order:1}]}));sk(new ome(cme,{id:"default:redo",precondition:void 0}));const jWe=sk(new cK({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Zr.MenubarSelectionMenu,group:"1_basic",title:k({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Zr.CommandPalette,group:"",title:k("selectAll","Select All"),order:1}]})),KWe="modulepreload",qWe=function(i,e){return new URL(i,e).href},dne={},XWe=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=qWe(c,n),c in dne)return;dne[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let g=o.length-1;g>=0;g--){const p=o[g];if(p.href===c&&(!u||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":KWe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},fne="default",YWe="$initialize";let gne=!1;function dU(i){VC&&(gne||(gne=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class ZWe{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.method=s,this.args=r,this.type=0}}class pne{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=1}}class QWe{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=s,this.arg=r,this.type=2}}class JWe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class eHe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class tHe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,n){const s=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[s]={resolve:r,reject:o},this._send(new ZWe(this._workerId,s,e,t,n))})}listen(e,t,n){let s=null;const r=new me({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,r),this._send(new QWe(this._workerId,s,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new eHe(this._workerId,s)),s=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const n={get:(s,r)=>(typeof r=="string"&&!s[r]&&(hme(r)?s[r]=o=>this.listen(e,r,o):ume(r)?s[r]=this.listen(e,r,void 0):r.charCodeAt(0)===36&&(s[r]=async(...o)=>(await(t==null?void 0:t()),this.sendMessage(e,r,o)))),s[r])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new pne(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=Ete(s.detail)),this._send(new pne(this._workerId,t,void 0,Ete(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new JWe(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class nHe extends Be{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},r=>{this._protocol.handleMessage(r)},r=>{di(r)})),this._protocol=new tHe({sendMessage:(r,o)=>{this._worker.postMessage(r,o)},handleMessage:(r,o,a)=>this._handleMessage(r,o,a),handleEvent:(r,o,a)=>this._handleEvent(r,o,a)}),this._protocol.setWorkerId(this._worker.getId());let n=null;const s=globalThis.require;typeof s<"u"&&typeof s.getConfig=="function"?n=s.getConfig():typeof globalThis.requirejs<"u"&&(n=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(fne,YWe,[this._worker.getId(),JSON.parse(JSON.stringify(n)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(fne,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(r=>{this._onError("Worker failed to load "+t.amdModuleId,r)})}_handleMessage(e,t,n){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,n))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,n){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if(hme(t)){const r=s[t].call(s,n);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(ume(t)){const r=s[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function ume(i){return i[0]==="o"&&i[1]==="n"&&kp(i.charCodeAt(2))}function hme(i){return/^onDynamic/.test(i)&&kp(i.charCodeAt(9))}function l1(i,e){var n;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(i,e)}catch(s){di(s);return}try{return(n=globalThis.trustedTypes)==null?void 0:n.createPolicy(i,e)}catch(s){di(s);return}}let cb;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?cb=globalThis.workerttPolicy:cb=l1("defaultWorkerFactory",{createScriptURL:i=>i});function iHe(i,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const n=t.getWorkerUrl("workerMain.js",e);return new Worker(cb?cb.createScriptURL(n):n,{name:e,type:"module"})}}if(i){const n=sHe(e,i.toString(!0)),s=new Worker(cb?cb.createScriptURL(n):n,{name:e,type:"module"});return rHe(s)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function sHe(i,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const r=e.lastIndexOf("?"),o=e.lastIndexOf("#",r),a=r>0?new URLSearchParams(e.substring(r+1,~o?o:void 0)):new URLSearchParams;nU.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${i}`:e=`${e}#${i}`}const s=new Blob([Lj([`/*${i}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Zge())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(kj())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${i}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}function rHe(i){return new Promise((e,t)=>{i.onmessage=function(n){n.data.type==="vscode-worker-ready"&&(i.onmessage=null,e(i))},i.onerror=t})}function oHe(i){return typeof i.then=="function"}class aHe extends Be{constructor(e,t,n,s,r,o){super(),this.id=n,this.label=s;const a=iHe(e,s);oHe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){r(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(en(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",o),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)==null||n.then(s=>{try{s.postMessage(e,t)}catch(r){di(r),di(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:r}))}})}}class lHe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=s4.asBrowserUri(`${e}.esm.js`)}}const wO=class wO{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,n){const s=++wO.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new aHe(e.esmModuleLocation,e.amdModuleId,s,e.label||"anonymous"+s,t,r=>{dU(r),this._webWorkerFailedBeforeError=r,n(r)})}};wO.LAST_WORKER_ID=0;let fU=wO;function cHe(i,e){const t=typeof i=="string"?new lHe(i,e):i;return new nHe(new fU,t)}var Go;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(Go||(Go={}));class i8{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(n);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const s=String.fromCharCode(n);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class uHe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)ex(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),ex(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),ex(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),ex(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&ex(this.autoClosingPairsCloseSingleChar,t.close,t)}}function ex(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}const Bb=class Bb{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new i8(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new i8({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new i8({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Bb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Bb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};Bb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,Bb.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let gU=Bb;function L0(i,e){const t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n);let r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new hHe(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class hHe{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function sd(i){return(i&3)!==0}const mne=typeof Buffer<"u";let s8;class uK{static wrap(e){return mne&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new uK(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return mne?this.buffer.toString():(s8||(s8=new TextDecoder),s8.decode(this.buffer))}}function dHe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function fHe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function Ju(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function eh(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function _ne(i,e){return i[e]}function vne(i,e,t){i[t]=e}let r8;function dme(){return r8||(r8=new TextDecoder("UTF-16LE")),r8}let o8;function gHe(){return o8||(o8=new TextDecoder("UTF-16BE")),o8}let a8;function fme(){return a8||(a8=Z9e()?dme():gHe()),a8}function pHe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?mHe(i,e,t):dme().decode(n)}function mHe(i,e,t){const n=[];let s=0;for(let r=0;r<t;r++){const o=dHe(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class v4{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return fme().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||fr(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class hR{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=hR._toSet(this.open),this._closeSet=hR._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function _He(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[u,h]=a;return l===u||l===h||c===u||c===h},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[u,h]=i[c];a.push(u),l.push(h)}a.length>0&&r.push({open:a,close:l})}return r}class vHe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=_He(t);this.brackets=n.map((s,r)=>new hR(e,r,s.open,s.close,yHe(s.open,s.close,n,r),bHe(s.open,s.close,n,r))),this.forwardRegex=wHe(this.brackets),this.reversedRegex=CHe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function gme(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function pme(i,e){return i.length-e.length}function y4(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function yHe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)gme(s[r],t,n,s);return s=y4(s),s.sort(pme),s.reverse(),rk(s)}function bHe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)gme(s[r],t,n,s);return s=y4(s),s.sort(pme),s.reverse(),rk(s.map(hK))}function wHe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=y4(e),rk(e)}function CHe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=y4(e),rk(e.map(hK))}function SHe(i){const e=/^[\w ]+$/.test(i);return i=Ng(i),e?`\\b${i}\\b`:i}function rk(i,e){const t=`(${i.map(SHe).join(")|(")})`;return xpe(t,!0,e)}const hK=function(){function i(n){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return fme().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class qc{static _findPrevBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=n.length-(r.index||0),a=r[0].length,l=s+o;return new de(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=hK(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=s+o;return new de(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class xHe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return Cv(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(sd(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=qc.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function dD(i){return i.global&&(i.lastIndex=0),!0}class EHe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&dD(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&dD(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&dD(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&dD(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class ub{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=ub._createOpenBracketRegExp(t[0]),s=ub._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:Go.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:Go.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ng(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",ub._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ng(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,ub._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return di(t),null}}}const hs=En("configurationService");function pU(i,e){const t=Object.create(null);for(const n in i)mme(t,n,i[n],e);return t}function mme(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function LHe(i,e){const t=e.split(".");_me(i,t)}function _me(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(_me(n,e),Object.keys(n).length===0&&delete i[t])}}function yne(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function THe(i){return i.replace(/[\[\]]/g,"")}const yr=En("languageService");class pd{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const vme=[];function Pn(i,e,t){e instanceof pd||(e=new pd(e,[],!!t)),vme.push([i,e])}function bne(){return vme}const Zf=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),b4={JSONContribution:"base.contributions.json"};function kHe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class MHe{constructor(){this._onDidChangeSchema=new me,this.schemasById={}}registerSchema(e,t){this.schemasById[kHe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const DHe=new MHe;Or.add(b4.JSONContribution,DHe);const c1={Configuration:"base.contributions.configuration"},tx="vscode://schemas/settings/resourceLanguage",wne=Or.as(b4.JSONContribution);class AHe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new me,this._onDidUpdateConfiguration=new me,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:k("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},wne.registerSchema(tx,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),wne.registerSchema(tx,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:s,source:r}of e)for(const o in s){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=s[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),Lm.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),n.push(...dR(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const u=this.configurationProperties[o];u&&(this.updatePropertyDefaultValue(o,u),this.updateSchema(o,u))}}this.doRegisterOverrideIdentifiers(n)}updateDefaultOverrideProperty(e,t,n){const s={type:"object",default:t.value,description:k("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",THe(e)),$ref:tx,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,s){const r=(s==null?void 0:s.value)||{},o=(s==null?void 0:s.source)??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(wa(l)&&(gc(r[a])||wa(r[a]))){if(r[a]={...r[a]??{},...l},n)for(const u in l)o.set(`${a}.${u}`,n)}else r[a]=l,n?o.set(a,n):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,s){const r=this.configurationProperties[e],o=(s==null?void 0:s.value)??(r==null?void 0:r.defaultDefaultValue);let a=n;if(wa(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(gc(o)||wa(o)))){if(a=(s==null?void 0:s.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)n&&a.set(`${e}.${c}`,n);t={...wa(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,n),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,n,s,r=3,o){var c;r=Al(e.scope)?r:e.scope;const a=e.properties;if(a)for(const u in a){const h=a[u];if(t&&RHe(u,h)){delete a[u];continue}if(h.source=n,h.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,h),Lm.test(u)?h.scope=void 0:(h.scope=Al(h.scope)?r:h.scope,h.restricted=Al(h.restricted)?!!(s!=null&&s.includes(u)):h.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],(c=a[u].policy)!=null&&c.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.add(u)}const l=e.allOf;if(l)for(const u of l)this.validateAndRegisterProperties(u,t,n,s,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=n=>{const s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const r=n.allOf;r==null||r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:k("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:k("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:tx};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){k("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),k("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var o;const n=(o=this.configurationDefaultsOverrides.get(e))==null?void 0:o.configurationDefaultOverrideValue;let s,r;n&&(!t.disallowConfigurationDefault||!n.source)&&(s=n.value,r=n.source),gc(s)&&(s=t.defaultDefaultValue,r=void 0),gc(s)&&(s=NHe(t.type)),t.default=s,t.defaultValueSource=r}}const yme="\\[([^\\]]+)\\]",Cne=new RegExp(yme,"g"),IHe=`^(${yme})+$`,Lm=new RegExp(IHe);function dR(i){const e=[];if(Lm.test(i)){let t=Cne.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=Cne.exec(i)}}return Cv(e)}function NHe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const TI=new AHe;Or.add(c1.Configuration,TI);function RHe(i,e){var t,n,s,r;return i.trim()?Lm.test(i)?k("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):TI.getConfigurationProperties()[i]!==void 0?k("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):(t=e.policy)!=null&&t.name&&TI.getPolicyConfigurations().get((n=e.policy)==null?void 0:n.name)!==void 0?k("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,(s=e.policy)==null?void 0:s.name,TI.getPolicyConfigurations().get((r=e.policy)==null?void 0:r.name)):null:k("config.property.empty","Cannot register an empty property")}const PHe={ModesRegistry:"editor.modesRegistry"};class OHe{constructor(){this._onDidChangeLanguages=new me,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Xw=new OHe;Or.add(PHe.ModesRegistry,Xw);const vu="plaintext",FHe=".txt";Xw.registerLanguage({id:vu,extensions:[FHe],aliases:[k("plainText.alias","Plain Text"),"text"],mimetypes:[Zf.text]});Or.as(c1.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class BHe{constructor(e,t){this.languageId=e;const n=t.brackets?Sne(t.brackets):[],s=new Vte(a=>{const l=new Set;return{info:new zHe(this,a,l),closing:l}}),r=new Vte(a=>{const l=new Set,c=new Set;return{info:new UHe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=s.get(a),u=r.get(l);c.closing.add(u.info),u.opening.add(c.info)}const o=t.colorizedBracketPairs?Sne(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=s.get(a),u=r.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return rk(t,e)}}function Sne(i){return i.filter(([e,t])=>e!==""&&t!=="")}class bme{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class zHe extends bme{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class UHe extends bme{constructor(e,t,n,s){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var VHe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xne=function(i,e){return function(t,n){e(t,n,i)}};class l8{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Yd=En("languageConfigurationService");let mU=class extends Be{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new GHe),this.onDidChangeEmitter=this._register(new me),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(_U));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>n.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new l8(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new l8(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new l8(s.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=WHe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};mU=VHe([xne(0,hs),xne(1,yr)],mU);function WHe(i,e,t,n){let s=e.getLanguageConfiguration(i);if(!s){if(!n.isRegisteredLanguageId(i))return new sw(i,{});s=new sw(i,{})}const r=HHe(s.languageId,t),o=Cme([s.underlyingConfig,r]);return new sw(s.languageId,o)}const _U={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function HHe(i,e){const t=e.getValue(_U.brackets,{overrideIdentifier:i}),n=e.getValue(_U.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:Ene(t),colorizedBracketPairs:Ene(n)}}function Ene(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function wme(i,e,t){const n=i.getLineContent(e);let s=Wo(n);return s.length>t-1&&(s=s.substring(0,t-1)),s}class $He{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new Lne(e,t,++this._order);return this._entries.push(n),this._resolved=null,en(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new sw(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(Lne.cmp),Cme(this._entries.map(e=>e.configuration)))}}function Cme(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class Lne{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class Tne{constructor(e){this.languageId=e}}class GHe extends Be{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._register(this.register(vu,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let s=this._entries.get(e);s||(s=new $He(e),this._entries.set(e,s));const r=s.register(t,n);return this._onDidChange.fire(new Tne(e)),en(()=>{r.dispose(),this._onDidChange.fire(new Tne(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class sw{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new ub(this.underlyingConfig):null,this.comments=sw._handleComments(this.underlyingConfig),this.characterPair=new gU(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Aj,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new EHe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new BHe(e,this.underlyingConfig)}getWordDefinition(){return Ij(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new vHe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new xHe(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}getAutoClosingPairs(){return new uHe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[s,r]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=r}return n}}Pn(Yd,mU,1);class yp{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class kne{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function jHe(i,e,t){return new Qf(new kne(i),new kne(e)).ComputeDiff(t).changes}class j1{static Assert(e,t){if(!e)throw new Error(t)}}class K1{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}class Mne{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new yp(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Qf{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=Qf._getElements(e),[a,l,c]=Qf._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Qf._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=Yj(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Qf._getStrictElement(this._originalSequence,e),s=Qf._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let h;return n<=s?(j1.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new yp(e,0,n,s-n+1)]):e<=t?(j1.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),h=[new yp(e,t-e+1,n,0)]):(j1.Assert(e===t+1,"originalStart should only be one more than originalEnd"),j1.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),c=o[0],u=a[0];if(l!==null)return l;if(!r[0]){const h=this.ComputeDiffRecursive(e,c,n,u,r);let d=[];return r[0]?d=[new yp(c+1,t-(c+1)+1,u+1,s-(u+1)+1)]:d=this.ComputeDiffRecursive(c+1,t,u+1,s,r),this.ConcatenateChanges(h,d)}return[new yp(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_,m,v){let y=null,C=null,S=new Mne,x=t,E=n,L=f[0]-_[0]-s,T=-1073741824,D=this.m_forwardHistory.length-1;do{const I=L+e;I===x||I<E&&c[I-1]<c[I+1]?(h=c[I+1],g=h-L-s,h<T&&S.MarkNextChange(),T=h,S.AddModifiedElement(h+1,g),L=I+1-e):(h=c[I-1]+1,g=h-L-s,h<T&&S.MarkNextChange(),T=h-1,S.AddOriginalElement(h,g+1),L=I-1-e),D>=0&&(c=this.m_forwardHistory[D],e=c[0],x=1,E=c.length-1)}while(--D>=-1);if(y=S.getReverseChanges(),v[0]){let I=f[0]+1,N=_[0]+1;if(y!==null&&y.length>0){const P=y[y.length-1];I=Math.max(I,P.getOriginalEnd()),N=Math.max(N,P.getModifiedEnd())}C=[new yp(I,d-I+1,N,p-N+1)]}else{S=new Mne,x=o,E=a,L=f[0]-_[0]-l,T=1073741824,D=m?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const I=L+r;I===x||I<E&&u[I-1]>=u[I+1]?(h=u[I+1]-1,g=h-L-l,h>T&&S.MarkNextChange(),T=h+1,S.AddOriginalElement(h+1,g+1),L=I+1-r):(h=u[I-1],g=h-L-l,h>T&&S.MarkNextChange(),T=h,S.AddModifiedElement(h+1,g+1),L=I-1-r),D>=0&&(u=this.m_reverseHistory[D],r=u[0],x=1,E=u.length-1)}while(--D>=-1);C=S.getChanges()}return this.ConcatenateChanges(y,C)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,c=0,u=0,h=0,d=0,f=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-n),p=g+1,_=new Int32Array(p),m=new Int32Array(p),v=s-n,y=t-e,C=e-n,S=t-s,E=(y-v)%2===0;_[v]=e,m[y]=t,a[0]=!1;for(let L=1;L<=g/2+1;L++){let T=0,D=0;u=this.ClipDiagonalBound(v-L,L,v,p),h=this.ClipDiagonalBound(v+L,L,v,p);for(let N=u;N<=h;N+=2){N===u||N<h&&_[N-1]<_[N+1]?l=_[N+1]:l=_[N-1]+1,c=l-(N-v)-C;const P=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[N]=l,l+c>T+D&&(T=l,D=c),!E&&Math.abs(N-y)<=L-1&&l>=m[N])return r[0]=l,o[0]=c,P<=m[N]&&L<=1448?this.WALKTRACE(v,u,h,C,y,d,f,S,_,m,l,t,r,c,s,o,E,a):null}const I=(T-e+(D-n)-L)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(T,I))return a[0]=!0,r[0]=T,o[0]=D,I>0&&L<=1448?this.WALKTRACE(v,u,h,C,y,d,f,S,_,m,l,t,r,c,s,o,E,a):(e++,n++,[new yp(e,t-e+1,n,s-n+1)]);d=this.ClipDiagonalBound(y-L,L,y,p),f=this.ClipDiagonalBound(y+L,L,y,p);for(let N=d;N<=f;N+=2){N===d||N<f&&m[N-1]>=m[N+1]?l=m[N+1]-1:l=m[N-1],c=l-(N-y)-S;const P=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(m[N]=l,E&&Math.abs(N-v)<=L&&l<=_[N])return r[0]=l,o[0]=c,P>=_[N]&&L<=1448?this.WALKTRACE(v,u,h,C,y,d,f,S,_,m,l,t,r,c,s,o,E,a):null}if(L<=1447){let N=new Int32Array(h-u+2);N[0]=v-u+1,K1.Copy2(_,u,N,1,h-u+1),this.m_forwardHistory.push(N),N=new Int32Array(f-d+2),N[0]=y-d+1,K1.Copy2(m,d,N,1,f-d+1),this.m_reverseHistory.push(N)}}return this.WALKTRACE(v,u,h,C,y,d,f,S,_,m,l,t,r,c,s,o,E,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const h=e[t-1];s=h.originalStart+h.originalLength,r=h.modifiedStart+h.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const d=n.originalStart-h,f=n.modifiedStart-h;if(d<s||f<r||o&&!this.OriginalElementsAreEqual(d,d+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const p=(d===s&&f===r?5:0)+this._boundaryScore(d,n.originalLength,f,n.modifiedLength);p>c&&(c=p,l=h)}n.originalStart-=l,n.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,u=s.modifiedStart,h=r.modifiedStart+r.modifiedLength,d=h-u;if(o<5&&c<20&&d<20){const f=this._findBetterContiguousSequence(a,c,u,d,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=h-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,c=0,u=0;for(let h=e;h<o;h++)for(let d=n;d<a;d++){const f=this._contiguousSequenceScore(h,d,r);f>0&&f>l&&(l=f,c=h,u=d)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return K1.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],K1.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return K1.Copy(e,0,s,0,e.length),K1.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(j1.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),j1.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new yp(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}function fR(i){return i<0?0:i>255?255:i|0}function q1(i){return i<0?0:i>4294967295?4294967295:i|0}class ok{constructor(e){const t=fR(e);this._defaultValue=t,this._asciiMap=ok._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=fR(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class KHe{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class qHe{constructor(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const s=new KHe(n,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let c8=null;function XHe(){return c8===null&&(c8=new qHe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),c8}let nx=null;function YHe(){if(nx===null){nx=new ok(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)nx.set(i.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)nx.set(e.charCodeAt(t),2)}return nx}class gR{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=XHe()){const n=YHe(),s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,u=0,h=0,d=1,f=!1,g=!1,p=!1,_=!1;for(;c<l;){let m=!1;const v=a.charCodeAt(c);if(d===13){let y;switch(v){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:p=!0,g=!0,y=0;break;case 93:p=!1,y=g?0:1;break;case 123:_=!0,y=0;break;case 125:y=_?0:1;break;case 39:case 34:case 96:h===v?y=1:h===39||h===34||h===96?y=0:y=1;break;case 42:y=h===42?1:0;break;case 124:y=h===124?1:0;break;case 32:y=p?0:1;break;default:y=n.get(v)}y===1&&(s.push(gR._createLink(n,a,r,u,c)),m=!0)}else if(d===12){let y;v===91?(g=!0,y=0):y=n.get(v),y===1?m=!0:d=13}else d=t.nextState(d,v),d===0&&(m=!0);m&&(d=1,f=!1,g=!1,_=!1,u=c+1,h=v),c++}d===13&&s.push(gR._createLink(n,a,r,u,l))}return s}}function ZHe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:gR.computeLinks(i)}const CO=class CO{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,s,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){const o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}};CO.INSTANCE=new CO;let vU=CO;const NL=class NL{static getChannel(e){return e.getChannel(NL.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(NL.CHANNEL_NAME,t)}};NL.CHANNEL_NAME="editorWorkerHost";let yU=NL;var Dne,Ane;class QHe{constructor(e,t){this.uri=e,this.value=t}}function JHe(i){return Array.isArray(i)}const v0=class v0{constructor(e,t){if(this[Dne]="ResourceMap",e instanceof v0)this.map=new Map(e.map),this.toKey=t??v0.defaultToKey;else if(JHe(e)){this.map=new Map,this.toKey=t??v0.defaultToKey;for(const[n,s]of e)this.set(n,s)}else this.map=new Map,this.toKey=e??v0.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new QHe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Dne=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};v0.defaultToKey=e=>e.toString();let Hl=v0;class e$e{constructor(){this[Ane]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(Ane=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}let t$e=class extends e$e{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}};class ak extends t$e{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class n$e{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Sme{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class i$e extends ok{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,s=e.length;n<s;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;n=s}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const Ine=new ak(10);function Yw(i,e){const t=`${i}/${e.join(",")}`;let n=Ine.get(t);return n||(n=new i$e(i,e),Ine.set(t,n)),n}var pR;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(pR||(pR={}));var Tm;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(Tm||(Tm={}));var Zw;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(Zw||(Zw={}));class kI{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&il(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class x2{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function s$e(i){return i&&typeof i.read=="function"}class u8{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class r$e{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class o$e{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function a$e(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const l$e=999;class X1{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=c$e(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=xpe(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new r$e(t,this.wordSeparators?Yw(this.wordSeparators,[]):null,n?this.searchString:null)}}function c$e(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function t0(i,e,t){if(!t)return new x2(i,null);const n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new x2(i,n)}class Nne{constructor(e){const t=[];let n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class fD{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new hb(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){const f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const u=e.getPositionAt(a),h=e.getPositionAt(c);return new de(u.lineNumber,u.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new Nne(a):null,c=[];let u=0,h;for(n.reset(0);h=n.next(a);)if(c[u++]=t0(this._getMultilineMatchRange(e,o,a,l,h.index,h[0]),h,s),u>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=t.length;let p=-f;for(;(p=t.indexOf(d,p+f))!==-1;)if((!c||dK(c,t,g,p,f))&&(o[r++]=new x2(new de(n,p+1+s,n,p+1+f+s),null),r>=l))return r;return r}const u=new hb(e.wordSeparators,e.regex);let h;u.reset(0);do if(h=u.next(t),h&&(o[r++]=t0(new de(n,h.index+1+s,n,h.index+1+h[0].length+s),h,a),r>=l))return r;while(h);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new hb(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new Se(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new de(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new Nne(l):null;n.reset(t.column-1);const u=n.next(l);return u?t0(this._getMultilineMatchRange(e,o,l,c,u.index,u[0]),u,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Se(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const u=(o+c-1)%r,h=e.getLineContent(u+1),d=this._findFirstMatchInLine(n,h,u+1,1,s);if(d)return d}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?t0(new de(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new hb(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new de(1,1,t.lineNumber,t.column),n,s,10*l$e);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new Se(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const u=(r+o-c-1)%r,h=e.getLineContent(u+1),d=this._findLastMatchInLine(n,h,u+1,s);if(d)return d}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=t0(new de(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function u$e(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function h$e(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==0)return!0}return!1}function dK(i,e,t,n,s){return u$e(i,e,t,n,s)&&h$e(i,e,t,n,s)}class hb{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){sR(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||dK(this._wordSeparators,e,t,s,r))return n}while(n);return null}}class d$e{static computeUnicodeHighlights(e,t,n){const s=n?n.startLineNumber:1,r=n?n.endLineNumber:e.getLineCount(),o=new Rne(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${f$e(Array.from(a))}`,"g");const c=new hb(null,l),u=[];let h=!1,d,f=0,g=0,p=0;e:for(let _=s,m=r;_<=m;_++){const v=e.getLineContent(_),y=v.length;c.reset(0);do if(d=c.next(v),d){let C=d.index,S=d.index+d[0].length;if(C>0){const T=v.charCodeAt(C-1);fr(T)&&C--}if(S+1<y){const T=v.charCodeAt(S-1);fr(T)&&S++}const x=v.substring(C,S);let E=g2(C+1,Aj,v,0);E&&E.endColumn<=C+1&&(E=null);const L=o.shouldHighlightNonBasicASCII(x,E?E.word:null);if(L!==0){if(L===3?f++:L===2?g++:L===1?p++:oK(),u.length>=1e3){h=!0;break e}u.push(new de(_,C+1,_,S+1))}}while(d)}return{ranges:u,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const n=new Rne(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=n.ambiguousCharacters.getPrimaryConfusable(r),a=y2.getLocales().filter(l=>!y2.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function f$e(i,e){return`[${Ng(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class Rne{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=y2.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of VE.codePoints)Pne(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=Gj(o);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!VE.isInvisibleCharacter(a)&&(r=!0)}return!s&&r?0:this.options.invisibleCharacters&&!Pne(e)&&VE.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function Pne(i){return i===" "||i===`
`||i==="	"}class MI{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class xme{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class nn{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let s=n;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(n===s)t.splice(n,0,e);else{const r=Math.min(e.start,t[n].start),o=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(n,s-n,new nn(r,o))}}static tryCreate(e,t){if(!(e>t))return new nn(e,t)}static ofLength(e){return new nn(0,e)}static ofStartAndLength(e,t){return new nn(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Qn(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new nn(this.start+e,this.endExclusive+e)}deltaStart(e){return new nn(this.start+e,this.endExclusive)}deltaEnd(e){return new nn(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new nn(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new nn(t,n)}intersects(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Qn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Qn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class fK{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new nn(s,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new fK;for(const n of this._sortedRanges){const s=n.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function mR(i,e){const t=g$e(i,e);if(t!==-1)return i[t]}function g$e(i,e,t=i.length-1){for(let n=t;n>=0;n--){const s=i[n];if(e(s))return n}return-1}function Qw(i,e){const t=E2(i,e);return t===-1?void 0:i[t]}function E2(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?s=o+1:r=o}return s-1}function p$e(i,e){const t=bU(i,e);return t===i.length?void 0:i[t]}function bU(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?r=o:s=o+1}return s}const SO=class SO{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(SO.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=E2(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};SO.assertInvariants=!1;let _R=SO;function Eme(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>0&&(t=s)}return t}function m$e(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>=0&&(t=s)}return t}function _$e(i,e){return Eme(i,(t,n)=>-e(t,n))}function v$e(i,e){if(i.length===0)return-1;let t=0;for(let n=1;n<i.length;n++){const s=i[n];e(s,i[t])>0&&(t=n)}return t}let Xt=class Mf{static fromRangeInclusive(e){return new Mf(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new uc(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new uc(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new Qn("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),n=Math.max(n,e[s].endLineNumberExclusive);return new Mf(t,n)}static ofLength(e,t){return new Mf(e,e+t)}static deserialize(e){return new Mf(e[0],e[1])}constructor(e,t){if(e>t)throw new Qn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Mf(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Mf(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Mf(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Mf(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new de(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new de(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new nn(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class uc{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=bU(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=E2(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,s)}}contains(e){const t=Qw(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=Qw(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,s=0,r=null;for(;n<this._normalizedRanges.length||s<e._normalizedRanges.length;){let o=null;if(n<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(o=a,n++):(o=l,s++)}else n<this._normalizedRanges.length?(o=this._normalizedRanges[n],n++):(o=e._normalizedRanges[s],s++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new Xt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new uc(t)}subtractFrom(e){const t=bU(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=E2(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new uc([e]);const s=[];let r=e.startLineNumber;for(let o=t;o<n;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&s.push(new Xt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&s.push(new Xt(r,e.endLineNumberExclusive)),new uc(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,s=0;for(;n<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const r=this._normalizedRanges[n],o=e._normalizedRanges[s],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?n++:s++}return new uc(t)}getWithDelta(e){return new uc(this._normalizedRanges.map(t=>t.delta(e)))}}const Dp=class Dp{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new Dp(0,t.column-e.column):new Dp(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return Dp.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const s of e)s===`
`?(t++,n=0):n++;return new Dp(t,n)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new de(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new de(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new Se(e.lineNumber,e.column+this.columnCount):new Se(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};Dp.zero=new Dp(0,0);let km=Dp;class y$e{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new nn(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new km(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class b$e{constructor(e){this.edits=e,kv(()=>aK(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}apply(e){let t="",n=new Se(1,1);for(const r of this.edits){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=One(n,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,n=l}const s=One(n,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new C$e(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,n=0,s=0;for(const r of this.edits){const o=km.ofText(r.text),a=Se.lift({lineNumber:r.range.startLineNumber+n,column:r.range.startColumn+(r.range.startLineNumber===t?s:0)}),l=o.createRange(a);e.push(l),n=l.endLineNumber-r.range.endLineNumber,s=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}}class w$e{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function One(i,e){if(i.lineNumber===e.lineNumber&&i.column===Number.MAX_SAFE_INTEGER)return de.fromPositions(e,e);if(!i.isBeforeOrEqual(e))throw new Qn("start must be before end");return new de(i.lineNumber,i.column,e.lineNumber,e.column)}class Lme{get endPositionExclusive(){return this.length.addToPosition(new Se(1,1))}}class C$e extends Lme{constructor(e){super(),this.value=e,this._t=new y$e(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class Ao{static inverse(e,t,n){const s=[];let r=1,o=1;for(const l of e){const c=new Ao(new Xt(r,l.original.startLineNumber),new Xt(o,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new Ao(new Xt(r,t+1),new Xt(o,n+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,n){const s=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(n);o&&!o.isEmpty&&a&&!a.isEmpty&&s.push(new Ao(o,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Ao(this.modified,this.original)}join(e){return new Ao(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Ml(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Qn("not a valid diff");return new Ml(new de(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new de(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Ml(new de(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new de(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(Fne(this.original.endLineNumberExclusive,e)&&Fne(this.modified.endLineNumberExclusive,t))return new Ml(new de(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new de(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Ml(de.fromPositions(new Se(this.original.startLineNumber,1),Y1(new Se(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),de.fromPositions(new Se(this.modified.startLineNumber,1),Y1(new Se(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Ml(de.fromPositions(Y1(new Se(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Y1(new Se(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),de.fromPositions(Y1(new Se(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Y1(new Se(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Qn}}function Y1(i,e){if(i.lineNumber<1)return new Se(1,1);if(i.lineNumber>e.length)return new Se(e.length,e[e.length-1].length+1);const t=e[i.lineNumber-1];return i.column>t.length+1?new Se(i.lineNumber,t.length+1):i}function Fne(i,e){return i>=1&&i<=e.length}class $l extends Ao{static fromRangeMappings(e){const t=Xt.join(e.map(s=>Xt.fromRangeInclusive(s.originalRange))),n=Xt.join(e.map(s=>Xt.fromRangeInclusive(s.modifiedRange)));return new $l(t,n,e)}constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){var e;return new $l(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new $l(this.original,this.modified,[this.toRangeMapping()])}}class Ml{static assertSorted(e){for(let t=1;t<e.length;t++){const n=e[t-1],s=e[t];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new Qn("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Ml(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new w$e(this.originalRange,t)}}const S$e=3;class x$e{computeDiff(e,t,n){var l;const r=new T$e(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const c of r.changes){let u;c.originalEndLineNumber===0?u=new Xt(c.originalStartLineNumber+1,c.originalStartLineNumber+1):u=new Xt(c.originalStartLineNumber,c.originalEndLineNumber+1);let h;c.modifiedEndLineNumber===0?h=new Xt(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):h=new Xt(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let d=new $l(u,h,(l=c.charChanges)==null?void 0:l.map(f=>new Ml(new de(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new de(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===d.modified.startLineNumber||a.original.endLineNumberExclusive===d.original.startLineNumber)&&(d=new $l(a.original.join(d.original),a.modified.join(d.modified),a.innerChanges&&d.innerChanges?a.innerChanges.concat(d.innerChanges):void 0),o.pop()),o.push(d),a=d}return kv(()=>aK(o,(c,u)=>u.original.startLineNumber-c.original.endLineNumberExclusive===u.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<u.original.startLineNumber&&c.modified.endLineNumberExclusive<u.modified.startLineNumber)),new MI(o,[],r.quitEarly)}}function Tme(i,e,t,n){return new Qf(i,e,t).ComputeDiff(n)}let Bne=class{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=wU(e[s],1),n[s]=CU(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let d=u;d<h;d++)s[a]=c.charCodeAt(d-1),r[a]=l+1,o[a]=d,a++;!e&&l<n&&(s[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new E$e(s,r,o)}};class E$e{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class rw{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),u=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new rw(s,r,o,a,l,c,u,h)}}function L$e(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<S$e?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class jE{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,c,u,h,d;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=s.getStartLineNumber(t.modifiedStart)-1,h=0):(u=s.getStartLineNumber(t.modifiedStart),h=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let p=Tme(f,g,r,!0).changes;a&&(p=L$e(p)),d=[];for(let _=0,m=p.length;_<m;_++)d.push(rw.createFromDiffChange(p[_],f,g))}}return new jE(l,c,u,h,d)}}class T$e{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Bne(e),this.modified=new Bne(t),this.continueLineDiff=zne(n.maxComputationTime),this.continueCharDiff=zne(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=Tme(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(jE.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;r<u&&o<h;){const d=this.originalLines[r],f=this.modifiedLines[o];if(d!==f){{let g=wU(d,1),p=wU(f,1);for(;g>1&&p>1;){const _=d.charCodeAt(g-2),m=f.charCodeAt(p-2);if(_!==m)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=CU(d,1),p=CU(f,1);const _=d.length+1,m=f.length+1;for(;g<_&&p<m;){const v=d.charCodeAt(g-1),y=d.charCodeAt(p-1);if(v!==y)break;g++,p++}(g<_||p<m)&&this._pushTrimWhitespaceCharChange(s,r+1,g,_,o+1,p,m)}}r++,o++}c&&(s.push(jE.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new rw(t,n,t,s,r,o,r,a)]),e.push(new jE(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new rw(t,n,t,s,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new rw(t,n,t,s,r,o,r,a)),!0):!1}}function wU(i,e){const t=sl(i);return t===-1?e:t+1}function CU(i,e){const t=t1(i);return t===-1?e:t+2}function zne(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class bg{static trivial(e,t){return new bg([new Gs(nn.ofLength(e.length),nn.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new bg([new Gs(nn.ofLength(e.length),nn.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Gs{static invert(e,t){const n=[];return Gge(e,(s,r)=>{n.push(Gs.fromOffsetPairs(s?s.getEndExclusives():ag.zero,r?r.getStarts():new ag(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new Gs(new nn(e.offset1,t.offset1),new nn(e.offset2,t.offset2))}static assertSorted(e){let t;for(const n of e){if(t&&!(t.seq1Range.endExclusive<=n.seq1Range.start&&t.seq2Range.endExclusive<=n.seq2Range.start))throw new Qn("Sequence diffs must be sorted");t=n}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Gs(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Gs(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Gs(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Gs(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Gs(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new Gs(t,n)}getStarts(){return new ag(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new ag(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const y0=class y0{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new y0(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};y0.zero=new y0(0,0),y0.max=new y0(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let ag=y0;const xO=class xO{isValid(){return!0}};xO.instance=new xO;let L2=xO;class k$e{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Qn("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class h8{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function SU(i){return i===32||i===9}const RL=class RL{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let s=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){s++;const c=o[l],u=RL.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}s++;const a=RL.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const n=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<n;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}};RL.chrKeys=new Map;let vR=RL;class M$e{compute(e,t,n=L2.instance,s){if(e.length===0||t.length===0)return bg.trivial(e,t);const r=new h8(e.length,t.length),o=new h8(e.length,t.length),a=new h8(e.length,t.length);for(let g=0;g<e.length;g++)for(let p=0;p<t.length;p++){if(!n.isValid())return bg.trivialTimedOut(e,t);const _=g===0?0:r.get(g-1,p),m=p===0?0:r.get(g,p-1);let v;e.getElement(g)===t.getElement(p)?(g===0||p===0?v=0:v=r.get(g-1,p-1),g>0&&p>0&&o.get(g-1,p-1)===3&&(v+=a.get(g-1,p-1)),v+=s?s(g,p):1):v=-1;const y=Math.max(_,m,v);if(y===v){const C=g>0&&p>0?a.get(g-1,p-1):0;a.set(g,p,C+1),o.set(g,p,3)}else y===_?(a.set(g,p,0),o.set(g,p,1)):y===m&&(a.set(g,p,0),o.set(g,p,2));r.set(g,p,y)}const l=[];let c=e.length,u=t.length;function h(g,p){(g+1!==c||p+1!==u)&&l.push(new Gs(new nn(g+1,c),new nn(p+1,u))),c=g,u=p}let d=e.length-1,f=t.length-1;for(;d>=0&&f>=0;)o.get(d,f)===3?(h(d,f),d--,f--):o.get(d,f)===1?d--:f--;return h(-1,-1),l.reverse(),new bg(l,!1)}}class kme{compute(e,t,n=L2.instance){if(e.length===0||t.length===0)return bg.trivial(e,t);const s=e,r=t;function o(p,_){for(;p<s.length&&_<r.length&&s.getElement(p)===r.getElement(_);)p++,_++;return p}let a=0;const l=new D$e;l.set(0,o(0,0));const c=new A$e;c.set(0,l.get(0)===0?null:new Une(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!n.isValid())return bg.trivialTimedOut(s,r);const p=-Math.min(a,r.length+a%2),_=Math.min(a,s.length+a%2);for(u=p;u<=_;u+=2){const m=u===_?-1:l.get(u+1),v=u===p?-1:l.get(u-1)+1,y=Math.min(Math.max(m,v),s.length),C=y-u;if(y>s.length||C>r.length)continue;const S=o(y,C);l.set(u,S);const x=y===m?c.get(u+1):c.get(u-1);if(c.set(u,S!==y?new Une(x,y,C,S-y):x),l.get(u)===s.length&&l.get(u)-u===r.length)break e}}let h=c.get(u);const d=[];let f=s.length,g=r.length;for(;;){const p=h?h.x+h.length:0,_=h?h.y+h.length:0;if((p!==f||_!==g)&&d.push(new Gs(new nn(p,f),new nn(_,g))),!h)break;f=h.x,g=h.y,h=h.prev}return d.reverse(),new bg(d,!1)}}class Une{constructor(e,t,n,s){this.prev=e,this.x=t,this.y=n,this.length=s}}class D$e{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class A$e{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class yR{constructor(e,t,n){this.lines=e,this.range=t,this.considerWhitespaceChanges=n,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let r=e[s-1],o=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!n){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new nn(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=Wne(e>0?this.elements[e-1]:-1),n=Wne(e<this.elements.length?this.elements[e]:-1);if(t===7&&n===8)return 0;if(t===8)return 150;let s=0;return t!==n&&(s+=10,t===0&&n===1&&(s+=1)),s+=Vne(t),s+=Vne(n),s}translateOffset(e,t="right"){const n=E2(this.firstElementOffsetByLineIdx,r=>r<=e),s=e-this.firstElementOffsetByLineIdx[n];return new Se(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){const t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?de.fromPositions(n,n):de.fromPositions(t,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!d8(this.elements[e]))return;let t=e;for(;t>0&&d8(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&d8(this.elements[n]);)n++;return new nn(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=Qw(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,n=p$e(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new nn(t,n)}}function d8(i){return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57}const I$e={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function Vne(i){return I$e[i]}function Wne(i){return i===10?8:i===13?7:SU(i)?6:i>=97&&i<=122?0:i>=65&&i<=90?1:i>=48&&i<=57?2:i===-1?3:i===44||i===59?5:4}function N$e(i,e,t,n,s,r){let{moves:o,excludedChanges:a}=P$e(i,e,t,r);if(!r.isValid())return[];const l=i.filter(u=>!a.has(u)),c=O$e(l,n,s,e,t,r);return F9(o,c),o=F$e(o),o=o.filter(u=>{const h=u.original.toOffsetRange().slice(e).map(f=>f.trim());return h.join(`
`).length>=15&&R$e(h,f=>f.length>=2)>=2}),o=B$e(i,o),o}function R$e(i,e){let t=0;for(const n of i)e(n)&&t++;return t}function P$e(i,e,t,n){const s=[],r=i.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new vR(l.original,e,l)),o=new Set(i.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new vR(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,u;for(const h of o){const d=l.computeSimilarity(h);d>c&&(c=d,u=h)}if(c>.9&&u&&(o.delete(u),s.push(new Ao(l.range,u.range)),a.add(l.source),a.add(u.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function O$e(i,e,t,n,s,r){const o=[],a=new Sme;for(const d of i)for(let f=d.original.startLineNumber;f<d.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new Xt(f,f+3)})}const l=[];i.sort(_u(d=>d.modified.startLineNumber,lm));for(const d of i){let f=[];for(let g=d.modified.startLineNumber;g<d.modified.endLineNumberExclusive-2;g++){const p=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,_=new Xt(g,g+3),m=[];a.forEach(p,({range:v})=>{for(const C of f)if(C.originalLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive&&C.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){C.originalLineRange=new Xt(C.originalLineRange.startLineNumber,v.endLineNumberExclusive),C.modifiedLineRange=new Xt(C.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),m.push(C);return}const y={modifiedLineRange:_,originalLineRange:v};l.push(y),m.push(y)}),f=m}if(!r.isValid())return[]}l.sort(O9e(_u(d=>d.modifiedLineRange.length,lm)));const c=new uc,u=new uc;for(const d of l){const f=d.modifiedLineRange.startLineNumber-d.originalLineRange.startLineNumber,g=c.subtractFrom(d.modifiedLineRange),p=u.subtractFrom(d.originalLineRange).getWithDelta(f),_=g.getIntersection(p);for(const m of _.ranges){if(m.length<3)continue;const v=m,y=m.delta(-f);o.push(new Ao(y,v)),c.addRange(v),u.addRange(y)}}o.sort(_u(d=>d.original.startLineNumber,lm));const h=new _R(i);for(let d=0;d<o.length;d++){const f=o[d],g=h.findLastMonotonous(x=>x.original.startLineNumber<=f.original.startLineNumber),p=Qw(i,x=>x.modified.startLineNumber<=f.modified.startLineNumber),_=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-p.modified.startLineNumber),m=h.findLastMonotonous(x=>x.original.startLineNumber<f.original.endLineNumberExclusive),v=Qw(i,x=>x.modified.startLineNumber<f.modified.endLineNumberExclusive),y=Math.max(m.original.endLineNumberExclusive-f.original.endLineNumberExclusive,v.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let C;for(C=0;C<_;C++){const x=f.original.startLineNumber-C-1,E=f.modified.startLineNumber-C-1;if(x>n.length||E>s.length||c.contains(E)||u.contains(x)||!Hne(n[x-1],s[E-1],r))break}C>0&&(u.addRange(new Xt(f.original.startLineNumber-C,f.original.startLineNumber)),c.addRange(new Xt(f.modified.startLineNumber-C,f.modified.startLineNumber)));let S;for(S=0;S<y;S++){const x=f.original.endLineNumberExclusive+S,E=f.modified.endLineNumberExclusive+S;if(x>n.length||E>s.length||c.contains(E)||u.contains(x)||!Hne(n[x-1],s[E-1],r))break}S>0&&(u.addRange(new Xt(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+S)),c.addRange(new Xt(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+S))),(C>0||S>0)&&(o[d]=new Ao(new Xt(f.original.startLineNumber-C,f.original.endLineNumberExclusive+S),new Xt(f.modified.startLineNumber-C,f.modified.endLineNumberExclusive+S)))}return o}function Hne(i,e,t){if(i.trim()===e.trim())return!0;if(i.length>300&&e.length>300)return!1;const s=new kme().compute(new yR([i],new de(1,1,1,i.length),!1),new yR([e],new de(1,1,1,e.length),!1),t);let r=0;const o=Gs.invert(s.diffs,i.length);for(const u of o)u.seq1Range.forEach(h=>{SU(i.charCodeAt(h))||r++});function a(u){let h=0;for(let d=0;d<i.length;d++)SU(u.charCodeAt(d))||h++;return h}const l=a(i.length>e.length?i:e);return r/l>.6&&l>10}function F$e(i){if(i.length===0)return i;i.sort(_u(t=>t.original.startLineNumber,lm));const e=[i[0]];for(let t=1;t<i.length;t++){const n=e[e.length-1],s=i[t],r=s.original.startLineNumber-n.original.endLineNumberExclusive,o=s.modified.startLineNumber-n.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=n.join(s);continue}e.push(s)}return e}function B$e(i,e){const t=new _R(i);return e=e.filter(n=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<n.original.endLineNumberExclusive)||new Ao(new Xt(1,1),new Xt(1,1)),r=Qw(i,a=>a.modified.startLineNumber<n.modified.endLineNumberExclusive);return s!==r}),e}function xU(i,e,t){let n=t;return n=$ne(i,e,n),n=$ne(i,e,n),n=z$e(i,e,n),n}function $ne(i,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let r=1;r<t.length;r++){const o=n[n.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(i.getElement(a.seq1Range.start-c)!==i.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new Gs(new nn(o.seq1Range.start,a.seq1Range.endExclusive-l),new nn(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const s=[];for(let r=0;r<n.length-1;r++){const o=n[r+1];let a=n[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!i.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[r+1]=new Gs(new nn(a.seq1Range.start+l,o.seq1Range.endExclusive),new nn(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return n.length>0&&s.push(n[n.length-1]),s}function z$e(i,e,t){if(!i.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const s=n>0?t[n-1]:void 0,r=t[n],o=n+1<t.length?t[n+1]:void 0,a=new nn(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:i.length),l=new nn(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[n]=Gne(r,i,e,a,l):r.seq2Range.isEmpty&&(t[n]=Gne(r.swap(),e,i,l,a).swap())}return t}function Gne(i,e,t,n,s){let o=1;for(;i.seq1Range.start-o>=n.start&&i.seq2Range.start-o>=s.start&&t.isStronglyEqual(i.seq2Range.start-o,i.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;i.seq1Range.start+a<n.endExclusive&&i.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(i.seq2Range.start+a,i.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return i;let l=0,c=-1;for(let u=-o;u<=a;u++){const h=i.seq2Range.start+u,d=i.seq2Range.endExclusive+u,f=i.seq1Range.start+u,g=e.getBoundaryScore(f)+t.getBoundaryScore(h)+t.getBoundaryScore(d);g>c&&(c=g,l=u)}return i.delta(l)}function U$e(i,e,t){const n=[];for(const s of t){const r=n[n.length-1];if(!r){n.push(s);continue}s.seq1Range.start-r.seq1Range.endExclusive<=2||s.seq2Range.start-r.seq2Range.endExclusive<=2?n[n.length-1]=new Gs(r.seq1Range.join(s.seq1Range),r.seq2Range.join(s.seq2Range)):n.push(s)}return n}function V$e(i,e,t){const n=Gs.invert(t,i.length),s=[];let r=new ag(0,0);function o(l,c){if(l.offset1<r.offset1||l.offset2<r.offset2)return;const u=i.findWordContaining(l.offset1),h=e.findWordContaining(l.offset2);if(!u||!h)return;let d=new Gs(u,h);const f=d.intersect(c);let g=f.seq1Range.length,p=f.seq2Range.length;for(;n.length>0;){const _=n[0];if(!(_.seq1Range.intersects(d.seq1Range)||_.seq2Range.intersects(d.seq2Range)))break;const v=i.findWordContaining(_.seq1Range.start),y=e.findWordContaining(_.seq2Range.start),C=new Gs(v,y),S=C.intersect(_);if(g+=S.seq1Range.length,p+=S.seq2Range.length,d=d.join(C),d.seq1Range.endExclusive>=_.seq1Range.endExclusive)n.shift();else break}g+p<(d.seq1Range.length+d.seq2Range.length)*2/3&&s.push(d),r=d.getEndExclusives()}for(;n.length>0;){const l=n.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return W$e(t,s)}function W$e(i,e){const t=[];for(;i.length>0||e.length>0;){const n=i[0],s=e[0];let r;n&&(!s||n.seq1Range.start<s.seq1Range.start)?r=i.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function H$e(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const o=[n[0]];for(let a=1;a<n.length;a++){let u=function(d,f){const g=new nn(c.seq1Range.endExclusive,l.seq1Range.start);return i.getText(g).replace(/\s/g,"").length<=4&&(d.seq1Range.length+d.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=n[a],c=o[o.length-1];u(c,l)?(r=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}n=o}while(s++<10&&r);return n}function $$e(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let h=function(f,g){const p=new nn(u.seq1Range.endExclusive,c.seq1Range.start);if(i.countLinesIn(p)>5||p.length>500)return!1;const m=i.getText(p).trim();if(m.length>20||m.split(/\r\n|\r|\n/).length>1)return!1;const v=i.countLinesIn(f.seq1Range),y=f.seq1Range.length,C=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,x=i.countLinesIn(g.seq1Range),E=g.seq1Range.length,L=e.countLinesIn(g.seq2Range),T=g.seq2Range.length,D=2*40+50;function I(N){return Math.min(N,D)}return Math.pow(Math.pow(I(v*40+y),1.5)+Math.pow(I(C*40+S),1.5),1.5)+Math.pow(Math.pow(I(x*40+E),1.5)+Math.pow(I(L*40+T),1.5),1.5)>(D**1.5)**1.5*1.3};const c=n[l],u=a[a.length-1];h(u,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}n=a}while(s++<10&&r);const o=[];return A9e(n,(a,l,c)=>{let u=l;function h(m){return m.length>0&&m.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const d=i.extendToFullLines(l.seq1Range),f=i.getText(new nn(d.start,l.seq1Range.start));h(f)&&(u=u.deltaStart(-f.length));const g=i.getText(new nn(l.seq1Range.endExclusive,d.endExclusive));h(g)&&(u=u.deltaEnd(g.length));const p=Gs.fromOffsetPairs(a?a.getEndExclusives():ag.zero,c?c.getStarts():ag.max),_=u.intersect(p);o.length>0&&_.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(_):o.push(_)}),o}class jne{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:Kne(this.lines[e-1]),n=e===this.lines.length?0:Kne(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function Kne(i){let e=0;for(;e<i.length&&(i.charCodeAt(e)===32||i.charCodeAt(e)===9);)e++;return e}class Mme{constructor(){this.dynamicProgrammingDiffing=new M$e,this.myersDiffingAlgorithm=new kme}computeDiff(e,t,n){if(e.length<=1&&tr(e,t,(S,x)=>S===x))return new MI([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new MI([new $l(new Xt(1,e.length+1),new Xt(1,t.length+1),[new Ml(new de(1,1,e.length,e[e.length-1].length+1),new de(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=n.maxComputationTimeMs===0?L2.instance:new k$e(n.maxComputationTimeMs),r=!n.ignoreTrimWhitespace,o=new Map;function a(S){let x=o.get(S);return x===void 0&&(x=o.size,o.set(S,x)),x}const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),u=new jne(l,e),h=new jne(c,t),d=u.length+h.length<1700?this.dynamicProgrammingDiffing.compute(u,h,s,(S,x)=>e[S]===t[x]?t[x].length===0?.1:1+Math.log(1+t[x].length):.99):this.myersDiffingAlgorithm.compute(u,h,s);let f=d.diffs,g=d.hitTimeout;f=xU(u,h,f),f=H$e(u,h,f);const p=[],_=S=>{if(r)for(let x=0;x<S;x++){const E=m+x,L=v+x;if(e[E]!==t[L]){const T=this.refineDiff(e,t,new Gs(new nn(E,E+1),new nn(L,L+1)),s,r);for(const D of T.mappings)p.push(D);T.hitTimeout&&(g=!0)}}};let m=0,v=0;for(const S of f){kv(()=>S.seq1Range.start-m===S.seq2Range.start-v);const x=S.seq1Range.start-m;_(x),m=S.seq1Range.endExclusive,v=S.seq2Range.endExclusive;const E=this.refineDiff(e,t,S,s,r);E.hitTimeout&&(g=!0);for(const L of E.mappings)p.push(L)}_(e.length-m);const y=qne(p,e,t);let C=[];return n.computeMoves&&(C=this.computeMoves(y,e,t,l,c,s,r)),kv(()=>{function S(E,L){if(E.lineNumber<1||E.lineNumber>L.length)return!1;const T=L[E.lineNumber-1];return!(E.column<1||E.column>T.length+1)}function x(E,L){return!(E.startLineNumber<1||E.startLineNumber>L.length+1||E.endLineNumberExclusive<1||E.endLineNumberExclusive>L.length+1)}for(const E of y){if(!E.innerChanges)return!1;for(const L of E.innerChanges)if(!(S(L.modifiedRange.getStartPosition(),t)&&S(L.modifiedRange.getEndPosition(),t)&&S(L.originalRange.getStartPosition(),e)&&S(L.originalRange.getEndPosition(),e)))return!1;if(!x(E.modified,t)||!x(E.original,e))return!1}return!0}),new MI(y,C,g)}computeMoves(e,t,n,s,r,o,a){return N$e(e,t,n,s,r,o).map(u=>{const h=this.refineDiff(t,n,new Gs(u.original.toOffsetRange(),u.modified.toOffsetRange()),o,a),d=qne(h.mappings,t,n,!0);return new xme(u,d)})}refineDiff(e,t,n,s,r){const a=j$e(n).toRangeMapping2(e,t),l=new yR(e,a.originalRange,r),c=new yR(t,a.modifiedRange,r),u=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let h=u.diffs;return h=xU(l,c,h),h=V$e(l,c,h),h=U$e(l,c,h),h=$$e(l,c,h),{mappings:h.map(f=>new Ml(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:u.hitTimeout}}}function qne(i,e,t,n=!1){const s=[];for(const r of Ej(i.map(o=>G$e(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=r[0],a=r[r.length-1];s.push(new $l(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return kv(()=>!n&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:aK(s,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),s}function G$e(i,e,t){let n=0,s=0;i.modifiedRange.endColumn===1&&i.originalRange.endColumn===1&&i.originalRange.startLineNumber+n<=i.originalRange.endLineNumber&&i.modifiedRange.startLineNumber+n<=i.modifiedRange.endLineNumber&&(s=-1),i.modifiedRange.startColumn-1>=t[i.modifiedRange.startLineNumber-1].length&&i.originalRange.startColumn-1>=e[i.originalRange.startLineNumber-1].length&&i.originalRange.startLineNumber<=i.originalRange.endLineNumber+s&&i.modifiedRange.startLineNumber<=i.modifiedRange.endLineNumber+s&&(n=1);const r=new Xt(i.originalRange.startLineNumber+n,i.originalRange.endLineNumber+1+s),o=new Xt(i.modifiedRange.startLineNumber+n,i.modifiedRange.endLineNumber+1+s);return new $l(r,o,[i])}function j$e(i){return new Ao(new Xt(i.seq1Range.start+1,i.seq1Range.endExclusive+1),new Xt(i.seq2Range.start+1,i.seq2Range.endExclusive+1))}const Xne={getLegacy:()=>new x$e,getDefault:()=>new Mme};function dm(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class In{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=dm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ou{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=dm(Math.max(Math.min(1,t),0),3),this.l=dm(Math.max(Math.min(1,n),0),3),this.a=dm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const u=(a+o)/2,h=o-a;if(h>0){switch(c=Math.min(u<=.5?h/(2*u):h/(2-2*u),1),o){case t:l=(n-s)/h+(n<s?6:0);break;case n:l=(s-t)/h+2;break;case s:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new ou(l,c,u,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,u=2*s-c;o=ou._hue2rgb(u,c,t+1/3),a=ou._hue2rgb(u,c,t),l=ou._hue2rgb(u,c,t-1/3)}return new In(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class db{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=dm(Math.max(Math.min(1,t),0),3),this.v=dm(Math.max(Math.min(1,n),0),3),this.a=dm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((n-s)/a%6+6)%6:r===n?c=(s-t)/a+2:c=(t-n)/a+4,new db(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,u,h]=[0,0,0];return t<60?(c=o,u=a):t<120?(c=a,u=o):t<180?(u=o,h=a):t<240?(u=a,h=o):t<300?(c=a,h=o):t<=360&&(c=o,h=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),h=Math.round((h+l)*255),new In(c,u,h,r)}}var Oi;let $e=(Oi=class{static fromHex(e){return Oi.Format.CSS.parseHex(e)||Oi.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:ou.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:db.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof In)this.rgba=e;else if(e instanceof ou)this._hsla=e,this.rgba=ou.toRGBA(e);else if(e instanceof db)this._hsva=e,this.rgba=db.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&In.equals(this.rgba,e.rgba)&&ou.equals(this.hsla,e.hsla)&&db.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Oi._relativeLuminanceForComponent(this.rgba.r),t=Oi._relativeLuminanceForComponent(this.rgba.g),n=Oi._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return dm(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Oi(new ou(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Oi(new ou(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new Oi(new In(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Oi(new In(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:s,a:r}=this.rgba;return new Oi(new In(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-n),e.rgba.b-r*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=Oi.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}},Oi.white=new Oi(new In(255,255,255,1)),Oi.black=new Oi(new In(0,0,0,1)),Oi.red=new Oi(new In(255,0,0,1)),Oi.blue=new Oi(new In(0,0,255,1)),Oi.green=new Oi(new In(0,255,0,1)),Oi.cyan=new Oi(new In(0,255,255,1)),Oi.lightgrey=new Oi(new In(211,211,211,1)),Oi.transparent=new Oi(new In(0,0,0,0)),Oi);(function(i){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function u(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=u;function h(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),m=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new i(new In(p,_,m,1))}if(g===9){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),m=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),v=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new i(new In(p,_,m,v/255))}if(g===4){const p=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),m=d(f.charCodeAt(3));return new i(new In(16*p+p,16*_+_,16*m+m))}if(g===5){const p=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),m=d(f.charCodeAt(3)),v=d(f.charCodeAt(4));return new i(new In(16*p+p,16*_+_,16*m+m,(16*v+v)/255))}return null}t.parseHex=h;function d(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})($e||($e={}));function Dme(i){const e=[];for(const t of i){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}function gK(i,e,t,n){return{red:i/255,blue:t/255,green:e/255,alpha:n}}function ix(i,e){const t=e.index,n=e[0].length;if(!t)return;const s=i.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+n}}function K$e(i,e){if(!i)return;const t=$e.Format.CSS.parseHex(e);if(t)return{range:i,color:gK(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function Yne(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=Dme(s);return{range:i,color:gK(r[0],r[1],r[2],t?r[3]:1)}}function Zne(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=Dme(s),o=new $e(new ou(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:i,color:gK(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function sx(i,e){return typeof i=="string"?[...i.matchAll(e)]:i.findMatches(e)}function q$e(i){const e=[],n=sx(i,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const s of n){const r=s.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=Yne(ix(i,s),sx(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=Yne(ix(i,s),sx(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=Zne(ix(i,s),sx(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=Zne(ix(i,s),sx(a,c),!0)}else o==="#"&&(l=K$e(ix(i,s),o+a));l&&e.push(l)}return e}function X$e(i){return!i||typeof i.getValue!="function"||typeof i.positionAt!="function"?[]:q$e(i)}const Qne=new RegExp("\\bMARK:\\s*(.*)$","d"),Y$e=/^-+|-+$/g;function Z$e(i,e){var n;let t=[];if(e.findRegionSectionHeaders&&((n=e.foldingRules)!=null&&n.markers)){const s=Q$e(i,e);t=t.concat(s)}if(e.findMarkSectionHeaders){const s=J$e(i);t=t.concat(s)}return t}function Q$e(i,e){const t=[],n=i.getLineCount();for(let s=1;s<=n;s++){const r=i.getLineContent(s),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...Ame(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function J$e(i){const e=[],t=i.getLineCount();for(let n=1;n<=t;n++){const s=i.getLineContent(n);eGe(s,n,e)}return e}function eGe(i,e,t){Qne.lastIndex=0;const n=Qne.exec(i);if(n){const s=n.indices[1][0]+1,r=n.indices[1][1]+1,o={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:r};if(o.endColumn>o.startColumn){const a={range:o,...Ame(n[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function Ame(i){i=i.trim();const e=i.startsWith("-");return i=i.replace(Y$e,""),{text:i,hasSeparatorLine:e}}class tGe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=q1(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=q1(e),t=q1(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=q1(e),t=q1(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;const r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=q1(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new Ime(s,e-o)}}class nGe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new Ime(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=J3(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+n;for(let r=0;r<n;r++)this._indexBySum[s+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class Ime{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class iGe{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Se(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new tGe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=$C(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const Jne=60*1e3;class sGe extends Be{constructor(e,t,n=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const s=new qj;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Jne/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)Jr(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const n of e){const s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>Jne&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new Tt;r.add(n.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(en(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Jr(t)}}class rGe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new oGe(fn.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class oGe extends iGe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const s=this._lines[n],r=this.offsetAt(new Se(n+1,1)),o=s.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=g2(e.column,Ij(t),this._lines[e.lineNumber-1],0);return n?new de(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Se.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{const r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}const EO=class EO{constructor(){this._workerTextModelSyncServer=new rGe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,n){const s=this._getModel(e);return s?d$e.computeUnicodeHighlights(s,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const n=this._getModel(e);return n?Z$e(n,t):[]}async $computeDiff(e,t,n,s){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:DI.computeDiff(r,o,n,s)}static computeDiff(e,t,n,s){const r=s==="advanced"?Xne.getDefault():Xne.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,n),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(h){return h.map(d=>{var f;return[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,(f=d.innerChanges)==null?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(h=>[h.lineRangeMapping.original.startLineNumber,h.lineRangeMapping.original.endLineNumberExclusive,h.lineRangeMapping.modified.startLineNumber,h.lineRangeMapping.modified.endLineNumberExclusive,u(h.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,n){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return de.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,h=c.range?0:1;return u-h});let a=0;for(let l=1;l<t.length;l++)de.getEndPosition(t[a].range).equals(de.getStartPosition(t[l].range))?(t[a].range=de.fromPositions(de.getStartPosition(t[a].range),de.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(o=u),de.isEmpty(l)&&!c)continue;const h=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),h===c)continue;if(Math.max(c.length,h.length)>DI._diffLimit){r.push({range:l,text:c});continue}const d=jHe(h,c,n),f=s.offsetAt(de.lift(l).getStartPosition());for(const g of d){const p=s.positionAt(f+g.originalStart),_=s.positionAt(f+g.originalStart+g.originalLength),m={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:_.lineNumber,endColumn:_.column}};s.getValueInRange(m.range)!==m.text&&r.push(m)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?ZHe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?X$e(t):null}async $textualSuggest(e,t,n,s){const r=new e1,o=new RegExp(n,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(o))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>DI._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,n,s){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const u of c){if(!isNaN(Number(u.word)))continue;let h=a[u.word];h||(h=[],a[u.word]=h),h.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async $navigateValueSet(e,t,n,s,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=o.getValueInRange(c);return vU.INSTANCE.navigateValueSet(t,l,c,u,n)}};EO._diffLimit=1e5,EO._suggestionsLimit=1e4;let EU=EO;class DI extends EU{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,n){const o={host:W9e(n,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(z9(this._foreignModule))):new Promise((a,l)=>{const c=u=>{this._foreignModule=u.create(o,t),a(z9(this._foreignModule))};{const u=s4.asBrowserUri(`${e}.js`).toString(!0);XWe(()=>import(`${u}`),[],import.meta.url).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}typeof importScripts=="function"&&(globalThis.monaco=Cpe());const pK=En("textResourceConfigurationService"),Nme=En("textResourcePropertiesService"),pi=En("ILanguageFeaturesService");var mK=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},n0=function(i,e){return function(t,n){e(t,n,i)}};const eie=5*60*1e3;function i0(i,e){const t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let LU=class extends Be{constructor(e,t,n,s,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new TU(e,this._modelService)),this._logService=s,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!i0(this._modelService,a.uri))return Promise.resolve({links:[]});const u=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return u&&{links:u}}})),this._register(o.completionProvider.register("*",new aGe(this._workerManager,n,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return i0(this._modelService,e)}async computedUnicodeHighlights(e,t,n){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,n)}async computeDiff(e,t,n,s){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),n,s);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new xme(new Ao(new Xt(c[0],c[1]),new Xt(c[2],c[3])),l(c[4])))};function l(c){return c.map(u=>{var h;return new $l(new Xt(u[0],u[1]),new Xt(u[2],u[3]),(h=u[4])==null?void 0:h.map(d=>new Ml(new de(d[0],d[1],d[2],d[3]),new de(d[4],d[5],d[6],d[7]))))})}}async computeMoreMinimalEdits(e,t,n=!1){if(Q3(t)){if(!i0(this._modelService,e))return Promise.resolve(t);const s=e1.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,n));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([r,b2(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return i0(this._modelService,e)}async navigateValueSet(e,t,n){const s=this._modelService.getModel(e);if(!s)return null;const r=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,n,o,a)}canComputeWordRanges(e){return i0(this._modelService,e)}async computeWordRanges(e,t){const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};LU=mK([n0(1,Jo),n0(2,pK),n0(3,Ih),n0(4,Yd),n0(5,pi)],LU);class aGe{constructor(e,t,n,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}async provideCompletionItems(e,t){const n=this._configurationService.getValue(e.uri,t,"editor");if(n.wordBasedSuggestions==="off")return;const s=[];if(n.wordBasedSuggestions==="currentDocument")i0(this._modelService,e.uri)&&s.push(e.uri);else for(const h of this._modelService.getModels())i0(this._modelService,h.uri)&&(h===e?s.unshift(h.uri):(n.wordBasedSuggestions==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&s.push(h.uri));if(s.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new de(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):de.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(u)return{duration:u.duration,suggestions:u.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}}}let TU=class extends Be{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Zj).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(eie/2),ui),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>eie&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new bR(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};TU=mK([n0(1,Jo)],TU);class lGe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let bR=class extends Be{constructor(e,t,n){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=n,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(cHe(this._workerDescriptor)),yU.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){dU(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return dU(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new lGe(new DI(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new sGe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(Yze());const n=await this._getProxy();return this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n}async textualSuggest(e,t,n){const s=await this.workerWithSyncedResources(e),r=n.source,o=n.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};bR=mK([n0(2,Jo)],bR);var mc;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight"})(mc||(mc={}));function ow(i){return i===mc.HIGH_CONTRAST_DARK||i===mc.HIGH_CONTRAST_LIGHT}function w4(i){return i===mc.DARK||i===mc.HIGH_CONTRAST_DARK}const Au=En("themeService");function Z1(i){return{id:i}}function kU(i){switch(i){case mc.DARK:return"vs-dark";case mc.HIGH_CONTRAST_DARK:return"hc-black";case mc.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const Rme={ThemingContribution:"base.contributions.theming"};class cGe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new me}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),en(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const Pme=new cGe;Or.add(Rme.ThemingContribution,Pme);function Vg(i){return Pme.onColorThemeChange(i)}class uGe extends Be{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var hGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dGe=function(i,e){return function(t,n){e(t,n,i)}};let MU=class extends Be{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new me),this._onCodeEditorAdd=this._register(new me),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new me),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new me),this._onDiffEditorAdd=this._register(new me),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new me),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new tl,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}async openCodeEditor(e,t,n){for(const s of this._codeEditorOpenHandlers){const r=await s(e,t,n);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return en(t)}};MU=hGe([dGe(0,Au)],MU);var fGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tie=function(i,e){return function(t,n){e(t,n,i)}};let wR=class extends MU{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(n,s,r)=>s?this.doOpenEditor(s,n):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===hn.http||r===hn.https)return eme(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};wR=fGe([tie(0,Jn),tie(1,Au)],wR);Pn(sr,wR,0);const Vm=En("layoutService");var Ome=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Fme=function(i,e){return function(t,n){e(t,n,i)}};let CR=class{get mainContainer(){var e;return((e=Tj(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??ui.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return sU(this.mainContainer)}get activeContainerDimension(){return sU(this.activeContainer)}get containers(){return Lj(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Qe.None,this.onDidLayoutActiveContainer=Qe.None,this.onDidLayoutContainer=Qe.None,this.onDidChangeActiveContainer=Qe.None,this.onDidAddContainer=Qe.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};CR=Ome([Fme(0,sr)],CR);let DU=class extends CR{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};DU=Ome([Fme(1,sr)],DU);Pn(Vm,CR,1);var T2;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(T2||(T2={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?lb(e,l)?i.Error:lb(t,l)||lb(n,l)?i.Warning:lb(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(T2||(T2={}));const Ps=T2,Bme=En("dialogService");var gGe=Ps;const Nh=En("notificationService");class pGe{}const _K=En("undoRedoService");class zme{constructor(e,t){this.resource=e,this.elements=t}}const zb=class zb{constructor(){this.id=zb._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};zb._ID=0,zb.None=new zb;let AU=zb;const Ub=class Ub{constructor(){this.id=Ub._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Ub._ID=0,Ub.None=new Ub;let s0=Ub;var mGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nie=function(i,e){return function(t,n){e(t,n,i)}};function gD(i){return i.scheme===hn.file?i.fsPath:i.path}let Ume=0;class pD{constructor(e,t,n,s,r,o,a){this.id=++Ume,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class iie{constructor(e,t){this.resourceLabel=e,this.reason=t}}class sie{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const n=[];return e.length>0&&n.push(k({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(k({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class _Ge{constructor(e,t,n,s,r,o,a){this.id=++Ume,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new sie),this.removedResources.has(t)||this.removedResources.set(t,new iie(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new sie),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new iie(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Vme{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new zme(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];n&&(s>=t||c.id!==e.elements[s])&&(n=!1,r=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class f8{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Wme=new Vme("","");Wme.locked=!0;let IU=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=AU.None,n=s0.None){if(e.type===0){const s=gD(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new pD(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=gD(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new pD(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new _Ge(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new Vme(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=gD(r.resource),a=this.getUriComparisonKey(r.resource),l=new pD(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=gD(r.resource),a=this.getUriComparisonKey(r.resource),l=new pD(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new zme(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof s0){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){di(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return Be.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Be.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Be.None);const n=e.actual.prepareUndoRedo();return n?lpe(n)?t(n):n.then(s=>t(s)):t(Be.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Wme);return new f8(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new mD(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new mD}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,k({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,k({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,k({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,k({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,k({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Ps.Info,message:k("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:k({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:k({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;s=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=k({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new f8([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof s0){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:k("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:k({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:k("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof s0){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new mD(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new mD}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,k({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,k({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,k({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,k({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,k({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=k({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new f8([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof s0){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};IU=mGe([nie(0,Bme),nie(1,Nh)],IU);class mD{constructor(e){this.returnValue=e}}Pn(_K,IU,1);function _a(i,e,t){return Math.min(Math.max(i,e),t)}class Hme{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class vGe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const $me=En("environmentService");var yGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rie=function(i,e){return function(t,n){e(t,n,i)}};const bGe=En("ILanguageFeatureDebounceService");var SR;(function(i){const e=new WeakMap;let t=0;function n(s){let r=e.get(s);return r===void 0&&(r=++t,e.set(s,r)),r}i.of=n})(SR||(SR={}));class wGe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class CGe{constructor(e,t,n,s,r,o){this._logService=e,this._name=t,this._registry=n,this._default=s,this._min=r,this._max=o,this._cache=new ak(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>r4(SR.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?_a(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let s=this._cache.get(n);s||(s=new vGe(6),this._cache.set(n,s));const r=_a(s.update(t),this._min,this._max);return Xj(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new Hme;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return _a(e,this._min,this._max)}}let NU=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){const s=(n==null?void 0:n.min)??50,r=(n==null?void 0:n.max)??s**2,o=(n==null?void 0:n.key)??void 0,a=`${SR.of(e)},${s}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new wGe(s*1.5)):l=new CGe(this._logService,t,e,this._overallAverage()|0||s*1.5,s,r),this._data.set(a,l)),l}_overallAverage(){const e=new Hme;for(const t of this._data.values())e.update(t.default());return e.value}};NU=yGe([rie(0,Ih),rie(1,$me)],NU);Pn(bGe,NU,1);class rh{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),s&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;");let o="";return s&4&&(o+=" underline"),s&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}function Jw(i){let e=0,t=0,n=0,s=0;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===10?(s|=2,r++):s|=3,n=r+1):a===10&&(s|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}var SGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},g8=function(i,e){return function(t,n){e(t,n,i)}};let RU=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._languageService=n,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new PU}getMetadata(e,t,n){const s=this._languageService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let h=0;c>0&&h<this._legend.tokenModifiers.length;h++)c&1&&l.push(this._legend.tokenModifiers[h]),c=c>>1;const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof u>"u")o=2147483647;else{if(o=0,typeof u.italic<"u"){const h=(u.italic?1:0)<<11;o|=h|1}if(typeof u.bold<"u"){const h=(u.bold?2:0)<<11;o|=h|2}if(typeof u.underline<"u"){const h=(u.underline?4:0)<<11;o|=h|4}if(typeof u.strikethrough<"u"){const h=(u.strikethrough?8:0)<<11;o|=h|8}if(u.foreground){const h=u.foreground<<15;o|=h|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,s,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${s} is outside the previous data (length ${r}).`))}};RU=SGe([g8(1,Au),g8(2,yr),g8(3,Ih)],RU);class xGe{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}const Uf=class Uf{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Uf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Uf._SIZES.length?2/3*this._currentLength:0),this._elements=[],Uf._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Uf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Uf._SIZES.length?2/3*this._currentLength:0),this._elements=[],Uf._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new xGe(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Uf._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let PU=Uf;const EGe=En("semanticTokensStylingService");var LGe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},p8=function(i,e){return function(t,n){e(t,n,i)}};let OU=class extends Be{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new RU(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};OU=LGe([p8(0,Au),p8(1,Ih),p8(2,yr)],OU);Pn(EGe,OU,1);function up(i){return i===47||i===92}function Gme(i){return i.replace(/[\\/]/g,vs.sep)}function TGe(i){return i.indexOf("/")===-1&&(i=Gme(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function oie(i,e=vs.sep){if(!i)return"";const t=i.length,n=i.charCodeAt(0);if(up(n)){if(up(i.charCodeAt(1))&&!up(i.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!up(i.charCodeAt(r));r++);if(o!==r&&!up(i.charCodeAt(r+1))){for(r+=1;r<t;r++)if(up(i.charCodeAt(r)))return i.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(kGe(n)&&i.charCodeAt(1)===58)return up(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let s=i.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(up(i.charCodeAt(s)))return i.slice(0,s+1)}return""}function FU(i,e,t,n=hm){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!Vj(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function kGe(i){return i>=65&&i<=90||i>=97&&i<=122}const _D="**",aie="/",AI="[/\\\\]",II="[^/\\\\]",MGe=/\//g;function lie(i,e){switch(i){case 0:return"";case 1:return`${II}*?`;default:return`(?:${AI}|${II}+${AI}${e?`|${AI}${II}+`:""})*?`}}function cie(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function jme(i){if(!i)return"";let e="";const t=cie(i,aie);if(t.every(n=>n===_D))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===_D){if(n)return;e+=lie(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(l&&(u!=="]"||!c)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!c?h="^":u===aie?h="":h=Ng(u),c+=h;continue}switch(u){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const d=`(?:${cie(a,",").map(f=>jme(f)).join("|")})`;e+=d,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=II;continue;case"*":e+=lie(1);continue;default:e+=Ng(u)}}r<t.length-1&&(t[r+1]!==_D||r+2<t.length)&&(e+=AI)}n=s===_D})}return e}const DGe=/^\*\*\/\*\.[\w\.-]+$/,AGe=/^\*\*\/([\w\.-]+)\/?$/,IGe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,NGe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,RGe=/^\*\*((\/[\w\.-]+)+)\/?$/,PGe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,uie=new ak(1e4),hie=function(){return!1},Nd=function(){return null};function vK(i,e){if(!i)return Nd;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=uie.get(n);if(s)return die(s,i);let r;return DGe.test(t)?s=OGe(t.substr(4),t):(r=AGe.exec(m8(t,e)))?s=FGe(r[1],t):(e.trimForExclusions?NGe:IGe).test(t)?s=BGe(t,e):(r=RGe.exec(m8(t,e)))?s=fie(r[1].substr(1),t,!0):(r=PGe.exec(m8(t,e)))?s=fie(r[1],t,!1):s=zGe(t),uie.set(n,s),die(s,i)}function die(i,e){if(typeof e=="string")return i;const t=function(n,s){return FU(n,e.base,!ka)?i(i4(n.substr(e.base.length),hm),s):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function m8(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function OGe(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function FGe(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function BGe(i,e){const t=qme(i.slice(1,-1).split(",").map(a=>vK(a,e)).filter(a=>a!==Nd),i),n=t.length;if(!n)return Nd;if(n===1)return t[0];const s=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function fie(i,e,t){const n=hm===vs.sep,s=n?i:i.replace(MGe,hm),r=hm+s,o=vs.sep+i;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function zGe(i){try{const e=new RegExp(`^${jme(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Nd}}function UGe(i,e,t){return!i||typeof e!="string"?!1:Kme(i)(e,void 0,t)}function Kme(i,e={}){if(!i)return hie;if(typeof i=="string"||VGe(i)){const t=vK(i,e);if(t===Nd)return hie;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return WGe(i,e)}function VGe(i){const e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function WGe(i,e){const t=qme(Object.getOwnPropertyNames(i).map(a=>HGe(a,i[a],e)).filter(a=>a!==Nd)),n=t.length;if(!n)return Nd;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(u,h){let d;for(let f=0,g=t.length;f<g;f++){const p=t[f](u,h);if(typeof p=="string")return p;Yz(p)&&(d||(d=[]),d.push(p))}return d?(async()=>{for(const f of d){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let u,h;for(let d=0,f=t.length;d<f;d++){const g=t[d];g.requiresSiblings&&c&&(l||(l=mpe(a)),u||(u=l.substr(0,l.length-SUe(a).length)));const p=g(a,l,u,c);if(typeof p=="string")return p;Yz(p)&&(h||(h=[]),h.push(p))}return h?(async()=>{for(const d of h){const f=await d;if(typeof f=="string")return f}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function HGe(i,e,t){if(e===!1)return Nd;const n=vK(i,t);if(n===Nd)return Nd;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!n(o,a))return null;const u=s.replace("$(basename)",()=>l),h=c(u);return Yz(h)?h.then(d=>d?i:null):h?i:null};return r.requiresSiblings=!0,r}}return n}function qme(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}l=a.substr(u)}const c=n.indexOf(l);return c!==-1?s[c]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}function Xme(i,e,t,n,s,r){if(Array.isArray(i)){let o=0;for(const a of i){const l=Xme(a,e,t,n,s,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=i;if(!n&&!c)return 0;u&&s&&(e=s);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(o)if(o===t)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===r)h=10;else if(u==="*"&&r!==void 0)h=Math.max(h,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:ppe(a.base)},d===e.fsPath||UGe(d,e.fsPath))h=10;else return 0}return h}else return 0}}function Yme(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(Yme):!!i.exclusive}class gie{constructor(e,t,n,s,r){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=s,this.recursive=r}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((n=e.notebookUri)==null?void 0:n.toString())&&this.recursive===e.recursive}}class Pi{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new me,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),en(()=>{if(n){const s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e,t=!1){const n=[];return this._orderedForEach(e,t,s=>n.push(s.provider)),n}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,!1,r=>{n&&s===r._score?n.push(r.provider):(s=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(const s of this._entries)s._score>0&&n(s)}_updateScores(e,t){var r,o;const n=(r=this._notebookInfoResolver)==null?void 0:r.call(this,e.uri),s=n?new gie(e.uri,e.getLanguageId(),n.uri,n.type,t):new gie(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((o=this._lastCandidate)!=null&&o.equals(s))){this._lastCandidate=s;for(const a of this._entries)if(a._score=Xme(a.selector,s.uri,s.languageId,a$e(e),s.notebookUri,s.notebookType),Yme(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(Pi._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:uE(e.selector)&&!uE(t.selector)?1:!uE(e.selector)&&uE(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function uE(i){return typeof i=="string"?!1:Array.isArray(i)?i.some(uE):!!i.isBuiltin}class $Ge{constructor(){this.referenceProvider=new Pi(this._score.bind(this)),this.renameProvider=new Pi(this._score.bind(this)),this.newSymbolNamesProvider=new Pi(this._score.bind(this)),this.codeActionProvider=new Pi(this._score.bind(this)),this.definitionProvider=new Pi(this._score.bind(this)),this.typeDefinitionProvider=new Pi(this._score.bind(this)),this.declarationProvider=new Pi(this._score.bind(this)),this.implementationProvider=new Pi(this._score.bind(this)),this.documentSymbolProvider=new Pi(this._score.bind(this)),this.inlayHintsProvider=new Pi(this._score.bind(this)),this.colorProvider=new Pi(this._score.bind(this)),this.codeLensProvider=new Pi(this._score.bind(this)),this.documentFormattingEditProvider=new Pi(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Pi(this._score.bind(this)),this.onTypeFormattingEditProvider=new Pi(this._score.bind(this)),this.signatureHelpProvider=new Pi(this._score.bind(this)),this.hoverProvider=new Pi(this._score.bind(this)),this.documentHighlightProvider=new Pi(this._score.bind(this)),this.multiDocumentHighlightProvider=new Pi(this._score.bind(this)),this.selectionRangeProvider=new Pi(this._score.bind(this)),this.foldingRangeProvider=new Pi(this._score.bind(this)),this.linkProvider=new Pi(this._score.bind(this)),this.inlineCompletionsProvider=new Pi(this._score.bind(this)),this.inlineEditProvider=new Pi(this._score.bind(this)),this.completionProvider=new Pi(this._score.bind(this)),this.linkedEditingRangeProvider=new Pi(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Pi(this._score.bind(this)),this.documentSemanticTokensProvider=new Pi(this._score.bind(this)),this.documentDropEditProvider=new Pi(this._score.bind(this)),this.documentPasteEditProvider=new Pi(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}Pn(pi,$Ge,1);function yK(i){return`--vscode-${i.replace(/\./g,"-")}`}function st(i){return`var(${yK(i)})`}function GGe(i,e){return`var(${yK(i)}, ${e})`}function jGe(i){return i!==null&&typeof i=="object"&&"light"in i&&"dark"in i}const Zme={ColorContribution:"base.contributions.colors"},KGe="default";class qGe{constructor(){this._onDidChangeSchema=new me,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,s=!1,r){const o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=k("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:KGe,description:k("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n!=null&&n.defaults){const s=jGe(n.defaults)?n.defaults[t.type]:n.defaults;return qu(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,n)=>{const s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const C4=new qGe;Or.add(Zme.ColorContribution,C4);function oe(i,e,t,n,s){return C4.registerColor(i,e,t,n,s)}function XGe(i,e){var t,n,s,r;switch(i.op){case 0:return(t=qu(i.value,e))==null?void 0:t.darken(i.factor);case 1:return(n=qu(i.value,e))==null?void 0:n.lighten(i.factor);case 2:return(s=qu(i.value,e))==null?void 0:s.transparent(i.factor);case 3:{const o=qu(i.background,e);return o?(r=qu(i.value,e))==null?void 0:r.makeOpaque(o):qu(i.value,e)}case 4:for(const o of i.values){const a=qu(o,e);if(a)return a}return;case 6:return qu(e.defines(i.if)?i.then:i.else,e);case 5:{const o=qu(i.value,e);if(!o)return;const a=qu(i.background,e);return a?o.isDarkerThan(a)?$e.getLighterColor(o,a,i.factor).transparent(i.transparency):$e.getDarkerColor(o,a,i.factor).transparent(i.transparency):o.transparent(i.factor*i.transparency)}default:throw oK()}}function u1(i,e){return{op:0,value:i,factor:e}}function _h(i,e){return{op:1,value:i,factor:e}}function mn(i,e){return{op:2,value:i,factor:e}}function pie(...i){return{op:4,values:i}}function YGe(i,e,t){return{op:6,if:i,then:e,else:t}}function mie(i,e,t,n){return{op:5,value:i,background:e,factor:t,transparency:n}}function qu(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?$e.fromHex(i):e.getColor(i);if(i instanceof $e)return i;if(typeof i=="object")return XGe(i,e)}}const Qme="vscode://schemas/workbench-colors",Jme=Or.as(b4.JSONContribution);Jme.registerSchema(Qme,C4.getColorSchema());const _ie=new Ro(()=>Jme.notifySchemaChanged(Qme),200);C4.onDidChangeSchema(()=>{_ie.isScheduled()||_ie.schedule()});const hi=oe("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},k("foreground","Overall foreground color. This color is only used if not overridden by a component."));oe("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},k("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));oe("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},k("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));oe("descriptionForeground",{light:"#717171",dark:mn(hi,.7),hcDark:mn(hi,.7),hcLight:mn(hi,.7)},k("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const BU=oe("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},k("iconForeground","The default color for icons in the workbench.")),Ud=oe("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},k("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Wn=oe("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},k("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),bs=oe("contrastActiveBorder",{light:null,dark:null,hcDark:Ud,hcLight:Ud},k("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));oe("selection.background",null,k("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const ZGe=oe("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},k("textLinkForeground","Foreground color for links in text."));oe("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},k("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));oe("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:$e.black,hcLight:"#292929"},k("textSeparatorForeground","Color for text separators."));oe("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},k("textPreformatForeground","Foreground color for preformatted text segments."));oe("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},k("textPreformatBackground","Background color for preformatted text segments."));oe("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},k("textBlockQuoteBackground","Background color for block quotes in text."));oe("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:$e.white,hcLight:"#292929"},k("textBlockQuoteBorder","Border color for block quotes in text."));oe("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:$e.black,hcLight:"#F2F2F2"},k("textCodeBlockBackground","Background color for code blocks in text."));oe("sash.hoverBorder",Ud,k("sashActiveBorder","Border color of active sashes."));const NI=oe("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:$e.black,hcLight:"#0F4A85"},k("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),QGe=oe("badge.foreground",{dark:$e.white,light:"#333",hcDark:$e.white,hcLight:$e.white},k("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),bK=oe("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},k("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),e_e=oe("scrollbarSlider.background",{dark:$e.fromHex("#797979").transparent(.4),light:$e.fromHex("#646464").transparent(.4),hcDark:mn(Wn,.6),hcLight:mn(Wn,.4)},k("scrollbarSliderBackground","Scrollbar slider background color.")),t_e=oe("scrollbarSlider.hoverBackground",{dark:$e.fromHex("#646464").transparent(.7),light:$e.fromHex("#646464").transparent(.7),hcDark:mn(Wn,.8),hcLight:mn(Wn,.8)},k("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),n_e=oe("scrollbarSlider.activeBackground",{dark:$e.fromHex("#BFBFBF").transparent(.4),light:$e.fromHex("#000000").transparent(.6),hcDark:Wn,hcLight:Wn},k("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),JGe=oe("progressBar.background",{dark:$e.fromHex("#0E70C0"),light:$e.fromHex("#0E70C0"),hcDark:Wn,hcLight:Wn},k("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Sh=oe("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:$e.black,hcLight:$e.white},k("editorBackground","Editor background color.")),lk=oe("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:$e.white,hcLight:hi},k("editorForeground","Editor default foreground color."));oe("editorStickyScroll.background",Sh,k("editorStickyScrollBackground","Background color of sticky scroll in the editor"));oe("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:$e.fromHex("#0F4A85").transparent(.1)},k("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));oe("editorStickyScroll.border",{dark:null,light:null,hcDark:Wn,hcLight:Wn},k("editorStickyScrollBorder","Border color of sticky scroll in the editor"));oe("editorStickyScroll.shadow",bK,k("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const fu=oe("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:$e.white},k("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),S4=oe("editorWidget.foreground",hi,k("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),i_e=oe("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Wn,hcLight:Wn},k("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));oe("editorWidget.resizeBorder",null,k("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));oe("editorError.background",null,k("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const wK=oe("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},k("editorError.foreground","Foreground color of error squigglies in the editor."));oe("editorError.border",{dark:null,light:null,hcDark:$e.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},k("errorBorder","If set, color of double underlines for errors in the editor."));const eje=oe("editorWarning.background",null,k("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Mm=oe("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},k("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),xR=oe("editorWarning.border",{dark:null,light:null,hcDark:$e.fromHex("#FFCC00").transparent(.8),hcLight:$e.fromHex("#FFCC00").transparent(.8)},k("warningBorder","If set, color of double underlines for warnings in the editor."));oe("editorInfo.background",null,k("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Dv=oe("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},k("editorInfo.foreground","Foreground color of info squigglies in the editor.")),ER=oe("editorInfo.border",{dark:null,light:null,hcDark:$e.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},k("infoBorder","If set, color of double underlines for infos in the editor.")),tje=oe("editorHint.foreground",{dark:$e.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},k("editorHint.foreground","Foreground color of hint squigglies in the editor."));oe("editorHint.border",{dark:null,light:null,hcDark:$e.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},k("hintBorder","If set, color of double underlines for hints in the editor."));oe("editorLink.activeForeground",{dark:"#4E94CE",light:$e.blue,hcDark:$e.cyan,hcLight:"#292929"},k("activeLinkForeground","Color of active links."));const fb=oe("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},k("editorSelectionBackground","Color of the editor selection.")),nje=oe("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:$e.white},k("editorSelectionForeground","Color of the selected text for high contrast.")),s_e=oe("editor.inactiveSelectionBackground",{light:mn(fb,.5),dark:mn(fb,.5),hcDark:mn(fb,.7),hcLight:mn(fb,.5)},k("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),r_e=oe("editor.selectionHighlightBackground",{light:mie(fb,Sh,.3,.6),dark:mie(fb,Sh,.3,.6),hcDark:null,hcLight:null},k("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:bs,hcLight:bs},k("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));oe("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},k("editorFindMatch","Color of the current search match."));oe("editor.findMatchForeground",null,k("editorFindMatchForeground","Text color of the current search match."));const Gp=oe("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},k("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.findMatchHighlightForeground",null,k("findMatchHighlightForeground","Foreground color of the other search matches."),!0);oe("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},k("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.findMatchBorder",{light:null,dark:null,hcDark:bs,hcLight:bs},k("editorFindMatchBorder","Border color of the current search match."));const gb=oe("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:bs,hcLight:bs},k("findMatchHighlightBorder","Border color of the other search matches."));oe("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:mn(bs,.4),hcLight:mn(bs,.4)},k("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},k("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const vie=oe("editorHoverWidget.background",fu,k("hoverBackground","Background color of the editor hover."));oe("editorHoverWidget.foreground",S4,k("hoverForeground","Foreground color of the editor hover."));const ije=oe("editorHoverWidget.border",i_e,k("hoverBorder","Border color of the editor hover."));oe("editorHoverWidget.statusBarBackground",{dark:_h(vie,.2),light:u1(vie,.05),hcDark:fu,hcLight:fu},k("statusBarBackground","Background color of the editor hover status bar."));const o_e=oe("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:$e.white,hcLight:$e.black},k("editorInlayHintForeground","Foreground color of inline hints")),a_e=oe("editorInlayHint.background",{dark:mn(NI,.1),light:mn(NI,.1),hcDark:mn($e.white,.1),hcLight:mn(NI,.1)},k("editorInlayHintBackground","Background color of inline hints"));oe("editorInlayHint.typeForeground",o_e,k("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));oe("editorInlayHint.typeBackground",a_e,k("editorInlayHintBackgroundTypes","Background color of inline hints for types"));oe("editorInlayHint.parameterForeground",o_e,k("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));oe("editorInlayHint.parameterBackground",a_e,k("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const sje=oe("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},k("editorLightBulbForeground","The color used for the lightbulb actions icon."));oe("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},k("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));oe("editorLightBulbAi.foreground",sje,k("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));oe("editor.snippetTabstopHighlightBackground",{dark:new $e(new In(124,124,124,.3)),light:new $e(new In(10,50,100,.2)),hcDark:new $e(new In(124,124,124,.3)),hcLight:new $e(new In(10,50,100,.2))},k("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));oe("editor.snippetTabstopHighlightBorder",null,k("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));oe("editor.snippetFinalTabstopHighlightBackground",null,k("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));oe("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new $e(new In(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},k("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const zU=new $e(new In(155,185,85,.2)),UU=new $e(new In(255,0,0,.2)),rje=oe("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},k("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),oje=oe("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},k("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);oe("diffEditor.insertedLineBackground",{dark:zU,light:zU,hcDark:null,hcLight:null},k("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);oe("diffEditor.removedLineBackground",{dark:UU,light:UU,hcDark:null,hcLight:null},k("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);oe("diffEditorGutter.insertedLineBackground",null,k("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));oe("diffEditorGutter.removedLineBackground",null,k("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const aje=oe("diffEditorOverview.insertedForeground",null,k("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),lje=oe("diffEditorOverview.removedForeground",null,k("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));oe("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},k("diffEditorInsertedOutline","Outline color for the text that got inserted."));oe("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},k("diffEditorRemovedOutline","Outline color for text that got removed."));oe("diffEditor.border",{dark:null,light:null,hcDark:Wn,hcLight:Wn},k("diffEditorBorder","Border color between the two text editors."));oe("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},k("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));oe("diffEditor.unchangedRegionBackground","sideBar.background",k("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));oe("diffEditor.unchangedRegionForeground","foreground",k("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));oe("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},k("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const ck=oe("widget.shadow",{dark:mn($e.black,.36),light:mn($e.black,.16),hcDark:null,hcLight:null},k("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),cje=oe("widget.border",{dark:null,light:null,hcDark:Wn,hcLight:Wn},k("widgetBorder","Border color of widgets such as find/replace inside the editor.")),yie=oe("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},k("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));oe("toolbar.hoverOutline",{dark:null,light:null,hcDark:bs,hcLight:bs},k("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));oe("toolbar.activeBackground",{dark:_h(yie,.1),light:u1(yie,.1),hcDark:null,hcLight:null},k("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const uje=oe("breadcrumb.foreground",mn(hi,.8),k("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),hje=oe("breadcrumb.background",Sh,k("breadcrumbsBackground","Background color of breadcrumb items.")),bie=oe("breadcrumb.focusForeground",{light:u1(hi,.2),dark:_h(hi,.1),hcDark:_h(hi,.1),hcLight:_h(hi,.1)},k("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),dje=oe("breadcrumb.activeSelectionForeground",{light:u1(hi,.2),dark:_h(hi,.1),hcDark:_h(hi,.1),hcLight:_h(hi,.1)},k("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));oe("breadcrumbPicker.background",fu,k("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const l_e=.5,wie=$e.fromHex("#40C8AE").transparent(l_e),Cie=$e.fromHex("#40A6FF").transparent(l_e),Sie=$e.fromHex("#606060").transparent(.4),CK=.4,eC=1,VU=oe("merge.currentHeaderBackground",{dark:wie,light:wie,hcDark:null,hcLight:null},k("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);oe("merge.currentContentBackground",mn(VU,CK),k("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const WU=oe("merge.incomingHeaderBackground",{dark:Cie,light:Cie,hcDark:null,hcLight:null},k("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);oe("merge.incomingContentBackground",mn(WU,CK),k("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const HU=oe("merge.commonHeaderBackground",{dark:Sie,light:Sie,hcDark:null,hcLight:null},k("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);oe("merge.commonContentBackground",mn(HU,CK),k("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const tC=oe("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},k("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));oe("editorOverviewRuler.currentContentForeground",{dark:mn(VU,eC),light:mn(VU,eC),hcDark:tC,hcLight:tC},k("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));oe("editorOverviewRuler.incomingContentForeground",{dark:mn(WU,eC),light:mn(WU,eC),hcDark:tC,hcLight:tC},k("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));oe("editorOverviewRuler.commonContentForeground",{dark:mn(HU,eC),light:mn(HU,eC),hcDark:tC,hcLight:tC},k("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));oe("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},k("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",k("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const fje=oe("problemsErrorIcon.foreground",wK,k("problemsErrorIconForeground","The color used for the problems error icon.")),gje=oe("problemsWarningIcon.foreground",Mm,k("problemsWarningIconForeground","The color used for the problems warning icon.")),pje=oe("problemsInfoIcon.foreground",Dv,k("problemsInfoIconForeground","The color used for the problems info icon.")),mje=oe("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},k("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);oe("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},k("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const xie=oe("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},k("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),_je=oe("minimap.infoHighlight",{dark:Dv,light:Dv,hcDark:ER,hcLight:ER},k("minimapInfo","Minimap marker color for infos.")),vje=oe("minimap.warningHighlight",{dark:Mm,light:Mm,hcDark:xR,hcLight:xR},k("overviewRuleWarning","Minimap marker color for warnings.")),yje=oe("minimap.errorHighlight",{dark:new $e(new In(255,18,18,.7)),light:new $e(new In(255,18,18,.7)),hcDark:new $e(new In(255,50,50,1)),hcLight:"#B5200D"},k("minimapError","Minimap marker color for errors.")),bje=oe("minimap.background",null,k("minimapBackground","Minimap background color.")),wje=oe("minimap.foregroundOpacity",$e.fromHex("#000f"),k("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));oe("minimapSlider.background",mn(e_e,.5),k("minimapSliderBackground","Minimap slider background color."));oe("minimapSlider.hoverBackground",mn(t_e,.5),k("minimapSliderHoverBackground","Minimap slider background color when hovering."));oe("minimapSlider.activeBackground",mn(n_e,.5),k("minimapSliderActiveBackground","Minimap slider background color when clicked on."));oe("charts.foreground",hi,k("chartsForeground","The foreground color used in charts."));oe("charts.lines",mn(hi,.5),k("chartsLines","The color used for horizontal lines in charts."));oe("charts.red",wK,k("chartsRed","The red color used in chart visualizations."));oe("charts.blue",Dv,k("chartsBlue","The blue color used in chart visualizations."));oe("charts.yellow",Mm,k("chartsYellow","The yellow color used in chart visualizations."));oe("charts.orange",mje,k("chartsOrange","The orange color used in chart visualizations."));oe("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},k("chartsGreen","The green color used in chart visualizations."));oe("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},k("chartsPurple","The purple color used in chart visualizations."));const Cje=oe("input.background",{dark:"#3C3C3C",light:$e.white,hcDark:$e.black,hcLight:$e.white},k("inputBoxBackground","Input box background.")),Sje=oe("input.foreground",hi,k("inputBoxForeground","Input box foreground.")),xje=oe("input.border",{dark:null,light:null,hcDark:Wn,hcLight:Wn},k("inputBoxBorder","Input box border.")),c_e=oe("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Wn,hcLight:Wn},k("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Eje=oe("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},k("inputOption.hoverBackground","Background color of activated options in input fields.")),u_e=oe("inputOption.activeBackground",{dark:mn(Ud,.4),light:mn(Ud,.2),hcDark:$e.transparent,hcLight:$e.transparent},k("inputOption.activeBackground","Background hover color of options in input fields.")),h_e=oe("inputOption.activeForeground",{dark:$e.white,light:$e.black,hcDark:hi,hcLight:hi},k("inputOption.activeForeground","Foreground color of activated options in input fields."));oe("input.placeholderForeground",{light:mn(hi,.5),dark:mn(hi,.5),hcDark:mn(hi,.7),hcLight:mn(hi,.7)},k("inputPlaceholderForeground","Input box foreground color for placeholder text."));const Lje=oe("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:$e.black,hcLight:$e.white},k("inputValidationInfoBackground","Input validation background color for information severity.")),Tje=oe("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:hi},k("inputValidationInfoForeground","Input validation foreground color for information severity.")),kje=oe("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Wn,hcLight:Wn},k("inputValidationInfoBorder","Input validation border color for information severity.")),Mje=oe("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:$e.black,hcLight:$e.white},k("inputValidationWarningBackground","Input validation background color for warning severity.")),Dje=oe("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:hi},k("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Aje=oe("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Wn,hcLight:Wn},k("inputValidationWarningBorder","Input validation border color for warning severity.")),Ije=oe("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:$e.black,hcLight:$e.white},k("inputValidationErrorBackground","Input validation background color for error severity.")),Nje=oe("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:hi},k("inputValidationErrorForeground","Input validation foreground color for error severity.")),Rje=oe("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Wn,hcLight:Wn},k("inputValidationErrorBorder","Input validation border color for error severity.")),x4=oe("dropdown.background",{dark:"#3C3C3C",light:$e.white,hcDark:$e.black,hcLight:$e.white},k("dropdownBackground","Dropdown background.")),Pje=oe("dropdown.listBackground",{dark:null,light:null,hcDark:$e.black,hcLight:$e.white},k("dropdownListBackground","Dropdown list background.")),SK=oe("dropdown.foreground",{dark:"#F0F0F0",light:hi,hcDark:$e.white,hcLight:hi},k("dropdownForeground","Dropdown foreground.")),xK=oe("dropdown.border",{dark:x4,light:"#CECECE",hcDark:Wn,hcLight:Wn},k("dropdownBorder","Dropdown border.")),d_e=oe("button.foreground",$e.white,k("buttonForeground","Button foreground color.")),Oje=oe("button.separator",mn(d_e,.4),k("buttonSeparator","Button separator color.")),hE=oe("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},k("buttonBackground","Button background color.")),Fje=oe("button.hoverBackground",{dark:_h(hE,.2),light:u1(hE,.2),hcDark:hE,hcLight:hE},k("buttonHoverBackground","Button background color when hovering.")),Bje=oe("button.border",Wn,k("buttonBorder","Button border color.")),zje=oe("button.secondaryForeground",{dark:$e.white,light:$e.white,hcDark:$e.white,hcLight:hi},k("buttonSecondaryForeground","Secondary button foreground color.")),$U=oe("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:$e.white},k("buttonSecondaryBackground","Secondary button background color.")),Uje=oe("button.secondaryHoverBackground",{dark:_h($U,.2),light:u1($U,.2),hcDark:null,hcLight:null},k("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),dE=oe("radio.activeForeground",h_e,k("radioActiveForeground","Foreground color of active radio option.")),Vje=oe("radio.activeBackground",u_e,k("radioBackground","Background color of active radio option.")),Wje=oe("radio.activeBorder",c_e,k("radioActiveBorder","Border color of the active radio option.")),Hje=oe("radio.inactiveForeground",null,k("radioInactiveForeground","Foreground color of inactive radio option.")),$je=oe("radio.inactiveBackground",null,k("radioInactiveBackground","Background color of inactive radio option.")),Gje=oe("radio.inactiveBorder",{light:mn(dE,.2),dark:mn(dE,.2),hcDark:mn(dE,.4),hcLight:mn(dE,.2)},k("radioInactiveBorder","Border color of the inactive radio option.")),jje=oe("radio.inactiveHoverBackground",Eje,k("radioHoverBackground","Background color of inactive active radio option when hovering.")),Kje=oe("checkbox.background",x4,k("checkbox.background","Background color of checkbox widget."));oe("checkbox.selectBackground",fu,k("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const qje=oe("checkbox.foreground",SK,k("checkbox.foreground","Foreground color of checkbox widget.")),Xje=oe("checkbox.border",xK,k("checkbox.border","Border color of checkbox widget."));oe("checkbox.selectBorder",BU,k("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const Yje=oe("keybindingLabel.background",{dark:new $e(new In(128,128,128,.17)),light:new $e(new In(221,221,221,.4)),hcDark:$e.transparent,hcLight:$e.transparent},k("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Zje=oe("keybindingLabel.foreground",{dark:$e.fromHex("#CCCCCC"),light:$e.fromHex("#555555"),hcDark:$e.white,hcLight:hi},k("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Qje=oe("keybindingLabel.border",{dark:new $e(new In(51,51,51,.6)),light:new $e(new In(204,204,204,.4)),hcDark:new $e(new In(111,195,223)),hcLight:Wn},k("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Jje=oe("keybindingLabel.bottomBorder",{dark:new $e(new In(68,68,68,.6)),light:new $e(new In(187,187,187,.4)),hcDark:new $e(new In(111,195,223)),hcLight:hi},k("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),eKe=oe("list.focusBackground",null,k("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tKe=oe("list.focusForeground",null,k("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nKe=oe("list.focusOutline",{dark:Ud,light:Ud,hcDark:bs,hcLight:bs},k("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iKe=oe("list.focusAndSelectionOutline",null,k("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Av=oe("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:$e.fromHex("#0F4A85").transparent(.1)},k("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),k2=oe("list.activeSelectionForeground",{dark:$e.white,light:$e.white,hcDark:null,hcLight:null},k("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),f_e=oe("list.activeSelectionIconForeground",null,k("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sKe=oe("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:$e.fromHex("#0F4A85").transparent(.1)},k("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rKe=oe("list.inactiveSelectionForeground",null,k("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oKe=oe("list.inactiveSelectionIconForeground",null,k("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),aKe=oe("list.inactiveFocusBackground",null,k("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),lKe=oe("list.inactiveFocusOutline",null,k("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),g_e=oe("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:$e.white.transparent(.1),hcLight:$e.fromHex("#0F4A85").transparent(.1)},k("listHoverBackground","List/Tree background when hovering over items using the mouse.")),p_e=oe("list.hoverForeground",null,k("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),cKe=oe("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},k("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),uKe=oe("list.dropBetweenBackground",{dark:BU,light:BU,hcDark:null,hcLight:null},k("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),vD=oe("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ud,hcLight:Ud},k("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));oe("list.focusHighlightForeground",{dark:vD,light:YGe(Av,vD,"#BBE7FF"),hcDark:vD,hcLight:vD},k("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));oe("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},k("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));oe("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},k("listErrorForeground","Foreground color of list items containing errors."));oe("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},k("listWarningForeground","Foreground color of list items containing warnings."));const hKe=oe("listFilterWidget.background",{light:u1(fu,0),dark:_h(fu,0),hcDark:fu,hcLight:fu},k("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),dKe=oe("listFilterWidget.outline",{dark:$e.transparent,light:$e.transparent,hcDark:"#f38518",hcLight:"#007ACC"},k("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),fKe=oe("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Wn,hcLight:Wn},k("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),gKe=oe("listFilterWidget.shadow",ck,k("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));oe("list.filterMatchBackground",{dark:Gp,light:Gp,hcDark:null,hcLight:null},k("listFilterMatchHighlight","Background color of the filtered match."));oe("list.filterMatchBorder",{dark:gb,light:gb,hcDark:Wn,hcLight:bs},k("listFilterMatchHighlightBorder","Border color of the filtered match."));oe("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},k("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const m_e=oe("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},k("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),pKe=oe("tree.inactiveIndentGuidesStroke",mn(m_e,.4),k("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),mKe=oe("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},k("tableColumnsBorder","Table border color between columns.")),_Ke=oe("tree.tableOddRowsBackground",{dark:mn(hi,.04),light:mn(hi,.04),hcDark:null,hcLight:null},k("tableOddRowsBackgroundColor","Background color for odd table rows."));oe("editorActionList.background",fu,k("editorActionListBackground","Action List background color."));oe("editorActionList.foreground",S4,k("editorActionListForeground","Action List foreground color."));oe("editorActionList.focusForeground",k2,k("editorActionListFocusForeground","Action List foreground color for the focused item."));oe("editorActionList.focusBackground",Av,k("editorActionListFocusBackground","Action List background color for the focused item."));const vKe=oe("menu.border",{dark:null,light:null,hcDark:Wn,hcLight:Wn},k("menuBorder","Border color of menus.")),yKe=oe("menu.foreground",SK,k("menuForeground","Foreground color of menu items.")),bKe=oe("menu.background",x4,k("menuBackground","Background color of menu items.")),wKe=oe("menu.selectionForeground",k2,k("menuSelectionForeground","Foreground color of the selected menu item in menus.")),CKe=oe("menu.selectionBackground",Av,k("menuSelectionBackground","Background color of the selected menu item in menus.")),SKe=oe("menu.selectionBorder",{dark:null,light:null,hcDark:bs,hcLight:bs},k("menuSelectionBorder","Border color of the selected menu item in menus.")),xKe=oe("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Wn,hcLight:Wn},k("menuSeparatorBackground","Color of a separator menu item in menus.")),Eie=oe("quickInput.background",fu,k("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),EKe=oe("quickInput.foreground",S4,k("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),LKe=oe("quickInputTitle.background",{dark:new $e(new In(255,255,255,.105)),light:new $e(new In(0,0,0,.06)),hcDark:"#000000",hcLight:$e.white},k("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),__e=oe("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:$e.white,hcLight:"#0F4A85"},k("pickerGroupForeground","Quick picker color for grouping labels.")),TKe=oe("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:$e.white,hcLight:"#0F4A85"},k("pickerGroupBorder","Quick picker color for grouping borders.")),Lie=oe("quickInput.list.focusBackground",null,"",void 0,k("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),GU=oe("quickInputList.focusForeground",k2,k("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),v_e=oe("quickInputList.focusIconForeground",f_e,k("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),jU=oe("quickInputList.focusBackground",{dark:pie(Lie,Av),light:pie(Lie,Av),hcDark:null,hcLight:null},k("quickInput.listFocusBackground","Quick picker background color for the focused item."));oe("search.resultsInfoForeground",{light:hi,dark:mn(hi,.65),hcDark:hi,hcLight:hi},k("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));oe("searchEditor.findMatchBackground",{light:mn(Gp,.66),dark:mn(Gp,.66),hcDark:Gp,hcLight:Gp},k("searchEditor.queryMatch","Color of the Search Editor query matches."));oe("searchEditor.findMatchBorder",{light:mn(gb,.66),dark:mn(gb,.66),hcDark:gb,hcLight:gb},k("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var kKe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Tie=function(i,e){return function(t,n){e(t,n,i)}};const uk=En("hoverService");let M2=class extends Be{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,n={},s,r){super(),this.placement=e,this.instantHover=t,this.overrideOptions=n,this.configurationService=s,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Tt),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const n=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Nr(e.target)?[e.target]:e.target.targetElements;for(const o of s)this.hoverDisposables.add(vr(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=Nr(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...n,persistence:{hideOnKeyDown:!0,...n.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...n.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};M2=kKe([Tie(3,hs),Tie(4,uk)],M2);const hk=En("contextViewService"),Wg=En("contextMenuService"),eo=En("keybindingService");class E4{constructor(){this._hooks=new Tt,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(en(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=Nt(e)}this._hooks.add(Ne(o,it.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Ne(o,it.POINTER_UP,a=>this.stopMonitoring(!0)))}}function ds(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var MKe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vi;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(vi||(vi={}));const Gr=class Gr extends Be{constructor(){super(),this.dispatched=!1,this.targets=new tl,this.ignoreTargets=new tl,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Qe.runAndSubscribe(o4,({window:e,disposables:t})=>{t.add(Ne(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(Ne(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(Ne(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:ui,disposables:this._store}))}static addTarget(e){if(!Gr.isTouchDevice())return Be.None;Gr.INSTANCE||(Gr.INSTANCE=new Gr);const t=Gr.INSTANCE.targets.push(e);return en(t)}static ignoreTarget(e){if(!Gr.isTouchDevice())return Be.None;Gr.INSTANCE||(Gr.INSTANCE=new Gr);const t=Gr.INSTANCE.ignoreTargets.push(e);return en(t)}static isTouchDevice(){return"ontouchstart"in ui||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){const r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(vi.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Gr.HOLD_DELAY&&Math.abs(l.initialPageX-ic(l.rollingPageX))<30&&Math.abs(l.initialPageY-ic(l.rollingPageY))<30){const u=this.newGestureEvent(vi.Tap,l.initialTarget);u.pageX=ic(l.rollingPageX),u.pageY=ic(l.rollingPageY),this.dispatchEvent(u)}else if(c>=Gr.HOLD_DELAY&&Math.abs(l.initialPageX-ic(l.rollingPageX))<30&&Math.abs(l.initialPageY-ic(l.rollingPageY))<30){const u=this.newGestureEvent(vi.Contextmenu,l.initialTarget);u.pageX=ic(l.rollingPageX),u.pageY=ic(l.rollingPageY),this.dispatchEvent(u)}else if(s===1){const u=ic(l.rollingPageX),h=ic(l.rollingPageY),d=ic(l.rollingTimestamps)-l.rollingTimestamps[0],f=u-l.rollingPageX[0],g=h-l.rollingPageY[0],p=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,p,n,Math.abs(f)/d,f>0?1:-1,u,Math.abs(g)/d,g>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(vi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===vi.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Gr.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===vi.Change||e.type===vi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const n of this.ignoreTargets)if(n.contains(e.initialTarget))return;const t=[];for(const n of this.targets)if(n.contains(e.initialTarget)){let s=0,r=e.initialTarget;for(;r&&r!==n;)s++,r=r.parentElement;t.push([s,n])}t.sort((n,s)=>n[0]-s[0]);for(const[n,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,s,r,o,a,l,c){this.handle=al(e,()=>{const u=Date.now(),h=u-n;let d=0,f=0,g=!0;s+=Gr.SCROLL_FRICTION*h,a+=Gr.SCROLL_FRICTION*h,s>0&&(g=!1,d=r*s*h),a>0&&(g=!1,f=l*a*h);const p=this.newGestureEvent(vi.Change);p.translationX=d,p.translationY=f,t.forEach(_=>_.dispatchEvent(p)),g||this.inertia(e,t,u,s,r,o+d,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){const r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(vi.Change,o.initialTarget);a.translationX=r.pageX-ic(o.rollingPageX),a.translationY=r.pageY-ic(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Gr.SCROLL_FRICTION=-.005,Gr.HOLD_DELAY=700,Gr.CLEAR_TAP_COUNT_TIME=400;let Zo=Gr;MKe([ds],Zo,"isTouchDevice",null);let Hg=class extends Be{onclick(e,t){this._register(Ne(e,it.CLICK,n=>t(new dh(Nt(e),n))))}onmousedown(e,t){this._register(Ne(e,it.MOUSE_DOWN,n=>t(new dh(Nt(e),n))))}onmouseover(e,t){this._register(Ne(e,it.MOUSE_OVER,n=>t(new dh(Nt(e),n))))}onmouseleave(e,t){this._register(Ne(e,it.MOUSE_LEAVE,n=>t(new dh(Nt(e),n))))}onkeydown(e,t){this._register(Ne(e,it.KEY_DOWN,n=>t(new xi(n))))}onkeyup(e,t){this._register(Ne(e,it.KEY_UP,n=>t(new xi(n))))}oninput(e,t){this._register(Ne(e,it.INPUT,t))}onblur(e,t){this._register(Ne(e,it.BLUR,t))}onfocus(e,t){this._register(Ne(e,it.FOCUS,t))}ignoreGesture(e){return Zo.ignoreTarget(e)}};const nC=11;class DKe extends Hg{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...An.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=nC+"px",this.domNode.style.height=nC+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new E4),this._register(vr(this.bgDomNode,it.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(vr(this.domNode,it.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Zj),this._pointerdownScheduleRepeatTimer=this._register(new n1)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Nt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class AKe extends Be{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new n1)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const IKe=140;class y_e extends Hg{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new AKe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new E4),this._shouldRender=!0,this.domNode=Nn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Ne(this.domNode.domNode,it.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new DKe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=Nn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Ne(this.slider.domNode,it.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const r=pc(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}const s=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-n);if(rl&&a>IKe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const NKe=20;class iC{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new iC(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(NKe,Math.floor(n*a/s))),u=(a-c)/(s-n),h=r*u;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=iC._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class RKe extends y_e{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new iC(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-nC)/2,a=(t.horizontalScrollbarSize-nC)/2;this._createArrow({className:"scra",icon:yt.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Lv(null,1,0))}),this._createArrow({className:"scra",icon:yt.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Lv(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class PKe extends y_e{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new iC(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-nC)/2,a=(t.verticalScrollbarSize-nC)/2;this._createArrow({className:"scra",icon:yt.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Lv(null,0,1))}),this._createArrow({className:"scra",icon:yt.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Lv(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class LR{constructor(e,t,n,s,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>n&&(s=n-t),s<0&&(s=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=s,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new LR(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new LR(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class jC extends Be{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new me),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new LR(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new D2(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=D2.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class kie{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function _8(i,e){const t=e-i;return function(n){return i+t*BKe(n)}}function OKe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class D2{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),OKe(_8(e,r),_8(o,t),.33)}return _8(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new kie(n,s,!1)}return new kie(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return D2.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new D2(e,t,s,n)}}function FKe(i){return Math.pow(i,3)}function BKe(i){return 1-FKe(1-i)}const zKe=500,Mie=50;class UKe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}const LO=class LO{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(ek){const t=Nt(e.browserEvent),n=tVe(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let s=null;const r=new UKe(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){const s=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,o),1),c=Math.max(Math.min(r,a),1),u=Math.max(s,o),h=Math.max(r,a);u%l===0&&h%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};LO.INSTANCE=new LO;let TR=LO;class EK extends Hg{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new me),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new me),e.style.overflow="hidden",this._options=WKe(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new PKe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new RKe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Nn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Nn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Nn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new n1),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Jr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Tn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Lv(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Jr(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new Lv(s))};this._mouseWheelToDispose.push(Ne(this._listenOnDomNode,it.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){var r;if((r=e.browserEvent)!=null&&r.defaultPrevented)return;const t=TR.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!Tn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let u={};if(o){const h=Mie*o,d=c.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(u,d)}if(a){const h=Mie*a,d=c.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(u,d)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),zKe)}}class VKe extends EK{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new jC({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>al(Nt(e),s)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class L4 extends EK{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class LK extends EK{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new jC({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>al(Nt(e),s)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function WKe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Tn&&(e.className+=" mac"),e}const yD=Ht;let HKe=class extends Be{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new LK(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class TK extends Be{static render(e,t,n){return new TK(e,t,n)}constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=Et(e,yD("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Et(this.actionContainer,yD("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Et(this.action,yD(`span.icon.${t.iconClass}`));const s=Et(this.action,yD("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._store.add(new GKe(this.actionContainer,t.run)),this._store.add(new jKe(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function $Ke(i,e){return i&&e?k("acessibleViewHint","Inspect this in the accessible view with {0}.",e):i?k("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class GKe extends Be{constructor(e,t){super(),this._register(Ne(e,it.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}}class jKe extends Be{constructor(e,t,n){super(),this._register(Ne(e,it.KEY_DOWN,s=>{const r=new xi(s);n.some(o=>r.equals(o))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}const dk=En("openerService");function KKe(i){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}class pn{get event(){return this.emitter.event}constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new me({onWillAddFirstListener:()=>e.addEventListener(t,s,n),onDidRemoveLastListener:()=>e.removeEventListener(t,s,n)})}dispose(){this.emitter.dispose()}}function qKe(i,e={}){const t=kK(e);return t.textContent=i,t}function XKe(i,e={}){const t=kK(e);return b_e(t,ZKe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function kK(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class YKe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function b_e(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(vr(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{b_e(s,r,t,n)})}function ZKe(i,e){const t={type:1,children:[]};let n=0,s=t;const r=[],o=new YKe(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&KU(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&QKe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=KU(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const u={type:c,children:[]};c===5&&(u.index=n,n++),s.children.push(u),r.push(s),s=u}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function QKe(i,e){return KU(i,e)!==0}function KU(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const JKe=new RegExp(`(\\\\)?\\$\\((${An.iconNameExpression}(?:${An.iconModifierExpression})?)\\)`,"g");function V0(i){const e=new Array;let t,n=0,s=0;for(;(t=JKe.exec(i))!==null;){s=t.index||0,n<s&&e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:kR({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function kR(i){const e=Ht("span");return e.classList.add(...An.asClassNameArray(i)),e}function w_e(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}C_e.bind(void 0,!1);const MR=C_e.bind(void 0,!0);function C_e(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=Vj(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function eqe(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function tqe(i,e){return qU(i.toLowerCase(),e.toLowerCase(),0,0)}function qU(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=qU(i,e,t+1,n+1))?x_e({start:n,end:n+1},s):null}return qU(i,e,t,n+1)}function MK(i){return 97<=i&&i<=122}function T4(i){return 65<=i&&i<=90}function DK(i){return 48<=i&&i<=57}function nqe(i){return i===32||i===9||i===10||i===13}const iqe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>iqe.add(i.charCodeAt(0)));function S_e(i){return MK(i)||T4(i)||DK(i)}function x_e(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function E_e(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(T4(n)||DK(n)||t>0&&!S_e(i.charCodeAt(t-1)))return t}return i.length}function XU(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=XU(i,e,t+1,n+1);!s&&(r=E_e(e,r))<e.length;)s=XU(i,e,t+1,r),r++;return s===null?null:x_e({start:n,end:n+1},s)}}function sqe(i){let e=0,t=0,n=0,s=0,r=0;for(let u=0;u<i.length;u++)r=i.charCodeAt(u),T4(r)&&e++,MK(r)&&t++,S_e(r)&&n++,DK(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function rqe(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function oqe(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function aqe(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),T4(n)&&e++,MK(n)&&t++,nqe(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function L_e(i,e){if(!e||(e=e.trim(),e.length===0)||!aqe(i))return null;e.length>60&&(e=e.substring(0,60));const t=sqe(e);if(!oqe(t)){if(!rqe(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=XU(i,e,0,s))===null;)s=E_e(e,s+1);return n}const lqe=w_e(MR,L_e,eqe),cqe=w_e(MR,L_e,tqe),Die=new ak(1e4);function Aie(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=Die.get(i);n||(n=new RegExp($Ue(i),"i"),Die.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?cqe(i,e):lqe(i,e)}function uqe(i,e){const t=M_e(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?hqe(t):null}function hqe(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const jp=128;function AK(){const i=[],e=[];for(let t=0;t<=jp;t++)e[t]=0;for(let t=0;t<=jp;t++)i.push(e.slice(0));return i}function T_e(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const k_e=T_e(2*jp),YU=T_e(2*jp),df=AK(),m_=AK(),bD=AK();function wD(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!jj(t)}}function Iie(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function RI(i,e,t){return e[i]!==t[i]}function dqe(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(k_e[e]=s),e+=1),s+=1;return e===t}var aw;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(aw||(aw={}));const sZ=class sZ{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};sZ.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let ZU=sZ;function M_e(i,e,t,n,s,r,o=ZU.default){const a=i.length>jp?jp:i.length,l=n.length>jp?jp:n.length;if(t>=a||r>=l||a-t>l-r||!dqe(e,t,a,s,r,l,!0))return;fqe(a,l,t,r,e,s);let c=1,u=1,h=t,d=r;const f=[!1];for(c=1,h=t;h<a;c++,h++){const v=k_e[h],y=YU[h],C=h+1<a?YU[h+1]:l;for(u=v-r+1,d=v;d<C;u++,d++){let S=Number.MIN_SAFE_INTEGER,x=!1;d<=y&&(S=gqe(i,e,h,t,n,s,d,l,r,df[c-1][u-1]===0,f));let E=0;S!==Number.MAX_SAFE_INTEGER&&(x=!0,E=S+m_[c-1][u-1]);const L=d>v,T=L?m_[c][u-1]+(df[c][u-1]>0?-5:0):0,D=d>v+1&&df[c][u-1]>0,I=D?m_[c][u-2]+(df[c][u-2]>0?-5:0):0;if(D&&(!L||I>=T)&&(!x||I>=E))m_[c][u]=I,bD[c][u]=3,df[c][u]=0;else if(L&&(!x||T>=E))m_[c][u]=T,bD[c][u]=2,df[c][u]=0;else if(x)m_[c][u]=E,bD[c][u]=1,df[c][u]=df[c-1][u-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,u--;const g=[m_[c][u],r];let p=0,_=0;for(;c>=1;){let v=u;do{const y=bD[c][v];if(y===3)v=v-2;else if(y===2)v=v-1;else break}while(v>=1);p>1&&e[t+c-1]===s[r+u-1]&&!RI(v+r-1,n,s)&&p+1>df[c][v]&&(v=u),v===u?p++:p=1,_||(_=v),c--,u=v-1,g.push(u)}l-r===a&&o.boostFullMatch&&(g[0]+=2);const m=_-a;return g[0]-=m,g}function fqe(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(YU[o]=a,o--),a--}function gqe(i,e,t,n,s,r,o,a,l,c,u){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let h=1,d=!1;return o===t-n?h=i[t]===s[o]?7:5:RI(o,s,r)&&(o===0||!RI(o-1,s,r))?(h=i[t]===s[o]?7:5,d=!0):wD(r,o)&&(o===0||!wD(r,o-1))?h=5:(wD(r,o-1)||Iie(r,o-1))&&(h=5,d=!0),h>1&&t===n&&(u[0]=!0),d||(d=RI(o,s,r)||wD(r,o-1)||Iie(r,o-1)),t===n?o>l&&(h-=d?3:5):c?h+=d?2:0:h+=d?0:1,o+1===a&&(h-=d?3:5),h}const pqe="$(",IK=new RegExp(`\\$\\(${An.iconNameExpression}(?:${An.iconModifierExpression})?\\)`,"g"),mqe=new RegExp(`(\\\\)?${IK.source}`,"g");function _qe(i){return i.replace(mqe,(e,t)=>t?e:`\\${e}`)}const vqe=new RegExp(`\\\\${IK.source}`,"g");function yqe(i){return i.replace(vqe,e=>`\\${e}`)}const bqe=new RegExp(`(\\s)?(\\\\)?${IK.source}(\\s)?`,"g");function D_e(i){return i.indexOf(pqe)===-1?i:i.replace(bqe,(e,t,n,s)=>n?e:t||s||"")}function wqe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const v8=new RegExp(`\\$\\(${An.iconNameCharacter}+\\)`,"g");function fE(i){v8.lastIndex=0;let e="";const t=[];let n=0;for(;;){const s=v8.lastIndex,r=v8.exec(i),o=i.substring(s,r==null?void 0:r.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(n)}if(!r)break;n+=r[0].length}return{text:e,iconOffsets:t}}function y8(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return Aie(i,n,t);const r=i4(n," "),o=n.length-r.length,a=Aie(i,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}function ff(i){return iR(i,!0)}class Cqe{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Gz(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===hn.file)return FU(ff(e),ff(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(Rie(e.authority,t.authority))return FU(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return fn.joinPath(e,...t)}basenameOrAuthority(e){return NK(e)||e.authority}basename(e){return vs.basename(e.path)}extname(e){return vs.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===hn.file?t=fn.file(CUe(ff(e))).path:(t=vs.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===hn.file?t=fn.file(ppe(ff(e))).path:t=vs.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Rie(e.authority,t.authority))return;if(e.scheme===hn.file){const r=wUe(ff(e),ff(t));return rl?Gme(r):r}let n=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(n.length,s.length);r<o&&!(n.charCodeAt(r)!==s.charCodeAt(r)&&n.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);n=s.substr(0,r)+n.substr(r)}return vs.relative(n,s)}resolvePath(e,t){if(e.scheme===hn.file){const n=fn.file(bUe(ff(e),t));return e.with({authority:n.authority,path:n.path})}return t=TGe(t),e.with({path:vs.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&lb(e,t)}hasTrailingPathSeparator(e,t=hm){if(e.scheme===hn.file){const n=ff(e);return n.length>oie(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=hm){return Pie(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=hm){let n=!1;if(e.scheme===hn.file){const s=ff(e);n=s!==void 0&&s.length===oie(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;n=s.length===1&&s.charCodeAt(s.length-1)===47}return!n&&!Pie(e,t)?e.with({path:e.path+"/"}):e}}const zi=new Cqe(()=>!1),Sqe=zi.isEqual.bind(zi);zi.isEqualOrParent.bind(zi);zi.getComparisonKey.bind(zi);zi.basenameOrAuthority.bind(zi);const NK=zi.basename.bind(zi);zi.extname.bind(zi);const xqe=zi.dirname.bind(zi);zi.joinPath.bind(zi);const Eqe=zi.normalizePath.bind(zi);zi.relativePath.bind(zi);const Nie=zi.resolvePath.bind(zi);zi.isAbsolutePath.bind(zi);const Rie=zi.isEqualAuthority.bind(zi),Pie=zi.hasTrailingPathSeparator.bind(zi);zi.removeTrailingPathSeparator.bind(zi);zi.addTrailingPathSeparator.bind(zi);var DR;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(DR||(DR={}));class A_e{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw t4("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=Tqe(this.supportThemeIcons?_qe(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${kqe(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Ng(t),"g");return e.replace(n,(s,r)=>e.charAt(r-1)!=="\\"?`\\${s}`:s)}}function lw(i){return i instanceof A_e?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function Lqe(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&Sqe(fn.from(i.baseUri),fn.from(e.baseUri)))}function Tqe(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function kqe(i,e){var s;const t=((s=i.match(/^`+/gm))==null?void 0:s.reduce((r,o)=>r.length>o.length?r:o).length)??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,i,`${"`".repeat(n)}`].join(`
`)}function CD(i){return i.replace(/"/g,"&quot;")}function b8(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function Mqe(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}class I_e{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Oie=new I_e("id#");let fo={};(function(){function i(e,t){t(fo)}i.amd=!0,function(e,t){typeof i=="function"&&i.amd?i(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(St){e.defaults=St}const s=/[&<>"']/,r=new RegExp(s.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=St=>l[St];function u(St,Q){if(Q){if(s.test(St))return St.replace(r,c)}else if(o.test(St))return St.replace(a,c);return St}const h=/(^|[^\[])\^/g;function d(St,Q){let J=typeof St=="string"?St:St.source;Q=Q||"";const ne={replace:(pe,ve)=>{let Te=typeof ve=="string"?ve:ve.source;return Te=Te.replace(h,"$1"),J=J.replace(pe,Te),ne},getRegex:()=>new RegExp(J,Q)};return ne}function f(St){try{St=encodeURI(St).replace(/%25/g,"%")}catch{return null}return St}const g={exec:()=>null};function p(St,Q){const J=St.replace(/\|/g,(ve,Te,ze)=>{let ht=!1,ct=Te;for(;--ct>=0&&ze[ct]==="\\";)ht=!ht;return ht?"|":" |"}),ne=J.split(/ \|/);let pe=0;if(ne[0].trim()||ne.shift(),ne.length>0&&!ne[ne.length-1].trim()&&ne.pop(),Q)if(ne.length>Q)ne.splice(Q);else for(;ne.length<Q;)ne.push("");for(;pe<ne.length;pe++)ne[pe]=ne[pe].trim().replace(/\\\|/g,"|");return ne}function _(St,Q,J){const ne=St.length;if(ne===0)return"";let pe=0;for(;pe<ne;){const ve=St.charAt(ne-pe-1);if(ve===Q&&!J)pe++;else if(ve!==Q&&J)pe++;else break}return St.slice(0,ne-pe)}function m(St,Q){if(St.indexOf(Q[1])===-1)return-1;let J=0;for(let ne=0;ne<St.length;ne++)if(St[ne]==="\\")ne++;else if(St[ne]===Q[0])J++;else if(St[ne]===Q[1]&&(J--,J<0))return ne;return-1}function v(St,Q,J,ne){const pe=Q.href,ve=Q.title?u(Q.title):null,Te=St[1].replace(/\\([\[\]])/g,"$1");if(St[0].charAt(0)!=="!"){ne.state.inLink=!0;const ze={type:"link",raw:J,href:pe,title:ve,text:Te,tokens:ne.inlineTokens(Te)};return ne.state.inLink=!1,ze}return{type:"image",raw:J,href:pe,title:ve,text:u(Te)}}function y(St,Q){const J=St.match(/^(\s+)(?:```)/);if(J===null)return Q;const ne=J[1];return Q.split(`
`).map(pe=>{const ve=pe.match(/^\s+/);if(ve===null)return pe;const[Te]=ve;return Te.length>=ne.length?pe.slice(ne.length):pe}).join(`
`)}class C{constructor(Q){Cs(this,"options");Cs(this,"rules");Cs(this,"lexer");this.options=Q||e.defaults}space(Q){const J=this.rules.block.newline.exec(Q);if(J&&J[0].length>0)return{type:"space",raw:J[0]}}code(Q){const J=this.rules.block.code.exec(Q);if(J){const ne=J[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:J[0],codeBlockStyle:"indented",text:this.options.pedantic?ne:_(ne,`
`)}}}fences(Q){const J=this.rules.block.fences.exec(Q);if(J){const ne=J[0],pe=y(ne,J[3]||"");return{type:"code",raw:ne,lang:J[2]?J[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):J[2],text:pe}}}heading(Q){const J=this.rules.block.heading.exec(Q);if(J){let ne=J[2].trim();if(/#$/.test(ne)){const pe=_(ne,"#");(this.options.pedantic||!pe||/ $/.test(pe))&&(ne=pe.trim())}return{type:"heading",raw:J[0],depth:J[1].length,text:ne,tokens:this.lexer.inline(ne)}}}hr(Q){const J=this.rules.block.hr.exec(Q);if(J)return{type:"hr",raw:_(J[0],`
`)}}blockquote(Q){const J=this.rules.block.blockquote.exec(Q);if(J){let ne=_(J[0],`
`).split(`
`),pe="",ve="";const Te=[];for(;ne.length>0;){let ze=!1;const ht=[];let ct;for(ct=0;ct<ne.length;ct++)if(/^ {0,3}>/.test(ne[ct]))ht.push(ne[ct]),ze=!0;else if(!ze)ht.push(ne[ct]);else break;ne=ne.slice(ct);const zt=ht.join(`
`),sn=zt.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");pe=pe?`${pe}
${zt}`:zt,ve=ve?`${ve}
${sn}`:sn;const Hn=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(sn,Te,!0),this.lexer.state.top=Hn,ne.length===0)break;const On=Te[Te.length-1];if((On==null?void 0:On.type)==="code")break;if((On==null?void 0:On.type)==="blockquote"){const ae=On,_e=ae.raw+`
`+ne.join(`
`),ie=this.blockquote(_e);Te[Te.length-1]=ie,pe=pe.substring(0,pe.length-ae.raw.length)+ie.raw,ve=ve.substring(0,ve.length-ae.text.length)+ie.text;break}else if((On==null?void 0:On.type)==="list"){const ae=On,_e=ae.raw+`
`+ne.join(`
`),ie=this.list(_e);Te[Te.length-1]=ie,pe=pe.substring(0,pe.length-On.raw.length)+ie.raw,ve=ve.substring(0,ve.length-ae.raw.length)+ie.raw,ne=_e.substring(Te[Te.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:pe,tokens:Te,text:ve}}}list(Q){let J=this.rules.block.list.exec(Q);if(J){let ne=J[1].trim();const pe=ne.length>1,ve={type:"list",raw:"",ordered:pe,start:pe?+ne.slice(0,-1):"",loose:!1,items:[]};ne=pe?`\\d{1,9}\\${ne.slice(-1)}`:`\\${ne}`,this.options.pedantic&&(ne=pe?ne:"[*+-]");const Te=new RegExp(`^( {0,3}${ne})((?:[	 ][^\\n]*)?(?:\\n|$))`);let ze=!1;for(;Q;){let ht=!1,ct="",zt="";if(!(J=Te.exec(Q))||this.rules.block.hr.test(Q))break;ct=J[0],Q=Q.substring(ct.length);let sn=J[2].split(`
`,1)[0].replace(/^\t+/,ce=>" ".repeat(3*ce.length)),Hn=Q.split(`
`,1)[0],On=!sn.trim(),ae=0;if(this.options.pedantic?(ae=2,zt=sn.trimStart()):On?ae=J[1].length+1:(ae=J[2].search(/[^ ]/),ae=ae>4?1:ae,zt=sn.slice(ae),ae+=J[1].length),On&&/^ *$/.test(Hn)&&(ct+=Hn+`
`,Q=Q.substring(Hn.length+1),ht=!0),!ht){const ce=new RegExp(`^ {0,${Math.min(3,ae-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Ce=new RegExp(`^ {0,${Math.min(3,ae-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),mt=new RegExp(`^ {0,${Math.min(3,ae-1)}}(?:\`\`\`|~~~)`),Bt=new RegExp(`^ {0,${Math.min(3,ae-1)}}#`);for(;Q;){const jt=Q.split(`
`,1)[0];if(Hn=jt,this.options.pedantic&&(Hn=Hn.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),mt.test(Hn)||Bt.test(Hn)||ce.test(Hn)||Ce.test(Q))break;if(Hn.search(/[^ ]/)>=ae||!Hn.trim())zt+=`
`+Hn.slice(ae);else{if(On||sn.search(/[^ ]/)>=4||mt.test(sn)||Bt.test(sn)||Ce.test(sn))break;zt+=`
`+Hn}!On&&!Hn.trim()&&(On=!0),ct+=jt+`
`,Q=Q.substring(jt.length+1),sn=Hn.slice(ae)}}ve.loose||(ze?ve.loose=!0:/\n *\n *$/.test(ct)&&(ze=!0));let _e=null,ie;this.options.gfm&&(_e=/^\[[ xX]\] /.exec(zt),_e&&(ie=_e[0]!=="[ ] ",zt=zt.replace(/^\[[ xX]\] +/,""))),ve.items.push({type:"list_item",raw:ct,task:!!_e,checked:ie,loose:!1,text:zt,tokens:[]}),ve.raw+=ct}ve.items[ve.items.length-1].raw=ve.items[ve.items.length-1].raw.trimEnd(),ve.items[ve.items.length-1].text=ve.items[ve.items.length-1].text.trimEnd(),ve.raw=ve.raw.trimEnd();for(let ht=0;ht<ve.items.length;ht++)if(this.lexer.state.top=!1,ve.items[ht].tokens=this.lexer.blockTokens(ve.items[ht].text,[]),!ve.loose){const ct=ve.items[ht].tokens.filter(sn=>sn.type==="space"),zt=ct.length>0&&ct.some(sn=>/\n.*\n/.test(sn.raw));ve.loose=zt}if(ve.loose)for(let ht=0;ht<ve.items.length;ht++)ve.items[ht].loose=!0;return ve}}html(Q){const J=this.rules.block.html.exec(Q);if(J)return{type:"html",block:!0,raw:J[0],pre:J[1]==="pre"||J[1]==="script"||J[1]==="style",text:J[0]}}def(Q){const J=this.rules.block.def.exec(Q);if(J){const ne=J[1].toLowerCase().replace(/\s+/g," "),pe=J[2]?J[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",ve=J[3]?J[3].substring(1,J[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):J[3];return{type:"def",tag:ne,raw:J[0],href:pe,title:ve}}}table(Q){const J=this.rules.block.table.exec(Q);if(!J||!/[:|]/.test(J[2]))return;const ne=p(J[1]),pe=J[2].replace(/^\||\| *$/g,"").split("|"),ve=J[3]&&J[3].trim()?J[3].replace(/\n[ \t]*$/,"").split(`
`):[],Te={type:"table",raw:J[0],header:[],align:[],rows:[]};if(ne.length===pe.length){for(const ze of pe)/^ *-+: *$/.test(ze)?Te.align.push("right"):/^ *:-+: *$/.test(ze)?Te.align.push("center"):/^ *:-+ *$/.test(ze)?Te.align.push("left"):Te.align.push(null);for(let ze=0;ze<ne.length;ze++)Te.header.push({text:ne[ze],tokens:this.lexer.inline(ne[ze]),header:!0,align:Te.align[ze]});for(const ze of ve)Te.rows.push(p(ze,Te.header.length).map((ht,ct)=>({text:ht,tokens:this.lexer.inline(ht),header:!1,align:Te.align[ct]})));return Te}}lheading(Q){const J=this.rules.block.lheading.exec(Q);if(J)return{type:"heading",raw:J[0],depth:J[2].charAt(0)==="="?1:2,text:J[1],tokens:this.lexer.inline(J[1])}}paragraph(Q){const J=this.rules.block.paragraph.exec(Q);if(J){const ne=J[1].charAt(J[1].length-1)===`
`?J[1].slice(0,-1):J[1];return{type:"paragraph",raw:J[0],text:ne,tokens:this.lexer.inline(ne)}}}text(Q){const J=this.rules.block.text.exec(Q);if(J)return{type:"text",raw:J[0],text:J[0],tokens:this.lexer.inline(J[0])}}escape(Q){const J=this.rules.inline.escape.exec(Q);if(J)return{type:"escape",raw:J[0],text:u(J[1])}}tag(Q){const J=this.rules.inline.tag.exec(Q);if(J)return!this.lexer.state.inLink&&/^<a /i.test(J[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(J[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(J[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(J[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:J[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:J[0]}}link(Q){const J=this.rules.inline.link.exec(Q);if(J){const ne=J[2].trim();if(!this.options.pedantic&&/^</.test(ne)){if(!/>$/.test(ne))return;const Te=_(ne.slice(0,-1),"\\");if((ne.length-Te.length)%2===0)return}else{const Te=m(J[2],"()");if(Te>-1){const ht=(J[0].indexOf("!")===0?5:4)+J[1].length+Te;J[2]=J[2].substring(0,Te),J[0]=J[0].substring(0,ht).trim(),J[3]=""}}let pe=J[2],ve="";if(this.options.pedantic){const Te=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(pe);Te&&(pe=Te[1],ve=Te[3])}else ve=J[3]?J[3].slice(1,-1):"";return pe=pe.trim(),/^</.test(pe)&&(this.options.pedantic&&!/>$/.test(ne)?pe=pe.slice(1):pe=pe.slice(1,-1)),v(J,{href:pe&&pe.replace(this.rules.inline.anyPunctuation,"$1"),title:ve&&ve.replace(this.rules.inline.anyPunctuation,"$1")},J[0],this.lexer)}}reflink(Q,J){let ne;if((ne=this.rules.inline.reflink.exec(Q))||(ne=this.rules.inline.nolink.exec(Q))){const pe=(ne[2]||ne[1]).replace(/\s+/g," "),ve=J[pe.toLowerCase()];if(!ve){const Te=ne[0].charAt(0);return{type:"text",raw:Te,text:Te}}return v(ne,ve,ne[0],this.lexer)}}emStrong(Q,J,ne=""){let pe=this.rules.inline.emStrongLDelim.exec(Q);if(!pe||pe[3]&&ne.match(/[\p{L}\p{N}]/u))return;if(!(pe[1]||pe[2]||"")||!ne||this.rules.inline.punctuation.exec(ne)){const Te=[...pe[0]].length-1;let ze,ht,ct=Te,zt=0;const sn=pe[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(sn.lastIndex=0,J=J.slice(-1*Q.length+Te);(pe=sn.exec(J))!=null;){if(ze=pe[1]||pe[2]||pe[3]||pe[4]||pe[5]||pe[6],!ze)continue;if(ht=[...ze].length,pe[3]||pe[4]){ct+=ht;continue}else if((pe[5]||pe[6])&&Te%3&&!((Te+ht)%3)){zt+=ht;continue}if(ct-=ht,ct>0)continue;ht=Math.min(ht,ht+ct+zt);const Hn=[...pe[0]][0].length,On=Q.slice(0,Te+pe.index+Hn+ht);if(Math.min(Te,ht)%2){const _e=On.slice(1,-1);return{type:"em",raw:On,text:_e,tokens:this.lexer.inlineTokens(_e)}}const ae=On.slice(2,-2);return{type:"strong",raw:On,text:ae,tokens:this.lexer.inlineTokens(ae)}}}}codespan(Q){const J=this.rules.inline.code.exec(Q);if(J){let ne=J[2].replace(/\n/g," ");const pe=/[^ ]/.test(ne),ve=/^ /.test(ne)&&/ $/.test(ne);return pe&&ve&&(ne=ne.substring(1,ne.length-1)),ne=u(ne,!0),{type:"codespan",raw:J[0],text:ne}}}br(Q){const J=this.rules.inline.br.exec(Q);if(J)return{type:"br",raw:J[0]}}del(Q){const J=this.rules.inline.del.exec(Q);if(J)return{type:"del",raw:J[0],text:J[2],tokens:this.lexer.inlineTokens(J[2])}}autolink(Q){const J=this.rules.inline.autolink.exec(Q);if(J){let ne,pe;return J[2]==="@"?(ne=u(J[1]),pe="mailto:"+ne):(ne=u(J[1]),pe=ne),{type:"link",raw:J[0],text:ne,href:pe,tokens:[{type:"text",raw:ne,text:ne}]}}}url(Q){var ne;let J;if(J=this.rules.inline.url.exec(Q)){let pe,ve;if(J[2]==="@")pe=u(J[0]),ve="mailto:"+pe;else{let Te;do Te=J[0],J[0]=((ne=this.rules.inline._backpedal.exec(J[0]))==null?void 0:ne[0])??"";while(Te!==J[0]);pe=u(J[0]),J[1]==="www."?ve="http://"+J[0]:ve=J[0]}return{type:"link",raw:J[0],text:pe,href:ve,tokens:[{type:"text",raw:pe,text:pe}]}}}inlineText(Q){const J=this.rules.inline.text.exec(Q);if(J){let ne;return this.lexer.state.inRawBlock?ne=J[0]:ne=u(J[0]),{type:"text",raw:J[0],text:ne}}}}const S=/^(?: *(?:\n|$))+/,x=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,E=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,L=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,T=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,D=/(?:[*+-]|\d{1,9}[.)])/,I=d(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,D).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),N=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,P=/^[^\n]+/,O=/(?!\s*\])(?:\\.|[^\[\]\\])+/,V=d(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",O).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),z=d(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,D).getRegex(),K="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",H=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,U=d("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",H).replace("tag",K).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),j=d(N).replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",K).getRegex(),X={blockquote:d(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",j).getRegex(),code:x,def:V,fences:E,heading:T,hr:L,html:U,lheading:I,list:z,newline:S,paragraph:j,table:g,text:P},ee=d("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",K).getRegex(),le={...X,table:ee,paragraph:d(N).replace("hr",L).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ee).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",K).getRegex()},fe={...X,html:d(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",H).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:d(N).replace("hr",L).replace("heading",` *#{1,6} *[^
]`).replace("lheading",I).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},be=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,ye=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xe=/^( {2,}|\\)\n(?!\s*$)/,He=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,qe="\\p{P}\\p{S}",ke=d(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,qe).getRegex(),q=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ee=d(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,qe).getRegex(),De=d("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,qe).getRegex(),Ae=d("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,qe).getRegex(),Me=d(/\\([punct])/,"gu").replace(/punct/g,qe).getRegex(),Je=d(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Pe=d(H).replace("(?:-->|$)","-->").getRegex(),Xe=d("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Pe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Re=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Fe=d(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Re).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wt=d(/^!?\[(label)\]\[(ref)\]/).replace("label",Re).replace("ref",O).getRegex(),te=d(/^!?\[(ref)\](?:\[\])?/).replace("ref",O).getRegex(),Z=d("reflink|nolink(?!\\()","g").replace("reflink",wt).replace("nolink",te).getRegex(),we={_backpedal:g,anyPunctuation:Me,autolink:Je,blockSkip:q,br:xe,code:ye,del:g,emStrongLDelim:Ee,emStrongRDelimAst:De,emStrongRDelimUnd:Ae,escape:be,link:Fe,nolink:te,punctuation:ke,reflink:wt,reflinkSearch:Z,tag:Xe,text:He,url:g},Ye={...we,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",Re).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Re).getRegex()},je={...we,escape:d(be).replace("])","~|])").getRegex(),url:d(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ge={...je,br:d(xe).replace("{2,}","*").getRegex(),text:d(je.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ot={normal:X,gfm:le,pedantic:fe},tt={normal:we,gfm:je,breaks:Ge,pedantic:Ye};class Oe{constructor(Q){Cs(this,"tokens");Cs(this,"options");Cs(this,"state");Cs(this,"tokenizer");Cs(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=Q||e.defaults,this.options.tokenizer=this.options.tokenizer||new C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const J={block:ot.normal,inline:tt.normal};this.options.pedantic?(J.block=ot.pedantic,J.inline=tt.pedantic):this.options.gfm&&(J.block=ot.gfm,this.options.breaks?J.inline=tt.breaks:J.inline=tt.gfm),this.tokenizer.rules=J}static get rules(){return{block:ot,inline:tt}}static lex(Q,J){return new Oe(J).lex(Q)}static lexInline(Q,J){return new Oe(J).inlineTokens(Q)}lex(Q){Q=Q.replace(/\r\n|\r/g,`
`),this.blockTokens(Q,this.tokens);for(let J=0;J<this.inlineQueue.length;J++){const ne=this.inlineQueue[J];this.inlineTokens(ne.src,ne.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(Q,J=[],ne=!1){this.options.pedantic?Q=Q.replace(/\t/g,"    ").replace(/^ +$/gm,""):Q=Q.replace(/^( *)(\t+)/gm,(ze,ht,ct)=>ht+"    ".repeat(ct.length));let pe,ve,Te;for(;Q;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(ze=>(pe=ze.call({lexer:this},Q,J))?(Q=Q.substring(pe.raw.length),J.push(pe),!0):!1))){if(pe=this.tokenizer.space(Q)){Q=Q.substring(pe.raw.length),pe.raw.length===1&&J.length>0?J[J.length-1].raw+=`
`:J.push(pe);continue}if(pe=this.tokenizer.code(Q)){Q=Q.substring(pe.raw.length),ve=J[J.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+pe.raw,ve.text+=`
`+pe.text,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):J.push(pe);continue}if(pe=this.tokenizer.fences(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.heading(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.hr(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.blockquote(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.list(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.html(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.def(Q)){Q=Q.substring(pe.raw.length),ve=J[J.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+pe.raw,ve.text+=`
`+pe.raw,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):this.tokens.links[pe.tag]||(this.tokens.links[pe.tag]={href:pe.href,title:pe.title});continue}if(pe=this.tokenizer.table(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(pe=this.tokenizer.lheading(Q)){Q=Q.substring(pe.raw.length),J.push(pe);continue}if(Te=Q,this.options.extensions&&this.options.extensions.startBlock){let ze=1/0;const ht=Q.slice(1);let ct;this.options.extensions.startBlock.forEach(zt=>{ct=zt.call({lexer:this},ht),typeof ct=="number"&&ct>=0&&(ze=Math.min(ze,ct))}),ze<1/0&&ze>=0&&(Te=Q.substring(0,ze+1))}if(this.state.top&&(pe=this.tokenizer.paragraph(Te))){ve=J[J.length-1],ne&&(ve==null?void 0:ve.type)==="paragraph"?(ve.raw+=`
`+pe.raw,ve.text+=`
`+pe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):J.push(pe),ne=Te.length!==Q.length,Q=Q.substring(pe.raw.length);continue}if(pe=this.tokenizer.text(Q)){Q=Q.substring(pe.raw.length),ve=J[J.length-1],ve&&ve.type==="text"?(ve.raw+=`
`+pe.raw,ve.text+=`
`+pe.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):J.push(pe);continue}if(Q){const ze="Infinite loop on byte: "+Q.charCodeAt(0);if(this.options.silent){console.error(ze);break}else throw new Error(ze)}}return this.state.top=!0,J}inline(Q,J=[]){return this.inlineQueue.push({src:Q,tokens:J}),J}inlineTokens(Q,J=[]){let ne,pe,ve,Te=Q,ze,ht,ct;if(this.tokens.links){const zt=Object.keys(this.tokens.links);if(zt.length>0)for(;(ze=this.tokenizer.rules.inline.reflinkSearch.exec(Te))!=null;)zt.includes(ze[0].slice(ze[0].lastIndexOf("[")+1,-1))&&(Te=Te.slice(0,ze.index)+"["+"a".repeat(ze[0].length-2)+"]"+Te.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ze=this.tokenizer.rules.inline.blockSkip.exec(Te))!=null;)Te=Te.slice(0,ze.index)+"["+"a".repeat(ze[0].length-2)+"]"+Te.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ze=this.tokenizer.rules.inline.anyPunctuation.exec(Te))!=null;)Te=Te.slice(0,ze.index)+"++"+Te.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;Q;)if(ht||(ct=""),ht=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(zt=>(ne=zt.call({lexer:this},Q,J))?(Q=Q.substring(ne.raw.length),J.push(ne),!0):!1))){if(ne=this.tokenizer.escape(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.tag(Q)){Q=Q.substring(ne.raw.length),pe=J[J.length-1],pe&&ne.type==="text"&&pe.type==="text"?(pe.raw+=ne.raw,pe.text+=ne.text):J.push(ne);continue}if(ne=this.tokenizer.link(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.reflink(Q,this.tokens.links)){Q=Q.substring(ne.raw.length),pe=J[J.length-1],pe&&ne.type==="text"&&pe.type==="text"?(pe.raw+=ne.raw,pe.text+=ne.text):J.push(ne);continue}if(ne=this.tokenizer.emStrong(Q,Te,ct)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.codespan(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.br(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.del(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ne=this.tokenizer.autolink(Q)){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(!this.state.inLink&&(ne=this.tokenizer.url(Q))){Q=Q.substring(ne.raw.length),J.push(ne);continue}if(ve=Q,this.options.extensions&&this.options.extensions.startInline){let zt=1/0;const sn=Q.slice(1);let Hn;this.options.extensions.startInline.forEach(On=>{Hn=On.call({lexer:this},sn),typeof Hn=="number"&&Hn>=0&&(zt=Math.min(zt,Hn))}),zt<1/0&&zt>=0&&(ve=Q.substring(0,zt+1))}if(ne=this.tokenizer.inlineText(ve)){Q=Q.substring(ne.raw.length),ne.raw.slice(-1)!=="_"&&(ct=ne.raw.slice(-1)),ht=!0,pe=J[J.length-1],pe&&pe.type==="text"?(pe.raw+=ne.raw,pe.text+=ne.text):J.push(ne);continue}if(Q){const zt="Infinite loop on byte: "+Q.charCodeAt(0);if(this.options.silent){console.error(zt);break}else throw new Error(zt)}}return J}}class lt{constructor(Q){Cs(this,"options");Cs(this,"parser");this.options=Q||e.defaults}space(Q){return""}code({text:Q,lang:J,escaped:ne}){var Te;const pe=(Te=(J||"").match(/^\S*/))==null?void 0:Te[0],ve=Q.replace(/\n$/,"")+`
`;return pe?'<pre><code class="language-'+u(pe)+'">'+(ne?ve:u(ve,!0))+`</code></pre>
`:"<pre><code>"+(ne?ve:u(ve,!0))+`</code></pre>
`}blockquote({tokens:Q}){return`<blockquote>
${this.parser.parse(Q)}</blockquote>
`}html({text:Q}){return Q}heading({tokens:Q,depth:J}){return`<h${J}>${this.parser.parseInline(Q)}</h${J}>
`}hr(Q){return`<hr>
`}list(Q){const J=Q.ordered,ne=Q.start;let pe="";for(let ze=0;ze<Q.items.length;ze++){const ht=Q.items[ze];pe+=this.listitem(ht)}const ve=J?"ol":"ul",Te=J&&ne!==1?' start="'+ne+'"':"";return"<"+ve+Te+`>
`+pe+"</"+ve+`>
`}listitem(Q){let J="";if(Q.task){const ne=this.checkbox({checked:!!Q.checked});Q.loose?Q.tokens.length>0&&Q.tokens[0].type==="paragraph"?(Q.tokens[0].text=ne+" "+Q.tokens[0].text,Q.tokens[0].tokens&&Q.tokens[0].tokens.length>0&&Q.tokens[0].tokens[0].type==="text"&&(Q.tokens[0].tokens[0].text=ne+" "+Q.tokens[0].tokens[0].text)):Q.tokens.unshift({type:"text",raw:ne+" ",text:ne+" "}):J+=ne+" "}return J+=this.parser.parse(Q.tokens,!!Q.loose),`<li>${J}</li>
`}checkbox({checked:Q}){return"<input "+(Q?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:Q}){return`<p>${this.parser.parseInline(Q)}</p>
`}table(Q){let J="",ne="";for(let ve=0;ve<Q.header.length;ve++)ne+=this.tablecell(Q.header[ve]);J+=this.tablerow({text:ne});let pe="";for(let ve=0;ve<Q.rows.length;ve++){const Te=Q.rows[ve];ne="";for(let ze=0;ze<Te.length;ze++)ne+=this.tablecell(Te[ze]);pe+=this.tablerow({text:ne})}return pe&&(pe=`<tbody>${pe}</tbody>`),`<table>
<thead>
`+J+`</thead>
`+pe+`</table>
`}tablerow({text:Q}){return`<tr>
${Q}</tr>
`}tablecell(Q){const J=this.parser.parseInline(Q.tokens),ne=Q.header?"th":"td";return(Q.align?`<${ne} align="${Q.align}">`:`<${ne}>`)+J+`</${ne}>
`}strong({tokens:Q}){return`<strong>${this.parser.parseInline(Q)}</strong>`}em({tokens:Q}){return`<em>${this.parser.parseInline(Q)}</em>`}codespan({text:Q}){return`<code>${Q}</code>`}br(Q){return"<br>"}del({tokens:Q}){return`<del>${this.parser.parseInline(Q)}</del>`}link({href:Q,title:J,tokens:ne}){const pe=this.parser.parseInline(ne),ve=f(Q);if(ve===null)return pe;Q=ve;let Te='<a href="'+Q+'"';return J&&(Te+=' title="'+J+'"'),Te+=">"+pe+"</a>",Te}image({href:Q,title:J,text:ne}){const pe=f(Q);if(pe===null)return ne;Q=pe;let ve=`<img src="${Q}" alt="${ne}"`;return J&&(ve+=` title="${J}"`),ve+=">",ve}text(Q){return"tokens"in Q&&Q.tokens?this.parser.parseInline(Q.tokens):Q.text}}class xt{strong({text:Q}){return Q}em({text:Q}){return Q}codespan({text:Q}){return Q}del({text:Q}){return Q}html({text:Q}){return Q}text({text:Q}){return Q}link({text:Q}){return""+Q}image({text:Q}){return""+Q}br(){return""}}class ut{constructor(Q){Cs(this,"options");Cs(this,"renderer");Cs(this,"textRenderer");this.options=Q||e.defaults,this.options.renderer=this.options.renderer||new lt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new xt}static parse(Q,J){return new ut(J).parse(Q)}static parseInline(Q,J){return new ut(J).parseInline(Q)}parse(Q,J=!0){let ne="";for(let pe=0;pe<Q.length;pe++){const ve=Q[pe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]){const ze=ve,ht=this.options.extensions.renderers[ze.type].call({parser:this},ze);if(ht!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ze.type)){ne+=ht||"";continue}}const Te=ve;switch(Te.type){case"space":{ne+=this.renderer.space(Te);continue}case"hr":{ne+=this.renderer.hr(Te);continue}case"heading":{ne+=this.renderer.heading(Te);continue}case"code":{ne+=this.renderer.code(Te);continue}case"table":{ne+=this.renderer.table(Te);continue}case"blockquote":{ne+=this.renderer.blockquote(Te);continue}case"list":{ne+=this.renderer.list(Te);continue}case"html":{ne+=this.renderer.html(Te);continue}case"paragraph":{ne+=this.renderer.paragraph(Te);continue}case"text":{let ze=Te,ht=this.renderer.text(ze);for(;pe+1<Q.length&&Q[pe+1].type==="text";)ze=Q[++pe],ht+=`
`+this.renderer.text(ze);J?ne+=this.renderer.paragraph({type:"paragraph",raw:ht,text:ht,tokens:[{type:"text",raw:ht,text:ht}]}):ne+=ht;continue}default:{const ze='Token with "'+Te.type+'" type was not found.';if(this.options.silent)return console.error(ze),"";throw new Error(ze)}}}return ne}parseInline(Q,J){J=J||this.renderer;let ne="";for(let pe=0;pe<Q.length;pe++){const ve=Q[pe];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]){const ze=this.options.extensions.renderers[ve.type].call({parser:this},ve);if(ze!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ve.type)){ne+=ze||"";continue}}const Te=ve;switch(Te.type){case"escape":{ne+=J.text(Te);break}case"html":{ne+=J.html(Te);break}case"link":{ne+=J.link(Te);break}case"image":{ne+=J.image(Te);break}case"strong":{ne+=J.strong(Te);break}case"em":{ne+=J.em(Te);break}case"codespan":{ne+=J.codespan(Te);break}case"br":{ne+=J.br(Te);break}case"del":{ne+=J.del(Te);break}case"text":{ne+=J.text(Te);break}default:{const ze='Token with "'+Te.type+'" type was not found.';if(this.options.silent)return console.error(ze),"";throw new Error(ze)}}}return ne}}class nt{constructor(Q){Cs(this,"options");this.options=Q||e.defaults}preprocess(Q){return Q}postprocess(Q){return Q}processAllTokens(Q){return Q}}Cs(nt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class ft{constructor(...Q){Cs(this,"defaults",t());Cs(this,"options",this.setOptions);Cs(this,"parse",this.parseMarkdown(Oe.lex,ut.parse));Cs(this,"parseInline",this.parseMarkdown(Oe.lexInline,ut.parseInline));Cs(this,"Parser",ut);Cs(this,"Renderer",lt);Cs(this,"TextRenderer",xt);Cs(this,"Lexer",Oe);Cs(this,"Tokenizer",C);Cs(this,"Hooks",nt);this.use(...Q)}walkTokens(Q,J){var pe,ve;let ne=[];for(const Te of Q)switch(ne=ne.concat(J.call(this,Te)),Te.type){case"table":{const ze=Te;for(const ht of ze.header)ne=ne.concat(this.walkTokens(ht.tokens,J));for(const ht of ze.rows)for(const ct of ht)ne=ne.concat(this.walkTokens(ct.tokens,J));break}case"list":{const ze=Te;ne=ne.concat(this.walkTokens(ze.items,J));break}default:{const ze=Te;(ve=(pe=this.defaults.extensions)==null?void 0:pe.childTokens)!=null&&ve[ze.type]?this.defaults.extensions.childTokens[ze.type].forEach(ht=>{const ct=ze[ht].flat(1/0);ne=ne.concat(this.walkTokens(ct,J))}):ze.tokens&&(ne=ne.concat(this.walkTokens(ze.tokens,J)))}}return ne}use(...Q){const J=this.defaults.extensions||{renderers:{},childTokens:{}};return Q.forEach(ne=>{const pe={...ne};if(pe.async=this.defaults.async||pe.async||!1,ne.extensions&&(ne.extensions.forEach(ve=>{if(!ve.name)throw new Error("extension name required");if("renderer"in ve){const Te=J.renderers[ve.name];Te?J.renderers[ve.name]=function(...ze){let ht=ve.renderer.apply(this,ze);return ht===!1&&(ht=Te.apply(this,ze)),ht}:J.renderers[ve.name]=ve.renderer}if("tokenizer"in ve){if(!ve.level||ve.level!=="block"&&ve.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const Te=J[ve.level];Te?Te.unshift(ve.tokenizer):J[ve.level]=[ve.tokenizer],ve.start&&(ve.level==="block"?J.startBlock?J.startBlock.push(ve.start):J.startBlock=[ve.start]:ve.level==="inline"&&(J.startInline?J.startInline.push(ve.start):J.startInline=[ve.start]))}"childTokens"in ve&&ve.childTokens&&(J.childTokens[ve.name]=ve.childTokens)}),pe.extensions=J),ne.renderer){const ve=this.defaults.renderer||new lt(this.defaults);for(const Te in ne.renderer){if(!(Te in ve))throw new Error(`renderer '${Te}' does not exist`);if(["options","parser"].includes(Te))continue;const ze=Te,ht=ne.renderer[ze],ct=ve[ze];ve[ze]=(...zt)=>{let sn=ht.apply(ve,zt);return sn===!1&&(sn=ct.apply(ve,zt)),sn||""}}pe.renderer=ve}if(ne.tokenizer){const ve=this.defaults.tokenizer||new C(this.defaults);for(const Te in ne.tokenizer){if(!(Te in ve))throw new Error(`tokenizer '${Te}' does not exist`);if(["options","rules","lexer"].includes(Te))continue;const ze=Te,ht=ne.tokenizer[ze],ct=ve[ze];ve[ze]=(...zt)=>{let sn=ht.apply(ve,zt);return sn===!1&&(sn=ct.apply(ve,zt)),sn}}pe.tokenizer=ve}if(ne.hooks){const ve=this.defaults.hooks||new nt;for(const Te in ne.hooks){if(!(Te in ve))throw new Error(`hook '${Te}' does not exist`);if(Te==="options")continue;const ze=Te,ht=ne.hooks[ze],ct=ve[ze];nt.passThroughHooks.has(Te)?ve[ze]=zt=>{if(this.defaults.async)return Promise.resolve(ht.call(ve,zt)).then(Hn=>ct.call(ve,Hn));const sn=ht.call(ve,zt);return ct.call(ve,sn)}:ve[ze]=(...zt)=>{let sn=ht.apply(ve,zt);return sn===!1&&(sn=ct.apply(ve,zt)),sn}}pe.hooks=ve}if(ne.walkTokens){const ve=this.defaults.walkTokens,Te=ne.walkTokens;pe.walkTokens=function(ze){let ht=[];return ht.push(Te.call(this,ze)),ve&&(ht=ht.concat(ve.call(this,ze))),ht}}this.defaults={...this.defaults,...pe}}),this}setOptions(Q){return this.defaults={...this.defaults,...Q},this}lexer(Q,J){return Oe.lex(Q,J??this.defaults)}parser(Q,J){return ut.parse(Q,J??this.defaults)}parseMarkdown(Q,J){return(pe,ve)=>{const Te={...ve},ze={...this.defaults,...Te},ht=this.onError(!!ze.silent,!!ze.async);if(this.defaults.async===!0&&Te.async===!1)return ht(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof pe>"u"||pe===null)return ht(new Error("marked(): input parameter is undefined or null"));if(typeof pe!="string")return ht(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(pe)+", string expected"));if(ze.hooks&&(ze.hooks.options=ze),ze.async)return Promise.resolve(ze.hooks?ze.hooks.preprocess(pe):pe).then(ct=>Q(ct,ze)).then(ct=>ze.hooks?ze.hooks.processAllTokens(ct):ct).then(ct=>ze.walkTokens?Promise.all(this.walkTokens(ct,ze.walkTokens)).then(()=>ct):ct).then(ct=>J(ct,ze)).then(ct=>ze.hooks?ze.hooks.postprocess(ct):ct).catch(ht);try{ze.hooks&&(pe=ze.hooks.preprocess(pe));let ct=Q(pe,ze);ze.hooks&&(ct=ze.hooks.processAllTokens(ct)),ze.walkTokens&&this.walkTokens(ct,ze.walkTokens);let zt=J(ct,ze);return ze.hooks&&(zt=ze.hooks.postprocess(zt)),zt}catch(ct){return ht(ct)}}}onError(Q,J){return ne=>{if(ne.message+=`
Please report this to https://github.com/markedjs/marked.`,Q){const pe="<p>An error occurred:</p><pre>"+u(ne.message+"",!0)+"</pre>";return J?Promise.resolve(pe):pe}if(J)return Promise.reject(ne);throw ne}}}const At=new ft;function kt(St,Q){return At.parse(St,Q)}kt.options=kt.setOptions=function(St){return At.setOptions(St),kt.defaults=At.defaults,n(kt.defaults),kt},kt.getDefaults=t,kt.defaults=e.defaults,kt.use=function(...St){return At.use(...St),kt.defaults=At.defaults,n(kt.defaults),kt},kt.walkTokens=function(St,Q){return At.walkTokens(St,Q)},kt.parseInline=At.parseInline,kt.Parser=ut,kt.parser=ut.parse,kt.Renderer=lt,kt.TextRenderer=xt,kt.Lexer=Oe,kt.lexer=Oe.lex,kt.Tokenizer=C,kt.Hooks=nt,kt.parse=kt;const he=kt.options,at=kt.setOptions,Ue=kt.use,gt=kt.walkTokens,Ct=kt.parseInline,cn=kt,wn=ut.parse,qn=Oe.lex;e.Hooks=nt,e.Lexer=Oe,e.Marked=ft,e.Parser=ut,e.Renderer=lt,e.TextRenderer=xt,e.Tokenizer=C,e.getDefaults=t,e.lexer=qn,e.marked=kt,e.options=he,e.parse=cn,e.parseInline=Ct,e.parser=wn,e.setOptions=at,e.use=Ue,e.walkTokens=gt})})();fo.Hooks||exports.Hooks;fo.Lexer||exports.Lexer;fo.Marked||exports.Marked;fo.Parser||exports.Parser;var N_e=fo.Renderer||exports.Renderer;fo.TextRenderer||exports.TextRenderer;fo.Tokenizer||exports.Tokenizer;var Dqe=fo.defaults||exports.defaults;fo.getDefaults||exports.getDefaults;var k4=fo.lexer||exports.lexer;fo.marked||exports.marked;fo.options||exports.options;var R_e=fo.parse||exports.parse;fo.parseInline||exports.parseInline;var Aqe=fo.parser||exports.parser;fo.setOptions||exports.setOptions;fo.use||exports.use;fo.walkTokens||exports.walkTokens;function Iqe(i){return JSON.stringify(i,Nqe)}function QU(i){let e=JSON.parse(i);return e=JU(e),e}function Nqe(i,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function JU(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return fn.revive(i);case 2:return new RegExp(i.source,i.flags);case 17:return new Date(i.source)}if(i instanceof uK||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=JU(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=JU(i[t],e+1))}return i}const w8=Object.freeze({image:({href:i,title:e,text:t})=>{let n=[],s=[];return i&&({href:i,dimensions:n}=Mqe(i),s.push(`src="${CD(i)}"`)),t&&s.push(`alt="${CD(t)}"`),e&&s.push(`title="${CD(e)}"`),n.length&&(s=s.concat(n)),"<img "+s.join(" ")+">"},paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>`},link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof i!="string"?"":(i===n&&(n=b8(n)),e=typeof e=="string"?CD(b8(e)):"",i=b8(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}" draggable="false">${n}</a>`)}});function RK(i,e={},t={}){const n=new Tt;let s=!1;const r=kK(e),o=function(p){let _;try{_=QU(decodeURIComponent(p))}catch{}return _?(_=Yge(_,m=>{if(i.uris&&i.uris[m])return fn.revive(i.uris[m])}),encodeURIComponent(JSON.stringify(_))):p},a=function(p,_){const m=i.uris&&i.uris[p];let v=fn.revive(m);return _?p.startsWith(hn.data+":")?p:(v||(v=fn.parse(p)),s4.uriToBrowserUri(v).toString(!0)):!v||fn.parse(p).toString()===v.toString()?p:(v.query&&(v=v.with({query:o(v.query)})),v.toString())},l=new N_e;l.image=w8.image,l.link=w8.link,l.paragraph=w8.paragraph;const c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:p,lang:_})=>{const m=Oie.nextId(),v=e.codeBlockRendererSync(Fie(_),p);return u.push([m,v]),`<div class="code" data-code="${m}">${UE(p)}</div>`}:e.codeBlockRenderer&&(l.code=({text:p,lang:_})=>{const m=Oie.nextId(),v=e.codeBlockRenderer(Fie(_),p);return c.push(v.then(y=>[m,y])),`<div class="code" data-code="${m}">${UE(p)}</div>`}),e.actionHandler){const p=function(v){let y=v.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let C=y.dataset.href;C&&(i.baseUri&&(C=C8(fn.from(i.baseUri),C)),e.actionHandler.callback(C,v))}catch(C){di(C)}finally{v.preventDefault()}},_=e.actionHandler.disposables.add(new pn(r,"click")),m=e.actionHandler.disposables.add(new pn(r,"auxclick"));e.actionHandler.disposables.add(Qe.any(_.event,m.event)(v=>{const y=new dh(Nt(r),v);!y.leftButton&&!y.middleButton||p(y)})),e.actionHandler.disposables.add(Ne(r,"keydown",v=>{const y=new xi(v);!y.equals(10)&&!y.equals(3)||p(y)}))}i.supportHtml||(l.html=({text:p})=>{var m;return(m=e.sanitizerOptions)!=null&&m.replaceWithPlaintext?UE(p):(i.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:""}),t.renderer=l;let h=i.value??"";h.length>1e5&&(h=`${h.substr(0,1e5)}…`),i.supportThemeIcons&&(h=yqe(h));let d;if(e.fillInIncompleteTokens){const p={...Dqe,...t},_=k4(h,p),m=jqe(_);d=Aqe(m,p)}else d=R_e(h,{...t,async:!1});i.supportThemeIcons&&(d=V0(d).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const g=new DOMParser().parseFromString(eV({isTrusted:i.isTrusted,...e.sanitizerOptions},d),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(p=>{const _=p.getAttribute("src");if(_){let m=_;try{i.baseUri&&(m=C8(fn.from(i.baseUri),m))}catch{}if(p.setAttribute("src",a(m,!0)),e.remoteImageIsAllowed){const v=fn.parse(m);v.scheme!==hn.file&&v.scheme!==hn.data&&!e.remoteImageIsAllowed(v)&&p.replaceWith(Ht("",void 0,p.outerHTML))}}}),g.body.querySelectorAll("a").forEach(p=>{const _=p.getAttribute("href");if(p.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))p.replaceWith(...p.childNodes);else{let m=a(_,!1);i.baseUri&&(m=C8(fn.from(i.baseUri),_)),p.dataset.href=m}}),r.innerHTML=eV({isTrusted:i.isTrusted,...e.sanitizerOptions},g.body.innerHTML),c.length>0)Promise.all(c).then(p=>{var v;if(s)return;const _=new Map(p),m=r.querySelectorAll("div[data-code]");for(const y of m){const C=_.get(y.dataset.code??"");C&&Ko(y,C)}(v=e.asyncRenderCallback)==null||v.call(e)});else if(u.length>0){const p=new Map(u),_=r.querySelectorAll("div[data-code]");for(const m of _){const v=p.get(m.dataset.code??"");v&&Ko(m,v)}}if(e.asyncRenderCallback)for(const p of r.getElementsByTagName("img")){const _=n.add(Ne(p,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{s=!0,n.dispose()}}}function Fie(i){if(!i)return"";const e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}function C8(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?Nie(i,e).toString():Nie(xqe(i),e).toString()}const Rqe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function eV(i,e){const{config:t,allowedSchemes:n}=Oqe(i),s=new Tt;s.add(Bie("uponSanitizeAttribute",(r,o)=>{var a;if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),s.add(Bie("uponSanitizeElement",(r,o)=>{var a;if(o.tagName==="input"&&(((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?r.setAttribute("disabled",""):i.replaceWithPlaintext||r.remove()),i.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let l,c;if(o.tagName==="#comment")l=`<!--${r.textContent}-->`;else{const f=Rqe.includes(o.tagName),g=r.attributes.length?" "+Array.from(r.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";l=`<${o.tagName}${g}>`,f||(c=`</${o.tagName}>`)}const u=document.createDocumentFragment(),h=r.parentElement.ownerDocument.createTextNode(l);u.appendChild(h);const d=c?r.parentElement.ownerDocument.createTextNode(c):void 0;for(;r.firstChild;)u.appendChild(r.firstChild);d&&u.appendChild(d),r.parentElement.replaceChild(u,r)}})),s.add(uWe(n));try{return Vpe(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const Pqe=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function Oqe(i){const e=[hn.http,hn.https,hn.mailto,hn.data,hn.file,hn.vscodeFileResource,hn.vscodeRemote,hn.vscodeRemoteResource];return i.isTrusted&&e.push(hn.command),{config:{ALLOWED_TAGS:i.allowedTags??[...hWe],ALLOWED_ATTR:Pqe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function Fqe(i){return typeof i=="string"?i:Bqe(i)}function Bqe(i,e){let t=i.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=R_e(t,{async:!1,renderer:Vqe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>zqe.get(s)??s);return eV({isTrusted:!1},n).toString()}const zqe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function Uqe(){const i=new N_e;return i.code=({text:e})=>e,i.blockquote=({text:e})=>e+`
`,i.html=e=>"",i.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.hr=()=>"",i.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},i.listitem=({text:e})=>e+`
`,i.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},i.tablerow=({text:e})=>e,i.tablecell=function({tokens:e}){return this.parser.parseInline(e)},i.strong=({text:e})=>e,i.em=({text:e})=>e,i.codespan=({text:e})=>e,i.br=e=>`
`,i.del=({text:e})=>e,i.image=e=>"",i.text=({text:e})=>e,i.link=({text:e})=>e,i}const Vqe=new xm(i=>Uqe());function AR(i){let e="";return i.forEach(t=>{e+=t.raw}),e}function P_e(i){var e,t;if(i.tokens)for(let n=i.tokens.length-1;n>=0;n--){const s=i.tokens[n];if(s.type==="text"){const r=s.raw.split(`
`),o=r[r.length-1];if(o.includes("`"))return qqe(i);if(o.includes("**"))return eXe(i);if(o.match(/\*\w/))return Xqe(i);if(o.match(/(^|\s)__\w/))return tXe(i);if(o.match(/(^|\s)_\w/))return Yqe(i);if(Wqe(o)||Hqe(o)&&i.tokens.slice(0,n).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=i.tokens.slice(n+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?Qqe(i):Zqe(i)}else if(o.match(/(^|\s)\[\w*/))return Jqe(i)}}}function Wqe(i){return!!i.match(/(^|\s)\[.*\]\(\w*/)}function Hqe(i){return!!i.match(/^[^\[]*\]\([^\)]*$/)}function $qe(i){var l;const e=i.items[i.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let n;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(n=P_e(t)),!n||n.type!=="paragraph")return;const s=AR(i.items.slice(0,-1)),r=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!r)return;const o=r+AR(e.tokens.slice(0,-1))+n.raw,a=k4(s+o)[0];if(a.type==="list")return a}const Gqe=3;function jqe(i){for(let e=0;e<Gqe;e++){const t=Kqe(i);if(t)i=t;else break}return i}function Kqe(i){let e,t;for(e=0;e<i.length;e++){const n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=nXe(i.slice(e));break}if(e===i.length-1&&n.type==="list"){const s=$qe(n);if(s){t=[s];break}}if(e===i.length-1&&n.type==="paragraph"){const s=P_e(n);if(s){t=[s];break}}}if(t){const n=[...i.slice(0,e),...t];return n.links=i.links,n}return null}function qqe(i){return Wm(i,"`")}function Xqe(i){return Wm(i,"*")}function Yqe(i){return Wm(i,"_")}function Zqe(i){return Wm(i,")")}function Qqe(i){return Wm(i,'")')}function Jqe(i){return Wm(i,"](https://microsoft.com)")}function eXe(i){return Wm(i,"**")}function tXe(i){return Wm(i,"__")}function Wm(i,e){const t=AR(Array.isArray(i)?i:[i]);return k4(t+e)[0]}function nXe(i){const e=AR(i),t=e.split(`
`);let n,s=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof n>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;s=!0}else return}if(typeof n=="number"&&n>0){const r=s?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(n)}`;return k4(a)}}function Bie(i,e){return Wpe(i,e),en(()=>Hpe(i))}const Vf=class Vf{static createEmpty(e,t){const n=Vf.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new Vf(s,e,t)}static createFromTextAndMetadata(e,t){let n=0,s="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(n+o.length,a),n+=o.length,s+=o;return new Vf(new Uint32Array(r),s,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof Vf?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=rh.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return rh.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return rh.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return rh.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return rh.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return rh.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Vf.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new PK(this,e,t,n)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new Vf(new Uint32Array(r),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}};Vf.defaultTokenMetadata=(32768|2<<24)>>>0;let Rr=Vf;class PK{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof PK?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),s>this._endOffset&&(r=r.substring(0,r.length-(s-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}const A2=new class{clone(){return this}equals(i){return this===i}};function O_e(i,e){return new zj([new _2(0,"",i)],e)}function OK(i,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(i<<0|0|0|32768|2<<24)>>>0,new n4(t,e===null?A2:e)}const zie={getInitialState:()=>A2,tokenizeEncoded:(i,e,t)=>OK(0,t)};async function iXe(i,e,t){if(!t)return Uie(e,i.languageIdCodec,zie);const n=await Es.getOrCreate(t);return Uie(e,i.languageIdCodec,n||zie)}function sXe(i,e,t,n,s,r,o){let a="<div>",l=n,c=0,u=!0;for(let h=0,d=e.getCount();h<d;h++){const f=e.getEndOffset(h);if(f<=n)continue;let g="";for(;l<f&&l<s;l++){const p=i.charCodeAt(l);switch(p){case 9:{let _=r-(l+c)%r;for(c+=_-1;_>0;)o&&u?(g+="&#160;",u=!1):(g+=" ",u=!0),_--;break}case 60:g+="&lt;",u=!1;break;case 62:g+="&gt;",u=!1;break;case 38:g+="&amp;",u=!1;break;case 0:g+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",u=!1;break;case 13:g+="&#8203",u=!1;break;case 32:o&&u?(g+="&#160;",u=!1):(g+=" ",u=!0);break;default:g+=String.fromCharCode(p),u=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function Uie(i,e,t){let n='<div class="monaco-tokenized-source">';const s=$C(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,r);Rr.convertToEndOffset(c.tokens,l.length);const h=new Rr(c.tokens,l,e).inflate();let d=0;for(let f=0,g=h.getCount();f<g;f++){const p=h.getClassName(f),_=h.getEndOffset(f);n+=`<span class="${p}">${UE(l.substring(d,_))}</span>`,d=_}r=c.endState}return n+="</div>",n}var rXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vie=function(i,e){return function(t,n){e(t,n,i)}},tV,ev;let nV=(ev=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new me,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new Tt,r=s.add(RK(e,{...this._getRenderOptions(e,s),...t},n));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,s)=>{var l,c;let r;n?r=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(r=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),r||(r=vu);const o=await iXe(this._languageService,s,r),a=document.createElement("span");if(a.innerHTML=((c=tV._ttpTokenizer)==null?void 0:c.createHTML(o))??o,this._options.editor){const u=this._options.editor.getOption(50);lo(a,u)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>F_e(this._openerService,n,e.isTrusted),disposables:t}}}},tV=ev,ev._ttpTokenizer=l1("tokenizeToString",{createHTML(e){return e}}),ev);nV=tV=rXe([Vie(1,yr),Vie(2,dk)],nV);async function F_e(i,e,t){try{return await i.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:oXe(t)})}catch(n){return di(n),!1}}function oXe(i){return i===!0?!0:i&&Array.isArray(i.enabledCommands)?i.enabledCommands:!1}const Rh=En("accessibilityService"),aXe=new Mt("accessibilityModeEnabled",!1),Wie=2e4;let r0,PI,iV,OI,sV;function lXe(i){r0=document.createElement("div"),r0.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),r0.appendChild(n),n};PI=e(),iV=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),r0.appendChild(n),n};OI=t(),sV=t(),i.appendChild(r0)}function I2(i){r0&&(PI.textContent!==i?(Ch(iV),NR(PI,i)):(Ch(PI),NR(iV,i)))}function IR(i){r0&&(OI.textContent!==i?(Ch(sV),NR(OI,i)):(Ch(OI),NR(sV,i)))}function NR(i,e){Ch(i),e.length>Wie&&(e=e.substr(0,Wie)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var cXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rx=function(i,e){return function(t,n){e(t,n,i)}};const qh=Ht;let rV=class extends Hg{get _targetWindow(){return Nt(this._target.targetElements[0])}get _targetDocumentElement(){return Nt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,n,s,r,o){var d,f,g,p,_,m,v;super(),this._keybindingService=t,this._configurationService=n,this._openerService=s,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new Tt,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new me),this._onRequestLayout=this._register(new me),this._linkHandler=e.linkHandler||(y=>F_e(this._openerService,y,lw(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new uXe(e.target),this._hoverPointer=(d=e.appearance)!=null&&d.showPointer?qh("div.workbench-hover-pointer"):void 0,this._hover=this._register(new HKe),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(g=e.appearance)!=null&&g.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(p=e.position)!=null&&p.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((_=e.position)==null?void 0:_.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,y=>y.stopPropagation()),this.onkeydown(this._hover.containerDomNode,y=>{y.equals(9)&&this.dispose()}),this._register(Ne(this._targetWindow,"blur",()=>this.dispose()));const a=qh("div.hover-row.markdown-hover"),l=qh("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Nr(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const y=e.content,C=this._instantiationService.createInstance(nV,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Wl.fontFamily}),{element:S}=C.render(y,{actionHandler:{callback:x=>this._linkHandler(x),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(S)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const y=qh("div.hover-row.status-bar"),C=qh("div.actions");e.actions.forEach(S=>{const x=this._keybindingService.lookupKeybinding(S.commandId),E=x?x.getLabel():null;TK.render(C,{label:S.label,commandId:S.commandId,run:L=>{S.run(L),this.dispose()},iconClass:S.iconClass},E)}),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}this._hoverContainer=qh("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((m=e.persistence)==null?void 0:m.hideOnHover)===void 0?c=typeof e.content=="string"||lw(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(v=e.appearance)!=null&&v.showHoverHint){const y=qh("div.hover-row.status-bar"),C=qh("div.info");C.textContent=k("hoverhint","Hold {0} key to mouse over",Tn?"Option":"Alt"),y.appendChild(C),this._hover.containerDomNode.appendChild(y)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const h=this._register(new Hie(u));if(this._register(h.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const y=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new Hie(y)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=h}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const n=iK(this._hoverContainer,qh("div")),s=Et(this._hoverContainer,qh("div"));n.tabIndex=0,s.tabIndex=0,this._register(Ne(s,"focus",r=>{e.focus(),r.preventDefault()})),this._register(Ne(n,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){const r=n;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const s=this.findLastFocusableChild(n);if(s)return s}}render(e){var s;e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&$Ke(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel());n&&IR(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const h=qpe(u),d=u.getBoundingClientRect();return{top:d.top*h,bottom:d.bottom*h,right:d.right*h,left:d.left*h}},t=this._target.targetElements.map(u=>e(u)),{top:n,right:s,bottom:r,left:o}=t[0],a=s-o,l=r-n,c={top:n,right:s,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:n+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const n=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-n}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-n}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const n=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-n):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const n=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==n&&(this._hover.contentsDomNode.style.paddingRight=n)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let n=Math.round(t/2)-3;const s=this._x+n;(s<e.left||s>e.right)&&(n=e.center.x-this._x-3),this._hoverPointer.style.left=`${n}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};rV=cXe([rx(1,eo),rx(2,hs),rx(3,dk),rx(4,oi),rx(5,Rh)],rV);class Hie extends Hg{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new me),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=Nt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(Nt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class uXe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var io;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s})(io||(io={}));function hXe(i){const e=i;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Kp;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(Kp||(Kp={}));function pb(i,e,t){const n=t.mode===Kp.ALIGN?t.offset:t.offset+t.size,s=t.mode===Kp.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}const Vb=class Vb extends Be{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Be.None,this.toDisposeOnSetContainer=Be.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ht(".context-view"),sne(this.view),this.setContainer(e,t),this._register(en(()=>this.setContainer(null,1)))}setContainer(e,t){var s;this.useFixedPosition=t!==1;const n=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(s=this.shadowRootHostElement)==null||s.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=Ht(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=dXe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ht("slot"))}else this.container.appendChild(this.view);const r=new Tt;Vb.BUBBLE_UP_EVENTS.forEach(o=>{r.add(vr(this.container,o,a=>{this.onDOMEvent(a,!1)}))}),Vb.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(vr(this.container,o,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){var t,n;this.isVisible()&&this.hide(),Ch(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Jpe(this.view),this.toDisposeOnClean=e.render(this.view)||Be.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)==null||n.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Sv&&Ape.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Nr(e)){const d=pc(e),f=qpe(e);t={top:d.top*f,left:d.left*f,width:d.width*f,height:d.height*f}}else hXe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=Jj(this.view),s=rU(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=cE();if(a===0){const d={offset:t.top-u.pageYOffset,size:t.height,position:r===0?0:1},f={offset:t.left,size:t.width,position:o===0?0:1,mode:Kp.ALIGN};l=pb(u.innerHeight,s,d)+u.pageYOffset,io.intersects({start:l,end:l+s},{start:d.offset,end:d.offset+d.size})&&(f.mode=Kp.AVOID),c=pb(u.innerWidth,n,f)}else{const d={offset:t.left,size:t.width,position:o===0?0:1},f={offset:t.top,size:t.height,position:r===0?0:1,mode:Kp.ALIGN};c=pb(u.innerWidth,n,d),io.intersects({start:c,end:c+n},{start:d.offset,end:d.offset+d.size})&&(f.mode=Kp.AVOID),l=pb(u.innerHeight,s,f)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=pc(this.container);this.view.style.top=`${l-(this.useFixedPosition?pc(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?pc(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),sne(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,Nt(e).document.activeElement):t&&!mr(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Vb.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Vb.BUBBLE_DOWN_EVENTS=["click"];let oV=Vb;const dXe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var fXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gXe=function(i,e){return function(t,n){e(t,n,i)}};let RR=class extends Be{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new oV(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,n){let s;t?t===this.layoutService.getContainer(Nt(t))?s=1:n?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};RR=fXe([gXe(0,Vm)],RR);class pXe extends RR{getContextViewElement(){return this.contextView.getViewElement()}}class mXe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}async update(e,t,n){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Vl(e)||Nr(e))s=e;else if(!YN(e.markdown))s=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(k("iconLabel.loading","Loading..."),t,n),this._cancellationTokenSource=new HC;const r=this._cancellationTokenSource.token;if(s=await e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)}show(e,t,n){var r;const s=this._hoverWidget;if(this.hasContent(e)){const o={content:e,target:this.target,actions:n==null?void 0:n.actions,linkHandler:n==null?void 0:n.linkHandler,trapFocus:n==null?void 0:n.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:(r=n==null?void 0:n.appearance)==null?void 0:r.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(o,t)}s==null||s.dispose()}hasContent(e){return e?lw(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var _Xe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ox=function(i,e){return function(t,n){e(t,n,i)}};let aV=class extends Be{constructor(e,t,n,s,r){super(),this._instantiationService=e,this._keybindingService=n,this._layoutService=s,this._accessibilityService=r,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new RR(this._layoutService))}showHover(e,t,n){var l,c,u,h;if($ie(this._currentHoverOptions)===$ie(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const s=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=Po();n||(s&&r?r.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=r):this._lastFocusedElementBeforeOpen=void 0);const o=new Tt,a=this._instantiationService.createInstance(rV,e);if((u=e.persistence)!=null&&u.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,g;((f=this._currentHover)==null?void 0:f.domNode)&&Ype(this._currentHover.domNode)&&((g=this._lastFocusedElementBeforeOpen)==null||g.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const d=Nr(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(Nt(d))}if(this._contextViewHandler.showContextView(new vXe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),(h=e.persistence)!=null&&h.sticky)o.add(Ne(Nt(e.container).document,it.MOUSE_DOWN,d=>{mr(d.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)o.add(Ne(f,it.CLICK,()=>this.hideHover()));else o.add(Ne(e.target,it.CLICK,()=>this.hideHover()));const d=Po();if(d){const f=Nt(d).document;o.add(Ne(d,it.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(Ne(f,it.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(Ne(d,it.KEY_UP,g=>this._keyUp(g,a))),o.add(Ne(f,it.KEY_UP,g=>this._keyUp(g,a)))}}if("IntersectionObserver"in ui){const d=new IntersectionObserver(g=>this._intersectionChange(g,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;d.observe(f),o.add(en(()=>d.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,n){var o,a;if(e.key==="Alt"){t.isLocked=!0;return}const s=new xi(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(s,s.target).kind!==0||n&&(!((o=this._currentHoverOptions)!=null&&o.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var n;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(n=this._lastFocusedElementBeforeOpen)==null||n.focus()))}setupManagedHover(e,t,n,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(y,C)=>{var x;const S=o!==void 0;y&&(o==null||o.dispose(),o=void 0),C&&(r==null||r.dispose(),r=void 0),S&&((x=e.onDidHideHover)==null||x.call(e),o=void 0)},l=(y,C,S,x)=>new n1(async()=>{(!o||o.isDisposed)&&(o=new mXe(e,S||t,y>0),await o.update(typeof n=="function"?n():n,C,{...s,trapFocus:x}))},y);let c=!1;const u=Ne(t,it.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),h=Ne(t,it.MOUSE_UP,()=>{c=!1},!0),d=Ne(t,it.MOUSE_LEAVE,y=>{c=!1,a(!1,y.fromElement===t)},!0),f=y=>{if(r)return;const C=new Tt,S={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const x=E=>{S.x=E.x+10,Nr(E.target)&&Gie(E.target,t)!==t&&a(!0,!0)};C.add(Ne(t,it.MOUSE_MOVE,x,!0))}r=C,!(Nr(y.target)&&Gie(y.target,t)!==t)&&C.add(l(e.delay,!1,S))},g=Ne(t,it.MOUSE_OVER,f,!0),p=()=>{if(c||r)return;const y={targetElements:[t],dispose:()=>{}},C=new Tt,S=()=>a(!0,!0);C.add(Ne(t,it.BLUR,S,!0)),C.add(l(e.delay,!1,y)),r=C};let _;const m=t.tagName.toLowerCase();m!=="input"&&m!=="textarea"&&(_=Ne(t,it.FOCUS,p,!0));const v={show:y=>{a(!1,!0),l(0,y,void 0,y)},hide:()=>{a(!0,!0)},update:async(y,C)=>{n=y,await(o==null?void 0:o.update(n,void 0,C))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),d.dispose(),u.dispose(),h.dispose(),_==null||_.dispose(),a(!0,!0)}};return this._managedHovers.set(t,v),v}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};aV=_Xe([ox(0,oi),ox(1,Wg),ox(2,eo),ox(3,Vm),ox(4,Rh)],aV);function $ie(i){if(i!==void 0)return(i==null?void 0:i.id)??i}class vXe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function Gie(i,e){for(e=e??Nt(i).document.body;!i.hasAttribute("custom-hover")&&i!==e;)i=i.parentElement;return i}Pn(uk,aV,1);Vg((i,e)=>{const t=i.getColor(ije);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const yXe=En("IWorkspaceEditService");class FK{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(W0.is(t))return W0.lift(t);if(cw.is(t))return cw.lift(t);throw new Error("Unsupported edit")})}}class W0 extends FK{static is(e){return e instanceof W0?!0:wa(e)&&fn.isUri(e.resource)&&wa(e.textEdit)}static lift(e){return e instanceof W0?e:new W0(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class cw extends FK{static is(e){return e instanceof cw?!0:wa(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof cw?e:new cw(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const Wr={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},bXe=Object.freeze({id:"editor",order:5,type:"object",title:k("editorConfigurationTitle","Editor"),scope:5}),PR={...bXe,properties:{"editor.tabSize":{type:"number",default:oo.tabSize,minimum:1,markdownDescription:k("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:k("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:oo.insertSpaces,markdownDescription:k("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:oo.detectIndentation,markdownDescription:k("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:oo.trimAutoWhitespace,description:k("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:oo.largeFileOptimizations,description:k("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[k("wordBasedSuggestions.off","Turn off Word Based Suggestions."),k("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),k("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),k("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:k("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[k("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),k("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),k("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:k("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:k("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:k("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:k("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:k("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:k("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:k("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:k("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:k("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:k("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:k("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:k("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:k("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Wr.maxComputationTime,description:k("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Wr.maxFileSize,description:k("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Wr.renderSideBySide,description:k("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Wr.renderSideBySideInlineBreakpoint,description:k("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Wr.useInlineViewWhenSpaceIsLimited,description:k("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Wr.renderMarginRevertIcon,description:k("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Wr.renderGutterMenu,description:k("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Wr.ignoreTrimWhitespace,description:k("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Wr.renderIndicators,description:k("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Wr.diffCodeLens,description:k("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Wr.diffWordWrap,markdownEnumDescriptions:[k("wordWrap.off","Lines will never wrap."),k("wordWrap.on","Lines will wrap at the viewport width."),k("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Wr.diffAlgorithm,markdownEnumDescriptions:[k("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),k("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Wr.hideUnchangedRegions.enabled,markdownDescription:k("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Wr.hideUnchangedRegions.revealLineCount,markdownDescription:k("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Wr.hideUnchangedRegions.minimumLineCount,markdownDescription:k("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Wr.hideUnchangedRegions.contextLineCount,markdownDescription:k("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Wr.experimental.showMoves,markdownDescription:k("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Wr.experimental.showEmptyDecorations,description:k("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Wr.experimental.useTrueInlineView,description:k("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function wXe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of ob){const e=i.schema;if(typeof e<"u")if(wXe(e))PR.properties[`editor.${i.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(PR.properties[t]=e[t])}let SD=null;function B_e(){return SD===null&&(SD=Object.create(null),Object.keys(PR.properties).forEach(i=>{SD[i]=!0})),SD}function CXe(i){return B_e()[`editor.${i}`]||!1}function SXe(i){return B_e()[`diffEditor.${i}`]||!1}const xXe=Or.as(c1.Configuration);xXe.registerConfiguration(PR);class EXe{static insert(e,t){return{range:new de(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function xD(i){return Object.isFrozen(i)?i:U9e(i)}class Ar{static createEmptyModel(e){return new Ar({},[],[],void 0,e)}constructor(e,t,n,s,r){this._contents=e,this._keys=t,this._overrides=n,this.raw=s,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(n=>{if(n instanceof Ar)return n;const s=new LXe("",this.logService);return s.parseRaw(n),s.configurationModel});this._rawConfiguration=t.reduce((n,s)=>s===n?s:n.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?yne(this.contents,e):this.contents}inspect(e,t){const n=this;return{get value(){return xD(n.rawConfiguration.getValue(e))},get override(){return t?xD(n.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return xD(t?n.rawConfiguration.override(t).getValue(e):n.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:r,identifiers:o,keys:a}of n.rawConfiguration.overrides){const l=new Ar(r,a,[],void 0,n.logService).getValue(e);l!==void 0&&s.push({identifiers:o,value:l})}return s.length?xD(s):void 0}}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?yne(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var o,a;const t=Tp(this.contents),n=Tp(this.overrides),s=[...this.keys],r=(o=this.raw)!=null&&o.length?[...this.raw]:[this];for(const l of e)if(r.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[u]=n.filter(h=>tr(h.identifiers,c.identifiers));u?(this.mergeContents(u.contents,c.contents),u.keys.push(...c.keys),u.keys=Cv(u.keys)):n.push(Tp(c))}for(const c of l.keys)s.indexOf(c)===-1&&s.push(c)}return new Ar(t,s,n,r.every(l=>l instanceof Ar)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const s of Cv([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s];const o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Tp(r),this.mergeContents(r,o)):r=o),n[s]=r}return new Ar(n,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&wa(e[n])&&wa(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Tp(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const s=r=>{r&&(n?this.mergeContents(n,r):n=Tp(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&s(r.contents);return s(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),LHe(this.contents,e),Lm.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>tr(n.identifiers,dR(e))),1))}updateValue(e,t,n){if(mme(this.contents,e,t,s=>this.logService.error(s)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),Lm.test(e)){const s=dR(e),r={identifiers:s,keys:Object.keys(this.contents[e]),contents:pU(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>tr(a.identifiers,s));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class LXe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Ar.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:n,keys:s,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Ar(n,s,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const n=Or.as(c1.Configuration).getConfigurationProperties(),s=this.filter(e,n,!0,t);e=s.raw;const r=pU(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,n,s){var l,c,u;let r=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!((l=s==null?void 0:s.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:r};const o={},a=[];for(const h in e)if(Lm.test(h)&&n){const d=this.filter(e[h],t,!1,s);o[h]=d.raw,r=r||d.hasExcludedProperties,a.push(...d.restricted)}else{const d=t[h],f=d?typeof d.scope<"u"?d.scope:3:void 0;d!=null&&d.restricted&&a.push(h),!((c=s.exclude)!=null&&c.includes(h))&&((u=s.include)!=null&&u.includes(h)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&(d!=null&&d.restricted)))?o[h]=e[h]:r=!0}return{raw:o,restricted:a,hasExcludedProperties:r}}toOverrides(e,t){const n=[];for(const s of Object.keys(e))if(Lm.test(s)){const r={};for(const o in e[s])r[o]=e[s][o];n.push({identifiers:dR(s),keys:Object.keys(r),contents:pU(r,t)})}return n}}class TXe{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=s,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=h,this.folderConfigurationModel=d,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class M4{constructor(e,t,n,s,r,o,a,l,c,u){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=s,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Hl,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=Ar.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const s=this.getConsolidatedConfigurationModel(e,t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new TXe(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let s=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}static parse(e,t){const n=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,u)=>(c.set(fn.revive(u[0]),this.parseConfigurationModel(u[1],t)),c),new Hl);return new M4(n,s,r,o,Ar.createEmptyModel(t),a,l,Ar.createEmptyModel(t),new Hl,t)}static parseConfigurationModel(e,t){return new Ar(e.contents,e.keys,e.overrides,void 0,t)}}class kXe{constructor(e,t,n,s,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=M4.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const n=this._marker+e,s=this._affectsConfigStr.indexOf(n);if(s<0)return!1;const r=s+n.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!il(l,c)}return!0}}class MXe{constructor(){this._onDidChange=new me,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const KE=new MXe,OR={kind:0},DXe={kind:1};function AXe(i,e,t){return{kind:2,commandId:i,commandArgs:e,isBubble:t}}class qE{constructor(e,t,n){var s;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const r of e){const o=r.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=qE.handleRemovals([].concat(e).concat(t));for(let r=0,o=this._keybindings.length;r<o;r++){const a=this._keybindings[r];if(a.chords.length===0)continue;const l=(s=a.when)==null?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(n&&n.type!==1&&(!e.when||!OWe(n,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!o.command||o.command.length===0){n.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){n.push(o);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(o,c.chords,u)){l=!0;break}}if(!l){n.push(o);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&qE.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:hU(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const r=n[s];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){const s=[...t,n];this._log(`| Resolving ${s}`);const r=this._map.get(s[0]);if(r===void 0)return this._log("\\ No keybinding entries."),OR;let o=null;if(s.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const u=r[l];if(s.length>u.chords.length)continue;let h=!0;for(let d=1;d<s.length;d++)if(u.chords[d]!==s[d]){h=!1;break}h&&o.push(u)}}const a=this._findCommand(e,o);return a?s.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${jie(a.when)}, source: ${Kie(a)}.`),DXe):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${jie(a.when)}, source: ${Kie(a)}.`),AXe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),OR)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const s=t[n];if(qE._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function jie(i){return i?`${i.serialize()}`:"no when condition"}function Kie(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}const IXe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class NXe extends Be{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Qe.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new me),this._currentChords=[],this._currentChordChecker=new qj,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=mb.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new n1,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),OR;const[s]=n.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),OR;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw Rj("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(k("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(k("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),KE.enabled&&KE.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],KE.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=mb.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=mb.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getChords();return this._ignoreSingleModifiers=new mb(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(n){const[u]=e.getSingleModifierDispatchChords();r=u,o=u?[u]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:u})=>u);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(k("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(k("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}IXe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const TO=class TO{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};TO.EMPTY=new TO(null);let mb=TO;class qie{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?lV(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=lV(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function lV(i){const e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return[];e.push(s)}return e}class D4{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=FXe(a,l,this.modifierLabels[e])}return s.join(" ")}}const BK=new D4({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:k({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:k({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:k({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:k({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:k({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:k({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:k({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:k({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),RXe=new D4({ctrlKey:k({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:k({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:k({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:k({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:k({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:k({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:k({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:k({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:k({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:k({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:k({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:k({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),PXe=new D4({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),OXe=new D4({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function FXe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class BXe extends sVe{constructor(e,t){if(super(),t.length===0)throw t4("chords");this._os=e,this._chords=t}getLabel(){return BK.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return RXe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:PXe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return OXe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new iVe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class N2 extends BXe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return qf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":qf.toString(e.keyCode)}_getElectronAccelerator(e){return qf.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=qf.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return N2.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=qf.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=Bj[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Ev)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Ev(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=lV(e.chords.map(s=>this._toKeyCodeChord(s)));return n.length>0?[new N2(n,t)]:[]}}const zXe=En("labelService"),UXe=En("progressService"),rZ=class rZ{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};rZ.None=Object.freeze({report(){}});let Xie=rZ;const zK=En("editorProgressService");class VXe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class WXe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Uj(e,this._value,0,e.length,this._from,this._to):JT(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class HXe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Uj(e,this._value,0,e.length,this._from,this._to):JT(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class $Xe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new HXe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Wte(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Wte(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Gz(e,this._value.query);if(this._states[this._stateIdx]===5)return Gz(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class ED{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class XE{static forUris(e=()=>!1,t=()=>!1){return new XE(new $Xe(e,t))}static forStrings(){return new XE(new VXe)}static forConfigKeys(){return new XE(new WXe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new ED,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new ED,s.left.segment=n.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new ED,s.right.segment=n.value()),r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new ED,s.mid.segment=n.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=r[a][0],h=r[a+1][0];if(u===1&&h===1)r[a][1]=l.rotateLeft();else if(u===-1&&h===-1)r[a][1]=l.rotateRight();else if(u===1&&h===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(u===-1&&h===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),s=[];let r=this._root;for(;r;){const o=n.cmp(r.segment);if(o>0)s.push([-1,r]),r=r.left;else if(o<0)s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=this._min(r.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),r.key=a,r.value=l,r.segment=c}}else{const o=r.left??r.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let s=this._root;for(;s;){const r=n.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const GXe=En("contextService");class jXe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const KXe="code-workspace";k("codeWorkspace","Code Workspace");const qXe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var Yie;(function(i){i.inspectTokensAction=k("inspectTokens","Developer: Inspect Tokens")})(Yie||(Yie={}));var Zie;(function(i){i.gotoLineActionLabel=k("gotoLineActionLabel","Go to Line/Column...")})(Zie||(Zie={}));var Qie;(function(i){i.helpQuickAccessActionLabel=k("helpQuickAccess","Show all Quick Access Providers")})(Qie||(Qie={}));var Jie;(function(i){i.quickCommandActionLabel=k("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=k("quickCommandActionHelp","Show And Run Commands")})(Jie||(Jie={}));var ese;(function(i){i.quickOutlineActionLabel=k("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=k("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(ese||(ese={}));var cV;(function(i){i.editorViewAccessibleLabel=k("editorViewAccessibleLabel","Editor content")})(cV||(cV={}));var tse;(function(i){i.toggleHighContrast=k("toggleHighContrast","Toggle High Contrast Theme")})(tse||(tse={}));var uV;(function(i){i.bulkEditServiceSummary=k("bulkEditServiceSummary","Made {0} edits in {1} files")})(uV||(uV={}));const XXe=En("workspaceTrustManagementService");let sC=[],UK=[],z_e=[];function LD(i,e=!1){YXe(i,!1,e)}function YXe(i,e,t){const n=ZXe(i,e);sC.push(n),n.userConfigured?z_e.push(n):UK.push(n),t&&!n.userConfigured&&sC.forEach(s=>{s.mime===n.mime||s.userConfigured||(n.extension&&s.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&s.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&s.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&s.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function ZXe(i,e){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:e,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?Kme(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(vs.sep)>=0:!1}}function QXe(){sC=sC.filter(i=>i.userConfigured),UK=[]}function JXe(i,e){return eYe(i,e).map(t=>t.id)}function eYe(i,e){let t;if(i)switch(i.scheme){case hn.file:t=i.fsPath;break;case hn.data:{t=DR.parseMetaData(i).get(DR.META_DATA_LABEL);break}case hn.vscodeNotebookCell:t=void 0;break;default:t=i.path}if(!t)return[{id:"unknown",mime:Zf.unknown}];t=t.toLowerCase();const n=mpe(t),s=nse(t,n,z_e);if(s)return[s,{id:vu,mime:Zf.text}];const r=nse(t,n,UK);if(r)return[r,{id:vu,mime:Zf.text}];if(e){const o=tYe(e);if(o)return[o,{id:vu,mime:Zf.text}]}return[{id:"unknown",mime:Zf.unknown}]}function nse(i,e,t){var o;let n,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?i:e;(o=l.filepatternLowercase)!=null&&o.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(n)return n;if(s)return s;if(r)return r}function tYe(i){if(Kj(i)&&(i=i.substr(1)),i.length>0)for(let e=sC.length-1;e>=0;e--){const t=sC[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t}}const TD=Object.prototype.hasOwnProperty,ise="vs.editor.nullLanguage";class nYe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(ise,0),this._register(vu,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||ise}}const PL=class PL extends Be{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,PL.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new nYe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Xw.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){PL.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},QXe();const e=[].concat(Xw.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),Or.as(c1.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;TD.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)LD({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)LD({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)LD({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);GUe(l)||LD({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?TD.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return TD.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&TD.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:JXe(e,t)}};PL.instanceCount=0;let hV=PL;const Eu=(i,e)=>i===e;function iYe(i=Eu){return(e,t)=>tr(e,t,i)}function sse(i,e,t){{const n=i;return(s,r)=>s==null||r===void 0||r===null?r===s:n(s,r)}}class Qo{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return sYe(e,this)}}const rse=new Map,dV=new WeakMap;function sYe(i,e){const t=dV.get(i);if(t)return t;const n=rYe(i,e);if(n){let s=rse.get(n)??0;s++,rse.set(n,s);const r=s===1?n:`${n}#${s}`;return dV.set(i,r),r}}function rYe(i,e){const t=dV.get(i);if(t)return t;const n=e.owner?aYe(e.owner)+".":"";let s;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(s=r(),s!==void 0)return n+s}else return n+r;const o=e.referenceFn;if(o!==void 0&&(s=VK(o),s!==void 0))return n+s;if(e.owner!==void 0){const a=oYe(e.owner,i);if(a!==void 0)return n+a}}function oYe(i,e){for(const t in i)if(i[t]===e)return t}const ose=new Map,ase=new WeakMap;function aYe(i){const e=ase.get(i);if(e)return e;const t=lYe(i);let n=ose.get(t)??0;n++,ose.set(t,n);const s=n===1?t:`${t}#${n}`;return ase.set(i,s),s}function lYe(i){const e=i.constructor;return e?e.name:"Object"}function VK(i){const e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=n?n[1]:void 0;return s==null?void 0:s.trim()}let cYe;function U_e(){return cYe}let V_e;function uYe(i){V_e=i}let W_e;function hYe(i){W_e=i}let fV;function dYe(i){fV=i}class H_e{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,s=t===void 0?e:t;return fV({owner:n,debugName:()=>{const r=VK(s);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}flatten(){return fV({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(V_e(this,t)),this}keepObserved(e){return e.add(W_e(this)),this}}class KC extends H_e{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Xs(i,e){const t=new fk(i,e);try{i(t)}finally{t.finish()}}let kD;function gE(i){if(kD)i(kD);else{const e=new fk(i,void 0);kD=e;try{i(e)}finally{e.finish(),kD=void 0}}}function WK(i,e,t){i?e(i):Xs(e,t)}class fk{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():VK(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:n,observable:s}=e[t];n.endUpdate(s)}this.updatingObservers=null}}function Dn(i,e){let t;return typeof i=="string"?t=new Qo(void 0,i,void 0):t=new Qo(i,void 0,void 0),new HK(t,e,Eu)}class HK extends KC{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}get(){return this._value}set(e,t,n){var r;if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new fk(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(r=U_e())==null||r.handleObservableChanged(this,{oldValue:o,newValue:e,change:n,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function $_e(i,e){let t;return typeof i=="string"?t=new Qo(void 0,i,void 0):t=new Qo(i,void 0,void 0),new fYe(t,e,Eu)}class fYe extends HK{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function Qt(i,e){return e!==void 0?new rC(new Qo(i,void 0,e),e,void 0,void 0,void 0,Eu):new rC(new Qo(void 0,void 0,i),i,void 0,void 0,void 0,Eu)}function $K(i,e,t){return new gYe(new Qo(i,void 0,e),e,void 0,void 0,void 0,Eu,t)}function A4(i,e){return new rC(new Qo(i.owner,i.debugName,i.debugReferenceFn),e,void 0,void 0,i.onLastObserverRemoved,i.equalsFn??Eu)}dYe(A4);function qC(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);const s=new Tt;return new rC(new Qo(n,void 0,t),r=>(s.clear(),t(r,s)),void 0,void 0,()=>s.dispose(),Eu)}function od(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);let s;return new rC(new Qo(n,void 0,t),r=>{s?s.clear():s=new Tt;const o=t(r);return o&&s.add(o),o},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},Eu)}class rC extends KC{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,s,r=void 0,o){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=s,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var o;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,n=this.value;this.state=3;const s=this.changeSummary;this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this);try{this.value=this._computeFn(this,s)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(n,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}kv(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary):!0,s=this.state===3;if(n&&(this.state===1||s)&&(this.state=2,s))for(const r of this.observers)r.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class gYe extends rC{constructor(e,t,n,s,r=void 0,o,a){super(e,t,n,s,r,o),this.set=a}}function Vn(i){return new R4(new Qo(void 0,void 0,i),i,void 0,void 0)}function I4(i,e){return new R4(new Qo(i.owner,i.debugName,i.debugReferenceFn??e),e,void 0,void 0)}function N4(i,e){return new R4(new Qo(i.owner,i.debugName,i.debugReferenceFn??e),e,i.createEmptyChangeSummary,i.handleChange)}function vh(i){const e=new Tt,t=I4({owner:void 0,debugName:void 0,debugReferenceFn:i},n=>{e.clear(),i(n,e)});return en(()=>{t.dispose(),e.dispose()})}class R4{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,s){var r;this._debugNameData=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var n,s;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(n=U_e())==null||n.handleAutorunTriggered(this);const r=this.changeSummary;this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runFn(this,r)}}finally{for(const r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,kv(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(i){i.Observer=R4})(Vn||(Vn={}));function FR(i){return new pYe(i)}class pYe extends H_e{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function ls(...i){let e,t,n;return i.length===3?[e,t,n]=i:[t,n]=i,new _b(new Qo(e,void 0,n),t,n,()=>_b.globalTransaction,Eu)}class _b extends KC{constructor(e,t,n,s,r){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=s,this._equalityComparator=r,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&WK(this._getTransaction(),u=>{for(const h of this.observers)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(i){i.Observer=_b;function e(t,n){let s=!1;_b.globalTransaction===void 0&&(_b.globalTransaction=t,s=!0);try{n()}finally{s&&(_b.globalTransaction=void 0)}}i.batchEventsGlobally=e})(ls||(ls={}));function hc(i,e){return new mYe(i,e)}class mYe extends KC{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Xs(n=>{for(const s of this.observers)n.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function GK(i){return typeof i=="string"?new lse(i):new lse(void 0,i)}class lse extends KC{get debugName(){return new Qo(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Xs(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function _Ye(i){const e=new G_e(!1,void 0);return i.addObserver(e),en(()=>{i.removeObserver(e)})}hYe(_Ye);function P4(i,e){const t=new G_e(!0,e);return i.addObserver(t),e?e(i.get()):i.reportChanges(),en(()=>{i.removeObserver(t)})}uYe(P4);class G_e{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function vYe(i,e){let t;return A4({owner:i,debugReferenceFn:e},s=>(t=e(s,t),t))}function yYe(i,e){return vYe(i,(t,n)=>n??e(t))}function bYe(i,e,t,n){return e||(e=s=>s!=null),new Promise((s,r)=>{let o=!0,a=!1;const l=i.map(u=>({isFinished:e(u),error:!1,state:u})),c=Vn(u=>{const{isFinished:h,error:d,state:f}=l.read(u);(h||d)&&(o?a=!0:c.dispose(),d?r(d===!0?f:d):s(f))});o=!1,a&&c.dispose()})}class wYe extends KC{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new fk(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this.observers)r.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function gV(i,e){return i.lazy?new wYe(new Qo(i.owner,i.debugName,void 0),e,i.equalsFn??Eu):new HK(new Qo(i.owner,i.debugName,void 0),e,i.equalsFn??Eu)}const OL=class OL extends Be{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new me),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new me),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new me({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,OL.instanceCount++,this._registry=this._register(new hV(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){OL.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return Tj(n,null)}createById(e){return new cse(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new cse(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=vu),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Es.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};OL.instanceCount=0;let pV=OL;class cse{constructor(e,t){this._value=ls(this,e,()=>t()),this.onDidChange=Qe.fromObservable(this._value)}get languageId(){return this._value.get()}}const j_e={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Zf.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},CYe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let O4=CYe;const SYe=new xm(()=>O4("mouse",!1)),xYe=new xm(()=>O4("element",!1));function EYe(i){O4=i}function Ac(i){return i==="element"?xYe.value:SYe.value}function jK(){return O4("element",!0)}let K_e={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function LYe(i){K_e=i}function Zd(){return K_e}class TYe{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}class __ extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function use(i,e){const t=[];for(const n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=io.intersect(i,n.range);io.isEmpty(s)||t.push({range:s,size:n.size})}return t}function mV({start:i,end:e},t){return{start:i+t,end:e+t}}function kYe(i){const e=[];let t=null;for(const n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function MYe(...i){return kYe(i.reduce((e,t)=>e.concat(t),[]))}class DYe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const s=n.length-t,r=use({start:0,end:e},this.groups),o=use({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:mV(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=MYe(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return this._paddingTop+t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}class AYe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=Ht(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var $g=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const v_={CurrentDragAndDropData:void 0},Xh={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class gk{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class IYe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class NYe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function RYe(i,e){return Array.isArray(i)&&Array.isArray(e)?tr(i,e):i===e}class PYe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const kO=class kO{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:YB(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,s=Xh){var o,a;if(this.virtualDelegate=t,this.domId=`list_id_${++kO.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new tk(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Be.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Be.None,this.onDragLeaveTimeout=Be.None,this.disposables=new Tt,this._onDidChangeContentHeight=new me,this._onDidChangeContentWidth=new me,this.onDidChangeContentHeight=Qe.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const l of n)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new AYe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??Xh.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new PYe(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??Xh.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Zo.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new jC({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>al(Nt(this.domNode),l)})),this.scrollableElement=this.disposables.add(new L4(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??Xh.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??Xh.verticalScrollMode,useShadows:s.useShadows??Xh.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Ne(this.rowsContainer,vi.Change,l=>this.onTouchChange(l))),this.disposables.add(Ne(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(Ne(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(Ne(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(Ne(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(Ne(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=s.setRowLineHeight??Xh.setRowLineHeight,this.setRowHeight=s.setRowHeight??Xh.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??Xh.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(Xh.dnd),this.layout((o=s.initialSize)==null?void 0:o.height,(a=s.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new DYe(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=io.intersect(s,r),a=new Map;for(let S=o.end-1;S>=o.start;S--){const x=this.items[S];if(x.dragStartDisposable.dispose(),x.checkedDisposable.dispose(),x.row){let E=a.get(x.templateId);E||(E=[],a.set(x.templateId,E));const L=this.renderers.get(x.templateId);L&&L.disposeElement&&L.disposeElement(x.element,S,x.row.templateData,x.size),E.unshift(x.row)}x.row=null,x.stale=!0}const l={start:e+t,end:this.items.length},c=io.intersect(l,s),u=io.relativeComplement(l,s),h=n.map(S=>({id:String(this.itemId++),element:S,templateId:this.virtualDelegate.getTemplateId(S),size:this.virtualDelegate.getHeight(S),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(S),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Be.None,checkedDisposable:Be.None,stale:!1}));let d;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,h),d=this.items,this.items=h):(this.rangeMap.splice(e,t,h),d=this.items.splice(e,t,...h));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=mV(c,f),_=io.intersect(g,p);for(let S=_.start;S<_.end;S++)this.updateItemInDOM(this.items[S],S);const m=io.relativeComplement(p,g);for(const S of m)for(let x=S.start;x<S.end;x++)this.removeItemFromDOM(x);const v=u.map(S=>mV(S,f)),C=[{start:e,end:e+n.length},...v].map(S=>io.intersect(g,S)).reverse();for(const S of C)for(let x=S.end-1;x>=S.start;x--){const E=this.items[x],L=a.get(E.templateId),T=L==null?void 0:L.pop();this.insertItemInDOM(x,T)}for(const S of a.values())for(const x of S)this.cache.release(x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(S=>S.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=al(Nt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:ZVe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:YB(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=io.relativeComplement(a,e).reverse(),c=io.relativeComplement(e,a);if(o){const u=io.intersect(e,a);for(let h=u.start;h<u.end;h++)this.updateItemInDOM(this.items[h],h)}this.cache.transact(()=>{for(const u of c)for(let h=u.start;h<u.end;h++)this.removeItemFromDOM(h);for(const u of l)for(let h=u.end-1;h>=u.start;h--)this.insertItemInDOM(h)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){var l,c;const n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{const u=this.cache.alloc(n.templateId);n.row=u.row,n.stale||(n.stale=u.isReusingConnectedDomNode)}const s=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",s);const r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const u=h=>n.row.domNode.setAttribute("aria-checked",String(!!h));u(r.value),n.checkedDisposable=r.onDidChange(()=>u(r.value))}if(n.stale||!n.row.domNode.parentElement){const u=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==u)&&this.rowsContainer.insertBefore(n.row.domNode,u),n.stale=!1}this.updateItemInDOM(n,e);const o=this.renderers.get(n.templateId);if(!o)throw new Error(`No renderer found for template id ${n.templateId}`);o==null||o.renderElement(n.element,e,n.row.templateData,n.size);const a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=Ne(n.row.domNode,"dragstart",u=>this.onDragStart(n.element,a,u))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=YB(e.row.domNode);const t=Nt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Qe.map(this.disposables.add(new pn(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Qe.map(this.disposables.add(new pn(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Qe.filter(Qe.map(this.disposables.add(new pn(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Qe.map(this.disposables.add(new pn(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Qe.map(this.disposables.add(new pn(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Qe.map(this.disposables.add(new pn(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Qe.any(Qe.map(this.disposables.add(new pn(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Qe.map(this.disposables.add(new pn(this.domNode,vi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Qe.map(this.disposables.add(new pn(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Qe.map(this.disposables.add(new pn(this.rowsContainer,vi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var r,o;if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(j_e.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,n)),typeof a>"u"&&(a=String(s.length));const l=Ht(".monaco-drag-image");l.textContent=a,(h=>{for(;h&&!h.classList.contains("monaco-workbench");)h=h.parentElement;return h||this.domNode.ownerDocument})(this.domNode).appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new gk(s),v_.CurrentDragAndDropData=new IYe(s),(o=(r=this.dnd).onDragStart)==null||o.call(r,this.currentDragData,n)}onDragOver(e){var r,o;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),v_.CurrentDragAndDropData&&v_.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(v_.CurrentDragAndDropData)this.currentDragData=v_.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NYe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((r=t.effect)==null?void 0:r.type)===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Cv(n).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),n=n[0]===-1?[-1]:n;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(RYe(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=en(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(n.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,s="drop-target-before");for(const a of n){const l=this.items[a];l.dropTarget=!0,(o=l.row)==null||o.domNode.classList.add(s)}this.currentDragFeedbackDisposable=en(()=>{var a;for(const l of n){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Zz(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((n=(t=this.dnd).onDragLeave)==null||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,v_.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,v_.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Be.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=YVe(this.domNode).top;this.dragOverAnimationDisposable=cWe(Nt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Zz(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const n=e.offsetY/this.items[t].size,s=Math.floor(n/.25);return _a(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;(Nr(n)||iWe(n))&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const h=this.probeDynamicHeight(u);h!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=io.relativeComplement(s,l);for(const d of u)for(let f=d.start;f<d.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=io.relativeComplement(l,s).reverse();for(const d of h)for(let f=d.end-1;f>=d.start;f--)this.insertItemInDOM(f);for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof r=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+d;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var o,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const u=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-u}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!mr(t.row.domNode,Nt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new Qn("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,(o=r.disposeElement)==null||o.call(r,t.element,e,s.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,n;for(const s of this.items)if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){const r=this.renderers.get(s.row.templateId);r&&((e=r.disposeElement)==null||e.call(r,s.element,-1,s.row.templateData,void 0),r.disposeTemplate(s.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(n=this.dragOverAnimationDisposable)==null||n.dispose(),this.disposables.dispose()}};kO.InstanceCount=0;let Lu=kO;$g([ds],Lu.prototype,"onMouseClick",null);$g([ds],Lu.prototype,"onMouseDblClick",null);$g([ds],Lu.prototype,"onMouseMiddleClick",null);$g([ds],Lu.prototype,"onMouseDown",null);$g([ds],Lu.prototype,"onMouseOver",null);$g([ds],Lu.prototype,"onMouseOut",null);$g([ds],Lu.prototype,"onContextMenu",null);$g([ds],Lu.prototype,"onTouchStart",null);$g([ds],Lu.prototype,"onTap",null);var Hm=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class OYe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let BR=class{get name(){return this._trait}get renderer(){return new OYe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new me,this.onChange=this._onChange.event}splice(e,t,n){const s=n.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,n.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(dse),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=_V(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return M9e(this.sortedIndexes,e,dse)>=0}dispose(){Jr(this._onChange)}};Hm([ds],BR.prototype,"renderer",null);class FYe extends BR{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class S8{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const r=new Set(s),o=n.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function fm(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function pk(i,e){return i.classList.contains(e)?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:pk(i.parentElement,e)}function pE(i){return pk(i,"monaco-editor")}function BYe(i){return pk(i,"monaco-custom-toggle")}function zYe(i){return pk(i,"action-item")}function YE(i){return pk(i,"monaco-tree-sticky-row")}function R2(i){return i.classList.contains("monaco-tree-sticky-container")}function q_e(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:q_e(i.parentElement)}class X_e{get onKeyDown(){return Qe.chain(this.disposables.add(new pn(this.view.domNode,"keydown")).event,e=>e.filter(t=>!fm(t.target)).map(t=>new xi(t)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Tt,this.multipleSelectionDisposables=new Tt,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(Tn?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ma(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Hm([ds],X_e.prototype,"onKeyDown",null);var Sd;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(Sd||(Sd={}));var vb;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(vb||(vb={}));const UYe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=98&&i.keyCode<=107||i.keyCode>=85&&i.keyCode<=95}};class VYe{constructor(e,t,n,s,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=s,this.delegate=r,this.enabled=!1,this.state=vb.Idle,this.mode=Sd.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Tt,this.disposables=new Tt,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Sd.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Qe.chain(this.enabledDisposables.add(new pn(this.view.domNode,"keydown")).event,r=>r.filter(o=>!fm(o.target)).filter(()=>this.mode===Sd.Automatic||this.triggered).map(o=>new xi(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>bn.stop(o,!0)).map(o=>o.browserEvent.key)),n=Qe.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Qe.reduce(Qe.any(t,n),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const n=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof n=="string"?I2(n):n&&I2(n.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=vb.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===vb.Idle?1:0;this.state=vb.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(MR(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}const c=uqe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||MR(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class WYe{constructor(e,t){this.list=e,this.view=t,this.disposables=new Tt;const n=Qe.chain(this.disposables.add(new pn(t.domNode,"keydown")).event,r=>r.filter(o=>!fm(o.target)).map(o=>new xi(o)));Qe.chain(n,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!Nr(s)||s.tabIndex===-1)return;const r=Nt(s).getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function Y_e(i){return Tn?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function Z_e(i){return i.browserEvent.shiftKey}function HYe(i){return nK(i)&&i.button===2}const hse={isSelectionSingleChangeEvent:Y_e,isSelectionRangeChangeEvent:Z_e};class Q_e{constructor(e){this.list=e,this.disposables=new Tt,this._onPointer=new me,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hse),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Zo.addTarget(e.getHTMLElement()))),Qe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||hse))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){pE(e.browserEvent.target)||Po()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(fm(e.browserEvent.target)||pE(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||fm(e.browserEvent.target)||pE(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),HYe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(fm(e.browserEvent.target)||pE(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const s=Math.min(n,t),r=Math.max(n,t),o=ma(s,r+1),a=this.list.getSelection(),l=jYe(_V(a,[n]),n);if(l.length===0)return;const c=_V(o,KYe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class J_e{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=_g(e.listFocusAndSelectionOutline,_g(e.listSelectionOutline,e.listFocusOutline??""));s&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=_g(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const $Ye={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:$e.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:$e.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:$e.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},GYe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function jYe(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function _V(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function KYe(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const dse=(i,e)=>i-e;class qYe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){var o;let r=0;for(const a of this.renderers)(o=a.disposeElement)==null||o.call(a,e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class XYe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Tt}}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e),r=s&&typeof s!="string"?s:FR(s);n.disposables.add(Vn(a=>{this.setAriaLabel(a.readObservable(r),n.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.container.setAttribute("aria-level",`${o}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,s){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class YYe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,e,t)}onDragOver(e,t,n,s,r){return this.dnd.onDragOver(e,t,n,s,r)}onDragLeave(e,t,n,s){var r,o;(o=(r=this.dnd).onDragLeave)==null||o.call(r,e,t,n,s)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}drop(e,t,n,s,r){this.dnd.drop(e,t,n,s,r)}dispose(){this.dnd.dispose()}}class Ph{get onDidChangeFocus(){return Qe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Qe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Qe.chain(this.disposables.add(new pn(this.view.domNode,"keydown")).event,r=>r.map(o=>new xi(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>bn.stop(o,!0)).filter(()=>!1)),n=Qe.chain(this.disposables.add(new pn(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new xi(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>bn.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:o}})),s=Qe.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new dh(Nt(this.view.domNode),l),browserEvent:l})));return Qe.any(t,n,s)}get onKeyDown(){return this.disposables.add(new pn(this.view.domNode,"keydown")).event}get onDidFocus(){return Qe.signal(this.disposables.add(new pn(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Qe.signal(this.disposables.add(new pn(this.view.domNode,"blur",!0)).event)}constructor(e,t,n,s,r=GYe){var c,u,h;this.user=e,this._options=r,this.focus=new BR("focused"),this.anchor=new BR("anchor"),this.eventBufferer=new QT,this._ariaLabel="",this.disposables=new Tt,this._onDidDispose=new me,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new FYe(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new XYe(this.accessibilityProvider)),(h=(u=this.accessibilityProvider).onDidChangeActiveDescendant)==null||h.call(u,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(d=>new qYe(d.templateId,[...a,d]));const l={...r,dnd:r.dnd&&new YYe(this,r.dnd)};if(this.view=this.createListView(t,n,s,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const d=Lc(this.view.domNode);this.styleController=new J_e(d,this.view.domId)}if(this.spliceable=new TYe([new S8(this.focus,this.view,r.identityProvider),new S8(this.selection,this.view,r.identityProvider),new S8(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new WYe(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new X_e(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const d=r.keyboardNavigationDelegate||UYe;this.typeNavigationController=new VYe(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),d),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,s){return new Lu(e,t,n,s)}createMouseController(e){return new Q_e(this)}updateOptions(e={}){var t,n;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)==null||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new __(this.user,`Invalid start index: ${e}`);if(t<0)throw new __(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new __(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new __(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return Tj(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new __(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.getFocus()[0];if(s!==n&&(s===void 0||n>s)){const r=this.findPreviousIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;n>s&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await b2(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let s;const r=n(),o=this.view.getScrollTop()+r;o===0?s=this.view.indexAt(o):s=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await b2(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new __(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(UC(t)){const a=o-this.view.renderHeight+n;this.view.setScrollTop(a*_a(t,0,1)+r-n)}else{const a=r+o,l=s+this.view.renderHeight;r<s+n&&a>=l||(r<s+n||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new __(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(s<n+t||s+r>n+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((n+t-s)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let n;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Hm([ds],Ph.prototype,"onDidChangeFocus",null);Hm([ds],Ph.prototype,"onDidChangeSelection",null);Hm([ds],Ph.prototype,"onContextMenu",null);Hm([ds],Ph.prototype,"onKeyDown",null);Hm([ds],Ph.prototype,"onDidFocus",null);Hm([ds],Ph.prototype,"onDidBlur",null);const T0=Ht,e0e="selectOption.entry.template";class ZYe{get templateId(){return e0e}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Et(e,T0(".option-text")),t.detail=Et(e,T0(".option-detail")),t.decoratorRight=Et(e,T0(".option-decorator-right")),t}renderElement(e,t,n){const s=n,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=r,s.detail.textContent=o||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}const ud=class ud extends Be{constructor(e,t,n,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=ud.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new me,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Zd().setupManagedHover(Ac("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return e0e}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=Ht(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Et(this.selectDropDownContainer,T0(".select-box-details-pane"));const t=Et(this.selectDropDownContainer,T0(".select-box-dropdown-container-width-control")),n=Et(t,T0(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Et(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Lc(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(Ne(this.selectDropDownContainer,it.DRAG_START,s=>{bn.stop(s,!0)}))}registerListeners(){this._register(vr(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(Ne(this.selectElement,it.CLICK,t=>{bn.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(Ne(this.selectElement,it.MOUSE_DOWN,t=>{bn.stop(t)}));let e;this._register(Ne(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(Ne(this.selectElement,"touchend",t=>{bn.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(Ne(this.selectElement,it.KEY_DOWN,t=>{const n=new xi(t);let s=!1;Tn?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(s=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),bn.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){tr(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){const e=this.styles.selectBackground??"",t=_g(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Nt(this.selectElement),n=pc(this.selectElement),s=Nt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-ud.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let h=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const d=this._hasDetails?this._cachedMaxDetailsHeight:0,f=h+r+d,g=Math.floor((o-r-d)/this.getHeight()),p=Math.floor((a-r-d)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<ud.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1?!1:(g<ud.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<ud.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;f>o&&(h=g*this.getHeight())}else f>a&&(h=p*this.getHeight());return this.selectList.layout(h),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=h+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=h+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,s=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>s&&(n=o,s=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Jj(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Et(e,T0(".select-box-dropdown-list-container")),this.listRenderer=new ZYe,this.selectList=this._register(new Ph("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let r=s.text;return s.detail&&(r+=`. ${s.detail}`),s.decoratorRight&&(r+=`. ${s.decoratorRight}`),s.description&&(r+=`. ${s.description}`),r},getWidgetAriaLabel:()=>k({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Tn?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new pn(this.selectDropDownListContainer,"keydown")),n=Qe.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(r=>new xi(r)));this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Qe.chain(n,s=>s.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(Ne(this.selectList.getHTMLElement(),it.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(Ne(this.selectDropDownContainer,it.FOCUS_OUT,s=>{!this._isVisible||mr(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;bn.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const s=Number(n.getAttribute("data-index")),r=n.classList.contains("option-disabled");s>=0&&s<this.options.length&&!r&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},s=RK({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),n(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],n=(t==null?void 0:t.description)??"",s=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(n){if(s){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,r))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){bn.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){bn.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){bn.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(bn.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){bn.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){bn.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){bn.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){bn.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=qf.toString(e.keyCode);let n=-1;for(let s=0;s<this.options.length-1;s++)if(n=(s+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),bn.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};ud.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,ud.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,ud.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let vV=ud;class QYe extends Be{constructor(e,t,n,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new me),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Zo.addTarget(this.selectElement)),[vi.Tap].forEach(e=>{this._register(Ne(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(vr(this.selectElement,"click",e=>{bn.stop(e,!0)})),this._register(vr(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(vr(this.selectElement,"keydown",e=>{let t=!1;Tn?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!tr(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}}class JYe extends Hg{constructor(e,t,n,s,r){super(),Tn&&!(r!=null&&r.useCustomDrawn)?this.selectBoxDelegate=new QYe(e,t,s,r):this.selectBoxDelegate=new vV(e,t,n,s,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class oh extends Be{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof vg&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Tv)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Zo.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Su&&this._register(Ne(e,it.DRAG_START,s=>{var r;return(r=s.dataTransfer)==null?void 0:r.setData(j_e.TEXT,this._action.label)}))),this._register(Ne(t,vi.Tap,s=>this.onClick(s,!0))),this._register(Ne(t,it.MOUSE_DOWN,s=>{n||bn.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),Tn&&this._register(Ne(t,it.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(Ne(t,it.CLICK,s=>{bn.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(Ne(t,it.DBLCLICK,s=>{bn.stop(s,!0)})),[it.MOUSE_UP,it.MOUSE_OUT].forEach(s=>{this._register(Ne(t,s,r=>{bn.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var s;bn.stop(e,!0);const n=Al(this._context)?(s=this.options)!=null&&s.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const n=this.options.hoverDelegate??Ac("element");this.customHover=this._store.add(Zd().setupManagedHover(n,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class KK extends oh{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),cm(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Oo.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=k({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class eZe extends oh{constructor(e,t,n,s,r,o,a){super(e,t),this.selectBox=new JYe(n,s,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class tZe extends Tv{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new me),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Et(e,Ht(".monaco-dropdown")),this._label=Et(this._element,Ht(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[it.CLICK,it.MOUSE_DOWN,vi.Tap])this._register(Ne(this.element,r,o=>bn.stop(o,!0)));for(const r of[it.MOUSE_DOWN,vi.Tap])this._register(Ne(this._label,r,o=>{nK(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(Ne(this._label,it.KEY_UP,r=>{const o=new xi(r);(o.equals(3)||o.equals(10))&&(bn.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(Zo.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class nZe extends tZe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class zR extends oh{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new me),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=Et(r,Ht("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Zd().setupManagedHover(this.options.hoverDelegate??Ac("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new nZe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)==null||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,n;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(n=this.element)==null||n.classList.toggle("disabled",e)}}function iZe(i){return i?i.condition!==void 0:!1}var uw;(function(i){i[i.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",i[i.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(uw||(uw={}));var yb;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(yb||(yb={}));const MO=class MO extends Be{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new m2),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=yb.None,this.cache=new Map,this.flushDelayer=this._register(new Rpe(MO.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((s,r)=>this.acceptExternal(r,s)),(n=e.deleted)==null||n.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===yb.Closed)return;let n=!1;Al(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return Al(n)?t:n}getBoolean(e,t){const n=this.get(e);return Al(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Al(n)?t:parseInt(n,10)}async set(e,t,n=!1){if(this.state===yb.Closed)return;if(Al(t))return this.delete(e,n);const s=wa(t)||Array.isArray(t)?Iqe(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(!(this.state===yb.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===uw.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};MO.DEFAULT_FLUSH_DELAY=100;let ZE=MO;class x8{constructor(){this.onDidChangeItemsExternal=Qe.None,this.items=new Map}async updateItems(e){var t,n;(t=e.insert)==null||t.forEach((s,r)=>this.items.set(r,s)),(n=e.delete)==null||n.forEach(s=>this.items.delete(s))}}const FI="__$__targetStorageMarker",F4=En("storageService");var fse;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(fse||(fse={}));function sZe(i){const e=i.get(FI);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const DO=class DO extends Be{constructor(e={flushInterval:DO.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new m2),this._onDidChangeTarget=this._register(new m2),this._onWillSaveState=this._register(new me),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return Qe.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),n)}emitDidChangeValue(e,t){const{key:n,external:s}=t;if(n===FI){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:s})}get(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.get(e,n)}getBoolean(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.getBoolean(e,n)}getNumber(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.getNumber(e,n)}store(e,t,n,s,r=!1){if(Al(t)){this.remove(e,n,r);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,s),(o=this.getStorage(n))==null||o.set(e,t,r)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))==null||s.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n,s=!1){var o,a;const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,(o=this.getStorage(t))==null||o.set(FI,JSON.stringify(r),s)):typeof r[e]=="number"&&(delete r[e],(a=this.getStorage(t))==null||a.set(FI,JSON.stringify(r),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?sZe(t):Object.create(null)}};DO.DEFAULT_FLUSH_INTERVAL=60*1e3;let yV=DO;class rZe extends yV{constructor(){super(),this.applicationStorage=this._register(new ZE(new x8,{hint:uw.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new ZE(new x8,{hint:uw.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new ZE(new x8,{hint:uw.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function oZe(i,e){const t={...e};for(const n in i){const s=i[n];t[n]=s!==void 0?st(s):void 0}return t}const aZe={keybindingLabelBackground:st(Yje),keybindingLabelForeground:st(Zje),keybindingLabelBorder:st(Qje),keybindingLabelBottomBorder:st(Jje),keybindingLabelShadow:st(ck)},lZe={buttonForeground:st(d_e),buttonSeparator:st(Oje),buttonBackground:st(hE),buttonHoverBackground:st(Fje),buttonSecondaryForeground:st(zje),buttonSecondaryBackground:st($U),buttonSecondaryHoverBackground:st(Uje),buttonBorder:st(Bje)},cZe={progressBarBackground:st(JGe)},t0e={inputActiveOptionBorder:st(c_e),inputActiveOptionForeground:st(h_e),inputActiveOptionBackground:st(u_e)};st(dE),st(Vje),st(Wje),st(Hje),st($je),st(Gje),st(jje);st(Kje),st(Xje),st(qje);st(fu),st(S4),st(ck),st(Wn),st(fje),st(gje),st(pje),st(ZGe);const n0e={inputBackground:st(Cje),inputForeground:st(Sje),inputBorder:st(xje),inputValidationInfoBorder:st(kje),inputValidationInfoBackground:st(Lje),inputValidationInfoForeground:st(Tje),inputValidationWarningBorder:st(Aje),inputValidationWarningBackground:st(Mje),inputValidationWarningForeground:st(Dje),inputValidationErrorBorder:st(Rje),inputValidationErrorBackground:st(Ije),inputValidationErrorForeground:st(Nje)},uZe={listFilterWidgetBackground:st(hKe),listFilterWidgetOutline:st(dKe),listFilterWidgetNoMatchesOutline:st(fKe),listFilterWidgetShadow:st(gKe),inputBoxStyles:n0e,toggleStyles:t0e},hZe={badgeBackground:st(NI),badgeForeground:st(QGe),badgeBorder:st(Wn)};st(hje),st(uje),st(bie),st(bie),st(dje);const XC={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:st(eKe),listFocusForeground:st(tKe),listFocusOutline:st(nKe),listActiveSelectionBackground:st(Av),listActiveSelectionForeground:st(k2),listActiveSelectionIconForeground:st(f_e),listFocusAndSelectionOutline:st(iKe),listFocusAndSelectionBackground:st(Av),listFocusAndSelectionForeground:st(k2),listInactiveSelectionBackground:st(sKe),listInactiveSelectionIconForeground:st(oKe),listInactiveSelectionForeground:st(rKe),listInactiveFocusBackground:st(aKe),listInactiveFocusOutline:st(lKe),listHoverBackground:st(g_e),listHoverForeground:st(p_e),listDropOverBackground:st(cKe),listDropBetweenBackground:st(uKe),listSelectionOutline:st(bs),listHoverOutline:st(bs),treeIndentGuidesStroke:st(m_e),treeInactiveIndentGuidesStroke:st(pKe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:st(bK),tableColumnsBorder:st(mKe),tableOddRowsBackgroundColor:st(_Ke)};function mk(i){return oZe(i,XC)}const dZe={selectBackground:st(x4),selectListBackground:st(Pje),selectForeground:st(SK),decoratorRightForeground:st(__e),selectBorder:st(xK),focusBorder:st(Ud),listFocusBackground:st(jU),listInactiveSelectionIconForeground:st(v_e),listFocusForeground:st(GU),listFocusOutline:GGe(bs,$e.transparent.toString()),listHoverBackground:st(g_e),listHoverForeground:st(p_e),listHoverOutline:st(bs),selectListBorder:st(i_e),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},fZe={shadowColor:st(ck),borderColor:st(vKe),foregroundColor:st(yKe),backgroundColor:st(bKe),selectionForegroundColor:st(wKe),selectionBackgroundColor:st(CKe),selectionBorderColor:st(SKe),separatorColor:st(xKe),scrollbarShadow:st(bK),scrollbarSliderBackground:st(e_e),scrollbarSliderHoverBackground:st(t_e),scrollbarSliderActiveBackground:st(n_e)};var B4=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ba=function(i,e){return function(t,n){e(t,n,i)}};function gZe(i,e,t,n){let s,r,o;if(Array.isArray(i))o=i,s=e,r=t;else{const c=e;o=i.getActions(c),s=t,r=n}const a=$p.getInstance(),l=a.keyStatus.altKey||(rl||ka)&&a.keyStatus.shiftKey;i0e(o,s,l,r?c=>c===r:c=>c==="navigation")}function pZe(i,e,t,n,s,r){let o,a,l,c,u;if(Array.isArray(i))u=i,o=e,a=t,l=n,c=s;else{const d=e;u=i.getActions(d),o=t,a=n,l=s,c=r}i0e(u,o,!1,typeof a=="string"?d=>d===a:a,l,c)}function i0e(i,e,t,n=o=>o==="navigation",s=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of i){let h;n(c)?(h=o,h.length>0&&r&&h.push(new Oo)):(h=a,h.length>0&&h.push(new Oo));for(let d of u){t&&(d=d instanceof yg&&d.alt?d.alt:d);const f=h.push(d);d instanceof l4&&l.add({group:c,action:d,index:f-1})}}for(const{group:c,action:u,index:h}of l){const d=n(c)?o:a,f=u.actions;s(u,c,d.length)&&d.splice(h,1,...f)}}let P2=class extends KK{constructor(e,t,n,s,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Ig),this._altKey=$p.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{var r;const s=!!((r=this._menuItemAction.alt)!=null&&r.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(Ne(e,"mouseleave",s=>{t=!1,n()})),this._register(Ne(e,"mouseenter",s=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var r;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?k("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&((r=this._menuItemAction.alt)!=null&&r.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?k("titleAndKb","{0} ({1})",o,l):o;s=k("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,BK.modifierLabels[du].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const s=this._commandAction.checked&&iZe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(An.isThemeIcon(s)){const r=An.asClassNameArray(s);n.classList.add(...r),this._itemClassDispose.value=en(()=>{n.classList.remove(...r)})}else n.style.backgroundImage=w4(this._themeService.getColorTheme().type)?Pg(s.dark):Pg(s.light),n.classList.add("icon"),this._itemClassDispose.value=Id(en(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};P2=B4([ba(2,eo),ba(3,Nh),ba(4,Jn),ba(5,Au),ba(6,Wg),ba(7,Rh)],P2);let bV=class extends zR{constructor(e,t,n,s,r){const o={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(An.isThemeIcon(e.item.icon)?An.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>n.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,o),this._keybindingService=n,this._contextMenuService=s,this._themeService=r}render(e){super.render(e),cm(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!An.isThemeIcon(n)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=w4(this._themeService.getColorTheme().type)?Pg(n.dark):Pg(n.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};bV=B4([ba(2,eo),ba(3,Wg),ba(4,Au)],bV);let wV=class extends oh{constructor(e,t,n,s,r,o,a,l){super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const u=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;u&&(c=e.actions.find(d=>u===d.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(P2,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const h={keybindingProvider:d=>this._keybindingService.lookupKeybinding(d.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new Tv};this._dropdown=new zR(e,e.actions,this._contextMenuService,h),this._register(this._dropdown.actionRunner.onDidRun(d=>{d.action instanceof yg&&this.update(d.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(P2,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Tv{async runAction(n,s){await n.run(void 0)}},this._container&&this._defaultAction.render(iK(this._container,Ht(".action-container")))}_getDefaultActionKeybindingLabel(e){var n;let t;if((n=this._options)!=null&&n.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(t=`(${s.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Ht(".action-container");this._defaultAction.render(Et(this._container,t)),this._register(Ne(t,it.KEY_DOWN,s=>{const r=new xi(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=Ht(".dropdown-action-container");this._dropdown.render(Et(this._container,n)),this._register(Ne(n,it.KEY_DOWN,s=>{var o;const r=new xi(s);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)==null||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};wV=B4([ba(2,eo),ba(3,Nh),ba(4,Wg),ba(5,o1),ba(6,oi),ba(7,F4)],wV);let CV=class extends eZe{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===Oo.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,dZe,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=st(xK)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};CV=B4([ba(1,hk)],CV);function mZe(i,e,t){return e instanceof yg?i.createInstance(P2,e,t):e instanceof GE?e.item.isSelection?i.createInstance(CV,e):e.item.rememberDefaultAction?i.createInstance(wV,e,{...t,persistLastActionId:!0}):i.createInstance(bV,e,t):void 0}class wg extends Be{constructor(e,t={}){var r,o;super(),this._actionRunnerDisposables=this._register(new Tt),this.viewItemDisposables=this._register(new Pj),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new me),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new me({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new me),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new me),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((r=this.options.triggerKeys)==null?void 0:r.keyDown)??!1,keys:((o=this.options.triggerKeys)==null?void 0:o.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(jK()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Tv,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,s;switch(this._orientation){case 0:n=[15],s=[17];break;case 1:n=[16],s=[18],this.domNode.className+=" vertical";break}this._register(Ne(this.domNode,it.KEY_DOWN,a=>{const l=new xi(a);let c=!0;const u=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(l.equals(n[0])||l.equals(n[1]))?c=this.focusPrevious():s&&(l.equals(s[0])||l.equals(s[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&u instanceof oh&&u.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(Ne(this.domNode,it.KEY_UP,a=>{const l=new xi(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(w2(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Po()===this.domNode||!mr(Po(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof oh&&n.isEnabled());t instanceof oh&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof oh&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){var e,t;for(let n=0;n<this.actionsList.children.length;n++){const s=this.actionsList.children[n];if(mr(Po(),s)){this.focusedItem=n,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Nr(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=UC(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new KK(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,Ne(o,it.CONTEXT_MENU,c=>{bn.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof oh&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Jr(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Ch(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const n=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===Oo.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Oo.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r,o;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])==null||r.blur());const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let a=!0;YN(s.focus)||(a=!1),this.options.focusOnlyEnabledItems&&YN(s.isEnabled)&&!s.isEnabled()&&(a=!1),s.action.id===Oo.ID&&(a=!1),a?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((o=s.showHover)==null||o.call(s))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof oh){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Jr(this.viewItems),this.getContainer().remove(),super.dispose()}}const SV=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,E8=/(&amp;)?(&amp;)([^\s&])/g;var UR;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(UR||(UR={}));var xV;(function(i){i[i.Above=0]="Above",i[i.Below=1]="Below"})(xV||(xV={}));class hw extends wg{constructor(e,t,n,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Tn||ka?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Zo.addTarget(r)),this._register(Ne(r,it.KEY_DOWN,c=>{new xi(c).equals(2)&&c.preventDefault()})),n.enableMnemonics&&this._register(Ne(r,it.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){bn.stop(c,!0);const h=this.mnemonics.get(u);if(h.length===1&&(h[0]instanceof gse&&h[0].container&&this.focusItemByElement(h[0].container),h[0].onClick(c)),h.length>1){const d=h.shift();d&&d.container&&(this.focusItemByElement(d.container),h.push(d)),this.mnemonics.set(u,h)}}})),ka&&this._register(Ne(r,it.KEY_DOWN,c=>{const u=new xi(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),bn.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),bn.stop(c,!0))})),this._register(Ne(this.domNode,it.MOUSE_OUT,c=>{const u=c.relatedTarget;mr(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(Ne(this.actionsList,it.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!mr(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(u),h!==this.focusedItem&&this.updateFocus()}}})),this._register(Zo.addTarget(this.actionsList)),this._register(Ne(this.actionsList,vi.Tap,c=>{let u=c.initialTarget;if(!(!u||!mr(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(u),h!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new LK(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(Ne(r,vi.Change,c=>{bn.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(Ne(a,it.MOUSE_UP,c=>{c.preventDefault()}));const l=Nt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>{var h;return(h=n.submenuIds)!=null&&h.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Oo&&(u===t.length-1||u===0||t[u-1]instanceof Oo))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof pse)).forEach((c,u,h)=>{c.updatePositionInSet(u+1,h.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(lR(e)?this.styleSheet=Lc(e):(hw.globalStyleSheet||(hw.globalStyleSheet=Lc()),this.styleSheet=hw.globalStyleSheet)),this.styleSheet.textContent=vZe(t,lR(e))}styleScrollElement(e,t){const n=t.foregroundColor??"",s=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=n,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Oo)return new pse(t.context,e,{icon:!0},this.menuStyles);if(e instanceof l4){const s=new gse(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new s0e(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class s0e extends oh{constructor(e,t,n,s){if(n.isMenu=!0,super(t,t,n),this.menuStyle=s,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const r=this.action.label;if(r){const o=SV.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Ro(()=>{this.element&&(this._register(Ne(this.element,it.MOUSE_UP,r=>{if(bn.stop(r,!0),Su){if(new dh(Nt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(Ne(this.element,it.CONTEXT_MENU,r=>{bn.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Et(this.element,Ht("a.action-menu-item")),this._action.id===Oo.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Et(this.item,Ht("span.menu-item-check"+An.asCSSSelector(yt.menuSelection))),this.check.setAttribute("role","none"),this.label=Et(this.item,Ht("span.action-label")),this.options.label&&this.options.keybinding&&(Et(this.item,Ht("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Ch(this.label);let t=D_e(this.action.label);if(t){const n=_Ze(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const s=SV.exec(t);if(s){t=UE(t),E8.lastIndex=0;let r=E8.exec(t);for(;r&&r[1];)r=E8.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(i4(o(t.substr(0,r.index))," "),Ht("u",{"aria-hidden":"true"},r[3]),HUe(o(t.substr(r.index+r[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=s,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class gse extends s0e{constructor(e,t,n,s,r){super(e,e,s,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new Tt),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:UR.Right,vertical:xV.Below},this.showScheduler=new Ro(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Ro(()=>{this.element&&!mr(Po(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Et(this.item,Ht("span.submenu-indicator"+An.asCSSSelector(yt.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(Ne(this.element,it.KEY_UP,t=>{const n=new xi(t);(n.equals(17)||n.equals(3))&&(bn.stop(t,!0),this.createSubmenu(!0))})),this._register(Ne(this.element,it.KEY_DOWN,t=>{const n=new xi(t);Po()===this.item&&(n.equals(17)||n.equals(3))&&bn.stop(t,!0)})),this._register(Ne(this.element,it.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(Ne(this.element,it.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(Ne(this.element,it.FOCUS_OUT,t=>{this.element&&!mr(Po(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){bn.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=pb(e.width,t.width,{position:s.horizontal===UR.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=pb(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Et(this.element,Ht("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=Nt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new hw(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new cU],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),a=Nt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Xf(a.innerWidth,a.innerHeight),Xf.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(Ne(this.submenuContainer,it.KEY_UP,u=>{new xi(u).equals(15)&&(bn.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(Ne(this.submenuContainer,it.KEY_DOWN,u=>{new xi(u).equals(15)&&bn.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class pse extends KK{constructor(e,t,n,s){super(e,t,n),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function _Ze(i){const e=SV,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function mse(i){const e=bpe()[i.id];return`.codicon-${i.id}:before { content: '\\${e.toString(16)}'; }`}function vZe(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${mse(yt.menuSelection)}
${mse(yt.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const s=i.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const r=i.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=i.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class yZe{constructor(e,t,n,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Po();let n;const s=Nr(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{var u;this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(Ht(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(u=this.blockDisposable)==null||u.dispose(),this.blockDisposable=Ne(this.block,it.MOUSE_DOWN,h=>h.stopPropagation()));const a=new Tt,l=e.actionRunner||new Tv;l.onWillRun(h=>this.onActionRun(h,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),n=new hw(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)},fZe),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=Nt(r);return a.add(Ne(c,it.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(Ne(c,it.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;const d=new dh(c,h);let f=d.target;if(!d.rightButton){for(;f;){if(f===r)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),Id(a,n)},focus:()=>{n==null||n.focus(!!e.autoSelectFirstItem)},onHide:r=>{var o,a,l;(o=e.onHide)==null||o.call(e,!!r),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Po()===this.lastContainer||mr(Po(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!YT(e.error)&&this.notificationService.error(e.error)}}var bZe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Q1=function(i,e){return function(t,n){e(t,n,i)}};let EV=class extends Be{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new yZe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,s,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=s,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new me),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new me)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=LV.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var n;(n=e.onHide)==null||n.call(e,t),this._onDidHideContextMenu.fire()}}),$p.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};EV=bZe([Q1(0,a1),Q1(1,Nh),Q1(2,hk),Q1(3,eo),Q1(4,o1),Q1(5,Jn)],EV);var LV;(function(i){function e(n){return n&&n.menuId instanceof Zr}function t(n,s,r){if(!e(n))return n;const{menuId:o,menuActionOptions:a,contextKeyService:l}=n;return{...n,getActions:()=>{const c=[];if(o){const u=s.getMenuActions(o,l??r,a);gZe(u,c)}return n.getActions?Oo.join(n.getActions(),c):c}}}i.transform=t})(LV||(LV={}));var VR;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(VR||(VR={}));var qK=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},WR=function(i,e){return function(t,n){e(t,n,i)}};let TV=class{constructor(e){this._commandService=e}async open(e,t){if(!Xj(e,hn.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=fn.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=QU(decodeURIComponent(e.query))}catch{try{n=QU(e.query)}catch{}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};TV=qK([WR(0,jl)],TV);let kV=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=fn.parse(e));const{selection:n,uri:s}=KKe(e);return e=s,e.scheme===hn.file&&(e=Eqe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:t!=null&&t.fromUserGesture?VR.USER:VR.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};kV=qK([WR(0,sr)],kV);let MV=class{constructor(e,t){this._openers=new tl,this._validators=new tl,this._resolvers=new tl,this._resolvedUriTargets=new Hl(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new tl,this._defaultExternalOpener={openExternal:async n=>(ene(n,hn.http,hn.https)?eme(n):ui.location.href=n,!0)},this._openers.push({open:async(n,s)=>s!=null&&s.openExternal||ene(n,hn.mailto,hn.http,hn.https,hn.vsls)?(await this._doOpenExternal(n,s),!0):!1}),this._openers.push(new TV(t)),this._openers.push(new kV(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const n=typeof e=="string"?fn.parse(e):e,s=this._resolvedUriTargets.get(n)??e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1;for(const r of this._openers)if(await r.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const n of this._resolvers)try{const s=await n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const n=typeof e=="string"?fn.parse(e):e;let s;try{s=(await this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:n,preferredOpenerId:o},Cu.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},Cu.None)}dispose(){this._validators.clear()}};MV=qK([WR(0,sr),WR(1,jl)],MV);const _k=En("editorWorkerService");var dc;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(dc||(dc={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=k("sev.error","Error"),t[i.Warning]=k("sev.warning","Warning"),t[i.Info]=k("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function s(o){switch(o){case Ps.Error:return i.Error;case Ps.Warning:return i.Warning;case Ps.Info:return i.Info;case Ps.Ignore:return i.Hint}}i.fromSeverity=s;function r(o){switch(o){case i.Error:return Ps.Error;case i.Warning:return Ps.Warning;case i.Info:return Ps.Info;case i.Hint:return Ps.Ignore}}i.toSeverity=r})(dc||(dc={}));var _se;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){const o=[e];return s.source?o.push(s.source.replace("¦","\\¦")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("¦","\\¦")):o.push(s.code.value.replace("¦","\\¦")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(dc.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("¦","\\¦")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}i.makeKeyOptionalMessage=n})(_se||(_se={}));const h1=En("markerService"),r0e=oe("editor.lineHighlightBackground",null,k("lineHighlight","Background color for the highlight of line at the cursor position.")),vse=oe("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Wn},k("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));oe("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},k("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:bs,hcLight:bs},k("rangeHighlightBorder","Background color of the border around highlighted ranges."));oe("editor.symbolHighlightBackground",{dark:Gp,light:Gp,hcDark:null,hcLight:null},k("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);oe("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:bs,hcLight:bs},k("symbolHighlightBorder","Background color of the border around highlighted symbols."));const z4=oe("editorCursor.foreground",{dark:"#AEAFAD",light:$e.black,hcDark:$e.white,hcLight:"#0F4A85"},k("caret","Color of the editor cursor.")),XK=oe("editorCursor.background",null,k("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),o0e=oe("editorMultiCursor.primary.foreground",z4,k("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),wZe=oe("editorMultiCursor.primary.background",XK,k("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),a0e=oe("editorMultiCursor.secondary.foreground",z4,k("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),CZe=oe("editorMultiCursor.secondary.background",XK,k("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),YK=oe("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},k("editorWhitespaces","Color of whitespace characters in the editor.")),SZe=oe("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:$e.white,hcLight:"#292929"},k("editorLineNumbers","Color of editor line numbers.")),xZe=oe("editorIndentGuide.background",YK,k("editorIndentGuides","Color of the editor indentation guides."),!1,k("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),EZe=oe("editorIndentGuide.activeBackground",YK,k("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,k("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),vk=oe("editorIndentGuide.background1",xZe,k("editorIndentGuides1","Color of the editor indentation guides (1).")),LZe=oe("editorIndentGuide.background2","#00000000",k("editorIndentGuides2","Color of the editor indentation guides (2).")),TZe=oe("editorIndentGuide.background3","#00000000",k("editorIndentGuides3","Color of the editor indentation guides (3).")),kZe=oe("editorIndentGuide.background4","#00000000",k("editorIndentGuides4","Color of the editor indentation guides (4).")),MZe=oe("editorIndentGuide.background5","#00000000",k("editorIndentGuides5","Color of the editor indentation guides (5).")),DZe=oe("editorIndentGuide.background6","#00000000",k("editorIndentGuides6","Color of the editor indentation guides (6).")),yk=oe("editorIndentGuide.activeBackground1",EZe,k("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),AZe=oe("editorIndentGuide.activeBackground2","#00000000",k("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),IZe=oe("editorIndentGuide.activeBackground3","#00000000",k("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),NZe=oe("editorIndentGuide.activeBackground4","#00000000",k("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),RZe=oe("editorIndentGuide.activeBackground5","#00000000",k("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),PZe=oe("editorIndentGuide.activeBackground6","#00000000",k("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),OZe=oe("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:bs,hcLight:bs},k("editorActiveLineNumber","Color of editor active line number"),!1,k("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));oe("editorLineNumber.activeForeground",OZe,k("editorActiveLineNumber","Color of editor active line number"));const FZe=oe("editorLineNumber.dimmedForeground",null,k("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));oe("editorRuler.foreground",{dark:"#5A5A5A",light:$e.lightgrey,hcDark:$e.white,hcLight:"#292929"},k("editorRuler","Color of the editor rulers."));oe("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},k("editorCodeLensForeground","Foreground color of editor CodeLens"));oe("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},k("editorBracketMatchBackground","Background color behind matching brackets"));oe("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Wn,hcLight:Wn},k("editorBracketMatchBorder","Color for matching brackets boxes"));const BZe=oe("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},k("editorOverviewRulerBorder","Color of the overview ruler border.")),zZe=oe("editorOverviewRuler.background",null,k("editorOverviewRulerBackground","Background color of the editor overview ruler."));oe("editorGutter.background",Sh,k("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));oe("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:$e.fromHex("#fff").transparent(.8),hcLight:Wn},k("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const UZe=oe("editorUnnecessaryCode.opacity",{dark:$e.fromHex("#000a"),light:$e.fromHex("#0007"),hcDark:null,hcLight:null},k("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));oe("editorGhostText.border",{dark:null,light:null,hcDark:$e.fromHex("#fff").transparent(.8),hcLight:$e.fromHex("#292929").transparent(.8)},k("editorGhostTextBorder","Border color of ghost text in the editor."));oe("editorGhostText.foreground",{dark:$e.fromHex("#ffffff56"),light:$e.fromHex("#0007"),hcDark:null,hcLight:null},k("editorGhostTextForeground","Foreground color of the ghost text in the editor."));oe("editorGhostText.background",null,k("editorGhostTextBackground","Background color of the ghost text in the editor."));const VZe=new $e(new In(0,122,204,.6));oe("editorOverviewRuler.rangeHighlightForeground",VZe,k("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const WZe=oe("editorOverviewRuler.errorForeground",{dark:new $e(new In(255,18,18,.7)),light:new $e(new In(255,18,18,.7)),hcDark:new $e(new In(255,50,50,1)),hcLight:"#B5200D"},k("overviewRuleError","Overview ruler marker color for errors.")),HZe=oe("editorOverviewRuler.warningForeground",{dark:Mm,light:Mm,hcDark:xR,hcLight:xR},k("overviewRuleWarning","Overview ruler marker color for warnings.")),$Ze=oe("editorOverviewRuler.infoForeground",{dark:Dv,light:Dv,hcDark:ER,hcLight:ER},k("overviewRuleInfo","Overview ruler marker color for infos.")),l0e=oe("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},k("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),c0e=oe("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},k("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),u0e=oe("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},k("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),h0e=oe("editorBracketHighlight.foreground4","#00000000",k("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),d0e=oe("editorBracketHighlight.foreground5","#00000000",k("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),f0e=oe("editorBracketHighlight.foreground6","#00000000",k("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),GZe=oe("editorBracketHighlight.unexpectedBracket.foreground",{dark:new $e(new In(255,18,18,.8)),light:new $e(new In(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},k("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),jZe=oe("editorBracketPairGuide.background1","#00000000",k("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),KZe=oe("editorBracketPairGuide.background2","#00000000",k("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),qZe=oe("editorBracketPairGuide.background3","#00000000",k("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),XZe=oe("editorBracketPairGuide.background4","#00000000",k("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),YZe=oe("editorBracketPairGuide.background5","#00000000",k("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),ZZe=oe("editorBracketPairGuide.background6","#00000000",k("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),QZe=oe("editorBracketPairGuide.activeBackground1","#00000000",k("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),JZe=oe("editorBracketPairGuide.activeBackground2","#00000000",k("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),eQe=oe("editorBracketPairGuide.activeBackground3","#00000000",k("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),tQe=oe("editorBracketPairGuide.activeBackground4","#00000000",k("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),nQe=oe("editorBracketPairGuide.activeBackground5","#00000000",k("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),iQe=oe("editorBracketPairGuide.activeBackground6","#00000000",k("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));oe("editorUnicodeHighlight.border",Mm,k("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));oe("editorUnicodeHighlight.background",eje,k("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Vg((i,e)=>{const t=i.getColor(Sh),n=i.getColor(r0e),s=n&&!n.isTransparent()?n:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});function sQe(i,e){const t=[],n=[];for(const s of i)e.has(s)||t.push(s);for(const s of e)i.has(s)||n.push(s);return{removed:t,added:n}}function rQe(i,e){const t=new Set;for(const n of e)i.has(n)&&t.add(n);return t}var oQe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yse=function(i,e){return function(t,n){e(t,n,i)}};let DV=class extends Be{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new me),this._markerDecorations=new Hl,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new aQe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var n;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===hn.inMemory||e.uri.scheme===hn.internal||e.uri.scheme===hn.vscode)&&((n=this._markerService)==null||n.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};DV=oQe([yse(0,Jo),yse(1,h1)],DV);class aQe extends Be{constructor(e){super(),this.model=e,this._map=new n$e,this._register(en(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:n}=sQe(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;const s=n.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(s,r);for(const a of n)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=de.lift(t);if(t.severity===dc.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(s===1||n.endColumn>=s)return n;const r=e.getWordAtPosition(n.getStartPosition());r&&(n=new de(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<n.endColumn&&(n=new de(n.startLineNumber,s,n.endLineNumber,n.endColumn),t.startColumn=s)}return n}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case dc.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case dc.Info:t="squiggly-info",n=Z1($Ze),s=10,o={color:Z1(_je),position:1};break;case dc.Warning:t="squiggly-warning",n=Z1(HZe),s=20,o={color:Z1(vje),position:1};break;case dc.Error:default:t="squiggly-error",n=Z1(WZe),s=30,o={color:Z1(yje),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:pR.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const g0e=En("markerDecorationsService");class js{static _nextVisibleColumn(e,t,n){return e===9?js.nextRenderTabStop(t,n):Em(e)||jj(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new rR(r);let a=0;for(;!o.eol();){const l=sR(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length,r=new rR(e);let o=0,a=1;for(;!r.eol();){const l=sR(e,s,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,n),u=r.offset+1;if(c>=t){const h=t-o;return c-t<h?u:a}o=c,a=u}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function lQe(i,e,t){let n=0;for(let r=0;r<i.length;r++)i.charAt(r)==="	"?n=js.nextIndentTabStop(n,e):n++;let s="";if(!t){const r=Math.floor(n/e);n=n%e;for(let o=0;o<r;o++)s+="	"}for(let r=0;r<n;r++)s+=" ";return s}function p0e(i,e,t){let n=sl(i);return n===-1&&(n=i.length),lQe(i.substring(0,n),e,t)+i.substring(n)}class bse{constructor(e,t,n,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=s}}class cQe{constructor(e,t,n,s,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class uQe extends cQe{constructor(e,t,n,s,r,o,a){super(e,t,n,s,r,o),this.minVisibleColumnIndentation=a}}function hQe(i,e,t,n){return i!==t?ms(t-i,n):ms(0,n-e)}const Ea=0;function HR(i){return i===0}const Ol=2**26;function ms(i,e){return i*Ol+e}function yc(i){const e=i,t=Math.floor(e/Ol),n=e-t*Ol;return new km(t,n)}function dQe(i){return Math.floor(i/Ol)}function Ds(i,e){let t=i+e;return e>=Ol&&(t=t-i%Ol),t}function fQe(i,e){return i.reduce((t,n)=>Ds(t,e(n)),Ea)}function m0e(i,e){return i===e}function O2(i,e){const t=i,n=e;if(n-t<=0)return Ea;const r=Math.floor(t/Ol),o=Math.floor(n/Ol),a=n-o*Ol;if(r===o){const l=t-r*Ol;return ms(0,a-l)}else return ms(o-r,a)}function dw(i,e){return i<e}function fw(i,e){return i<=e}function mE(i,e){return i>=e}function bb(i){return ms(i.lineNumber-1,i.column-1)}function H0(i,e){const t=i,n=Math.floor(t/Ol),s=t-n*Ol,r=e,o=Math.floor(r/Ol),a=r-o*Ol;return new de(n+1,s+1,o+1,a+1)}function gQe(i){const e=$C(i);return ms(e.length-1,e[e.length-1].length)}class lg{static fromModelContentChanges(e){return e.map(n=>{const s=de.lift(n.range);return new lg(bb(s.getStartPosition()),bb(s.getEndPosition()),gQe(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${yc(this.startOffset)}...${yc(this.endOffset)}) -> ${yc(this.newLength)}`}}class pQe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>ZK.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:O2(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?ms(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):ms(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=yc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?ms(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):ms(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(fw(n,e)){this.nextEditIdx++;const s=yc(n),r=yc(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class ZK{static from(e){return new ZK(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=yc(t),this.endOffsetAfterObj=yc(Ds(e,n)),this.offsetObj=yc(e)}}const MD=[],ac=class ac{static create(e,t){if(e<=128&&t.length===0){let n=ac.cache[e];return n||(n=new ac(e,t),ac.cache[e]=n),n}return new ac(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:ac.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),ac.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===MD&&e.additionalItems===MD)return t===this.items?this:t===e.items?e:ac.create(t,MD);const n=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return ac.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};ac.cache=new Array(129),ac.empty=ac.create(0,MD);let Qa=ac;const wse={getKey(i){return i}};class mQe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class QK{get length(){return this._length}constructor(e){this._length=e}}class F2 extends QK{static create(e,t,n){let s=e.length;return t&&(s=Ds(s,t.length)),n&&(s=Ds(s,n.length)),new F2(s,e,t,n,t?t.missingOpeningBracketIds:Qa.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new F2(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Ds(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Vd extends QK{static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Ds(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=Ds(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new _Qe(r,e.listHeight+1,e,t,n,o):new B2(r,e.listHeight+1,e,t,n,o)}static getEmpty(){return new vQe(Ea,0,[],Qa.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new Qn;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Ds(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=Ds(s,o.length))}return this.cachedMinIndentation=n,n}}class B2 extends Vd{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}deepClone(){return new B2(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class _Qe extends B2{toMutable(){return new B2(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class $R extends Vd{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,s){super(e,t,s),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new $R(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class vQe extends $R{toMutable(){return new $R(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const yQe=[];class JK extends QK{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return yQe}deepClone(){return this}}class o0 extends JK{get kind(){return 0}get missingOpeningBracketIds(){return Qa.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=yc(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=dQe(Ds(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=js.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,u)}return o}}class GR extends JK{static create(e,t,n){return new GR(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return Qa.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class bQe extends JK{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Op=class{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}};class wQe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new CQe(this.textModel,this.bracketTokens),this._offset=Ea,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return ms(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Ds(this._offset,e);const t=yc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Ds(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class CQe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=rh.getTokenType(l)===0,u=rh.containsBalancedBrackets(l),h=r.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<h){const d=r.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),g=this.bracketTokens.getSingleLanguageBracketTokens(d),p=g.regExpGlobal;if(p){p.lastIndex=0;const _=p.exec(f);_&&(a=g.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=hQe(e,t,this.lineIdx,this.lineCharOffset);return new Op(s,0,-1,Qa.getEmpty(),new o0(s))}}class SQe{constructor(e,t){this.text=e,this._offset=Ea,this.idx=0;const n=t.getRegExpStr(),s=n?new RegExp(n+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,u=0;const h=[];for(let g=0;g<60;g++)h.push(new Op(ms(0,g),0,-1,Qa.getEmpty(),new o0(ms(0,g))));const d=[];for(let g=0;g<60;g++)d.push(new Op(ms(1,g),0,-1,Qa.getEmpty(),new o0(ms(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let _;if(u===a){const m=g-c;if(m<h.length)_=h[m];else{const v=ms(0,m);_=new Op(v,0,-1,Qa.getEmpty(),new o0(v))}}else{const m=a-u,v=g-l;if(m===1&&v<d.length)_=d[v];else{const y=ms(m,v);_=new Op(y,0,-1,Qa.getEmpty(),new o0(y))}}r.push(_)}r.push(t.getToken(p)),c=g+p.length,u=a}}const f=e.length;if(c!==f){const g=u===a?ms(0,f-c):ms(a-u,f-l);r.push(new Op(g,0,-1,Qa.getEmpty(),new o0(g)))}this.length=ms(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Zze}}class eq{static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const s=new Map;for(const r of e.bracketsNew.openingBrackets){const o=ms(0,r.bracketText.length),a=n(r),l=Qa.getEmpty().add(a,wse);s.set(r.bracketText,new Op(o,1,a,l,GR.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=ms(0,r.bracketText.length);let a=Qa.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(n(c),wse);s.set(r.bracketText,new Op(o,2,n(l[0]),a,GR.create(o,r,a)))}return new eq(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>xQe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function xQe(i){let e=Ng(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}class EQe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=eq.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function LQe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?_0e(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())Cse(n,s)<=Cse(s,o)?(n=L8(n,s),s=o):s=L8(s,o);return L8(n,s)}function _0e(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Vd.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Vd.create23(i[0],i[1],t>=3?i[2]:null,e)}function Cse(i,e){return Math.abs(i.listHeight-e.listHeight)}function L8(i,e){return i.listHeight===e.listHeight?Vd.create23(i,e,null,!1):i.listHeight>e.listHeight?TQe(i,e):kQe(e,i)}function TQe(i,e){i=i.toMutable();let t=i;const n=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Vd.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vd.create23(i,s,null,!1):i}function kQe(i,e){i=i.toMutable();let t=i;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Vd.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vd.create23(s,i,null,!1):i}class MQe{constructor(e){this.lastOffset=Ea,this.nextNodes=[e],this.offsets=[Ea],this.idxs=[]}readLongestNodeAt(e,t){if(dw(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=ax(this.nextNodes);if(!n)return;const s=ax(this.offsets);if(dw(e,s))return;if(dw(s,e))if(Ds(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=T8(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=T8(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=ax(this.offsets),t=ax(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=ax(this.nextNodes),s=T8(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(Ds(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function T8(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function ax(i){return i.length>0?i[i.length-1]:void 0}function Sse(i,e,t,n){return new DQe(i,e,t,n).parseDocument()}class DQe{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new MQe(n):void 0,this.positionMapper=new pQe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Qa.getEmpty(),0);return e||(e=Vd.getEmpty()),e}parseList(e,t){const n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?LQe(n):_0e(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!HR(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!dw(s.length,t)?!1:s.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new bQe(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new o0(n.length);const s=e.merge(n.bracketIds),r=this.parseList(s,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),F2.create(n.astNode,r,o.astNode)):F2.create(n.astNode,r,null)}default:throw new Error("unexpected")}}}function jR(i,e){if(i.length===0)return e;if(e.length===0)return i;const t=new Ag(xse(i)),n=xse(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function r(c){if(c===void 0){const h=t.takeWhile(d=>!0)||[];return s&&h.unshift(s),h}const u=[];for(;s&&!HR(c);){const[h,d]=s.splitAt(c);u.push(h),c=O2(h.lengthAfter,c),s=d??t.dequeue()}return HR(c)||u.push(new qp(!1,c,c)),u}const o=[];function a(c,u,h){if(o.length>0&&m0e(o[o.length-1].endOffset,c)){const d=o[o.length-1];o[o.length-1]=new lg(d.startOffset,u,Ds(d.newLength,h))}else o.push({startOffset:c,endOffset:u,newLength:h})}let l=Ea;for(const c of n){const u=r(c.lengthBefore);if(c.modified){const h=fQe(u,f=>f.lengthBefore),d=Ds(l,h);a(l,d,c.lengthAfter),l=d}else for(const h of u){const d=l;l=Ds(l,h.lengthBefore),h.modified&&a(d,l,h.lengthAfter)}}return o}class qp{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=O2(e,this.lengthAfter);return m0e(t,Ea)?[this,void 0]:this.modified?[new qp(this.modified,this.lengthBefore,e),new qp(this.modified,Ea,t)]:[new qp(this.modified,e,e),new qp(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${yc(this.lengthBefore)} -> ${yc(this.lengthAfter)}`}}function xse(i){const e=[];let t=Ea;for(const n of i){const s=O2(t,n.startOffset);HR(s)||e.push(new qp(!1,s,s));const r=O2(n.startOffset,n.endOffset);e.push(new qp(!0,r,n.newLength)),t=n.endOffset}return e}class AQe extends Be{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new me,this.denseKeyProvider=new mQe,this.brackets=new EQe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new SQe(this.textModel.getValue(),n);this.initialAstWithoutTokens=Sse(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new lg(ms(n.fromLineNumber-1,0),ms(n.toLineNumber,0),ms(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=lg.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=jR(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=jR(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new wQe(this.textModel,this.brackets);return Sse(r,e,s,n)}getBracketsInRange(e,t){this.flushQueue();const n=ms(e.startLineNumber-1,e.startColumn-1),s=ms(e.endLineNumber-1,e.endColumn-1);return new B0(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;AV(o,Ea,o.length,n,s,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=bb(e.getStartPosition()),s=bb(e.getEndPosition());return new B0(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new IQe(r,t,this.textModel);IV(o,Ea,o.length,n,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return y0e(t,Ea,t.length,bb(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return v0e(t,Ea,t.length,bb(e))}}function v0e(i,e,t,n){if(i.kind===4||i.kind===2){const s=[];for(const r of i.children)t=Ds(e,r.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=s.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=s[r];if(dw(o,n)){const l=v0e(i.children[r],o,a,n);if(l)return l}}return null}else{if(i.kind===3)return null;if(i.kind===1){const s=H0(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function y0e(i,e,t,n){if(i.kind===4||i.kind===2){for(const s of i.children){if(t=Ds(e,s.length),dw(n,t)){const r=y0e(s,e,t,n);if(r)return r}e=t}return null}else{if(i.kind===3)return null;if(i.kind===1){const s=H0(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function AV(i,e,t,n,s,r,o,a,l,c,u=!1){if(o>200)return!0;e:for(;;)switch(i.kind){case 4:{const h=i.childrenLength;for(let d=0;d<h;d++){const f=i.getChild(d);if(f){if(t=Ds(e,f.length),fw(e,s)&&mE(t,n)){if(mE(t,s)){i=f;continue e}if(!AV(f,e,t,n,s,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const h=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo);let d=0;if(l){let g=l.get(i.openingBracket.text);g===void 0&&(g=0),d=g,h&&(g++,l.set(i.openingBracket.text,g))}const f=i.childrenLength;for(let g=0;g<f;g++){const p=i.getChild(g);if(p){if(t=Ds(e,p.length),fw(e,s)&&mE(t,n)){if(mE(t,s)&&p.kind!==1){i=p,h?(o++,a=d+1):a=d;continue e}if((h||p.kind!==1||!i.closingBracket)&&!AV(p,e,t,n,s,r,h?o+1:o,h?d+1:d,l,c,!i.closingBracket))return!1}e=t}}return l==null||l.set(i.openingBracket.text,d),!0}case 3:{const h=H0(e,t);return r(new bse(h,o-1,0,!0))}case 1:{const h=H0(e,t);return r(new bse(h,o-1,a-1,u))}case 0:return!0}}class IQe{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function IV(i,e,t,n,s,r,o,a){var c;if(o>200)return!0;let l=!0;if(i.kind===2){let u=0;if(a){let f=a.get(i.openingBracket.text);f===void 0&&(f=0),u=f,f++,a.set(i.openingBracket.text,f)}const h=Ds(e,i.openingBracket.length);let d=-1;if(r.includeMinIndentation&&(d=i.computeMinIndentation(e,r.textModel)),l=r.push(new uQe(H0(e,t),H0(e,h),i.closingBracket?H0(Ds(h,((c=i.child)==null?void 0:c.length)||Ea),t):void 0,o,u,i,d)),e=h,l&&i.child){const f=i.child;if(t=Ds(e,f.length),fw(e,s)&&mE(t,n)&&(l=IV(f,e,t,n,s,r,o+1,a),!l))return!1}a==null||a.set(i.openingBracket.text,u)}else{let u=e;for(const h of i.children){const d=u;if(u=Ds(u,h.length),fw(d,s)&&fw(n,u)&&(l=IV(h,d,u,n,s,r,o,a),!l))return!1}}return l}class NQe extends Be{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Ig),this.onDidChangeEmitter=new me,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Tt;this.bracketPairsTree.value=RQe(e.add(new AQe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||B0.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||B0.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)==null?void 0:n.object.getBracketsInRange(e,t))||B0.empty}findMatchingBracketUp(e,t,n){const s=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(de.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?DD(this._findMatchingBracketUp(l,s,k8(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(de.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(_u(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,de.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=k8(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(sd(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<r;c++){const u=t.getStartOffset(c);if(u>=l)break;if(sd(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,s=this.textModel.tokenization.getLineTokens(n),r=this.textModel.getLineContent(n),o=s.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(a&&!sd(s.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,o),u=null;for(;;){const h=qc.findNextBracketInRange(a.forwardRegex,n,r,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const d=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[d],a.textIsOpenBracket[d],t);if(f){if(f instanceof Gf)return null;u=f}}l=h.endColumn-1}if(u)return u}if(o>0&&s.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!sd(s.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:h}=this._establishBracketSearchOffsets(e,s,c,l),d=qc.findPrevBracketInRange(c.reversedRegex,n,r,u,h);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn){const f=r.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),g=this._matchFoundBracket(d,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof Gf?null:g}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof Gf?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,u,h,d)=>{for(;;){if(n&&++a%100===0&&!n())return Gf.INSTANCE;const f=qc.findPrevBracketInRange(r,c,u,h,d);if(!f)break;const g=u.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;d=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),h=u.getCount(),d=this.textModel.getLineContent(c);let f=h-1,g=d.length,p=d.length;c===t.lineNumber&&(f=u.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let _=!0;for(;f>=0;f--){const m=u.getLanguageId(f)===s&&!sd(u.getStandardTokenType(f));if(m)_?g=u.getStartOffset(f):(g=u.getStartOffset(f),p=u.getEndOffset(f));else if(_&&g!==p){const v=l(c,d,g,p);if(v)return v}_=m}if(_&&g!==p){const m=l(c,d,g,p);if(m)return m}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(u,h,d,f)=>{for(;;){if(n&&++a%100===0&&!n())return Gf.INSTANCE;const g=qc.findNextBracketInRange(r,u,h,d,f);if(!g)break;const p=h.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const h=this.textModel.tokenization.getLineTokens(u),d=h.getCount(),f=this.textModel.getLineContent(u);let g=0,p=0,_=0;u===t.lineNumber&&(g=h.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let m=!0;for(;g<d;g++){const v=h.getLanguageId(g)===s&&!sd(h.getStandardTokenType(g));if(v)m||(p=h.getStartOffset(g)),_=h.getEndOffset(g);else if(m&&p!==_){const y=l(u,f,p,_);if(y)return y}m=v}if(m&&p!==_){const v=l(u,f,p,_);if(v)return v}}return null}findPrevBracket(e){var o;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((o=this.bracketPairsTree.value)==null?void 0:o.object.getFirstBracketBefore(t))||null;let n=null,s=null,r=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let h=c-1,d=u.length,f=u.length;if(a===t.lineNumber){h=l.findTokenIndexAtOffset(t.column-1),d=t.column-1,f=t.column-1;const p=l.getLanguageId(h);n!==p&&(n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let g=!0;for(;h>=0;h--){const p=l.getLanguageId(h);if(n!==p){if(s&&r&&g&&d!==f){const m=qc.findPrevBracketInRange(s.reversedRegex,a,u,d,f);if(m)return this._toFoundBracket(r,m);g=!1}n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const _=!!s&&!sd(l.getStandardTokenType(h));if(_)g?d=l.getStartOffset(h):(d=l.getStartOffset(h),f=l.getEndOffset(h));else if(r&&s&&g&&d!==f){const m=qc.findPrevBracketInRange(s.reversedRegex,a,u,d,f);if(m)return this._toFoundBracket(r,m)}g=_}if(r&&s&&g&&d!==f){const p=qc.findPrevBracketInRange(s.reversedRegex,a,u,d,f);if(p)return this._toFoundBracket(r,p)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const n=this.textModel.getLineCount();let s=null,r=null,o=null;for(let l=t.lineNumber;l<=n;l++){const c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),h=this.textModel.getLineContent(l);let d=0,f=0,g=0;if(l===t.lineNumber){d=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const _=c.getLanguageId(d);s!==_&&(s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let p=!0;for(;d<u;d++){const _=c.getLanguageId(d);if(s!==_){if(o&&r&&p&&f!==g){const v=qc.findNextBracketInRange(r.forwardRegex,l,h,f,g);if(v)return this._toFoundBracket(o,v);p=!1}s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const m=!!r&&!sd(c.getStandardTokenType(d));if(m)p||(f=c.getStartOffset(d)),g=c.getEndOffset(d);else if(o&&r&&p&&f!==g){const v=qc.findNextBracketInRange(r.forwardRegex,l,h,f,g);if(v)return this._toFoundBracket(o,v)}p=m}if(o&&r&&p&&f!==g){const _=qc.findNextBracketInRange(r.forwardRegex,l,h,f,g);if(_)return this._toFoundBracket(o,_)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=de.fromPositions(n),g=this.getBracketPairsInRange(de.fromPositions(n,n)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const s=k8(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const p=[];for(let _=0,m=g?g.brackets.length:0;_<m;_++)p[_]=0;o.set(f,p)}a=o.get(f)};let c=0;const u=(f,g,p,_,m)=>{for(;;){if(s&&++c%100===0&&!s())return Gf.INSTANCE;const v=qc.findNextBracketInRange(f.forwardRegex,g,p,_,m);if(!v)break;const y=p.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),C=f.textIsBracket[y];if(C&&(C.isOpen(y)?a[C.index]++:C.isClose(y)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(v,C,!1,s);_=v.endColumn-1}return null};let h=null,d=null;for(let f=n.lineNumber;f<=r;f++){const g=this.textModel.tokenization.getLineTokens(f),p=g.getCount(),_=this.textModel.getLineContent(f);let m=0,v=0,y=0;if(f===n.lineNumber){m=g.findTokenIndexAtOffset(n.column-1),v=n.column-1,y=n.column-1;const S=g.getLanguageId(m);h!==S&&(h=S,d=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,d))}let C=!0;for(;m<p;m++){const S=g.getLanguageId(m);if(h!==S){if(d&&C&&v!==y){const E=u(d,f,_,v,y);if(E)return DD(E);C=!1}h=S,d=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,d)}const x=!!d&&!sd(g.getStandardTokenType(m));if(x)C||(v=g.getStartOffset(m)),y=g.getEndOffset(m);else if(d&&C&&v!==y){const E=u(d,f,_,v,y);if(E)return DD(E)}C=x}if(d&&C&&v!==y){const S=u(d,f,_,v,y);if(S)return DD(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const s=e.getBracketInfo(n);return s?{range:t,bracketInfo:s}:null}}function RQe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function k8(i){if(typeof i>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=i}}const AO=class AO{constructor(){this._searchCanceledBrand=void 0}};AO.INSTANCE=new AO;let Gf=AO;function DD(i){return i instanceof Gf?null:i}class PQe extends Be{constructor(e){super(),this.textModel=e,this.colorProvider=new b0e,this.onDidChangeEmitter=new me,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new de(1,1,this.textModel.getLineCount(),1),e,t):[]}}class b0e{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Vg((i,e)=>{const t=[l0e,c0e,u0e,h0e,d0e,f0e],n=new b0e;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(GZe)}; }`);const s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function AD(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class jr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${AD(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${AD(this.oldText)}")`:`(replace@${this.oldPosition} "${AD(this.oldText)}" with "${AD(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;eh(e,s,n),n+=4;for(let r=0;r<s;r++)fHe(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=Ju(e,t);return t+=4,pHe(e,t,n)}writeSize(){return 8+jr._writeStringSize(this.oldText)+jr._writeStringSize(this.newText)}write(e,t){return eh(e,this.oldPosition,t),t+=4,eh(e,this.newPosition,t),t+=4,t=jr._writeString(e,this.oldText,t),t=jr._writeString(e,this.newText,t),t}static read(e,t,n){const s=Ju(e,t);t+=4;const r=Ju(e,t);t+=4;const o=jr._readString(e,t);t+=jr._writeStringSize(o);const a=jr._readString(e,t);return t+=jr._writeStringSize(a),n.push(new jr(s,o,r,a)),t}}function OQe(i,e){return i===null||i.length===0?e:new ad(i,e).compress()}class ad{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,u]=ad._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=u;continue}if(n.newPosition<s.oldPosition){const[c,u]=ad._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=u;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,u]=ad._splitPrev(n,s.oldLength);a=c,l=s,n=u,s=this._getCurr(++t)}else{const[c,u]=ad._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=u}this._result[this._resultLen++]=new jr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=ad._merge(this._result);return ad._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=ad._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=ad._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new jr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new jr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new jr(e.oldPosition,e.oldText,e.newPosition,n),new jr(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new jr(e.oldPosition,n,e.newPosition,e.newText),new jr(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new jr(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function J1(i){return i.toString()}class ur{static create(e,t){const n=e.getAlternativeVersionId(),s=NV(e);return new ur(n,n,s,s,t,t,[])}constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,n,s,r){t.length>0&&(this.changes=OQe(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(eh(e,t?t.length:0,n),n+=4,t)for(const s of t)eh(e,s.selectionStartLineNumber,n),n+=4,eh(e,s.selectionStartColumn,n),n+=4,eh(e,s.positionLineNumber,n),n+=4,eh(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=Ju(e,t);t+=4;for(let r=0;r<s;r++){const o=Ju(e,t);t+=4;const a=Ju(e,t);t+=4;const l=Ju(e,t);t+=4;const c=Ju(e,t);t+=4,n.push(new gi(o,a,l,c))}return t}serialize(){let e=10+ur._writeSelectionsSize(this.beforeCursorState)+ur._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;eh(t,this.beforeVersionId,n),n+=4,eh(t,this.afterVersionId,n),n+=4,vne(t,this.beforeEOL,n),n+=1,vne(t,this.afterEOL,n),n+=1,n=ur._writeSelections(t,this.beforeCursorState,n),n=ur._writeSelections(t,this.afterCursorState,n),eh(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=Ju(t,n);n+=4;const r=Ju(t,n);n+=4;const o=_ne(t,n);n+=1;const a=_ne(t,n);n+=1;const l=[];n=ur._readSelections(t,n,l);const c=[];n=ur._readSelections(t,n,c);const u=Ju(t,n);n+=4;const h=[];for(let d=0;d<u;d++)n=jr.read(t,n,h);return new ur(s,r,o,a,l,c,h)}}class w0e{get type(){return 0}get resource(){return fn.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,s){this.label=e,this.code=t,this.model=n,this._data=ur.create(n,s)}toString(){return(this._data instanceof ur?this._data:ur.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(fn.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof ur}append(e,t,n,s,r){this._data instanceof ur&&this._data.append(e,t,n,s,r)}close(){this._data instanceof ur&&(this._data=this._data.serialize())}open(){this._data instanceof ur||(this._data=ur.deserialize(this._data))}undo(){if(fn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ur&&(this._data=this._data.serialize());const e=ur.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(fn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ur&&(this._data=this._data.serialize());const e=ur.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof ur&&(this._data=this._data.serialize()),this._data.byteLength+168}}class FQe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const r=J1(s.resource);this._editStackElementsMap.set(r,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=J1(e);return this._editStackElementsMap.has(t)}setModel(e){const t=J1(fn.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=J1(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=J1(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=J1(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${NK(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function NV(i){return i.getEOL()===`
`?0:1}function jf(i){return i?i instanceof w0e||i instanceof FQe:!1}class tq{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);jf(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);jf(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(jf(n)&&n.canAppend(this._model))return n;const s=new w0e(k("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],NV(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,s){const r=this._getOrCreateEditStackElement(e,s),o=this._model.applyEdits(t,!0),a=tq._computeCursorState(n,o),l=o.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),NV(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return di(n),null}}}class C0e extends Be{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function BQe(i,e){let t=0,n=0;const s=i.length;for(;n<s;){const r=i.charCodeAt(n);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;n++}return n===s?-1:t}var $0;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})($0||($0={}));class k0{constructor(e,t,n,s,r,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=s,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class QE{constructor(e,t){this.top=e,this.endColumn=t}}class zQe extends C0e{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return BQe(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Qn("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,u=-1;const h=E=>{if(a!==-1&&(a===-2||a>E-1)){a=-1,l=-1;for(let L=E-2;L>=0;L--){const T=this._computeIndentLevel(L);if(T>=0){a=L,l=T;break}}}if(c===-2){c=-1,u=-1;for(let L=E;L<s;L++){const T=this._computeIndentLevel(L);if(T>=0){c=L,u=T;break}}}};let d=-2,f=-1,g=-2,p=-1;const _=E=>{if(d===-2){d=-1,f=-1;for(let L=E-2;L>=0;L--){const T=this._computeIndentLevel(L);if(T>=0){d=L,f=T;break}}}if(g!==-1&&(g===-2||g<E-1)){g=-1,p=-1;for(let L=E;L<s;L++){const T=this._computeIndentLevel(L);if(T>=0){g=L,p=T;break}}}};let m=0,v=!0,y=0,C=!0,S=0,x=0;for(let E=0;v||C;E++){const L=e-E,T=e+E;E>1&&(L<1||L<t)&&(v=!1),E>1&&(T>s||T>n)&&(C=!1),E>5e4&&(v=!1,C=!1);let D=-1;if(v&&L>=1){const N=this._computeIndentLevel(L-1);N>=0?(c=L-1,u=N,D=Math.ceil(N/this.textModel.getOptions().indentSize)):(h(L),D=this._getIndentLevelForWhitespaceLine(o,l,u))}let I=-1;if(C&&T<=s){const N=this._computeIndentLevel(T-1);N>=0?(d=T-1,f=N,I=Math.ceil(N/this.textModel.getOptions().indentSize)):(_(T),I=this._getIndentLevelForWhitespaceLine(o,f,p))}if(E===0){x=D;continue}if(E===1){if(T<=s&&I>=0&&x+1===I){v=!1,m=T,y=T,S=I;continue}if(L>=1&&D>=0&&D-1===x){C=!1,m=L,y=L,S=D;continue}if(m=e,y=e,S=x,S===0)return{startLineNumber:m,endLineNumber:y,indent:S}}v&&(D>=S?m=L:v=!1),C&&(I>=S?y=T:C=!1)}return{startLineNumber:m,endLineNumber:y,indent:S}}getLinesBracketGuides(e,t,n,s){var h;const r=[];for(let d=e;d<=t;d++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new de(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(n&&a.length>0){const d=(e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(de.fromPositions(n)).toArray()).filter(f=>de.strictContainsPosition(f.range,n));l=(h=mR(d,f=>o))==null?void 0:h.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new S0e;for(const d of a){if(!d.closingBracketRange)continue;const f=l&&d.range.equalsRange(l);if(!f&&!s.includeInactive)continue;const g=u.getInlineClassName(d.nestingLevel,d.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&f?" "+u.activeClassName:""),p=d.openingBracketRange.getStartPosition(),_=d.closingBracketRange.getStartPosition(),m=s.horizontalGuides===$0.Enabled||s.horizontalGuides===$0.EnabledForActive&&f;if(d.range.startLineNumber===d.range.endLineNumber){m&&r[d.range.startLineNumber-e].push(new k0(-1,d.openingBracketRange.getEndPosition().column,g,new QE(!1,_.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(_),y=this.getVisibleColumnFromPosition(d.openingBracketRange.getStartPosition()),C=Math.min(y,v,d.minVisibleColumnIndentation+1);let S=!1;sl(this.textModel.getLineContent(d.closingBracketRange.startLineNumber))<d.closingBracketRange.startColumn-1&&(S=!0);const L=Math.max(p.lineNumber,e),T=Math.min(_.lineNumber,t),D=S?1:0;for(let I=L;I<T+D;I++)r[I-e].push(new k0(C,-1,g,null,I===p.lineNumber?p.column:-1,I===_.lineNumber?_.column:-1));m&&(p.lineNumber>=e&&y>C&&r[p.lineNumber-e].push(new k0(C,-1,g,new QE(!1,p.column),-1,-1)),_.lineNumber<=t&&v>C&&r[_.lineNumber-e].push(new k0(C,-1,g,new QE(!S,_.column),-1,-1)))}for(const d of r)d.sort((f,g)=>f.visibleColumn-g.visibleColumn);return r}getVisibleColumnFromPosition(e){return js.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,h=-1;for(let d=e;d<=t;d++){const f=d-e,g=this._computeIndentLevel(d-1);if(g>=0){l=d-1,c=g,a[f]=Math.ceil(g/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=d-2;p>=0;p--){const _=this._computeIndentLevel(p);if(_>=0){l=p,c=_;break}}}if(u!==-1&&(u===-2||u<d-1)){u=-1,h=-1;for(let p=d;p<n;p++){const _=this._computeIndentLevel(p);if(_>=0){u=p,h=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const s=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/s.indentSize):t===n||e?Math.ceil(n/s.indentSize):1+Math.floor(n/s.indentSize)}}class S0e{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class UQe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function VQe(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){const d=i.charCodeAt(r),f=t.charCodeAt(r);if(d!==f)break}let o=0,a=0;for(let d=r;d<e;d++)i.charCodeAt(d)===32?o++:a++;let l=0,c=0;for(let d=r;d<n;d++)t.charCodeAt(d)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),h=Math.abs(o-l);if(u===0){s.spacesDiff=h,h>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(s.looksLikeAlignment=!0);return}if(h%u===0){s.spacesDiff=h/u;return}}function Ese(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],h=new UQe;for(let g=1;g<=n;g++){const p=i.getLineLength(g),_=i.getLineContent(g),m=p<=65536;let v=!1,y=0,C=0,S=0;for(let E=0,L=p;E<L;E++){const T=m?_.charCodeAt(E):i.getLineCharCode(g,E);if(T===9)S++;else if(T===32)C++;else{v=!0,y=E;break}}if(!v||(S>0?s++:C>1&&r++,VQe(o,a,_,y,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const x=h.spacesDiff;x<=c&&u[x]++,o=_,a=y}let d=t;s!==r&&(d=s<r);let f=e;if(d){let g=d?0:.1*n;l.forEach(p=>{const _=u[p];_>g&&(g=_,f=p)}),f===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function pa(i){return(i.metadata&1)>>>0}function Ci(i,e){i.metadata=i.metadata&254|e<<0}function Qr(i){return(i.metadata&2)>>>1===1}function yi(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function x0e(i){return(i.metadata&4)>>>2===1}function Lse(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function E0e(i){return(i.metadata&64)>>>6===1}function Tse(i,e){i.metadata=i.metadata&191|(e?1:0)<<6}function WQe(i){return(i.metadata&24)>>>3}function kse(i,e){i.metadata=i.metadata&231|e<<3}function HQe(i){return(i.metadata&32)>>>5===1}function Mse(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class L0e{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ci(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,Lse(this,!1),Tse(this,!1),kse(this,1),Mse(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,yi(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;const t=this.options.className;Lse(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),Tse(this,this.options.glyphMarginClassName!==null),kse(this,this.options.stickiness),Mse(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const ln=new L0e(null,0,0);ln.parent=ln;ln.left=ln;ln.right=ln;Ci(ln,0);class M8{constructor(){this.root=ln,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r,o){return this.root===ln?[]:ZQe(this,e,t,n,s,r,o)}search(e,t,n,s){return this.root===ln?[]:YQe(this,e,t,n,s)}collectNodesFromOwner(e){return qQe(this,e)}collectNodesPostOrder(){return XQe(this)}insert(e){Dse(this,e),this._normalizeDeltaIfNecessary()}delete(e){Ase(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=jQe(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];Ase(this,l)}this._normalizeDeltaIfNecessary(),KQe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,GQe(l,e,e+t,n,s),l.maxEnd=l.end,Dse(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,$Qe(this))}}function $Qe(i){let e=i.root,t=0;for(;e!==ln;){if(e.left!==ln&&!Qr(e.left)){e=e.left;continue}if(e.right!==ln&&!Qr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Dm(e),yi(e,!0),yi(e.left,!1),yi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}yi(i.root,!1)}function ey(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function GQe(i,e,t,n,s){const r=WQe(i),o=r===0||r===2,a=r===1||r===2,l=t-e,c=n,u=Math.min(l,c),h=i.start;let d=!1;const f=i.end;let g=!1;e<=h&&f<=t&&HQe(i)&&(i.start=e,d=!0,i.end=e,g=!0);{const _=s?1:l>0?2:0;!d&&ey(h,o,e,_)&&(d=!0),!g&&ey(f,a,e,_)&&(g=!0)}if(u>0&&!s){const _=l>c?2:0;!d&&ey(h,o,e+u,_)&&(d=!0),!g&&ey(f,a,e+u,_)&&(g=!0)}{const _=s?1:0;!d&&ey(h,o,t,_)&&(i.start=e+c,d=!0),!g&&ey(f,a,t,_)&&(i.end=e+c,g=!0)}const p=c-l;d||(i.start=Math.max(0,h+p)),g||(i.end=Math.max(0,f+p)),i.start>i.end&&(i.end=i.start)}function jQe(i,e,t){let n=i.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;n!==ln;){if(Qr(n)){yi(n.left,!1),yi(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!Qr(n.left)){if(r=s+n.maxEnd,r<e){yi(n,!0);continue}if(n.left!==ln){n=n.left;continue}}if(o=s+n.start,o>t){yi(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),yi(n,!0),n.right!==ln&&!Qr(n.right)){s+=n.delta,n=n.right;continue}}return yi(i.root,!1),l}function KQe(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==ln;){if(Qr(s)){yi(s.left,!1),yi(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Dm(s),s=s.parent;continue}if(!Qr(s.left)){if(o=r+s.maxEnd,o<e){yi(s,!0);continue}if(s.left!==ln){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(i.requestNormalizeDelta=!0),yi(s,!0);continue}if(yi(s,!0),s.right!==ln&&!Qr(s.right)){r+=s.delta,s=s.right;continue}}yi(i.root,!1)}function qQe(i,e){let t=i.root;const n=[];let s=0;for(;t!==ln;){if(Qr(t)){yi(t.left,!1),yi(t.right,!1),t=t.parent;continue}if(t.left!==ln&&!Qr(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),yi(t,!0),t.right!==ln&&!Qr(t.right)){t=t.right;continue}}return yi(i.root,!1),n}function XQe(i){let e=i.root;const t=[];let n=0;for(;e!==ln;){if(Qr(e)){yi(e.left,!1),yi(e.right,!1),e=e.parent;continue}if(e.left!==ln&&!Qr(e.left)){e=e.left;continue}if(e.right!==ln&&!Qr(e.right)){e=e.right;continue}t[n++]=e,yi(e,!0)}return yi(i.root,!1),t}function YQe(i,e,t,n,s){let r=i.root,o=0,a=0,l=0;const c=[];let u=0;for(;r!==ln;){if(Qr(r)){yi(r.left,!1),yi(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==ln&&!Qr(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,n);let h=!0;if(e&&r.ownerId&&r.ownerId!==e&&(h=!1),t&&x0e(r)&&(h=!1),s&&!E0e(r)&&(h=!1),h&&(c[u++]=r),yi(r,!0),r.right!==ln&&!Qr(r.right)){o+=r.delta,r=r.right;continue}}return yi(i.root,!1),c}function ZQe(i,e,t,n,s,r,o){let a=i.root,l=0,c=0,u=0,h=0;const d=[];let f=0;for(;a!==ln;){if(Qr(a)){yi(a.left,!1),yi(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Qr(a.left)){if(c=l+a.maxEnd,c<e){yi(a,!0);continue}if(a.left!==ln){a=a.left;continue}}if(u=l+a.start,u>t){yi(a,!0);continue}if(h=l+a.end,h>=e){a.setCachedOffsets(u,h,r);let g=!0;n&&a.ownerId&&a.ownerId!==n&&(g=!1),s&&x0e(a)&&(g=!1),o&&!E0e(a)&&(g=!1),g&&(d[f++]=a)}if(yi(a,!0),a.right!==ln&&!Qr(a.right)){l+=a.delta,a=a.right;continue}}return yi(i.root,!1),d}function Dse(i,e){if(i.root===ln)return e.parent=ln,e.left=ln,e.right=ln,Ci(e,0),i.root=e,i.root;QQe(i,e),bp(e.parent);let t=e;for(;t!==i.root&&pa(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;pa(n)===1?(Ci(t.parent,0),Ci(n,0),Ci(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,JE(i,t)),Ci(t.parent,0),Ci(t.parent.parent,1),eL(i,t.parent.parent))}else{const n=t.parent.parent.left;pa(n)===1?(Ci(t.parent,0),Ci(n,0),Ci(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,eL(i,t)),Ci(t.parent,0),Ci(t.parent.parent,1),JE(i,t.parent.parent))}return Ci(i.root,0),e}function QQe(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(eJe(s,r,n.start+t,n.end+t)<0)if(n.left===ln){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===ln){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=ln,e.right=ln,Ci(e,1)}function Ase(i,e){let t,n;if(e.left===ln?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ln?(t=e.left,n=e):(n=JQe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Ci(t,0),e.detach(),D8(),Dm(t),i.root.parent=ln;return}const s=pa(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ci(n,pa(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ln&&(n.left.parent=n),n.right!==ln&&(n.right.parent=n)),e.detach(),s){bp(t.parent),n!==e&&(bp(n),bp(n.parent)),D8();return}bp(t),bp(t.parent),n!==e&&(bp(n),bp(n.parent));let r;for(;t!==i.root&&pa(t)===0;)t===t.parent.left?(r=t.parent.right,pa(r)===1&&(Ci(r,0),Ci(t.parent,1),JE(i,t.parent),r=t.parent.right),pa(r.left)===0&&pa(r.right)===0?(Ci(r,1),t=t.parent):(pa(r.right)===0&&(Ci(r.left,0),Ci(r,1),eL(i,r),r=t.parent.right),Ci(r,pa(t.parent)),Ci(t.parent,0),Ci(r.right,0),JE(i,t.parent),t=i.root)):(r=t.parent.left,pa(r)===1&&(Ci(r,0),Ci(t.parent,1),eL(i,t.parent),r=t.parent.left),pa(r.left)===0&&pa(r.right)===0?(Ci(r,1),t=t.parent):(pa(r.left)===0&&(Ci(r.right,0),Ci(r,1),JE(i,r),r=t.parent.left),Ci(r,pa(t.parent)),Ci(t.parent,0),Ci(r.left,0),eL(i,t.parent),t=i.root));Ci(t,0),D8()}function JQe(i){for(;i.left!==ln;)i=i.left;return i}function D8(){ln.parent=ln,ln.delta=0,ln.start=0,ln.end=0}function JE(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ln&&(t.left.parent=e),t.parent=e.parent,e.parent===ln?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Dm(e),Dm(t)}function eL(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ln&&(t.right.parent=e),t.parent=e.parent,e.parent===ln?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Dm(e),Dm(t)}function T0e(i){let e=i.end;if(i.left!==ln){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==ln){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Dm(i){i.maxEnd=T0e(i)}function bp(i){for(;i!==ln;){const e=T0e(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function eJe(i,e,t,n){return i===t?e-n:i-t}let RV=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Kt)return nq(this.right);let e=this;for(;e.parent!==Kt&&e.parent.left!==e;)e=e.parent;return e.parent===Kt?Kt:e.parent}prev(){if(this.left!==Kt)return k0e(this.left);let e=this;for(;e.parent!==Kt&&e.parent.right!==e;)e=e.parent;return e.parent===Kt?Kt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const Kt=new RV(null,0);Kt.parent=Kt;Kt.left=Kt;Kt.right=Kt;Kt.color=0;function nq(i){for(;i.left!==Kt;)i=i.left;return i}function k0e(i){for(;i.right!==Kt;)i=i.right;return i}function iq(i){return i===Kt?0:i.size_left+i.piece.length+iq(i.right)}function sq(i){return i===Kt?0:i.lf_left+i.piece.lineFeedCnt+sq(i.right)}function A8(){Kt.parent=Kt}function tL(i,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Kt&&(t.left.parent=e),t.parent=e.parent,e.parent===Kt?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function nL(i,e){const t=e.left;e.left=t.right,t.right!==Kt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Kt?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function ID(i,e){let t,n;if(e.left===Kt?(n=e,t=n.right):e.right===Kt?(n=e,t=n.left):(n=nq(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),A8(),i.root.parent=Kt;return}const s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,_E(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,_E(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Kt&&(n.left.parent=n),n.right!==Kt&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,_E(i,n)),e.detach(),t.parent.left===t){const o=iq(t),a=sq(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Df(i,t.parent,l,c)}}if(_E(i,t.parent),s){A8();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,tL(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,nL(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,tL(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,nL(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,tL(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,nL(i,t.parent),t=i.root));t.color=0,A8()}function Ise(i,e){for(_E(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,tL(i,e)),e.parent.color=0,e.parent.parent.color=1,nL(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,nL(i,e)),e.parent.color=0,e.parent.parent.color=1,tL(i,e.parent.parent))}i.root.color=0}function Df(i,e,t,n){for(;e!==i.root&&e!==Kt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function _E(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=iq(e.left)-e.size_left,n=sq(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const gf=65535;function M0e(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class tJe{constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function Nf(i,e=!0){const t=[0];let n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===13?s+1<r&&i.charCodeAt(s+1)===10?(t[n++]=s+2,s++):t[n++]=s+1:o===10&&(t[n++]=s+1)}return e?M0e(t):t}function nJe(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):u===10?(s++,i[t++]=l+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new tJe(M0e(i),n,s,r,o);return i.length=0,a}class Wa{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class a0{constructor(e,t){this.buffer=e,this.lineStarts=t}}class iJe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Kt&&e.iterate(e.root,n=>(n!==Kt&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class sJe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let s=0;s<n.length;s++){const r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){const s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class rJe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new a0("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Kt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Nf(e[r].buffer));const a=new Wa(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new sJe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=gf,n=t-Math.floor(t/3),s=n*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(o<=n||o+u<s)return r+=c,o+=u,!0;const h=r.replace(/\r\n|\r|\n/g,e);return a.push(new a0(h,Nf(h))),r=c,o=u,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new a0(l,Nf(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new iJe(this,e)}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==Kt;)if(s.left!==Kt&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;const r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const s=e;for(;t!==Kt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(n+1,1),a=s-o;return new Se(n+1,a+1)}return new Se(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Kt){const r=this.getOffsetAt(n+1,1),o=s-e-r;return new Se(n+1,o+1)}else t=t.right;return new Se(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==Kt;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){const e=[];let t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===Kt)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,u=o.start.line,h=o.end.line;let d=c[u]+o.start.column;if(s&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(u===h)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(s=!0,n+=l.substr(d,a-1)):n+=l.substr(d,a),!0;n+=this._EOLNormalized?l.substring(d,Math.max(d,c[u+1]-this._EOLLength)):l.substring(d,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=u+1;f<h;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:n=l.substr(c[h],o.end.column-1)):n=l.substr(c[h],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,s,r,o,a,l,c,u,h){const d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o);let _;const m={line:0,column:0};let v,y;t._wordSeparators?(v=d.buffer.substring(g,p),y=C=>C+g,t.reset(0)):(v=d.buffer,y=C=>C,t.reset(g));do if(_=t.next(v),_){if(y(_.index)>=p)return u;this.positionInBuffer(e,y(_.index)-f,m);const C=this.getLineFeedCnt(e.piece.bufferIndex,r,m),S=m.line===r.line?m.column-r.column+s:m.column+1,x=S+_[0].length;if(h[u++]=t0(new de(n+C,S,n+C,x),_,l),y(_.index)+_[0].length>=p||u>=c)return u}while(_);return u}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new hb(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,h,t,n,s,o,r),r;let d=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,u,f.piece.end);if(p>=1){const m=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=m[u.line+p],C=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,d,C,u,this.positionInBuffer(f,y-v),t,n,s,o,r),o>=s)return r;d+=p}const _=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const m=this.getLineContent(d).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,m,e.endLineNumber,_,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(_),d,_,o,r,n,s),o>=s)return r;d++,l=this.nodeAt2(d,1),f=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){const p=d===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(d).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,p,o,r,n,s),r}const g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,d,g,u,h,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=n.length;let p=-f;for(;(p=n.indexOf(d,p+f))!==-1;)if((!u||dK(u,n,g,p,f))&&(a[o++]=new x2(new de(s,p+1+r,s,p+1+f+r),null),o>=c))return o;return o}let h;t.reset(0);do if(h=t.next(n),h&&(a[o++]=t0(new de(s,h.index+1+r,s,h.index+1+h[0].length+r),h,l),o>=c))return o;while(h);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Kt){const{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<gf){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){const u=[];let h=new Wa(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){const p={line:h.start.line+1,column:0};h=new Wa(h.bufferIndex,p,h.end,this.getLineFeedCnt(h.bufferIndex,p,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){const p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&u.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const d=this.createNewPieces(t);h.length>0&&this.rbInsertRight(s,h);let f=s;for(let g=0;g<d.length;g++)f=this.rbInsertRight(f,d[g]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Kt)return;const n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){const d=this.positionInBuffer(r,n.remainder),f=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){const g=r.next();ID(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,d),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,d,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const u=r.next();for(let d=u;d!==Kt&&d!==o;d=d.next())a.push(d);const h=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Wa(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Df(this,t,-1,-1),t.piece.length===0&&n.push(t)}const s=this.createNewPieces(e);let r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]);let r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){const s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t;let c=s.start.line,u=s.end.line,h=0,d=0,f=0;for(;c<=u&&(h=c+(u-c)/2|0,f=o[h],h!==u);)if(d=o[h+1],l<f)u=h-1;else if(l>=d)c=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;const r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)ID(this,e[t])}createNewPieces(e){if(e.length>gf){const u=[];for(;e.length>gf;){const d=e.charCodeAt(gf-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,gf-1),e=e.substring(gf-1)):(f=e.substring(0,gf),e=e.substring(gf));const g=Nf(f);u.push(new Wa(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new a0(f,g))}const h=Nf(e);return u.push(new Wa(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new a0(e,h)),u}let t=this._buffers[0].buffer.length;const n=Nf(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Wa(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,s="";const r=this._searchCache.get2(e);if(r){n=r.node;const o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==Kt;)if(n.left!==Kt&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Kt;){const o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Kt;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-s,u=a-r,h=n.length+u;e.piece=new Wa(n.bufferIndex,n.start,o,l,h),Df(this,e,u,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-s,u=r-l,h=n.length+u;e.piece=new Wa(n.bufferIndex,o,n.end,a,h),Df(this,e,u,c)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,u=this.getLineFeedCnt(s.bufferIndex,s.start,c),h=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Wa(s.bufferIndex,s.start,c,u,h),Df(this,e,h-a,u-l);const d=new Wa(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=Nf(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),d=h-u;e.piece=new Wa(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,Df(this,e,t.length,d)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==Kt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==Kt;)if(n.left!==Kt&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Kt;){if(n.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){const r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Kt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Kt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Wa(e.piece.bufferIndex,e.piece.start,r,a,o),Df(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Wa(t.piece.bufferIndex,l,t.piece.end,u,c),Df(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let d=0;d<n.length;d++)ID(this,n[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)ID(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new Wa(s.bufferIndex,r,s.end,a,o),Df(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Kt)return t(Kt);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Kt)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,s=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){const n=new RV(t,1);if(n.left=Kt,n.right=Kt,n.parent=Kt,n.size_left=0,n.lf_left=0,this.root===Kt)this.root=n,n.color=0;else if(e.right===Kt)e.right=n,n.parent=e;else{const r=nq(e.right);r.left=n,n.parent=r}return Ise(this,n),n}rbInsertLeft(e,t){const n=new RV(t,1);if(n.left=Kt,n.right=Kt,n.parent=Kt,n.size_left=0,n.lf_left=0,this.root===Kt)this.root=n,n.color=0;else if(e.left===Kt)e.left=n,n.parent=e;else{const s=k0e(e.left);s.right=n,n.parent=s}return Ise(this,n),n}}class gw extends Be{constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new me),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new rJe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,s=this.getPositionAt(e),r=this.getPositionAt(n);return new de(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return s-n+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let u=l;u<c;u++)fr(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=sl(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=t1(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const _=e[p];a&&_._isTracked&&(a=!1);const m=_.range;if(_.text){let x=!0;o||(x=!Gj(_.text),o=x),!s&&x&&(s=v2(_.text)),!r&&x&&(r=Tpe(_.text))}let v="",y=0,C=0,S=0;if(_.text){let x;[y,C,S,x]=Jw(_.text);const E=this.getEOL();x===0||x===(E===`\r
`?2:1)?v=_.text:v=_.text.replace(/\r\n|\r|\n/g,E)}l[p]={sortIndex:p,identifier:_.identifier||null,range:m,rangeOffset:this.getOffsetAt(m.startLineNumber,m.startColumn),rangeLength:this.getValueLengthInRange(m),text:v,eolCount:y,firstLineLength:C,lastLineLength:S,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(gw._sortOpsAscending);let c=!1;for(let p=0,_=l.length-1;p<_;p++){const m=l[p].range.getEndPosition(),v=l[p+1].range.getStartPosition();if(v.isBeforeOrEqual(m)){if(v.isBefore(m))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=n||t?gw._getInverseEditRanges(l):[],h=[];if(t)for(let p=0;p<l.length;p++){const _=l[p],m=u[p];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let v=m.startLineNumber;v<=m.endLineNumber;v++){let y="";v===m.startLineNumber&&(y=this.getLineContent(_.range.startLineNumber),sl(y)!==-1)||h.push({lineNumber:v,oldContent:y})}}let d=null;if(n){let p=0;d=[];for(let _=0;_<l.length;_++){const m=l[_],v=u[_],y=this.getValueInRange(m.range),C=m.rangeOffset+p;p+=m.text.length-y.length,d[_]={sortIndex:m.sortIndex,identifier:m.identifier,range:v,text:y,textChange:new jr(m.rangeOffset,y,C,m.text)}}c||d.sort((_,m)=>_.sortIndex-m.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&h.length>0){h.sort((p,_)=>_.lineNumber-p.lineNumber),g=[];for(let p=0,_=h.length;p<_;p++){const m=h[p].lineNumber;if(p>0&&h[p-1].lineNumber===m)continue;const v=h[p].oldContent,y=this.getLineContent(m);y.length===0||y===v||sl(y)!==-1||g.push(m)}}return this._onDidChangeContent.fire(),new o$e(d,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new de(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],_=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new de(o,a,_.startLineNumber,_.startColumn))),p.text.length>0&&l.push(p.text),o=_.endLineNumber,a=_.endColumn}const c=l.join(""),[u,h,d]=Jw(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:u,firstLineLength:h,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(gw._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const s=e[n],r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new de(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}static _getInverseEditRanges(e){const t=[];let n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,u;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,u=s+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let h;if(l.text.length>0){const d=l.eolCount+1;d===1?h=new de(c,u,c,u+l.firstLineLength):h=new de(c,u,c+d-1,l.lastLineLength+1)}else h=new de(c,u,c,u);n=h.endLineNumber,s=h.endColumn,t.push(h),r=l}return t}static _sortOpsAscending(e,t){const n=de.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=de.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class oJe{constructor(e,t,n,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){const a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=Nf(a);n[r]=new a0(a,l)}const s=new gw(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class D0e{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Kj(e)&&(this.BOM=YUe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=nJe(this._tmpLineStarts,e);this.chunks.push(new a0(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=v2(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Tpe(e)))}finish(e=!0){return this._finish(),new oJe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Nf(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class aJe{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const s=this._store.slice(0,e),r=this._store.slice(e+t),o=lJe(n,this._default);this._store=s.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let s=0;s<t;s++)n[s]=this._default;this._store=J3(this._store,e,n)}}function lJe(i,e){const t=[];for(let n=0;n<i;n++)t[n]=e;return t}class cJe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class PV{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new cJe(e,[t]))}finalize(){return this._tokens}}class uJe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new OV(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class hJe extends uJe{constructor(e,t,n,s){super(e,t),this._textModel=n,this._languageIdCodec=s}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const r=this._textModel.getLineContent(s.lineNumber),o=lx(this._languageIdCodec,n,this.tokenizationSupport,r,!0,s.startState);e.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const s=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=lx(this._languageIdCodec,s,this.tokenizationSupport,o,!0,n),l=new Rr(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const s=e.lineNumber,r=e.column,o=this.getStartState(s);if(!o)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,r-1)+n+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),u=lx(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new Rr(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let s=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=n;o++){const a=this._textModel.getLineContent(o),l=lx(this._languageIdCodec,r,this.tokenizationSupport,a,!0,s);e.add(o,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),n.reverse();const r=this._textModel.getLanguageId();let o=s;for(const a of n)o=lx(this._languageIdCodec,r,this.tokenizationSupport,a,!1,o).endState;return o}}class OV{constructor(e){this.lineCount=e,this._tokenizationStateStore=new dJe,this._invalidEndStatesLineNumbers=new fJe,this._invalidEndStatesLineNumbers.addRange(new nn(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Qn("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new nn(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new nn(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=Jw(t.text);this.acceptChange(new Xt(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new nn(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new Qn("Start state must be defined");return{lineNumber:t,startState:n}}}class dJe{constructor(){this._lineEndStates=new aJe(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class fJe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new nn(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new nn(n.start,e):this._ranges.splice(t,1,new nn(n.start,e),new nn(e+1,n.endExclusive))}}addRange(e){nn.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let s=n;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const r=t-e.length;for(let o=s;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(n===s){const o=new nn(e.start,e.start+t);o.isEmpty||this._ranges.splice(n,0,o)}else{const o=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new nn(o,a+r);l.isEmpty?this._ranges.splice(n,s-n):this._ranges.splice(n,s-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function lx(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenizeEncoded(n,s,r.clone())}catch(a){di(a)}return o||(o=OK(i.encodeLanguageId(e),r)),Rr.convertToEndOffset(o.tokens,n.length),o}class gJe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Ppe(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?tpe(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new PV,n=e1.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var n;const t=(n=this._tokenizerWithStateStore)==null?void 0:n.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Xt(e,t))}}class pJe{constructor(){this._onDidChangeVisibleRanges=new me,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new mJe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class mJe{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(s=>new Xt(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class _Je extends Be{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Ro(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){tr(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class A0e extends Be{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new me),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new me),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class Nse extends A0e{constructor(e,t,n,s){super(t,n,s),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=Z9.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new Rr(n,t,this._languageIdCodec)}return Rr.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return 0}tokenizeLineWithEdit(e,t,n){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const I0e=En("treeSitterParserService"),Rf=new Uint32Array(0).buffer;class hd{static deleteBeginning(e,t){return e===null||e===Rf?e:hd.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Rf)return e;const n=Jf(e),s=n[n.length-2];return hd.delete(e,t,s)}static delete(e,t,n){if(e===null||e===Rf||t===n)return e;const s=Jf(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return Rf;const o=Rr.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const f=n-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,u;a!==t?(s[o<<1]=t,c=o+1<<1,u=t):(c=o<<1,u=a);const h=n-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-h;g>u&&(s[c++]=g,s[c++]=s[(f<<1)+1],u=g)}if(c===s.length)return e;const d=new Uint32Array(c);return d.set(s.subarray(0,c),0),d.buffer}static append(e,t){if(t===Rf)return e;if(e===Rf)return t;if(e===null)return e;if(t===null)return null;const n=Jf(e),s=Jf(t),r=s.length>>>1,o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static insert(e,t,n){if(e===null||e===Rf)return e;const s=Jf(e),r=s.length>>>1;let o=Rr.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}function Jf(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class z2{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Rf)return new Rr(Jf(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=Rse(this._languageIdCodec.encodeLanguageId(e)),new Rr(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?Jf(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=rh.getLanguageId(s[1])!==e),!r)return Rf}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=Rse(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=J3(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=z2._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!z2._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Jf(e),s=Jf(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Se(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=hd.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=hd.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=hd.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=hd.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=hd.insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=hd.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=hd.insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let u=o.startLineNumber;u<=o.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function Rse(i){return(i<<0|0|0|32768|2<<24|1024)>>>0}class rq{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=J3(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const s=rq._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let u=0,h=0;const d=(f,g)=>{f!==h&&(h=f,c[u++]=f,c[u++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),_=r.getMetadata(f),m=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,v=~m>>>0;for(;l<o&&t.getEndOffset(l)<=g;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&d(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)d(t.getEndOffset(l),t.getMetadata(l)&v|_&m),l++;if(l<o)d(p,t.getMetadata(l)&v|_&m),t.getEndOffset(l)===p&&l++;else{const y=Math.min(Math.max(0,l-1),o-1);d(p,t.getMetadata(y)&v|_&m)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new Rr(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}var vJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},I8=function(i,e){return function(t,n){e(t,n,i)}},BI;let FV=BI=class extends C0e{constructor(e,t,n,s,r,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=s,this._languageService=r,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new rq(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new me),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new me),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new me),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new Tt),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Qe.filter(Z9.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new Pse(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new Nse(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var n;const t=this._tokens!==void 0;(n=this._tokens)==null||n.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(s=>{this._emitModelTokensChangedEvent(s)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(s=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Z9.get(this._languageId)?this._tokens instanceof Nse||this.createTokens(!0):this._tokens instanceof Pse||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,s,r]=Jw(t.text);this._semanticTokens.acceptEdit(t.range,n,s,r,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Qn("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this._tokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=BI._findLanguageBoundaries(s,r),l=g2(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,u]=BI._findLanguageBoundaries(s,r-1),h=g2(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(c,u),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new Se(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};FV=BI=vJe([I8(4,yr),I8(5,Yd),I8(6,I0e)],FV);class Pse extends A0e{constructor(e,t,n,s){super(e,t,n),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Ig),this._tokens=new z2(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Ig),this._attachedViewStates=this._register(new Pj),this._register(Es.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new _Je(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){var r;this._tokens.flush(),(r=this._debugBackgroundTokens)==null||r.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new OV(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=Es.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return di(l),[null,null]}return[o,a]},[n,s]=t();if(n&&s?this._tokenizer=new hJe(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var u;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((u=this._tokenizer)==null||u.store.setEndState(a,l))}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new gJe(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n!=null&&n.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new z2(this._languageIdCodec),this._debugBackgroundStates=new OV(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,n,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const r of e.changes){const[o,a]=Jw(r.text);this._tokens.acceptEdit(r.range,o,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(r.range,o,a)}(n=this._debugBackgroundStates)==null||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)==null||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=Xt.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var o,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new PV,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(s)for(const l of r.changes)(o=this._backgroundTokenizer.value)==null||o.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var n,s;const t=new PV;(n=this._tokenizer)==null||n.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(s=this._defaultBackgroundTokenizer)==null||s.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var s;const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(r)&&((s=this._debugBackgroundTokenizer.value)!=null&&s.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new Se(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,n)}get hasTokens(){return this._tokens.hasTokens}}class yJe{constructor(){this.changeType=1}}class xh{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new xh(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new xh(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}}class Ose{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class bJe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class wJe{constructor(e,t,n,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class CJe{constructor(){this.changeType=5}}class pw{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new pw(n,s,r,o)}}class N0e{constructor(e){this.changes=e}}class G0{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=pw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=G0._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new G0(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:s,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}var SJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ND=function(i,e){return function(t,n){e(t,n,i)}},G_;function xJe(i){const e=new D0e;return e.acceptChunk(i),e.finish()}function EJe(i){const e=new D0e;let t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function Fse(i,e){let t;return typeof i=="string"?t=xJe(i):s$e(i)?t=EJe(i):t=i,t.create(e)}let RD=0;const LJe=999,TJe=1e4;class kJe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const cx=()=>{throw new Error("Invalid change accessor")};var ch;let BV=(ch=class extends Be{static resolveOptions(e,t){if(t.detectIndentation){const n=Ese(e,t.tabSize,t.insertSpaces);return new kI({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new kI(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Id(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,s=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new me),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new RJe(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new me),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new me),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new me),this._eventEmitter=this._register(new PJe),this._languageSelectionListener=this._register(new Ig),this._deltaDecorationCallCnt=0,this._attachedViews=new pJe,RD++,this.id="$model"+RD,this.isForSimpleWidget=n.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=fn.parse("inmemory://model/"+RD):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:u}=Fse(e,n.defaultEOL);this._buffer=c,this._bufferDisposable=u,this._options=G_.resolveOptions(this._buffer,n);const h=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new NQe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new zQe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new PQe(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(FV,this,this._bracketPairs,h,this._attachedViews);const d=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new de(1,1,d,this._buffer.getLineLength(d)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=f>G_.LARGE_FILE_SIZE_THRESHOLD||d>G_.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>G_.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>G_._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=kpe(RD),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Bse,this._commandManager=new tq(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new gw([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Be.None}_assertNotDisposed(){if(this._isDisposed)throw new Qn("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new G0(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw t4();const{textBuffer:t,disposable:n}=Fse(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Bse,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new pw([new yJe],this._versionId,!1,!1),this._createContentChanged2(new de(1,1,r,o),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new pw([new CJe],this._versionId,!1,!1),this._createContentChanged2(new de(1,1,r,o),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Dm(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=TJe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new kI({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=Ese(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),p0e(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(Lpe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Qn("Operation would exceed heap memory limits");const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new kJe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Qn("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Qn("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Qn("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Qn("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Qn("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Qn("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const h=this.getLineMaxColumn(r);o>=h&&(o=h)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const h=this.getLineMaxColumn(c);u>=h&&(u=h)}return n===r&&s===o&&a===c&&l===u&&e instanceof de&&!(e instanceof gi)?e:new de(r,o,c,u)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(fr(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new Se(1,1);if(s>o)return new Se(o,this.getLineMaxColumn(o));if(r<=1)return new Se(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new Se(s,a);if(n===1){const l=this._buffer.getLineCharCode(s,r-2);if(fr(l))return new Se(s,r-1)}return new Se(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof Se&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=fr(a),u=fr(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof de&&!(e instanceof gi)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=fr(c),d=fr(u);return!h&&!d?new de(r,o,a,l):r===a&&o===l?new de(r,o-1,a,l-1):h&&d?new de(r,o-1,a,l+1):h?new de(r,o-1,a,l):new de(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new de(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=LJe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>de.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,d)=>h.startLineNumber-d.startLineNumber||h.startColumn-d.startColumn);const c=[];c.push(l.reduce((h,d)=>de.areIntersecting(h,d)?h.plusRange(d):(c.push(h),d)));let u;if(!n&&e.indexOf(`
`)<0){const d=new X1(e,n,s,r).parseSearchRequest();if(!d)return[];u=f=>this.findMatchesLineByLine(f,d,o,a)}else u=h=>fD.findMatches(this,new X1(e,n,s,r),h,o,a);return c.map(u).reduce((h,d)=>h.concat(d),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new X1(e,n,s,r).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let h=new de(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),d=this.findMatchesLineByLine(h,c,o,1);return fD.findNextMatch(this,new X1(e,n,s,r),a,o),d.length>0||(h=new de(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(h,c,o,1),d.length>0)?d[0]:null}return fD.findNextMatch(this,new X1(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return fD.findPreviousMatch(this,new X1(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof u8?e:new u8(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let h=0,d=r.length;h<d;h++){const f=r[h].range,g=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!g&&!p){u=!0;break}}if(!u){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let h=!0;for(let d=0,f=r.length;d<f;d++){const g=r[d].range,p=r[d].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===u&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){h=!1;break}}if(h){const d=new de(c,1,c,u);t.push(new u8(null,d,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,s)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new de(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new de(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,u=o.length;c<u;c++){const h=o[c];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,u=o.length;c<u;c++){const h=o[c],[d]=Jw(h.text);this._onDidChangeDecorations.fire();const f=h.range.startLineNumber,g=h.range.endLineNumber,p=g-f,_=d,m=Math.min(p,_),v=_-p,y=r-l-v+f,C=y,S=y+_,x=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Se(C,1)),this.getOffsetAt(new Se(S,this.getLineMaxColumn(S))),0),E=xh.fromDecorations(x),L=new Ag(E);for(let T=m;T>=0;T--){const D=f+T,I=y+T;L.takeFromEndWhile(P=>P.lineNumber>I);const N=L.takeFromEndWhile(P=>P.lineNumber===I);a.push(new Ose(D,this.getLineContent(I),N))}if(m<p){const T=f+m;a.push(new bJe(T+1,g))}if(m<_){const T=new Ag(E),D=f+m,I=_-m,N=r-l-I+D+1,P=[],O=[];for(let V=0;V<I;V++){const z=N+V;O[V]=this.getLineContent(z),T.takeWhile(K=>K.lineNumber<z),P[V]=T.takeWhile(K=>K.lineNumber===z)}a.push(new wJe(D+1,f+_,O,P))}l+=v}this._emitContentChangedEvent(new pw(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(s=>new Ose(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new N0e(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,Use(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let s=null;try{s=t(n)}catch(r){di(r)}return n.addDecoration=cx,n.changeDecoration=cx,n.changeDecorationOptions=cx,n.removeDecoration=cx,n.deltaDecorations=cx,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),di(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:zse[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(zse[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new de(a,1,l,c),h=this._getDecorationsInRange(u,n,s,r);return F9(h,this._decorationProvider.getDecorationsInRange(u,n,s)),h}getDecorationsInRange(e,t=0,n=!1,s=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,r);return F9(a,this._decorationProvider.getDecorationsInRange(o,t,n,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return xh.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,s){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const s=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(n.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=s!==r,a=DJe(t)!==zI(n);o||a?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,s=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=n.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<o||c<l;){let h=null;if(a<o){do h=this._decorations[t[a++]];while(!h&&a<o);if(h){if(h.options.after){const d=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(h.options.before){const d=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}this._decorationsTree.delete(h),s||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(c<l){if(!h){const m=++this._lastDecorationId,v=`${this._instanceId};${m}`;h=new L0e(v,0,0),this._decorations[v]=h}const d=n[c],f=this._validateRangeRelaxedNoAllocations(d.range),g=Use(d.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);h.ownerId=e,h.reset(r,p,_,f),h.setOptions(g),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(h),u[c]=h.id,c++}else h&&delete this._decorations[h.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return MJe(this.getLineContent(e))+1}},G_=ch,ch._MODEL_SYNC_LIMIT=50*1024*1024,ch.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,ch.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,ch.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,ch.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:oo.tabSize,indentSize:oo.indentSize,insertSpaces:oo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:oo.trimAutoWhitespace,largeFileOptimizations:oo.largeFileOptimizations,bracketPairColorizationOptions:oo.bracketPairColorizationOptions},ch);BV=G_=SJe([ND(4,_K),ND(5,yr),ND(6,Yd),ND(7,oi)],BV);function MJe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}function N8(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function DJe(i){return!!i.after||!!i.before}function zI(i){return!!i.options.after||!!i.options.before}class Bse{constructor(){this._decorationsTree0=new M8,this._decorationsTree1=new M8,this._injectedTextDecorationsTree=new M8}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,n,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,s,r,o){const a=this._decorationsTree0.intervalSearch(e,t,n,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,n,s,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,s,r){const o=e.getVersionId(),a=this._search(t,n,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,s,r){if(n)return this._decorationsTree1.search(e,t,s,r);{const o=this._decorationsTree0.search(e,t,s,r),a=this._decorationsTree1.search(e,t,s,r),l=this._injectedTextDecorationsTree.search(e,t,s,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){zI(e)?this._injectedTextDecorationsTree.insert(e):N8(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){zI(e)?this._injectedTextDecorationsTree.delete(e):N8(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){zI(e)?this._injectedTextDecorationsTree.resolveNode(e,t):N8(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function Yh(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class R0e{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class AJe extends R0e{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:pR.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class IJe{constructor(e){this.position=(e==null?void 0:e.position)??Tm.Center,this.persistLane=e==null?void 0:e.persistLane}}class NJe extends R0e{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?$e.fromHex(e):t.getColor(e.id)}}class U2{static from(e){return e instanceof U2?e:new U2(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Ys{static register(e){return new Ys(e)}static createDynamic(e){return new Ys(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Yh(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Yh(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new AJe(e.overviewRuler):null,this.minimap=e.minimap?new NJe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new IJe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Yh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Yh(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Yh(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?WUe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Yh(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Yh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Yh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Yh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Yh(e.afterContentClassName):null,this.after=e.after?U2.from(e.after):null,this.before=e.before?U2.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}Ys.EMPTY=Ys.register({description:"empty"});const zse=[Ys.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ys.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ys.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ys.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Use(i){return i instanceof Ys?i:Ys.createDynamic(i)}class RJe extends Be{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new me),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,n;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((n=e.overviewRuler)!=null&&n.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class PJe extends Be{constructor(){super(),this._fastEmitter=this._register(new me),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new me),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var OJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},PD=function(i,e){return function(t,n){e(t,n,i)}},By;function y_(i){return i.toString()}let FJe=class{constructor(e,t,n){this.model=e,this._modelEventListeners=new Tt,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}dispose(){this._modelEventListeners.dispose()}};const BJe=ka||Tn?1:2;class zJe{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var tv;let zV=(tv=class extends Be{constructor(e,t,n,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=s,this._onModelAdded=this._register(new me),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new me),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new me),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var d;let n=oo.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(n=f),n<1&&(n=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let r=oo.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=BJe;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=oo.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=oo.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=oo.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let h=oo.bracketPairColorizationOptions;return(d=e.editor)!=null&&d.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:du===3||du===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const s=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);r=By._readModelOptions({editor:o,eol:a},n),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let s=0,r=n.length;s<r;s++){const o=n[s],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],h=this.getCreationOptions(l,c,a.model.isForSimpleWidget);By._setModelOptionsForModel(a.model,h,u)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&il(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(y_(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(y_(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(y_(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=this._instantiationService.createInstance(BV,e,t,r,n);if(n&&this._disposedModels.has(y_(n))){const c=this._removeDisposedModel(n),u=this._undoRedoService.getElements(n),h=this._getSHA1Computer(),d=h.canComputeSHA1(o)?h.computeSHA1(o)===c.sha1:!1;if(d||c.sharesUndoRedoStack){for(const f of u.past)jf(f)&&f.matchesResource(n)&&f.setModel(o);for(const f of u.future)jf(f)&&f.matchesResource(n)&&f.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,f=>jf(f)&&f.matchesResource(n)),d&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=y_(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new FJe(o,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,n,s=!1){let r;return t?r=this._createModelData(e,t,n,s):r=this._createModelData(e,vu,n,s),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=y_(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===hn.file||e.scheme===hn.vscodeRemote||e.scheme===hn.vscodeUserData||e.scheme===hn.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=y_(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)jf(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)jf(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=By.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!s&&(o>a||!l.canComputeSHA1(e))){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>jf(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new zJe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);By._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new UV}},By=tv,tv.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,tv);zV=By=OJe([PD(0,hs),PD(1,Nme),PD(2,_K),PD(3,oi)],zV);const IO=class IO{canComputeSHA1(e){return e.getValueLength()<=IO.MAX_MODEL_SIZE}computeSHA1(e){const t=new iU,n=e.createSnapshot();let s;for(;s=n.read();)t.update(s);return t.digest()}};IO.MAX_MODEL_SIZE=10*1024*1024;let UV=IO;var VV;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(VV||(VV={}));const P0e={Quickaccess:"workbench.contributions.quickaccess"};class UJe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),en(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Lj([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}Or.add(P0e.Quickaccess,new UJe);const VJe={ctrlCmd:!1,alt:!1};var oC;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(oC||(oC={}));var dd;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(dd||(dd={}));var _i;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage",i[i.NextSeparator=8]="NextSeparator",i[i.PreviousSeparator=9]="PreviousSeparator"})(_i||(_i={}));var KR;(function(i){i[i.Title=1]="Title",i[i.Inline=2]="Inline"})(KR||(KR={}));const U4=En("quickInputService");var WJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vse=function(i,e){return function(t,n){e(t,n,i)}};let WV=class extends Be{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Or.as(P0e.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var g,p;const[s,r]=this.getOrInstantiateProvider(e,n==null?void 0:n.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o==null?void 0:o.descriptor;if(o&&r&&a===r){e!==r.prefix&&!(n!=null&&n.preserveValue)&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,n);return}if(r&&!(n!=null&&n.preserveValue)){let _;if(o&&a&&a!==r){const m=o.value.substr(a.prefix.length);m&&(_=`${r.prefix}${m}`)}if(!_){const m=s==null?void 0:s.defaultFilterValue;m===VV.LAST?_=this.lastAcceptedPickerValues.get(r):typeof m=="string"&&(_=`${r.prefix}${m}`)}typeof _=="string"&&(e=_)}const l=(g=o==null?void 0:o.picker)==null?void 0:g.valueSelection,c=(p=o==null?void 0:o.picker)==null?void 0:p.value,u=new Tt,h=u.add(this.quickInputService.createQuickPick({useSeparators:!0}));h.value=e,this.adjustValueSelection(h,r,n),h.placeholder=(n==null?void 0:n.placeholder)??(r==null?void 0:r.placeholder),h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!o,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(n==null?void 0:n.itemActivation)??dd.SECOND),h.contextKey=r==null?void 0:r.contextKey,h.filterValue=_=>_.substring(r?r.prefix.length:0);let d;t&&(d=new Ope,u.add(Qe.once(h.onWillAccept)(_=>{_.veto(),h.hide()}))),u.add(this.registerPickerListeners(h,s,r,e,n));const f=u.add(new HC);if(s&&u.add(s.provide(h,f.token,n==null?void 0:n.providerOptions)),Qe.once(h.onDidHide)(()=>{h.selectedItems.length===0&&f.cancel(),u.dispose(),d==null||d.complete(h.selectedItems.slice(0))}),h.show(),l&&c===e&&(h.valueSelection=l),t)return d==null?void 0:d.p}adjustValueSelection(e,t,n){let s;n!=null&&n.preserveValue?s=[e.value.length,e.value.length]:s=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,s,r){const o=new Tt,a=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return o.add(en(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r==null?void 0:r.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r==null?void 0:r.enabledProviderPrefixes,preserveValue:!0,providerOptions:r==null?void 0:r.providerOptions}):a.value=l})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e,t){const n=this.registry.getQuickAccessProvider(e);if(!n||t&&!(t!=null&&t.includes(n.prefix)))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(n);return s||(s=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,s)),[s,n]}};WV=WJe([Vse(0,U4),Vse(1,oi)],WV);class V4 extends Hg{constructor(e){super(),this._onChange=this._register(new me),this.onChange=this._onChange.event,this._onKeyDown=this._register(new me),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...An.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Zd().setupManagedHover(e.hoverDelegate??Ac("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var HJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class O0e{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}HJe([ds],O0e.prototype,"toString",null);const $Je=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function GJe(i){const e=[];let t=0,n;for(;n=$Je.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));const[,s,r,,o]=n;o?e.push({label:s,href:r,title:o}):e.push({label:s,href:r}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new O0e(e)}const R8={},jJe=new I_e("quick-input-button-icon-");function KJe(i){if(!i)return;let e;const t=i.dark.toString();return R8[t]?e=R8[t]:(e=jJe.nextId(),oU(`.${e}, .hc-light .${e}`,`background-image: ${Pg(i.light||i.dark)}`),oU(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Pg(i.dark)}`),R8[t]=e),e}function iL(i,e,t){let n=i.iconClass||KJe(i.iconPath);return i.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:e,label:"",tooltip:i.tooltip||"",class:n,enabled:!0,run:t}}function qJe(i,e,t){Ko(e);const n=GJe(i);let s=0;for(const r of n.nodes)if(typeof r=="string")e.append(...V0(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=k("executeCommand","Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=Ht("a",{href:r.href,title:o,tabIndex:s++},r.label);a.style.textDecoration="underline";const l=f=>{sWe(f)&&bn.stop(f,!0),t.callback(r.href)},c=t.disposables.add(new pn(a,it.CLICK)).event,u=t.disposables.add(new pn(a,it.KEY_DOWN)).event,h=Qe.chain(u,f=>f.filter(g=>{const p=new xi(g);return p.equals(10)||p.equals(3)}));t.disposables.add(Zo.addTarget(a));const d=t.disposables.add(new pn(a,vi.Tap)).event;Qe.any(c,d,h)(l,null,t.disposables),e.appendChild(a)}}var XJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wse=function(i,e){return function(t,n){e(t,n,i)}};const F0e="inQuickInput",YJe=new Mt(F0e,!1,k("inQuickInput","Whether keyboard focus is inside the quick input control")),ZJe=jn.has(F0e),B0e="quickInputType",QJe=new Mt(B0e,void 0,k("quickInputType","The type of the currently visible quick input")),z0e="cursorAtEndOfQuickInputBox",JJe=new Mt(z0e,!1,k("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),eet=jn.has(z0e),HV={iconClass:An.asClassName(yt.quickInputBack),tooltip:k("quickInput.back","Back"),handle:-1},NO=class NO extends Be{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=NO.noPromptMessage,this._severity=Ps.Ignore,this.onDidTriggerButtonEmitter=this._register(new me),this.onDidHideEmitter=this._register(new me),this.onWillHideEmitter=this._register(new me),this.onDisposeEmitter=this._register(new me),this.visibleDisposables=this._register(new Tt),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Sv;this._ignoreFocusOut=e&&!Sv,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===HV),this._rightButtons=e.filter(t=>t!==HV&&t.location!==KR.Inline),this._inlineButtons=e.filter(t=>t.location===KR.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=oC.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=oC.Other){this.onWillHideEmitter.fire({reason:e})}update(){var s;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Ko(this.ui.widget,this._widget):Ko(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new n1,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this._leftButtons.map((l,c)=>iL(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this._rightButtons.map((l,c)=>iL(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(o,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>iL(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=((s=this.toggles)==null?void 0:s.filter(o=>o instanceof V4))??[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Ko(this.ui.message),qJe(n,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?k("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ps.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};NO.noPromptMessage=k("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let qR=NO;const RO=class RO extends qR{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new me),this.onWillAcceptEmitter=this._register(new me),this.onDidAcceptEmitter=this._register(new me),this.onDidCustomEmitter=this._register(new me),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=dd.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new me),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new me),this.onDidTriggerItemButtonEmitter=this._register(new me),this.onDidTriggerSeparatorButtonEmitter=this._register(new me),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new QT,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?VJe:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(_i.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&tr(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&tr(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(nK(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&tr(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return Ne(this.ui.container,it.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new xi(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&n.inputBox&&(s=this.placeholder||RO.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case dd.NONE:this._itemActivation=dd.FIRST;break;case dd.SECOND:this.ui.list.focus(_i.Second),this._itemActivation=dd.FIRST;break;case dd.LAST:this.ui.list.focus(_i.Last),this._itemActivation=dd.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(_i.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};RO.DEFAULT_ARIA_LABEL=k("quickInputBox.ariaLabel","Type to narrow down results.");let XR=RO,tet=class extends qR{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new me),this.onDidAcceptEmitter=this._register(new me),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},$V=class extends M2{constructor(e,t){super("element",!1,n=>this.getOverrideOptions(n),e,t)}getOverrideOptions(e){const t=(Nr(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};$V=XJe([Wse(0,hs),Wse(1,uk)],$V);$e.white.toString(),$e.white.toString();class GV extends Be{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new me),this._onDidEscape=this._register(new me),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Zo.addTarget(this._element)),[it.CLICK,vi.Tap].forEach(r=>{this._register(Ne(this._element,r,o=>{if(!this.enabled){bn.stop(o);return}this._onDidClick.fire(o)}))}),this._register(Ne(this._element,it.KEY_DOWN,r=>{const o=new xi(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&bn.stop(o,!0)})),this._register(Ne(this._element,it.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(Ne(this._element,it.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(w2(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of V0(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const s=document.createElement("span");s.textContent=n,t.push(s)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var s;if(this._label===e||lw(this._label)&&lw(e)&&Lqe(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(lw(e)){const r=RK(e,{inline:!0});r.dispose();const o=(s=r.element.querySelector("p"))==null?void 0:s.innerHTML;if(o){const a=Vpe(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else Ko(t)}else this.options.supportIcons?Ko(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=Fqe(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...An.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Zd().setupManagedHover(this.options.hoverDelegate??Ac("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class Hse{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=Et(e,Ht(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=$z(this.countFormat,this.count),this.element.title=$z(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const $se="done",Gse="active",P8="infinite",O8="infinite-long-running",jse="discrete",PO=class PO extends Be{constructor(e,t){super(),this.progressSignal=this._register(new Ig),this.workedVal=0,this.showDelayedScheduler=this._register(new Ro(()=>Jpe(this.element),0)),this.longRunningScheduler=this._register(new Ro(()=>this.infiniteLongRunning(),PO.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(Gse,P8,O8,jse),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add($se),this.element.classList.contains(P8)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(jse,$se,O8),this.element.classList.add(Gse,P8),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(O8)}getContainer(){return this.element}};PO.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let jV=PO;const net=k("caseDescription","Match Case"),iet=k("wordsDescription","Match Whole Word"),set=k("regexDescription","Use Regular Expression");class ret extends V4{constructor(e){super({icon:yt.caseSensitive,title:net+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ac("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class oet extends V4{constructor(e){super({icon:yt.wholeWord,title:iet+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ac("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class aet extends V4{constructor(e){super({icon:yt.regex,title:set+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ac("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class cet{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class uet{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new cet(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const ux=Ht;class het extends Hg{constructor(e,t,n){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new me),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Et(e,ux(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=Et(this.element,ux(".ibwrapper"));if(this.input=Et(r,ux(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Et(r,ux("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new VKe(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Et(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new pn(e.ownerDocument,"selectionchange")),a=Qe.filter(o.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===r});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new wg(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Zd().setupManagedHover(Ac("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:rU(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return eK(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&il(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${_g(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Jj(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=Et(s,ux(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?XKe(this.message.content,r):qKe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",Et(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=k("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=k("alertWarningMessage","Warning: {0}",this.message.content):n=k("alertInfoMessage","Info: {0}",this.message.content),I2(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${_g(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=rU(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class det extends het{constructor(e,t,n){const s=k({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),r=k({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(e,t,n),this._onDidFocus=this._register(new me),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new me),this.onDidBlur=this._onDidBlur.event,this.history=new uet(n.history,100);const o=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:r,l=this.placeholder+a;n.showPlaceholderOnFocus&&!eK(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",IR(this.value?this.value:k("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,IR(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const fet=k("defaultLabel","input");class get extends Hg{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Ig),this.additionalToggles=[],this._onDidOptionChange=this._register(new me),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new me),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new me),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new me),this._onKeyUp=this._register(new me),this._onCaseSensitiveKeyDown=this._register(new me),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new me),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||fet,this.showCommonFindToggles=!!n.showCommonFindToggles;const s=n.appendCaseSensitiveLabel||"",r=n.appendWholeWordsLabel||"",o=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,u=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new det(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:n.inputBoxStyles}));const h=this._register(jK());if(this.showCommonFindToggles){this.regex=this._register(new aet({appendTitle:o,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new oet({appendTitle:r,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new ret({appendTitle:s,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=d.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let p=-1;f.equals(17)?p=(g+1)%d.length:f.equals(15)&&(g===0?p=d.length-1:p=g-1),f.equals(9)?(d[g].blur(),this.inputBox.focus()):p>=0&&d[p].focus(),bn.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n==null?void 0:n.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(Ne(this.inputBox.inputElement,"compositionstart",d=>{this.imeSessionInProgress=!0})),this._register(Ne(this.inputBox.inputElement,"compositionend",d=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(n=this.caseSensitive)==null||n.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(n=this.caseSensitive)==null||n.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Tt;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((n=this.wholeWords)==null?void 0:n.width())??0)+(((s=this.regex)==null?void 0:s.width())??0)+this.additionalToggles.reduce((r,o)=>r+o.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const pet=Ht;class met extends Be{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=r=>vr(this.findInput.inputBox.inputElement,it.KEY_DOWN,r),this.onDidChange=r=>this.findInput.onDidChange(r),this.container=Et(this.parent,pet(".quick-input-box")),this.findInput=this._register(new get(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Ps.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Ps.Info?1:e===Ps.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Ps.Info?1:e===Ps.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class _et{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Be.None}}renderElement(e,t,n,s){var l;if((l=n.disposable)==null||l.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new HC,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(c=>this.renderer.renderElement(c,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class vet{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function yet(i,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new vet(i,e.accessibilityProvider)}}class bet{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new _et(l,o));this.list=new Ph(e,t,n,a,yet(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Qe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Qe.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Qe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ma(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var YC=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const wet=!1;var Kse;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(Kse||(Kse={}));let Cet=4;const xet=new me;let Eet=300;const Let=new me;class oq{constructor(e){this.el=e,this.disposables=new Tt}get onPointerMove(){return this.disposables.add(new pn(Nt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new pn(Nt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}YC([ds],oq.prototype,"onPointerMove",null);YC([ds],oq.prototype,"onPointerUp",null);class aq{get onPointerMove(){return this.disposables.add(new pn(this.el,vi.Change)).event}get onPointerUp(){return this.disposables.add(new pn(this.el,vi.End)).event}constructor(e){this.el=e,this.disposables=new Tt}dispose(){this.disposables.dispose()}}YC([ds],aq.prototype,"onPointerMove",null);YC([ds],aq.prototype,"onPointerUp",null);class YR{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}YC([ds],YR.prototype,"onPointerMove",null);YC([ds],YR.prototype,"onPointerUp",null);const qse="pointer-events-disabled";class lc extends Be{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Et(this.el,Ht(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(en(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new pn(this._orthogonalStartDragHandle,"mouseenter")).event(()=>lc.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new pn(this._orthogonalStartDragHandle,"mouseleave")).event(()=>lc.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Et(this.el,Ht(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(en(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new pn(this._orthogonalEndDragHandle,"mouseenter")).event(()=>lc.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new pn(this._orthogonalEndDragHandle,"mouseleave")).event(()=>lc.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=Eet,this.hoverDelayer=this._register(new tk(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new me),this._onDidStart=this._register(new me),this._onDidChange=this._register(new me),this._onDidReset=this._register(new me),this._onDidEnd=this._register(new me),this.orthogonalStartSashDisposables=this._register(new Tt),this.orthogonalStartDragHandleDisposables=this._register(new Tt),this.orthogonalEndSashDisposables=this._register(new Tt),this.orthogonalEndDragHandleDisposables=this._register(new Tt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Et(e,Ht(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Tn&&this.el.classList.add("mac");const s=this._register(new pn(this.el,"mousedown")).event;this._register(s(h=>this.onPointerStart(h,new oq(e)),this));const r=this._register(new pn(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new pn(this.el,"mouseenter")).event;this._register(o(()=>lc.onMouseEnter(this)));const a=this._register(new pn(this.el,"mouseleave")).event;this._register(a(()=>lc.onMouseLeave(this))),this._register(Zo.addTarget(this.el));const l=this._register(new pn(this.el,vi.Start)).event;this._register(l(h=>this.onPointerStart(h,new aq(this.el)),this));const c=this._register(new pn(this.el,vi.Tap)).event;let u;this._register(c(h=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(h);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Cet,this._register(xet.event(h=>{this.size=h,this.layout()}))),this._register(Let.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",wet),this.layout()}onPointerStart(e,t){bn.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new YR(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new YR(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of s)g.classList.add(qse);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Lc(this.el),u=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=Tn?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=Tn?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},h=new Tt;u(),n||this.onDidEnablementChange.event(u,null,h);const d=g=>{bn.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{bn.stop(g,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const p of s)p.classList.remove(qse)};t.onPointerMove(d,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&lc.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&lc.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){lc.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Nr(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const Tet={separatorBorder:$e.transparent};class U0e{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,s;if(e!==this.visible){e?(this.size=_a(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(n=this.view).setVisible)==null||s.call(n,e)}catch(r){console.error("Splitview: Failed to set visible view"),console.error(r)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}}class ket extends U0e{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class Met extends U0e{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Pf;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Pf||(Pf={}));var Xse;(function(i){i.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}i.Split=e;function t(s){return{type:"auto",index:s}}i.Auto=t;function n(s){return{type:"invisible",cachedVisibleSize:s}}i.Invisible=n})(Xse||(Xse={}));class Det extends Be{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Pf.Idle,this._onDidSashChange=this._register(new me),this._onDidSashReset=this._register(new me),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Et(this.el,Ht(".sash-container")),this.viewContainer=Ht(".split-view-container"),this.scrollable=this._register(new jC({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>al(Nt(this.el),s)})),this.scrollableElement=this._register(new L4(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const n=this._register(new pn(this.viewContainer,"scroll")).event;this._register(n(s=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),Et(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Tet),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,r)=>{const o=gc(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((s,r)=>s+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?s+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&s>0&&(o.size=_a(Math.round(a*e/s),o.minimumSize,o.maximumSize))}}else{const s=ma(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Id(Ne(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),Ne(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let u=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];u=(p.minimumSize-p.size)/2,h=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];u=(p.size-p.maximumSize)/2,h=(p.size-p.minimumSize)/2}let d,f;if(!l){const g=ma(s,-1),p=ma(s+1,this.viewItems.length),_=g.reduce((L,T)=>L+(this.viewItems[T].minimumSize-c[T]),0),m=g.reduce((L,T)=>L+(this.viewItems[T].viewMaximumSize-c[T]),0),v=p.length===0?Number.POSITIVE_INFINITY:p.reduce((L,T)=>L+(c[T]-this.viewItems[T].minimumSize),0),y=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((L,T)=>L+(c[T]-this.viewItems[T].viewMaximumSize),0),C=Math.max(_,y),S=Math.min(v,m),x=this.findFirstSnapIndex(g),E=this.findFirstSnapIndex(p);if(typeof x=="number"){const L=this.viewItems[x],T=Math.floor(L.viewMinimumSize/2);d={index:x,limitDelta:L.visible?C-T:C+T,size:L.size}}if(typeof E=="number"){const L=this.viewItems[E],T=Math.floor(L.viewMinimumSize/2);f={index:E,limitDelta:L.visible?S+T:S-T,size:L.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:u,maxDelta:h,alt:l,snapBefore:d,snapAfter:f,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-n,h=this.resize(t,u,s,void 0,void 0,o,a,l,c);if(r){const d=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),g=d?t:t+1,p=this.viewItems[g],_=p.size-p.maximumSize,m=p.size-p.minimumSize,v=d?t-1:t+1;this.resize(v,-h,f,void 0,void 0,_,m)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=_a(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Pf.Idle)throw new Error("Cant modify splitview");this.state=Pf.Busy;try{const n=ma(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=_a(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r)}finally{this.state=Pf.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=_a(n,a.minimumSize,a.maximumSize);const s=ma(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==Pf.Idle)throw new Error("Cant modify splitview");this.state=Pf.Busy;try{const r=Ht(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(d=>this.onViewChange(u,d)),a=en(()=>r.remove()),l=Id(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new ket(r,e,c,l):new Met(r,e,c,l);if(this.viewItems.splice(n,0,u),this.viewItems.length>1){const d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new lc(this.sashContainer,{getHorizontalSashTop:L=>this.getSashPosition(L),getHorizontalSashWidth:this.getSashOrthogonalSize},{...d,orientation:1}):new lc(this.sashContainer,{getVerticalSashLeft:L=>this.getSashPosition(L),getVerticalSashHeight:this.getSashOrthogonalSize},{...d,orientation:0}),g=this.orientation===0?L=>({sash:f,start:L.startY,current:L.currentY,alt:L.altKey}):L=>({sash:f,start:L.startX,current:L.currentX,alt:L.altKey}),_=Qe.map(f.onDidStart,g)(this.onSashStart,this),v=Qe.map(f.onDidChange,g)(this.onSashChange,this),C=Qe.map(f.onDidEnd,()=>this.sashItems.findIndex(L=>L.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const L=this.sashItems.findIndex(P=>P.sash===f),T=ma(L,-1),D=ma(L+1,this.viewItems.length),I=this.findFirstSnapIndex(T),N=this.findFirstSnapIndex(D);typeof I=="number"&&!this.viewItems[I].visible||typeof N=="number"&&!this.viewItems[N].visible||this._onDidSashReset.fire(L)}),x=Id(_,v,C,S,f),E={sash:f,disposable:x};this.sashItems.splice(n-1,0,E)}r.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),s||this.relayout([n],h),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Pf.Idle}}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(u=>u.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=ma(e,-1),h=ma(e+1,this.viewItems.length);if(r)for(const E of r)FB(u,E),FB(h,E);if(s)for(const E of s)iD(u,E),iD(h,E);const d=u.map(E=>this.viewItems[E]),f=u.map(E=>n[E]),g=h.map(E=>this.viewItems[E]),p=h.map(E=>n[E]),_=u.reduce((E,L)=>E+(this.viewItems[L].minimumSize-n[L]),0),m=u.reduce((E,L)=>E+(this.viewItems[L].maximumSize-n[L]),0),v=h.length===0?Number.POSITIVE_INFINITY:h.reduce((E,L)=>E+(n[L]-this.viewItems[L].minimumSize),0),y=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((E,L)=>E+(n[L]-this.viewItems[L].maximumSize),0),C=Math.max(_,y,o),S=Math.min(v,m,a);let x=!1;if(l){const E=this.viewItems[l.index],L=t>=l.limitDelta;x=L!==E.visible,E.setVisible(L,l.size)}if(!x&&c){const E=this.viewItems[c.index],L=t<c.limitDelta;x=L!==E.visible,E.setVisible(L,c.size)}if(x)return this.resize(e,t,n,s,r,o,a);t=_a(t,C,S);for(let E=0,L=t;E<d.length;E++){const T=d[E],D=_a(f[E]+L,T.minimumSize,T.maximumSize),I=D-f[E];L-=I,T.size=D}for(let E=0,L=t;E<g.length;E++){const T=g[E],D=_a(p[E]-L,T.minimumSize,T.maximumSize),I=D-p[E];L+=I,T.size=D}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=ma(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)FB(s,a);for(const a of r)iD(s,a);typeof e=="number"&&iD(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=_a(l.size+n,l.minimumSize,l.maximumSize),u=c-l.size;n-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const h=!(t[l]&&o[l+1]),d=!(n[l]&&r[l+1]);if(h&&d){const f=ma(l,-1),g=ma(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),m=typeof p=="number"&&!this.viewItems[p].visible,v=typeof _=="number"&&!this.viewItems[_].visible;m&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:v&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!d?c.state=1:!h&&d?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),Jr(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const OO=class OO{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=OO.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Et(e,Ht(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=Et(t,Ht(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Ch(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};OO.TemplateId="row";let ZR=OO;function Aet(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return ZR.TemplateId}}}class Iet extends Be{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Qe.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new me,this.onDidLayout=this._onDidLayout.event,this.element=Ht(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Zd().setupManagedHover(Ac("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const FO=class FO{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.columns=s,this.domId=`table_id_${++FO.InstanceCount}`,this.disposables=new Tt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Et(t,Ht(`.monaco-table.${this.domId}`));const a=s.map((u,h)=>this.disposables.add(new Iet(u,h))),l={size:a.reduce((u,h)=>u+h.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new Det(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new ZR(s,r,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new Ph(e,this.domNode,Aet(n),[c],o)),Qe.any(...a.map(u=>u.onDidLayout))(([u,h])=>c.layoutColumn(u,h),null,this.disposables),this.splitview.onDidSashReset(u=>{const h=s.reduce((f,g)=>f+g.weight,0),d=s[u].weight/h*this.cachedWidth;this.splitview.resizeView(u,d)},null,this.disposables),this.styleElement=Lc(this.domNode),this.style($Ye)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};FO.InstanceCount=0;let KV=FO;var Ll;(function(i){i[i.Expanded=0]="Expanded",i[i.Collapsed=1]="Collapsed",i[i.PreserveOrExpanded=2]="PreserveOrExpanded",i[i.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Ll||(Ll={}));var M0;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter"})(M0||(M0={}));class Il extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class lq{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function cq(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function V2(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function F8(i){return typeof i.collapsible=="boolean"}class Net{constructor(e,t,n,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new QT,this._onDidChangeCollapseState=new me,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new me,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new me,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new tk(Ipe),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=s.allowNonCollapsibleParents??!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Fn.empty(),s={}){if(e.length===0)throw new Il(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s=Fn.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,s,r);const l=[...s],c=t[t.length-1],u=new Qf({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,r);const h=t.slice(0,-1),d=(p,_,m)=>{if(o>0)for(let v=0;v<m;v++)p--,_--,this.spliceSmart(e,[...h,p,0],Number.MAX_SAFE_INTEGER,l[_].children,r,o-1)};let f=Math.min(a.children.length,c+n),g=l.length;for(const p of u.changes.sort((_,m)=>m.originalStart-_.originalStart))d(f,g,f-(p.originalStart+p.originalLength)),f=p.originalStart,g=p.modifiedStart-c,this.spliceSimple([...h,f],p.originalLength,Fn.slice(l,g,g+p.modifiedLength),r);d(f,g,f)}spliceSimple(e,t,n=Fn.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),h=[],d=Fn.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,c,h,s)),f=e[e.length-1];let g=0;for(let S=f;S>=0&&S<a.children.length;S--){const x=a.children[S];if(x.visible){g=x.visibleChildIndex;break}}const p=[];let _=0,m=0;for(const S of d)p.push(S),m+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=g+_++);const v=vte(a.children,f,t,p);o?a.lastDiffIds?vte(a.lastDiffIds,f,t,p.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let y=0;for(const S of v)S.visible&&y++;if(y!==0)for(let S=f+p.length;S<a.children.length;S++){const x=a.children[S];x.visible&&(x.visibleChildIndex-=y)}if(a.visibleChildrenCount+=_-y,c&&u){const S=v.reduce((x,E)=>x+(E.visible?E.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,m-S),this.list.splice(l,S,h)}if(v.length>0&&r){const S=x=>{r(x),x.children.forEach(S)};v.forEach(S)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:v});let C=a;for(;C;){if(C.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}C=C.parent}}rerender(e){if(e.length===0)throw new Il(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!F8(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(F8(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!F8(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const c=e.children||Fn.empty(),u=s&&l!==0&&!a.collapsed;let h=0,d=1;for(const f of c){const g=this.createTreeNode(f,a,l,u,r,o);a.children.push(g),d+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=h++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=h,a.visible=l===2?h>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=d):(a.renderNodeCount=0,s&&r.pop()),o==null||o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):cq(n)?(e.filterData=n.data,V2(n.visibility)):(e.filterData=void 0,V2(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Il(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Il(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Il(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:T9e(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class Ret extends gk{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function B8(i){return i instanceof gk?new Ret(i):i}class Pet{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Be.None,this.disposables=new Tt}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,B8(e),t)}onDragOver(e,t,n,s,r,o=!0){const a=this.dnd.onDragOver(B8(e),t&&t.element,n,s,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Zz(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[n]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),p=f.getParentNodeLocation(g),_=f.getNode(p),m=p&&f.getListIndex(p);return this.onDragOver(e,_,m,s,r,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),h=c.getListIndex(u),d=c.getListRenderCount(u);return{...a,feedback:ma(h,h+d)}}drop(e,t,n,s,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(B8(e),t&&t.element,n,s,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function Oet(i,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new Pet(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const n=i(),s=n.getNodeLocation(t),r=n.getParentNodeLocation(s);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class uq{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,s;(s=(n=this.delegate).setDynamicHeight)==null||s.call(n,e.element,t)}}var aC;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(aC||(aC={}));class Fet{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Tt,this.onDidChange=Qe.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}const FL=class FL{constructor(e,t,n,s,r,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=FL.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Be.None,this.disposables=new Tt,this.templateId=e.templateId,this.updateOptions(o),Qe.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=_a(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,s]of this.renderedNodes)this.renderTreeElement(n,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==aC.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,s]of this.renderedNodes)this._renderIndentGuides(n,s);if(this.indentGuidesDisposable.dispose(),t){const n=new Tt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Et(e,Ht(".monaco-tl-row")),n=Et(t,Ht(".monaco-tl-indent")),s=Et(t,Ht(".monaco-tl-twistie")),r=Et(t,Ht(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:Be.None,templateData:o}}renderElement(e,t,n,s){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){var r,o;n.indentGuidesDisposable.dispose(),(o=(r=this.renderer).disposeElement)==null||o.call(r,e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=FL.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...An.asClassNameArray(yt.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...An.asClassNameArray(yt.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Ch(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Tt,s=this.modelProvider();for(;;){const r=s.getNodeLocation(e),o=s.getParentNodeLocation(r);if(!o)break;const a=s.getNode(o),l=Ht(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(en(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(s=>{const r=n.getNodeLocation(s);try{const o=n.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Jr(this.disposables)}};FL.DefaultIndent=8;let qV=FL;class Bet{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Tt,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?n=o?1:0:cq(o)?n=V2(o.visibility):n=o,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:aw.Default,visibility:n};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(s)?s:[s];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:aw.Default,visibility:n};let l;if(this.tree.findMatchType===Iv.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=M_e(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===cg.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:aw.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Jr(this.disposables)}}var cg;(function(i){i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter"})(cg||(cg={}));var Iv;(function(i){i[i.Fuzzy=0]="Fuzzy",i[i.Contiguous=1]="Contiguous"})(Iv||(Iv={}));class zet{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,s,r,o={}){this.tree=e,this.view=n,this.filter=s,this.contextViewProvider=r,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new me,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new me,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new me,this._onDidChangeOpenState=new me,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Tt,this.disposables=new Tt,this._mode=e.options.defaultFindMode??cg.Highlight,this._matchType=e.options.defaultFindMatchType??Iv.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,n,s;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(I2(k("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:k("not found","No elements found.")}):(n=this.widget)==null||n.showMessage({type:2})):((s=this.widget)==null||s.clearMessage(),this.pattern&&I2(k("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!aw.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function Uet(i,e){return i.position===e.position&&V0e(i,e)}function V0e(i,e){return i.node.element===e.node.element&&i.startIndex===e.startIndex&&i.height===e.height&&i.endIndex===e.endIndex}class Vet{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return tr(this.stickyNodes,e.stickyNodes,Uet)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!tr(this.stickyNodes,e.stickyNodes,V0e)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class Wet{constrainStickyScrollNodes(e,t,n){for(let s=0;s<e.length;s++){const r=e[s];if(r.position+r.height>n||s>=t)return e.slice(0,s)}return e}}class Yse extends Be{constructor(e,t,n,s,r,o={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new Wet,this._widget=this._register(new Het(n.getScrollableElement(),n,e,s,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,s=0,r=this.getNextStickyNode(n,void 0,s);for(;r&&(t.push(r),s+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(r),!n)));)r=this.getNextStickyNode(n,r.node,s);const o=this.constrainStickyNodes(t);return o.length?new Vet(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(s,n)}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),s=this.view.getElementTop(n),r=t;return this.view.scrollTop===s-r}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,n);return{node:e,position:o,height:n,startIndex:s,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let n=e,s=this.getParentNode(n);for(;s;){if(s===t)return n;n=s,s=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);s=u?u-c/this.view.renderHeight:null}if(s===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=s*this.view.renderHeight+o;return t+n>l&&t<=l?l-n:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const r=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),r=n+s-1;return{startIndex:n,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let s=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)s+=this.treeDelegate.getHeight(t[r]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class Het{constructor(e,t,n,s,r,o){this.view=t,this.tree=n,this.treeRenderers=s,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Tt,this._rootDomNode=Ht(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=Ht(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new $et(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const r=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,n){const s=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${s}`),r.setAttribute("data-parity",s%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(r,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(d=>d.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(r);l.renderElement(c,e.startIndex,u,e.height);const h=en(()=>{o.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),r.remove()});return{element:r,disposable:h}}setAccessibilityAttributes(e,t,n,s){if(!this.accessibilityProvider)return Be.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:FR(r),a=Vn(c=>{const u=c.readObservable(o);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class $et extends Be{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new me,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new me,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(Ne(this.container,"focus",()=>this.onFocus())),this._register(Ne(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(n=>this.onKeyDown(n))),this._register(this.view.onMouseDown(n=>this.onMouseDown(n))),this._register(this.view.onContextMenu(n=>this.handleContextMenu(n)))}handleContextMenu(e){const t=e.browserEvent.target;if(!R2(t)&&!YE(t)){this.focusedLast()&&this.view.domFocus();return}if(!$f(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!R2(t)&&!YE(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=_a(n,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=s?s.position+s.height+n.height:n.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function OD(i){let e=M0.Unknown;return ZB(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=M0.Twistie:ZB(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=M0.Element:ZB(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=M0.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function Get(i){const e=R2(i.browserEvent.target);return{element:i.element?i.element.element:null,browserEvent:i.browserEvent,anchor:i.anchor,isStickyScroll:e}}function UI(i,e){e(i),i.children.forEach(t=>UI(t,e))}class z8{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new me,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&tr(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>UI(u,c)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>UI(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>UI(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const h=r.get(c);h&&h.visible&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class jet extends Q_e{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(q_e(e.browserEvent.target)||fm(e.browserEvent.target)||pE(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=YE(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(BYe(e.browserEvent.target)||zYe(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),r=this.list.getElementTop(s),o=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!R2(t)&&!YE(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!R2(t)&&!YE(t)){super.onContextMenu(e);return}}}class Ket extends Ph{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new jet(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Cv([...super.getFocus(),...s])),r.length>0&&super.setSelection(Cv([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class W0e{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Qe.filter(Qe.map(this.view.onMouseDblClick,OD),e=>e.target!==M0.Filter)}get onMouseOver(){return Qe.map(this.view.onMouseOver,OD)}get onMouseOut(){return Qe.map(this.view.onMouseOut,OD)}get onContextMenu(){var e;return Qe.any(Qe.filter(Qe.map(this.view.onContextMenu,Get),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??Qe.None)}get onPointer(){return Qe.map(this.view.onPointer,OD)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Qe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??cg.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??Iv.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,s,r={}){this._user=e,this._options=r,this.eventBufferer=new QT,this.onDidChangeFindOpenState=Qe.None,this.onDidChangeStickyScrollFocused=Qe.None,this.disposables=new Tt,this._onWillRefilter=new me,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new me,this.treeDelegate=new uq(n);const o=new Lte,a=new Lte,l=this.disposables.add(new Fet(a.event)),c=new Sme;this.renderers=s.map(g=>new qV(g,()=>this.model,o.event,l,c,r));for(const g of this.renderers)this.disposables.add(g);let u;r.keyboardNavigationLabelProvider&&(u=new Bet(this,r.keyboardNavigationLabelProvider,r.filter),r={...r,filter:u},this.disposables.add(u)),this.focus=new z8(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new z8(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new z8(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new Ket(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...Oet(()=>this.model,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,r),o.input=this.model.onDidChangeCollapseState;const h=Qe.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);h(()=>null,null,this.disposables);const d=this.disposables.add(new me),f=this.disposables.add(new tk(0));if(this.disposables.add(Qe.any(h,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const g=new Set;for(const p of this.focus.getNodes())g.add(p);for(const p of this.selection.getNodes())g.add(p);d.fire([...g.values()])})})),a.input=d.event,r.keyboardSupport!==!1){const g=Qe.chain(this.view.onKeyDown,p=>p.filter(_=>!fm(_.target)).map(_=>new xi(_)));Qe.chain(g,p=>p.filter(_=>_.keyCode===15))(this.onLeftArrow,this,this.disposables),Qe.chain(g,p=>p.filter(_=>_.keyCode===17))(this.onRightArrow,this,this.disposables),Qe.chain(g,p=>p.filter(_=>_.keyCode===10))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new zet(this,this.model,this.view,u,r.contextViewProvider,g),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Qe.None,this.onDidChangeFindMatchType=Qe.None;r.enableStickyScroll&&(this.stickyScrollController=new Yse(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Lc(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aC.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aC.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new Yse(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Qe.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),UC(t)&&((n=this.findController)==null||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=_g(e.listFocusAndSelectionOutline,_g(e.listSelectionOutline,e.listFocusOutline??""));r&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,n,s=$f(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}focusPrevious(e=1,t=!1,n,s=$f(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,s)}focusNextPage(e,t=$f(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=$f(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var n;return((n=this.stickyScrollController)==null?void 0:n.height)??0})}focusLast(e,t=$f(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=$f(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){var e;Jr(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class hq{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Net(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(s,r){return n.sorter.compare(s.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Fn.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=Fn.empty(),n){const s=new Set,r=new Set,o=l=>{var u;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.add(h),this.nodesByIdentity.set(h,c)}(u=n.onDidCreateNode)==null||u.call(n,c)},a=l=>{var u;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.has(h)||this.nodesByIdentity.delete(h)}(u=n.onDidDeleteNode)==null||u.call(n,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=Fn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Fn.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===Ll.Collapsed||t.collapsed===Ll.PreserveOrCollapsed?o=!0:t.collapsed===Ll.Expanded||t.collapsed===Ll.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===Ll.PreserveOrCollapsed||t.collapsed===Ll.PreserveOrExpanded?r=n.collapsed:t.collapsed===Ll.Collapsed?r=!0:t.collapsed===Ll.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Il(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Il(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Il(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Il(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function VI(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Fn.map(Fn.from(i.children),VI),collapsible:i.collapsible,collapsed:i.collapsed}}function WI(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=Fn.consume(Fn.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Fn.map(Fn.concat(s,n),WI),collapsible:i.collapsible,collapsed:i.collapsed}}function XV(i,e=0){let t;return e<i.element.elements.length-1?t=[XV(i,e+1)]:t=Fn.map(Fn.from(i.children),n=>XV(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function Zse(i){return XV(i,0)}function H0e(i,e,t){return i.element===e?{...i,children:t}:{...i,children:Fn.map(Fn.from(i.children),n=>H0e(n,e,t))}}const qet=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class Xet{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new hq(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=Fn.empty(),n){const s=n.diffIdentityProvider&&qet(n.diffIdentityProvider);if(e===null){const g=Fn.map(t,this.enabled?WI:VI);this._setChildren(null,g,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Il(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=Zse(o),u=H0e(c,e,t),h=(this.enabled?WI:VI)(u),d=n.diffIdentityProvider?(g,p)=>n.diffIdentityProvider.getId(g)===n.diffIdentityProvider.getId(p):void 0;if(tr(h.element.elements,o.element.elements,d)){this._setChildren(r,h.children||Fn.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(g=>g===o?h:g);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=Fn.map(n,Zse),r=Fn.map(s,e?WI:VI);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Il(this.user,`Tree element not found: ${e}`);return t}}const Yet=i=>i[i.length-1];class dq{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new dq(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function Zet(i,e){return{splice(t,n,s){e.splice(t,n,s.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function Qet(i,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}}}class Jet{get onDidSplice(){return Qe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Qe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Qe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Yet;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new lq(r=>new dq(s,r)),this.model=new Xet(e,Zet(this.nodeMapper,t),Qet(s,n))}setChildren(e,t=Fn.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var ett=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class fq extends W0e{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,s,r={}){super(e,t,n,s,r),this.user=e}setChildren(e,t=Fn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new hq(e,t,n)}}class $0e{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){var r,o,a,l;n.compressedTreeNode?(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,n.compressedTreeNode,t,n.data,s):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}ett([ds],$0e.prototype,"compressedTreeNodeProvider",null);class ttt{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const r=e[s],o=r.position+r.height;if(s+1<e.length&&o+e[s+1].height>n||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const n=[];for(let c=0;c<e.length;c++){const u=e[c],h=t.getCompressedTreeNode(u.node.element);if(h.element){if(c!==0&&h.element.incompressible)break;n.push(...h.element.elements)}}if(n.length<2)return e[0];const s=e[e.length-1],r={elements:n,incompressible:!1},o={...s.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function ntt(i,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class G0e extends fq{constructor(e,t,n,s,r={}){const o=()=>this,a=new ttt(()=>this.model),l=s.map(c=>new $0e(o,a,c));super(e,t,n,l,{...ntt(o,r),stickyScrollDelegate:a})}setChildren(e,t=Fn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new Jet(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function U8(i){return{...i,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function YV(i,e){return e.parent?e.parent===i?!0:YV(i,e.parent):!1}function itt(i,e){return i===e||YV(i,e)||YV(e,i)}class gq{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new gq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class stt{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...An.asClassNameArray(yt.treeItemLoading)),!0):(t.classList.remove(...An.asClassNameArray(yt.treeItemLoading)),!1)}disposeElement(e,t,n,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Qse(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function Jse(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class rtt extends gk{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function V8(i){return i instanceof gk?new rtt(i):i}class ott{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,V8(e),t)}onDragOver(e,t,n,s,r,o=!0){return this.dnd.onDragOver(V8(e),t&&t.element,n,s,r)}drop(e,t,n,s,r){this.dnd.drop(V8(e),t&&t.element,n,s,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.dnd.dispose()}}function j0e(i){return i&&{...i,collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new ott(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:i.accessibilityProvider&&{...i.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!((t=i.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))},filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{...i.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof i.defaultFindVisibility=="number"?i.defaultFindVisibility:typeof i.defaultFindVisibility>"u"?2:i.defaultFindVisibility(e.element)}}function ZV(i,e){e(i),i.children.forEach(t=>ZV(t,e))}class K0e{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Qe.map(this.tree.onDidChangeFocus,Qse)}get onDidChangeSelection(){return Qe.map(this.tree.onDidChangeSelection,Qse)}get onMouseDblClick(){return Qe.map(this.tree.onMouseDblClick,Jse)}get onPointer(){return Qe.map(this.tree.onPointer,Jse)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new me,this._onDidChangeNodeSlowState=new me,this.nodeMapper=new lq(a=>new gq(a)),this.disposables=new Tt,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?Ll.PreserveOrCollapsed:Ll.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,n,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=U8({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,s,r){const o=new uq(n),a=s.map(c=>new stt(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=j0e(r)||{};return new fq(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,n=!1,s,r){if(typeof this.root.element>"u")throw new Il(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Qe.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Il(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Qe.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await Qe.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await Qe.toPromise(this._onDidRender.event)),s}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Il(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,s){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,s)}async refreshNode(e,t,n){let s;if(this.subTreeRefreshPromises.forEach((r,o)=>{!s&&itt(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,n);e.stale=!1,await Qz.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(Fn.empty());else{const r=this.doGetChildren(e);if(yte(r))s=Promise.resolve(r);else{const o=b2(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=r.finally(()=>o.cancel())}}try{const r=await s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),YT(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return yte(n)?this.processChildren(n):(t=Npe(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(di))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const u of e.children)o.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=r.map(u=>{const h=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const p=U8({element:u,parent:e,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(u)});return h&&p.defaultCollapseState===Ll.PreserveOrExpanded&&l.push(p),p}const d=this.identityProvider.getId(u).toString(),f=a.get(d);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(u,p),p.element=u,p.hasChildren=h,n?f.collapsed?(p.children.forEach(_=>ZV(_,m=>this.nodes.delete(m.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):h&&!f.collapsed&&l.push(p),p}const g=U8({element:u,parent:e,id:d,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(u)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(g),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1||h&&g.defaultCollapseState===Ll.PreserveOrExpanded)&&l.push(g),g});for(const u of o.values())ZV(u,h=>this.nodes.delete(h.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Fn.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class pq{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new pq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class att{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...An.asClassNameArray(yt.treeItemLoading)),!0):(t.classList.remove(...An.asClassNameArray(yt.treeItemLoading)),!1)}disposeElement(e,t,n,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){var r,o;(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Jr(this.disposables)}}function ltt(i){const e=i&&j0e(i);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}class ctt extends K0e{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new lq(l=>new pq(l)),this.filter=a.filter}createTree(e,t,n,s,r){const o=new uq(n),a=s.map(c=>new att(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=ltt(r)||{};return new G0e(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const s=f=>this.identityProvider.getId(f).toString(),r=f=>{const g=new Set;for(const p of f){const _=this.tree.getCompressedTreeNode(p===this.root?null:p);if(_.element)for(const m of _.element.elements)g.add(s(m.element))}return g},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,n);const l=this.getSelection();let c=!1;const u=this.getFocus();let h=!1;const d=f=>{const g=f.element;if(g)for(let p=0;p<g.elements.length;p++){const _=s(g.elements[p].element),m=g.elements[g.elements.length-1].element;o.has(_)&&l.indexOf(m)===-1&&(l.push(m),c=!0),a.has(_)&&u.indexOf(m)===-1&&(u.push(m),h=!0)}f.children.forEach(d)};d(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),h&&this.setFocus(u)}processChildren(e){return this.filter&&(e=Fn.filter(e,t=>{const n=this.filter.filter(t,1),s=utt(n);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function utt(i){return typeof i=="boolean"?i?1:0:cq(i)?V2(i.visibility):V2(i)}class htt extends W0e{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,n){return new hq(e,t,n)}}new Mt("isMac",Tn,k("isMac","Whether the operating system is macOS"));new Mt("isLinux",ka,k("isLinux","Whether the operating system is Linux"));new Mt("isWindows",rl,k("isWindows","Whether the operating system is Windows"));new Mt("isWeb",VC,k("isWeb","Whether the platform is a web browser"));new Mt("isMacNative",Tn&&!VC,k("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Mt("isIOS",Sv,k("isIOS","Whether the operating system is iOS"));new Mt("isMobile",epe,k("isMobile","Whether the platform is a mobile web browser"));new Mt("isDevelopment",!1,!0);new Mt("productQualityType","",k("productQualityType","Quality type of VS Code"));const q0e="inputFocus",dtt=new Mt(q0e,!1,k("inputFocus","Whether keyboard focus is inside an input box"));var Gg=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bi=function(i,e){return function(t,n){e(t,n,i)}};const Qd=En("listService");class ftt{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Tt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)==null||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new J_e(Lc(),"").style(XC)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),eK(e.getHTMLElement())&&this.setLastFocusedList(e),Id(e.onDidFocus(()=>this.setLastFocusedList(e)),en(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const W2=new Mt("listScrollAtBoundary","none");jn.or(W2.isEqualTo("top"),W2.isEqualTo("both"));jn.or(W2.isEqualTo("bottom"),W2.isEqualTo("both"));const X0e=new Mt("listFocus",!0),Y0e=new Mt("treestickyScrollFocused",!1),W4=new Mt("listSupportsMultiselect",!0);jn.and(X0e,jn.not(q0e),Y0e.negate());const mq=new Mt("listHasSelectionOrFocus",!1),_q=new Mt("listDoubleSelection",!1),vq=new Mt("listMultiSelection",!1),H4=new Mt("listSelectionNavigation",!1),gtt=new Mt("listSupportsFind",!0),ptt=new Mt("treeElementCanCollapse",!1),mtt=new Mt("treeElementHasParent",!1),_tt=new Mt("treeElementCanExpand",!1),vtt=new Mt("treeElementHasChild",!1),ytt=new Mt("treeFindOpen",!1),Z0e="listTypeNavigationMode",Q0e="listAutomaticKeyboardNavigation";function $4(i,e){const t=i.createScoped(e.getHTMLElement());return X0e.bindTo(t),t}function G4(i,e){const t=W2.bindTo(i),n=()=>{const s=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&r?t.set("both"):s?t.set("top"):r?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}const d1="workbench.list.multiSelectModifier",HI="workbench.list.openMode",bc="workbench.list.horizontalScrolling",yq="workbench.list.defaultFindMode",bq="workbench.list.typeNavigationMode",QR="workbench.list.keyboardNavigation",Eh="workbench.list.scrollByPage",wq="workbench.list.defaultFindMatchType",H2="workbench.tree.indent",JR="workbench.tree.renderIndentGuides",Lh="workbench.list.smoothScrolling",Wd="workbench.list.mouseWheelScrollSensitivity",Hd="workbench.list.fastScrollSensitivity",eP="workbench.tree.expandMode",tP="workbench.tree.enableStickyScroll",nP="workbench.tree.stickyScrollMaxItemCount";function $d(i){return i.getValue(d1)==="alt"}class btt extends Be{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=$d(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(d1)&&(this.useAltAsMultipleSelectionModifier=$d(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Y_e(e)}isSelectionRangeChangeEvent(e){return Z_e(e)}}function j4(i,e){const t=i.get(hs),n=i.get(eo),s=new Tt;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return n.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(Lh),mouseWheelScrollSensitivity:t.getValue(Wd),fastScrollSensitivity:t.getValue(Hd),multipleSelectionController:e.multipleSelectionController??s.add(new btt(t)),keyboardNavigationEventFilter:Stt(n),scrollByPage:!!t.getValue(Eh)},s]}let ere=class extends Ph{constructor(e,t,n,s,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(bc),[h,d]=c.invokeFunction(j4,r);super(e,t,n,s,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(d),this.contextKeyService=$4(o,this),this.disposables.add(G4(this.contextKeyService,this)),this.listSupportsMultiSelect=W4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),H4.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=mq.bindTo(this.contextKeyService),this.listDoubleSelection=_q.bindTo(this.contextKeyService),this.listMultiSelection=vq.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=$d(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(d1)&&(this._useAltAsMultipleSelectionModifier=$d(l));let p={};if(g.affectsConfiguration(bc)&&this.horizontalScrolling===void 0){const _=!!l.getValue(bc);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(Eh)){const _=!!l.getValue(Eh);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Lh)){const _=!!l.getValue(Lh);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(Wd)){const _=l.getValue(Wd);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(Hd)){const _=l.getValue(Hd);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new J0e(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?mk(e):XC)}};ere=Gg([bi(5,Jn),bi(6,Qd),bi(7,hs),bi(8,oi)],ere);let tre=class extends bet{constructor(e,t,n,s,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(bc),[h,d]=c.invokeFunction(j4,r);super(e,t,n,s,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables=new Tt,this.disposables.add(d),this.contextKeyService=$4(o,this),this.disposables.add(G4(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=W4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),H4.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=$d(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(d1)&&(this._useAltAsMultipleSelectionModifier=$d(l));let p={};if(g.affectsConfiguration(bc)&&this.horizontalScrolling===void 0){const _=!!l.getValue(bc);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(Eh)){const _=!!l.getValue(Eh);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Lh)){const _=!!l.getValue(Lh);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(Wd)){const _=l.getValue(Wd);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(Hd)){const _=l.getValue(Hd);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new J0e(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?mk(e):XC)}dispose(){this.disposables.dispose(),super.dispose()}};tre=Gg([bi(5,Jn),bi(6,Qd),bi(7,hs),bi(8,oi)],tre);let nre=class extends KV{constructor(e,t,n,s,r,o,a,l,c,u){const h=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(bc),[d,f]=u.invokeFunction(j4,o);super(e,t,n,s,r,{keyboardSupport:!1,...d,horizontalScrolling:h}),this.disposables.add(f),this.contextKeyService=$4(a,this),this.disposables.add(G4(this.contextKeyService,this)),this.listSupportsMultiSelect=W4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),H4.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=mq.bindTo(this.contextKeyService),this.listDoubleSelection=_q.bindTo(this.contextKeyService),this.listMultiSelection=vq.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=$d(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(d1)&&(this._useAltAsMultipleSelectionModifier=$d(c));let _={};if(p.affectsConfiguration(bc)&&this.horizontalScrolling===void 0){const m=!!c.getValue(bc);_={..._,horizontalScrolling:m}}if(p.affectsConfiguration(Eh)){const m=!!c.getValue(Eh);_={..._,scrollByPage:m}}if(p.affectsConfiguration(Lh)){const m=!!c.getValue(Lh);_={..._,smoothScrolling:m}}if(p.affectsConfiguration(Wd)){const m=c.getValue(Wd);_={..._,mouseWheelScrollSensitivity:m}}if(p.affectsConfiguration(Hd)){const m=c.getValue(Hd);_={..._,fastScrollSensitivity:m}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new wtt(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?mk(e):XC)}dispose(){this.disposables.dispose(),super.dispose()}};nre=Gg([bi(6,Jn),bi(7,Qd),bi(8,hs),bi(9,oi)],nre);class Cq extends Be{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new me),this.onDidOpen=this._onDidOpen.event,this._register(Qe.filter(this.widget.onDidChangeSelection,n=>$f(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(HI))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(HI)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(HI))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n;this._open(this.getSelectedElement(),n,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class J0e extends Cq{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class wtt extends Cq{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Ctt extends Cq{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Stt(i){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=i.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}let QV=class extends fq{constructor(e,t,n,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:h,disposable:d}=o.invokeFunction(bk,r);super(e,t,n,s,u),this.disposables.add(d),this.internals=new Nv(this,r,h,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};QV=Gg([bi(5,oi),bi(6,Jn),bi(7,Qd),bi(8,hs)],QV);let ire=class extends G0e{constructor(e,t,n,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:h,disposable:d}=o.invokeFunction(bk,r);super(e,t,n,s,u),this.disposables.add(d),this.internals=new Nv(this,r,h,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};ire=Gg([bi(5,oi),bi(6,Jn),bi(7,Qd),bi(8,hs)],ire);let sre=class extends htt{constructor(e,t,n,s,r,o,a,l,c,u){const{options:h,getTypeNavigationMode:d,disposable:f}=a.invokeFunction(bk,o);super(e,t,n,s,r,h),this.disposables.add(f),this.internals=new Nv(this,o,d,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};sre=Gg([bi(6,oi),bi(7,Jn),bi(8,Qd),bi(9,hs)],sre);let rre=class extends K0e{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,u){const{options:h,getTypeNavigationMode:d,disposable:f}=a.invokeFunction(bk,o);super(e,t,n,s,r,h),this.disposables.add(f),this.internals=new Nv(this,o,d,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};rre=Gg([bi(6,oi),bi(7,Jn),bi(8,Qd),bi(9,hs)],rre);let ore=class extends ctt{constructor(e,t,n,s,r,o,a,l,c,u,h){const{options:d,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(bk,a);super(e,t,n,s,r,o,d),this.disposables.add(g),this.internals=new Nv(this,a,f,a.overrideStyles,c,u,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};ore=Gg([bi(7,oi),bi(8,Jn),bi(9,Qd),bi(10,hs)],ore);function eve(i){const e=i.getValue(yq);if(e==="highlight")return cg.Highlight;if(e==="filter")return cg.Filter;const t=i.getValue(QR);if(t==="simple"||t==="highlight")return cg.Highlight;if(t==="filter")return cg.Filter}function tve(i){const e=i.getValue(wq);if(e==="fuzzy")return Iv.Fuzzy;if(e==="contiguous")return Iv.Contiguous}function bk(i,e){const t=i.get(hs),n=i.get(hk),s=i.get(Jn),r=i.get(oi),o=()=>{const d=s.getContextKeyValue(Z0e);if(d==="automatic")return Sd.Automatic;if(d==="trigger"||s.getContextKeyValue(Q0e)===!1)return Sd.Trigger;const g=t.getValue(bq);if(g==="automatic")return Sd.Automatic;if(g==="trigger")return Sd.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(bc),[l,c]=r.invokeFunction(j4,e),u=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(JR);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(H2)=="number"?t.getValue(H2):void 0,renderIndentGuides:h,smoothScrolling:!!t.getValue(Lh),defaultFindMode:eve(t),defaultFindMatchType:tve(t),horizontalScrolling:a,scrollByPage:!!t.getValue(Eh),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(eP)==="doubleClick",contextViewProvider:n,findWidgetStyles:uZe,enableStickyScroll:!!t.getValue(tP),stickyScrollMaxItemCount:Number(t.getValue(nP))}}}let Nv=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=$4(r,e),this.disposables.push(G4(this.contextKeyService,e)),this.listSupportsMultiSelect=W4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),H4.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=gtt.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=mq.bindTo(this.contextKeyService),this.hasDoubleSelection=_q.bindTo(this.contextKeyService),this.hasMultiSelection=vq.bindTo(this.contextKeyService),this.treeElementCanCollapse=ptt.bindTo(this.contextKeyService),this.treeElementHasParent=mtt.bindTo(this.contextKeyService),this.treeElementCanExpand=_tt.bindTo(this.contextKeyService),this.treeElementHasChild=vtt.bindTo(this.contextKeyService),this.treeFindOpen=ytt.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Y0e.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=$d(a),this.updateStyleOverrides(s);const c=()=>{const h=e.getFocus()[0];if(!h)return;const d=e.getNode(h);this.treeElementCanCollapse.set(d.collapsible&&!d.collapsed),this.treeElementHasParent.set(!!e.getParentElement(h)),this.treeElementCanExpand.set(d.collapsible&&d.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(h))},u=new Set;u.add(Z0e),u.add(Q0e),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const h=e.getSelection(),d=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||d.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),e.onDidChangeFocus(()=>{const h=e.getSelection(),d=e.getFocus();this.hasSelectionOrFocus.set(h.length>0||d.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),e.onDidChangeStickyScrollFocused(h=>this.treeStickyScrollFocused.set(h)),a.onDidChangeConfiguration(h=>{let d={};if(h.affectsConfiguration(d1)&&(this._useAltAsMultipleSelectionModifier=$d(a)),h.affectsConfiguration(H2)){const f=a.getValue(H2);d={...d,indent:f}}if(h.affectsConfiguration(JR)&&t.renderIndentGuides===void 0){const f=a.getValue(JR);d={...d,renderIndentGuides:f}}if(h.affectsConfiguration(Lh)){const f=!!a.getValue(Lh);d={...d,smoothScrolling:f}}if(h.affectsConfiguration(yq)||h.affectsConfiguration(QR)){const f=eve(a);d={...d,defaultFindMode:f}}if(h.affectsConfiguration(bq)||h.affectsConfiguration(QR)){const f=n();d={...d,typeNavigationMode:f}}if(h.affectsConfiguration(wq)){const f=tve(a);d={...d,defaultFindMatchType:f}}if(h.affectsConfiguration(bc)&&t.horizontalScrolling===void 0){const f=!!a.getValue(bc);d={...d,horizontalScrolling:f}}if(h.affectsConfiguration(Eh)){const f=!!a.getValue(Eh);d={...d,scrollByPage:f}}if(h.affectsConfiguration(eP)&&t.expandOnlyOnTwistieClick===void 0&&(d={...d,expandOnlyOnTwistieClick:a.getValue(eP)==="doubleClick"}),h.affectsConfiguration(tP)){const f=a.getValue(tP);d={...d,enableStickyScroll:f}}if(h.affectsConfiguration(nP)){const f=Math.max(1,a.getValue(nP));d={...d,stickyScrollMaxItemCount:f}}if(h.affectsConfiguration(Wd)){const f=a.getValue(Wd);d={...d,mouseWheelScrollSensitivity:f}}if(h.affectsConfiguration(Hd)){const f=a.getValue(Hd);d={...d,fastScrollSensitivity:f}}Object.keys(d).length>0&&e.updateOptions(d)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(u)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new Ctt(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?mk(e):XC)}dispose(){this.disposables=Jr(this.disposables)}};Nv=Gg([bi(4,Jn),bi(5,Qd),bi(6,hs)],Nv);const xtt=Or.as(c1.Configuration);xtt.registerConfiguration({id:"workbench",order:7,title:k("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[d1]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[k("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),k("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:k({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[HI]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:k({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[bc]:{type:"boolean",default:!1,description:k("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Eh]:{type:"boolean",default:!1,description:k("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[H2]:{type:"number",default:8,minimum:4,maximum:40,description:k("tree indent setting","Controls tree indentation in pixels.")},[JR]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:k("render tree indent guides","Controls whether the tree should render indent guides.")},[Lh]:{type:"boolean",default:!1,description:k("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Wd]:{type:"number",default:1,markdownDescription:k("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Hd]:{type:"number",default:5,markdownDescription:k("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[yq]:{type:"string",enum:["highlight","filter"],enumDescriptions:[k("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),k("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:k("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[QR]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[k("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),k("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),k("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:k("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:k("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[wq]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[k("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),k("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:k("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[eP]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:k("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[tP]:{type:"boolean",default:!0,description:k("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[nP]:{type:"number",minimum:1,default:7,markdownDescription:k("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[bq]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:k("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class j0 extends Be{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=Et(e,Ht("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=j0.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&il(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){var n,s,r;const e=[];let t=0;for(const o of this.highlights){if(o.end===o.start)continue;if(t<o.start){const c=this.text.substring(t,o.start);this.supportIcons?e.push(...V0(c)):e.push(c),t=o.start}const a=this.text.substring(t,o.end),l=Ht("span.highlight",void 0,...this.supportIcons?V0(a):[a]);o.extraClasses&&l.classList.add(...o.extraClasses),e.push(l),t=o.end}if(t<this.text.length){const o=this.text.substring(t);this.supportIcons?e.push(...V0(o)):e.push(o)}if(Ko(this.domNode,...e),(s=(n=this.options)==null?void 0:n.hoverDelegate)!=null&&s.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const o=((r=this.options)==null?void 0:r.hoverDelegate)??Ac("mouse");this.customHover=this._register(Zd().setupManagedHover(o,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,"⏎"})}}class hx{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||il(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class are extends Be{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new hx(Et(e,Ht(".monaco-icon-label")))),this.labelContainer=Et(this.domNode.element,Ht(".monaco-icon-label-container")),this.nameContainer=Et(this.labelContainer,Ht("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new Ttt(this.nameContainer,!!t.supportIcons)):this.nameNode=new Ett(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??Ac("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough"),n.disabledCommand&&r.push("disabled"),n.title&&(typeof n.title=="string"?o+=n.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n!=null&&n.iconPath){let l;!a||!Nr(a)?(l=Ht(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Pg(n==null?void 0:n.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof j0?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n==null?void 0:n.labelEscapeNewLines),this.setupHover(l.element,n==null?void 0:n.descriptionTitle)):(l.textContent=t&&(n!=null&&n.labelEscapeNewLines)?j0.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(n==null?void 0:n.descriptionTitle)||""),l.empty=!t)}if(n!=null&&n.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(n==null?void 0:n.suffix)??""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(r,o){Vl(o)?r.title=D_e(o):o!=null&&o.markdownNotSupportedFallback?r.title=o.markdownNotSupportedFallback:r.removeAttribute("title")})(e,t);else{const s=Zd().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new hx(aWe(this.nameContainer,Ht("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new hx(Et(e.element,Ht("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new hx(Et(this.labelContainer,Ht("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new j0(Et(t.element,Ht("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new hx(Et(t.element,Ht("span.label-description"))))}return this.descriptionNode}}let Ett=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&il(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Et(this.container,Ht("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Et(this.container,Ht("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&Et(this.container,Ht("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}};function Ltt(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>io.intersect(r,a)).filter(a=>!io.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class Ttt extends Be{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&il(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new j0(Et(this.container,Ht("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",s=Ltt(e,n,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=Ht("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new j0(Et(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&Et(c,Ht("span.label-separator",void 0,n))}}}}const FD=Ht;class Sq extends Be{constructor(e,t,n){super(),this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=Et(e,FD(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(Zd().setupManagedHover(Ac("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&Sq.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let n=1;n<e.length;n++)Et(this.domNode,FD("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[n],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Ch(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const s=BK.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(n!=null&&n.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(n!=null&&n.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(n!=null&&n.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(n!=null&&n.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,s){Et(e,this.createKeyElement(t,n?".highlight":"")),s&&Et(e,FD("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){Et(e,this.createKeyElement(k("unbound","Unbound")))}createKeyElement(e,t=""){const n=FD("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&il(e.firstPart,t.firstPart)&&il(e.chordPart,t.chordPart)}}const lre=new xm(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function ktt(i,e,t=!1){const n=i||"",s=e||"",r=lre.value.collator.compare(n,s);return lre.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function Mtt(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=Dtt(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=ktt(n,s);return l!==0?l:n.localeCompare(s)}function Dtt(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}var K4=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JV=function(i,e){return function(t,n){e(t,n,i)}},eW;const Xu=Ht;class nve{constructor(e,t,n){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new xm(()=>{const s=n.label??"",r=fE(s).text.trim(),o=n.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>wqe(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=n.description,this._saneTooltip=n.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Hr extends nve{constructor(e,t,n,s,r,o){var a,l,c;super(e,t,r),this.fireButtonTriggered=n,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?Qe.map(Qe.filter(this._onChecked.event,u=>u.element===this),u=>u.checked):Qe.None,this._saneDetail=r.detail,this._labelHighlights=(a=r.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=r.highlights)==null?void 0:l.description,this._detailHighlights=(c=r.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var fd;(function(i){i[i.NONE=0]="NONE",i[i.MOUSE_HOVER=1]="MOUSE_HOVER",i[i.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(fd||(fd={}));class j_ extends nve{constructor(e,t,n){super(e,!1,n),this.fireSeparatorButtonTriggered=t,this.separator=n,this.children=new Array,this.focusInsideSeparator=fd.NONE}}class Att{getHeight(e){return e instanceof j_?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Hr?iP.ID:sP.ID}}class Itt{getWidgetAriaLabel(){return k("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof Hr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class ive{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Tt,t.toDisposeTemplate=new Tt,t.entry=Et(e,Xu(".quick-input-list-entry"));const n=Et(t.entry,Xu("label.quick-input-list-label"));t.toDisposeTemplate.add(vr(n,it.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Et(n,Xu("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=Et(n,Xu(".quick-input-list-rows")),r=Et(s,Xu(".quick-input-list-row")),o=Et(s,Xu(".quick-input-list-row"));t.label=new are(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=iK(t.label.element,Xu(".quick-input-list-icon"));const a=Et(r,Xu(".quick-input-list-entry-keybinding"));t.keybinding=new Sq(a,du),t.toDisposeTemplate.add(t.keybinding);const l=Et(o,Xu(".quick-input-list-label-meta"));return t.detail=new are(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=Et(t.entry,Xu(".quick-input-list-separator")),t.actionBar=new wg(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,n){n.toDisposeElement.clear(),n.actionBar.clear()}}var nv;let iP=(nv=class extends ive{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return eW.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(vr(t.checkbox,it.CHANGE,n=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,n){var d;const s=e.element;n.element=s,s.element=n.entry??void 0;const r=s.item;n.checkbox.checked=s.checked,n.toDisposeElement.add(s.onChecked(f=>n.checkbox.checked=f)),n.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;if(r.iconPath){const f=w4(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,g=fn.revive(f);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=Pg(g)}else n.icon.style.backgroundImage="",n.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(u.extraClasses=r.iconClasses,u.italic=r.italic,u.strikethrough=r.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,u),n.keybinding.set(r.keybinding),s.saneDetail){let f;s.saneTooltip||(f={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(s.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";(d=s.separator)!=null&&d.label?(n.separator.textContent=s.separator.label,n.separator.style.display="",this.addItemWithSeparator(s)):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const h=r.buttons;h&&h.length?(n.actionBar.push(h.map((f,g)=>iL(f,`id-${g}`,()=>s.fireButtonTriggered({button:f,item:s.item}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,n)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},eW=nv,nv.ID="quickpickitem",nv);iP=eW=K4([JV(1,Au)],iP);const BO=class BO extends ive{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return BO.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,n){const s=e.element;n.element=s,s.element=n.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const r=s.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;n.icon.style.backgroundImage="",n.icon.className="";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,u),s.saneDetail){let d;s.saneTooltip||(d={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(s.saneDetail,void 0,{matches:l,title:d,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";n.separator.style.display="none",n.entry.classList.add("quick-input-list-separator-border");const h=r.buttons;h&&h.length?(n.actionBar.push(h.map((d,f)=>iL(d,`id-${f}`,()=>s.fireSeparatorButtonTriggered({button:d,separator:s.separator}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,n){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)==null||s.classList.remove("focus-inside"),super.disposeElement(e,t,n)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};BO.ID="quickpickseparator";let sP=BO,$2=class extends Be{constructor(e,t,n,s,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=n,this.accessibilityService=o,this._onKeyDown=new me,this._onLeave=new me,this.onLeave=this._onLeave.event,this._visibleCountObservable=Dn("VisibleCount",0),this.onChangedVisibleCount=Qe.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Dn("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Qe.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Dn("CheckedCount",0),this.onChangedCheckedCount=Qe.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=gV({equalsFn:tr},new Array),this.onChangedCheckedElements=Qe.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new me,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new me,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new me,this._elementCheckedEventBufferer=new QT,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Tt),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Et(this.parent,Xu(".quick-input-list")),this._separatorRenderer=new sP(t),this._itemRenderer=r.createInstance(iP,t),this._tree=this._register(r.createInstance(QV,"QuickInput",this._container,new Att,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof j_?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return Rtt(a,l,c)}},accessibilityProvider:new Itt,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:aC.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return Qe.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof Hr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Qe.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof Hr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new xi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(Ne(this._container,it.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(Ne(this._container,it.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new Rpe(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var n;if(ine(t.browserEvent.target)){e.cancel();return}if(!(!ine(t.browserEvent.relatedTarget)&&mr(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)))try{await e.trigger(async()=>{t.element instanceof Hr&&this.showHover(t.element)})}catch(s){if(!YT(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var n;mr(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const n of this._separatorRenderer.visibleSeparators){const s=n===t;!!(n.focusInsideSeparator&fd.ACTIVE_ITEM)!==s&&(s?n.focusInsideSeparator|=fd.ACTIVE_ITEM:n.focusInsideSeparator&=~fd.ACTIVE_ITEM,this._tree.rerender(n))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&fd.MOUSE_HOVER)||(n.focusInsideSeparator|=fd.MOUSE_HOVER,this._tree.rerender(n))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&fd.MOUSE_HOVER)&&(n.focusInsideSeparator&=~fd.MOUSE_HOVER,this._tree.rerender(n))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(n=>n instanceof Hr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof j_&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((n,s,r)=>{let o;if(s.type==="separator"){if(!s.buttons)return n;t=new j_(r,a=>this._onSeparatorButtonTriggered.fire(a),s),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new Hr(r,this._hasCheckboxes,u=>this._onButtonTriggered.fire(u),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),n;o=c}return n.push(o),n},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const n=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=n==null?void 0:n.parentNode;if(n&&s){const r=n.nextSibling;n.remove(),s.insertBefore(n,r)}},0)}setFocusedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n).filter(n=>!n.hidden);if(this._tree.setFocus(t),e.length>0){const n=this._tree.getFocus()[0];n&&this._tree.reveal(n)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const n of e)t.add(n);for(const n of this._itemElements)n.checked=t.has(n.item)})}focus(e){var t;if(this._itemElements.length)switch(e===_i.Second&&this._itemElements.length<2&&(e=_i.First),e){case _i.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,n=>n.element instanceof Hr);break;case _i.Second:{this._tree.scrollTop=0;let n=!1;this._tree.focusFirst(void 0,s=>s.element instanceof Hr?n?!0:(n=!n,!1):!1);break}case _i.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,n=>n.element instanceof Hr);break;case _i.Next:{const n=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,r=>r.element instanceof Hr?(this._tree.reveal(r.element),!0):!1);const s=this._tree.getFocus();n.length&&n[0]===s[0]&&n[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case _i.Previous:{const n=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,r=>{if(!(r.element instanceof Hr))return!1;const o=this._tree.getParentElement(r.element);return o===null||o.children[0]!==r.element?this._tree.reveal(r.element):this._tree.reveal(o),!0});const s=this._tree.getFocus();n.length&&n[0]===s[0]&&n[0]===this._itemElements[0]&&this._onLeave.fire();break}case _i.NextPage:this._tree.focusNextPage(void 0,n=>n.element instanceof Hr?(this._tree.reveal(n.element),!0):!1);break;case _i.PreviousPage:this._tree.focusPreviousPage(void 0,n=>{if(!(n.element instanceof Hr))return!1;const s=this._tree.getParentElement(n.element);return s===null||s.children[0]!==n.element?this._tree.reveal(n.element):this._tree.reveal(s),!0});break;case _i.NextSeparator:{let n=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,o=>{if(n)return!0;if(o.element instanceof j_)n=!0,this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element.children[0]):this._tree.reveal(o.element,0);else if(o.element instanceof Hr){if(o.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),!0;if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1});const r=this._tree.getFocus()[0];s===r&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,o=>o.element instanceof Hr));break}case _i.PreviousSeparator:{let n,s=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,r=>{if(r.element instanceof j_)s?n||(this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),n=r.element.children[0]):s=!0;else if(r.element instanceof Hr&&!n){if(r.element.separator)this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),n=r.element;else if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1}),n&&this._tree.setFocus([n]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this._inputElements[n.index-1];n.item&&(n.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let n;this._itemElements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?y8(e,fE(s.saneLabel))??void 0:void 0:r=this.matchOnLabel?Ntt(t,fE(s.saneLabel))??void 0:void 0;const o=this.matchOnDescription?y8(e,fE(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?y8(e,fE(s.saneDetail||""))??void 0:void 0;if(r||o||a?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(n=l),n&&!s.hidden&&(s.separator=n,n=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(n=>n instanceof Hr),t=this._allVisibleChecked(e);for(const n of e)n.checkboxDisabled||(n.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof Hr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new Tt;t.add(this._tree.onDidChangeFocus(n=>{n.elements[0]instanceof Hr&&this.showHover(n.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const n of e)n instanceof j_?t.push({element:n,collapsible:!1,collapsed:!1,children:n.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:n,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){Xs(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(n=>n.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,n,s;this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.hoverDelegate).onDidHideHover)==null||n.call(t),(s=this._lastHover)==null||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:r=>{this.linkOpenerDelegate(r)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};K4([ds],$2.prototype,"onDidChangeFocus",null);K4([ds],$2.prototype,"onDidChangeSelection",null);$2=K4([JV(4,oi),JV(5,Rh)],$2);function Ntt(i,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return cre(i,t);const s=i4(t," "),r=t.length-s.length,o=cre(i,s);if(o)for(const a of o){const l=n[a.start+r]+r;a.start+=l,a.end+=l}return o}function cre(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t!==-1?[{start:t,end:t+i.length}]:null}function Rtt(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:Mtt(i.saneSortLabel,e.saneSortLabel,t)}const sve={weight:200,when:jn.and(jn.equals(B0e,"quickPick"),ZJe),metadata:{description:k("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Ya(i,e={}){ik.registerCommandAndKeybindingRule({...sve,...i,secondary:Ptt(i.primary,i.secondary??[],e)})}const rP=Tn?256:2048;function Ptt(i,e,t={}){return t.withAltMod&&e.push(512+i),t.withCtrlMod&&(e.push(rP+i),t.withAltMod&&e.push(512+rP+i)),t.withCmdMod&&Tn&&(e.push(2048+i),t.withCtrlMod&&e.push(2304+i),t.withAltMod&&(e.push(2560+i),t.withCtrlMod&&e.push(2816+i))),e}function Tl(i,e){return t=>{const n=t.get(U4).currentQuickInput;if(n)return e&&n.quickNavigate?n.focus(e):n.focus(i)}}Ya({id:"quickInput.pageNext",primary:12,handler:Tl(_i.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Ya({id:"quickInput.pagePrevious",primary:11,handler:Tl(_i.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Ya({id:"quickInput.first",primary:rP+14,handler:Tl(_i.First)},{withAltMod:!0,withCmdMod:!0});Ya({id:"quickInput.last",primary:rP+13,handler:Tl(_i.Last)},{withAltMod:!0,withCmdMod:!0});Ya({id:"quickInput.next",primary:18,handler:Tl(_i.Next)},{withCtrlMod:!0});Ya({id:"quickInput.previous",primary:16,handler:Tl(_i.Previous)},{withCtrlMod:!0});const ure=k("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),hre=k("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Tn?(Ya({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:Tl(_i.NextSeparator,_i.Next),metadata:{description:ure}}),Ya({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:Tl(_i.NextSeparator)},{withCtrlMod:!0}),Ya({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:Tl(_i.PreviousSeparator,_i.Previous),metadata:{description:hre}}),Ya({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:Tl(_i.PreviousSeparator)},{withCtrlMod:!0})):(Ya({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:Tl(_i.NextSeparator,_i.Next),metadata:{description:ure}}),Ya({id:"quickInput.nextSeparator",primary:2578,handler:Tl(_i.NextSeparator)}),Ya({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:Tl(_i.PreviousSeparator,_i.Previous),metadata:{description:hre}}),Ya({id:"quickInput.previousSeparator",primary:2576,handler:Tl(_i.PreviousSeparator)}));Ya({id:"quickInput.acceptInBackground",when:jn.and(sve.when,jn.or(dtt.negate(),eet)),primary:17,weight:250,handler:i=>{const e=i.get(U4).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var Ott=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},W8=function(i,e){return function(t,n){e(t,n,i)}},tW;const Ha=Ht;var iv;let nW=(iv=class extends Be{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,n,s){super(),this.options=e,this.layoutService=t,this.instantiationService=n,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new me),this.onDidCustomEmitter=this._register(new me),this.onDidTriggerButtonEmitter=this._register(new me),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new me),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new me),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=YJe.bindTo(this.contextKeyService),this.quickInputTypeContext=QJe.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=JJe.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Qe.runAndSubscribe(o4,({window:r,disposables:o})=>this.registerKeyModsListeners(r,o),{window:ui,disposables:this._store})),this._register(GVe(r=>{this.ui&&Nt(this.ui.container)===r&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const n=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[it.KEY_DOWN,it.KEY_UP,it.MOUSE_DOWN])t.add(Ne(e,s,n,!0))}getUI(e){if(this.ui)return e&&Nt(this._container)!==Nt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=Et(this._container,Ha(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const n=Lc(t),s=Et(t,Ha(".quick-input-titlebar")),r=this._register(new wg(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=Et(s,Ha(".quick-input-title")),a=this._register(new wg(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=Et(t,Ha(".quick-input-header")),c=Et(l,Ha("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",k("quickInput.checkAll","Toggle all checkboxes")),this._register(vr(c,it.CHANGE,O=>{const V=c.checked;N.setAllVisibleChecked(V)})),this._register(Ne(c,it.CLICK,O=>{(O.x||O.y)&&f.setFocus()}));const u=Et(l,Ha(".quick-input-description")),h=Et(l,Ha(".quick-input-and-message")),d=Et(h,Ha(".quick-input-filter")),f=this._register(new met(d,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=Et(d,Ha(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new Hse(g,{countFormat:k({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=Et(d,Ha(".quick-input-count"));_.setAttribute("aria-live","polite");const m=new Hse(_,{countFormat:k({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),v=this._register(new wg(l,{hoverDelegate:this.options.hoverDelegate}));v.domNode.classList.add("quick-input-inline-action-bar");const y=Et(l,Ha(".quick-input-action")),C=this._register(new GV(y,this.styles.button));C.label=k("ok","OK"),this._register(C.onDidClick(O=>{this.onDidAcceptEmitter.fire()}));const S=Et(l,Ha(".quick-input-action")),x=this._register(new GV(S,{...this.styles.button,supportIcons:!0}));x.label=k("custom","Custom"),this._register(x.onDidClick(O=>{this.onDidCustomEmitter.fire()}));const E=Et(h,Ha(`#${this.idPrefix}message.quick-input-message`)),L=this._register(new jV(t,this.styles.progressBar));L.getContainer().classList.add("quick-input-progress");const T=Et(t,Ha(".quick-input-html-widget"));T.tabIndex=-1;const D=Et(t,Ha(".quick-input-description")),I=this.idPrefix+"list",N=this._register(this.instantiationService.createInstance($2,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,I));f.setAttribute("aria-controls",I),this._register(N.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",N.getActiveDescendant()??"")})),this._register(N.onChangedAllVisibleChecked(O=>{c.checked=O})),this._register(N.onChangedVisibleCount(O=>{p.setCount(O)})),this._register(N.onChangedCheckedCount(O=>{m.setCount(O)})),this._register(N.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof XR&&this.controller.canSelectMany&&N.clearFocus())},0)}));const P=w2(t);return this._register(P),this._register(Ne(t,it.FOCUS,O=>{const V=this.getUI();if(mr(O.relatedTarget,V.inputContainer)){const z=V.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==z&&this.endOfQuickInputBoxContext.set(z)}mr(O.relatedTarget,V.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Nr(O.relatedTarget)?O.relatedTarget:void 0)},!0)),this._register(P.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(oC.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(O=>{const V=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==V&&this.endOfQuickInputBoxContext.set(V)})),this._register(Ne(t,it.FOCUS,O=>{f.setFocus()})),this._register(vr(t,it.KEY_DOWN,O=>{if(!mr(O.target,T))switch(O.keyCode){case 3:bn.stop(O,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:bn.stop(O,!0),this.hide(oC.Gesture);break;case 2:if(!O.altKey&&!O.ctrlKey&&!O.metaKey){const V=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?V.push("input"):V.push("input[type=text]"),this.getUI().list.displayed&&V.push(".monaco-list"),this.getUI().message&&V.push(".quick-input-message a"),this.getUI().widget){if(mr(O.target,this.getUI().widget))break;V.push(".quick-input-html-widget")}const z=t.querySelectorAll(V.join(", "));O.shiftKey&&O.target===z[0]?(bn.stop(O,!0),N.clearFocus()):!O.shiftKey&&mr(O.target,z[z.length-1])&&(bn.stop(O,!0),z[0].focus())}break;case 10:O.ctrlKey&&(bn.stop(O,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:n,leftActionBar:r,titleBar:s,title:o,description1:D,description2:u,widget:T,rightActionBar:a,inlineActionBar:v,checkAll:c,inputContainer:h,filterContainer:d,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:_,count:m,okContainer:y,ok:C,message:E,customButtonContainer:S,customButton:x,list:N,progressBar:L,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:O=>this.show(O),hide:()=>this.hide(),setVisibilities:O=>this.setVisibilities(O),setEnabled:O=>this.setEnabled(O),setContextKey:O=>this.options.setContextKey(O),linkOpenerDelegate:O=>this.options.linkOpenerDelegate(O)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,Et(this._container,this.ui.container))}pick(e,t={},n=Cu.None){return new Promise((s,r)=>{let o=u=>{var h;o=s,(h=t.onKeyMods)==null||h.call(t,a.keyMods),s(u)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(o(u),a.hide())}}),a.onDidChangeActive(u=>{const h=u[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const h=u[0];h&&(o(h),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const h=a.items.indexOf(u.item);if(h!==-1){const d=a.items.slice(),f=d.splice(h,1),g=a.activeItems.filter(_=>_!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,g&&(a.activeItems=g),a.keepScrollPosition=p}}})),a.onDidTriggerSeparatorButton(u=>{var h;return(h=t.onDidTriggerSeparatorButton)==null?void 0:h.call(t,u)}),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Jr(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,h])=>{l=h,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{r(u),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new XR(t)}createInputBox(){const e=this.getUI(!0);return new tet(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const n=this.controller;this.controller=e,n==null||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Ko(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ps.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Ko(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();HV.tooltip=s?k("quickInput.backWithKeybinding","Back ({0})",s):k("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var r;const t=this.controller;if(!t)return;t.willHide(e);const n=(r=this.ui)==null?void 0:r.container,s=n&&!Ype(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!s){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=o.parentElement??void 0;o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,tW.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},tW=iv,iv.MAX_WIDTH=600,iv);nW=tW=Ott([W8(1,Vm),W8(2,oi),W8(3,Jn)],nW);var Ftt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dx=function(i,e){return function(t,n){e(t,n,i)}};let iW=class extends uGe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(WV))),this._quickAccess}constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=r,this._onShow=this._register(new me),this._onHide=this._register(new me),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(dk).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance($V))},s=this._register(this.instantiationService.createInstance(nW,{...n,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{Nt(e.activeContainer)===Nt(s.container)&&s.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Mt(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,n=Cu.None){return this.controller.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:st(Eie),quickInputForeground:st(EKe),quickInputTitleBackground:st(LKe),widgetBorder:st(cje),widgetShadow:st(ck)},inputBox:n0e,toggle:t0e,countBadge:hZe,button:lZe,progressBar:cZe,keybindingLabel:aZe,list:mk({listBackground:Eie,listFocusBackground:jU,listFocusForeground:GU,listInactiveFocusForeground:GU,listInactiveSelectionIconForeground:v_e,listInactiveFocusBackground:jU,listFocusOutline:bs,listInactiveFocusOutline:bs}),pickerGroup:{pickerGroupBorder:st(TKe),pickerGroupForeground:st(__e)}}}};iW=Ftt([dx(0,oi),dx(1,Jn),dx(2,Au),dx(3,Vm),dx(4,hs)],iW);var rve=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},l0=function(i,e){return function(t,n){e(t,n,i)}};let sW=class extends iW{constructor(e,t,n,s,r,o){super(t,n,s,new DU(e.getContainerDomNode(),r),o),this.host=void 0;const a=G2.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Qe.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Qe.None},get onDidAddContainer(){return Qe.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};sW=rve([l0(1,oi),l0(2,Jn),l0(3,Au),l0(4,sr),l0(5,hs)],sW);let rW=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(sW,e);this.mapEditorToService.set(e,t),Gw(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,n=Cu.None){return this.activeService.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};rW=rve([l0(0,oi),l0(1,sr)],rW);const zO=class zO{static get(e){return e.getContribution(zO.ID)}constructor(e){this.editor=e,this.widget=new oW(this.editor)}dispose(){this.widget.dispose()}};zO.ID="editor.controller.quickInput";let G2=zO;const UO=class UO{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return UO.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};UO.ID="editor.contrib.quickInputWidget";let oW=UO;ame(G2.ID,G2,4);class Btt{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function ztt(i){if(!i||!Array.isArray(i))return[];const e=[];let t=0;for(let n=0,s=i.length;n<s;n++){const r=i[n];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let u=0,h=c.length;u<h;u++)switch(c[u]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new Btt(r.token||"",n,o,a,l)}return e}function Utt(i,e){i.sort((u,h)=>{const d=Gtt(u.token,h.token);return d!==0?d:u.index-h.index});let t=0,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){const u=i.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(n=u.foreground),u.background!==null&&(s=u.background)}const r=new Wtt;for(const u of e)r.getId(u);const o=r.getId(n),a=r.getId(s),l=new xq(t,o,a),c=new Eq(l);for(let u=0,h=i.length;u<h;u++){const d=i[u];c.insert(d.token,d.fontStyle,r.getId(d.foreground),r.getId(d.background))}return new ove(r,c)}const Vtt=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class Wtt{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(Vtt);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=$e.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class ove{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(ztt(e),t)}static createFromParsedTokenTheme(e,t){return Utt(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const s=this._match(t),r=$tt(t);n=(s.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const Htt=/\b(comment|string|regex|regexp)\b/;function $tt(i){const e=i.match(Htt);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function Gtt(i,e){return i<e?-1:i>e?1:0}class xq{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new xq(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class Eq{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));const r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new Eq(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function jtt(i){const e=[];for(let t=1,n=i.length;t<n;t++){const s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const Ktt={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Sh]:"#FFFFFE",[lk]:"#000000",[s_e]:"#E5EBF1",[vk]:"#D3D3D3",[yk]:"#939393",[r_e]:"#ADD6FF4D"}},qtt={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Sh]:"#1E1E1E",[lk]:"#D4D4D4",[s_e]:"#3A3D41",[vk]:"#404040",[yk]:"#707070",[r_e]:"#ADD6FF26"}},Xtt={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Sh]:"#000000",[lk]:"#FFFFFF",[vk]:"#FFFFFF",[yk]:"#FFFFFF"}},Ytt={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Sh]:"#FFFFFF",[lk]:"#292929",[vk]:"#292929",[yk]:"#292929"}},Ztt={IconContribution:"base.contributions.icons"};var dre;(function(i){function e(t,n){let s=t.defaults;for(;An.isThemeIcon(s);){const r=f1.getIcon(s.id);if(!r)return;s=r.defaults}return s}i.getDefinition=e})(dre||(dre={}));var fre;(function(i){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(s=>({format:s.format,location:s.location.toString()}))}}i.toJSONObject=e;function t(n){const s=r=>Vl(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>Vl(r.format)&&Vl(r.location)))return{weight:s(n.weight),style:s(n.style),src:n.src.map(r=>({format:r.format,location:fn.parse(r.location)}))}}i.fromJSONObject=t})(fre||(fre={}));class Qtt{constructor(){this._onDidChange=new me,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:k("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:k("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${An.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}const o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;An.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${An.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!An.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const f1=new Qtt;Or.add(Ztt.IconContribution,f1);function $m(i,e,t,n){return f1.registerIcon(i,e,t,n)}function ave(){return f1}function Jtt(){const i=bpe();for(const e in i){const t="\\"+i[e].toString(16);f1.registerIcon(e,{fontCharacter:t})}}Jtt();const lve="vscode://schemas/icons",cve=Or.as(b4.JSONContribution);cve.registerSchema(lve,f1.getIconSchema());const gre=new Ro(()=>cve.notifySchemaChanged(lve),200);f1.onDidChange(()=>{gre.isScheduled()||gre.schedule()});$m("widget-close",yt.close,k("widgetClose","Icon for the close action in widgets."));$m("goto-previous-location",yt.arrowUp,k("previousChangeIcon","Icon for goto previous editor location."));$m("goto-next-location",yt.arrowDown,k("nextChangeIcon","Icon for goto next editor location."));An.modify(yt.sync,"spin");An.modify(yt.loading,"spin");function ent(i){const e=new Tt,t=e.add(new me),n=ave();return e.add(n.onDidChange(()=>t.fire())),i&&e.add(i.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=i?i.getProductIconTheme():new uve,r={},o=[],a=[];for(const l of n.getIcons()){const c=s.getIcon(l);if(!c)continue;const u=c.font,h=`--vscode-icon-${l.id}-font-family`,d=`--vscode-icon-${l.id}-content`;u?(r[u.id]=u.definition,a.push(`${h}: ${JB(u.id)};`,`${d}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${JB(u.id)}; }`)):(a.push(`${d}: '${c.fontCharacter}'; ${h}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in r){const c=r[l],u=c.weight?`font-weight: ${c.weight};`:"",h=c.style?`font-style: ${c.style};`:"",d=c.src.map(f=>`${Pg(f.location)} format('${f.format}')`).join(", ");o.push(`@font-face { src: ${d}; font-family: ${JB(l)};${u}${h} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class uve{getIcon(e){const t=ave();let n=e.defaults;for(;An.isThemeIcon(n);){const s=t.getIcon(n.id);if(!s)return;n=s.defaults}return n}}const Fp="vs",sL="vs-dark",mw="hc-black",_w="hc-light",hve=Or.as(Zme.ColorContribution),tnt=Or.as(Rme.ThemingContribution);class dve{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?($I(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,$e.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=aW(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,$e.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=hve.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Fp:return mc.LIGHT;case mw:return mc.HIGH_CONTRAST_DARK;case _w:return mc.HIGH_CONTRAST_LIGHT;default:return mc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=aW(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=ove.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=rh.getForeground(r),a=rh.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function $I(i){return i===Fp||i===sL||i===mw||i===_w}function aW(i){switch(i){case Fp:return Ktt;case sL:return qtt;case mw:return Xtt;case _w:return Ytt}}function BD(i){const e=aW(i);return new dve(i,e)}class nnt extends Be{constructor(){super(),this._onColorThemeChange=this._register(new me),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new me),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new uve,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Fp,BD(Fp)),this._knownThemes.set(sL,BD(sL)),this._knownThemes.set(mw,BD(mw)),this._knownThemes.set(_w,BD(_w));const e=this._register(ent(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Fp),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),Mpe(ui,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return lR(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Lc(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),Be.None}_registerShadowDomContainer(e){const t=Lc(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!$I(t.base)&&!$I(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new dve(e,t)),$I(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Fp),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=ui.matchMedia("(forced-colors: active)").matches;if(e!==ow(this._theme.type)){let t;w4(this._theme.type)?t=e?mw:sL:t=e?_w:Fp,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};tnt.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const s=[];for(const o of hve.getColors()){const a=this._theme.getColor(o.id,!0);a&&s.push(`${yK(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(jtt(r)),this._themeCSS=e.join(`
`),this._updateCSS(),Es.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Iu=En("themeService");var int=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},H8=function(i,e){return function(t,n){e(t,n,i)}};let lW=class extends Be{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new me,this._onDidChangeReducedMotion=new me,this._onDidChangeLinkUnderline=new me,this._accessibilityModeEnabledContext=aXe.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const r=ui.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(Ne(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",n),this._layoutService.mainContainer.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const n=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=n,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};lW=int([H8(0,Jn),H8(1,Vm),H8(2,hs)],lW);var q4=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Rd=function(i,e){return function(t,n){e(t,n,i)}},zy,vE;let cW=class{constructor(e,t,n){this._commandService=e,this._keybindingService=t,this._hiddenStates=new uW(n)}createMenu(e,t,n){return new oP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){const s=new oP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),r=s.getActions(n);return s.dispose(),r}resetHiddenStates(e){this._hiddenStates.reset(e)}};cW=q4([Rd(0,jl),Rd(1,eo),Rd(2,F4)],cW);var sv;let uW=(sv=class{constructor(e){this._storageService=e,this._disposables=new Tt,this._onDidChange=new me,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(zy._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,zy._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(zy._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var r;const n=this._isHiddenByDefault(e,t),s=((r=this._data[e.id])==null?void 0:r.includes(t))??!1;return n?!s:s}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const r=this._data[e.id];if(n)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&k9e(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(zy._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},zy=sv,sv._key="menu.hiddenCommands",sv);uW=zy=q4([Rd(0,F4)],uW);class rL{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(qw.getMenuItems(this._id));let t;for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(rL._fillInKbExprKeys(e.when,this._structureContextKeys),$E(e)){if(e.command.precondition&&rL._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;rL._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(qw.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}}let hW=vE=class extends rL{constructor(e,t,n,s,r,o){super(e,n),this._hiddenStates=t,this._commandService=s,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[s,r]=n;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=$E(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=snt(this._id,l?a.command:a,this._hiddenStates);if(l){const u=fve(this._commandService,this._keybindingService,a.command.id,a.when);(o??(o=[])).push(new yg(a.command,a.alt,e,c,u,this._contextKeyService,this._commandService))}else{const u=new vE(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),h=Oo.join(...u.map(d=>d[1]));h.length>0&&(o??(o=[])).push(new GE(a,c,h))}}o&&o.length>0&&t.push([s,o])}return t}_sort(e){return e.sort(vE._compareMenuItems)}static _compareMenuItems(e,t){const n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;const a=n.localeCompare(s);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:vE._compareTitles($E(e)?e.command.title:e.title,$E(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};hW=vE=q4([Rd(3,jl),Rd(4,eo),Rd(5,Jn)],hW);let oP=class{constructor(e,t,n,s,r,o){this._disposables=new Tt,this._menuInfo=new hW(e,t,n.emitEventsForSubmenuChanges,s,r,o);const a=new Ro(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(qw.onDidChangeMenu(h=>{for(const d of this._menuInfo.allMenuIds)if(h.has(d)){a.schedule();break}}));const l=this._disposables.add(new Tt),c=h=>{let d=!1,f=!1,g=!1;for(const p of h)if(d=d||p.isStructuralChange,f=f||p.isEnablementChange,g=g||p.isToggleChange,d&&f&&g)break;return{menu:this,isStructuralChange:d,isEnablementChange:f,isToggleChange:g}},u=()=>{l.add(o.onDidChangeContext(h=>{const d=h.affectsSome(this._menuInfo.structureContextKeys),f=h.affectsSome(this._menuInfo.preconditionContextKeys),g=h.affectsSome(this._menuInfo.toggledContextKeys);(d||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:d,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(h=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new upe({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};oP=q4([Rd(3,jl),Rd(4,eo),Rd(5,Jn)],oP);function snt(i,e,t){const n=VWe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,r=nw({id:`hide/${i.id}/${n}`,label:k("hide.label","Hide '{0}'",s),run(){t.updateHidden(i,n,!0)}}),o=nw({id:`toggle/${i.id}/${n}`,label:s,get checked(){return!t.isHidden(i,n)},run(){t.updateHidden(i,n,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function fve(i,e,t,n=void 0,s=!0){return nw({id:`configureKeybinding/${t}`,label:k("configure keybinding","Configure Keybinding"),enabled:s,run(){const o=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;i.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var rnt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pre=function(i,e){return function(t,n){e(t,n,i)}},dW;const mre="application/vnd.code.resources";var rv;let fW=(rv=class extends Be{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Rg||Dpe)&&this.installWebKitWriteTextWorkaround(),this._register(Qe.runAndSubscribe(o4,({window:n,disposables:s})=>{s.add(Ne(n.document,"copy",()=>this.clearResourcesState()))},{window:ui,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new Ope;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,cE().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async n=>{(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)})};this._register(Qe.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:n})=>{n.add(Ne(t,"click",e)),n.add(Ne(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await cE().navigator.clipboard.writeText(e)}catch(n){console.error(n)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=tK(),n=t.activeElement,s=t.body.appendChild(Ht("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Nr(n)&&n.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await cE().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await cE().navigator.clipboard.read();for(const n of t)if(n.types.includes(`web ${mre}`)){const s=await n.getType(`web ${mre}`);return JSON.parse(await s.text()).map(o=>fn.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return Gpe(e.substring(0,dW.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},dW=rv,rv.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,rv);fW=dW=rnt([pre(0,Vm),pre(1,Ih)],fW);const Lq=En("clipboardService");var ont=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ant=function(i,e){return function(t,n){e(t,n,i)}};const oL="data-keybinding-context";class Tq{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const VO=class VO extends Tq{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};VO.INSTANCE=new VO;let lC=VO;const BL=class BL extends Tq{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=XE.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),n.fire(new vre(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...Fn.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new vre(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(BL._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(BL._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};BL._keyPrefix="config.";let gW=BL;class lnt{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class _re{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class vre{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class cnt{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function unt(i,e){return i.allKeysContainedIn(new Set(Object.keys(e)))}class gve extends Be{constructor(e){super(),this._onDidChangeContext=this._register(new m2({merge:t=>new cnt(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new lnt(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new hnt(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new _re(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new _re(e))}getContext(e){return this._isDisposed?lC.INSTANCE:this.getContextValuesContainer(dnt(e))}dispose(){super.dispose(),this._isDisposed=!0}}let pW=class extends gve{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new gW(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?lC.INSTANCE:this._contexts.get(e)||lC.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new Tq(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};pW=ont([ant(0,hs)],pW);class hnt extends gve{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Ig),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(oL)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(oL,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;unt(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(oL),super.dispose())}getContextValuesContainer(e){return this._isDisposed?lC.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function dnt(i){for(;i;){if(i.hasAttribute(oL)){const e=i.getAttribute(oL);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}function fnt(i,e,t){i.get(Jn).createKey(String(e),gnt(t))}function gnt(i){return Yge(i,e=>{if(typeof e=="object"&&e.$mid===1)return fn.revive(e).toString();if(e instanceof fn)return e.toString()})}Na.registerCommand("_setContext",fnt);Na.registerCommand({id:"getContextKeyInfo",handler(){return[...Mt.all()].sort((i,e)=>i.key.localeCompare(e.key))},metadata:{description:k("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Na.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(const t of Mt.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});let pnt=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},yre=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(s.key,s),s.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new pnt(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(const[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}};class ZC{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}const mnt=!1;class bre extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class aP{constructor(e=new ZC,t=!1,n,s=mnt){this._services=e,this._strict=t,this._parent=n,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(oi,this),this._globalGraph=s?(n==null?void 0:n._globalGraph)??new yre(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Jr(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)lpe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const n=this,s=new class extends aP{dispose(){n._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t==null||t.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const n=aL.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:o=>{if(s)throw Rj("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,s;return e instanceof pd?(n=aL.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=aL.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){const s=fh.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof pd)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof pd?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var l;const s=new yre(c=>c.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),r++>1e3)throw new bre(s);for(const u of fh.getServiceDependencies(c.desc.ctor)){const h=this._getServiceInstanceOrDescriptor(u.id);if(h||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(u.id)),h instanceof pd){const d={id:u.id,desc:h,_trace:c._trace.branch(u.id,!0)};s.insertEdge(c,d),o.push(d)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new bre(s);break}for(const{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof pd){const d=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,d)}s.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof pd)return this._createServiceInstance(e,t,n,s,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],s,r,o){if(s){const a=new aP(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new mVe(()=>{const u=a._createInstance(t,n,r);for(const[h,d]of l){const f=u[h];if(typeof f=="function")for(const g of d)g.disposable=f.apply(u,g.listener)}return l.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!c.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=l.get(h);return g||(g=new tl,l.set(h,g)),(_,m,v)=>{if(c.isInitialized)return c.value[h](_,m,v);{const y={listener:[_,m,v],disposable:void 0},C=g.push(y);return en(()=>{var x;C(),(x=y.disposable)==null||x.dispose()})}}}if(h in u)return u[h];const d=c.value;let f=d[h];return typeof f!="function"||(f=f.bind(d),u[h]=f),f},set(u,h,d){return c.value[h]=d,!0},getPrototypeOf(u){return t.prototype}})}else{const a=this._createInstance(t,n,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const El=class El{static traceInvocation(e,t){return e?new El(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):El._None}static traceCreation(e,t){return e?new El(1,t.name):El._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new El(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;El._totals+=e;let t=!1;function n(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,u,h]of o._dep)if(u&&h){t=!0,a.push(`${l}CREATES -> ${c}`);const d=n(r+1,h);d&&a.push(d)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${El._totals.toFixed(2)}ms)`];(e>2||t)&&El.all.add(s.join(`
`))}};El.all=new Set,El._None=new class extends El{constructor(){super(0,null)}stop(){}branch(){return this}},El._totals=0;let aL=El;const _nt=new Set([hn.inMemory,hn.vscodeSourceControl,hn.walkThrough,hn.walkThroughSnippet,hn.vscodeChatCodeBlock]);class vnt{constructor(){this._byResource=new Hl,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new Hl,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){const n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,s=!1;const r=this._byResource.get(e);r&&(n=r.delete(t));const o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){var t,n;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??Fn.empty():fn.isUri(e)?((n=this._byResource.get(e))==null?void 0:n.values())??Fn.empty():Fn.map(Fn.concat(...this._byOwner.values()),s=>s[1])}}class ynt{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Hl,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(_nt.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===dc.Error?t.errors+=1:n===dc.Warning?t.warnings+=1:n===dc.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Mp{constructor(){this._onMarkerChanged=new upe({delay:0,merge:Mp._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new vnt,this._stats=new ynt(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(I9e(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=Mp._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:h,relatedInformation:d,tags:f}=n;if(o)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,h=h>0?h:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:h,relatedInformation:d,tags:f}}changeAll(e,t){const n=[],s=this._data.values(e);if(s)for(const r of s){const o=Fn.first(r);o&&(n.push(o.resource),this._data.delete(o.resource,e))}if(Q3(t)){const r=new Hl;for(const{resource:o,marker:a}of t){const l=Mp._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),n.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(Mp._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!n){const o=[];for(const a of this._data.values())for(const l of a)if(Mp._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(Mp._accept(c,s)){const u=a.push(c);if(r>0&&u===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Hl;for(const n of e)for(const s of n)t.set(s,!0);return Array.from(t.keys())}}class bnt extends Be{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=Ar.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Ar.createEmptyModel(this.logService);const e=Or.as(c1.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const s of e){const r=n[s],o=t[s];r!==void 0?this._configurationModel.setValue(s,r):o?this._configurationModel.setValue(s,o.default):this._configurationModel.removeValue(s)}}}const X4=En("accessibilitySignalService"),Cn=class Cn{static register(e){return new Cn(e.fileName)}constructor(e){this.fileName=e}};Cn.error=Cn.register({fileName:"error.mp3"}),Cn.warning=Cn.register({fileName:"warning.mp3"}),Cn.success=Cn.register({fileName:"success.mp3"}),Cn.foldedArea=Cn.register({fileName:"foldedAreas.mp3"}),Cn.break=Cn.register({fileName:"break.mp3"}),Cn.quickFixes=Cn.register({fileName:"quickFixes.mp3"}),Cn.taskCompleted=Cn.register({fileName:"taskCompleted.mp3"}),Cn.taskFailed=Cn.register({fileName:"taskFailed.mp3"}),Cn.terminalBell=Cn.register({fileName:"terminalBell.mp3"}),Cn.diffLineInserted=Cn.register({fileName:"diffLineInserted.mp3"}),Cn.diffLineDeleted=Cn.register({fileName:"diffLineDeleted.mp3"}),Cn.diffLineModified=Cn.register({fileName:"diffLineModified.mp3"}),Cn.chatRequestSent=Cn.register({fileName:"chatRequestSent.mp3"}),Cn.chatResponseReceived1=Cn.register({fileName:"chatResponseReceived1.mp3"}),Cn.chatResponseReceived2=Cn.register({fileName:"chatResponseReceived2.mp3"}),Cn.chatResponseReceived3=Cn.register({fileName:"chatResponseReceived3.mp3"}),Cn.chatResponseReceived4=Cn.register({fileName:"chatResponseReceived4.mp3"}),Cn.clear=Cn.register({fileName:"clear.mp3"}),Cn.save=Cn.register({fileName:"save.mp3"}),Cn.format=Cn.register({fileName:"format.mp3"}),Cn.voiceRecordingStarted=Cn.register({fileName:"voiceRecordingStarted.mp3"}),Cn.voiceRecordingStopped=Cn.register({fileName:"voiceRecordingStopped.mp3"}),Cn.progress=Cn.register({fileName:"progress.mp3"});let Li=Cn;class wnt{constructor(e){this.randomOneOf=e}}const tn=class tn{constructor(e,t,n,s,r,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=n,this.settingsKey=s,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o}static register(e){const t=new wnt("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new tn(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return tn._signals.add(n),n}};tn._signals=new Set,tn.errorAtPosition=tn.register({name:k("accessibilitySignals.positionHasError.name","Error at Position"),sound:Li.error,announcementMessage:k("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),tn.warningAtPosition=tn.register({name:k("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:Li.warning,announcementMessage:k("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),tn.errorOnLine=tn.register({name:k("accessibilitySignals.lineHasError.name","Error on Line"),sound:Li.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:k("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),tn.warningOnLine=tn.register({name:k("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Li.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:k("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),tn.foldedArea=tn.register({name:k("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Li.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:k("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),tn.break=tn.register({name:k("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Li.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:k("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),tn.inlineSuggestion=tn.register({name:k("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Li.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),tn.terminalQuickFix=tn.register({name:k("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Li.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:k("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),tn.onDebugBreak=tn.register({name:k("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Li.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:k("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),tn.noInlayHints=tn.register({name:k("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Li.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:k("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),tn.taskCompleted=tn.register({name:k("accessibilitySignals.taskCompleted","Task Completed"),sound:Li.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:k("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),tn.taskFailed=tn.register({name:k("accessibilitySignals.taskFailed","Task Failed"),sound:Li.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:k("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),tn.terminalCommandFailed=tn.register({name:k("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Li.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:k("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),tn.terminalCommandSucceeded=tn.register({name:k("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:Li.success,announcementMessage:k("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),tn.terminalBell=tn.register({name:k("accessibilitySignals.terminalBell","Terminal Bell"),sound:Li.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:k("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),tn.notebookCellCompleted=tn.register({name:k("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Li.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:k("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),tn.notebookCellFailed=tn.register({name:k("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Li.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:k("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),tn.diffLineInserted=tn.register({name:k("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Li.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),tn.diffLineDeleted=tn.register({name:k("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Li.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),tn.diffLineModified=tn.register({name:k("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Li.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),tn.chatRequestSent=tn.register({name:k("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Li.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:k("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),tn.chatResponseReceived=tn.register({name:k("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Li.chatResponseReceived1,Li.chatResponseReceived2,Li.chatResponseReceived3,Li.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),tn.progress=tn.register({name:k("accessibilitySignals.progress","Progress"),sound:Li.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:k("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),tn.clear=tn.register({name:k("accessibilitySignals.clear","Clear"),sound:Li.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:k("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),tn.save=tn.register({name:k("accessibilitySignals.save","Save"),sound:Li.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:k("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),tn.format=tn.register({name:k("accessibilitySignals.format","Format"),sound:Li.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:k("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),tn.voiceRecordingStarted=tn.register({name:k("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Li.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),tn.voiceRecordingStopped=tn.register({name:k("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Li.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let md=tn;class Cnt extends Be{constructor(e,t=[]){super(),this.logger=new HWe([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const Snt=[];function xnt(){return Snt.slice(0)}class Ent{getParseResult(e){}}var Jd=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ys=function(i,e){return function(t,n){e(t,n,i)}};class Lnt{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new me}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let mW=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Qze(new Lnt(t))):Promise.reject(new Error("Model not found"))}};mW=Jd([ys(0,Jo)],mW);const WO=class WO{show(){return WO.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};WO.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let _W=WO;class Tnt{withProgress(e,t,n){return t({report:()=>{}})}}class knt{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Mnt{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),ui.confirm(n)}async prompt(e){var s;let t;if(this.doConfirm(e.message,e.detail)){const r=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),t=await((s=r[0])==null?void 0:s.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:Ps.Error,message:e,detail:t})}}const zL=class zL{info(e){return this.notify({severity:Ps.Info,message:e})}warn(e){return this.notify({severity:Ps.Warning,message:e})}error(e){return this.notify({severity:Ps.Error,message:e})}notify(e){switch(e.severity){case Ps.Error:console.error(e.message);break;case Ps.Warning:console.warn(e.message);break;default:console.log(e.message);break}return zL.NO_OP}prompt(e,t,n,s){return zL.NO_OP}status(e,t){return Be.None}};zL.NO_OP=new pGe;let vW=zL,yW=class{constructor(e){this._onWillExecuteCommand=new me,this._onDidExecuteCommand=new me,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Na.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};yW=Jd([ys(0,oi)],yW);let cC=class extends NXe{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new Tt;g.add(Ne(f,it.KEY_DOWN,p=>{const _=new xi(p);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),g.add(Ne(f,it.KEY_UP,p=>{const _=new xi(p);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new Dnt(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const p=this._domNodeListeners[g];p.domNode===f&&(this._domNodeListeners.splice(g,1),p.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},u=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(u)),o.listCodeEditors().forEach(c);const h=f=>{a(f.getContainerDomNode())},d=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(h)),this._register(o.onDiffEditorRemove(d)),o.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,n,s){return Id(Na.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(n=>({keybinding:Xz(n.keybinding,du),command:n.command??null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),en(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ik.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new qE(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return ui.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new qie(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=N2.resolveKeybinding(a,du);for(const c of l)n[s++]=new qie(c,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new Ev(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new N2([t],du)}};cC=Jd([ys(0,Jn),ys(1,jl),ys(2,a1),ys(3,Nh),ys(4,Ih),ys(5,sr)],cC);class Dnt extends Be{constructor(e,t){super(),this.domNode=e,this._register(t)}}function wre(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof fn)}let lP=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new me,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new bnt(e);this._configuration=new M4(t.reload(),Ar.createEmptyModel(e),Ar.createEmptyModel(e),Ar.createEmptyModel(e),Ar.createEmptyModel(e),Ar.createEmptyModel(e),new Hl,Ar.createEmptyModel(e),new Hl,e),t.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,s=wre(e)?e:wre(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new kXe({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,n,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};lP=Jd([ys(0,Ih)],lP);let bW=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new me,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(r,o)=>s.affectsConfiguration(o)})})}getValue(e,t,n){const s=Se.isIPosition(t)?t:null,r=s?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,s):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};bW=Jd([ys(0,hs),ys(1,Jo),ys(2,yr)],bW);let wW=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:ka||Tn?`
`:`\r
`}};wW=Jd([ys(0,hs)],wW);class Ant{publicLog2(){}}const UL=class UL{constructor(){const e=fn.from({scheme:UL.SCHEME,authority:"model",path:"/"});this.workspace={id:qXe,folders:[new jXe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===UL.SCHEME?this.workspace.folders[0]:null}};UL.SCHEME="inmemory";let CW=UL;function cP(i,e,t){if(!e||!(i instanceof lP))return;const n=[];Object.keys(e).forEach(s=>{CXe(s)&&n.push([`editor.${s}`,e[s]]),t&&SXe(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}let SW=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const n=Array.isArray(e)?e:FK.convert(e),s=new Map;for(const a of n){if(!(a instanceof W0))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(EXe.replaceMove(de.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:$z(uV.bulkEditServiceSummary,r,o),isApplied:r>0}}};SW=Jd([ys(0,Jo)],SW);class Int{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return NK(e)}}let xW=class extends pXe{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,n)}};xW=Jd([ys(0,Vm),ys(1,sr)],xW);class Nnt{constructor(){this._neverEmitter=new me,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class Rnt extends pV{constructor(){super()}}class Pnt extends Cnt{constructor(){super(new WWe)}}let EW=class extends EV{constructor(e,t,n,s,r,o){super(e,t,n,s,r,o),this.configure({blockMouse:!1})}};EW=Jd([ys(0,a1),ys(1,Nh),ys(2,hk),ys(3,eo),ys(4,o1),ys(5,Jn)],EW);const LW={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let TW=class extends LU{constructor(e,t,n,s,r){super(LW,e,t,n,s,r)}};TW=Jd([ys(0,Jo),ys(1,pK),ys(2,Ih),ys(3,Yd),ys(4,pi)],TW);class Ont{async playSignal(e,t){}}Pn(Ih,Pnt,0);Pn(hs,lP,0);Pn(pK,bW,0);Pn(Nme,wW,0);Pn(GXe,CW,0);Pn(zXe,Int,0);Pn(a1,Ant,0);Pn(Bme,Mnt,0);Pn($me,knt,0);Pn(Nh,vW,0);Pn(h1,Mp,0);Pn(yr,Rnt,0);Pn(Iu,nnt,0);Pn(Jo,zV,0);Pn(g0e,DV,0);Pn(Jn,pW,0);Pn(UXe,Tnt,0);Pn(zK,_W,0);Pn(F4,rZe,0);Pn(_k,TW,0);Pn(yXe,SW,0);Pn(XXe,Nnt,0);Pn(a4,mW,0);Pn(Rh,lW,0);Pn(Qd,ftt,0);Pn(jl,yW,0);Pn(eo,cC,0);Pn(U4,rW,0);Pn(hk,xW,0);Pn(dk,MV,0);Pn(Lq,fW,0);Pn(Wg,EW,0);Pn(o1,cW,0);Pn(X4,Ont,0);Pn(I0e,Ent,0);var Ft;(function(i){const e=new ZC;for(const[l,c]of bne())e.set(l,c);const t=new aP(e,!0);e.set(oi,t);function n(l){s||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof pd?t.invokeFunction(u=>u.get(l)):c}i.get=n;let s=!1;const r=new me;function o(l){if(s)return t;s=!0;for(const[u,h]of bne())e.get(u)||e.set(u,h);for(const u in l)if(l.hasOwnProperty(u)){const h=En(u);e.get(h)instanceof pd&&e.set(h,l[u])}const c=xnt();for(const u of c)try{t.createInstance(u)}catch(h){di(h)}return r.fire(),t}i.initialize=o;function a(l){if(s)return l();const c=new Tt,u=c.add(r.event(()=>{u.dispose(),c.add(l())}));return c}i.withServices=a})(Ft||(Ft={}));function Fnt(i,e){return new Bnt(i,e)}class Bnt extends bR{constructor(e,t){const n={amdModuleId:LW.amdModuleId,esmModuleLocation:LW.esmModuleLocation,label:t.label};super(n,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?z9(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.$fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of n)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const kq={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class gu{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!gu._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,r=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new gu(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,n,s){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const h=u.startLineNumber===t?u.startColumn:n,d=u.endLineNumber===t?u.endColumn:s;r[o++]=new gu(h,d,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=gu._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class Cre{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class uP{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new Cre(t,this.stopOffsets[s],this.classNames.join(" "),uP._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new Cre(t,e-1,this.classNames.join(" "),uP._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class znt{static normalize(e,t){if(t.length===0)return[];const n=[],s=new uP;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,u=l.endColumn;const h=l.className,d=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);fr(p)&&c--}if(u>1){const p=e.charCodeAt(u-2);fr(p)&&u--}const f=c-1,g=u-2;r=s.consumeLowerThan(f,r,n),s.count===0&&(r=f),s.insert(g,h,d)}return s.consumeLowerThan(1073741824,r,n),n}}class gr{constructor(e,t,n,s){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class pve{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class QC{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_,m,v,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(gu.compare),this.tabSize=u,this.startVisibleColumn=h,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=m,this.fontLigatures=v,this.selectionsOnLine=y&&y.sort((x,E)=>x.startOffset<E.startOffset?-1:1);const C=Math.abs(g-d),S=Math.abs(f-d);C<S?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&gu.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class mve{constructor(e,t){this.partIndex=e,this.charIndex=t}}class _d{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,s){const r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=_d.getPartIndex(t),s=_d.getCharIndex(t);return new mve(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const s=(e<<16|n<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const p=r+o>>>1,_=this._data[p];if(_===s)return p;_>s?o=p:r=p}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;const c=_d.getPartIndex(a),u=_d.getCharIndex(a),h=_d.getPartIndex(l);let d;c!==h?d=t:d=_d.getCharIndex(l);const f=n-u,g=d-n;return f<=g?r:o}}class kW{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function Mq(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,s=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,n++));e.appendString("</span>");const r=new _d(1,t+n);return r.setColumnInfo(1,t,0,0),new kW(r,!1,s)}return e.appendString("<span><span></span></span>"),new kW(new _d(0,0),!1,0)}return qnt(Wnt(i),e)}class Unt{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}}function Y4(i){const e=new v4(1e4),t=Mq(i,e);return new Unt(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Vnt{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=h,this.containsRTL=d,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=_}}function Wnt(i){const e=i.lineContent;let t,n,s;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=e.length-i.stopRenderingLineAfter,s=i.stopRenderingLineAfter):(t=!1,n=0,s=e.length);let r=Hnt(e,i.containsRTL,i.lineTokens,i.fauxIndentLength,s);i.renderControlCharacters&&!i.isBasicASCII&&(r=Gnt(e,r)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3&&!i.continuesWithWrappedLine)&&(r=jnt(i,e,s,r));let o=0;if(i.lineDecorations.length>0){for(let a=0,l=i.lineDecorations.length;a<l;a++){const c=i.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=Knt(e,s,r,i.lineDecorations)}return i.containsRTL||(r=$nt(e,r,!i.isBasicASCII||i.fontLigatures)),new Vnt(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,s,t,n,r,o,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function Hnt(i,e,t,n,s){const r=[];let o=0;n>0&&(r[o++]=new gr(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=n)continue;const h=t.getClassName(l);if(u>=s){const f=e?v2(i.substring(a,s)):!1;r[o++]=new gr(s,h,0,f);break}const d=e?v2(i.substring(a,u)):!1;r[o++]=new gr(u,h,0,d),a=u}return r}function $nt(i,e,t){let n=0;const s=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const u=l.type,h=l.metadata,d=l.containsRTL;let f=-1,g=n;for(let p=n;p<c;p++)i.charCodeAt(p)===32&&(f=p),f!==-1&&p-g>=50&&(s[r++]=new gr(f+1,u,h,d),g=f+1,f=-1);g!==c&&(s[r++]=new gr(c,u,h,d))}else s[r++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,u=c-n;if(u>50){const h=l.type,d=l.metadata,f=l.containsRTL,g=Math.ceil(u/50);for(let p=1;p<g;p++){const _=n+p*50;s[r++]=new gr(_,h,d,f)}s[r++]=new gr(c,h,d,f)}else s[r++]=l;n=c}return s}function _ve(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function Gnt(i,e){const t=[];let n=new gr(0,"",0,!1),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=i.charCodeAt(s);_ve(a)&&(s>n.endIndex&&(n=new gr(s,r.type,r.metadata,r.containsRTL),t.push(n)),n=new gr(s+1,"mtkcontrol",r.metadata,!1),t.push(n))}s>n.endIndex&&(n=new gr(o,r.type,r.metadata,r.containsRTL),t.push(n))}return t}function jnt(i,e,t,n){const s=i.continuesWithWrappedLine,r=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,u=i.renderWhitespace===1,h=i.renderWhitespace===3,d=i.renderSpaceWidth!==i.spaceWidth,f=[];let g=0,p=0,_=n[p].type,m=n[p].containsRTL,v=n[p].endIndex;const y=n.length;let C=!1,S=sl(e),x;S===-1?(C=!0,S=t,x=t):x=t1(e);let E=!1,L=0,T=c&&c[L],D=a%o;for(let N=r;N<t;N++){const P=e.charCodeAt(N);T&&N>=T.endOffset&&(L++,T=c&&c[L]);let O;if(N<S||N>x)O=!0;else if(P===9)O=!0;else if(P===32)if(u)if(E)O=!0;else{const V=N+1<t?e.charCodeAt(N+1):0;O=V===32||V===9}else O=!0;else O=!1;if(O&&c&&(O=!!T&&T.startOffset<=N&&T.endOffset>N),O&&h&&(O=C||N>x),O&&m&&N>=S&&N<=x&&(O=!1),E){if(!O||!l&&D>=o){if(d){const V=g>0?f[g-1].endIndex:r;for(let z=V+1;z<=N;z++)f[g++]=new gr(z,"mtkw",1,!1)}else f[g++]=new gr(N,"mtkw",1,!1);D=D%o}}else(N===v||O&&N>r)&&(f[g++]=new gr(N,_,0,m),D=D%o);for(P===9?D=o:Em(P)?D+=2:D++,E=O;N===v&&(p++,p<y);)_=n[p].type,m=n[p].containsRTL,v=n[p].endIndex}let I=!1;if(E)if(s&&u){const N=t>0?e.charCodeAt(t-1):0,P=t>1?e.charCodeAt(t-2):0;N===32&&P!==32&&P!==9||(I=!0)}else I=!0;if(I)if(d){const N=g>0?f[g-1].endIndex:r;for(let P=N+1;P<=t;P++)f[g++]=new gr(P,"mtkw",1,!1)}else f[g++]=new gr(t,"mtkw",1,!1);else f[g++]=new gr(t,_,0,m);return f}function Knt(i,e,t,n){n.sort(gu.compare);const s=znt.normalize(i,n),r=s.length;let o=0;const a=[];let l=0,c=0;for(let h=0,d=t.length;h<d;h++){const f=t[h],g=f.endIndex,p=f.type,_=f.metadata,m=f.containsRTL;for(;o<r&&s[o].startOffset<g;){const v=s[o];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new gr(c,p,_,m)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new gr(c,p+" "+v.className,_|v.metadata,m),o++;else{c=g,a[l++]=new gr(c,p+" "+v.className,_|v.metadata,m);break}}g>c&&(c=g,a[l++]=new gr(c,p,_,m))}const u=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===u)for(;o<r&&s[o].startOffset===u;){const h=s[o];a[l++]=new gr(c,h.className,h.metadata,!1),o++}return a}function qnt(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,r=i.lineContent,o=i.len,a=i.isOverflowing,l=i.overflowingCharCount,c=i.parts,u=i.fauxIndentLength,h=i.tabSize,d=i.startVisibleColumn,f=i.containsRTL,g=i.spaceWidth,p=i.renderSpaceCharCode,_=i.renderWhitespace,m=i.renderControlCharacters,v=new _d(o+1,c.length);let y=!1,C=0,S=d,x=0,E=0,L=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let T=0,D=c.length;T<D;T++){const I=c[T],N=I.endIndex,P=I.type,O=I.containsRTL,V=_!==0&&I.isWhitespace(),z=V&&!t&&(P==="mtkw"||!s),K=C===N&&I.isPseudoAfter();if(x=0,e.appendString("<span "),O&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(z?"mtkz":P),e.appendASCIICharCode(34),V){let H=0;{let U=C,j=S;for(;U<N;U++){const X=(r.charCodeAt(U)===9?h-j%h:1)|0;H+=X,U>=u&&(j+=X)}}for(z&&(e.appendString(' style="width:'),e.appendString(String(g*H)),e.appendString('px"')),e.appendASCIICharCode(62);C<N;C++){v.setColumnInfo(C+1,T-L,x,E),L=0;const U=r.charCodeAt(C);let j,W;if(U===9){j=h-S%h|0,W=j,!n||W>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let X=2;X<=W;X++)e.appendCharCode(160)}else j=2,W=1,e.appendCharCode(p),e.appendCharCode(8204);x+=j,E+=W,C>=u&&(S+=W)}}else for(e.appendASCIICharCode(62);C<N;C++){v.setColumnInfo(C+1,T-L,x,E),L=0;const H=r.charCodeAt(C);let U=1,j=1;switch(H){case 9:U=h-S%h,j=U;for(let W=1;W<=U;W++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:m?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Em(H)&&j++,m&&H<32?e.appendCharCode(9216+H):m&&H===127?e.appendCharCode(9249):m&&_ve(H)?(e.appendString("[U+"),e.appendString(Xnt(H)),e.appendString("]"),U=8,j=U):e.appendCharCode(H)}x+=U,E+=j,C>=u&&(S+=j)}K?L++:L=0,C>=o&&!y&&I.isPseudoAfter()&&(y=!0,v.setColumnInfo(C+1,T,x,E)),e.appendString("</span>")}return y||v.setColumnInfo(o+1,c.length-1,x,E),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(k("showMore","Show more ({0})",Ynt(l))),e.appendString("</span>")),e.appendString("</span>"),new kW(v,f,s)}function Xnt(i){return i.toString(16).toUpperCase().padStart(4,"0")}function Ynt(i){return i<1024?k("overflow.chars","{0} chars",i):i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/1024/1024).toFixed(1)} MB`}class Sre{constructor(e,t,n,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class Znt{constructor(e,t){this.tabSize=e,this.data=t}}class Dq{constructor(e,t,n,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Gl{constructor(e,t,n,s,r,o,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=Gl.isBasicASCII(n,o),this.containsRTL=Gl.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?Gj(e):!0}static containsRTL(e,t,n){return!t&&n?v2(e):!1}}class lL{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class Qnt{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new lL(new de(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class vve{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class j2{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&tr(e.data,t.data)}static equalsArr(e,t){return tr(e,t,j2.equals)}}function Jnt(i){return Array.isArray(i)}function eit(i){return!Jnt(i)}function yve(i){return typeof i=="string"}function xre(i){return!yve(i)}function c0(i){return!i}function Cg(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Ere(i){return i.replace(/[&<>'"_]/g,"-")}function tit(i,e){console.log(`${i.languageId}: ${e}`)}function Si(i,e){return new Error(`${i.languageId}: ${e}`)}function Bp(i,e,t,n,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,u,h,d,f,g,p){return c0(c)?c0(u)?!c0(h)&&h<n.length?Cg(i,n[h]):!c0(f)&&i&&typeof i[f]=="string"?i[f]:(o===null&&(o=s.split("."),o.unshift(s)),!c0(d)&&d<o.length?Cg(i,o[d]):""):Cg(i,t):"$"})}function nit(i,e,t){const n=/\$[sS](\d\d?)/g;let s=null;return e.replace(n,function(r,o){return s===null&&(s=t.split("."),s.unshift(t)),!c0(o)&&o<s.length?Cg(i,s[o]):""})}function zD(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function iit(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var sit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rit=function(i,e){return function(t,n){e(t,n,i)}},MW;const bve=5,HO=class HO{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new vw(e,t);let n=vw.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let s=this._entries[n];return s||(s=new vw(e,t),this._entries[n]=s,s)}};HO._INSTANCE=new HO(bve);let K2=HO;class vw{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return vw._equals(this,e)}push(e){return K2.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return K2.create(this.parent,e)}}class wb{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new wb(this.languageId,this.state)}}const $O=class $O{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new cL(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new cL(e,t);const n=vw.getStackElementId(e);let s=this._entries[n];return s||(s=new cL(e,null),this._entries[n]=s,s)}};$O._INSTANCE=new $O(bve);let zp=$O;class cL{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:zp.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof cL)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class oit{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new _2(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Es.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenize(e,t,o);if(s!==0)for(const c of l.tokens)this._tokens.push(new _2(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new zj(this._tokens,e)}}class hP{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const s=e!==null?e.length:0,r=t.length,o=n!==null?n.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return n;if(r===0&&o===0)return e;const a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return n!==null&&a.set(n,s+r),a}nestedLanguageTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Es.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenizeEncoded(e,t,o);if(s!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=s;return this._prependTokens=hP._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new n4(hP._merge(this._prependTokens,this._tokens,null),e)}}let q2=MW=class extends Be{constructor(e,t,n,s,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(Es.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const h=a.changedLanguages[c];if(this._embeddedLanguages[h]){l=!0;break}}l&&(o=!0,Es.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Es.get(t);if(n){if(n instanceof MW){const s=n.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}Es.isResolved(t)||e.push(Es.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=K2.create(null,this._lexer.start);return zp.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return O_e(this._languageId,n);const s=new oit,r=this._tokenize(e,t,n,s);return s.finalize(r)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return OK(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const s=new hP(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,n,s);return s.finalize(r)}_tokenize(e,t,n,s){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,s):this._myTokenize(e,t,n,0,s)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=zD(this._lexer,t.stack.state),!n))throw Si(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of n){if(!xre(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw Si(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,n,s,r){const o=this._findLeavingNestedLanguageOffset(e,n);if(o===-1){const c=r.nestedLanguageTokenize(e,t,n.embeddedLanguageData,s);return zp.create(n.stack,new wb(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,s);const l=e.substring(o);return this._myTokenize(l,t,n,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,s,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,u=n.stack,h=0,d=null,f=!0;for(;f||h<l;){const g=h,p=u.depth,_=d?d.groups.length:0,m=u.state;let v=null,y=null,C=null,S=null,x=null;if(d){v=d.matches;const T=d.groups.shift();y=T.matched,C=T.action,S=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&h>=l)break;f=!1;let T=this._lexer.tokenizer[m];if(!T&&(T=zD(this._lexer,m),!T))throw Si(this._lexer,"tokenizer state is not defined: "+m);const D=a.substr(h);for(const I of T)if((h===0||!I.matchOnlyAtLineStart)&&(v=D.match(I.resolveRegex(m)),v)){y=v[0],C=I.action;break}}if(v||(v=[""],y=""),C||(h<l&&(v=[a.charAt(h)],y=v[0]),C=this._lexer.defaultToken),y===null)break;for(h+=y.length;eit(C)&&xre(C)&&C.test;)C=C.test(y,v,m,h===l);let E=null;if(typeof C=="string"||Array.isArray(C))E=C;else if(C.group)E=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?E=Bp(this._lexer,C.token,y,v,m):E=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw Si(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Si(this._lexer,"cannot enter embedded language from within an embedded language");x=Bp(this._lexer,C.nextEmbedded,y,v,m)}if(C.goBack&&(h=Math.max(0,h-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let T=Bp(this._lexer,C.switchTo,y,v,m);if(T[0]==="@"&&(T=T.substr(1)),zD(this._lexer,T))u=u.switchTo(T);else throw Si(this._lexer,"trying to switch to a state '"+T+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(C.transform&&typeof C.transform=="function")throw Si(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(u.depth>=this._lexer.maxStack)throw Si(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(m)}else if(C.next==="@pop"){if(u.depth<=1)throw Si(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));u=u.pop()}else if(C.next==="@popall")u=u.popall();else{let T=Bp(this._lexer,C.next,y,v,m);if(T[0]==="@"&&(T=T.substr(1)),zD(this._lexer,T))u=u.push(T);else throw Si(this._lexer,"trying to set a next state '"+T+"' that is undefined in rule: "+this._safeRuleName(S))}}C.log&&typeof C.log=="string"&&tit(this._lexer,this._lexer.languageId+": "+Bp(this._lexer,C.log,y,v,m))}if(E===null)throw Si(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const L=T=>{const D=this._languageService.getLanguageIdByLanguageName(T)||this._languageService.getLanguageIdByMimeType(T)||T,I=this._getNestedEmbeddedLanguageData(D);if(h<l){const N=e.substr(h);return this._nestedTokenize(N,t,zp.create(u,I),s+h,r)}else return zp.create(u,I)};if(Array.isArray(E)){if(d&&d.groups.length>0)throw Si(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(v.length!==E.length+1)throw Si(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let T=0;for(let D=1;D<v.length;D++)T+=v[D].length;if(T!==y.length)throw Si(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));d={rule:S,matches:v,groups:[]};for(let D=0;D<E.length;D++)d.groups[D]={action:E[D],matched:v[D+1]};h-=y.length;continue}else{if(E==="@rematch"&&(h-=y.length,y="",v=null,E="",x!==null))return L(x);if(y.length===0){if(l===0||p!==u.depth||m!==u.state||(d?d.groups.length:0)!==_)continue;throw Si(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let T=null;if(yve(E)&&E.indexOf("@brackets")===0){const D=E.substr(9),I=ait(this._lexer,y);if(!I)throw Si(this._lexer,"@brackets token returned but no bracket defined as: "+y);T=Ere(I.token+D)}else{const D=E===""?"":E+this._lexer.tokenPostfix;T=Ere(D)}g<o&&r.emit(g+s,T)}if(x!==null)return L(x)}return zp.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new wb(e,A2);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Es.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Es.get(e);return t?new wb(e,t.getInitialState()):new wb(e,A2)}};q2=MW=sit([rit(4,hs)],q2);function ait(i,e){if(!e)return null;e=Cg(i,e);const t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}const $8=l1("standaloneColorizer",{createHTML:i=>i});class Aq{static colorizeElement(e,t,n,s){s=s||{};const r=s.theme||"vs",o=s.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;const c=u=>{const h=($8==null?void 0:$8.createHTML(u))??u;n.innerHTML=h};return this.colorize(t,l||"",a,s).then(c,u=>console.error(u))}static async colorize(e,t,n,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),Kj(t)&&(t=t.substr(1));const a=$C(t);if(!e.isRegisteredLanguageId(n))return Lre(a,o,r);const l=await Es.getOrCreate(n);return l?lit(a,o,l,r):Lre(a,o,r)}static colorizeLine(e,t,n,s,r=4){const o=Gl.isBasicASCII(e,t),a=Gl.containsRTL(e,o,n);return Y4(new QC(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function lit(i,e,t,n){return new Promise((s,r)=>{const o=()=>{const a=cit(i,e,t,n);if(t instanceof q2){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function Lre(i,e,t){let n=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=i.length;o<a;o++){const l=i[o];r[0]=l.length;const c=new Rr(r,l,t),u=Gl.isBasicASCII(l,!0),h=Gl.containsRTL(l,u,!0),d=Y4(new QC(!1,!0,l,!1,u,h,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(d.html),n.push("<br/>")}return n.join("")}function cit(i,e,t,n){let s=[],r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenizeEncoded(l,!0,r);Rr.convertToEndOffset(c.tokens,l.length);const u=new Rr(c.tokens,l,n),h=Gl.isBasicASCII(l,!0),d=Gl.containsRTL(l,h,!0),f=Y4(new QC(!1,!0,l,!1,h,d,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var uit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hit=function(i,e){return function(t,n){e(t,n,i)}},Mw;let dP=(Mw=class{constructor(e,t){}dispose(){}},Mw.ID="editor.contrib.markerDecorations",Mw);dP=uit([hit(1,g0e)],dP);ame(dP.ID,dP,0);class wve extends Be{constructor(e,t){super(),this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let n=!1,s=!1;const r=()=>{if(n&&!s)try{n=!1,s=!0,t()}finally{al(Nt(this._referenceDomElement),()=>{s=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,n=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this._width!==n||this._height!==s)&&(this._width=n,this._height=s,e&&this._onDidChange.fire())}}const Wb=class Wb{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Wb._read(e,this.key),n=r=>Wb._read(e,r),s=(r,o)=>Wb._write(e,r,o);this.migrate(t,n,s)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);return this._read(e[s],t.substring(n+1))}return e[t]}static _write(e,t,n){const s=t.indexOf(".");if(s>=0){const r=t.substring(0,s);e[r]=e[r]||{},this._write(e[r],t.substring(s+1),n);return}e[t]=n}};Wb.items=[];let X2=Wb;function Oh(i,e){X2.items.push(new X2(i,e))}function ul(i,e){Oh(i,(t,n,s)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){s(i,o);return}}})}function dit(i){X2.items.forEach(e=>e.apply(i))}ul("wordWrap",[[!0,"on"],[!1,"off"]]);ul("lineNumbers",[[!0,"on"],[!1,"off"]]);ul("cursorBlinking",[["visible","solid"]]);ul("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);ul("renderLineHighlight",[[!0,"line"],[!1,"none"]]);ul("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);ul("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);ul("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ul("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ul("autoIndent",[[!1,"advanced"],[!0,"full"]]);ul("matchBrackets",[[!0,"always"],[!1,"never"]]);ul("renderFinalNewline",[[!0,"on"],[!1,"off"]]);ul("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);ul("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);ul("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Oh("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Oh("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});Oh("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});const fit={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Oh("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(const n of Object.entries(fit))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});Oh("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){const n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});Oh("experimental.stickyScroll.enabled",(i,e,t)=>{typeof i=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",i))});Oh("experimental.stickyScroll.maxLineCount",(i,e,t)=>{typeof i=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",i))});Oh("codeActionsOnSave",(i,e,t)=>{if(i&&typeof i=="object"){let n=!1;const s={};for(const r of Object.entries(i))typeof r[1]=="boolean"?(n=!0,s[r[0]]=r[1]?"explicit":"never"):s[r[0]]=r[1];n&&t("codeActionsOnSave",s)}});Oh("codeActionWidget.includeNearbyQuickfixes",(i,e,t)=>{typeof i=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",i))});Oh("lightbulb.enabled",(i,e,t)=>{typeof i=="boolean"&&t("lightbulb.enabled",i?void 0:"off")});class git{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new me,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const fP=new git;var pit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mit=function(i,e){return function(t,n){e(t,n,i)}};let DW=class extends Be{constructor(e,t,n,s,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new me),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new me),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new ope,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new wve(s,n.dimension)),this._targetWindowId=Nt(s).vscodeWindowId,this._rawOptions=Tre(n),this._validatedOptions=Up.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Pp.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(fP.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(lU.onDidChange(()=>this._recomputeOptions())),this._register(uR.getInstance(Nt(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Up.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=U0.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:fP.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Up.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:vit(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:z0||Su,pixelRatio:uR.getInstance(nne(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return lU.readFontInfo(nne(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=Tre(e);Up.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Up.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=_it(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};DW=pit([mit(4,Rh)],DW);function _it(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}function vit(){let i="";return!Rg&&!Dpe&&(i+="no-user-select "),Rg&&(i+="no-minimap-shadow ",i+="enable-user-select "),Tn&&(i+="mac "),i}class yit{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class bit{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Up{static validateOptions(e){const t=new yit;for(const n of ob){const s=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(s))}return t}static computeOptions(e,t){const n=new bit;for(const s of ob)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?tr(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Up._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const r of ob){const o=!Up._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=o,o&&(s=!0)}return s?new rpe(n):null}static applyUpdate(e,t){let n=!1;for(const s of ob)if(t.hasOwnProperty(s.name)){const r=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=r.newValue,n=n||r.didChange}return n}}function Tre(i){const e=Tp(i);return dit(e),e}var Xp;(function(i){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},n={...e},s={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){m(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}i.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,_()}i.onBeforeInput=c;function u(){o.input===0&&c(),queueMicrotask(h)}i.onInput=u;function h(){o.input===1&&(performance.mark("input/end"),o.input=2)}function d(){m()}i.onKeyUp=d;function f(){m()}i.onSelectionChange=f;function g(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(p),_())}i.onRenderStart=g;function p(){o.render===1&&(performance.mark("render/end"),o.render=2)}function _(){setTimeout(m)}function m(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",e),v("input",t),v("render",n),v("inputlatency",s),r++,y())}function v(E,L){const T=performance.getEntriesByName(E)[0].duration;L.total+=T,L.min=Math.min(L.min,T),L.max=Math.max(L.max,T)}function y(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function C(){if(r===0)return;const E={keydown:S(e),input:S(t),render:S(n),total:S(s),sampleCount:r};return x(e),x(t),x(n),x(s),r=0,E}i.getAndClearMeasurements=C;function S(E){return{average:E.total/r,max:E.max,min:E.min}}function x(E){E.total=0,E.min=Number.MAX_VALUE,E.max=0}})(Xp||(Xp={}));class Z4{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new Cve(this.x-e.scrollX,this.y-e.scrollY)}}class Cve{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new Z4(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class wit{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s,this._editorPagePositionBrand=void 0}}class Cit{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function Iq(i){const e=pc(i);return new wit(e.left,e.top,e.width,e.height)}function Nq(i,e,t){const n=e.width/i.offsetWidth,s=e.height/i.offsetHeight,r=(t.x-e.x)/n,o=(t.y-e.y)/s;return new Cit(r,o)}class Am extends dh{constructor(e,t,n){super(Nt(n),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new Z4(this.posx,this.posy),this.editorPos=Iq(n),this.relativePos=Nq(n,this.editorPos,this.pos)}}class Sit{constructor(e){this._editorViewDomNode=e}_create(e){return new Am(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return Ne(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return Ne(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return Ne(e,it.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return Ne(e,it.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return Ne(e,it.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return Ne(e,"mousemove",n=>t(this._create(n)))}}class xit{constructor(e){this._editorViewDomNode=e}_create(e){return new Am(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return Ne(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return Ne(e,it.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return Ne(e,it.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return Ne(e,"pointermove",n=>t(this._create(n)))}}class Eit extends Be{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new E4),this._keydownListener=null}startMonitoring(e,t,n,s,r){this._keydownListener=vr(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,o=>{s(new Am(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const GO=class GO{constructor(e){this._editor=e,this._instanceId=++GO._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Ro(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const s=this._counter++;n=new Lit(t,`dyn-rule-${this._instanceId}-${s}`,lR(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};GO._idPool=0;let kre=GO;class Lit{constructor(e,t,n,s){this.key=e,this.className=t,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new Tt,this._styleElement=Lc(n,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const s in t){const r=t[s];let o;typeof r=="object"?o=st(r.id):o=r;const a=Tit(s);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function Tit(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class wk extends Be{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){const r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class hl extends wk{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Th{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=n[s-o-1];return r}}class kit{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Mit extends kit{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Dit{constructor(e,t,n,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=s}}class Q4{static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=new Q4(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class K0{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Ait{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Mre{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class GI{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(K0.compare);const t=[];let n=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];s[r]=new K0(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,n,s,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&n===r&&n===0&&!e.children[t].firstChild){const d=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let c=e.children[t].firstChild,u=e.children[s].firstChild;if((!c||!u)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!c||!u)return null;n=Math.min(c.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));const h=this._readClientRects(c,n,u,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}}const Iit=function(){return BE?!0:!(ka||Su||Rg)}();let yw=!0;class Dre{constructor(e,t){this.themeType=t;const n=e.options,s=n.get(50);n.get(38)==="off"?this.renderWhitespace=n.get(100):this.renderWhitespace="none",this.renderControlCharacters=n.get(95),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(118),this.fontLigatures=n.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const jO=class jO{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Nn(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return ow(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=s.getViewLineRenderingData(e),a=this._options,l=gu.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(ow(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const p=g.startLineNumber===e?g.startColumn:o.minColumn,_=g.endLineNumber===e?g.endColumn:o.maxColumn;p<_&&(ow(a.themeType)&&l.push(new gu(p,_,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new pve(p-1,_-1))))}}const u=new QC(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==xv.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(n)),r.appendString('px;" class="'),r.appendString(jO.CLASS_NAME),r.appendString('">');const h=Mq(u,r);r.appendString("</div>");let d=null;return yw&&Iit&&o.isBasicASCII&&a.useMonospaceOptimizations&&h.containsForeignElements===0&&(d=new UD(this._renderedViewLine?this._renderedViewLine.domNode:null,u,h.characterMapping)),d||(d=xve(this._renderedViewLine?this._renderedViewLine.domNode:null,u,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=d,!0}layoutLine(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof UD:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof UD?this._renderedViewLine.monospaceAssumptionsAreValid():yw}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof UD&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&n>r+1)return new Mre(!0,[new K0(this.getWidth(s),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return o&&o.length>0?new Mre(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};jO.CLASS_NAME="view-line";let eg=jO;class UD{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let r=0;r<s;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return yw;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),yw=!1)}return yw}toSlowRenderedLine(){return xve(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,s){const r=this._getColumnPixelOffset(e,t,s),o=this._getColumnPixelOffset(e,n,s);return[new K0(r,o-r)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,r=(s+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[s],o===-1&&(o=this._actualReadPixelOffset(e,r,n),this._keyColumnPixelOffsetCache[s]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),r=GI.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return Eve(this._characterMapping,e,t)}}class Sve{constructor(e,t,n,s,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,s);return o===-1?null:[new K0(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,r){if(n===s){const o=this._readPixelOffset(e,t,n,r);return o===-1?null:[new K0(o,0)]}else return this._readRawVisibleRangesForRange(e,n,s,r)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const r=this._getReadingTarget(e);return r.firstChild?(s.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[n];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=GI.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const r=this._characterMapping.getDomPosition(n),o=GI.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new K0(0,this.getWidth(s))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return GI.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s)}getColumnOfNodeOffset(e,t){return Eve(this._characterMapping,e,t)}}class Nit extends Sve{_readVisibleRangesForRange(e,t,n,s,r){const o=super._readVisibleRangesForRange(e,t,n,s,r);if(!o||o.length===0||n===s||n===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const xve=function(){return z0?Rit:Pit}();function Rit(i,e,t,n,s){return new Nit(i,e,t,n,s)}function Pit(i,e,t,n,s){return new Sve(i,e,t,n,s)}function Eve(i,e,t){const n=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return i.getColumn(new mve(s,t),n)}class Y2{static whitespaceVisibleColumn(e,t,n){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%n===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=js.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const r=e.length,[o,a,l]=Y2.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let d=a;for(let f=o;f<r;++f){if(d===a+n)return o;switch(e.charCodeAt(f)){case 32:d+=1;break;case 9:d=js.nextRenderTabStop(d,n);break;default:return-1}}return d===a+n?o:-1}const u=js.nextRenderTabStop(l,n);let h=l;for(let d=t;d<r;d++){if(h===u)return d;switch(e.charCodeAt(d)){case 32:h+=1;break;case 9:h=js.nextRenderTabStop(h,n);break;default:return-1}}return h===u?r:-1}}class wp{constructor(e=null){this.hitTarget=e,this.type=0}}class Lve{get hitTarget(){return this.spanNode}constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var u0;(function(i){function e(t,n,s){const r=t.getPositionFromDOMInfo(n,s);return r?new Lve(r,n,null):new wp(n)}i.createFromDOMInfo=e})(u0||(u0={}));class Oit{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class To{static _deduceRage(e,t=null){return!t&&e?new de(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,s,r,o){return{type:e,element:t,mouseColumn:n,position:s,range:r,detail:o}}static createViewZone(e,t,n,s,r){return{type:e,element:t,mouseColumn:n,position:s,range:this._deduceRage(s),detail:r}}static createContentText(e,t,n,s,r){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,s),detail:r}}static createContentEmpty(e,t,n,s){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:s}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Bo{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class uC{constructor(e,t,n){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(117),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return uC.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==r&&(l=new Se(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new Se(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(s);return{range:new de(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new de(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return uC._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class Fit{constructor(e,t,n,s){this.editorPos=t,this.pos=n,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Lo._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class Bit extends Fit{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=Th.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,n,s,r){super(e,t,n,s),this.hitTestResult=new xm(()=>Lo.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?js.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return To.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return To.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,s){return To.createMargin(e,this.target,this._getMouseColumn(t),t,n,s)}fulfillViewZone(e,t,n){return To.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return To.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return To.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return To.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return To.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return To.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const Are={isAfterLines:!0};function G8(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Lo{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Th.collect(t,this._viewHelper.viewDomNode);return!!(Bo.isChildOfContentWidgets(n)||Bo.isChildOfOverflowingContentWidgets(n)||Bo.isChildOfOverlayWidgets(n)||Bo.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,s,r){const o=new uC(this._context,this._viewHelper,e),a=new Bit(o,t,n,s,r);try{const l=Lo._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Lo._snapToSoftTabBoundary(l.position,o.viewModel),u=de.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const n=t;let s=null;return!Bo.isChildOfOverflowGuard(t.targetPath)&&!Bo.isChildOfOverflowingContentWidgets(t.targetPath)&&!Bo.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||Lo._hitTestContentWidget(e,n),s=s||Lo._hitTestOverlayWidget(e,n),s=s||Lo._hitTestMinimap(e,n),s=s||Lo._hitTestScrollbarSlider(e,n),s=s||Lo._hitTestViewZone(e,n),s=s||Lo._hitTestMargin(e,n),s=s||Lo._hitTestViewCursor(e,n),s=s||Lo._hitTestTextArea(e,n),s=s||Lo._hitTestViewLines(e,n),s=s||Lo._hitTestScrollbar(e,n),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Bo.isChildOfContentWidgets(t.targetPath)||Bo.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Bo.isChildOfOverlayWidgets(t.targetPath)||Bo.isChildOfOverflowingOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of n){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,n.position,n)}return null}static _hitTestTextArea(e,t){return Bo.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,s,n.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,n.range,o))}return null}static _hitTestViewLines(e,t){if(!Bo.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new Se(1,1),Are);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new Se(s,r),Are)}if(Bo.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const o=e.getLineWidth(s),a=G8(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new Se(s,1),a)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const o=G8(t.mouseContentHorizontalOffset-r),a=new Se(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,o)}}const n=t.hitTestResult.value;return n.type===1?Lo.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(Bo.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Se(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(Bo.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new Se(s,r))}}return null}static _hitTestScrollbar(e,t){if(Bo.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Se(n,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(146),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return Lo._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const m=G8(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,m)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(s);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!r,injectedText:r});const h=[];if(h.push({offset:c.left,column:a}),a>1){const m=e.visibleRangeForPosition(o,a-1);m&&h.push({offset:m.left,column:a-1})}const d=e.viewModel.getLineMaxColumn(o);if(a<d){const m=e.visibleRangeForPosition(o,a+1);m&&h.push({offset:m.left,column:a+1})}h.sort((m,v)=>m.offset-v.offset);const f=t.pos.toClientCoordinates(Nt(e.viewDomNode)),g=n.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;let _=null;for(let m=1;m<h.length;m++){const v=h[m-1],y=h[m];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){_=new de(o,v.column,o,y.column);const C=Math.abs(v.offset-t.mouseContentHorizontalOffset),S=Math.abs(y.offset-t.mouseContentHorizontalOffset);s=C<S?new Se(o,v.column):new Se(o,y.column);break}}return t.fulfillContentText(s,_,{mightBeForeignElement:!p||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n),r=s+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((s+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new Z4(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(Nt(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(Nt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Kw(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=zit(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new wp;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===eg.CLASS_NAME?u0.createFromDOMInfo(e,o,s.startOffset):new wp(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===eg.CLASS_NAME?u0.createFromDOMInfo(e,r,r.textContent.length):new wp(r)}return new wp}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===eg.CLASS_NAME?u0.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new wp(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===eg.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return u0.createFromDOMInfo(e,l,0)}else if(a===eg.CLASS_NAME)return u0.createFromDOMInfo(e,n.offsetNode,0)}return new wp(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),r=Y2.atomicPosition(n,e.column-1,s,2);return r!==-1?new Se(e.lineNumber,r+1):e}static doHitTest(e,t){let n=new wp;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(Nt(e.viewDomNode)))),n.type===1){const s=e.viewModel.getInjectedTextAt(n.position),r=e.viewModel.normalizePosition(n.position,2);(s||!r.equals(n.position))&&(n=new Lve(r,n.spanNode,s))}return n}}function zit(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=Nt(s),a=o.getComputedStyle(s,null).getPropertyValue("font-style"),l=o.getComputedStyle(s,null).getPropertyValue("font-variant"),c=o.getComputedStyle(s,null).getPropertyValue("font-weight"),u=o.getComputedStyle(s,null).getPropertyValue("font-size"),h=o.getComputedStyle(s,null).getPropertyValue("line-height"),d=o.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${u}/${h} ${d}`,g=s.innerText;let p=r.left,_=0,m;if(e>r.left+r.width)_=g.length;else{const v=AW.getInstance();for(let y=0;y<g.length+1;y++){if(m=v.getCharWidth(g.charAt(y),f)/2,p+=m,e<p){_=y;break}p+=m}}n.setStart(s.firstChild,_),n.setEnd(s.firstChild,_)}return n}const b0=class b0{static getInstance(){return b0._INSTANCE||(b0._INSTANCE=new b0),b0._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[n]=o,o}};b0._INSTANCE=null;let AW=b0;class Rq extends wk{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Lo(this._context,n),this._mouseDownOperation=this._register(new Uit(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const s=new Sit(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=Ne(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Am(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(Ne(this.viewHelper.viewDomNode,it.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=TR.INSTANCE;let t=0,n=Pp.getZoomLevel(),s=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Lv(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=Pp.getZoomLevel(),h=c.deltaY>0?1:-1;Pp.setZoomLevel(u+h),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=Pp.getZoomLevel(),s=a(l),r=0),t=Date.now(),r+=c.deltaY,s&&(Pp.setZoomLevel(n+r/5),c.preventDefault(),c.stopPropagation())};this._register(Ne(this.viewHelper.viewDomNode,it.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return Tn?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new Cve(e,t).toPageCoordinates(Nt(this.viewHelper.viewDomNode)),r=Iq(this.viewHelper.viewDomNode);if(s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width)return null;const o=Nq(this.viewHelper.viewDomNode,r,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,o,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=Kw(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),s=n.type===6||n.type===7,r=n.type===2||n.type===3||n.type===4,o=n.type===3,a=this._context.configuration.options.get(110),l=n.type===8||n.type===5,c=n.type===9;let u=e.leftButton||e.middleButton;Tn&&e.leftButton&&e.ctrlKey&&(u=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(s||o&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(r)e.preventDefault();else if(l){const d=n.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(d.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class Uit extends Be{constructor(e,t,n,s,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=s,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new Eit(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Vit(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new IW,this._currentSelection=new gi(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(92)&&r.get(35)&&!r.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);$f(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=uC.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return To.createOutsideEditor(r,h,"above",a)}const u=s.getLineNumberAtVerticalOffset(l);return To.createOutsideEditor(r,new Se(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=uC.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return To.createOutsideEditor(r,h,"below",a)}const u=s.getLineNumberAtVerticalOffset(l);return To.createOutsideEditor(r,new Se(u,n.getLineMaxColumn(u)),"below",a)}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return To.createOutsideEditor(r,new Se(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return To.createOutsideEditor(r,new Se(o,n.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return To.createViewZone(s.type,s.element,s.mouseColumn,o,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new Se(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class Vit extends Be{constructor(e,t,n,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new Wit(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class Wit extends Be{constructor(e,t,n,s,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=al(Nt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),n=this._tick(),s=t*(n/1e3)*e,r=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=Iq(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(146).horizontalScrollbarHeight,h=new Z4(this._mouseEvent.pos.x,c.y+c.height-u-.1),d=Nq(this._viewHelper.viewDomNode,c,h);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,h,d,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=To.createOutsideEditor(this._position.mouseColumn,new Se(a,1),"above",this._position.outsideDistance):l=To.createOutsideEditor(this._position.mouseColumn,new Se(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=al(Nt(l.element),()=>this._execute())}}const KO=class KO{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>KO.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};KO.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let IW=KO;const Hb=class Hb{constructor(e,t,n,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=s,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),s=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=n.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new Hb(n,s,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new Hb(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var s,r,o,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getStartPosition())??null,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,n*t.length,s]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(jz(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(Kz(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-r);const o=t.value.substring(s,t.value.length-r),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,u=t.selectionEnd-s;if(c===u){const d=e.selectionStart-s;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(jz(e.value,t.value),e.selectionEnd),s=Math.min(Kz(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-s),o=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}};Hb.EMPTY=new Hb("",0,0,null,void 0);let ko=Hb;class Cb{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,r=n+t;return new de(s,1,r+1,1)}static fromEditorSelection(e,t,n,s){const o=Cb._getPageOfLine(t.startLineNumber,n),a=Cb._getRangeForPage(o,n),l=Cb._getPageOfLine(t.endLineNumber,n),c=Cb._getRangeForPage(l,n);let u=a.intersectRanges(new de(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(u,1)>500){const m=e.modifyPosition(u.getEndPosition(),-500);u=de.fromPositions(m,u.getEndPosition())}const h=e.getValueInRange(u,1),d=e.getLineCount(),f=e.getLineMaxColumn(d);let g=c.intersectRanges(new de(t.endLineNumber,t.endColumn,d,f));if(s&&e.getValueLengthInRange(g,1)>500){const m=e.modifyPosition(g.getStartPosition(),500);g=de.fromPositions(g.getStartPosition(),m)}const p=e.getValueInRange(g,1);let _;if(o===l||o+1===l)_=e.getValueInRange(t,1);else{const m=a.intersectRanges(t),v=c.intersectRanges(t);_=e.getValueInRange(m,1)+"…"+e.getValueInRange(v,1)}return s&&_.length>2*500&&(_=_.substring(0,500)+"…"+_.substring(_.length-500,_.length)),new ko(h+_+p,h.length,h.length+_.length,t,u.endLineNumber-u.startLineNumber)}}var Hit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ire=function(i,e){return function(t,n){e(t,n,i)}},gP;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(gP||(gP={}));const qO=class qO{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};qO.INSTANCE=new qO;let pP=qO;class $it{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let NW=class extends Be{get textAreaState(){return this._textAreaState}constructor(e,t,n,s,r,o){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=s,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new me),this.onFocus=this._onFocus.event,this._onBlur=this._register(new me),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new me),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new me),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new me),this.onCut=this._onCut.event,this._onPaste=this._register(new me),this.onPaste=this._onPaste.event,this._onType=this._register(new me),this.onType=this._onType.event,this._onCompositionStart=this._register(new me),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new me),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new me),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new me),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Ig),this._asyncTriggerCut=this._register(new Ro(()=>this._onCut.fire(),0)),this._textAreaState=ko.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Qe.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Ro(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new xi(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new xi(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new $it;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const h=ko.readFromTextArea(this._textArea,this._textAreaState),d=ko.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(d),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=ko.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const h=ko.readFromTextArea(this._textArea,this._textAreaState),d=ko.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(d),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=ko.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=ko.readFromTextArea(this._textArea,this._textAreaState),u=ko.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(fr(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=Nre.getTextData(l.clipboardData);c&&(u=u||pP.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Ro(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return Ne(this._textArea.ownerDocument,"selectionchange",t=>{if(Xp.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),s=n-e;if(e=n,s<5)return;const r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new gi(u.lineNumber,u.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};pP.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&Nre.setTextData(e.clipboardData,t.text,t.html,n)}};NW=Hit([Ire(4,Rh),Ire(5,Ih)],NW);const Nre={getTextData(i){const e=i.getData(Zf.text);let t=null;const n=i.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&i.files.length>0?[Array.prototype.slice.call(i.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(i,e,t,n){i.setData(Zf.text,e),typeof t=="string"&&i.setData("text/html",t),i.setData("vscode-editor-data",JSON.stringify(n))}};class Git extends Be{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new pn(this._actual,"keydown")).event,this.onKeyUp=this._register(new pn(this._actual,"keyup")).event,this.onCompositionStart=this._register(new pn(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new pn(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new pn(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new pn(this._actual,"beforeinput")).event,this.onInput=this._register(new pn(this._actual,"input")).event,this.onCut=this._register(new pn(this._actual,"cut")).event,this.onCopy=this._register(new pn(this._actual,"copy")).event,this.onPaste=this._register(new pn(this._actual,"paste")).event,this.onFocus=this._register(new pn(this._actual,"focus")).event,this.onBlur=this._register(new pn(this._actual,"blur")).event,this._onSyntheticTap=this._register(new me),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Xp.onKeyDown())),this._register(this.onBeforeInput(()=>Xp.onBeforeInput())),this._register(this.onInput(()=>Xp.onInput())),this._register(this.onKeyUp(()=>Xp.onKeyUp())),this._register(Ne(this._actual,gP.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Kw(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Po()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const s=this._actual;let r=null;const o=Kw(s);o?r=o.activeElement:r=Po();const a=Nt(r),l=r===s,c=s.selectionStart,u=s.selectionEnd;if(l&&c===t&&u===n){Su&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),Su&&a.parent!==a&&s.focus();return}try{const h=rWe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),oWe(s,h)}catch{}}}class jit extends Rq{constructor(e,t,n){super(e,t,n),this._register(Zo.addTarget(this.viewHelper.linesContentDomNode)),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Tap,r=>this.onTap(r))),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Change,r=>this.onChange(r))),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Contextmenu,r=>this._onContextMenu(new Am(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(Ne(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new xit(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const n=this._createMouseTarget(new Am(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:n.type===6&&n.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class Kit extends Rq{constructor(e,t,n){super(e,t,n),this._register(Zo.addTarget(this.viewHelper.linesContentDomNode)),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Tap,s=>this.onTap(s))),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Change,s=>this.onChange(s))),this._register(Ne(this.viewHelper.linesContentDomNode,vi.Contextmenu,s=>this._onContextMenu(new Am(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Am(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(gP.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class qit extends Be{constructor(e,t,n){super(),(Sv||tze&&epe)&&Ape.pointerEvents?this.handler=this._register(new jit(e,t,n)):ui.TouchEvent?this.handler=this._register(new Kit(e,t,n)):this.handler=this._register(new Rq(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class g1 extends wk{}const XO=class XO extends g1{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Se(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const n=e.get(146);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Se(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===n||n%10===0)return String(n);const s=this._context.viewModel.getLineCount();return n===s?String(n):""}return String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=ka?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,u)=>de.compareRangesUsingEnds(c.range,u.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=s;c++){const u=c-n;let h=this._getLineRenderLineNumber(c),d="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let f=o;f<r.length;f++){const{range:g,options:p}=r[f];g.startLineNumber<=c&&(d+=" "+p.lineNumberClassName)}if(!h&&!d){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(h=""),this._renderFinalNewline==="dimmed"&&(d+=" dimmed-line-number")),c===this._activeLineNumber&&(d+=" active-line-number"),l[u]=`<div class="${XO.CLASS_NAME}${t}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${h}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};XO.CLASS_NAME="line-numbers";let mP=XO;Vg((i,e)=>{const t=i.getColor(SZe),n=i.getColor(FZe);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const $b=class $b extends hl{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Nn(document.createElement("div")),this._domNode.setClassName($b.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Nn(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName($b.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};$b.CLASS_NAME="glyph-margin",$b.OUTER_CLASS_NAME="margin";let _P=$b;const bw="monaco-mouse-cursor-text";var Xit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Rre=function(i,e){return function(t,n){e(t,n,i)}};class Yit{constructor(e,t,n,s,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new Se(this.modelLineNumber,this.distanceToModelLineStart+1),n=new Se(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const j8=Su;let RW=class extends hl{constructor(e,t,n,s,r){super(e),this._keybindingService=s,this._instantiationService=r,this._primaryCursorPosition=new Se(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new gi(1,1,1,1)],this._modelSelections=[new gi(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Nn(document.createElement("textarea")),Th.write(this.textArea,7),this.textArea.setClassName(`inputarea ${bw}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",k("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Nn(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:d=>this._context.viewModel.getLineMaxColumn(d),getValueInRange:(d,f)=>this._context.viewModel.getValueInRange(d,f),getValueLengthInRange:(d,f)=>this._context.viewModel.getValueLengthInRange(d,f),modifyPosition:(d,f)=>this._context.viewModel.modifyPosition(d,f)},u={getDataToCopy:()=>{const d=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,rl),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(d)?d:null,_=Array.isArray(d)?d.join(f):d;let m,v=null;if(this._copyWithSyntaxHighlighting&&_.length<65536){const y=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);y&&(m=y.html,v=y.mode)}return{isFromEmptySelection:g,multicursorText:p,text:_,html:m,mode:v}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const d=this._selections[0];if(Tn&&d.isEmpty()){const g=d.getStartPosition();let p=this._getWordBeforePosition(g);if(p.length===0&&(p=this._getCharacterBeforePosition(g)),p.length>0)return new ko(p,p.length,p.length,de.fromPositions(g),0)}if(Tn&&!d.isEmpty()&&c.getValueLengthInRange(d,0)<500){const g=c.getValueInRange(d,0);return new ko(g,0,g.length,d,0)}if(Rg&&!d.isEmpty()){const g="vscode-placeholder";return new ko(g,0,g.length,null,void 0)}return ko.EMPTY}if($te){const d=this._selections[0];if(d.isEmpty()){const f=d.getStartPosition(),[g,p]=this._getAndroidWordAtPosition(f);if(g.length>0)return new ko(g,p,p,de.fromPositions(f),0)}return ko.EMPTY}return Cb.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(d,f,g)},h=this._register(new Git(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(NW,u,h,du,{isAndroid:$te,isChrome:ek,isFirefox:Su,isSafari:Rg})),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let f=!1,g=null,p=null;d.metadata&&(f=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,g=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,p=d.metadata.mode),this._viewController.paste(d.text,f,g,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:_}=(()=>{const v=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),y=v.lastIndexOf(`
`),C=v.substring(y+1),S=C.lastIndexOf("	"),x=C.length-S-1,E=g.getStartPosition(),L=Math.min(E.column-1,x),T=E.column-1-L,D=C.substring(0,C.length-L),{tabSize:I}=this._context.viewModel.model.getOptions(),N=Zit(this.textArea.domNode.ownerDocument,D,this._fontInfo,I);return{distanceToModelLineStart:T,widthOfHiddenTextBefore:N}})(),{distanceToModelLineEnd:m}=(()=>{const v=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),y=v.indexOf(`
`),C=y===-1?v:v.substring(0,y),S=C.indexOf("	"),x=S===-1?C.length:C.length-S-1,E=g.getEndPosition(),L=Math.min(this._context.viewModel.model.getLineMaxColumn(E.lineNumber)-E.column,x);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(E.lineNumber)-E.column-L}})();this._context.viewModel.revealRange("keyboard",!0,de.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Yit(this._context,g.startLineNumber,p,_,m),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${bw} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${bw}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(KE.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),s=Yw(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const u=n.charCodeAt(o-2);s.get(u)!==0?r=!1:o--}if(a&&l>n.length&&(a=!1),a){const u=n.charCodeAt(l-1);s.get(u)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Yw(this._context.configuration.options.get(132),[]);let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(n.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!fr(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){var n,s,r;if(e.get(2)===1){const o=(n=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:n.getAriaLabel(),a=(s=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:s.getAriaLabel(),l=(r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:r.getAriaLabel(),c=k("accessibilityModeOff","The editor is not accessible at this time.");return o?k("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?k("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?k("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Jv.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(146).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const r=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=j8?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!KE.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new Se(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(r&&o&&n&&s&&s.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+n.left-this._scrollLeft,h=s.left-n.left+1;if(u<this._contentLeft){const m=this._contentLeft-u;u+=m,c+=m,h-=m}h>this._contentWidth&&(h=this._contentWidth);const d=this._context.viewModel.getViewLineData(r.lineNumber),f=d.tokens.findTokenIndexAtOffset(r.column-1),g=d.tokens.findTokenIndexAtOffset(o.column-1),p=f===g,_=this._visibleTextArea.definePresentation(p?d.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:u,width:h,height:this._lineHeight,useCover:!1,color:(Es.getColorMap()||[])[_.foreground],italic:_.italic,bold:_.bold,underline:_.underline,strikethrough:_.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Tn||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:j8?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:j8?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;lo(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?$e.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?n.setClassName("monaco-editor-background textAreaCover "+_P.OUTER_CLASS_NAME):s.get(68).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+mP.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};RW=Xit([Rre(3,eo),Rre(4,oi)],RW);function Zit(i,e,t,n){if(e.length===0)return 0;const s=i.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=i.createElement("span");lo(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${n*t.spaceWidth}px`,r.append(e),s.appendChild(r),i.body.appendChild(s);const o=r.offsetWidth;return s.remove(),o}const Qit=()=>!0,Jit=()=>!1,est=i=>i===" "||i==="	";class ty{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,n,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,o=r.get(146),a=r.get(50);this.readOnly=r.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(129),this.wordSeparators=r.get(132),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.wordSegmenterLocales=r.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const s=L0(t,n-1),r=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return r?r.onElectricCharacter(e,s,n-s.firstCharOffset):null}normalizeIndentation(e){return p0e(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return est;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return Qit;case"never":return Jit}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>n.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return js.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const s=js.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),r=e.getLineMinColumn(t);if(s<r)return r;const o=e.getLineMaxColumn(t);return s>o?o:s}}class _n{static fromModelState(e){return new tst(e)}static fromViewState(e){return new nst(e)}static fromModelSelection(e){const t=gi.liftSelection(e),n=new Tr(de.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return _n.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class tst{constructor(e){this.modelState=e,this.viewState=null}}class nst{constructor(e){this.modelState=null,this.viewState=e}}class Tr{constructor(e,t,n,s,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=s,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=Tr._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new Tr(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Se(t,n),s):new Tr(new de(t,n,t,n),0,s,new Se(t,n),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?gi.fromPositions(e.getStartPosition(),t):gi.fromPositions(e.getEndPosition(),t)}}class Da{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function Im(i){return i==="'"||i==='"'||i==="`"}class h0{static columnSelect(e,t,n,s,r,o){const a=Math.abs(r-n)+1,l=n>r,c=s>o,u=s<o,h=[];for(let d=0;d<a;d++){const f=n+(l?-d:d),g=e.columnFromVisibleColumn(t,f,s),p=e.columnFromVisibleColumn(t,f,o),_=e.visibleColumnFromColumn(t,new Se(f,g)),m=e.visibleColumnFromColumn(t,new Se(f,p));u&&(_>o||m<s)||c&&(m>s||_<o)||h.push(new Tr(new de(f,g,f,g),0,0,new Se(f,p),0))}if(h.length===0)for(let d=0;d<a;d++){const f=n+(l?-d:d),g=t.getLineMaxColumn(f);h.push(new Tr(new de(f,g,f,g),0,0,new Se(f,g),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,h0.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new Se(l,c));s=Math.max(s,u)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const r=s?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class Ja{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return gi.fromPositions(s.getEndPosition())}}class jI{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return gi.fromPositions(s.getStartPosition())}}class vP{constructor(e,t,n,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return gi.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class ist{constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class K8{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class ni{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Epe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Se(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=Y2.atomicPosition(r,t.column-1,n,0);if(o!==-1&&o+1>=s)return new Se(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?ni.leftPositionAtomicSoftTabs(t,n,e.tabSize):ni.leftPosition(t,n);return new K8(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(r-1)),c=t.normalizePosition(ni.clipPositionColumn(l,t),0),u=ni.left(e,t,c);o=u.lineNumber,a=u.column}return n.move(s,o,a,0)}static clipPositionColumn(e,t){return new Se(e.lineNumber,ni.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+$j(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new Se(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,r){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Y2.atomicPosition(o,n-1,s,1);if(a!==-1)return new Se(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?ni.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):ni.rightPosition(t,n.lineNumber,n.column);return new K8(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,r-1),c=t.normalizePosition(ni.clipPositionColumn(l,t),1),u=ni.right(e,t,c);o=u.lineNumber,a=u.column}return n.move(s,o,a,0)}static vertical(e,t,n,s,r,o,a,l){const c=js.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+r,u=t.getLineCount(),h=n===1&&s===1,d=n===u&&s===t.getLineMaxColumn(n),f=o<n?h:d;if(n=o,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>u?(n=u,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=e.columnFromVisibleColumn(t,n,c),f?r=0:r=c-js.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),l!==void 0){const g=new Se(n,s),p=t.normalizePosition(g,l);r=r+(s-p.column),n=p.lineNumber,s=p.column}return new K8(n,s,r)}static down(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n+o,a,4)}static moveDown(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=0,c;do if(c=ni.down(e,t,o+l,a,n.leftoverVisibleColumns,r,!0),t.normalizePosition(new Se(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return n.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,n){const s=n.selection,r=ni.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=ni.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new Tr(new de(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new Se(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n-o,a,3)}static moveUp(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);const l=ni.up(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const s=n.selection,r=ni.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=ni.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new Tr(new de(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new Se(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,s){const r=t.getLineCount();let o=n.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,s){const r=n.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return n.position.column===a?l=o:l=a,n.move(s,r,l,0)}static moveToEndOfLine(e,t,n,s,r){const o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(s,r,o,0)}}class Rv{static deleteRight(e,t,n,s){const r=[];let o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let u=c;if(u.isEmpty()){const h=c.getPosition(),d=ni.right(t,n,h);u=new de(d.lineNumber,d.column,h.lineNumber,h.column)}if(u.isEmpty()){r[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(o=!0),r[a]=new Ja(u,"")}return[o,r]}static isAutoClosingPairDelete(e,t,n,s,r,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const u=o[l],h=u.getPosition();if(!u.isEmpty())return!1;const d=r.getLineContent(h.lineNumber);if(h.column<2||h.column>=d.length+1)return!1;const f=d.charAt(h.column-2),g=s.get(f);if(!g)return!1;if(Im(f)){if(n==="never")return!1}else if(t==="never")return!1;const p=d.charAt(h.column-1);let _=!1;for(const m of g)m.open===f&&m.close===p&&(_=!0);if(!_)return!1;if(e==="auto"){let m=!1;for(let v=0,y=a.length;v<y;v++){const C=a[v];if(h.lineNumber===C.startLineNumber&&h.column===C.startColumn){m=!0;break}}if(!m)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].getPosition(),l=new de(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new Ja(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,r))return this._runAutoClosingPairDelete(t,n,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const u=Rv.getDeleteRange(s[l],n,t);if(u.isEmpty()){o[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),o[l]=new Ja(u,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=sl(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=n.visibleColumnFromColumn(t,s),c=js.prevIndentTabStop(l,n.indentSize),u=n.columnFromVisibleColumn(t,s.lineNumber,c);return new de(s.lineNumber,u,s.lineNumber,s.column)}}return de.fromPositions(Rv.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=QUe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new Se(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const s=[];let r=null;n.sort((o,a)=>Se.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,h,d,f;c.lineNumber<t.getLineCount()?(u=c.lineNumber,h=1,d=c.lineNumber+1,f=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(u=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,h=1,d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new de(u,h,d,f);r=g,g.isEmpty()?s[o]=null:s[o]=new Ja(g,"")}else s[o]=null;else s[o]=new Ja(l,"")}return new Da(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class ps{static _createWord(e,t,n,s,r){return{start:s,end:r,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let o=n.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(s===2)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){const r=t.findNextIntlWordAtOrAfterOffset(e,s),o=e.length;for(let a=s;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||n===1&&c===2||n===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,n,s){const r=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let o=s;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||n===1&&l===2||n===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,n,s,r){let o=n.lineNumber,a=n.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=ps._findPreviousWordOnLine(e,t,new Se(o,a));if(s===0)return new Se(o,l?l.start+1:1);if(s===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=ps._findPreviousWordOnLine(e,t,new Se(o,l.start+1))),new Se(o,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=ps._findPreviousWordOnLine(e,t,new Se(o,l.start+1));return new Se(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=ps._findPreviousWordOnLine(e,t,new Se(o,l.start+1))),new Se(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new Se(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new Se(n,o);if(a===45&&l!==45)return new Se(n,o);if((ab(a)||aD(a))&&kp(l))return new Se(n,o);if(kp(a)&&kp(l)&&o+1<s){const c=r.charCodeAt(o);if(ab(c)||aD(c))return new Se(n,o)}}return new Se(n,1)}static moveWordRight(e,t,n,s){let r=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=ps._findNextWordOnLine(e,t,new Se(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=ps._findNextWordOnLine(e,t,new Se(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=ps._findNextWordOnLine(e,t,new Se(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=ps._findNextWordOnLine(e,t,new Se(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new Se(r,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new Se(n+1,1):t;const r=e.getLineContent(n);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new Se(n,o);if(a!==45&&l===45)return new Se(n,o);if((ab(a)||aD(a))&&kp(l))return new Se(n,o);if(kp(a)&&kp(l)&&o+1<s){const c=r.charCodeAt(o);if(ab(c)||aD(c))return new Se(n,o)}}return new Se(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,r=t1(n,s);return r+1<s?new de(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(Rv.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new de(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new Se(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const h=this._deleteWordLeftWhitespace(s,a);if(h)return h}let u=ps._findPreviousWordOnLine(n,s,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=ps._findPreviousWordOnLine(n,s,new Se(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new de(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new Se(n.positionLineNumber,n.positionColumn),r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(n,o+1);)o++;return new de(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),r=s.length;if(r===0)return n.lineNumber>1?new de(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new de(n.lineNumber,1,n.lineNumber+1,1):new de(n.lineNumber,1,n.lineNumber,1);const o=h=>h.start+1<=n.column&&n.column<=h.end+1,a=(h,d)=>(h=Math.min(h,n.column),d=Math.max(d,n.column),new de(n.lineNumber,h,n.lineNumber,d)),l=h=>{let d=h.start+1,f=h.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;d>1&&this._charAtIsWhitespace(s,d-2);)d--;return a(d,f)},c=ps._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const u=ps._findNextWordOnLine(e,t,n);return u&&o(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=ps._moveWordPartLeft(e,n);return new de(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let s=t;s<n;s++){const r=e.charAt(s);if(r!==" "&&r!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(n,s);return s+1<r?new de(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new Se(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const u=s.getLineCount(),h=s.getLineMaxColumn(l);if(l===u&&c===h)return null;if(o){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let d=ps._findNextWordOnLine(n,s,a);return t===2?d?c=d.end+1:c<h||l===u?c=h:(l++,d=ps._findNextWordOnLine(n,s,new Se(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l)):(d&&c>=d.start+1&&(d=ps._findNextWordOnLine(n,s,new Se(l,d.end+1))),d?c=d.start+1:c<h||l===u?c=h:(l++,d=ps._findNextWordOnLine(n,s,new Se(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l))),new de(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=ps._moveWordPartRight(e,n);return new de(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new de(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n,s){const r=Yw(t,n),o=ps._findPreviousWordOnLine(r,e,s);if(o&&o.wordType===1&&o.start<=s.column-1&&s.column-1<=o.end)return ps._createWordAtPosition(e,s.lineNumber,o);const a=ps._findNextWordOnLine(r,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?ps._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,n,s,r){const o=Yw(e.wordSeparators,e.wordSegmenterLocales),a=ps._findPreviousWordOnLine(o,t,r),l=ps._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new Tr(new de(r.lineNumber,f,r.lineNumber,g),1,0,new Se(r.lineNumber,g),0)}let c,u;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,u=l.end+1):(c=r.column,u=r.column);const h=r.lineNumber;let d;if(n.selectionStart.containsPosition(r))d=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){d=c;const f=new Se(h,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.endColumn)}else{d=u;const f=new Se(h,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.startColumn)}return n.move(!0,h,d,0)}}class bo{static addCursorDown(e,t,n){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new _n(l.modelState,l.viewState),n?s[r++]=_n.fromModelState(ni.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=_n.fromViewState(ni.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new _n(l.modelState,l.viewState),n?s[r++]=_n.fromModelState(ni.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=_n.fromViewState(ni.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return _n.fromViewState(ni.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return _n.fromModelState(ni.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,n,s)}return r}static _moveToLineEnd(e,t,n,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=o-r.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return _n.fromViewState(ni.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return _n.fromModelState(ni.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){const n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),n[s]=_n.fromModelState(new Tr(new de(a,1,a,1),0,0,new Se(c,u),0))}return n}static moveToBeginningOfBuffer(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=_n.fromModelState(ni.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=_n.fromModelState(ni.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return _n.fromModelState(new Tr(new de(1,1,1,1),0,0,new Se(n,s),0))}static line(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new Se(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n){const c=e.model.getLineCount();let u=o.lineNumber+1,h=1;return u>c&&(u=c,h=e.model.getLineMaxColumn(u)),_n.fromModelState(new Tr(new de(o.lineNumber,1,u,h),2,0,new Se(u,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return _n.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,h=1;return u>c&&(u=c,h=e.getLineMaxColumn(u)),_n.fromViewState(t.viewState.move(!0,u,h,0))}else{const c=t.modelState.selectionStart.getEndPosition();return _n.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,s){const r=e.model.validatePosition(s);return _n.fromModelState(ps.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new _n(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return _n.fromViewState(new Tr(new de(n,s,n,s),0,0,new Se(n,s),0))}static moveTo(e,t,n,s,r){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,s,r)}const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new Se(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return _n.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,r,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>_n.fromViewState(ni.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>_n.fromModelState(ni.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>_n.fromViewState(ni.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>_n.fromModelState(ni.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){const r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new _n(t.modelState,t.viewState);{let o;r>n.endLineNumber-1?o=n.endLineNumber-1:r<n.startLineNumber?o=n.startLineNumber:o=r;const a=ni.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return _n.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(r=>_n.fromViewState(ni.moveLeft(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=_n.fromViewState(ni.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveRight(e,t,n,s){return t.map(r=>_n.fromViewState(ni.moveRight(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineRight(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=_n.fromViewState(ni.moveRight(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveDownByViewLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=_n.fromViewState(ni.moveDown(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveDownByModelLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=_n.fromModelState(ni.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveUpByViewLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=_n.fromViewState(ni.moveUp(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveUpByModelLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=_n.fromModelState(ni.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveToViewPosition(e,t,n,s,r){return _n.fromViewState(t.viewState.move(n,s,r,0))}static _moveToModelPosition(e,t,n,s,r){return _n.fromModelState(t.modelState.move(n,s,r,0))}static _moveToViewMinColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewCenterColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewMaxColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}}var yP;(function(i){const e=function(n){if(!wa(n))return!1;const s=n;return!(!Vl(s.to)||!gc(s.select)&&!Kge(s.select)||!gc(s.by)&&!Vl(s.by)||!gc(s.value)&&!UC(s.value))};i.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(yP||(yP={}));class sst{constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new Tve(e,n)}shouldIncrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}}class Pq{constructor(e,t){this.model=e,this.indentationLineProcessor=new Tve(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),n=L0(t,e.startColumn-1);let s;if(Oq(this.model,e.getStartPosition())){const o=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+o;s=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;s=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const n=this.model.tokenization.getLineTokens(t.lineNumber),s=L0(n,t.column-1),r=t.column-1-s.firstCharOffset,o=s.firstCharOffset+r,a=s.firstCharOffset+s.getLineLength(),l=n.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),p=this.model.getLineMaxColumn(f)-1;return L0(g,p)};this.model.tokenization.forceTokenization(e.startLineNumber);const n=this.model.tokenization.getLineTokens(e.startLineNumber),s=L0(n,e.startColumn-1),r=Rr.createEmpty("",s.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(s.firstCharOffset===0))return r;const c=t(o);if(!(s.languageId===c.languageId))return r;const h=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(h)}}class Tve{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var o,a;const n=(l,c)=>{const u=Wo(l);return c+l.substring(u.length)};(a=(o=this.model.tokenization).forceTokenization)==null||a.call(o,e);const s=this.model.tokenization.getLineTokens(e);let r=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(r=n(r,t)),r}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,n=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let u=e.getTokenText(l);t(c)&&(u=u.replace(r,""));const h=e.getMetadata(l);o.push({text:u,metadata:h})}),Rr.createFromTextAndMetadata(o,e.languageIdCodec)}}function Oq(i,e){i.tokenization.forceTokenization(e.lineNumber);const t=i.tokenization.getLineTokens(e.lineNumber),n=L0(t,e.column-1),s=n.firstCharOffset===0,r=t.getLanguageId(0)===n.languageId;return!s&&!r}function Fq(i,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=n.getLanguageConfiguration(s);if(!r)return null;const a=new Pq(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),h=r.onEnter(i,l,c,u);if(!h)return null;const d=h.indentAction;let f=h.appendText;const g=h.removeText||0;f?d===Go.Indent&&(f="	"+f):d===Go.Indent||d===Go.IndentOutdent?f="	":f="";let p=wme(e,t.startLineNumber,t.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:d,appendText:f,removeText:g,indentation:p}}var rst=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ost=function(i,e){return function(t,n){e(t,n,i)}},KI;const q8=Object.create(null);function b_(i,e){if(e<=0)return"";q8[i]||(q8[i]=["",i]);const t=q8[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}let Pv=KI=class{static unshiftIndent(e,t,n,s,r){const o=js.visibleColumnFromColumn(e,t,n);if(r){const a=b_(" ",s),c=js.prevIndentTabStop(o,s)/s;return b_(a,c)}else{const a="	",c=js.prevRenderTabStop(o,n)/n;return b_(a,c)}}static shiftIndent(e,t,n,s,r){const o=js.visibleColumnFromColumn(e,t,n);if(r){const a=b_(" ",s),c=js.nextIndentTabStop(o,s)/s;return b_(a,c)}else{const a="	",c=js.nextRenderTabStop(o,n)/n;return b_(a,c)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&n!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=n===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let h=n;h<=s;h++,c=u){u=0;const d=e.getLineContent(h);let f=sl(d);if(this._opts.isUnshift&&(d.length===0||f===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(f===-1&&(f=d.length),h>1&&js.visibleColumnFromColumn(d,f+1,r)%o!==0&&e.tokenization.isCheapToTokenize(h-1)){const _=Fq(this._opts.autoIndent,e,new de(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(_){if(u=c,_.appendText)for(let m=0,v=_.appendText.length;m<v&&u<o&&_.appendText.charCodeAt(m)===32;m++)u++;_.removeText&&(u=Math.max(0,u-_.removeText));for(let m=0;m<u&&!(f===0||d.charCodeAt(f-1)!==32);m++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=KI.unshiftIndent(d,f+1,r,o,a):g=KI.shiftIndent(d,f+1,r,o,a),this._addEditOperation(t,new de(h,1,h,f+1),g),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?b_(" ",o):"	";for(let u=n;u<=s;u++){const h=e.getLineContent(u);let d=sl(h);if(!(this._opts.isUnshift&&(h.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(d===-1&&(d=h.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let f=0;f<d;f++)if(h.charCodeAt(f)===9){d=f+1;break}this._addEditOperation(t,new de(u,1,u,d+1),"")}else this._addEditOperation(t,new de(u,1,u,1),c),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new gi(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return n.startColumn<=s?n:n.getDirection()===0?new gi(n.startLineNumber,s,n.endLineNumber,n.endColumn):new gi(n.endLineNumber,n.endColumn,n.startLineNumber,s)}return n}};Pv=KI=rst([ost(2,Yd)],Pv);class ast{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new de(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new de(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),s=n[0].range,r=n[1].range;return new gi(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class lst{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new de(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new gi(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function cst(i,e,t){const n=i.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,r=-1;for(s=e-1;s>=1;s--){if(i.tokenization.getLanguageIdAtPosition(s,0)!==n)return r;const o=i.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(o)||o===""){r=s;continue}return s}}return-1}function bP(i,e,t,n=!0,s){if(i<4)return null;const r=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new sst(e,r,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=cst(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Wo(l),action:Go.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Wo(l),action:null,line:a}}else{if(a===1)return{indentation:Wo(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let h=l-1;h>0;h--)if(!o.shouldIndentNextLine(h)){u=h;break}return{indentation:Wo(e.getLineContent(u+1)),action:null,line:u+1}}if(n)return{indentation:Wo(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(o.shouldIncrease(u))return{indentation:Wo(e.getLineContent(u)),action:Go.Indent,line:u};if(o.shouldIndentNextLine(u)){let h=0;for(let d=u-1;d>0;d--)if(!o.shouldIndentNextLine(u)){h=d;break}return{indentation:Wo(e.getLineContent(h+1)),action:null,line:h+1}}else if(o.shouldDecrease(u))return{indentation:Wo(e.getLineContent(u)),action:null,line:u}}return{indentation:Wo(e.getLineContent(1)),action:null,line:1}}}function ust(i,e,t,n,s){if(i<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=s.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new Pq(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,h=Wo(u.getLineContent()),d=dst(e,t.startLineNumber,u),f=Oq(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),p=Wo(g),_=bP(i,d,t.startLineNumber+1,void 0,s);if(!_){const v=f?p:h;return{beforeEnter:v,afterEnter:v}}let m=f?p:_.indentation;return _.action===Go.Indent&&(m=n.shiftIndent(m)),o.shouldDecrease(c.getLineContent())&&(m=n.unshiftIndent(m)),{beforeEnter:f?p:h,afterEnter:m}}function hst(i,e,t,n,s,r){const o=i.autoIndent;if(o<4||Oq(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=r.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const h=new Pq(e,r).getProcessedTokenContextAroundRange(t),d=h.beforeRangeProcessedTokens.getLineContent(),f=h.afterRangeProcessedTokens.getLineContent(),g=d+f,p=d+n+f;if(!c.shouldDecrease(g)&&c.shouldDecrease(p)){const m=bP(o,e,t.startLineNumber,!1,r);if(!m)return null;let v=m.indentation;return m.action!==Go.Indent&&(v=s.unshiftIndent(v)),v}const _=t.startLineNumber-1;if(_>0){const m=e.getLineContent(_);if(c.shouldIndentNextLine(m)&&c.shouldIncrease(p)){const v=bP(o,e,t.startLineNumber,!1,r),y=v==null?void 0:v.indentation;if(y!==void 0){const C=e.getLineContent(t.startLineNumber),S=Wo(C),E=s.shiftIndent(y)===S,L=/^\s*$/.test(g),T=i.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),I=T&&T.length>0&&L;if(E&&I)return y}}}return null}function dst(i,e,t){return{tokenization:{getLineTokens:s=>s===e?t:i.tokenization.getLineTokens(s),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(s,r)=>i.getLanguageIdAtPosition(s,r)},getLineContent:s=>s===e?t.getLineContent():i.getLineContent(s)}}class fst{static getEdits(e,t,n,s,r){if(!r&&this._isAutoIndentType(e,t,n)){const o=[];for(const l of n){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;o.push({selection:l,indentation:c})}const a=PW.getAutoClosingPairClose(e,t,n,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,s,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let s=0,r=n.length;s<r;s++)if(!t.tokenization.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,s){const r=hst(e,t,n,s,{shiftIndent:a=>Uq(e,a),unshiftIndent:a=>wP(e,a)},e.languageConfigurationService);if(r===null)return null;const o=wme(t,n.startLineNumber,n.startColumn);return r===e.normalizeIndentation(o)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,n,s,r){const o=n.map(({selection:l,indentation:c})=>{if(r!==null){const u=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new xst(u,l,s,r)}else{const u=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return K_(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Da(4,o,a)}static _getEditFromIndentationAndSelection(e,t,n,s,r,o=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(n);if(l!==0){const h=t.getLineContent(a);c+=h.substring(l-1,s.startColumn-1)}return c+=o?r:"",{range:new de(a,1,s.endLineNumber,s.endColumn),text:c}}}class gst{static getEdits(e,t,n,s,r,o){if(Mve(t,n,s,r,o))return this._runAutoClosingOvertype(e,s,o)}static _runAutoClosingOvertype(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const l=t[r].getPosition(),c=new de(l.lineNumber,l.column,l.lineNumber,l.column+1);s[r]=new Ja(c,n)}return new Da(4,s,{shouldPushStackElementBefore:J4(e,4),shouldPushStackElementAfter:!1})}}class pst{static getEdits(e,t,n,s,r){if(Mve(e,t,n,s,r)){const o=n.map(a=>new Ja(new de(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Da(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class PW{static getEdits(e,t,n,s,r,o){if(!o){const a=this.getAutoClosingPairClose(e,t,n,s,r);if(a!==null)return this._runAutoClosingOpenCharType(n,s,r,a)}}static _runAutoClosingOpenCharType(e,t,n,s){const r=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];r[o]=new Sst(l,t,!n,s)}return new Da(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,s,r){for(const g of n)if(!g.isEmpty())return null;const o=n.map(g=>{const p=g.getPosition();return r?{lineNumber:p.lineNumber,beforeColumn:p.column-s.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(g=>new Se(g.lineNumber,g.beforeColumn)),s);if(!a)return null;let l,c;if(Im(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const h=this._findContainedAutoClosingPair(e,a),d=h?h.close:"";let f=!0;for(const g of o){const{lineNumber:p,beforeColumn:_,afterColumn:m}=g,v=t.getLineContent(p),y=v.substring(0,_-1),C=v.substring(m-1);if(C.startsWith(d)||(f=!1),C.length>0){const L=C.charAt(0);if(!this._isBeforeClosingBrace(e,C)&&!c(L))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const L=Yw(e.wordSeparators,[]);if(y.length>0){const T=y.charCodeAt(y.length-1);if(L.get(T)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const S=t.tokenization.getLineTokens(p),x=L0(S,_-1);if(!a.shouldAutoClose(x,_-x.firstCharOffset))return null;const E=a.findNeutralCharacter();if(E){const L=t.tokenization.getTokenTypeIfInsertingCharacter(p,_,E);if(!a.isOK(L))return null}}return f?a.close.substring(0,a.close.length-d.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _findAutoClosingPairOpen(e,t,n,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new de(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}}class mst{static getEdits(e,t,n,s,r){if(!r&&this._isSurroundSelectionType(e,t,n,s))return this._runSurroundSelectionType(e,n,s)}static _runSurroundSelectionType(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.surroundingPairs[n];s[r]=new ast(a,n,l)}return new Da(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,s){if(!Dve(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=Im(s);for(const o of n){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),u=l===o.startLineNumber?o.startColumn-1:0,h=l===o.endLineNumber?o.endColumn-1:c.length,d=c.substring(u,h);if(/[^ \t]/.test(d)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(Im(l))return!1}}return!0}}class _st{static getEdits(e,t,n,s,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,n,s)){const a=this._typeInterceptorElectricChar(e,t,n,s[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;const o=s.getPosition();n.tokenization.forceTokenization(o.lineNumber);const a=n.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return di(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,u=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(u){if(u.startLineNumber===o.lineNumber)return null;const h=n.getLineContent(u.startLineNumber),d=Wo(h),f=t.normalizeIndentation(d),g=n.getLineContent(o.lineNumber),p=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,_=g.substring(p-1,o.column-1),m=f+_+r,v=new de(o.lineNumber,1,o.lineNumber,o.column),y=new Ja(v,m);return new Da(zq(m,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class vst{static getEdits(e,t,n){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new Ja(t[o],n);const r=zq(n,e);return new Da(r,s,{shouldPushStackElementBefore:J4(e,r),shouldPushStackElementAfter:!1})}}class kve{static getEdits(e,t,n,s,r){if(!r&&s===`
`){const o=[];for(let a=0,l=n.length;a<l;a++)o[a]=this._enter(e,t,!1,n[a]);return new Da(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,s){if(e.autoIndent===0)return K_(s,`
`,n);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=Wo(l).substring(0,s.startColumn-1);return K_(s,`
`+e.normalizeIndentation(c),n)}const r=Fq(e.autoIndent,t,s,e.languageConfigurationService);if(r){if(r.indentAction===Go.None)return K_(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===Go.Indent)return K_(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===Go.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),u=`
`+c+`
`+l;return n?new jI(s,u,!0):new vP(s,u,-1,c.length-l.length,!0)}else if(r.indentAction===Go.Outdent){const l=wP(e,r.indentation);return K_(s,`
`+e.normalizeIndentation(l+r.appendText),n)}}const o=t.getLineContent(s.startLineNumber),a=Wo(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=ust(e.autoIndent,t,s,{unshiftIndent:c=>wP(e,c),shiftIndent:c=>Uq(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const u=s.endColumn,h=t.getLineContent(s.endLineNumber),d=sl(h);if(d>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,d+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new jI(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return u<=d+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new vP(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return K_(s,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++){let a=n[r].positionLineNumber;if(a===1)s[r]=new jI(new de(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new de(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].positionLineNumber,l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new de(a,l,a,l))}return s}static lineBreakInsert(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=this._enter(e,t,!0,n[r]);return s}}class yst{static getEdits(e,t,n,s,r,o){const a=this._distributePasteToCursors(e,n,s,r,o);return a?(n=n.sort(de.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,r)}static _distributePasteToCursors(e,t,n,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substring(0,n.length-1));const o=$C(n);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,n,s){const r=[];for(let o=0,a=n.length;o<a;o++)r[o]=new Ja(n[o],s[o]);return new Da(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,r){const o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){const h=new de(u.lineNumber,1,u.lineNumber,1);o[a]=new ist(h,s,c,!0)}else o[a]=new Ja(c,s)}return new Da(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class bst{static getEdits(e,t,n,s,r,o,a,l){const c=s.map(u=>this._compositionType(n,u,r,o,a,l));return new Da(4,c,{shouldPushStackElementBefore:J4(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),u=new de(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===n&&o===0?null:new vP(u,n,0,o)}}class wst{static getEdits(e,t,n){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new Ja(t[o],n);const r=zq(n,e);return new Da(r,s,{shouldPushStackElementBefore:J4(e,r),shouldPushStackElementAfter:!1})}}class Cst{static getCommands(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){s[r]=new Ja(new de(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Pv(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,n){let s=null,r="";const o=bP(e.autoIndent,t,n,!1,e.languageConfigurationService);if(o)s=o.action,r=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const u=t.getLineContent(a);if(t1(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Fq(e.autoIndent,t,new de(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return s&&(s===Go.Indent&&(r=Uq(e,r)),s===Go.Outdent&&(r=wP(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,s){let r="";const o=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)r+=" "}else r="	";return new Ja(n,r,s)}}class Bq extends vP{constructor(e,t,n,s,r,o){super(e,t,n,s),this._openCharacter=r,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new de(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new de(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}}class Sst extends Bq{constructor(e,t,n,s){const r=(n?t:"")+s,o=0,a=-s.length;super(e,r,o,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class xst extends Bq{constructor(e,t,n,s){const r=n+s,o=0,a=n.length;super(t,r,o,a,n,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");const s=n[0].range,r=n[1].range,o=s.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}function zq(i,e){return i===" "?e===5||e===6?6:5:4}function J4(i,e){return Ore(i)&&!Ore(e)?!0:i===5?!1:Pre(i)!==Pre(e)}function Pre(i){return i===6||i===5?"space":i}function Ore(i){return i===4||i===5||i===6}function Mve(i,e,t,n,s){if(i.autoClosingOvertype==="never"||!i.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const h=Im(s);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&h)return!1;if(i.autoClosingOvertype==="auto"){let f=!1;for(let g=0,p=n.length;g<p;g++){const _=n[g];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){f=!0;break}}if(!f)return!1}}return!0}function K_(i,e,t){return t?new jI(i,e,!0):new Ja(i,e,!0)}function Uq(i,e,t){return t=t||1,Pv.shiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}function wP(i,e,t){return t=t||1,Pv.unshiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}function Dve(i,e){return Im(e)?i.autoSurround==="quotes"||i.autoSurround==="languageDefined":i.autoSurround==="brackets"||i.autoSurround==="languageDefined"}class d0{static indent(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Pv(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Pv(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static paste(e,t,n,s,r,o){return yst.getEdits(e,t,n,s,r,o)}static tab(e,t,n){return Cst.getCommands(e,t,n)}static compositionType(e,t,n,s,r,o,a,l){return bst.getEdits(e,t,n,s,r,o,a,l)}static compositionEndWithInterceptors(e,t,n,s,r,o){if(!s)return null;let a=null;for(const d of s)if(a===null)a=d.insertedText;else if(a!==d.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const d of s)if(d.deletedText.length!==0){c=!0;break}if(c){if(!Dve(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const d=Im(l);for(const p of s)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||d&&Im(p.deletedText))return null;const f=[];for(const p of r){if(!p.isEmpty())return null;f.push(p.getPosition())}if(f.length!==s.length)return null;const g=[];for(let p=0,_=f.length;p<_;p++)g.push(new lst(f[p],s[p].deletedText,t.surroundingPairs[l]));return new Da(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=pst.getEdits(t,n,r,o,l);if(u!==void 0)return u;const h=PW.getEdits(t,n,r,l,!0,!1);return h!==void 0?h:null}static typeWithInterceptors(e,t,n,s,r,o,a){const l=kve.getEdits(n,s,r,a,e);if(l!==void 0)return l;const c=fst.getEdits(n,s,r,a,e);if(c!==void 0)return c;const u=gst.getEdits(t,n,s,r,o,a);if(u!==void 0)return u;const h=PW.getEdits(n,s,r,a,!1,e);if(h!==void 0)return h;const d=mst.getEdits(n,s,r,a,e);if(d!==void 0)return d;const f=_st.getEdits(t,n,s,r,a,e);return f!==void 0?f:vst.getEdits(t,r,a)}static typeWithoutInterceptors(e,t,n,s,r){return wst.getEdits(e,s,r)}}class Est{constructor(e,t,n,s,r,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=s,this.insertedSelectionStart=r,this.insertedSelectionEnd=o}}var pt;(function(i){i.editorSimpleInput=new Mt("editorSimpleInput",!1,!0),i.editorTextFocus=new Mt("editorTextFocus",!1,k("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Mt("editorFocus",!1,k("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Mt("textInputFocus",!1,k("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Mt("editorReadonly",!1,k("editorReadonly","Whether the editor is read-only")),i.inDiffEditor=new Mt("inDiffEditor",!1,k("inDiffEditor","Whether the context is a diff editor")),i.isEmbeddedDiffEditor=new Mt("isEmbeddedDiffEditor",!1,k("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),i.inMultiDiffEditor=new Mt("inMultiDiffEditor",!1,k("inMultiDiffEditor","Whether the context is a multi diff editor")),i.multiDiffEditorAllCollapsed=new Mt("multiDiffEditorAllCollapsed",void 0,k("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),i.hasChanges=new Mt("diffEditorHasChanges",!1,k("diffEditorHasChanges","Whether the diff editor has changes")),i.comparingMovedCode=new Mt("comparingMovedCode",!1,k("comparingMovedCode","Whether a moved code block is selected for comparison")),i.accessibleDiffViewerVisible=new Mt("accessibleDiffViewerVisible",!1,k("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),i.diffEditorRenderSideBySideInlineBreakpointReached=new Mt("diffEditorRenderSideBySideInlineBreakpointReached",!1,k("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),i.diffEditorInlineMode=new Mt("diffEditorInlineMode",!1,k("diffEditorInlineMode","Whether inline mode is active")),i.diffEditorOriginalWritable=new Mt("diffEditorOriginalWritable",!1,k("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),i.diffEditorModifiedWritable=new Mt("diffEditorModifiedWritable",!1,k("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),i.diffEditorOriginalUri=new Mt("diffEditorOriginalUri","",k("diffEditorOriginalUri","The uri of the original document")),i.diffEditorModifiedUri=new Mt("diffEditorModifiedUri","",k("diffEditorModifiedUri","The uri of the modified document")),i.columnSelection=new Mt("editorColumnSelection",!1,k("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Mt("editorHasSelection",!1,k("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Mt("editorHasMultipleSelections",!1,k("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Mt("editorTabMovesFocus",!1,k("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInEmbeddedEditor=new Mt("isInEmbeddedEditor",!1,!0),i.canUndo=new Mt("canUndo",!1,!0),i.canRedo=new Mt("canRedo",!1,!0),i.hoverVisible=new Mt("editorHoverVisible",!1,k("editorHoverVisible","Whether the editor hover is visible")),i.hoverFocused=new Mt("editorHoverFocused",!1,k("editorHoverFocused","Whether the editor hover is focused")),i.stickyScrollFocused=new Mt("stickyScrollFocused",!1,k("stickyScrollFocused","Whether the sticky scroll is focused")),i.stickyScrollVisible=new Mt("stickyScrollVisible",!1,k("stickyScrollVisible","Whether the sticky scroll is visible")),i.standaloneColorPickerVisible=new Mt("standaloneColorPickerVisible",!1,k("standaloneColorPickerVisible","Whether the standalone color picker is visible")),i.standaloneColorPickerFocused=new Mt("standaloneColorPickerFocused",!1,k("standaloneColorPickerFocused","Whether the standalone color picker is focused")),i.inCompositeEditor=new Mt("inCompositeEditor",void 0,k("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Mt("editorLangId","",k("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Mt("editorHasCompletionItemProvider",!1,k("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Mt("editorHasCodeActionsProvider",!1,k("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Mt("editorHasCodeLensProvider",!1,k("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Mt("editorHasDefinitionProvider",!1,k("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Mt("editorHasDeclarationProvider",!1,k("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Mt("editorHasImplementationProvider",!1,k("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Mt("editorHasTypeDefinitionProvider",!1,k("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Mt("editorHasHoverProvider",!1,k("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Mt("editorHasDocumentHighlightProvider",!1,k("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Mt("editorHasDocumentSymbolProvider",!1,k("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Mt("editorHasReferenceProvider",!1,k("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Mt("editorHasRenameProvider",!1,k("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Mt("editorHasSignatureHelpProvider",!1,k("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Mt("editorHasInlayHintsProvider",!1,k("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Mt("editorHasDocumentFormattingProvider",!1,k("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Mt("editorHasDocumentSelectionFormattingProvider",!1,k("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Mt("editorHasMultipleDocumentFormattingProvider",!1,k("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Mt("editorHasMultipleDocumentSelectionFormattingProvider",!1,k("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(pt||(pt={}));const kn=0;class es extends Mv{runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var $r;(function(i){const e=function(n){if(!wa(n))return!1;const s=n;return!(!Vl(s.to)||!gc(s.by)&&!Vl(s.by)||!gc(s.value)&&!UC(s.value)||!gc(s.revealCursor)&&!Kge(s.revealCursor))};i.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Right:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.Left:s=4;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;case i.RawUnit.Editor:r=5;break;case i.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!n.select}}i.parse=t})($r||($r={}));var Sb;(function(i){const e=function(t){if(!wa(t))return!1;const n=t;return!(!UC(n.lineNumber)&&!Vl(n.lineNumber)||!gc(n.at)&&!Vl(n.at))};i.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Sb||(Sb={}));class OW{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(sr).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=Po();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(sr).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var cr;(function(i){class e extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){if(!y.position)return;v.model.pushStackElement(),v.setCursorStates(y.source,3,[bo.moveTo(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&y.revealType!==2&&v.revealAllCursors(y.source,!0,!0)}}i.MoveTo=Zt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=Zt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends es{runCoreEditorCommand(v,y){v.model.pushStackElement();const C=this._getColumnSelectResult(v,v.getPrimaryCursorState(),v.getCursorColumnSelectData(),y);C!==null&&(v.setCursorStates(y.source,3,C.viewStates.map(S=>_n.fromViewState(S))),v.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?v.revealTopMostCursor(y.source):v.revealBottomMostCursor(y.source))}}i.ColumnSelect=Zt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(m,v,y,C){if(typeof C.position>"u"||typeof C.viewPosition>"u"||typeof C.mouseColumn>"u")return null;const S=m.model.validatePosition(C.position),x=m.coordinatesConverter.validateViewPosition(new Se(C.viewPosition.lineNumber,C.viewPosition.column),S),E=C.doColumnSelect?y.fromViewLineNumber:x.lineNumber,L=C.doColumnSelect?y.fromViewVisualColumn:C.mouseColumn-1;return h0.columnSelect(m.cursorConfig,m,E,L,x.lineNumber,C.mouseColumn-1)}}),i.CursorColumnSelectLeft=Zt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(m,v,y,C){return h0.columnSelectLeft(m.cursorConfig,m,y)}}),i.CursorColumnSelectRight=Zt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(m,v,y,C){return h0.columnSelectRight(m.cursorConfig,m,y)}});class n extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,y,C,S){return h0.columnSelectUp(v.cursorConfig,v,C,this._isPaged)}}i.CursorColumnSelectUp=Zt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=Zt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,y,C,S){return h0.columnSelectDown(v.cursorConfig,v,C,this._isPaged)}}i.CursorColumnSelectDown=Zt(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=Zt(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends es{constructor(){super({id:"cursorMove",precondition:void 0,metadata:yP.metadata})}runCoreEditorCommand(v,y){const C=yP.parse(y);C&&this._runCursorMove(v,y.source,C)}_runCursorMove(v,y,C){v.model.pushStackElement(),v.setCursorStates(y,3,r._move(v,v.getCursorStates(),C)),v.revealAllCursors(y,!0)}static _move(v,y,C){const S=C.select,x=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return bo.simpleMove(v,y,C.direction,S,x,C.unit);case 11:case 13:case 12:case 14:return bo.viewportMove(v,y,C.direction,S,x);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=Zt(new r);class o extends es{constructor(v){super(v),this._staticArgs=v.args}runCoreEditorCommand(v,y){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||v.cursorConfig.pageSize}),v.model.pushStackElement(),v.setCursorStates(y.source,3,bo.simpleMove(v,v.getCursorStates(),C.direction,C.select,C.value,C.unit)),v.revealAllCursors(y.source,!0)}}i.CursorLeft=Zt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=Zt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1039}})),i.CursorRight=Zt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=Zt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1041}})),i.CursorUp=Zt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=Zt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=Zt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:11}})),i.CursorPageUpSelect=Zt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1035}})),i.CursorDown=Zt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=Zt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=Zt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:12}})),i.CursorPageDownSelect=Zt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1036}})),i.CreateCursor=Zt(new class extends es{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(m,v){if(!v.position)return;let y;v.wholeLine?y=bo.line(m,m.getPrimaryCursorState(),!1,v.position,v.viewPosition):y=bo.moveTo(m,m.getPrimaryCursorState(),!1,v.position,v.viewPosition);const C=m.getCursorStates();if(C.length>1){const S=y.modelState?y.modelState.position:null,x=y.viewState?y.viewState.position:null;for(let E=0,L=C.length;E<L;E++){const T=C[E];if(!(S&&!T.modelState.selection.containsPosition(S))&&!(x&&!T.viewState.selection.containsPosition(x))){C.splice(E,1),m.model.pushStackElement(),m.setCursorStates(v.source,3,C);return}}}C.push(y),m.model.pushStackElement(),m.setCursorStates(v.source,3,C)}}),i.LastCursorMoveToSelect=Zt(new class extends es{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(m,v){if(!v.position)return;const y=m.getLastAddedCursorIndex(),C=m.getCursorStates(),S=C.slice(0);S[y]=bo.moveTo(m,C[y],!0,v.position,v.viewPosition),m.model.pushStackElement(),m.setCursorStates(v.source,3,S)}});class a extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,bo.moveToBeginningOfLine(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(y.source,!0)}}i.CursorHome=Zt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=Zt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,this._exec(v.getCursorStates())),v.revealAllCursors(y.source,!0)}_exec(v){const y=[];for(let C=0,S=v.length;C<S;C++){const x=v[C],E=x.modelState.position.lineNumber;y[C]=_n.fromModelState(x.modelState.move(this._inSelectionMode,E,1,0))}return y}}i.CursorLineStart=Zt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=Zt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,bo.moveToEndOfLine(v,v.getCursorStates(),this._inSelectionMode,y.sticky||!1)),v.revealAllCursors(y.source,!0)}}i.CursorEnd=Zt(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:kn,kbExpr:pt.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:k("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=Zt(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:kn,kbExpr:pt.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:k("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,this._exec(v,v.getCursorStates())),v.revealAllCursors(y.source,!0)}_exec(v,y){const C=[];for(let S=0,x=y.length;S<x;S++){const E=y[S],L=E.modelState.position.lineNumber,T=v.model.getLineMaxColumn(L);C[S]=_n.fromModelState(E.modelState.move(this._inSelectionMode,L,T,0))}return C}}i.CursorLineEnd=Zt(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=Zt(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,bo.moveToBeginningOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(y.source,!0)}}i.CursorTop=Zt(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=Zt(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){v.model.pushStackElement(),v.setCursorStates(y.source,3,bo.moveToEndOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(y.source,!0)}}i.CursorBottom=Zt(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=Zt(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends es{constructor(){super({id:"editorScroll",precondition:void 0,metadata:$r.metadata})}determineScrollMethod(v){const y=[6],C=[1,2,3,4,5,6],S=[4,2],x=[1,3];return y.includes(v.unit)&&S.includes(v.direction)?this._runHorizontalEditorScroll.bind(this):C.includes(v.unit)&&x.includes(v.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(v,y){const C=$r.parse(y);if(!C)return;const S=this.determineScrollMethod(C);S&&S(v,y.source,C)}_runVerticalEditorScroll(v,y,C){const S=this._computeDesiredScrollTop(v,C);if(C.revealCursor){const x=v.getCompletelyVisibleViewRangeAtScrollTop(S);v.setCursorStates(y,3,[bo.findPositionInViewportIfOutside(v,v.getPrimaryCursorState(),x,C.select)])}v.viewLayout.setScrollPosition({scrollTop:S},0)}_computeDesiredScrollTop(v,y){if(y.unit===1){const x=v.viewLayout.getFutureViewport(),E=v.getCompletelyVisibleViewRangeAtScrollTop(x.top),L=v.coordinatesConverter.convertViewRangeToModelRange(E);let T;y.direction===1?T=Math.max(1,L.startLineNumber-y.value):T=Math.min(v.model.getLineCount(),L.startLineNumber+y.value);const D=v.coordinatesConverter.convertModelPositionToViewPosition(new Se(T,1));return v.viewLayout.getVerticalOffsetForLineNumber(D.lineNumber)}if(y.unit===5){let x=0;return y.direction===3&&(x=v.model.getLineCount()-v.cursorConfig.pageSize),v.viewLayout.getVerticalOffsetForLineNumber(x)}let C;y.unit===3?C=v.cursorConfig.pageSize*y.value:y.unit===4?C=Math.round(v.cursorConfig.pageSize/2)*y.value:C=y.value;const S=(y.direction===1?-1:1)*C;return v.viewLayout.getCurrentScrollTop()+S*v.cursorConfig.lineHeight}_runHorizontalEditorScroll(v,y,C){const S=this._computeDesiredScrollLeft(v,C);v.viewLayout.setScrollPosition({scrollLeft:S},0)}_computeDesiredScrollLeft(v,y){const C=(y.direction===4?-1:1)*y.value;return v.viewLayout.getCurrentScrollLeft()+C*v.cursorConfig.typicalHalfwidthCharacterWidth}}i.EditorScrollImpl=f,i.EditorScroll=Zt(new f),i.ScrollLineUp=Zt(new class extends es{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Up,by:$r.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollPageUp=Zt(new class extends es{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Up,by:$r.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollEditorTop=Zt(new class extends es{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Up,by:$r.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollLineDown=Zt(new class extends es{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Down,by:$r.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollPageDown=Zt(new class extends es{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Down,by:$r.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollEditorBottom=Zt(new class extends es{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Down,by:$r.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollLeft=Zt(new class extends es{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Left,by:$r.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}}),i.ScrollRight=Zt(new class extends es{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus}})}runCoreEditorCommand(m,v){i.EditorScroll.runCoreEditorCommand(m,{to:$r.RawDirection.Right,by:$r.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}});class g extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){y.position&&(v.model.pushStackElement(),v.setCursorStates(y.source,3,[bo.word(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position)]),y.revealType!==2&&v.revealAllCursors(y.source,!0,!0))}}i.WordSelect=Zt(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=Zt(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=Zt(new class extends es{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(m,v){if(!v.position)return;const y=m.getLastAddedCursorIndex(),C=m.getCursorStates(),S=C.slice(0),x=C[y];S[y]=bo.word(m,x,x.modelState.hasSelection(),v.position),m.model.pushStackElement(),m.setCursorStates(v.source,3,S)}});class p extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){y.position&&(v.model.pushStackElement(),v.setCursorStates(y.source,3,[bo.line(v,v.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),y.revealType!==2&&v.revealAllCursors(y.source,!1,!0))}}i.LineSelect=Zt(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=Zt(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends es{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,y){if(!y.position)return;const C=v.getLastAddedCursorIndex(),S=v.getCursorStates(),x=S.slice(0);x[C]=bo.line(v,S[C],this._inSelectionMode,y.position,y.viewPosition),v.model.pushStackElement(),v.setCursorStates(y.source,3,x)}}i.LastCursorLineSelect=Zt(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=Zt(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=Zt(new class extends es{constructor(){super({id:"cancelSelection",precondition:pt.hasNonEmptySelection,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(m,v){m.model.pushStackElement(),m.setCursorStates(v.source,3,[bo.cancelSelection(m,m.getPrimaryCursorState())]),m.revealAllCursors(v.source,!0)}}),i.RemoveSecondaryCursors=Zt(new class extends es{constructor(){super({id:"removeSecondaryCursors",precondition:pt.hasMultipleSelections,kbOpts:{weight:kn+1,kbExpr:pt.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(m,v){m.model.pushStackElement(),m.setCursorStates(v.source,3,[m.getPrimaryCursorState()]),m.revealAllCursors(v.source,!0),IR(k("removedCursor","Removed secondary cursors"))}}),i.RevealLine=Zt(new class extends es{constructor(){super({id:"revealLine",precondition:void 0,metadata:Sb.metadata})}runCoreEditorCommand(m,v){const y=v,C=y.lineNumber||0;let S=typeof C=="number"?C+1:parseInt(C)+1;S<1&&(S=1);const x=m.model.getLineCount();S>x&&(S=x);const E=new de(S,1,S,m.model.getLineMaxColumn(S));let L=0;if(y.at)switch(y.at){case Sb.RawAtArgument.Top:L=3;break;case Sb.RawAtArgument.Center:L=1;break;case Sb.RawAtArgument.Bottom:L=4;break}const T=m.coordinatesConverter.convertModelRangeToViewRange(E);m.revealRange(v.source,!1,T,L,0)}}),i.SelectAll=new class extends OW{constructor(){super(jWe)}runDOMCommand(m){Su&&(m.focus(),m.select()),m.ownerDocument.execCommand("selectAll")}runEditorCommand(m,v,y){const C=v._getViewModel();C&&this.runCoreEditorCommand(C,y)}runCoreEditorCommand(m,v){m.model.pushStackElement(),m.setCursorStates("keyboard",3,[bo.selectAll(m,m.getPrimaryCursorState())])}},i.SetSelection=Zt(new class extends es{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(m,v){v.selection&&(m.model.pushStackElement(),m.setCursorStates(v.source,3,[_n.fromModelSelection(v.selection)]))}})})(cr||(cr={}));const Lst=jn.and(pt.textInputFocus,pt.columnSelection);function JC(i,e){ik.registerKeybindingRule({id:i,primary:e,when:Lst,weight:kn+1})}JC(cr.CursorColumnSelectLeft.id,1039);JC(cr.CursorColumnSelectRight.id,1041);JC(cr.CursorColumnSelectUp.id,1040);JC(cr.CursorColumnSelectPageUp.id,1035);JC(cr.CursorColumnSelectDown.id,1042);JC(cr.CursorColumnSelectPageDown.id,1036);function Fre(i){return i.register(),i}var Bre;(function(i){class e extends Mv{runEditorCommand(n,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=Zt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:pt.writable,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,kve.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=Zt(new class extends e{constructor(){super({id:"outdent",precondition:pt.writable,kbOpts:{weight:kn,kbExpr:jn.and(pt.editorTextFocus,pt.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,d0.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=Zt(new class extends e{constructor(){super({id:"tab",precondition:pt.writable,kbOpts:{weight:kn,kbExpr:jn.and(pt.editorTextFocus,pt.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,d0.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=Zt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Rv.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=Zt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:kn,kbExpr:pt.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Rv.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends OW{constructor(){super(lme)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().undo()}},i.Redo=new class extends OW{constructor(){super(cme)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().redo()}}})(Bre||(Bre={}));class zre extends _4{constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){const n=e.get(sr).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function p1(i,e){Fre(new zre("default:"+i,i)),Fre(new zre(i,i,e))}p1("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});p1("replacePreviousChar");p1("compositionType");p1("compositionStart");p1("compositionEnd");p1("paste");p1("cut");class Tst{constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){cr.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Se(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=ka&&t.get(108),s=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){cr.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){cr.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),cr.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),cr.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){cr.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){cr.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){cr.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){cr.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){cr.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){cr.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){cr.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){cr.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){cr.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class Ave{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Qn("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=n;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=n;a++)a>=s&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let h=0;h<n;h++)o[h]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),u=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let u=l;u<=c;u++){const h=u-this._rendLineNumberStart;this._lines[h].onTokensChanged(),s=!0}}return s}}class Ive{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new Ave(this._lineFactory)}_createDomNode(){const e=Nn(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r==null||r.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r==null||r.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new FW(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}const Wf=class Wf{constructor(e,t,n){this._domNode=e,this._lineFactory=t,this._viewportData=n}render(e,t,n,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let o=t;o<=n;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(n,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){const o=r.rendLineNumberStart+r.linesLength,a=n;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){const o=Math.max(0,n-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,n,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,s[c-r],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const s=e.lines[n].getDomNode();s==null||s.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[n+s].getDomNode();r==null||r.remove()}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){Wf._ttPolicy&&(n=Wf._ttPolicy.createHTML(n));const r=this._domNode.lastChild;t||!r?this._domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");Wf._ttPolicy&&(t=Wf._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(n[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const s=Wf._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let u=0;u<r;u++){const h=o[u];l[u]=!1,!(h.getDomNode()||!h.renderLine(u+a,n[u],this._viewportData.lineHeight,this._viewportData,s))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const u=[];for(let h=0;h<r;h++){const d=o[h];u[h]=!1,!(l[h]||!d.renderLine(h+a,n[h],this._viewportData.lineHeight,this._viewportData,s))&&(u[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),u)}}};Wf._ttPolicy=l1("editorViewLayer",{createHTML:e=>e}),Wf._sb=new v4(1e5);let FW=Wf;class Nve extends hl{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new Ive({createLine:()=>new kst(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(50);lo(this.domNode,n),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const n=this._context.configuration.options.get(50);return lo(this.domNode,n),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class kst{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Nn(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,n,s,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(s.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(n)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}}class Mst extends Nve{constructor(e){super(e);const n=this._context.configuration.options.get(146);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Dst extends Nve{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),lo(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;lo(this.domNode,t.get(50));const n=t.get(146);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class e5{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return e5.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new Se(e.afterLineNumber,1)).lineNumber}}}class Ast extends hl{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Nn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(146),s=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const r=n.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const s of n){if(!s.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=Nn(document.createElement("div")),this.domNode.appendChild(r));let o,a;s.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,u,h]=s.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-h),r.setWidth(this.contentWidth+h+c),r.setTop(o-e.scrollTop-l),r.setHeight(a-o+l+u),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}class Ist extends hl{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Nn(document.createElement("div")),Th.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Nn(document.createElement("div")),Th.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new Nst(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,s,r){this._widgets[e.getId()].setPosition(t,n,s,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class Nst{constructor(e,t,n){this._primaryAnchor=new fx(null,null),this._secondaryAnchor=new fx(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Nn(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(146);this._fixedOverflowWidgets=s.get(42),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const n=t.get(146);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(n,this._context.viewModel,this._affinity);function s(r,o,a){if(!r)return new fx(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new fx(r,c)}return new fx(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,s){this._setPosition(s,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,s){const r=e.top,o=r,a=e.top+e.height,l=s.viewportHeight-a,c=r-n,u=o>=n,h=a,d=l>=n;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:d,belowTop:h,left:f}}_layoutHorizontalSegmentInPage(e,t,n,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let h=t.left+n-((u==null?void 0:u.scrollX)??0);if(h+s>l){const d=h-(l-s);h-=d,n-=d}if(h<a){const d=h-a;h-=d,n-=d}return[n,h]}_layoutBoxInPage(e,t,n,s){const r=e.top-n,o=e.top+e.height,a=pc(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,u=a.top+r-((c==null?void 0:c.scrollY)??0),h=a.top+o-((c==null?void 0:c.scrollY)??0),d=sU(l.body),[f,g]=this._layoutHorizontalSegmentInPage(d,a,e.left-s.scrollLeft+this._contentLeft,t),p=22,_=22,m=u>=p,v=h+n<=d.height-_;return this._fixedOverflowWidgets?{fitsAbove:m,aboveTop:Math.max(u,p),fitsBelow:v,belowTop:h,left:g}:{fitsAbove:m,aboveTop:r,fitsBelow:v,belowTop:o,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new gx(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var o,a;const t=r(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),n=((o=this._secondaryAnchor.viewPosition)==null?void 0:o.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,s=r(n,this._affinity,this._lineHeight);return{primary:t,secondary:s};function r(l,c,u){if(!l)return null;const h=e.visibleRangeForPosition(l);if(!h)return null;const d=l.column===1&&c===3?0:h.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new Ure(f,d,u)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const s=this._context.configuration.options.get(50);let r=t.left;return r<e.left?r=Math.max(r,e.left-n+s.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+n-s.typicalFullwidthCharacterWidth),new Ure(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=X8(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new gx(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new gx(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new gx(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new gx(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&X8(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&X8(this._actual.afterRender,this._actual,this._renderData.position)}}class fx{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class gx{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class Ure{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}function X8(i,e,...t){try{return i.call(e,...t)}catch{return null}}class Rve extends g1{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new gi(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const n=Array.from(t);n.sort((r,o)=>r-o),tr(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=[];for(let o=t;o<=n;o++){const a=o-t;s[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new Se(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new Se(c,1)).lineNumber,h=l.convertModelPositionToViewPosition(new Se(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,d=Math.max(u,t),f=Math.min(h,n);for(let g=d;g<=f;g++){const p=g-t;s[p]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>n)continue;const a=o-t;s[a]=r}this._renderData=s}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class Rst extends Rve{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class Pst extends Rve{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Vg((i,e)=>{const t=i.getColor(r0e);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(vse)){const n=i.getColor(vse);n&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${n}; }`),ow(i.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class Ost extends g1{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(n[s++]=u)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,h=c.options.className;return u<h?-1:u>h?1:de.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,s),h=Math.min(l.range.endLineNumber,r);for(let d=u;d<=h;d++){const f=d-s;n[f]+=c}}}_renderNormalDecorations(e,t,n){const s=e.visibleRange.startLineNumber;let r=null,o=!1,a=null,l=!1;for(let c=0,u=t.length;c<u;c++){const h=t[c];if(h.options.isWholeLine)continue;const d=h.options.className,f=!!h.options.showIfCollapsed;let g=h.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new de(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),r===d&&o===f&&de.areIntersectingOrTouching(a,g)){a=de.plusRange(a,g);continue}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,n),r=d,o=f,a=g,l=h.options.shouldFillLineOnLineBreak??!1}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,n)}_renderNormalDecoration(e,t,n,s,r,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const h=l[c];if(h.outsideRenderedLine)continue;const d=h.lineNumber-o;if(r&&h.ranges.length===1){const f=h.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),p=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new Q4(p,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=h.ranges.length;f<g;f++){const p=s&&h.continuesOnNextLine&&g===1,_=h.ranges[f],m='<div class="cdr '+n+'" style="left:'+String(_.left)+"px;width:"+(p?"100%;":String(_.width)+"px;")+'"></div>';a[d]+=m}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Fst extends hl{constructor(e,t,n,s){super(e);const r=this._context.configuration.options,o=r.get(104),a=r.get(75),l=r.get(40),c=r.get(107),u={listenOnDomNode:n.domNode,className:"editor-scrollable "+kU(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new L4(t.domNode,u,this._context.viewLayout.getScrollable())),Th.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Nn(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=(d,f,g)=>{const p={};{const _=d.scrollTop;_&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,d.scrollTop=0)}if(g){const _=d.scrollLeft;_&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,d.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register(Ne(n.domNode,"scroll",d=>h(n.domNode,!0,!0))),this._register(Ne(t.domNode,"scroll",d=>h(t.domNode,!0,!1))),this._register(Ne(s.domNode,"scroll",d=>h(s.domNode,!0,!1))),this._register(Ne(this.scrollbarDomNode.domNode,"scroll",d=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,n=t.get(104),s=t.get(75),r=t.get(40),o=t.get(107),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+kU(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class BW{constructor(e,t,n,s,r){this.startLineNumber=e,this.endLineNumber=t,this.className=n,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class Bst{constructor(e,t,n){this.className=e,this.zIndex=t,this.tooltip=n}}class zst{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class Pve extends g1{_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new zst}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.className,h=c.zIndex;let d=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;r===u?(d=Math.max(o+1,d),o=Math.max(o,f)):(r=u,o=f);for(let g=d;g<=o;g++)s[g].add(new Bst(u,h,c.tooltip))}return s}}class Ust extends hl{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(146);this.domNode=Nn(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Nn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&de.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var o;const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport();for(const a of r){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,n),u=Math.min(a.range.endLineNumber,s),h=((o=a.options.glyphMargin)==null?void 0:o.position)??Tm.Center,d=a.options.zIndex??0;for(let f=c;f<=u;f++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Se(f,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(h);t.push(new Vst(f,p,d,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(de.lift(o));if(!a||!l||l<n||a>s)continue;const c=Math.max(a,n),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Se(c,0)),h=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(r.preference.lane);t.push(new Wst(c,h,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,s)=>n.lineNumber===s.lineNumber?n.laneIndex===s.laneIndex?n.zIndex===s.zIndex?s.type===n.type?n.type===0&&s.type===0?n.className<s.className?-1:1:0:s.type-n.type:s.zIndex-n.zIndex:n.laneIndex-s.laneIndex:n.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new Ag(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const s=t.peek();if(!s)break;const r=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(s),n.domNode.setLeft(r),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const s=this._decorationGlyphsToRender[n],r=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=Nn(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(r),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}}}class Vst{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.className=s,this.type=0}accept(e){return new Hst(this.lineNumber,this.laneIndex,e)}}class Wst{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.widget=s,this.type=1}}class Hst{constructor(e,t,n){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=n}}class $st extends g1{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(147),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(147),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var s;const n=e.selections[0].getPosition();return(s=this._primaryPosition)!=null&&s.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),r),a=[];for(let u=t;u<=n;u++){const h=u-t,d=o[h];let f="";const g=((l=e.visibleRangeForPosition(new Se(u,1)))==null?void 0:l.left)??0;for(const p of d){const _=p.column===-1?g+(p.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Se(u,p.column)).left;if(_>s||this._maxIndentLeft>0&&_>this._maxIndentLeft)break;const m=p.horizontalLine?p.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",v=p.horizontalLine?(((c=e.visibleRangeForPosition(new Se(u,p.horizontalLine.endColumn)))==null?void 0:c.left)??_+this._spaceWidth)-_:this._spaceWidth;f+=`<div class="core-guide ${p.className} ${m}" style="left:${_}px;width:${v}px"></div>`}a[h]=f}this._renderResult=a}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?$0.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?$0.EnabledForActive:$0.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);o=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let h=e;h<=t;h++){const d=new Array;u.push(d);const f=s?s[h-e]:[],g=new Ag(f),p=r?r[h-e]:0;for(let _=1;_<=p;_++){const m=(_-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=h&&h<=a&&_===l;d.push(...g.takeWhile(C=>C.visibleColumn<m)||[]);const y=g.peek();(!y||y.visibleColumn!==m||y.horizontalLine)&&d.push(new k0(m,-1,`core-guide-indent lvl-${(_-1)%30}`+(v?" indent-active":""),null,-1,-1))}d.push(...g.takeWhile(_=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function ny(i){if(!(i&&i.isTransparent()))return i}Vg((i,e)=>{const t=[{bracketColor:l0e,guideColor:jZe,guideColorActive:QZe},{bracketColor:c0e,guideColor:KZe,guideColorActive:JZe},{bracketColor:u0e,guideColor:qZe,guideColorActive:eQe},{bracketColor:h0e,guideColor:XZe,guideColorActive:tQe},{bracketColor:d0e,guideColor:YZe,guideColorActive:nQe},{bracketColor:f0e,guideColor:ZZe,guideColorActive:iQe}],n=new S0e,s=[{indentColor:vk,indentColorActive:yk},{indentColor:LZe,indentColorActive:AZe},{indentColor:TZe,indentColorActive:IZe},{indentColor:kZe,indentColorActive:NZe},{indentColor:MZe,indentColorActive:RZe},{indentColor:DZe,indentColorActive:PZe}],r=t.map(a=>{const l=i.getColor(a.bracketColor),c=i.getColor(a.guideColor),u=i.getColor(a.guideColorActive),h=ny(ny(c)??(l==null?void 0:l.transparent(.3))),d=ny(ny(u)??l);if(!(!h||!d))return{guideColor:h,guideColorActive:d}}).filter(Hw),o=s.map(a=>{const l=i.getColor(a.indentColor),c=i.getColor(a.indentColorActive),u=ny(l),h=ny(c);if(!(!u||!h))return{indentColor:u,indentColorActive:h}}).filter(Hw);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class Y8{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Gst{constructor(){this._currentVisibleRange=new de(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class jst{constructor(e,t,n,s,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=s,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class Kst{constructor(e,t,n,s,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=s,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];o=Math.min(o,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const YO=class YO extends hl{constructor(e,t){super(e);const n=this._context.configuration,s=this._context.configuration.options,r=s.get(50),o=s.get(147);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(101),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new Dre(n,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Ive({createLine:()=>new eg(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,Th.write(this.domNode,8),this.domNode.setClassName(`view-lines ${bw}`),lo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Ro(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Ro(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Gst,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(116).enabled,this._maxNumberStickyLines=s.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(50),s=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,lo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Dre(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=n;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new jst(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Kst(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new Se(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new Se(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===eg.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const s=new Y8(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=de.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const r=[];let o=0;const a=new Y8(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Se(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let h=s.startLineNumber;h<=s.endLineNumber;h++){if(h<c||h>u)continue;const d=h===s.startLineNumber?s.startColumn:1,f=h!==s.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(h):s.endColumn,p=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,d,g,a);if(p){if(t&&h<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Se(h+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new Dit(p.outsideRenderedLine,h,Q4.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new Y8(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Ait(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth(null))}return r&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),ka&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,r,o){const a=e.top,l=e.height,c=a+l;let u,h,d;if(r&&r.length>0){let m=r[0].startLineNumber,v=r[0].endLineNumber;for(let y=1,C=r.length;y<C;y++){const S=r[y];m=Math.min(m,S.startLineNumber),v=Math.max(v,S.endLineNumber)}u=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(m),d=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(s)u=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),d=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let g=0,p=0;if(f)n||(g=this._lineHeight);else{const m=l/this._lineHeight,v=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),y=Math.min(m/2,v);g=y*this._lineHeight,p=Math.max(0,y-1)*this._lineHeight}n||(o===0||o===4)&&(p+=this._lineHeight),h-=g,d+=p;let _;if(d-h>l){if(!u)return-1;_=h}else if(o===5||o===6)if(o===6&&a<=h&&d<=c)_=a;else{const m=Math.max(5*this._lineHeight,l*.2),v=h-m,y=d-l;_=Math.max(y,v)}else if(o===1||o===2)if(o===2&&a<=h&&d<=c)_=a;else{const m=(h+d)/2;_=Math.max(0,m-l/2)}else _=this._computeMinimumScrolling(a,c,h,d,o===3,o===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(146),s=t.left,r=s+t.width-n.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const h of u.ranges)o=Math.min(o,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}return e.minimalReveal||(o=Math.max(0,o-YO.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,r,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,s,r,o){e=e|0,t=t|0,n=n|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-n<a){if(r)return n;if(o)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}};YO.HORIZONTAL_EXTRA_PX=30;let zW=YO;class qst extends Pve{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(146);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(n[s++]=new BW(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const u=a.options.firstLineDecorationClassName;u&&(n[s++]=new BW(a.range.startLineNumber,a.range.startLineNumber,u,a.options.linesDecorationsTooltip??null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const u=c-t,h=s[u].getDecorations();let d="";for(const f of h){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,d+=g}l[u]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Xst extends Pve{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(n[s++]=new BW(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=[];for(let o=t;o<=n;o++){const a=o-t,l=s[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const Ap=class Ap{constructor(e,t,n,s){this._rgba8Brand=void 0,this.r=Ap._clamp(e),this.g=Ap._clamp(t),this.b=Ap._clamp(n),this.a=Ap._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Ap.Empty=new Ap(0,0,0,0);let Sg=Ap;const ZO=class ZO extends Be{static getInstance(){return this._INSTANCE||(this._INSTANCE=new ZO),this._INSTANCE}constructor(){super(),this._onDidChange=new me,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Es.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Es.getColorMap();if(!e){this._colors=[Sg.Empty],this._backgroundIsLight=!0;return}this._colors=[Sg.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new Sg(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};ZO._INSTANCE=null;let CP=ZO;const Yst=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),Zst=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:95:i);class Z2{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Z2.soften(e,12/15),this.charDataLight=Z2.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=fR(e[s]*t);return n}renderChar(e,t,n,s,r,o,a,l,c,u,h){const d=1*this.scale,f=2*this.scale,g=h?1:f;if(t+d>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const p=u?this.charDataLight:this.charDataNormal,_=Zst(s,c),m=e.width*4,v=a.r,y=a.g,C=a.b,S=r.r-v,x=r.g-y,E=r.b-C,L=Math.max(o,l),T=e.data;let D=_*d*f,I=n*m+t*4;for(let N=0;N<g;N++){let P=I;for(let O=0;O<d;O++){const V=p[D++]/255*(o/255);T[P++]=v+S*V,T[P++]=y+x*V,T[P++]=C+E*V,T[P++]=L}I+=m}}blockRenderChar(e,t,n,s,r,o,a,l){const c=1*this.scale,u=2*this.scale,h=l?1:u;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,f=.5*(r/255),g=o.r,p=o.g,_=o.b,m=s.r-g,v=s.g-p,y=s.b-_,C=g+m*f,S=p+v*f,x=_+y*f,E=Math.max(r,a),L=e.data;let T=n*d+t*4;for(let D=0;D<h;D++){let I=T;for(let N=0;N<c;N++)L[I++]=C,L[I++]=S,L[I++]=x,L[I++]=E;T+=d}}}const Vre={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Wre=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=Vre[i[t]]<<4|Vre[i[t+1]]&15;return e},Hre={1:Gw(()=>Wre("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Gw(()=>Wre("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class uL{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Hre[e]?n=new Z2(Hre[e](),e):n=uL.createFromSampleData(uL.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let s=0;for(const r of Yst)n.fillText(String.fromCharCode(r),s,16/2),s+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=uL._downsample(e,t);return new Z2(s,t)}static _downsampleChar(e,t,n,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let u=0;u<a;u++){const h=u/a*16,d=(u+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let _=0,m=0;for(let y=h;y<d;y++){const C=t+Math.floor(y)*3840,S=1-(y-Math.floor(y));for(let x=g;x<p;x++){const E=1-(x-Math.floor(x)),L=C+Math.floor(x)*4,T=E*S;m+=T,_+=e[L]*e[L+3]/255*T}}const v=_/m;c=Math.max(c,v),n[l++]=fR(v)}}return c}static _downsample(e,t){const n=2*t*1*t,s=n*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<s;u++)r[u]*=c}return r}}const Qst=rl?'"Segoe WPC", "Segoe UI", sans-serif':Tn?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',Jst=140,ert=2;class ww{constructor(e,t,n){const s=e.options,r=s.get(144),o=s.get(146),a=o.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(106),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Qst,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=ww._getSectionHeaderColor(t,n.getColor(1)),this.charRenderer=Gw(()=>uL.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=ww._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=ww._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(bje);return n?new Sg(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(wje);return t?Sg._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const n=e.getColor(lk);return n?new Sg(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class hL{constructor(e,t,n,s,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,s,r,o,a,l,c,u,h){const d=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let x=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(x+=Math.max(0,r-e.lineHeight-e.paddingBottom));const E=Math.max(1,Math.floor(r*r/x)),L=Math.max(0,e.minimapHeight-E),T=L/(u-r),D=c*T,I=L>0,N=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),P=Math.floor(e.paddingTop/e.lineHeight);return new hL(c,u,I,T,D,E,P,1,Math.min(a,N))}let _;if(o&&n!==a){const x=n-t+1;_=Math.floor(x*f/d)}else{const x=r/p;_=Math.floor(x*f/d)}const m=Math.floor(e.paddingTop/p);let v=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const x=r/p;v=Math.max(v,x-1)}let y;if(v>0){const x=r/p;y=(m+a+v-x-1)*f/d}else y=Math.max(0,(m+a)*f/d-_);y=Math.min(e.minimapHeight-_,y);const C=y/(u-r),S=c*C;if(g>=m+a+v){const x=y>0;return new hL(c,u,x,C,S,_,m,1,a)}else{let x;t>1?x=t+m:x=Math.max(1,c/p);let E,L=Math.max(1,Math.floor(x-S*d/f));L<m?(E=m-L+1,L=1):(E=0,L=Math.max(1,L-m)),h&&h.scrollHeight===u&&(h.scrollTop>c&&(L=Math.min(L,h.startLineNumber),E=Math.max(E,h.topPaddingLineCount)),h.scrollTop<c&&(L=Math.max(L,h.startLineNumber),E=Math.min(E,h.topPaddingLineCount)));const T=Math.min(a,L-E+g-1),D=(c-s)/p;let I;return c>=e.paddingTop?I=(t-L+E+D)*f/d:I=c/e.paddingTop*(E+D)*f/d,new hL(c,u,!0,C,I,_,E,L,T)}}}const QO=class QO{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};QO.INVALID=new QO(-1);let SP=QO;class $re{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Ave({createLine:()=>SP.INVALID}),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,r=n.length;s<r;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class Vq{constructor(e,t,n,s){this._backgroundFillData=Vq._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,r=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let h=0;h<e;h++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Q2{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=Jb.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/s,o=r/2;if(!n||n.minimapLines.length===0){const _=[];if(_[0]=1,s>1){for(let m=0,v=s-1;m<v;m++)_[m]=Math.round(m*r+o);_[s-1]=t}return[new Q2(r,_),[]]}const a=n.minimapLines,l=a.length,c=[];let u=0,h=0,d=1;const f=10;let g=[],p=null;for(let _=0;_<s;_++){const m=Math.max(d,Math.round(_*r)),v=Math.max(m,Math.round((_+1)*r));for(;u<l&&a[u]<m;){if(g.length<f){const C=u+1+h;p&&p.type==="deleted"&&p._oldIndex===u-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:u,deleteFromLineNumber:C,deleteToLineNumber:C},g.push(p)),h--}u++}let y;if(u<l&&a[u]<=v)y=a[u],u++;else if(_===0?y=1:_+1===s?y=t:y=Math.round(_*r+o),g.length<f){const C=u+1+h;p&&p.type==="inserted"&&p._i===_-1?p.insertToLineNumber++:(p={type:"inserted",_i:_,insertFromLineNumber:C,insertToLineNumber:C},g.push(p)),h++}c[_]=y,d=y}if(g.length<f)for(;u<l;){const _=u+1+h;p&&p.type==="deleted"&&p._oldIndex===u-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:u,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(p)),h--,u++}else g=[{type:"flush"}];return[new Q2(r,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class trt extends hl{constructor(e){super(e),this._sectionHeaderCache=new ak(10,1.5),this.tokensColorTracker=CP.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new ww(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Q2.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new xb(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new ww(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=Q2.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const s=[];for(let r=0,o=t-e+1;r<o;r++)n[r]?s[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new gi(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const n=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var r;return!((r=s.options.minimap)!=null&&r.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const r of n){if(!r.options.minimap)continue;const o=r.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);s.push(new vve(new de(a,o.startColumn,l,o.endColumn),r.options))}return s}return n}getSectionHeaderDecorationsInViewport(e,t){const n=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-r)),this._getMinimapDecorationsInViewport(e,t).filter(o=>{var a;return!!((a=o.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new de(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new de(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}getSectionHeaderText(e,t){var o;const n=(o=e.options.minimap)==null?void 0:o.sectionHeaderText;if(!n)return null;const s=this._sectionHeaderCache.get(n);if(s)return s;const r=t(n);return this._sectionHeaderCache.set(n,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new de(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class xb extends Be{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(xie),this._domNode=Nn(document.createElement("div")),Th.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Nn(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Nn(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Nn(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Nn(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Nn(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=vr(this._domNode.domNode,it.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=pc(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(n,u,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new E4,this._sliderPointerDownListener=vr(this._slider.domNode,it.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Zo.addTarget(this._domNode.domNode),this._sliderTouchStartListener=Ne(this._domNode.domNode,vi.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=Ne(this._domNode.domNode,vi.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=vr(this._domNode.domNode,vi.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=pc(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(rl&&c>Jst){this._model.setScrollTop(n.scrollTop);return}const u=o-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&r(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Vq(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(xie),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=hL.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(de.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((d,f)=>(d.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const u=new Gre(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,o),this._renderDecorationsLineHighlights(c,n,u,e,o);const h=new Gre(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,o,l,a,s),this._renderDecorationsHighlights(c,n,h,e,o,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,n,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[u,h]=c;for(let g=u;g<=h;g++)n.set(g,!0);const d=s.getYForLineNumber(u,r),f=s.getYForLineNumber(h,r);a>=d||(a>o&&e.fillRect(id,o,e.canvas.width,a-o),o=d),a=f}a>o&&e.fillRect(id,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=s.intersectWithViewport(l.range);if(!u)continue;const[h,d]=u,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(let p=h;p<=d;p++){if(n.has(p))continue;n.set(p,!0);const _=s.getYForLineNumber(h,r);e.fillRect(id,_,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=s.intersectWithViewport(c);if(!u)continue;const[h,d]=u;for(let f=h;f<=d;f++)this.renderDecorationOnLine(e,n,c,this._selectionColor,s,f,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,n,s,r,o,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const h=s.intersectWithViewport(c.range);if(!h)continue;const[d,f]=h,g=u.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=d;p<=f;p++)switch(u.position){case 1:this.renderDecorationOnLine(e,n,c.range,g,s,p,r,r,o,a,l);continue;case 2:{const _=s.getYForLineNumber(p,r);this.renderDecoration(e,g,2,_,ert,r);continue}}}}renderDecorationOnLine(e,t,n,s,r,o,a,l,c,u,h){const d=r.getYForLineNumber(o,l);if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,p=f===o?n.startColumn:1,_=g===o?n.endColumn:this._model.getLineMaxColumn(o),m=this.getXOffsetForPosition(t,o,p,c,u,h),v=this.getXOffsetForPosition(t,o,_,c,u,h);this.renderDecoration(e,s,m,d,v-m,a)}getXOffsetForPosition(e,t,n,s,r,o){if(n===1)return id;if((n-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[id];let u=id;for(let h=1;h<c.length+1;h++){const d=c.charCodeAt(h-1),f=d===9?s*r:Em(d)?2*r:r,g=u+f;if(g>=o){l[h]=o;break}l[h]=g,u=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,r,o)}_renderSectionHeaders(e){var p;const t=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,r=n*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,h=u,d=this._decorationsCanvas.domNode.getContext("2d");d.letterSpacing=s+"px",d.font="500 "+n+"px "+this._model.options.sectionHeaderFontFamily,d.strokeStyle=h,d.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((_,m)=>_.range.startLineNumber-m.range.startLineNumber);const g=xb._fitSectionHeader.bind(null,d,o-id);for(const _ of f){const m=e.getYForLineNumber(_.range.startLineNumber,t)+n,v=m-n,y=v+2,C=this._model.getSectionHeaderText(_,g);xb._renderSectionLabel(d,C,((p=_.options.minimap)==null?void 0:p.sectionHeaderStyle)===2,l,u,o,v,r,m,y)}}static _fitSectionHeader(e,t,n){if(!n)return n;const s="…",r=e.measureText(n).width,o=e.measureText(s).width;if(r<=t||r<=o)return n;const a=n.length,l=r/n.length,c=Math.floor((t-o)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(n[u-1]);)--u;return n.substring(0,u)+s+n.substring(a-(c-u))}static _renderSectionLabel(e,t,n,s,r,o,a,l,c,u){t&&(e.fillStyle=s,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,id,c)),n&&(e.beginPath(),e.moveTo(0,u),e.lineTo(o,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const V=this._lastRenderData._get();return new $re(e,V.imageData,V.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=xb._renderUntouchedLines(r,e.topPaddingLineCount,t,n,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),u=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),_=this._model.options.renderMinimap,m=this._model.options.charRenderer(),v=this._model.options.fontScale,y=this._model.options.minimapCharWidth,S=(_===1?2:3)*v,x=s>S?Math.floor((s-S)/2):0,E=d.a/255,L=new Sg(Math.round((d.r-h.r)*E+h.r),Math.round((d.g-h.g)*E+h.g),Math.round((d.b-h.b)*E+h.b),255);let T=e.topPaddingLineCount*s;const D=[];for(let V=0,z=n-t+1;V<z;V++)l[V]&&xb._renderLine(r,L,d.a,p,_,y,g,f,m,T,x,u,c[V],v,s),D[V]=new SP(T),T+=s;const I=o===-1?0:o,P=(a===-1?r.height:a)-I;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,I,r.width,P),new $re(e,r,D)}static _renderUntouchedLines(e,t,n,s,r,o){const a=[];if(!o){for(let T=0,D=s-n+1;T<D;T++)a[T]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,u=l.rendLineNumberStart,h=l.lines,d=h.length,f=e.width,g=e.data,p=(s-n+1)*r*f*4;let _=-1,m=-1,v=-1,y=-1,C=-1,S=-1,x=t*r;for(let T=n;T<=s;T++){const D=T-n,I=T-u,N=I>=0&&I<d?h[I].dy:-1;if(N===-1){a[D]=!0,x+=r;continue}const P=N*f*4,O=(N+r)*f*4,V=x*f*4,z=(x+r)*f*4;y===P&&S===V?(y=O,S=z):(v!==-1&&(g.set(c.subarray(v,y),C),_===-1&&v===0&&v===C&&(_=y),m===-1&&y===p&&v===C&&(m=v)),v=P,y=O,C=V,S=z),a[D]=!1,x+=r}v!==-1&&(g.set(c.subarray(v,y),C),_===-1&&v===0&&v===C&&(_=y),m===-1&&y===p&&v===C&&(m=v));const E=_===-1?-1:_/(f*4),L=m===-1?-1:m/(f*4);return[E,L,a]}static _renderLine(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p){const _=f.content,m=f.tokens,v=e.width-o,y=p===1;let C=id,S=0,x=0;for(let E=0,L=m.getCount();E<L;E++){const T=m.getEndOffset(E),D=m.getForeground(E),I=a.getColor(D);for(;S<T;S++){if(C>v)return;const N=_.charCodeAt(S);if(N===9){const P=d-(S+x)%d;x+=P-1,C+=P*o}else if(N===32)C+=o;else{const P=Em(N)?2:1;for(let O=0;O<P;O++)if(r===2?c.blockRenderChar(e,C,u+h,I,l,t,n,y):c.renderChar(e,C,u+h,N,I,l,t,n,g,s,y),C+=o,C>v)return}}}}}class Gre{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class nrt extends hl{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Nn(document.createElement("div")),Th.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Nn(document.createElement("div")),Th.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=Nn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()],s=t?t.preference:null,r=t==null?void 0:t.stackOridinal;return n.preference===s&&n.stack===r?(this._updateMaxMinWidth(),!1):(n.preference=s,n.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var n,s;let e=0;const t=Object.keys(this._widgets);for(let r=0,o=t.length;r<o;r++){const a=t[r],c=(s=(n=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:s.call(n);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const n=e.domNode;if(e.preference===null){n.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=n.domNode.clientHeight;n.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else n.setTop(0);e.stack!==void 0?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(s)}else if(e.preference===2)n.domNode.style.right="50%",e.stack!==void 0?(n.setTop(t[2]),t[2]+=n.domNode.clientHeight):n.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;n.setTop(r+l.top),n.setLeft(o+l.left),n.setPosition("fixed")}else n.setTop(r),n.setLeft(o),n.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=pc(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),n=Array.from({length:3},()=>0);t.sort((s,r)=>(this._widgets[s].stack||0)-(this._widgets[r].stack||0));for(let s=0,r=t.length;s<r;s++){const o=t[s];this._renderWidget(this._widgets[o],n)}}}class irt{constructor(e,t){const n=e.options;this.lineHeight=n.get(67),this.pixelRatio=n.get(144),this.overviewRulerLanes=n.get(83),this.renderBorder=n.get(82);const s=t.getColor(BZe);this.borderColor=s?s.toString():null,this.hideCursor=n.get(59);const r=t.getColor(z4);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(o0e);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(a0e);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=n.get(73),c=l.enabled,u=l.side,h=t.getColor(zZe),d=Es.getDefaultBackground();h?this.backgroundColor=h:c&&u==="right"?this.backgroundColor=d:this.backgroundColor=null;const g=n.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=_}_initLanes(e,t,n){const s=t-e;if(n>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,u=l+r+a;return[[0,l,c,l,u,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(n===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&$e.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class srt extends hl{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Nn(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Es.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new Se(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new irt(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++){let s=this._settings.cursorColorSingle;n>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,n)=>Se.compare(t.position,n.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?$e.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(j2.compareByRenderingProps),this._actualShouldRender===1&&!j2.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!tr(this._renderedCursorPositions,this._cursorPositions,(g,p)=>g.position.lineNumber===p.position.lineNumber&&g.color===p.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,s=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,u=c/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=$e.Format.CSS.formatHexA(e),h.fillRect(0,0,n,s)):(h.clearRect(0,0,n,s),h.fillStyle=$e.Format.CSS.formatHexA(e),h.fillRect(0,0,n,s)):h.clearRect(0,0,n,s);const d=this._settings.x,f=this._settings.w;for(const g of t){const p=g.color,_=g.data;h.fillStyle=p;let m=0,v=0,y=0;for(let C=0,S=_.length/3;C<S;C++){const x=_[3*C],E=_[3*C+1],L=_[3*C+2];let T=o.getVerticalOffsetForLineNumber(E)*l|0,D=(o.getVerticalOffsetForLineNumber(L)+r)*l|0;if(D-T<c){let N=(T+D)/2|0;N<u?N=u:N+u>s&&(N=s-u),T=N-u,D=N+u}T>y+1||x!==m?(C!==0&&h.fillRect(d[m],v,f[m],y-v),m=x,v=T,y=D):D>y&&(y=D)}h.fillRect(d[m],v,f[m],y-v)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,p=g/2|0,_=this._settings.x[7],m=this._settings.w[7];let v=-100,y=-100,C=null;for(let S=0,x=this._cursorPositions.length;S<x;S++){const E=this._cursorPositions[S].color;if(!E)continue;const L=this._cursorPositions[S].position;let T=o.getVerticalOffsetForLineNumber(L.lineNumber)*l|0;T<p?T=p:T+p>s&&(T=s-p);const D=T-p,I=D+g;D>y+1||E!==C?(S!==0&&C&&h.fillRect(_,v,m,y-v),v=D,y=I):I>y&&(y=I),C=E,h.fillStyle=E}C&&h.fillRect(_,v,m,y-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,s),h.moveTo(1,0),h.lineTo(n,0),h.stroke())}}class jre{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Ove{constructor(e,t,n,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class rrt{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Ove.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=n/s,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const C=u.getColorZones();if(C){a.push(C);continue}}const h=this._getVerticalOffsetForLine(u.startLineNumber),d=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:h+u.heightInLines*t,f=Math.floor(r*h),g=Math.floor(r*d);let p=Math.floor((f+g)/2),_=g-p;_<o&&(_=o),p-_<0&&(p=_),p+_>n&&(p=n-_);const m=u.color;let v=this._color2Id[m];v||(v=++this._lastAssignedId,this._color2Id[m]=v,this._id2Color[v]=m);const y=new jre(p-_,p+_,v);u.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(jre.compare),a}}class ort extends wk{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=Nn(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new rrt(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(67)),this._zoneManager.setPixelRatio(n.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,s,e),!0}_renderOneLane(e,t,n,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,u=l.from,h=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=n[r],o=u,a=h):a>=u?a=Math.max(a,h):(e.fillRect(0,o,s,a-o),o=u,a=h)}e.fillRect(0,o,s,a-o)}}class art extends hl{constructor(e){super(e),this.domNode=Nn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),r=s;let o=t-e;for(;o>0;){const a=Nn(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class lrt extends hl{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(104);this._useShadows=n.useShadows,this._domNode=Nn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(104);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class crt{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class urt{constructor(e,t){this.lineNumber=e,this.ranges=t}}function hrt(i){return new crt(i)}function drt(i){return new urt(i.lineNumber,i.ranges.map(hrt))}const os=class os extends g1{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<n.length;c++)n[c].lineNumber===a&&(r=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,h=c.left+c.width,d={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;VD(u-g)<s?d.top=2:u>g&&(d.top=1),VD(h-p)<s?f.top=2:g<h&&h<p&&(f.top=1)}else r&&(d.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;VD(u-g)<s?d.bottom=2:g<u&&u<p&&(d.bottom=1),VD(h-p)<s?f.bottom=2:h<p&&(f.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=d,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(drt);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,s,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const u=s[l],h=u.lineNumber,d=h-t,f=n&&h===o?1:0,g=n&&h!==o&&h===a?1:0;let p="",_="";for(let m=0,v=u.ranges.length;m<v;m++){const y=u.ranges[m];if(r){const S=y.startStyle,x=y.endStyle;if(S.top===1||S.bottom===1){p+=this._createSelectionPiece(f,g,os.SELECTION_CLASS_NAME,y.left-os.ROUNDED_PIECE_WIDTH,os.ROUNDED_PIECE_WIDTH);let E=os.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(E+=" "+os.SELECTION_TOP_RIGHT),S.bottom===1&&(E+=" "+os.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(f,g,E,y.left-os.ROUNDED_PIECE_WIDTH,os.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){p+=this._createSelectionPiece(f,g,os.SELECTION_CLASS_NAME,y.left+y.width,os.ROUNDED_PIECE_WIDTH);let E=os.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(E+=" "+os.SELECTION_TOP_LEFT),x.bottom===1&&(E+=" "+os.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(f,g,E,y.left+y.width,os.ROUNDED_PIECE_WIDTH)}}let C=os.SELECTION_CLASS_NAME;if(r){const S=y.startStyle,x=y.endStyle;S.top===0&&(C+=" "+os.SELECTION_TOP_LEFT),S.bottom===0&&(C+=" "+os.SELECTION_BOTTOM_LEFT),x.top===0&&(C+=" "+os.SELECTION_TOP_RIGHT),x.bottom===0&&(C+=" "+os.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(f,g,C,y.left,y.width)}e[d][0]+=p,e[d][1]+=_}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=n;o<=s;o++){const a=o-n;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};os.SELECTION_CLASS_NAME="selected-text",os.SELECTION_TOP_LEFT="top-left-radius",os.SELECTION_BOTTOM_LEFT="bottom-left-radius",os.SELECTION_TOP_RIGHT="top-right-radius",os.SELECTION_BOTTOM_RIGHT="bottom-right-radius",os.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",os.ROUNDED_PIECE_WIDTH=10;let UW=os;Vg((i,e)=>{const t=i.getColor(nje);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function VD(i){return i<0?-i:i}class Kre{constructor(e,t,n,s,r,o,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=s,this.height=r,this.textContent=o,this.textContentClassName=a}}var ug;(function(i){i[i.Single=0]="Single",i[i.MultiPrimary=1]="MultiPrimary",i[i.MultiSecondary=2]="MultiSecondary"})(ug||(ug={}));class qre{constructor(e,t){this._context=e;const n=this._context.configuration.options,s=n.get(50);this._cursorStyle=n.get(28),this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Nn(document.createElement("div")),this._domNode.setClassName(`cursor ${bw}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),lo(this._domNode,s),this._domNode.setDisplay("none"),this._position=new Se(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case ug.Single:this._pluralityClass="";break;case ug.MultiPrimary:this._pluralityClass="cursor-primary";break;case ug.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),lo(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[s,r]=KUe(n,t-1);return[new Se(e,s+1),n.substring(s,r)]}_prepareRender(e){let t="",n="";const[s,r]=this._getGraphemeAwarePosition();if(this._cursorStyle===Dr.Line||this._cursorStyle===Dr.LineThin){const d=e.visibleRangeForPosition(s);if(!d||d.outsideRenderedLine)return null;const f=Nt(this._domNode.domNode);let g;this._cursorStyle===Dr.Line?(g=rne(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=r,n=this._getTokenClassName(s))):g=rne(f,1);let p=d.left,_=0;g>=2&&p>=1&&(_=1,p-=_);const m=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new Kre(m,p,_,g,this._lineHeight,t,n)}const o=e.linesVisibleRangesForRange(new de(s.lineNumber,s.column,s.lineNumber,s.column+r.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=r==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Dr.Block&&(t=r,n=this._getTokenClassName(s));let u=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===Dr.Underline||this._cursorStyle===Dr.UnderlineThin)&&(u+=this._lineHeight-2,h=2),new Kre(u,l.left,0,c,h,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${bw} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const VL=class VL extends hl{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new qre(this._context,ug.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Nn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new n1,this._cursorFlatBlinkInterval=new Zj,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.setPlurality(t.length?ug.MultiPrimary:ug.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new qre(this._context,ug.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],s)}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},VL.BLINK_INTERVAL,Nt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},VL.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Dr.Line:e+=" cursor-line-style";break;case Dr.Block:e+=" cursor-block-style";break;case Dr.Underline:e+=" cursor-underline-style";break;case Dr.LineThin:e+=" cursor-line-thin-style";break;case Dr.BlockOutline:e+=" cursor-block-outline-style";break;case Dr.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};VL.BLINK_INTERVAL=500;let VW=VL;Vg((i,e)=>{const t=[{class:".cursor",foreground:z4,background:XK},{class:".cursor-primary",foreground:o0e,background:wZe},{class:".cursor-secondary",foreground:a0e,background:CZe}];for(const n of t){const s=i.getColor(n.foreground);if(s){let r=i.getColor(n.background);r||(r=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${s}; border-color: ${s}; color: ${r}; }`),ow(i.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const Z8=()=>{throw new Error("Invalid change accessor")};class frt extends hl{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Nn(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Nn(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.viewModel.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==u.afterViewLineNumber||h.height!==u.heightInPx)&&(s.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Se(o,this._context.viewModel.model.getLineMaxColumn(o))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const s={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};grt(e,s),s.addZone=Z8,s.removeZone=Z8,s.layoutZone=Z8}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Nn(t.domNode),marginDomNode:t.marginDomNode?Nn(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){di(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){di(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let u=0,h=0,d="none";n.hasOwnProperty(l)?(u=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,d="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(h),c.domNode.setDisplay(d),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(d))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function grt(i,e){try{return i(e)}catch(t){di(t)}}class prt extends g1{constructor(e){super(),this._context=e,this._options=new Xre(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Xre(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,r=new Array(s);for(let a=0;a<s;a++)r[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,r);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const d of h){if(d.endLineNumber<a||d.startLineNumber>a)continue;const f=d.startLineNumber===a?d.startColumn:c.minColumn,g=d.endLineNumber===a?d.endColumn:c.maxColumn;f<g&&(u||(u=[]),u.push(new pve(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,n,s){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(YK),o=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,u=s.minColumn-1,h=this._options.renderWhitespace==="boundary",d=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,_=this._options.spaceWidth,m=Math.abs(p-_),v=Math.abs(g-_),y=m<v?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let S="",x=!1,E=sl(a),L;E===-1?(x=!0,E=l,L=l):L=t1(a);let T=0,D=n&&n[T],I=0;for(let N=u;N<l;N++){const P=a.charCodeAt(N);if(D&&N>=D.endOffset&&(T++,D=n&&n[T]),P!==9&&P!==32||d&&!x&&N<=L)continue;if(h&&N>=E&&N<=L&&P===32){const V=N-1>=0?a.charCodeAt(N-1):0,z=N+1<l?a.charCodeAt(N+1):0;if(V!==32&&z!==32)continue}if(h&&c&&N===l-1){const V=N-1>=0?a.charCodeAt(N-1):0;if(P===32&&V!==32&&V!==9)continue}if(n&&(!D||D.startOffset>N||D.endOffset<=N))continue;const O=e.visibleRangeForPosition(new Se(t,N+1));O&&(o?(I=Math.max(I,O.left),P===9?S+=this._renderArrow(f,_,O.left):S+=`<circle cx="${(O.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):P===9?S+=`<div class="mwh" style="left:${O.left}px;height:${f}px;">${C?"￫":"→"}</div>`:S+=`<div class="mwh" style="left:${O.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return o?(I=Math.round(I+_),`<svg style="bottom:0;position:absolute;width:${I}px;height:${f}px" viewBox="0 0 ${I} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+S+"</svg>"):S}_renderArrow(e,t,n){const s=t/7,r=t,o=e/2,a=n,l={x:0,y:s/2},c={x:100/125*r,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},h={x:u.x+.1*c.x,y:u.y+.1*c.x},d={x:h.x+.35*c.x,y:h.y-.35*c.x},f={x:d.x,y:-d.y},g={x:h.x,y:-h.y},p={x:u.x,y:-u.y},_={x:c.x,y:-c.y},m={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,h,d,f,g,p,_,m].map(C=>`${(a+C.x).toFixed(2)} ${(o+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Xre{constructor(e){const t=e.options,n=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class mrt{constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new de(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class _rt{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class vrt{constructor(e,t,n){this.configuration=e,this.theme=new _rt(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var yrt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},brt=function(i,e){return function(t,n){e(t,n,i)}};let WW=class extends wk{constructor(e,t,n,s,r,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new gi(1,1,1,1)],this._renderAnimationFrame=null;const l=new Tst(t,s,r,e);this._context=new vrt(t,n,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(RW,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Nn(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Nn(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Nn(document.createElement("div")),Th.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Fst(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new zW(this._context,this._linesContent),this._viewZones=new frt(this._context),this._viewParts.push(this._viewZones);const c=new srt(this._context);this._viewParts.push(c);const u=new lrt(this._context);this._viewParts.push(u);const h=new Mst(this._context);this._viewParts.push(h),h.addDynamicOverlay(new Rst(this._context)),h.addDynamicOverlay(new UW(this._context)),h.addDynamicOverlay(new $st(this._context)),h.addDynamicOverlay(new Ost(this._context)),h.addDynamicOverlay(new prt(this._context));const d=new Dst(this._context);this._viewParts.push(d),d.addDynamicOverlay(new Pst(this._context)),d.addDynamicOverlay(new Xst(this._context)),d.addDynamicOverlay(new qst(this._context)),d.addDynamicOverlay(new mP(this._context)),this._glyphMarginWidgets=new Ust(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new _P(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(d.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new Ist(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new VW(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new nrt(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new art(this._context);this._viewParts.push(g);const p=new Ast(this._context);this._viewParts.push(p);const _=new trt(this._context);if(this._viewParts.push(_),c){const m=this._scrollbar.getOverviewRulerLayoutInfo();m.parent.insertBefore(c.getDomNode(),m.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new qit(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let n=[],s=0;n=n.concat(e.getAllMarginDecorations().map(r=>{var a,l;const o=((a=r.options.glyphMargin)==null?void 0:a.position)??Tm.Center;return s=Math.max(s,r.range.endLineNumber),{range:r.range,lane:o,persist:(l=r.options.glyphMargin)==null?void 0:l.persistLane}})),n=n.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return s=Math.max(s,o.endLineNumber),{range:o,lane:r.preference.lane}})),n.sort((r,o)=>de.compareRangesUsingStarts(r.range,o.range)),t.reset(s);for(const r of n)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Oit(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Se(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+kU(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new Qn;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=HW.INSTANCE.scheduleCoordinatedRendering({window:Nt((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Qn;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Qn;return t.renderText()},prepareRender:(n,s)=>{if(this._store.isDisposed)throw new Qn;return t.prepareRender(n,s)},render:(n,s)=>{if(this._store.isDisposed)throw new Qn;return t.render(n,s)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Yp(()=>e.prepareRenderText());const t=Yp(()=>e.renderText());if(t){const[n,s]=t;Yp(()=>e.prepareRender(n,s)),Yp(()=>e.render(n,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Xp.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new mrt(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new Mit(this._context.viewLayout,n,this._viewLines)]},prepareRender:(e,t)=>{for(const n of e)n.prepareRender(t)},render:(e,t)=>{for(const n of e)n.render(t),n.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new Se(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?e5.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new ort(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,s,r;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((n=e.position)==null?void 0:n.secondaryPosition)??null,((s=e.position)==null?void 0:s.preference)??null,((r=e.position)==null?void 0:r.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};WW=yrt([brt(6,oi)],WW);function Yp(i){try{return i()}catch(e){return di(e),null}}const JO=class JO{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[n,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,Kpe(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const n of e)Yp(()=>n.prepareRenderText());const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=Yp(()=>r.renderText())}for(let n=0,s=e.length;n<s;n++){const r=e[n],o=t[n];if(!o)continue;const[a,l]=o;Yp(()=>r.prepareRender(a,l))}for(let n=0,s=e.length;n<s;n++){const r=e[n],o=t[n];if(!o)continue;const[a,l]=o;Yp(()=>r.render(a,l))}}};JO.INSTANCE=new JO;let HW=JO;class dL{constructor(e,t,n,s,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&s>this.injectionOffsets[r];r++)s<this.injectionOffsets[r]+this.injectionOptions[r].content.length?s=this.injectionOffsets[r]:s-=this.injectionOptions[r].content.length;return s}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,s=this.breakOffsets.length-1,r=0,o=0;for(;n<=s;){r=n+(s-n)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>l)n=r+1;else break;else if(e<o)s=r-1;else if(e>=l)n=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new WD(r,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,n);if(r!==s)return this.offsetInInputWithInjectionsToOutputPosition(r,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new WD(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new WD(e+1,this.getMinOutputOffset(e+1))}return new WD(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&Yre(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let s=n.offsetInInputWithInjections;if(Zre(this.injectionOptions[n.injectedTextIndex].cursorStops))return s;let r=n.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[n.injectedTextIndex]&&!(Yre(this.injectionOptions[r].cursorStops)||(s-=this.injectionOptions[r].content.length,Zre(this.injectionOptions[r].cursorStops)));)r--;return s}}else if(t===1||t===4){let s=n.offsetInInputWithInjections+n.length,r=n.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)s+=this.injectionOptions[r+1].content.length,r++;return s}else if(t===0||t===3){let s=n.offsetInInputWithInjections,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r--;return s}oK()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=n[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};s+=o}}}}function Yre(i){return i==null?!0:i===Zw.Right||i===Zw.Both}function Zre(i){return i==null?!0:i===Zw.Left||i===Zw.Both}class WD{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Se(e+this.outputLineIndex,this.outputOffset+1)}}const Q8=l1("domLineBreaksComputer",{createHTML:i=>i});class Wq{static create(e){return new Wq(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,n,s,r){const o=[],a=[];return{addRequest:(l,c,u)=>{o.push(l),a.push(c)},finalize:()=>wrt(qge(this.targetWindow.deref()),o,e,t,n,s,r,a)}}}function wrt(i,e,t,n,s,r,o,a){function l(T){const D=a[T];if(D){const I=xh.applyInjectedText(e[T],D),N=D.map(O=>O.options),P=D.map(O=>O.column-1);return new dL(P,N,[I.length],[],0)}else return null}if(s===-1){const T=[];for(let D=0,I=e.length;D<I;D++)T[D]=l(D);return T}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),h=Math.round(n*(r===3?2:r===2?1:0)),d=Math.ceil(t.spaceWidth*h),f=document.createElement("div");lo(f,t);const g=new v4(1e4),p=[],_=[],m=[],v=[],y=[];for(let T=0;T<e.length;T++){const D=xh.applyInjectedText(e[T],a[T]);let I=0,N=0,P=c;if(r!==0)if(I=sl(D),I===-1)I=0;else{for(let K=0;K<I;K++){const H=D.charCodeAt(K)===9?n-N%n:1;N+=H}const z=Math.ceil(t.spaceWidth*N);z+t.typicalFullwidthCharacterWidth>c?(I=0,N=0):P=c-z}const O=D.substr(I),V=Crt(O,N,n,P,g,d);p[T]=I,_[T]=N,m[T]=O,v[T]=V[0],y[T]=V[1]}const C=g.build(),S=(Q8==null?void 0:Q8.createHTML(C))??C;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",o==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),i.document.body.appendChild(f);const x=document.createRange(),E=Array.prototype.slice.call(f.children,0),L=[];for(let T=0;T<e.length;T++){const D=E[T],I=Srt(x,D,m[T],v[T]);if(I===null){L[T]=l(T);continue}const N=p[T],P=_[T]+h,O=y[T],V=[];for(let U=0,j=I.length;U<j;U++)V[U]=O[I[U]];if(N!==0)for(let U=0,j=I.length;U<j;U++)I[U]+=N;let z,K;const H=a[T];H?(z=H.map(U=>U.options),K=H.map(U=>U.column-1)):(z=null,K=null),L[T]=new dL(K,z,I,V,P)}return f.remove(),L}function Crt(i,e,t,n,s,r){if(r!==0){const d=String(r);s.appendString('<div style="text-indent: -'),s.appendString(d),s.appendString("px; padding-left: "),s.appendString(d),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(n)),s.appendString('px;">');const o=i.length;let a=e,l=0;const c=[],u=[];let h=0<o?i.charCodeAt(0):0;s.appendString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&s.appendString("</span><span>"),c[d]=l,u[d]=a;const f=h;h=d+1<o?i.charCodeAt(d+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let _=1;_<=g;_++)_<g?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:h===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:Em(f)&&p++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=g,a+=p}return s.appendString("</span>"),c[i.length]=l,u[i.length]=a,s.appendString("</div>"),[c,u]}function Srt(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{$W(i,s,n,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function $W(i,e,t,n,s,r,o,a){if(n===r||(s=s||J8(i,e,t[n],t[n+1]),o=o||J8(i,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(n+1===r){a.push(r);return}const l=n+(r-n)/2|0,c=J8(i,e,t[l],t[l+1]);$W(i,e,t,n,s,l,c,a),$W(i,e,t,l,c,r,o,a)}function J8(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}class xrt extends Be{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new Pj),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const s of t){if(this._pending.has(s.id)){di(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(hD(Nt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(hD(Nt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(hD(Nt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return hD(Nt((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){di(n)}}}}class Fve{constructor(e,t,n,s,r,o,a){this.id=e,this.label=t,this.alias=n,this.metadata=s,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class Hq{static create(e){return new Hq(e.get(135),e.get(134))}constructor(e,t){this.classifier=new Ert(e,t)}createLineBreaksComputer(e,t,n,s,r){const o=[],a=[],l=[];return{addRequest:(c,u,h)=>{o.push(c),a.push(u),l.push(h)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let h=0,d=o.length;h<d;h++){const f=a[h],g=l[h];g&&!g.injectionOptions&&!f?u[h]=Lrt(this.classifier,g,o[h],t,n,c,s,r):u[h]=Trt(this.classifier,o[h],f,t,n,c,s,r)}return GW.length=0,jW.length=0,u}}}}class Ert extends ok{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let GW=[],jW=[];function Lrt(i,e,t,n,s,r,o,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,h=e.breakOffsetsVisibleColumn,d=Bve(t,n,s,r,o),f=s-d,g=GW,p=jW;let _=0,m=0,v=0,y=s;const C=u.length;let S=0;if(S>=0){let x=Math.abs(h[S]-y);for(;S+1<C;){const E=Math.abs(h[S+1]-y);if(E>=x)break;x=E,S++}}for(;S<C;){let x=S<0?0:u[S],E=S<0?0:h[S];m>x&&(x=m,E=v);let L=0,T=0,D=0,I=0;if(E<=y){let P=E,O=x===0?0:t.charCodeAt(x-1),V=x===0?0:i.get(O),z=!0;for(let K=x;K<l;K++){const H=K,U=t.charCodeAt(K);let j,W;if(fr(U)?(K++,j=0,W=2):(j=i.get(U),W=fL(U,P,n,r)),H>m&&KW(O,V,U,j,c)&&(L=H,T=P),P+=W,P>y){H>m?(D=H,I=P-W):(D=K+1,I=P),P-T>f&&(L=0),z=!1;break}O=U,V=j}if(z){_>0&&(g[_]=u[u.length-1],p[_]=h[u.length-1],_++);break}}if(L===0){let P=E,O=t.charCodeAt(x),V=i.get(O),z=!1;for(let K=x-1;K>=m;K--){const H=K+1,U=t.charCodeAt(K);if(U===9){z=!0;break}let j,W;if(jw(U)?(K--,j=0,W=2):(j=i.get(U),W=Em(U)?r:1),P<=y){if(D===0&&(D=H,I=P),P<=y-f)break;if(KW(U,j,O,V,c)){L=H,T=P;break}}P-=W,O=U,V=j}if(L!==0){const K=f-(I-T);if(K<=n){const H=t.charCodeAt(D);let U;fr(H)?U=2:U=fL(H,I,n,r),K-U<0&&(L=0)}}if(z){S--;continue}}if(L===0&&(L=D,T=I),L<=m){const P=t.charCodeAt(m);fr(P)?(L=m+2,T=v+2):(L=m+1,T=v+fL(P,v,n,r))}for(m=L,g[_]=L,v=T,p[_]=T,_++,y=T+f;S<0||S<C&&h[S]<T;)S++;let N=Math.abs(h[S]-y);for(;S+1<C;){const P=Math.abs(h[S+1]-y);if(P>=N)break;N=P,S++}}return _===0?null:(g.length=_,p.length=_,GW=e.breakOffsets,jW=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=d,e)}function Trt(i,e,t,n,s,r,o,a){const l=xh.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(T=>T.options),u=t.map(T=>T.column-1)):(c=null,u=null),s===-1)return c?new dL(u,c,[l.length],[],0):null;const h=l.length;if(h<=1)return c?new dL(u,c,[l.length],[],0):null;const d=a==="keepAll",f=Bve(l,n,s,r,o),g=s-f,p=[],_=[];let m=0,v=0,y=0,C=s,S=l.charCodeAt(0),x=i.get(S),E=fL(S,0,n,r),L=1;fr(S)&&(E+=1,S=l.charCodeAt(1),x=i.get(S),L++);for(let T=L;T<h;T++){const D=T,I=l.charCodeAt(T);let N,P;fr(I)?(T++,N=0,P=2):(N=i.get(I),P=fL(I,E,n,r)),KW(S,x,I,N,d)&&(v=D,y=E),E+=P,E>C&&((v===0||E-y>g)&&(v=D,y=E-P),p[m]=v,_[m]=y,m++,C=y+g,v=0),S=I,x=N}return m===0&&(!t||t.length===0)?null:(p[m]=h,_[m]=E,new dL(u,c,p,_,f))}function fL(i,e,t,n){return i===9?t-e%t:Em(i)||i<32?n:1}function Qre(i,e){return e-i%e}function KW(i,e,t,n,s){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!s&&e===3&&n!==2||!s&&n===3&&e!==1)}function Bve(i,e,t,n,s){let r=0;if(s!==0){const o=sl(i);if(o!==-1){for(let l=0;l<o;l++){const c=i.charCodeAt(l)===9?Qre(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=Qre(r,e);r+=c}r+n>t&&(r=0)}}return r}class xP{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Tr(new de(1,1,1,1),0,0,new Se(1,1),0),new Tr(new de(1,1,1,1),0,0,new Se(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new _n(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?gi.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):gi.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,s,n,o),l=this._validatePositionWithCache(e,r,s,a);return n.equals(o)&&s.equals(a)&&r.equals(l)?t:new Tr(de.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=xP._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Tr(s,t.selectionStartKind,r,o,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Tr(s,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Tr(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new Se(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new Se(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new de(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Tr(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class Jre{constructor(e){this.context=e,this.cursors=[new xP(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return _$e(this.cursors,_u(e=>e.viewState.position,Se.compare)).viewState.position}getBottomMostViewPosition(){return m$e(this.cursors,_u(e=>e.viewState.position,Se.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(_n.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const s=n-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>n){const s=t-n;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<n;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new xP(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(_u(n=>n.selection,de.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?n:n+1,u=s.index<r.index?n+1:n,h=t[u].index,d=t[c].index,f=t[u].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,m=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let v;h===this.lastAddedCursorIndex?(v=_,this.lastAddedCursorIndex=d):v=m;let y;v?y=new gi(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):y=new gi(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=y;const C=_n.fromModelSelection(y);e[d].setState(this.context,C.modelState,C.viewState)}for(const p of t)p.index>h&&p.index--;e.splice(h,1),t.splice(u,1),this._removeSecondaryCursor(h-1),n--}}}}class eoe{constructor(e,t,n,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}class krt{constructor(){this.type=0}}class Mrt{constructor(){this.type=1}}class Drt{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Art{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class w_{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class HD{constructor(){this.type=5}}class Irt{constructor(e){this.type=6,this.isFocused=e}}class Nrt{constructor(){this.type=7}}class $D{constructor(){this.type=8}}class zve{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class qW{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class XW{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class gL{constructor(e,t,n,s,r,o,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=s,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class Rrt{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Prt{constructor(e){this.theme=e,this.type=14}}class Ort{constructor(e){this.type=15,this.ranges=e}}class Frt{constructor(){this.type=16}}let Brt=class{constructor(){this.type=17}};class zrt extends Be{constructor(){super(),this._onEvent=this._register(new me),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Urt),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class Urt{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class $q{constructor(e,t,n,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new $q(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class Gq{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new Gq(this.oldHasFocus,e.hasFocus)}}class jq{constructor(e,t,n,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new jq(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Vrt{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Wrt{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class EP{constructor(e,t,n,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return EP._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new EP(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class Hrt{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class $rt{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class Grt{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class jrt{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Krt{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class qrt{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Xrt{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Yrt extends Be{constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new eoe(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new Jre(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Jr(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new eoe(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>o&&(s=s.slice(0,o),r=!0);const a=pL.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,s,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=de.fromPositions(a[0],a[0]),e.emitViewEvent(new gL(t,n,l,c,s,r,o))}revealPrimary(e,t,n,s,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new gL(t,n,null,l,s,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,u=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(u=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,_n.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof N0e){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const s=n.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new Jre(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const r=_n.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,_n.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,s){this.setStates(e,t,s,_n.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new toe(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Zrt.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof Bq&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),s.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,r){const o=pL.from(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Art(l,a,n)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,u)=>!c.modelState.equals(s.cursorState[u].modelState))){const c=s?s.cursorState.map(h=>h.modelState.selection):null,u=s?s.modelVersionId:0;e.emitOutgoingEvent(new EP(c,a,u,o.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=r.text.length-o[2].length-1,h=r.text.lastIndexOf(c,u-1);if(h===-1)return null;t.push([h,u])}return t}executeEdits(e,t,n,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(r)for(let h=0,d=r.length;h<d;h++){const[f,g]=r[h],p=c[h],_=p.range.startLineNumber,m=p.range.startColumn-1+f,v=p.range.startColumn-1+g;o.push(new de(_,v+1,_,v+2)),a.push(new de(_,m+1,_,v+2))}const u=s(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,s=0){if(this.context.cursorConfig.readOnly)return;const r=pL.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){di(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,r,!1)&&this.revealAll(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return toe.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new mL(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(d0.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=$j(t,r),a=t.substr(r,o);this._executeEditOperation(d0.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(d0.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,r,o){if(t.length===0&&n===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new gi(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(d0.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,r))},e,o)}paste(e,t,n,s,r){this._executeEdit(()=>{this._executeEditOperation(d0.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Rv.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Da(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Da(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class pL{static from(e,t){return new pL(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class toe{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(de.compareRangesUsingStarts),e.sort(de.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Zrt{static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,n);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,u=s.length;c<u;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const u=[];for(let f=0;f<e.selectionsBefore.length;f++)u[f]=[];for(const f of c)f.identifier&&u[f.identifier.major].push(f);const h=(f,g)=>f.identifier.minor-g.identifier.minor,d=[];for(let f=0;f<e.selectionsBefore.length;f++)u[f].length>0?(u[f].sort(h),d[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>u[f],getTrackedSelection:g=>{const p=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new gi(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new gi(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):d[f]=e.selectionsBefore[f];return d});a||(a=e.selectionsBefore);const l=[];for(const c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){const s=[];let r=0;const o=(h,d,f=!1)=>{de.isEmpty(h)&&d===""||s.push({identifier:{major:t,minor:r++},range:h,text:d,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:o,addTrackedEditOperation:(h,d,f)=>{a=!0,o(h,d,f)},trackSelection:(h,d)=>{const f=gi.liftSelection(h);let g;if(f.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{const m=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===m?g=2:g=3}else g=1;const p=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=_,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{n.getEditOperations(e.model,u)}catch(h){return di(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-de.compareRangesUsingEnds(n.range,s.range));const t={};for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(de.getStartPosition(s.range).isBefore(de.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class Qrt{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class mL{static _capture(e,t){const n=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;n.push(new Qrt(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return n}constructor(e,t){this._original=mL._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=mL._capture(e,t);if(!n||this._original.length!==n.length)return null;const s=[];for(let r=0,o=this._original.length;r<o;r++)s.push(mL._deduceOutcome(this._original[r],n[r]));return s}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,jz(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Kz(e.text,t.text)),r=e.text.substring(n,e.text.length-s),o=t.text.substring(n,t.text.length-s);return new Est(r,e.startSelection-n,e.endSelection-n,o,t.startSelection-n,t.endSelection-n)}}class Jrt{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class eot{constructor(e,t,n,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=r,this.prefixSum=0}}var bm;let tot=(bm=class{constructor(e,t,n,s){this._instanceId=kpe(++bm.INSTANCE_COUNT),this._pendingChanges=new Jrt,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new eot(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of n)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const u of l)if(!s.has(u.id)){if(r.has(u.id)){const h=r.get(u.id);u.afterLineNumber=h.newAfterLineNumber,u.height=h.newHeight}c.push(u)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=bm.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const o=(s-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=o+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=r,d=h;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/n)*n,d-=g);const p=[],_=e+(t-e)/2;let m=-1;for(let S=s;S<=o;S++){if(m===-1){const x=h,E=h+n;(x<=_&&_<E||x>_)&&(m=S)}for(h+=n,p[S-s]=d,d+=n;u===S;)d+=c,h+=c,a++,a>=l?u=o+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){o=S;break}}m===-1&&(m=o);const v=this.getVerticalOffsetForLineNumber(o)|0;let y=s,C=o;return y<C&&r<e&&y++,y<C&&v+n>t&&C--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:m,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:C,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=s+r)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];const r=[];for(let o=n;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},bm.INSTANCE_COUNT=0,bm);const not=125;class yE{constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class iot extends Be{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new me),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new yE(0,0,0,0),this._scrollable=this._register(new jC({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new $q(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class sot extends Be{constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,r=s.get(146),o=s.get(84);this._linesLayout=new tot(t,s.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new iot(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new yE(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?not:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const n=t.get(84);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(146)){const n=t.get(146),s=n.contentWidth,r=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new yE(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(104);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(106)?r+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(104).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,n)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new yE(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Sre(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Sre(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(147),s=e.get(50),r=e.get(146);if(n.isViewportWrapping){const o=e.get(73);return t>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(105)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new yE(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class rot{constructor(e,t,n,s,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Se(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new Se(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new de(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);n=new vve(o,r),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const s=new de(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,JN(this.configuration.options),t,n),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let u=r;u<=o;u++)c[u-r]=[];for(let u=0,h=s.length;u<h;u++){const d=s[u],f=d.options;if(!oot(this.model,d))continue;const g=this._getOrCreateViewModelDecoration(d),p=g.range;if(a[l++]=g,f.inlineClassName){const _=new lL(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),m=Math.max(r,p.startLineNumber),v=Math.min(o,p.endLineNumber);for(let y=m;y<=v;y++)c[y-r].push(_)}if(f.beforeContentClassName&&r<=p.startLineNumber&&p.startLineNumber<=o){const _=new lL(new de(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-r].push(_)}if(f.afterContentClassName&&r<=p.endLineNumber&&p.endLineNumber<=o){const _=new lL(new de(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-r].push(_)}}return{decorations:a,inlineDecorations:c}}}function oot(i,e){return!(e.options.hideInCommentTokens&&aot(i,e)||e.options.hideInStringTokens&&lot(i,e))}function aot(i,e){return Uve(i,e.range,t=>t===1)}function lot(i,e){return Uve(i,e.range,t=>t===2)}function Uve(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const s=i.tokenization.getLineTokens(n),r=n===e.startLineNumber,o=n===e.endLineNumber;let a=r?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(o&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function e6(i,e){return i===null?e?LP.INSTANCE:TP.INSTANCE:new cot(i,e)}class cot{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const s=n>0?this._projectionData.breakOffsets[n-1]:0,r=this._projectionData.breakOffsets[n];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new xh(0,0,c+1,this._projectionData.injectionOptions[u],0));o=xh.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return n>0&&(o=noe(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const s=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],s),s[0]}getViewLinesData(e,t,n,s,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let h=null;if(c){h=[];let f=0,g=0;for(let p=0;p<l.getOutputLineCount();p++){const _=new Array;h[p]=_;const m=p>0?l.breakOffsets[p-1]:0,v=l.breakOffsets[p];for(;g<c.length;){const y=u[g].content.length,C=c[g]+f,S=C+y;if(C>v)break;if(m<S){const x=u[g];if(x.inlineClassName){const E=p>0?l.wrappedTextIndentLength:0,L=E+Math.max(C-m,0),T=E+Math.min(S-m,v-m);L!==T&&_.push(new Qnt(L,T,x.inlineClassName,x.inlineClassNameAffectsLetterSpacing))}}if(S<=v)f+=y,g++;else break}}}let d;c?d=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:u[g].content,tokenMetadata:Rr.defaultTokenMetadata}))):d=e.tokenization.getLineTokens(t);for(let f=n;f<n+s;f++){const g=r+f-n;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(d,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const s=this._projectionData,r=n>0?s.wrappedTextIndentLength:0,o=n>0?s.breakOffsets[n-1]:0,a=s.breakOffsets[n],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();n>0&&(c=noe(s.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,d=n+1<this.getViewLineCount(),f=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new Dq(c,d,u,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const e3=class e3{constructor(){}isVisible(){return!0}setVisible(e){return e?this:TP.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const s=e.tokenization.getLineTokens(t),r=s.getLineContent();return new Dq(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Se(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}};e3.INSTANCE=new e3;let LP=e3;const t3=class t3{constructor(){}isVisible(){return!1}setVisible(e){return e?LP.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};t3.INSTANCE=new t3;let TP=t3;const t6=[""];function noe(i){if(i>=t6.length)for(let e=1;e<=i;e++)t6[e]=uot(e);return t6[i]}function uot(i){return new Array(i+1).join(" ")}class hot{constructor(e,t,n,s,r,o,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new fot(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=n.length,o=this.createLineBreaksComputer(),a=new Ag(xh.fromDecorations(s));for(let p=0;p<r;p++){const _=a.takeWhile(m=>m.lineNumber===p+1);o.addRequest(n[p],_,t?t[p]:null)}const l=o.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(de.compareRangesUsingStarts);let h=1,d=0,f=-1,g=f+1<u.length?d+1:r+2;for(let p=0;p<r;p++){const _=p+1;_===g&&(f++,h=u[f].startLineNumber,d=u[f].endLineNumber,g=f+1<u.length?d+1:r+2);const m=_>=h&&_<=d,v=e6(l[p],!m);c[p]=v.getViewLineCount(),this.modelLineProjections[p]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new nGe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(d=>this.model.validateRange(d)),n=dot(t),s=this.hiddenAreasDecorationIds.map(d=>this.model.getDecorationRange(d)).sort(de.compareRangesUsingStarts);if(n.length===s.length){let d=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(s[f])){d=!0;break}if(!d)return!1}const r=n.map(d=>({range:d,options:Ys.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=n;let a=1,l=0,c=-1,u=c+1<o.length?l+1:this.modelLineProjections.length+2,h=!1;for(let d=0;d<this.modelLineProjections.length;d++){const f=d+1;f===u&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,u=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[d].isVisible()&&(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!1),g=!0):(h=!0,this.modelLineProjections[d].isVisible()||(this.modelLineProjections[d]=this.modelLineProjections[d].setVisible(!0),g=!0)),g){const p=this.modelLineProjections[d].getViewLineCount();this.projectedModelLineLineCounts.setValue(d,p)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===s,u=this.wordBreak===r;if(o&&a&&l&&c&&u)return!1;const h=o&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s,this.wordBreak=r;let d=null;if(h){d=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)d[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new qW(s,r)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,h=s.length;u<h;u++){const d=e6(s[u],!r);l.push(d);const f=d.getViewLineCount();a+=f,c[u]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new XW(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,r=this.modelLineProjections[s].getViewLineCount(),o=this.modelLineProjections[s].isVisible(),a=e6(n,o);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,u=0,h=-1,d=0,f=-1,g=0,p=-1;r>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=u+l-1,g=h+1,p=g+(r-l)-1,c=!0):r<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=u+r-1,d=h+1,f=d+(l-r)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=u+l-1),this.projectedModelLineLineCounts.setValue(s,l);const _=u<=h?new zve(u,h-u+1):null,m=d<=f?new XW(d,f):null,v=g<=p?new qW(g,p):null;return[c,_,m,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,s=t.remainder;return new ioe(n+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Se(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Se(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let d=u;d<h;d++)a.push(new ioe(l,d))}if(!c.isVisible()&&o){const u=new Se(l-1,this.model.getLineMaxColumn(l-1)+1),h=de.fromPositions(o,u);r.push(new soe(h,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new Se(l,1))}if(o){const l=de.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new soe(l,a))}return r}getViewLinesBracketGuides(e,t,n,s){const r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const u of a.viewLines){const d=c[u.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const m=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(m.lineNumber===u.modelLineWrappedLineIdx)g=m.column;else if(m.lineNumber<u.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(u);else if(m.lineNumber>u.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(u.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===u.modelLineWrappedLineIdx?new k0(f.visibleColumn,g,f.className,new QE(f.horizontalLine.top,p.column),-1,-1):_.lineNumber<u.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new k0(f.visibleColumn,g,f.className,new QE(f.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});o.push(d.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=n.lineNumber-1,c=s.lineNumber-1;let u=null;for(let g=l;g<=c;g++){const p=this.modelLineProjections[g];if(p.isVisible()){const _=p.getViewLineNumberOfModelPosition(0,g===l?n.column:1),m=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),v=m-_+1;let y=0;v>1&&p.getViewLineMinColumn(this.model,g+1,m)===1&&(y=_===0?1:2),o.push(v),a.push(y),u===null&&(u=new Se(g+1,0))}else u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,g)),u=null)}u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,s.lineNumber)),u=null);const h=t-e+1,d=new Array(h);let f=0;for(let g=0,p=r.length;g<p;g++){let _=r[g];const m=Math.min(h-f,o[g]),v=a[g];let y;v===2?y=0:v===1?y=1:y=m;for(let C=0;C<m;C++)C===y&&(_=0),d[f++]=_}return d}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=s.index,a=s.remainder,l=[];for(let c=o,u=this.model.getLineCount();c<u;c++){const h=this.modelLineProjections[c];if(!h.isVisible())continue;const d=c===o?a:0;let f=h.getViewLineCount()-d,g=!1;if(r+f>t&&(g=!0,f=t-r+1),h.getViewLinesData(this.model,c+1,d,f,r-e,n,l),r+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new Se(r+1,u)).equals(n)?new Se(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new de(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),s=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Se(n.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new de(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,s=!1,r=!1){const o=this.model.validatePosition(new Se(e,t)),a=o.lineNumber,l=o.column;let c=a-1,u=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new Se(s?0:1,1);const h=1+this.projectedModelLineLineCounts.getPrefixSum(c);let d;return u?r?d=this.modelLineProjections[c].getViewPositionOfModelPosition(h,1,n):d=this.modelLineProjections[c].getViewPositionOfModelPosition(h,this.model.getLineMaxColumn(c+1),n):d=this.modelLineProjections[a-1].getViewPositionOfModelPosition(h,l,n),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return de.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new de(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,s,r){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new de(o.lineNumber,1,a.lineNumber,a.column),t,n,s,r);let l=[];const c=o.lineNumber-1,u=a.lineNumber-1;let h=null;for(let p=c;p<=u;p++)if(this.modelLineProjections[p].isVisible())h===null&&(h=new Se(p+1,p===c?o.column:1));else if(h!==null){const m=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new de(h.lineNumber,h.column,p,m),t,n,s)),h=null}h!==null&&(l=l.concat(this.model.getDecorationsInRange(new de(h.lineNumber,h.column,a.lineNumber,a.column),t,n,s)),h=null),l.sort((p,_)=>{const m=de.compareRangesUsingStarts(p.range,_.range);return m===0?p.id<_.id?-1:p.id>_.id?1:0:m});const d=[];let f=0,g=null;for(const p of l){const _=p.id;g!==_&&(g=_,d[f++]=p)}return d}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function dot(i){if(i.length===0)return[];const e=i.slice();e.sort(de.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,s=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>s+1?(t.push(new de(n,1,s,1)),n=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new de(n,1,s,1)),t}class ioe{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class soe{constructor(e,t){this.modelRange=e,this.viewLines=t}}class fot{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class got{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new pot(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new qW(t,n)}onModelLinesInserted(e,t,n,s){return new XW(t,n)}onModelLineChanged(e,t,n){return[!1,new zve(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,s=new Array(n);for(let r=0;r<n;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new Dq(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=n[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,n,s,r){return this.model.getDecorationsInRange(e,t,n,s,r)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class pot{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const C_=Tm.Right;class mot{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*C_/8))}reset(e){const t=Math.ceil((e+1)*C_/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const r=C_*s+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let n=C_*e;for(let s=0;s<C_;s++)(this.persist&1<<s||this.lanes[n>>>3]&1<<n%8)&&t.push(s+1),n++;return t.length?t:[Tm.Center]}countAtLine(e){let t=C_*e,n=0;for(let s=0;s<C_;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}let _ot=class extends Be{constructor(e,t,n,s,r,o,a,l,c,u){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=u,this.hiddenAreasModel=new yot,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new zrt,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new ty(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Ro(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=Kq.create(this.model),this.glyphLanes=new mot(0),this.model.isTooLargeForTokenization())this._lines=new got(this.model);else{const h=this._configuration.options,d=h.get(50),f=h.get(140),g=h.get(147),p=h.get(139),_=h.get(130);this._lines=new hot(this._editorId,this.model,s,r,d,this.model.getOptions().tabSize,f,g.wrappingColumn,p,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Yrt(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new sot(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(h=>{h.scrollTopChanged&&this._handleVisibleLinesChanged(),h.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new Rrt(h)),this._eventDispatcher.emitOutgoingEvent(new jq(h.oldScrollWidth,h.oldScrollLeft,h.oldScrollHeight,h.oldScrollTop,h.scrollWidth,h.scrollLeft,h.scrollHeight,h.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(h=>{this._eventDispatcher.emitOutgoingEvent(h)})),this._decorations=new rot(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(h=>{try{const d=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(d,h)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(CP.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new Frt)})),this._register(this._themeService.onDidColorThemeChange(h=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new Prt(h))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new de(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Irt(e)),this._eventDispatcher.emitOutgoingEvent(new Gq(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new krt)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Mrt)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new Se(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new ooe(t,this._viewportStart.startLineDelta)}return new ooe(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),s=this._configuration.options,r=s.get(50),o=s.get(140),a=s.get(147),l=s.get(139),c=s.get(130);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new HD),e.emitViewEvent(new $D),e.emitViewEvent(new w_(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new w_(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new w_(null))),e.emitViewEvent(new Drt(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),ty.shouldRecreate(t)&&(this.cursorConfig=new ty(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let s=!1,r=!1;const o=e instanceof G0?e.rawContentChangedEvent.changes:e.changes,a=e instanceof G0?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of o)switch(h.changeType){case 4:{for(let d=0;d<h.detail.length;d++){const f=h.detail[d];let g=h.injectedTexts[d];g&&(g=g.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let d=null;h.injectedText&&(d=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,d,null);break}}const c=l.finalize(),u=new Ag(c);for(const h of o)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new HD),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const d=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);d!==null&&(n.emitViewEvent(d),this.viewLayout.onLinesDeleted(d.fromLineNumber,d.toLineNumber)),s=!0;break}case 4:{const d=u.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,d);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const d=u.dequeue(),[f,g,p,_]=this._lines.onModelLineChanged(a,h.lineNumber,d);r=f,g&&n.emitViewEvent(g),p&&(n.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),_&&(n.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&r&&(n.emitViewEvent(new $D),n.emitViewEvent(new w_(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const s=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof G0&&n.emitOutgoingEvent(new Krt(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,s=e.ranges.length;n<s;n++){const r=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new Se(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Se(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new Ort(t)),this._eventDispatcher.emitOutgoingEvent(new Xrt(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Nrt),this.cursorConfig=new ty(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new jrt(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new ty(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Grt(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new HD),t.emitViewEvent(new $D),t.emitViewEvent(new w_(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new ty(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new qrt(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new w_(e)),this._eventDispatcher.emitOutgoingEvent(new $rt(e))}))}setHiddenAreas(e,t){var o;this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const s=this._captureStableViewport();let r=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(n),r&&(a.emitViewEvent(new HD),a.emitViewEvent(new $D),a.emitViewEvent(new w_(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(o=s.viewportStartModelPosition)==null?void 0:o.lineNumber;l&&n.some(u=>u.startLineNumber<=l&&l<=u.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new Wrt)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new de(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const s=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,h=n.length;u<h;u++){const d=n[u].startLineNumber,f=n[u].endLineNumber;f<o||d>l||(o<d&&(s[r++]=new de(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new de(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new de(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new de(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new Se(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=sl(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=t1(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new Gl(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,s,o.tokens,t,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const s=this._lines.getViewLinesData(e,t,n);return new Znt(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,JN(this._configuration.options)),n=new vot;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,r.zIndex,c,u,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n==null||n.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(de.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+s);return c}if(r&&t){const l=[];let c=0;for(const u of e){const h=u.startLineNumber;u.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(u,n?2:0)),c=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===vu||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const u=s.startLineNumber;s=new de(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const r=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Wl.fontFamily;let c;return l?c=Wl.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Wl.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=r;c++){const u=this.model.tokenization.getLineTokens(c),h=u.getLineContent(),d=c===n?s-1:0,f=c===r?o-1:h.length;h===""?l+="<br>":l+=sXe(h,u.inflate(),t,d,f,a,rl)}return l}_getColorMap(){const e=Es.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=$e.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Hrt);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,s,r))}paste(e,t,n,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealAllCursors(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,n,0,t,0))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new de(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new gL(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new de(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new gL(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new gL(e,!1,n,null,s,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Brt),this._eventDispatcher.emitOutgoingEvent(new Vrt))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class Kq{static create(e){const t=e._setTrackedRange(null,new de(1,1,1,1),1);return new Kq(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,s,r){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=s,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new Se(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new de(n.lineNumber,n.column,n.lineNumber,n.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class vot{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=n){s>c&&(a[a.length-1]=s);return}a.push(r,n,s)}else{const a=new j2(e,t,[r,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class yot{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&roe(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>bot(t,n),[]);return roe(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function bot(i,e){const t=[];let n=0,s=0;for(;n<i.length&&s<e.length;){const r=i[n],o=e[s];if(r.endLineNumber<o.startLineNumber-1)t.push(i[n++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new de(a,1,l,1)),n++,s++}}for(;n<i.length;)t.push(i[n++]);for(;s<e.length;)t.push(e[s++]);return t}function roe(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(e[t]))return!1;return!0}class ooe{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}var wot=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pf=function(i,e){return function(t,n){e(t,n,i)}},q_,ov;let kP=(ov=class extends Be{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,n,s,r,o,a,l,c,u,h,d){super(),this.languageConfigurationService=h,this._deliveryQueue=sUe(),this._contributions=this._register(new xrt),this._onDidDispose=this._register(new me),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new aoe({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new aoe({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new wo(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new wo(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new wo(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new wo(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new wo(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new wo(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new me({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new me),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new me),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),r.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Cot,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,n.contextMenuId??(n.isSimpleWidget?Zr.SimpleEditorContext:Zr.EditorContext),f,u)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const m=this._configuration.options;if(_.hasChanged(146)){const v=m.get(146);this._onDidLayoutChange.fire(v)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new xot(this,this._contextKeyService)),this._register(new Eot(this,this._contextKeyService,d)),this._instantiationService=this._register(s.createChild(new ZC([Jn,this._contextKeyService]))),this._modelData=null,this._focusTracker=new Lot(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let g;Array.isArray(n.contributions)?g=n.contributions:g=iw.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const _ of iw.getEditorActions()){if(this._actions.has(_.id)){di(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const m=new Fve(_.id,_.label,_.alias,_.metadata,_.precondition??void 0,v=>this._instantiationService.invokeFunction(y=>Promise.resolve(_.runEditorCommand(y,this,v))),this._contextKeyService);this._actions.set(m.id,m)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new dWe(this._domElement,{onDragOver:_=>{if(!p())return;const m=this.getTargetAtClientPoint(_.clientX,_.clientY);m!=null&&m.position&&this.showDropIndicatorAt(m.position)},onDrop:async _=>{if(!p()||(this.removeDropIndicator(),!_.dataTransfer))return;const m=this.getTargetAtClientPoint(_.clientX,_.clientY);m!=null&&m.position&&this._onDropIntoEditor.fire({position:m.position,event:_})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n,s){return new DW(e,t,n,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return kq.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ps.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const n=e;if(this._modelData===null&&n===null||this._modelData&&this._modelData.model===n)return;const s={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(n==null?void 0:n.uri)||null};this._onWillChangeModel.fire(s);const r=this.hasTextFocus(),o=this._detachModel();this._attachModel(n),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,s){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?q_._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?q_._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,s=!1){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,s)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const n=this._modelData.model.getLineMaxColumn(e);return q_._getVerticalOffsetAfterPosition(this._modelData,e,n,t)}setHiddenAreas(e,t){var n;(n=this._modelData)==null||n.viewModel.setHiddenAreas(e.map(s=>de.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return js.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!Se.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,s){if(!this._modelData)return;if(!de.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new de(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,s){if(!Se.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new de(e.lineNumber,e.column,e.lineNumber,e.column),t,n,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=gi.isISelection(e),s=de.isIRange(e);if(!n&&!s)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(s){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new gi(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new de(e,1,t,1),n,!1,s)}revealRange(e,t=0,n=!1,s=!0){this._revealRange(e,n?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,s){if(!de.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(de.lift(e),t,n,s)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!gi.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){n=n||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(n)).then(void 0,di);return}if(!this._modelData||this._triggerEditorCommand(e,t,n))return;this._triggerCommand(t,n)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,s,r,e)}_paste(e,t,n,s,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,n,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new de(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const s=iw.getEditorCommand(t);return s?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,n)).then(void 0,di)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(92))return!1;let s;return n?Array.isArray(n)?s=()=>n:s=n:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new Tot(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,JN(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,JN(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(n=>n.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,s=n.get(146),r=q_._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:n.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){lo(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),s=new _ot(this._id,this._configuration,e,Wq.create(Nt(this._domElement)),Hq.create(this._configuration.options),a=>al(Nt(this._domElement),a),this.languageConfigurationService,this._themeService,n,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const h=this.getOption(80),d=k("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",h);this._notificationService.prompt(gGe.Warning,d,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:k("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let h=0,d=a.selections.length;h<d;h++)l[h]=a.selections[h].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[r,o]=this._createView(s);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[u])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Sot(e,s,r,o,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new e5(e.coordinatesConverter);return n.onKeyDown=r=>this._onKeyDown.fire(r),n.onKeyUp=r=>this._onKeyUp.fire(r),n.onContextMenu=r=>this._onContextMenu.fire(r),n.onMouseMove=r=>this._onMouseMove.fire(r),n.onMouseLeave=r=>this._onMouseLeave.fire(r),n.onMouseDown=r=>this._onMouseDown.fire(r),n.onMouseUp=r=>this._onMouseUp.fire(r),n.onMouseDrag=r=>this._onMouseDrag.fire(r),n.onMouseDrop=r=>this._onMouseDrop.fire(r),n.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),n.onMouseWheel=r=>this._onMouseWheel.fire(r),[new WW(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var n;if((n=this._contributionsDisposable)==null||n.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new de(e.lineNumber,e.column,e.lineNumber,e.column),options:q_.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},q_=ov,ov.dropIntoEditorDecorationOptions=Ys.register({description:"workbench-dnd-target",className:"dnd-target"}),ov);kP=q_=wot([pf(3,oi),pf(4,sr),pf(5,jl),pf(6,Jn),pf(7,Au),pf(8,Nh),pf(9,Rh),pf(10,Yd),pf(11,pi)],kP);let Cot=0;class Sot{constructor(e,t,n,s,r,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=r,this.attachedView=o}dispose(){Jr(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class aoe extends Be{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new me(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new me(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class wo extends me{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class xot extends Be{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=pt.editorSimpleInput.bindTo(t),this._editorFocus=pt.focus.bindTo(t),this._textInputFocus=pt.textInputFocus.bindTo(t),this._editorTextFocus=pt.editorTextFocus.bindTo(t),this._tabMovesFocus=pt.tabMovesFocus.bindTo(t),this._editorReadonly=pt.readOnly.bindTo(t),this._inDiffEditor=pt.inDiffEditor.bindTo(t),this._editorColumnSelection=pt.columnSelection.bindTo(t),this._hasMultipleSelections=pt.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=pt.hasNonEmptySelection.bindTo(t),this._canUndo=pt.canUndo.bindTo(t),this._canRedo=pt.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(fP.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(fP.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class Eot extends Be{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=pt.languageId.bindTo(t),this._hasCompletionItemProvider=pt.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=pt.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=pt.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=pt.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=pt.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=pt.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=pt.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=pt.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=pt.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=pt.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=pt.hasReferenceProvider.bindTo(t),this._hasRenameProvider=pt.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=pt.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=pt.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=pt.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=pt.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=pt.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=pt.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=pt.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(n.completionProvider.onDidChange(s)),this._register(n.codeActionProvider.onDidChange(s)),this._register(n.codeLensProvider.onDidChange(s)),this._register(n.definitionProvider.onDidChange(s)),this._register(n.declarationProvider.onDidChange(s)),this._register(n.implementationProvider.onDidChange(s)),this._register(n.typeDefinitionProvider.onDidChange(s)),this._register(n.hoverProvider.onDidChange(s)),this._register(n.documentHighlightProvider.onDidChange(s)),this._register(n.documentSymbolProvider.onDidChange(s)),this._register(n.referenceProvider.onDidChange(s)),this._register(n.renameProvider.onDidChange(s)),this._register(n.documentFormattingEditProvider.onDidChange(s)),this._register(n.documentRangeFormattingEditProvider.onDidChange(s)),this._register(n.signatureHelpProvider.onDidChange(s)),this._register(n.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===hn.walkThroughSnippet||e.uri.scheme===hn.vscodeChatCodeBlock)})}}class Lot extends Be{constructor(e,t){super(),this._onChange=this._register(new me),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(w2(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(w2(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class Tot{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const s=e.getDecorationRange(n);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const kot=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Mot=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function n6(i){return kot+encodeURIComponent(i.toString())+Mot}const Dot=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Aot=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Iot(i){return Dot+encodeURIComponent(i.toString())+Aot}Vg((i,e)=>{const t=i.getColor(wK);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${n6(t)}") repeat-x bottom left; }`);const n=i.getColor(Mm);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${n6(n)}") repeat-x bottom left; }`);const s=i.getColor(Dv);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${n6(s)}") repeat-x bottom left; }`);const r=i.getColor(tje);r&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Iot(r)}") no-repeat bottom left; }`);const o=i.getColor(UZe);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class MP{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new MP(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}return new MP(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,s,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=s,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,1)}}function Not(i,e,t,n){if(i.length===0)return e;if(e.length===0)return i;const s=[];let r=0,o=0;for(;r<i.length&&o<e.length;){const a=i[r],l=e[o],c=t(a),u=t(l);c<u?(s.push(a),r++):c>u?(s.push(l),o++):(s.push(n(a,l)),r++,o++)}for(;r<i.length;)s.push(i[r]),r++;for(;o<e.length;)s.push(e[o]),o++;return s}function DP(i,e){const t=new Tt,n=i.createDecorationsCollection();return t.add(I4({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);n.set(r)})),t.add({dispose:()=>{n.clear()}}),t}function bE(i,e){return i.appendChild(e),en(()=>{e.remove()})}function Rot(i,e){return i.prepend(e),en(()=>{e.remove()})}class Vve extends Be{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new wve(e,t)),this._width=Dn(this,this.elementSizeObserver.getWidth()),this._height=Dn(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>Xs(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function loe(i,e,t){let n=e.get(),s=n,r=n;const o=Dn("animatedValue",n);let a=-1;const l=300;let c;t.add(N4({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(h,d)=>(h.didChange(e)&&(d.animate=d.animate||h.change),!0)},(h,d)=>{c!==void 0&&(i.cancelAnimationFrame(c),c=void 0),s=r,n=e.read(h),a=Date.now()-(d.animate?0:l),u()}));function u(){const h=Date.now()-a;r=Math.floor(Pot(h,s,n-s,l)),h<l?c=i.requestAnimationFrame(u):r=n,o.set(r,void 0)}return o}function Pot(i,e,t,n){return i===n?e+t:t*(-Math.pow(2,-10*i/n)+1)+e}class qq extends Be{constructor(e,t,n){super(),this._register(new YW(e,n)),this._register(Nm(n,{height:t.actualHeight,top:t.actualTop}))}}class Eb{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Dn(this,void 0),this._actualHeight=Dn(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=n=>{this._actualTop.set(n,void 0)},this.onComputedHeight=n=>{this._actualHeight.set(n,void 0)}}}const n3=class n3{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${n3._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};n3._counter=0;let YW=n3;function Nm(i,e){return Vn(t=>{for(let[n,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),n=n.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),i.style[n]=s})}function AP(i,e,t,n){const s=new Tt,r=[];return s.add(vh((o,a)=>{const l=e.read(o),c=new Map,u=new Map;t&&t(!0),i.changeViewZones(h=>{for(const d of r)h.removeZone(d),n==null||n.delete(d);r.length=0;for(const d of l){const f=h.addZone(d);d.setZoneId&&d.setZoneId(f),r.push(f),n==null||n.add(f),c.set(d,f)}}),t&&t(!1),a.add(N4({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(h,d){const f=u.get(h.changedObservable);return f!==void 0&&d.zoneIds.push(f),!0}},(h,d)=>{for(const f of l)f.onChange&&(u.set(f.onChange,c.get(f)),f.onChange.read(h));t&&t(!0),i.changeViewZones(f=>{for(const g of d.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),i.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),n==null||n.clear(),t&&t(!1)}}),s}function coe(i,e){const t=mR(e,s=>s.original.startLineNumber<=i.lineNumber);if(!t)return de.fromPositions(i);if(t.original.endLineNumberExclusive<=i.lineNumber){const s=i.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return de.fromPositions(new Se(s,i.column))}if(!t.innerChanges)return de.fromPositions(new Se(t.modified.startLineNumber,1));const n=mR(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(i));if(!n){const s=i.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return de.fromPositions(new Se(s,i.column))}if(n.originalRange.containsPosition(i))return n.modifiedRange;{const s=Oot(n.originalRange.getEndPosition(),i);return de.fromPositions(s.addToPosition(n.modifiedRange.getEndPosition()))}}function Oot(i,e){return i.lineNumber===e.lineNumber?new km(0,e.column-i.column):new km(e.lineNumber-i.lineNumber,e.column-1)}function Fot(i,e){let t;return i.filter(n=>{const s=e(n,t);return t=n,s})}class IP{static create(e,t=void 0){return new uoe(e,e,t)}static createWithDisposable(e,t,n=void 0){const s=new Tt;return s.add(t),s.add(e),new uoe(e,s,n)}}class uoe extends IP{constructor(e,t,n){super(),this.object=e,this._disposable=t,this._debugOwner=n,this._refCount=1,this._isDisposed=!1,this._owners=[],n&&this._addOwner(n)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new Bot(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class Bot extends IP{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var Xq=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yq=function(i,e){return function(t,n){e(t,n,i)}};const zot=$m("diff-review-insert",yt.add,k("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),Uot=$m("diff-review-remove",yt.remove,k("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),Vot=$m("diff-review-close",yt.close,k("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var Dw;let D0=(Dw=class extends Be{constructor(e,t,n,s,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=s,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=qC(this,(u,h)=>{const d=this._visible.read(u);if(this._parentNode.style.visibility=d?"visible":"hidden",!d)return null;const f=h.add(this._instantiationService.createInstance(ZW,this._diffs,this._models,this._setVisible,this._canClose)),g=h.add(this._instantiationService.createInstance(QW,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){Xs(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){Xs(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){Xs(e=>{this._setVisible(!1,e)})}},Dw._ttPolicy=l1("diffReview",{createHTML:e=>e}),Dw);D0=Xq([Yq(8,oi)],D0);let ZW=class extends Be{constructor(e,t,n,s,r){super(),this._diffs=e,this._models=t,this._setVisible=n,this.canClose=s,this._accessibilitySignalService=r,this._groups=Dn(this,[]),this._currentGroupIdx=Dn(this,0),this._currentElementIdx=Dn(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[o]}),this._register(Vn(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=Wot(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Xs(c=>{const u=this._models.getModifiedPosition();if(u){const h=l.findIndex(d=>(u==null?void 0:u.lineNumber)<d.range.modified.endLineNumberExclusive);h!==-1&&this._currentGroupIdx.set(h,c)}this._groups.set(l,c)})})),this._register(Vn(o=>{const a=this.currentElement.read(o);(a==null?void 0:a.type)===Ho.Deleted?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===Ho.Added&&this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Vn(o=>{const a=this.currentElement.read(o);if(a&&a.type!==Ho.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(de.fromPositions(new Se(l,1)))}}))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||WK(t,s=>{this._currentGroupIdx.set(nn.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Xs(n=>{this._currentElementIdx.set(nn.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);n!==-1&&Xs(s=>{this._currentElementIdx.set(n,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Ho.Deleted?this._models.originalReveal(de.fromPositions(new Se(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Ho.Header?de.fromPositions(new Se(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};ZW=Xq([Yq(4,X4)],ZW);const px=3;function Wot(i,e,t){const n=[];for(const s of Ej(i,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*px)){const r=[];r.push(new $ot);const o=new Xt(Math.max(1,s[0].original.startLineNumber-px),Math.min(s[s.length-1].original.endLineNumberExclusive+px,e+1)),a=new Xt(Math.max(1,s[0].modified.startLineNumber-px),Math.min(s[s.length-1].modified.endLineNumberExclusive+px,t+1));Gge(s,(u,h)=>{const d=new Xt(u?u.original.endLineNumberExclusive:o.startLineNumber,h?h.original.startLineNumber:o.endLineNumberExclusive),f=new Xt(u?u.modified.endLineNumberExclusive:a.startLineNumber,h?h.modified.startLineNumber:a.endLineNumberExclusive);d.forEach(g=>{r.push(new Kot(g,f.startLineNumber+(g-d.startLineNumber)))}),h&&(h.original.forEach(g=>{r.push(new Got(h,g))}),h.modified.forEach(g=>{r.push(new jot(h,g))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);n.push(new Hot(new Ao(l,c),r))}return n}var Ho;(function(i){i[i.Header=0]="Header",i[i.Unchanged=1]="Unchanged",i[i.Deleted=2]="Deleted",i[i.Added=3]="Added"})(Ho||(Ho={}));class Hot{constructor(e,t){this.range=e,this.lines=t}}class $ot{constructor(){this.type=Ho.Header}}class Got{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Ho.Deleted,this.modifiedLineNumber=void 0}}class jot{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Ho.Added,this.originalLineNumber=void 0}}class Kot{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Ho.Unchanged}}let QW=class extends Be{constructor(e,t,n,s,r,o){super(),this._element=e,this._model=t,this._width=n,this._height=s,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new wg(a)),this._register(Vn(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new vg("diffreview.close",k("label.close","Close"),"close-diff-review "+An.asClassName(Vot),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new LK(this._content,{})),Ko(this.domNode,this._scrollbar.getDomNode(),a),this._register(Vn(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(en(()=>{Ko(this.domNode)})),this._register(Nm(this.domNode,{width:this._width,height:this._height})),this._register(Nm(this._content,{width:this._width,height:this._height})),this._register(vh((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(vr(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),n=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",k("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),lo(s,n.get(50)),Ko(this._content,s);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=n.get(67),u=this._model.currentGroup.get();for(const h of(u==null?void 0:u.lines)||[]){if(!u)break;let d;if(h.type===Ho.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const p=u.range,_=this._model.currentGroupIndex.get(),m=this._model.groups.get().length,v=x=>x===0?k("no_lines_changed","no lines changed"):x===1?k("one_line_changed","1 line changed"):k("more_lines_changed","{0} lines changed",x),y=v(p.original.length),C=v(p.modified.length);g.setAttribute("aria-label",k({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,m,p.original.startLineNumber,y,p.modified.startLineNumber,C));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${_+1}/${m}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),g.appendChild(S),d=g}else d=this._createRow(h,c,this._width.get(),t,r,a,n,o,l);s.appendChild(d);const f=Qt(g=>this._model.currentElement.read(g)===h);e.add(Vn(g=>{const p=f.read(g);d.tabIndex=p?0:-1,p&&d.focus()})),e.add(Ne(d,"focus",()=>{this._model.goToLine(h)}))}this._scrollbar.scanDomNode()}_createRow(e,t,n,s,r,o,a,l,c){const u=s.get(146),h=u.glyphMarginWidth+u.lineNumbersWidth,d=a.get(146),f=10+d.glyphMarginWidth+d.lineNumbersWidth;let g="diff-review-row",p="";const _="diff-review-spacer";let m=null;switch(e.type){case Ho.Added:g="diff-review-row line-insert",p=" char-insert",m=zot;break;case Ho.Deleted:g="diff-review-row line-delete",p=" char-delete",m=Uot;break}const v=document.createElement("div");v.style.minWidth=n+"px",v.className=g,v.setAttribute("role","listitem"),v.ariaLevel="";const y=document.createElement("div");y.className="diff-review-cell",y.style.height=`${t}px`,v.appendChild(y);const C=document.createElement("span");C.style.width=h+"px",C.style.minWidth=h+"px",C.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText=" ",y.appendChild(C);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText=" ",y.appendChild(S);const x=document.createElement("span");if(x.className=_,m){const T=document.createElement("span");T.className=An.asClassName(m),T.innerText="  ",x.appendChild(T)}else x.innerText="  ";y.appendChild(x);let E;if(e.modifiedLineNumber!==void 0){let T=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);D0._ttPolicy&&(T=D0._ttPolicy.createHTML(T)),y.insertAdjacentHTML("beforeend",T),E=l.getLineContent(e.modifiedLineNumber)}else{let T=this._getLineHtml(r,s,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);D0._ttPolicy&&(T=D0._ttPolicy.createHTML(T)),y.insertAdjacentHTML("beforeend",T),E=r.getLineContent(e.originalLineNumber)}E.length===0&&(E=k("blankLine","blank"));let L="";switch(e.type){case Ho.Unchanged:e.originalLineNumber===e.modifiedLineNumber?L=k({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",E,e.originalLineNumber):L=k("equalLine","{0} original line {1} modified line {2}",E,e.originalLineNumber,e.modifiedLineNumber);break;case Ho.Added:L=k("insertLine","+ {0} modified line {1}",E,e.modifiedLineNumber);break;case Ho.Deleted:L=k("deleteLine","- {0} original line {1}",E,e.originalLineNumber);break}return v.setAttribute("aria-label",L),v}_getLineHtml(e,t,n,s,r){const o=e.getLineContent(s),a=t.get(50),l=Rr.createEmpty(o,r),c=Gl.isBasicASCII(o,e.mightContainNonBasicASCII()),u=Gl.containsRTL(o,c,e.mightContainRTL());return Y4(new QC(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,u,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==xv.OFF,null)).html}};QW=Xq([Yq(5,yr)],QW);class qot{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}oe("diffEditor.move.border","#8b8b8b9c",k("diffEditor.move.border","The border color for text that got moved in the diff editor."));oe("diffEditor.moveActive.border","#FFA500",k("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));oe("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},k("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const Xot=$m("diff-insert",yt.add,k("diffInsertIcon","Line decoration for inserts in the diff editor.")),Wve=$m("diff-remove",yt.remove,k("diffRemoveIcon","Line decoration for removals in the diff editor.")),hoe=Ys.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+An.asClassName(Xot),marginClassName:"gutter-insert"}),doe=Ys.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+An.asClassName(Wve),marginClassName:"gutter-delete"}),foe=Ys.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),goe=Ys.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),poe=Ys.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),Yot=Ys.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),Zot=Ys.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),JW=Ys.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),Qot=Ys.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),Jot=Ys.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var Hve=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eH=function(i,e){return function(t,n){e(t,n,i)}},X_;const $ve=En("diffProviderFactoryService");let tH=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(nH,e)}};tH=Hve([eH(0,oi)],tH);Pn($ve,tH,1);var av;let nH=(av=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new me,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,n,s){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new $l(new Xt(1,2),new Xt(1,t.getLineCount()+1),[new Ml(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),a=X_.diffCache.get(r);if(a&&a.context===o)return a.result;const l=e1.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),u=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:n.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return X_.diffCache.size>10&&X_.diffCache.delete(X_.diffCache.keys().next().value),X_.diffCache.set(r,{result:c,context:o}),c}setOptions(e){var n;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((n=this.diffAlgorithmOnDidChangeSubscription)==null||n.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},X_=av,av.diffCache=new Map,av);nH=X_=Hve([eH(1,_k),eH(2,a1)],nH);function Zq(){return G9&&!!G9.VSCODE_DEV}function Gve(i){if(Zq()){const e=eat();return e.add(i),{dispose(){e.delete(i)}}}else return{dispose(){}}}function eat(){GD||(GD=new Set);const i=globalThis;return i.$hotReload_applyNewExports||(i.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},n=[];for(const s of GD){const r=s(t);r&&n.push(r)}if(n.length>0)return s=>{let r=!1;for(const o of n)o(s)&&(r=!0);return r}}),GD}let GD;Zq()&&Gve(({oldExports:i,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return n=>{var s,r;for(const o in n){const a=n[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=i[o];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const u=Object.getOwnPropertyDescriptor(a.prototype,c),h=Object.getOwnPropertyDescriptor(l.prototype,c);((s=u==null?void 0:u.value)==null?void 0:s.toString())!==((r=h==null?void 0:h.value)==null?void 0:r.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${c}'`),Object.defineProperty(l.prototype,c,u)}n[o]=l}}}return!0}});function Qc(i,e){return tat([i],e),i}function tat(i,e){Zq()&&hc("reload",n=>Gve(({oldExports:s})=>{if([...Object.values(s)].some(r=>i.includes(r)))return r=>(n(void 0),!0)})).read(e)}var nat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iat=function(i,e){return function(t,n){e(t,n,i)}};let iH=class extends Be{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n){super(),this.model=e,this._options=t,this._diffProviderFactoryService=n,this._isDiffUpToDate=Dn(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Dn(this,void 0),this.diff=this._diff,this._unchangedRegions=Dn(this,void 0),this.unchangedRegions=Qt(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(Xs(c=>{var u;for(const h of((u=this._unchangedRegions.get())==null?void 0:u.regions)||[])h.collapseAll(c)}),[])}),this.movedTextToCompare=Dn(this,void 0),this._activeMovedText=Dn(this,void 0),this._hoveredMovedText=Dn(this,void 0),this.activeMovedText=Qt(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new HC,this._diffProvider=Qt(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=hc("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(en(()=>this._cancellationTokenSource.cancel()));const s=GK("contentChangedSignal"),r=this._register(new Ro(()=>s.trigger(void 0),200));this._register(Vn(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?Xt.fromRangeInclusive(g):void 0),u=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?Xt.fromRangeInclusive(g):void 0),h=l.regions.map((g,p)=>!c[p]||!u[p]?void 0:new Zp(c[p].startLineNumber,u[p].startLineNumber,c[p].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(Hw),d=[];let f=!1;for(const g of Ej(h,(p,_)=>p.getHiddenModifiedRange(a).endLineNumberExclusive===_.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const p=g.reduce((m,v)=>m+v.lineCount,0),_=new Zp(g[0].originalLineNumber,g[0].modifiedLineNumber,p,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());d.push(_)}else d.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,d.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations(l.modifiedDecorationIds,d.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));Xs(_=>{this._unchangedRegions.set({regions:d,originalDecorationIds:g,modifiedDecorationIds:p},_)})}}));const o=(a,l,c)=>{const u=Zp.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let h;const d=this._unchangedRegions.get();if(d){const _=d.originalDecorationIds.map(C=>e.original.getDecorationRange(C)).map(C=>C?Xt.fromRangeInclusive(C):void 0),m=d.modifiedDecorationIds.map(C=>e.modified.getDecorationRange(C)).map(C=>C?Xt.fromRangeInclusive(C):void 0);let y=Fot(d.regions.map((C,S)=>{if(!_[S]||!m[S])return;const x=_[S].length;return new Zp(_[S].startLineNumber,m[S].startLineNumber,x,Math.min(C.visibleLineCountTop.get(),x),Math.min(C.visibleLineCountBottom.get(),x-C.visibleLineCountTop.get()))}).filter(Hw),(C,S)=>!S||C.modifiedLineNumber>=S.modifiedLineNumber+S.lineCount&&C.originalLineNumber>=S.originalLineNumber+S.lineCount).map(C=>new Ao(C.getHiddenOriginalRange(c),C.getHiddenModifiedRange(c)));y=Ao.clip(y,Xt.ofLength(1,e.original.getLineCount()),Xt.ofLength(1,e.modified.getLineCount())),h=Ao.inverse(y,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(h)for(const _ of u){const m=h.filter(v=>v.original.intersectsStrict(_.originalUnchangedRange)&&v.modified.intersectsStrict(_.modifiedUnchangedRange));f.push(..._.setVisibleRanges(m,l))}else f.push(...u);const g=e.original.deltaDecorations((d==null?void 0:d.originalDecorationIds)||[],f.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations((d==null?void 0:d.modifiedDecorationIds)||[],f.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:p},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=lg.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=lg.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(vh(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),s.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),Qc(Mme,a),Qc(xU,a),this._isDiffUpToDate.set(!1,void 0);let u=[];l.add(e.original.onDidChangeContent(f=>{const g=lg.fromModelContentChanges(f.changes);u=jR(u,g)}));let h=[];l.add(e.modified.onDidChangeContent(f=>{const g=lg.fromModelContentChanges(f.changes);h=jR(h,g)}));let d=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(d=sat(d,e.original,e.modified),d=(e.original,e.modified,void 0)??d,d=(e.original,e.modified,void 0)??d,Xs(f=>{o(d,f),this._lastDiff=d;const g=Qq.fromDiffResult(d);this._diff.set(g,f),this._isDiffUpToDate.set(!0,f);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(_=>_.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,n){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,n);return}}ensureOriginalLineIsVisible(e,t,n){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,n);return}}async waitForDiff(){await bYe(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var s;const t=(s=e.collapsedRegions)==null?void 0:s.map(r=>Xt.deserialize(r.range)),n=this._unchangedRegions.get();!n||!t||Xs(r=>{for(const o of n.regions)for(const a of t)if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,r);break}})}};iH=nat([iat(2,$ve)],iH);function sat(i,e,t){return{changes:i.changes.map(n=>new $l(n.original,n.modified,n.innerChanges?n.innerChanges.map(s=>rat(s,e,t)):void 0)),moves:i.moves,identical:i.identical,quitEarly:i.quitEarly}}function rat(i,e,t){let n=i.originalRange,s=i.modifiedRange;return n.startColumn===1&&s.startColumn===1&&(n.endColumn!==1||s.endColumn!==1)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&n.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new Ml(n,s)}class Qq{static fromDiffResult(e){return new Qq(e.changes.map(t=>new jve(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,s){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=s}}class jve{constructor(e){this.lineRangeMapping=e}}class Zp{static fromDiffs(e,t,n,s,r){const o=$l.inverse(e,t,n),a=[];for(const l of o){let c=l.original.startLineNumber,u=l.modified.startLineNumber,h=l.original.length;const d=c===1&&u===1,f=c+h===t+1&&u+h===n+1;(d||f)&&h>=r+s?(d&&!f&&(h-=r),f&&!d&&(c+=r,u+=r,h-=r),a.push(new Zp(c,u,h,0,0))):h>=r*2+s&&(c+=r,u+=r,h-=r*2,a.push(new Zp(c,u,h,0,0)))}return a}get originalUnchangedRange(){return Xt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return Xt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,s,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=Dn(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Dn(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Qt(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=Dn(this,void 0);const o=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-s),0);une(s===o),une(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const n=[],s=new uc(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),n.push(this);else{let l=0;for(const c of s.ranges){const u=l===s.ranges.length-1;l++;const h=(u?a:c.endLineNumberExclusive)-o,d=new Zp(r,o,h,0,0);d.setHiddenModifiedRange(c,t),n.push(d),r=d.originalUnchangedRange.endLineNumberExclusive,o=d.modifiedUnchangedRange.endLineNumberExclusive}}return n}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return Xt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return Xt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,n){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,n)}showOriginalLine(e,t,n){const s=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-s,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-r,this.getMaxVisibleLineCountBottom()),n)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}class oat extends Be{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,s,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=s,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=An.asClassName(yt.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let h=0;const d=n.getOption(128)&&!Sv,f=(g,p)=>{this._contextMenuService.showContextMenu({domForShadowRoot:d?n.getDomNode()??void 0:void 0,getAnchor:()=>({x:g,y:p}),getActions:()=>{const _=[],m=s.modified.isEmpty;return _.push(new vg("diff.clipboard.copyDeletedContent",m?s.original.length>1?k("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):k("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?k("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):k("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const y=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(y)})),s.original.length>1&&_.push(new vg("diff.clipboard.copyDeletedLineContent",m?k("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+h):k("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+h),void 0,!0,async()=>{let y=this._originalTextModel.getLineContent(s.original.startLineNumber+h);y===""&&(y=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(y)})),n.getOption(92)||_.push(new vg("diff.inline.revertChange",k("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},autoSelectFirstItem:!0})};this._register(vr(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:p,height:_}=pc(this._diffActions),m=Math.floor(u/3);g.preventDefault(),f(g.posx,p+_+m)})),this._register(n.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(h=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,u),f(g.event.posx,g.event.posy+u))}))}_updateLightBulbPosition(e,t,n){const{top:s}=pc(e),r=t-s,o=Math.floor(r/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const moe=l1("diffEditorWidget",{createHTML:i=>i});function aat(i,e,t,n){lo(n,e.fontInfo);const s=t.length>0,r=new v4(1e4);let o=0,a=0;const l=[];for(let d=0;d<i.lineTokens.length;d++){const f=d+1,g=i.lineTokens[d],p=i.lineBreakData[d],_=gu.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let m=0;for(const v of p.breakOffsets){const y=g.sliceAndInflate(m,v,0);o=Math.max(o,_oe(a,y,gu.extractWrapped(_,m,v),s,i.mightContainNonBasicASCII,i.mightContainRTL,e,r)),a++,m=v}l.push(p.breakOffsets.length)}else l.push(1),o=Math.max(o,_oe(a,g,_,s,i.mightContainNonBasicASCII,i.mightContainRTL,e,r)),a++}o+=e.scrollBeyondLastColumn;const c=r.build(),u=moe?moe.createHTML(c):c;n.innerHTML=u;const h=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:h,viewLineCounts:l}}class lat{constructor(e,t,n,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=s}}class Jq{static fromEditor(e){var r;const t=e.getOptions(),n=t.get(50),s=t.get(146);return new Jq(((r=e.getModel())==null?void 0:r.getOptions().tabSize)||0,n,t.get(33),n.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),s.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,n,s,r,o,a,l,c,u,h){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=h}}function _oe(i,e,t,n,s,r,o,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(i*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=Gl.isBasicASCII(l,s),u=Gl.containsRTL(l,c,r),h=Mq(new QC(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==xv.OFF,null),a);return a.appendString("</div>"),h.characterMapping.getHorizontalOffset(h.characterMapping.length)}var cat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},voe=function(i,e){return function(t,n){e(t,n,i)}};let sH=class extends Be{constructor(e,t,n,s,r,o,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=n,this._options=s,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=Dn(this,0),this._originalScrollOffset=Dn(this,0),this._originalScrollOffsetAnimated=loe(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Dn(this,0),this._modifiedScrollOffset=Dn(this,0),this._modifiedScrollOffsetAnimated=loe(this._targetWindow,this._modifiedScrollOffset,this._store);const h=Dn("invalidateAlignmentsState",0),d=this._register(new Ro(()=>{h.set(h.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||d.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&d.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&d.schedule()}));const f=this._diffModel.map(y=>y?ls(this,y.model.original.onDidChangeTokens,()=>y.model.original.tokenization.backgroundTokenizationState===2):void 0).map((y,C)=>y==null?void 0:y.read(C)),g=Qt(y=>{const C=this._diffModel.read(y),S=C==null?void 0:C.diff.read(y);if(!C||!S)return null;h.read(y);const E=this._options.renderSideBySide.read(y);return yoe(this._editors.original,this._editors.modified,S.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,E)}),p=Qt(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);if(!C)return null;h.read(y);const S=C.changes.map(E=>new jve(E));return yoe(this._editors.original,this._editors.modified,S,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function _(){const y=document.createElement("div");return y.className="diagonal-fill",y}const m=this._register(new Tt);this.viewZones=qC(this,(y,C)=>{var U,j,W,X;m.clear();const S=g.read(y)||[],x=[],E=[],L=this._modifiedTopPadding.read(y);L>0&&E.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:L,showInHiddenAreas:!0,suppressMouseDown:!0});const T=this._originalTopPadding.read(y);T>0&&x.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:T,showInHiddenAreas:!0,suppressMouseDown:!0});const D=this._options.renderSideBySide.read(y),I=D||(U=this._editors.modified._getViewModel())==null?void 0:U.createLineBreaksComputer();if(I){const ee=this._editors.original.getModel();for(const le of S)if(le.diff)for(let fe=le.originalRange.startLineNumber;fe<le.originalRange.endLineNumberExclusive;fe++){if(fe>ee.getLineCount())return{orig:x,mod:E};I==null||I.addRequest(ee.getLineContent(fe),null,null)}}const N=(I==null?void 0:I.finalize())??[];let P=0;const O=this._editors.modified.getOption(67),V=(j=this._diffModel.read(y))==null?void 0:j.movedTextToCompare.read(y),z=((W=this._editors.original.getModel())==null?void 0:W.mightContainNonBasicASCII())??!1,K=((X=this._editors.original.getModel())==null?void 0:X.mightContainRTL())??!1,H=Jq.fromEditor(this._editors.modified);for(const ee of S)if(ee.diff&&!D&&(!this._options.useTrueInlineDiffRendering.read(y)||!eX(ee.diff))){if(!ee.originalRange.isEmpty){f.read(y);const fe=document.createElement("div");fe.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const be=this._editors.original.getModel();if(ee.originalRange.endLineNumberExclusive-1>be.getLineCount())return{orig:x,mod:E};const ye=new lat(ee.originalRange.mapToLineArray(q=>be.tokenization.getLineTokens(q)),ee.originalRange.mapToLineArray(q=>N[P++]),z,K),xe=[];for(const q of ee.diff.innerChanges||[])xe.push(new lL(q.originalRange.delta(-(ee.diff.original.startLineNumber-1)),JW.className,0));const He=aat(ye,H,xe,fe),qe=document.createElement("div");if(qe.className="inline-deleted-margin-view-zone",lo(qe,H.fontInfo),this._options.renderIndicators.read(y))for(let q=0;q<He.heightInLines;q++){const Ee=document.createElement("div");Ee.className=`delete-sign ${An.asClassName(Wve)}`,Ee.setAttribute("style",`position:absolute;top:${q*O}px;width:${H.lineDecorationsWidth}px;height:${O}px;right:0;`),qe.appendChild(Ee)}let ke;m.add(new oat(()=>qge(ke),qe,this._editors.modified,ee.diff,this._diffEditorWidget,He.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let q=0;q<He.viewLineCounts.length;q++){const Ee=He.viewLineCounts[q];Ee>1&&x.push({afterLineNumber:ee.originalRange.startLineNumber+q,domNode:_(),heightInPx:(Ee-1)*O,showInHiddenAreas:!0,suppressMouseDown:!0})}E.push({afterLineNumber:ee.modifiedRange.startLineNumber-1,domNode:fe,heightInPx:He.heightInLines*O,minWidthInPx:He.minWidthInPx,marginDomNode:qe,setZoneId(q){ke=q},showInHiddenAreas:!0,suppressMouseDown:!0})}const le=document.createElement("div");le.className="gutter-delete",x.push({afterLineNumber:ee.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:ee.modifiedHeightInPx,marginDomNode:le,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const le=ee.modifiedHeightInPx-ee.originalHeightInPx;if(le>0){if(V!=null&&V.lineRangeMapping.original.delta(-1).deltaLength(2).contains(ee.originalRange.endLineNumberExclusive-1))continue;x.push({afterLineNumber:ee.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:le,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let fe=function(){const ye=document.createElement("div");return ye.className="arrow-revert-change "+An.asClassName(yt.arrowRight),C.add(Ne(ye,"mousedown",xe=>xe.stopPropagation())),C.add(Ne(ye,"click",xe=>{xe.stopPropagation(),r.revert(ee.diff)})),Ht("div",{},ye)};if(V!=null&&V.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(ee.modifiedRange.endLineNumberExclusive-1))continue;let be;ee.diff&&ee.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(y)&&(be=fe()),E.push({afterLineNumber:ee.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-le,marginDomNode:be,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const ee of p.read(y)??[]){if(!(V!=null&&V.lineRangeMapping.original.intersect(ee.originalRange))||!(V!=null&&V.lineRangeMapping.modified.intersect(ee.modifiedRange)))continue;const le=ee.modifiedHeightInPx-ee.originalHeightInPx;le>0?x.push({afterLineNumber:ee.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:le,showInHiddenAreas:!0,suppressMouseDown:!0}):E.push({afterLineNumber:ee.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-le,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:x,mod:E}});let v=!1;this._register(this._editors.original.onDidScrollChange(y=>{y.scrollLeftChanged&&!v&&(v=!0,this._editors.modified.setScrollLeft(y.scrollLeft),v=!1)})),this._register(this._editors.modified.onDidScrollChange(y=>{y.scrollLeftChanged&&!v&&(v=!0,this._editors.original.setScrollLeft(y.scrollLeft),v=!1)})),this._originalScrollTop=ls(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ls(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Vn(y=>{const C=this._originalScrollTop.read(y)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(y))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(y));C!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(C,1)})),this._register(Vn(y=>{const C=this._modifiedScrollTop.read(y)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(y))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(y));C!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(C,1)})),this._register(Vn(y=>{var x;const C=(x=this._diffModel.read(y))==null?void 0:x.movedTextToCompare.read(y);let S=0;if(C){const E=this._editors.original.getTopForLineNumber(C.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();S=this._editors.modified.getTopForLineNumber(C.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-E}S>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(S,void 0)):S<0?(this._modifiedTopPadding.set(-S,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-S,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+S,void 0,!0)}))}};sH=cat([voe(8,Lq),voe(9,Wg)],sH);function yoe(i,e,t,n,s,r){const o=new Ag(boe(i,n)),a=new Ag(boe(e,s)),l=i.getOption(67),c=e.getOption(67),u=[];let h=0,d=0;function f(g,p){for(;;){let _=o.peek(),m=a.peek();if(_&&_.lineNumber>=g&&(_=void 0),m&&m.lineNumber>=p&&(m=void 0),!_&&!m)break;const v=_?_.lineNumber-h:Number.MAX_VALUE,y=m?m.lineNumber-d:Number.MAX_VALUE;v<y?(o.dequeue(),m={lineNumber:_.lineNumber-h+d,heightInPx:0}):v>y?(a.dequeue(),_={lineNumber:m.lineNumber-d+h,heightInPx:0}):(o.dequeue(),a.dequeue()),u.push({originalRange:Xt.ofLength(_.lineNumber,1),modifiedRange:Xt.ofLength(m.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+m.heightInPx,diff:void 0})}}for(const g of t){let y=function(C,S,x=!1){var I,N;if(C<v||S<m)return;if(_)_=!1;else if(!x&&(C===v||S===m))return;const E=new Xt(v,C),L=new Xt(m,S);if(E.isEmpty&&L.isEmpty)return;const T=((I=o.takeWhile(P=>P.lineNumber<C))==null?void 0:I.reduce((P,O)=>P+O.heightInPx,0))??0,D=((N=a.takeWhile(P=>P.lineNumber<S))==null?void 0:N.reduce((P,O)=>P+O.heightInPx,0))??0;u.push({originalRange:E,modifiedRange:L,originalHeightInPx:E.length*l+T,modifiedHeightInPx:L.length*c+D,diff:g.lineRangeMapping}),v=C,m=S};const p=g.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let _=!0,m=p.modified.startLineNumber,v=p.original.startLineNumber;if(r)for(const C of p.innerChanges||[]){C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&y(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber);const S=i.getModel(),x=C.originalRange.endLineNumber<=S.getLineCount()?S.getLineMaxColumn(C.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;C.originalRange.endColumn<x&&y(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}y(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive,!0),h=p.original.endLineNumberExclusive,d=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),u}function boe(i,e){const t=[],n=[],s=i.getOption(147).wrappingColumn!==-1,r=i._getViewModel().coordinatesConverter,o=i.getOption(67);if(s)for(let l=1;l<=i.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&n.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of i.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new Se(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return Not(t,n,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function eX(i){return i.innerChanges?i.innerChanges.every(e=>woe(e.modifiedRange)&&woe(e.originalRange)||e.originalRange.equalsRange(new de(1,1,1,1))):!1}function woe(i){return i.startLineNumber===i.endLineNumber}const WL=class WL extends Be{constructor(e,t,n,s,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=s,this._editors=r,this._originalScrollTop=ls(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=ls(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=hc("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Dn(this,0),this._modifiedViewZonesChangedSignal=hc("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=hc("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=qC(this,(u,h)=>{var E;this._element.replaceChildren();const d=this._diffModel.read(u),f=(E=d==null?void 0:d.diff.read(u))==null?void 0:E.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const g=this._originalEditorLayoutInfo.read(u),p=this._modifiedEditorLayoutInfo.read(u);if(!g||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const _=f.map(L=>{function T(H,U){const j=U.getTopForLineNumber(H.startLineNumber,!0),W=U.getTopForLineNumber(H.endLineNumberExclusive,!0);return(j+W)/2}const D=T(L.lineRangeMapping.original,this._editors.original),I=this._originalScrollTop.read(u),N=T(L.lineRangeMapping.modified,this._editors.modified),P=this._modifiedScrollTop.read(u),O=D-I,V=N-P,z=Math.min(D,N),K=Math.max(D,N);return{range:new nn(z,K),from:O,to:V,fromWithoutScroll:D,toWithoutScroll:N,move:L}});_.sort(R9e(_u(L=>L.fromWithoutScroll>L.toWithoutScroll,P9e),_u(L=>L.fromWithoutScroll>L.toWithoutScroll?L.fromWithoutScroll:-L.toWithoutScroll,lm)));const m=tX.compute(_.map(L=>L.range)),v=10,y=g.verticalScrollbarWidth,C=(m.getTrackCount()-1)*10+v*2,S=y+C+(p.contentLeft-WL.movedCodeBlockPadding);let x=0;for(const L of _){const T=m.getTrack(x),D=y+v+T*10,I=15,N=15,P=S,O=p.glyphMarginWidth+p.lineNumbersWidth,V=18,z=document.createElementNS("http://www.w3.org/2000/svg","rect");z.classList.add("arrow-rectangle"),z.setAttribute("x",`${P-O}`),z.setAttribute("y",`${L.to-V/2}`),z.setAttribute("width",`${O}`),z.setAttribute("height",`${V}`),this._element.appendChild(z);const K=document.createElementNS("http://www.w3.org/2000/svg","g"),H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("d",`M 0 ${L.from} L ${D} ${L.from} L ${D} ${L.to} L ${P-N} ${L.to}`),H.setAttribute("fill","none"),K.appendChild(H);const U=document.createElementNS("http://www.w3.org/2000/svg","polygon");U.classList.add("arrow"),h.add(Vn(j=>{H.classList.toggle("currentMove",L.move===d.activeMovedText.read(j)),U.classList.toggle("currentMove",L.move===d.activeMovedText.read(j))})),U.setAttribute("points",`${P-N},${L.to-I/2} ${P},${L.to} ${P-N},${L.to+I/2}`),K.appendChild(U),this._element.appendChild(K),x++}this.width.set(C,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(en(()=>this._element.remove())),this._register(Vn(u=>{const h=this._originalEditorLayoutInfo.read(u),d=this._modifiedEditorLayoutInfo.read(u);!h||!d||(this._element.style.left=`${h.width-h.verticalScrollbarWidth}px`,this._element.style.height=`${h.height}px`,this._element.style.width=`${h.verticalScrollbarWidth+h.contentLeft-WL.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(P4(this._state));const o=Qt(u=>{const h=this._diffModel.read(u),d=h==null?void 0:h.diff.read(u);return d?d.movedTexts.map(f=>({move:f,original:new Eb(FR(f.lineRangeMapping.original.startLineNumber-1),18),modified:new Eb(FR(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(AP(this._editors.original,o.map(u=>u.map(h=>h.original)))),this._register(AP(this._editors.modified,o.map(u=>u.map(h=>h.modified)))),this._register(vh((u,h)=>{const d=o.read(u);for(const f of d)h.add(new Coe(this._editors.original,f.original,f.move,"original",this._diffModel.get())),h.add(new Coe(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=hc("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=hc("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(N4({createEmptyChangeSummary:()=>{},handleChange:(u,h)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const h=this._diffModel.read(u);if(!h)return;const d=h.diff.read(u);let f;if(d&&c==="original"){const g=this._editors.originalCursor.read(u);g&&(f=d.movedTexts.find(p=>p.lineRangeMapping.original.contains(g.lineNumber)))}if(d&&c==="modified"){const g=this._editors.modifiedCursor.read(u);g&&(f=d.movedTexts.find(p=>p.lineRangeMapping.modified.contains(g.lineNumber)))}f!==h.movedTextToCompare.get()&&h.movedTextToCompare.set(void 0,void 0),h.setActiveMovedText(f)}))}};WL.movedCodeBlockPadding=4;let Cw=WL;class tX{static compute(e){const t=[],n=[];for(const s of e){let r=t.findIndex(o=>!o.intersectsStrict(s));r===-1&&(t.length>=6?r=v$e(t,_u(a=>a.intersectWithRangeLength(s),lm)):(r=t.length,t.push(new fK))),t[r].addRange(s),n.push(r)}return new tX(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Coe extends qq{constructor(e,t,n,s,r){const o=Mn("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=n,this._kind=s,this._diffModel=r,this._nodes=Mn("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Mn("div.text-content@textContent"),Mn("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=ls(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Nm(this._nodes.root,{paddingRight:a.map(d=>d.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?k("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):k("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?k("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):k("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new wg(this._nodes.actionBar,{highlightToggledItems:!0})),u=new vg("",l,"",!1);c.push(u,{icon:!1,label:!0});const h=new vg("","Compare",An.asClassName(yt.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Vn(d=>{const f=this._diffModel.movedTextToCompare.read(d)===n;h.checked=f})),c.push(h,{icon:!1,label:!0})}}class uat extends Be{constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=Qt(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),u=this._options.showEmptyDecorations.read(r),h=[],d=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?doe:goe}),g.lineRangeMapping.modified.isEmpty||d.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?hoe:foe}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:Qot}),g.lineRangeMapping.modified.isEmpty||d.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:Yot});else{const p=this._options.useTrueInlineDiffRendering.read(r)&&eX(g.lineRangeMapping);for(const _ of g.lineRangeMapping.innerChanges||[])if(g.lineRangeMapping.original.contains(_.originalRange.startLineNumber)&&h.push({range:_.originalRange,options:_.originalRange.isEmpty()&&u?Jot:JW}),g.lineRangeMapping.modified.contains(_.modifiedRange.startLineNumber)&&d.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()&&u&&!p?Zot:poe}),p){const m=o.model.original.getValueInRange(_.originalRange);d.push({range:_.modifiedRange,options:{description:"deleted-text",before:{content:m,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const g of l.changes){const p=g.original.toInclusiveRange();p&&h.push({range:p,options:c?doe:goe});const _=g.modified.toInclusiveRange();_&&d.push({range:_,options:c?hoe:foe});for(const m of g.innerChanges||[])h.push({range:m.originalRange,options:JW}),d.push({range:m.modifiedRange,options:poe})}const f=this._diffModel.read(r).activeMovedText.read(r);for(const g of a.movedTexts)h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[Cw.movedCodeBlockPadding,0,Cw.movedCodeBlockPadding,Cw.movedCodeBlockPadding]}}),d.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:h,modifiedDecorations:d}}),this._register(DP(this._editors.original,this._decorations.map(r=>(r==null?void 0:r.originalDecorations)||[]))),this._register(DP(this._editors.modified,this._decorations.map(r=>(r==null?void 0:r.modifiedDecorations)||[])))}}class hat{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=$K(this,n=>{const s=this._sashRatio.read(n)??this._options.splitViewDefaultRatio.read(n);return this._computeSashLeft(s,n)},(n,s)=>{const r=this.dimensions.width.get();this._sashRatio.set(n/r,s)}),this._sashRatio=Dn(this,void 0)}_computeSashLeft(e,t){const n=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):s,o=100;return n<=o*2?s:r<o?o:r>n-o?n-o:r}}class Kve extends Be{constructor(e,t,n,s,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=n,this._boundarySashes=s,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new lc(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Vn(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Vn(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class dat extends Be{constructor(e,t,n){super(),this._editor=e,this._domNode=t,this.itemProvider=n,this.scrollTop=ls(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=ls(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=hc("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=hc("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=GK("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(Mn("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{Xs(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(en(()=>r.disconnect())),this._register(Vn(o=>{s.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(Vn(o=>this.render(o)))}dispose(){super.dispose(),Ko(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),n=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),r=nn.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of n){const a=new Xt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);Xs(c=>{for(const u of l){if(!u.range.intersect(a))continue;s.delete(u.id);let h=this.views.get(u.id);if(h)h.item.set(u,c);else{const p=document.createElement("div");this._domNode.appendChild(p);const _=Dn("item",u),m=this.itemProvider.createView(_,p);h=new fat(_,m,p),this.views.set(u.id,h)}const d=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,g=(u.range.endLineNumberExclusive===1?Math.max(d,this._editor.getTopForLineNumber(u.range.startLineNumber,!1)-t):Math.max(d,this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t))-d;h.domNode.style.top=`${d}px`,h.domNode.style.height=`${g}px`,h.gutterItemView.layout(nn.ofStartAndLength(d,g),r)}})}for(const o of s){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class fat{constructor(e,t,n){this.item=e,this.gutterItemView=t,this.domNode=n}}class qve extends Tv{constructor(e){super(),this._getContext=e}runAction(e,t){const n=this._getContext();return super.runAction(e,n)}}class Soe extends Lme{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new km(e-1,t)}}class gat extends Be{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new oUe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Tt),n.hoverDelegate=n.hoverDelegate??this._register(jK()),this.options=n,this.toggleMenuAction=this._register(new J2(()=>{var s;return(s=this.toggleMenuActionViewItem)==null?void 0:s.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new wg(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(s,r)=>{if(s.id===J2.ID)return this.toggleMenuActionViewItem=new zR(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:An.asClassNameArray(n.moreIcon??yt.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const o=n.actionViewItemProvider(s,r);if(o)return o}if(s instanceof l4){const o=new zR(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var n,s;const t=(s=(n=this.options).getKeyBinding)==null?void 0:s.call(n,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const i3=class i3 extends vg{constructor(e,t){t=t||k("moreActions","More Actions..."),super(i3.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};i3.ID="toolbar.toggle.more";let J2=i3;var Xve=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},au=function(i,e){return function(t,n){e(t,n,i)}};let rH=class extends gat{constructor(e,t,n,s,r,o,a,l){super(e,r,{getKeyBinding:u=>o.lookupKeybinding(u.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=n,this._contextKeyService=s,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new Tt);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(u=>l.publicLog2("workbenchActionExecuted",{id:u.action.id,from:c})))}setActions(e,t=[],n){var u,h,d;this._sessionDisposables.clear();const s=e.slice(),r=t.slice(),o=[];let a=0;const l=[];let c=!1;if(((u=this._options)==null?void 0:u.hiddenItemStrategy)!==-1)for(let f=0;f<s.length;f++){const g=s[f];!(g instanceof yg)&&!(g instanceof GE)||g.hideActions&&(o.push(g.hideActions.toggle),g.hideActions.toggle.checked&&a++,g.hideActions.isHidden&&(c=!0,s[f]=void 0,((h=this._options)==null?void 0:h.hiddenItemStrategy)!==0&&(l[f]=g)))}if(((d=this._options)==null?void 0:d.overflowBehavior)!==void 0){const f=rQe(new Set(this._options.overflowBehavior.exempted),Fn.map(s,_=>_==null?void 0:_.id)),g=this._options.overflowBehavior.maxItems-f.size;let p=0;for(let _=0;_<s.length;_++){const m=s[_];m&&(p++,!f.has(m.id)&&p>=g&&(s[_]=void 0,l[_]=m))}}_te(s),_te(l),super.setActions(s,Oo.join(l,r)),(o.length>0||s.length>0)&&this._sessionDisposables.add(Ne(this.getElement(),"contextmenu",f=>{var v,y,C,S,x;const g=new dh(Nt(this.getElement()),f),p=this.getItemAction(g.target);if(!p)return;g.preventDefault(),g.stopPropagation();const _=[];if(p instanceof yg&&p.menuKeybinding)_.push(p.menuKeybinding);else if(!(p instanceof GE||p instanceof J2)){const E=!!this._keybindingService.lookupKeybinding(p.id);_.push(fve(this._commandService,this._keybindingService,p.id,void 0,E))}if(o.length>0){let E=!1;if(a===1&&((v=this._options)==null?void 0:v.hiddenItemStrategy)===0){E=!0;for(let L=0;L<o.length;L++)if(o[L].checked){o[L]=nw({id:p.id,label:p.label,checked:!0,enabled:!1,run(){}});break}}if(!E&&(p instanceof yg||p instanceof GE)){if(!p.hideActions)return;_.push(p.hideActions.hide)}else _.push(nw({id:"label",label:k("hide","Hide"),enabled:!1,run(){}}))}const m=Oo.join(_,o);(y=this._options)!=null&&y.resetMenu&&!n&&(n=[this._options.resetMenu]),c&&n&&(m.push(new Oo),m.push(nw({id:"resetThisMenu",label:k("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),m.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>g,getActions:()=>m,menuId:(C=this._options)==null?void 0:C.contextMenu,menuActionOptions:{renderShortTitle:!0,...(S=this._options)==null?void 0:S.menuOptions},skipTelemetry:typeof((x=this._options)==null?void 0:x.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};rH=Xve([au(2,o1),au(3,Jn),au(4,Wg),au(5,eo),au(6,jl),au(7,a1)],rH);let NP=class extends rH{constructor(e,t,n,s,r,o,a,l,c){super(e,{resetMenu:t,...n},s,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new me),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const u=this._store.add(s.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),h=()=>{var g,p,_;const d=[],f=[];pZe(u,n==null?void 0:n.menuOptions,{primary:d,secondary:f},(g=n==null?void 0:n.toolbarOptions)==null?void 0:g.primaryGroup,(p=n==null?void 0:n.toolbarOptions)==null?void 0:p.shouldInlineSubmenu,(_=n==null?void 0:n.toolbarOptions)==null?void 0:_.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",d.length===0&&f.length===0),super.setActions(d,f)};this._store.add(u.onDidChange(()=>{h(),this._onDidChangeMenuItems.fire(this)})),h()}setActions(){throw new Qn("This toolbar is populated from a menu.")}};NP=Xve([au(3,o1),au(4,Jn),au(5,Wg),au(6,eo),au(7,jl),au(8,a1)],NP);var Yve=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qI=function(i,e){return function(t,n){e(t,n,i)}};const i6=[],jD=35;let oH=class extends Be{constructor(e,t,n,s,r,o,a,l,c){super(),this._diffModel=t,this._editors=n,this._options=s,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(Zr.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=ls(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(u=>u.length>0),this._showSash=Qt(this,u=>this._options.renderSideBySide.read(u)&&this._hasActions.read(u)),this.width=Qt(this,u=>this._hasActions.read(u)?jD:0),this.elements=Mn("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:jD+"px"}},[]),this._currentDiff=Qt(this,u=>{var g;const h=this._diffModel.read(u);if(!h)return;const d=(g=h.diff.read(u))==null?void 0:g.mappings,f=this._editors.modifiedCursor.read(u);if(f)return d==null?void 0:d.find(p=>p.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=Qt(this,u=>{const h=this._diffModel.read(u),d=h==null?void 0:h.diff.read(u);if(!d)return i6;const f=this._editors.modifiedSelections.read(u);if(f.every(m=>m.isEmpty()))return i6;const g=new uc(f.map(m=>Xt.fromRangeInclusive(m))),_=d.mappings.filter(m=>m.lineRangeMapping.innerChanges&&g.intersects(m.lineRangeMapping.modified)).map(m=>({mapping:m,rangeMappings:m.lineRangeMapping.innerChanges.filter(v=>f.some(y=>de.areIntersecting(v.modifiedRange,y)))}));return _.length===0||_.every(m=>m.rangeMappings.length===0)?i6:_}),this._register(Rot(e,this.elements.root)),this._register(Ne(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Nm(this.elements.root,{display:this._hasActions.map(u=>u?"block":"none")})),od(this,u=>this._showSash.read(u)?new Kve(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,$K(this,d=>this._sashLayout.sashLeft.read(d)-jD,(d,f)=>this._sashLayout.sashLeft.set(d+jD,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new dat(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(u,h)=>{const d=this._diffModel.read(h);if(!d)return[];const f=d.diff.read(h);if(!f)return[];const g=this._selectedDiffs.read(h);if(g.length>0){const _=$l.fromRangeMappings(g.flatMap(m=>m.rangeMappings));return[new xoe(_,!0,Zr.DiffEditorSelectionToolbar,void 0,d.model.original.uri,d.model.modified.uri)]}const p=this._currentDiff.read(h);return f.mappings.map(_=>new xoe(_.lineRangeMapping.withInnerChangesFromLineRanges(),_.lineRangeMapping===(p==null?void 0:p.lineRangeMapping),Zr.DiffEditorHunkToolbar,void 0,d.model.original.uri,d.model.modified.uri))},createView:(u,h)=>this._instantiationService.createInstance(aH,u,h,this)})),this._register(Ne(this.elements.gutter,it.MOUSE_WHEEL,u=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],n=new Soe(this._editors.modifiedModel.get()),s=new Soe(this._editors.original.getModel());return new b$e(t.map(a=>a.toTextEdit(n))).apply(s)}layout(e){this.elements.gutter.style.left=e+"px"}};oH=Yve([qI(6,oi),qI(7,Jn),qI(8,o1)],oH);class xoe{constructor(e,t,n,s,r,o){this.mapping=e,this.showAlways=t,this.menuId=n,this.rangeOverride=s,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let aH=class extends Be{constructor(e,t,n,s){super(),this._item=e,this._elements=Mn("div.gutterItem",{style:{height:"20px",width:"34px"}},[Mn("div.background@background",{},[]),Mn("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=Dn(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(s.createInstance(M2,"element",!0,{position:{hoverPosition:1}}));this._register(bE(t,this._elements.root)),this._register(Vn(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(vh((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(NP,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new qve(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:n.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let n=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),n=this._elements.buttons.clientHeight;const s=e.length/2-n/2,r=n;let o=e.start+s;const a=nn.tryCreate(r,t.endExclusive-r-n),l=nn.tryCreate(e.start+r,e.endExclusive-n-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};aH=Yve([qI(3,oi)],aH);function eT(i){return lH.get(i)}const Ip=class Ip extends Be{static get(e){let t=Ip._map.get(e);if(!t){t=new Ip(e),Ip._map.set(e,t);const n=e.onDidDispose(()=>{const s=Ip._map.get(e);s&&(Ip._map.delete(e),s.dispose(),n.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new fk(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=Dn(this,this.editor.getModel()),this.model=this._model,this.isReadonly=ls(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=gV({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=gV({owner:this,equalsFn:sse(iYe(gi.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=ls(this,n=>{const s=this.editor.onDidFocusEditorWidget(n),r=this.editor.onDidBlurEditorWidget(n);return{dispose(){s.dispose(),r.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=$K(this,n=>{var s;return this.versionId.read(n),((s=this.model.read(n))==null?void 0:s.getValue())??""},(n,s)=>{const r=this.model.get();r!==null&&n!==r.getValue()&&r.setValue(n)}),this.valueIsEmpty=Qt(this,n=>{var s;return this.versionId.read(n),((s=this.editor.getModel())==null?void 0:s.getValueLength())===0}),this.cursorSelection=A4({owner:this,equalsFn:sse(gi.selectionsEqual)},n=>{var s;return((s=this.selections.read(n))==null?void 0:s[0])??null}),this.onDidType=GK(this),this.scrollTop=ls(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=ls(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=ls(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(n=>n.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(n=>n.decorationsLeft),this.contentWidth=ls(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(n=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,n)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(n=>{var s;this._beginUpdate();try{this._versionId.set(((s=this.editor.getModel())==null?void 0:s.getVersionId())??null,this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(n=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return ls(this,t=>this.editor.onDidChangeConfiguration(n=>{n.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new Tt,n=this.editor.createDecorationsCollection();return t.add(I4({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);n.set(r)})),t.add({dispose:()=>{n.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,n={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(n);const s=Vn(r=>{e.position.read(r),e.minContentWidthInPx.read(r),this.editor.layoutOverlayWidget(n)});return en(()=>{s.dispose(),this.editor.removeOverlayWidget(n)})}};Ip._map=new Map;let lH=Ip;var pat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mat=function(i,e){return function(t,n){e(t,n,i)}},XI,lv;let cH=(lv=class extends Be{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._instantiationService=s,this._modifiedOutlineSource=od(this,l=>{const c=this._editors.modifiedModel.read(l),u=XI._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Xs(u=>{for(const h of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(h.getStartPosition().lineNumber,0,u),c==null||c.ensureOriginalLineIsVisible(h.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Xs(u=>{for(const h of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(h.getStartPosition().lineNumber,0,u),c==null||c.ensureModifiedLineIsVisible(h.getEndPosition().lineNumber,0,u)})}));const r=this._diffModel.map((l,c)=>{var h;const u=(l==null?void 0:l.unchangedRegions.read(c))??[];return u.length===1&&u[0].modifiedLineNumber===1&&u[0].lineCount===((h=this._editors.modifiedModel.read(c))==null?void 0:h.getLineCount())?[]:u});this.viewZones=qC(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const h=[],d=[],f=this._options.renderSideBySide.read(l),g=this._options.compactMode.read(l),p=r.read(l);for(let _=0;_<p.length;_++){const m=p[_];if(!m.shouldHideControls(l)&&!(g&&(_===0||_===p.length-1)))if(g){{const v=Qt(this,C=>m.getHiddenOriginalRange(C).startLineNumber-1),y=new Eb(v,12);h.push(y),c.add(new Eoe(this._editors.original,y,m,!f))}{const v=Qt(this,C=>m.getHiddenModifiedRange(C).startLineNumber-1),y=new Eb(v,12);d.push(y),c.add(new Eoe(this._editors.modified,y,m))}}else{{const v=Qt(this,C=>m.getHiddenOriginalRange(C).startLineNumber-1),y=new Eb(v,24);h.push(y),c.add(new Loe(this._editors.original,y,m,m.originalUnchangedRange,!f,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}{const v=Qt(this,C=>m.getHiddenModifiedRange(C).startLineNumber-1),y=new Eb(v,24);d.push(y),c.add(new Loe(this._editors.modified,y,m,m.modifiedUnchangedRange,!1,u,C=>this._diffModel.get().ensureModifiedLineIsVisible(C,2,void 0),this._options))}}}return{origViewZones:h,modViewZones:d}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new A_e(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(k("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+An.asClassName(yt.fold),zIndex:10001};this._register(DP(this._editors.original,Qt(this,l=>{const c=r.read(l),u=c.map(h=>({range:h.originalUnchangedRange.toInclusiveRange(),options:o}));for(const h of c)h.shouldHideControls(l)&&u.push({range:de.fromPositions(new Se(h.originalLineNumber,1)),options:a});return u}))),this._register(DP(this._editors.modified,Qt(this,l=>{const c=r.read(l),u=c.map(h=>({range:h.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const h of c)h.shouldHideControls(l)&&u.push({range:Xt.ofLength(h.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(Vn(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(Hw)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(Hw))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const d=h.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(u));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const d=h.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(u));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},XI=lv,lv._breadcrumbsSourceFactory=Dn(XI,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),lv);cH=XI=pat([mat(3,oi)],cH);class Eoe extends qq{constructor(e,t,n,s=!1){const r=Mn("div.diff-hidden-lines-widget");super(e,t,r.root),this._unchangedRegion=n,this._hide=s,this._nodes=Mn("div.diff-hidden-lines-compact",[Mn("div.line-left",[]),Mn("div.text@text",[]),Mn("div.line-right",[])]),r.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Vn(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=k("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class Loe extends qq{constructor(e,t,n,s,r,o,a,l){const c=Mn("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=s,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Mn("div.diff-hidden-lines",[Mn("div.top@top",{title:k("diff.hiddenLines.top","Click or drag to show more above")}),Mn("div.center@content",{style:{display:"flex"}},[Mn("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[Ht("a",{title:k("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...V0("$(unfold)"))]),Mn("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Mn("div.bottom@bottom",{title:k("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Ko(this._nodes.first):this._register(Nm(this._nodes.first,{width:eT(this._editor).layoutInfoContentLeft})),this._register(Vn(h=>{const d=this._unchangedRegion.visibleLineCountTop.read(h)+this._unchangedRegion.visibleLineCountBottom.read(h)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!d),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),this._nodes.top.classList.toggle("canMoveBottom",!d);const f=this._unchangedRegion.isDragged.read(h),g=this._editor.getDomNode();g&&(g.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(g.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),g.classList.toggle("canMoveBottom",!d)):f==="bottom"?(g.classList.toggle("canMoveTop",!d),g.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0)):(g.classList.toggle("canMoveTop",!1),g.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(Ne(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const d=h.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=Nt(this._nodes.top),_=Ne(p,"mousemove",v=>{const C=v.clientY-d;f=f||Math.abs(C)>2;const S=Math.round(C/u.getOption(67)),x=Math.max(0,Math.min(g+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(x,void 0)}),m=Ne(p,"mouseup",v=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),m.dispose()})})),this._register(Ne(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const d=h.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=Nt(this._nodes.bottom),_=Ne(p,"mousemove",v=>{const C=v.clientY-d;f=f||Math.abs(C)>2;const S=Math.round(C/u.getOption(67)),x=Math.max(0,Math.min(g-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),E=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(x,void 0);const L=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(L-E))}),m=Ne(p,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const y=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(C-y))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),m.dispose()})})),this._register(Vn(h=>{const d=[];if(!this._hide){const f=n.getHiddenModifiedRange(h).length,g=k("hiddenLines","{0} hidden lines",f),p=Ht("span",{title:k("diff.hiddenLines.expandAll","Double click to unfold")},g);p.addEventListener("dblclick",v=>{v.button===0&&(v.preventDefault(),this._unchangedRegion.showAll(void 0))}),d.push(p);const _=this._unchangedRegion.getHiddenModifiedRange(h),m=this._modifiedOutlineSource.getBreadcrumbItems(_,h);if(m.length>0){d.push(Ht("span",void 0,"  |  "));for(let v=0;v<m.length;v++){const y=m[v],C=X9.toIcon(y.kind),S=Mn("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[kR(C)," ",y.name,...v===m.length-1?[]:[kR(yt.chevronRight)]]).root;d.push(S),S.onclick=()=>{this._revealModifiedHiddenLine(y.startLineNumber)}}}}Ko(this._nodes.others,...d)}))}}var _at=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vat=function(i,e){return function(t,n){e(t,n,i)}},Yu,gg;let tT=(gg=class extends Be{constructor(e,t,n,s,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=s,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Yu.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=ls(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Qt(d=>{const f=l.read(d),g=f.getColor(aje)||(f.getColor(rje)||zU).transparent(2),p=f.getColor(lje)||(f.getColor(oje)||UU).transparent(2);return{insertColor:g,removeColor:p}}),u=Nn(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const h=Mn("div.diffOverview",{style:{position:"absolute",top:"0px",width:Yu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(bE(h,u.domNode)),this._register(vr(h,it.POINTER_DOWN,d=>{this._editors.modified.delegateVerticalScrollbarPointerDown(d)})),this._register(Ne(h,it.MOUSE_WHEEL,d=>{this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1})),this._register(bE(this._rootElement,h)),this._register(vh((d,f)=>{const g=this._diffModel.read(d),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(f.add(p),f.add(bE(h,p.getDomNode())));const _=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(_&&(f.add(_),f.add(bE(h,_.getDomNode()))),!p||!_)return;const m=hc("viewZoneChanged",this._editors.original.onDidChangeViewZones),v=hc("viewZoneChanged",this._editors.modified.onDidChangeViewZones),y=hc("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),C=hc("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(Vn(S=>{var I;m.read(S),v.read(S),y.read(S),C.read(S);const x=c.read(S),E=(I=g==null?void 0:g.diff.read(S))==null?void 0:I.mappings;function L(N,P,O){const V=O._getViewModel();return V?N.filter(z=>z.length>0).map(z=>{const K=V.coordinatesConverter.convertModelPositionToViewPosition(new Se(z.startLineNumber,1)),H=V.coordinatesConverter.convertModelPositionToViewPosition(new Se(z.endLineNumberExclusive,1)),U=H.lineNumber-K.lineNumber;return new Ove(K.lineNumber,H.lineNumber,U,P.toString())}):[]}const T=L((E||[]).map(N=>N.lineRangeMapping.original),x.removeColor,this._editors.original),D=L((E||[]).map(N=>N.lineRangeMapping.modified),x.insertColor,this._editors.modified);p==null||p.setZones(T),_==null||_.setZones(D)})),f.add(Vn(S=>{const x=this._rootHeight.read(S),E=this._rootWidth.read(S),L=this._modifiedEditorLayoutInfo.read(S);if(L){const T=Yu.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Yu.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:x,right:T+Yu.ONE_OVERVIEW_WIDTH,width:Yu.ONE_OVERVIEW_WIDTH}),_.setLayout({top:0,height:x,right:0,width:Yu.ONE_OVERVIEW_WIDTH});const D=this._editors.modifiedScrollTop.read(S),I=this._editors.modifiedScrollHeight.read(S),N=this._editors.modified.getOption(104),P=new iC(N.verticalHasArrows?N.arrowSize:0,N.verticalScrollbarSize,0,L.height,I,D);u.setTop(P.getSliderPosition()),u.setHeight(P.getSliderSize())}else u.setTop(0),u.setHeight(0);h.style.height=x+"px",h.style.left=E-Yu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Yu.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Yu=gg,gg.ONE_OVERVIEW_WIDTH=15,gg.ENTIRE_DIFF_OVERVIEW_WIDTH=gg.ONE_OVERVIEW_WIDTH*2,gg);tT=Yu=_at([vat(6,Au)],tT);const s6=[];class yat extends Be{constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._widget=s,this._selectedDiffs=Qt(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return s6;const l=this._editors.modifiedSelections.read(r);if(l.every(d=>d.isEmpty()))return s6;const c=new uc(l.map(d=>Xt.fromRangeInclusive(d))),h=a.mappings.filter(d=>d.lineRangeMapping.innerChanges&&c.intersects(d.lineRangeMapping.modified)).map(d=>({mapping:d,rangeMappings:d.lineRangeMapping.innerChanges.filter(f=>l.some(g=>de.areIntersecting(f.modifiedRange,g)))}));return h.length===0||h.every(d=>d.rangeMappings.length===0)?s6:h}),this._register(vh((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a==null?void 0:a.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],u=this._selectedDiffs.read(r),h=new Set(u.map(d=>d.mapping));if(u.length>0){const d=this._editors.modifiedSelections.read(r),f=o.add(new RP(d[d.length-1].positionLineNumber,this._widget,u.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const d of l.mappings)if(!h.has(d)&&!d.lineRangeMapping.modified.isEmpty&&d.lineRangeMapping.innerChanges){const f=o.add(new RP(d.lineRangeMapping.modified.startLineNumber,this._widget,d.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}o.add(en(()=>{for(const d of c)this._editors.modified.removeGlyphMarginWidget(d)}))}))}}const s3=class s3 extends Be{getId(){return this._id}constructor(e,t,n,s){super(),this._lineNumber=e,this._widget=t,this._diffs=n,this._revertSelection=s,this._id=`revertButton${s3.counter++}`,this._domNode=Mn("div.revertButton",{title:this._revertSelection?k("revertSelectedChanges","Revert Selected Changes"):k("revertChange","Revert Change")},[kR(yt.arrowRight)]).root,this._register(Ne(this._domNode,it.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(Ne(this._domNode,it.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(Ne(this._domNode,it.CLICK,r=>{this._diffs instanceof Ao?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Tm.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};s3.counter=0;let RP=s3;function mf(i,e,t){const n=i.bindTo(e);return I4({debugName:()=>`Set Context Key "${i.key}"`},s=>{n.set(t(s))})}var bat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Toe=function(i,e){return function(t,n){e(t,n,i)}};let uH=class extends Be{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,n,s,r,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=r,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new me),this.modifiedScrollTop=ls(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=ls(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=eT(this.modified),this.originalObs=eT(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=ls(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=A4({owner:this,equalsFn:Se.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new Se(1,1)}),this.originalCursor=ls(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new Se(1,1)),this._argCodeEditorWidgetOptions=null,this._register(N4({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(n.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{n.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,n,s){const r=this._createInnerEditor(e,t,n,s);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+tT.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),n.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=Jv.revealHorizontalRightPadding.defaultValue+tT.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var n;e||(e="");const t=k("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(n=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:n.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};uH=bat([Toe(5,oi),Toe(6,eo)],uH);const r3=class r3 extends Be{constructor(){super(...arguments),this._id=++r3.idCounter,this._onDidDispose=this._register(new me),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=0){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,s=!0){this._targetEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};r3.idCounter=0;let hH=r3;var wat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Cat=function(i,e){return function(t,n){e(t,n,i)}};let dH=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=Dn(this,0),this._screenReaderMode=ls(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Qt(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Qt(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=Qt(this,s=>this.compactMode.read(s)&&this.shouldRenderInlineViewInSmartMode.read(s)?!1:this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=Qt(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=Qt(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=Qt(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=Qt(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=Qt(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=Qt(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=Qt(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=Qt(this,s=>this._options.read(s).maxComputationTime),this.showMoves=Qt(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=Qt(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=Qt(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=Qt(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=Qt(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=Qt(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=Qt(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=Qt(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Qt(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.compactMode=Qt(this,s=>this._options.read(s).compactMode),this.trueInlineDiffRenderingEnabled=Qt(this,s=>this._options.read(s).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Qt(this,s=>!this.renderSideBySide.read(s)&&this.trueInlineDiffRenderingEnabled.read(s)),this.hideUnchangedRegions=Qt(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Qt(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Qt(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Qt(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount),this._model=Dn(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,s=>yYe(this,r=>{const o=s==null?void 0:s.diff.read(r);return o?Sat(o,this.trueInlineDiffRenderingEnabled.read(r)):void 0})).flatten().map(this,s=>!!s),this.inlineViewHideOriginalLineNumbers=this.compactMode;const n={...e,...koe(e,Wr)};this._options=Dn(this,n)}updateOptions(e){const t=koe(e,this._options.get()),n={...this._options.get(),...e,...t};this._options.set(n,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};dH=wat([Cat(1,Rh)],dH);function Sat(i,e){return i.mappings.every(t=>xat(t.lineRangeMapping)||Eat(t.lineRangeMapping)||e&&eX(t.lineRangeMapping))}function xat(i){return i.original.length===0}function Eat(i){return i.modified.length===0}function koe(i,e){var t,n,s,r,o,a,l,c;return{enableSplitViewResizing:_t(i.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:sze(i.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:_t(i.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:_t(i.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:H_(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:H_(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:_t(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:_t(i.renderIndicators,e.renderIndicators),originalEditable:_t(i.originalEditable,e.originalEditable),diffCodeLens:_t(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:_t(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Zi(i.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:Zi(i.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:_t(i.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:_t((t=i.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:_t((n=i.experimental)==null?void 0:n.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:_t((s=i.experimental)==null?void 0:s.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:_t(((r=i.hideUnchangedRegions)==null?void 0:r.enabled)??((o=i.experimental)==null?void 0:o.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:H_((a=i.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:H_((l=i.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:H_((c=i.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:_t(i.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:_t(i.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:H_(i.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:_t(i.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:_t(i.renderGutterMenu,e.renderGutterMenu),compactMode:_t(i.compactMode,e.compactMode)}}var Lat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mx=function(i,e){return function(t,n){e(t,n,i)}};let PP=class extends hH{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,n,s,r,o,a,l){super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Mn("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Mn("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Mn("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Mn("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register($_e(this,void 0)),this._diffModel=Qt(this,C=>{var S;return(S=this._diffModelSrc.read(C))==null?void 0:S.object}),this.onDidChangeModel=Qe.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new ZC([Jn,this._contextKeyService]))),this._boundarySashes=Dn(this,void 0),this._accessibleDiffViewerShouldBeVisible=Dn(this,!1),this._accessibleDiffViewerVisible=Qt(this,C=>this._options.onlyShowAccessibleDiffViewer.read(C)?!0:this._accessibleDiffViewerShouldBeVisible.read(C)),this._movedBlocksLinesPart=Dn(this,void 0),this._layoutInfo=Qt(this,C=>{var K,H;const S=this._rootSizeObserver.width.read(C),x=this._rootSizeObserver.height.read(C);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=x+"px";const E=this._sash.read(C),L=this._gutter.read(C),T=(L==null?void 0:L.width.read(C))??0,D=((K=this._overviewRulerPart.read(C))==null?void 0:K.width)??0;let I,N,P,O,V;if(!!E){const U=E.sashLeft.read(C),j=((H=this._movedBlocksLinesPart.read(C))==null?void 0:H.width.read(C))??0;I=0,N=U-T-j,V=U-T,P=U,O=S-P-D}else{V=0;const U=this._options.inlineViewHideOriginalLineNumbers.read(C);I=T,U?N=0:N=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(C)),P=T+N,O=S-P-D}return this.elements.original.style.left=I+"px",this.elements.original.style.width=N+"px",this._editors.original.layout({width:N,height:x},!0),L==null||L.layout(V),this.elements.modified.style.left=P+"px",this.elements.modified.style.width=O+"px",this._editors.modified.layout({width:O,height:x},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((C,S)=>C==null?void 0:C.diff.read(S)),this.onDidUpdateDiff=Qe.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(en(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Vve(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(dH,t),this._register(Vn(C=>{this._options.setWidth(this._rootSizeObserver.width.read(C))})),this._contextKeyService.createKey(pt.isEmbeddedDiffEditor.key,!1),this._register(mf(pt.isEmbeddedDiffEditor,this._contextKeyService,C=>this._options.isInEmbeddedEditor.read(C))),this._register(mf(pt.comparingMovedCode,this._contextKeyService,C=>{var S;return!!((S=this._diffModel.read(C))!=null&&S.movedTextToCompare.read(C))})),this._register(mf(pt.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,C=>this._options.couldShowInlineViewBecauseOfSize.read(C))),this._register(mf(pt.diffEditorInlineMode,this._contextKeyService,C=>!this._options.renderSideBySide.read(C))),this._register(mf(pt.hasChanges,this._contextKeyService,C=>{var S,x;return(((x=(S=this._diffModel.read(C))==null?void 0:S.diff.read(C))==null?void 0:x.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(uH,this.elements.original,this.elements.modified,this._options,n,(C,S,x,E)=>this._createInnerEditor(C,S,x,E))),this._register(mf(pt.diffEditorOriginalWritable,this._contextKeyService,C=>this._options.originalEditable.read(C))),this._register(mf(pt.diffEditorModifiedWritable,this._contextKeyService,C=>!this._options.readOnly.read(C))),this._register(mf(pt.diffEditorOriginalUri,this._contextKeyService,C=>{var S;return((S=this._diffModel.read(C))==null?void 0:S.model.original.uri.toString())??""})),this._register(mf(pt.diffEditorModifiedUri,this._contextKeyService,C=>{var S;return((S=this._diffModel.read(C))==null?void 0:S.model.modified.uri.toString())??""})),this._overviewRulerPart=od(this,C=>this._options.renderOverviewRuler.read(C)?this._instantiationService.createInstance(Qc(tT,C),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(S=>S.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((C,S)=>{var x;return C-(((x=this._overviewRulerPart.read(S))==null?void 0:x.width)??0)})};this._sashLayout=new hat(this._options,c),this._sash=od(this,C=>{const S=this._options.renderSideBySide.read(C);return this.elements.root.classList.toggle("side-by-side",S),S?new Kve(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=od(this,C=>this._instantiationService.createInstance(Qc(cH,C),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);od(this,C=>this._instantiationService.createInstance(Qc(uat,C),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const h=new Set,d=new Set;let f=!1;const g=od(this,C=>this._instantiationService.createInstance(Qc(sH,C),Nt(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||u.get().isUpdatingHiddenAreas,h,d)).recomputeInitiallyAndOnChange(this._store),p=Qt(this,C=>{const S=g.read(C).viewZones.read(C).orig,x=u.read(C).viewZones.read(C).origViewZones;return S.concat(x)}),_=Qt(this,C=>{const S=g.read(C).viewZones.read(C).mod,x=u.read(C).viewZones.read(C).modViewZones;return S.concat(x)});this._register(AP(this._editors.original,p,C=>{f=C},h));let m;this._register(AP(this._editors.modified,_,C=>{f=C,f?m=MP.capture(this._editors.modified):(m==null||m.restore(this._editors.modified),m=void 0)},d)),this._accessibleDiffViewer=od(this,C=>this._instantiationService.createInstance(Qc(D0,C),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(S,x)=>this._accessibleDiffViewerShouldBeVisible.set(S,x),this._options.onlyShowAccessibleDiffViewer.map(S=>!S),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((S,x)=>{var E;return(E=S==null?void 0:S.diff.read(x))==null?void 0:E.mappings.map(L=>L.lineRangeMapping)}),new qot(this._editors))).recomputeInitiallyAndOnChange(this._store);const v=this._accessibleDiffViewerVisible.map(C=>C?"hidden":"visible");this._register(Nm(this.elements.modified,{visibility:v})),this._register(Nm(this.elements.original,{visibility:v})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=od(this,C=>this._options.shouldRenderGutterMenu.read(C)?this._instantiationService.createInstance(Qc(oH,C),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(P4(this._layoutInfo)),od(this,C=>new(Qc(Cw,C))(this.elements.root,this._diffModel,this._layoutInfo.map(S=>S.originalEditor),this._layoutInfo.map(S=>S.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,C=>{this._movedBlocksLinesPart.set(C,void 0)}),this._register(Qe.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!0))),this._register(Qe.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,C=>this._handleCursorPositionChange(C,!1)));const y=this._diffModel.map(this,(C,S)=>{if(C)return C.diff.read(S)===void 0&&!C.isDiffUpToDate.read(S)});this._register(vh((C,S)=>{if(y.read(C)===!0){const x=this._editorProgressService.show(!0,1e3);S.add(en(()=>x.done()))}})),this._register(vh((C,S)=>{S.add(new(Qc(yat,C))(this._editors,this._diffModel,this._options,this))})),this._register(vh((C,S)=>{const x=this._diffModel.read(C);if(x)for(const E of[x.model.original,x.model.modified])S.add(E.onWillDispose(L=>{di(new Qn("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Vn(C=>{this._options.setModel(this._diffModel.read(C))}))}_createInnerEditor(e,t,n,s){return e.createInstance(kP,t,n,s)}_createDiffEditorContributions(){const e=iw.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(n){di(n)}}get _targetEditor(){return this._editors.modified}getEditorType(){return kq.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var n;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(n=this._diffModel.get())==null?void 0:n.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(n.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(iH,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?IP.create(e).createNewRef(this):IP.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const n=this._diffModel.get();!e&&n&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&WK(t,s=>{var a;const r=e==null?void 0:e.object;ls.batchEventsGlobally(s,()=>{this._editors.original.setModel(r?r.model.original:null),this._editors.modified.setModel(r?r.model.modified:null)});const o=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),s),setTimeout(()=>{o==null||o.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?Tat(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const n=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",n)}_goTo(e){this._editors.modified.setPosition(new Se(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var r,o;const t=(o=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:o.mappings;if(!t||t.length===0)return;const n=this._editors.modified.getPosition().lineNumber;let s;e==="next"?s=t.find(a=>a.lineRangeMapping.modified.startLineNumber>n)??t[0]:s=mR(t,a=>a.lineRangeMapping.modified.startLineNumber<n)??t[t.length-1],this._goTo(s),s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"diffEditor.goToDiff"}):s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"diffEditor.goToDiff"}):s&&this._accessibilitySignalService.playSignal(md.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var n;const t=(n=e.diff.get())==null?void 0:n.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var o,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,n=e?this._editors.original:this._editors.modified;let s;const r=t.getSelection();if(r){const l=(a=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=coe(r.getStartPosition(),l),u=coe(r.getEndPosition(),l);s=de.plusRange(c,u)}}return{destination:n,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Xs(n=>{for(const s of e)s.collapseAll(n)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Xs(n=>{for(const s of e)s.showAll(n)})}_handleCursorPositionChange(e,t){var n,s;if((e==null?void 0:e.reason)===3){const r=(s=(n=this._diffModel.get())==null?void 0:n.diff.get())==null?void 0:s.mappings.find(o=>t?o.lineRangeMapping.modified.contains(e.position.lineNumber):o.lineRangeMapping.original.contains(e.position.lineNumber));r!=null&&r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):r!=null&&r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):r&&this._accessibilitySignalService.playSignal(md.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};PP=Lat([mx(3,Jn),mx(4,oi),mx(5,sr),mx(6,X4),mx(7,zK)],PP);function Tat(i){return i.mappings.map(e=>{const t=e.lineRangeMapping;let n,s,r,o,a=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,s=0,a=void 0):(n=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:s,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var nX=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mi=function(i,e){return function(t,n){e(t,n,i)}};let kat=0,Moe=!1;function Mat(i){if(!i){if(Moe)return;Moe=!0}lXe(i||ui.document.body)}let OP=class extends kP{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f){const g={...t};g.ariaLabel=g.ariaLabel||cV.editorViewAccessibleLabel,super(e,g,{},n,s,r,o,c,u,h,d,f),l instanceof cC?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,Mat(g.ariaContainerElement),EYe((p,_)=>n.createInstance(M2,p,_,{})),LYe(a)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++kat,r=jn.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Be.None;const t=e.id,n=e.label,s=jn.and(jn.equals("editorId",this.getId()),jn.deserialize(e.precondition)),r=e.keybindings,o=jn.and(s,jn.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),u=new Tt,h=this.getId()+":"+t;if(u.add(Na.registerCommand(h,c)),a){const f={command:{id:h,title:n},when:s,group:a,order:l};u.add(qw.appendMenuItem(Zr.EditorContext,f))}if(Array.isArray(r))for(const f of r)u.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,c,o));const d=new Fve(h,n,n,void 0,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,d),u.add(en(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof wR)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};OP=nX([mi(2,oi),mi(3,sr),mi(4,jl),mi(5,Jn),mi(6,uk),mi(7,eo),mi(8,Au),mi(9,Nh),mi(10,Rh),mi(11,Yd),mi(12,pi)],OP);let fH=class extends OP{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_){const m={...t};cP(h,m,!1);const v=c.registerEditorContainer(e);typeof m.theme=="string"&&c.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!m.autoDetectHighContrast);const y=m.model;delete m.model,super(e,m,n,s,r,o,a,l,c,u,d,p,_),this._configurationService=h,this._standaloneThemeService=c,this._register(v);let C;if(typeof y>"u"){const S=g.getLanguageIdByMimeType(m.language)||m.language||vu;C=Zve(f,g,m.value||"",S,void 0),this._ownsModel=!0}else C=y,this._ownsModel=!1;if(this._attachModel(C),C){const S={oldModelUrl:null,newModelUrl:C.uri};this._onDidChangeModel.fire(S)}}dispose(){super.dispose()}updateOptions(e){cP(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};fH=nX([mi(2,oi),mi(3,sr),mi(4,jl),mi(5,Jn),mi(6,uk),mi(7,eo),mi(8,Iu),mi(9,Nh),mi(10,hs),mi(11,Rh),mi(12,Jo),mi(13,yr),mi(14,Yd),mi(15,pi)],fH);let gH=class extends PP{constructor(e,t,n,s,r,o,a,l,c,u,h,d){const f={...t};cP(l,f,!0);const g=o.registerEditorContainer(e);typeof f.theme=="string"&&o.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,n,r,d,u),this._configurationService=l,this._standaloneThemeService=o,this._register(g)}dispose(){super.dispose()}updateOptions(e){cP(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(OP,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};gH=nX([mi(2,oi),mi(3,Jn),mi(4,sr),mi(5,Iu),mi(6,Nh),mi(7,hs),mi(8,Wg),mi(9,zK),mi(10,Lq),mi(11,X4)],gH);function Zve(i,e,t,n,s){if(t=t||"",!n){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),Doe(i,t,e.createByFilepathOrFirstLine(s||null,o),s)}return Doe(i,t,e.createById(n),s)}function Doe(i,e,t,n){return i.createModel(e,t,n)}var Dat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Aoe=function(i,e){return function(t,n){e(t,n,i)}};class Aat{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let FP=class extends Be{constructor(e,t,n,s,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=n,this._instantiationService=s,this._viewModel=Dn(this,void 0),this._collapsed=Qt(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=Dn(this,500),this.contentHeight=Qt(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=Dn(this,0),this._modifiedWidth=Dn(this,0),this._originalContentWidth=Dn(this,0),this._originalWidth=Dn(this,0),this.maxScroll=Qt(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),u=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>u?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:u,width:this._originalWidth.read(l)}}),this._elements=Mn("div.multiDiffEntry",[Mn("div.header@header",[Mn("div.header-content",[Mn("div.collapse-button@collapseButton"),Mn("div.file-path",[Mn("div.title.modified.show-file-icons@primaryPath",[]),Mn("div.status.deleted@status",["R"]),Mn("div.title.original.show-file-icons@secondaryPath",[])]),Mn("div.actions@actions")])]),Mn("div.editorParent",[Mn("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(PP,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=eT(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=eT(this.editor.getOriginalEditor()).isFocused,this.isFocused=Qt(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Tt),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new GV(this._elements.collapseButton,{});this._register(Vn(l=>{o.element.className="",o.icon=this._collapsed.read(l)?yt.chevronRight:yt.chevronDown})),this._register(o.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(Vn(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{gE(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(Vn(l=>{var u;const c=(u=this._viewModel.read(l))==null?void 0:u.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new ZC([Jn,this._contextKeyService])));this._register(a.createInstance(NP,this._elements.actions,Zr.MultiDiffEditorFileToolbar,{actionRunner:this._register(new qve(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>mZe(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){gE(s=>{this._viewModel.set(void 0,s),this.editor.setDiffModel(null,s),this._dataStore.clear()});return}const n=e.viewModel.documentDiffItem;if(gE(s=>{var c,u;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let r=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(u=this._resourceLabel2)==null||u.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,s),this.editor.updateOptions(t(n.options??{}))}),n.onOptionsDidChange&&this._dataStore.add(n.onOptionsDidChange(()=>{this.editor.updateOptions(t(n.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,s=>{s||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[s,r]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(s,r)}render(e,t,n,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(s.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,gE(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=n,this.editor.getOriginalEditor().setScrollTop(n)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||n>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};FP=Dat([Aoe(3,oi),Aoe(4,Jn)],FP);class Iat{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const n=[...this._unused.values()];t=n.find(s=>this._itemData.get(s).getId()===e.getId())??n[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var Nat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ioe=function(i,e){return function(t,n){e(t,n,i)}};let pH=class extends Be{constructor(e,t,n,s,r,o){super(),this._element=e,this._dimension=t,this._viewModel=n,this._workbenchUIElementFactory=s,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=Mn("div.scrollContent",[Mn("div@content",{style:{overflow:"hidden"}}),Mn("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new jC({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>al(Nt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new L4(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Mn("div.monaco-component.multiDiffEditor",{},[Mn("div",{},[this._scrollableElement.getDomNode()]),Mn("div.placeholder@placeholder",{},[Mn("div",[k("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Vve(this._element,void 0)),this._objectPool=this._register(new Iat(l=>{const c=this._instantiationService.createInstance(FP,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=ls(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=ls(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=qC(this,(l,c)=>{const u=this._viewModel.read(l);if(!u)return{items:[],getItem:g=>{throw new Qn}};const h=u.items.read(l),d=new Map;return{items:h.map(g=>{var m;const p=c.add(new Rat(g,this._objectPool,this.scrollLeft,v=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+v})})),_=(m=this._lastDocStates)==null?void 0:m[p.getKey()];return _&&Xs(v=>{p.setViewState(_,v)}),d.set(g,p),p}),getItem:g=>d.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,h)=>u+h.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new ZC([Jn,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(pt.inMultiDiffEditor.key,!0),this._register(vh((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[h,d]of Object.entries(u.contextKeys)){const f=this._contextKeyService.createKey(h,void 0);f.set(d),c.add(en(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(pt.multiDiffEditorAllCollapsed.key,!1);this._register(Vn(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(h=>h.collapsed.read(l));a.set(u)}})),this._register(Vn(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(Vn(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(Vn(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${u}px`;const h=this._sizeObserver.width.read(l);let d=h;const f=this._viewItems.read(l),g=Eme(f,_u(p=>p.maxScroll.read(l).maxScroll,lm));if(g){const p=g.maxScroll.read(l);d=h+p.maxScroll}this._scrollableElement.setScrollDimensions({width:h,height:c,scrollHeight:u,scrollWidth:d})})),e.replaceChildren(this._elements.root),this._register(en(()=>{e.replaceChildren()})),this._register(this._register(Vn(l=>{gE(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let n=0,s=0,r=0;const o=this._sizeObserver.height.read(e),a=nn.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),h=Math.min(u,o),d=nn.ofStartAndLength(s,h),f=nn.ofStartAndLength(r,u);if(f.isBefore(a))n-=u-h,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,u-h));n-=g;const p=nn.ofStartAndLength(t+n,o);c.render(d,g,l,p)}s+=h+this._spaceBetweenPx,r+=u+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+n)}px)`}};pH=Nat([Ioe(4,Jn),Ioe(5,oi)],pH);class Rat extends Be{constructor(e,t,n,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=n,this._deltaScrollVertical=s,this._templateRef=this._register($_e(this,void 0)),this.contentHeight=Qt(this,r=>{var o,a;return((a=(o=this._templateRef.read(r))==null?void 0:o.object.contentHeight)==null?void 0:a.read(r))??this.viewModel.lastTemplateData.read(r).contentHeight}),this.maxScroll=Qt(this,r=>{var o;return((o=this._templateRef.read(r))==null?void 0:o.object.maxScroll.read(r))??{maxScroll:0,scrollWidth:0}}),this.template=Qt(this,r=>{var o;return(o=this._templateRef.read(r))==null?void 0:o.object}),this._isHidden=Dn(this,!1),this._isFocused=Qt(this,r=>{var o;return((o=this.template.read(r))==null?void 0:o.isFocused.read(r))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(Vn(r=>{var a;const o=this._scrollLeft.read(r);(a=this._templateRef.read(r))==null||a.object.setScrollLeft(o)})),this._register(Vn(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var o;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const n=this.viewModel.lastTemplateData.get(),s=(o=e.selections)==null?void 0:o.map(gi.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:s},t);const r=this._templateRef.get();r&&s&&r.object.editor.setSelections(s)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&Xs(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,n,s){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new Aat(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,n,t,s)}}oe("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},k("multiDiffEditor.headerBackground","The background color of the diff editor's header"));oe("multiDiffEditor.background",Sh,k("multiDiffEditor.background","The background color of the multi file diff editor"));oe("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},k("multiDiffEditor.border","The border color of the multi file diff editor"));var Pat=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Oat=function(i,e){return function(t,n){e(t,n,i)}};let mH=class extends Be{constructor(e,t,n){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=n,this._dimension=Dn(this,void 0),this._viewModel=Dn(this,void 0),this._widgetImpl=qC(this,(s,r)=>(Qc(FP,s),r.add(this._instantiationService.createInstance(Qc(pH,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(P4(this._widgetImpl))}};mH=Pat([Oat(2,oi)],mH);function Fat(i,e,t){return Ft.initialize(t||{}).createInstance(fH,i,e)}function Bat(i){return Ft.get(sr).onCodeEditorAdd(t=>{i(t)})}function zat(i){return Ft.get(sr).onDiffEditorAdd(t=>{i(t)})}function Uat(){return Ft.get(sr).listCodeEditors()}function Vat(){return Ft.get(sr).listDiffEditors()}function Wat(i,e,t){return Ft.initialize(t||{}).createInstance(gH,i,e)}function Hat(i,e){const t=Ft.initialize(e||{});return new mH(i,{},t)}function $at(i){if(typeof i.id!="string"||typeof i.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Na.registerCommand(i.id,i.run)}function Gat(i){if(typeof i.id!="string"||typeof i.label!="string"||typeof i.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=jn.deserialize(i.precondition),t=(s,...r)=>Mv.runEditorCommand(s,r,e,(o,a,l)=>Promise.resolve(i.run(a,...l))),n=new Tt;if(n.add(Na.registerCommand(i.id,t)),i.contextMenuGroupId){const s={command:{id:i.id,title:i.label},when:e,group:i.contextMenuGroupId,order:i.contextMenuOrder||0};n.add(qw.appendMenuItem(Zr.EditorContext,s))}if(Array.isArray(i.keybindings)){const s=Ft.get(eo);if(!(s instanceof cC))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=jn.and(e,jn.deserialize(i.keybindingContext));n.add(s.addDynamicKeybindings(i.keybindings.map(o=>({keybinding:o,command:i.id,when:r}))))}}return n}function jat(i){return Qve([i])}function Qve(i){const e=Ft.get(eo);return e instanceof cC?e.addDynamicKeybindings(i.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:jn.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Be.None)}function Kat(i,e,t){const n=Ft.get(yr),s=n.getLanguageIdByMimeType(e)||e;return Zve(Ft.get(Jo),n,i,s,t)}function qat(i,e){const t=Ft.get(yr),n=t.getLanguageIdByMimeType(e)||e||vu;i.setLanguage(t.createById(n))}function Xat(i,e,t){i&&Ft.get(h1).changeOne(e,i.uri,t)}function Yat(i){Ft.get(h1).changeAll(i,[])}function Zat(i){return Ft.get(h1).read(i)}function Qat(i){return Ft.get(h1).onMarkerChanged(i)}function Jat(i){return Ft.get(Jo).getModel(i)}function elt(){return Ft.get(Jo).getModels()}function tlt(i){return Ft.get(Jo).onModelAdded(i)}function nlt(i){return Ft.get(Jo).onModelRemoved(i)}function ilt(i){return Ft.get(Jo).onModelLanguageChanged(t=>{i({model:t.model,oldLanguage:t.oldLanguageId})})}function slt(i){return Fnt(Ft.get(Jo),i)}function rlt(i,e){const t=Ft.get(yr),n=Ft.get(Iu);return Aq.colorizeElement(n,t,i,e).then(()=>{n.registerEditorContainer(i)})}function olt(i,e,t){const n=Ft.get(yr);return Ft.get(Iu).registerEditorContainer(ui.document.body),Aq.colorize(n,i,e,t)}function alt(i,e,t=4){return Ft.get(Iu).registerEditorContainer(ui.document.body),Aq.colorizeModelLine(i,e,t)}function llt(i){const e=Es.get(i);return e||{getInitialState:()=>A2,tokenize:(t,n,s)=>O_e(i,s)}}function clt(i,e){Es.getOrCreate(e);const t=llt(e),n=$C(i),s=[];let r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenize(l,!0,r);s[o]=c.tokens,r=c.endState}return s}function ult(i,e){Ft.get(Iu).defineTheme(i,e)}function hlt(i){Ft.get(Iu).setTheme(i)}function dlt(){lU.clearAllFontInfos()}function flt(i,e){return Na.registerCommand({id:i,handler:e})}function glt(i){return Ft.get(dk).registerOpener({async open(t){return typeof t=="string"&&(t=fn.parse(t)),i.open(t)}})}function plt(i){return Ft.get(sr).registerCodeEditorOpenHandler(async(t,n,s)=>{var a;if(!n)return null;const r=(a=t.options)==null?void 0:a.selection;let o;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await i.openCodeEditor(n,t.resource,o)?n:null})}function mlt(){return{create:Fat,getEditors:Uat,getDiffEditors:Vat,onDidCreateEditor:Bat,onDidCreateDiffEditor:zat,createDiffEditor:Wat,addCommand:$at,addEditorAction:Gat,addKeybindingRule:jat,addKeybindingRules:Qve,createModel:Kat,setModelLanguage:qat,setModelMarkers:Xat,getModelMarkers:Zat,removeAllMarkers:Yat,onDidChangeMarkers:Qat,getModels:elt,getModel:Jat,onDidCreateModel:tlt,onWillDisposeModel:nlt,onDidChangeModelLanguage:ilt,createWebWorker:slt,colorizeElement:rlt,colorize:olt,colorizeModelLine:alt,tokenize:clt,defineTheme:ult,setTheme:hlt,remeasureFonts:dlt,registerCommand:flt,registerLinkOpener:glt,registerEditorOpener:plt,AccessibilitySupport:Q9,ContentWidgetPositionPreference:sz,CursorChangeReason:rz,DefaultEndOfLine:oz,EditorAutoIndentStrategy:lz,EditorOption:cz,EndOfLinePreference:uz,EndOfLineSequence:hz,MinimapPosition:Cz,MinimapSectionHeaderStyle:Sz,MouseTargetType:xz,OverlayWidgetPositionPreference:Tz,OverviewRulerLane:kz,GlyphMarginLane:dz,RenderLineNumbersType:Az,RenderMinimap:Iz,ScrollbarVisibility:Rz,ScrollType:Nz,TextEditorCursorBlinkingStyle:Uz,TextEditorCursorStyle:Vz,TrackedRangeStickiness:Wz,WrappingIndent:Hz,InjectedTextCursorStops:pz,PositionAffinity:Dz,ShowLightbulbIconMode:Oz,ConfigurationChangedEvent:rpe,BareFontInfo:U0,FontInfo:aU,TextModelResolvedOptions:kI,FindMatch:x2,ApplyUpdateResult:zE,EditorZoom:Pp,createMultiFileDiffEditor:Hat,EditorType:kq,EditorOptions:Jv}}function _lt(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function KD(i,e){return typeof i=="boolean"?i:e}function Noe(i,e){return typeof i=="string"?i:e}function vlt(i){const e={};for(const t of i)e[t]=!0;return e}function Roe(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=vlt(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function _H(i,e,t){e=e.replace(/@@/g,"");let n=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(o,a){s=!0;let l="";if(typeof i[a]=="string")l=i[a];else if(i[a]&&i[a]instanceof RegExp)l=i[a].source;else throw i[a]===void 0?Si(i,"language definition does not contain attribute '"+a+"', used at: "+e):Si(i,"attribute reference '"+a+"' must be a string, used at: "+e);return c0(l)?"":"(?:"+l+")"}),n++;while(s&&n<5);e=e.replace(/\x01/g,"@");const r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(nit(i,e,c),r)),l)}return new RegExp(e,r)}function ylt(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;const s=t.split(".");if(s.unshift(t),n<s.length)return s[n]}return null}function blt(i,e,t,n){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=Roe(l.split("|"),i.ignoreCase);c=function(h){return a==="~"?u(h):!u(h)}}else if(a==="@"||a==="!@"){const u=i[l];if(!u)throw Si(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!_lt(function(d){return typeof d=="string"},u))throw Si(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const h=Roe(u,i.ignoreCase);c=function(d){return a==="@"?h(d):!h(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=_H(i,"^"+l+"$",!1);c=function(h){return a==="~"?u.test(h):!u.test(h)}}else c=function(u,h,d,f){return _H(i,"^"+Bp(i,l,h,d,f)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=Cg(i,l);c=function(h){return a==="=="?h===u:h!==u}}else{const u=Cg(i,l);c=function(h,d,f,g,p){const _=Bp(i,u,d,f,g);return a==="=="?h===_:h!==_}}return s===-1?{name:t,value:n,test:function(u,h,d,f){return c(u,u,h,d,f)}}:{name:t,value:n,test:function(u,h,d,f){const g=ylt(u,h,d,s);return c(g||"",u,h,d,f)}}}function vH(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Si(i,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Si(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Si(i,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!iit(i,Bp(i,s,"",[],""))))throw Si(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=s}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=vH(i,e,t[s]);return{group:n}}else if(t.cases){const n=[];for(const r in t.cases)if(t.cases.hasOwnProperty(r)){const o=vH(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:o,name:r}):r==="@eos"?n.push({test:function(a,l,c,u){return u},value:o,name:r}):n.push(blt(i,e,r,o))}const s=i.defaultToken;return{test:function(r,o,a,l){for(const c of n)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw Si(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class wlt{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Si(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=_H(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")",!0)}setAction(e,t){this.action=vH(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Jve(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:i,includeLF:KD(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:KD(e.ignoreCase,!1),unicode:KD(e.unicode,!1),tokenPostfix:Noe(e.tokenPostfix,"."+i),defaultToken:Noe(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw Si(t,"an 'include' attribute must be a string at: "+o);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw Si(t,"include target '"+u+"' is not defined at: "+o);s(o+"."+u,a,e.tokenizer[u])}else{const h=new wlt(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const d=c[1];d.next=c[2],h.setAction(n,d)}else throw Si(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else h.setAction(n,c[1]);else{if(!c.regex)throw Si(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=KD(c.matchOnlyAtLineStart,!1)),h.setRegex(n,c.regex),h.setAction(n,c.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Si(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Si(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Si(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Cg(t,a.open),close:Cg(t,a.close)});else throw Si(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function Clt(i){Xw.registerLanguage(i)}function Slt(){let i=[];return i=i.concat(Xw.getLanguages()),i}function xlt(i){return Ft.get(yr).languageIdCodec.encodeLanguageId(i)}function Elt(i,e){return Ft.withServices(()=>{const n=Ft.get(yr).onDidRequestRichLanguageFeatures(s=>{s===i&&(n.dispose(),e())});return n})}function Llt(i,e){return Ft.withServices(()=>{const n=Ft.get(yr).onDidRequestBasicLanguageFeatures(s=>{s===i&&(n.dispose(),e())});return n})}function Tlt(i,e){if(!Ft.get(yr).isRegisteredLanguageId(i))throw new Error(`Cannot set configuration for unknown language ${i}`);return Ft.get(Yd).register(i,e,100)}class klt{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return nT.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const s=this._actual.tokenizeEncoded(e,n);return new n4(s.tokens,s.endState)}}class nT{constructor(e,t,n,s){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<s&&(l=s),n[r]=new _2(l,a.scopes,t),s=l}return n}static adaptTokenize(e,t,n,s){const r=t.tokenize(n,s),o=nT._toClassicTokens(r.tokens,e);let a;return r.endState.equals(s)?a=s:a=r.endState,new zj(o,a)}tokenize(e,t,n){return nT.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,u=t.length;c<u;c++){const h=t[c],d=s.match(n,h.scopes)|1024;if(o>0&&r[o-1]===d)continue;let f=h.startIndex;c===0?f=0:f<a&&(f=a),r[o++]=f,r[o++]=d,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,n){const s=this._actual.tokenize(e,n),r=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let o;return s.endState.equals(n)?o=n:o=s.endState,new n4(r,o)}}function Mlt(i){return typeof i.getInitialState=="function"}function Dlt(i){return"tokenizeEncoded"in i}function e1e(i){return i&&typeof i.then=="function"}function Alt(i){const e=Ft.get(Iu);if(i){const t=[null];for(let n=1,s=i.length;n<s;n++)t[n]=$e.fromHex(i[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function t1e(i,e){return Dlt(e)?new klt(i,e):new nT(i,e,Ft.get(yr),Ft.get(Iu))}function iX(i,e){const t=new OUe(async()=>{const n=await Promise.resolve(e.create());return n?Mlt(n)?t1e(i,n):new q2(Ft.get(yr),Ft.get(Iu),i,Jve(i,n),Ft.get(hs)):null});return Es.registerFactory(i,t)}function Ilt(i,e){if(!Ft.get(yr).isRegisteredLanguageId(i))throw new Error(`Cannot set tokens provider for unknown language ${i}`);return e1e(e)?iX(i,{create:()=>e}):Es.register(i,t1e(i,e))}function Nlt(i,e){const t=n=>new q2(Ft.get(yr),Ft.get(Iu),i,Jve(i,n),Ft.get(hs));return e1e(e)?iX(i,{create:()=>e}):Es.register(i,t(e))}function Rlt(i,e){return Ft.get(pi).referenceProvider.register(i,e)}function Plt(i,e){return Ft.get(pi).renameProvider.register(i,e)}function Olt(i,e){return Ft.get(pi).newSymbolNamesProvider.register(i,e)}function Flt(i,e){return Ft.get(pi).signatureHelpProvider.register(i,e)}function Blt(i,e){return Ft.get(pi).hoverProvider.register(i,{provideHover:async(n,s,r,o)=>{const a=n.getWordAtPosition(s);return Promise.resolve(e.provideHover(n,s,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new de(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new de(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function zlt(i,e){return Ft.get(pi).documentSymbolProvider.register(i,e)}function Ult(i,e){return Ft.get(pi).documentHighlightProvider.register(i,e)}function Vlt(i,e){return Ft.get(pi).linkedEditingRangeProvider.register(i,e)}function Wlt(i,e){return Ft.get(pi).definitionProvider.register(i,e)}function Hlt(i,e){return Ft.get(pi).implementationProvider.register(i,e)}function $lt(i,e){return Ft.get(pi).typeDefinitionProvider.register(i,e)}function Glt(i,e){return Ft.get(pi).codeLensProvider.register(i,e)}function jlt(i,e,t){return Ft.get(pi).codeActionProvider.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,r,o,a)=>{const c=Ft.get(h1).read({resource:s.uri}).filter(u=>de.areIntersectingOrTouching(u,r));return e.provideCodeActions(s,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function Klt(i,e){return Ft.get(pi).documentFormattingEditProvider.register(i,e)}function qlt(i,e){return Ft.get(pi).documentRangeFormattingEditProvider.register(i,e)}function Xlt(i,e){return Ft.get(pi).onTypeFormattingEditProvider.register(i,e)}function Ylt(i,e){return Ft.get(pi).linkProvider.register(i,e)}function Zlt(i,e){return Ft.get(pi).completionProvider.register(i,e)}function Qlt(i,e){return Ft.get(pi).colorProvider.register(i,e)}function Jlt(i,e){return Ft.get(pi).foldingRangeProvider.register(i,e)}function ect(i,e){return Ft.get(pi).declarationProvider.register(i,e)}function tct(i,e){return Ft.get(pi).selectionRangeProvider.register(i,e)}function nct(i,e){return Ft.get(pi).documentSemanticTokensProvider.register(i,e)}function ict(i,e){return Ft.get(pi).documentRangeSemanticTokensProvider.register(i,e)}function sct(i,e){return Ft.get(pi).inlineCompletionsProvider.register(i,e)}function rct(i,e){return Ft.get(pi).inlineEditProvider.register(i,e)}function oct(i,e){return Ft.get(pi).inlayHintsProvider.register(i,e)}function act(){return{register:Clt,getLanguages:Slt,onLanguage:Elt,onLanguageEncountered:Llt,getEncodedLanguageId:xlt,setLanguageConfiguration:Tlt,setColorMap:Alt,registerTokensProviderFactory:iX,setTokensProvider:Ilt,setMonarchTokensProvider:Nlt,registerReferenceProvider:Rlt,registerRenameProvider:Plt,registerNewSymbolNameProvider:Olt,registerCompletionItemProvider:Zlt,registerSignatureHelpProvider:Flt,registerHoverProvider:Blt,registerDocumentSymbolProvider:zlt,registerDocumentHighlightProvider:Ult,registerLinkedEditingRangeProvider:Vlt,registerDefinitionProvider:Wlt,registerImplementationProvider:Hlt,registerTypeDefinitionProvider:$lt,registerCodeLensProvider:Glt,registerCodeActionProvider:jlt,registerDocumentFormattingEditProvider:Klt,registerDocumentRangeFormattingEditProvider:qlt,registerOnTypeFormattingEditProvider:Xlt,registerLinkProvider:Ylt,registerColorProvider:Qlt,registerFoldingRangeProvider:Jlt,registerDeclarationProvider:ect,registerSelectionRangeProvider:tct,registerDocumentSemanticTokensProvider:nct,registerDocumentRangeSemanticTokensProvider:ict,registerInlineCompletionsProvider:sct,registerInlineEditProvider:rct,registerInlayHintsProvider:oct,DocumentHighlightKind:az,CompletionItemKind:tz,CompletionItemTag:nz,CompletionItemInsertTextRule:ez,SymbolKind:Bz,SymbolTag:zz,IndentAction:gz,CompletionTriggerKind:iz,SignatureHelpTriggerKind:Fz,InlayHintKind:mz,InlineCompletionTriggerKind:_z,InlineEditTriggerKind:vz,CodeActionTriggerType:J9,NewSymbolNameTag:Ez,NewSymbolNameTriggerKind:Lz,PartialAcceptTriggerKind:Mz,HoverVerbosityAction:fz,FoldingRangeKind:Y9,SelectedSuggestionInfo:PUe}}const n1e=En("IEditorCancelService"),i1e=new Mt("cancellableOperation",!1,k("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Pn(n1e,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(s=>{const r=i1e.bindTo(s.get(Jn)),o=new tl;return{key:r,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);Zt(new class extends Mv{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:i1e})}runEditorCommand(i,e){i.get(n1e).cancel(e)}});class Poe{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class lct{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(Poe.toKey(e))}has(e){return this._set.has(Poe.toKey(e))}}function cct(i,e,t){const n=[],s=new lct,r=i.ordered(t);for(const a of r)n.push(a),a.extensionId&&s.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return n}const HL=class HL{static setFormatterSelector(e){return{dispose:HL._selectors.unshift(e)}}static async select(e,t,n,s){if(e.length===0)return;const r=Fn.first(HL._selectors);if(r)return await r(e,t,n,s)}};HL._selectors=new tl;let yH=HL;async function uct(i,e,t,n,s,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,s,r)).catch(Nj);if(Q3(l))return await i.computeMoreMinimalEdits(t.uri,l)}}async function hct(i,e,t,n,s){const r=cct(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,n,s)).catch(Nj);if(Q3(a))return await i.computeMoreMinimalEdits(t.uri,a)}}function dct(i,e,t,n,s,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,s,r,o)).catch(Nj).then(l=>i.computeMoreMinimalEdits(t.uri,l))}Na.registerCommand("_executeFormatRangeProvider",async function(i,...e){const[t,n,s]=e;cm(fn.isUri(t)),cm(de.isIRange(n));const r=i.get(a4),o=i.get(_k),a=i.get(pi),l=await r.createModelReference(t);try{return uct(o,a,l.object.textEditorModel,de.lift(n),s,Cu.None)}finally{l.dispose()}});Na.registerCommand("_executeFormatDocumentProvider",async function(i,...e){const[t,n]=e;cm(fn.isUri(t));const s=i.get(a4),r=i.get(_k),o=i.get(pi),a=await s.createModelReference(t);try{return hct(r,o,a.object.textEditorModel,n,Cu.None)}finally{a.dispose()}});Na.registerCommand("_executeFormatOnTypeProvider",async function(i,...e){const[t,n,s,r]=e;cm(fn.isUri(t)),cm(Se.isIPosition(n)),cm(typeof s=="string");const o=i.get(a4),a=i.get(_k),l=i.get(pi),c=await o.createModelReference(t);try{return dct(a,l,c.object.textEditorModel,Se.lift(n),s,r,Cu.None)}finally{c.dispose()}});Jv.wrappingIndent.defaultValue=0;Jv.glyphMargin.defaultValue=!1;Jv.autoIndent.defaultValue=3;Jv.overviewRulerLanes.defaultValue=2;yH.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const ea=Cpe();ea.editor=mlt();ea.languages=act();const fct=ea.CancellationTokenSource,gct=ea.Emitter,pct=ea.KeyCode,mct=ea.KeyMod,_ct=ea.Position,vct=ea.Range,yct=ea.Selection,bct=ea.SelectionDirection,wct=ea.MarkerSeverity,Cct=ea.MarkerTag,Sct=ea.Uri,xct=ea.Token,Y_=ea.editor,Ect=ea.languages,r6=globalThis.MonacoEnvironment;(r6!=null&&r6.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=ea);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const qD=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:fct,Emitter:gct,KeyCode:pct,KeyMod:mct,MarkerSeverity:wct,MarkerTag:Cct,Position:_ct,Range:vct,Selection:yct,SelectionDirection:bct,Token:xct,Uri:Sct,editor:Y_,languages:Ect},Symbol.toStringTag,{value:"Module"}));function Ooe(i){return/^\d+$/.test(i)?"".concat(i,"px"):i}function XD(){}var Of=function(){return Of=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},Of.apply(this,arguments)},Lct=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};function sX(i){var e=i.width,t=i.height,n=i.value,s=i.defaultValue,r=i.language,o=i.theme,a=i.options,l=i.overrideServices,c=i.editorWillMount,u=i.editorDidMount,h=i.editorWillUnmount,d=i.onChange,f=i.className,g=i.uri,p=G.useRef(null),_=G.useRef(null),m=G.useRef(null),v=G.useRef(null),y=Ooe(e),C=Ooe(t),S=G.useRef(d);S.current=d;var x=G.useMemo(function(){return{width:y,height:C}},[y,C]),E=function(){var I=c(qD);return I||{}},L=function(){u(_.current,qD),m.current=_.current.onDidChangeModelContent(function(I){var N;v.current||(N=S.current)===null||N===void 0||N.call(S,_.current.getValue(),I)})},T=function(){h(_.current,qD)},D=function(){var I=n!==null?n:s;if(p.current){var N=Of(Of({},a),E()),P=g==null?void 0:g(qD),O=P&&Y_.getModel(P);O?(O.setValue(I),Y_.setModelLanguage(O,r)):O=Y_.createModel(I,r,P),_.current=Y_.create(p.current,Of(Of(Of({model:O},f?{extraEditorClassName:f}:{}),N),o?{theme:o}:{}),l),L()}};return G.useEffect(D,[]),G.useEffect(function(){if(_.current){if(n===_.current.getValue())return;var I=_.current.getModel();v.current=!0,_.current.pushUndoStop(),I.pushEditOperations([],[{range:I.getFullModelRange(),text:n}],void 0),_.current.pushUndoStop(),v.current=!1}},[n]),G.useEffect(function(){if(_.current){var I=_.current.getModel();Y_.setModelLanguage(I,r)}},[r]),G.useEffect(function(){if(_.current){a.model;var I=Lct(a,["model"]);_.current.updateOptions(Of(Of({},f?{extraEditorClassName:f}:{}),I))}},[f,a]),G.useEffect(function(){_.current&&_.current.layout()},[e,t]),G.useEffect(function(){Y_.setTheme(o)},[o]),G.useEffect(function(){return function(){_.current&&(T(),_.current.dispose()),m.current&&m.current.dispose()}},[]),G.createElement("div",{ref:p,style:x,className:"react-monaco-editor-container"})}sX.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:XD,editorDidMount:XD,editorWillUnmount:XD,onChange:XD,className:null};sX.displayName="MonacoEditor";const Tct="_scroll_15tmy_1",kct="_print_15tmy_8",s1e={scroll:Tct,print:kct};var bH=function(){return(bH=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}).apply(this,arguments)},_x,vx,wH=G.createContext(void 0),Foe="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML",Boe="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js",Mct=function(u){var e=u.config,t=u.version,t=t===void 0?3:t,n=u.src,n=n===void 0?t===2?Foe:Boe:n,s=u.onStartup,r=u.onLoad,o=u.onError,a=u.typesettingOptions,l=u.renderMode,l=l===void 0?"post":l,c=u.hideUntilTypeset,u=u.children,d=G.useContext(wH);if((d==null?void 0:d.version)!==void 0&&(d==null?void 0:d.version)!==t)throw Error("Cannot nest MathJaxContexts with different versions. MathJaxContexts should not be nested at all but if they are, they cannot have different versions. Stick with one version of MathJax in your app and avoid using more than one MathJaxContext.");if(t===2&&vx!==void 0||t===3&&_x!==void 0)throw Error("Cannot use MathJax versions 2 and 3 simultaneously in the same app due to how MathJax is set up in the browser; either you have multiple MathJaxContexts with different versions or you have mounted and unmounted MathJaxContexts with different versions. Please stick with one version of MathJax in your app. File an issue in the project Github page if you need this feature.");var h=G.useRef(d),d=G.useRef((d==null?void 0:d.version)||null);if(d.current===null)d.current=t;else if(d.current!==t)throw Error("Cannot change version of MathJax in a MathJaxContext after it has mounted. Reload the page with a new version when this must happen.");var f=n||(t===2?Foe:Boe);function g(p,_){e&&(window.MathJax=e);var m=document.createElement("script");m.type="text/javascript",m.src=f,m.async=!1,m.addEventListener("load",function(){var v=window.MathJax;s&&s(v),p(v),r&&r()}),m.addEventListener("error",function(v){return _(v)}),document.getElementsByTagName("head")[0].appendChild(m)}return h.current===void 0&&(d={typesettingOptions:a,renderMode:l,hideUntilTypeset:c},t===2?_x===void 0&&(typeof window<"u"?(_x=new Promise(g)).catch(function(p){if(!o)throw Error("Failed to download MathJax version 2 from '".concat(f,"' due to: ").concat(p));o(p)}):(_x=Promise.reject()).catch(function(p){})):vx===void 0&&(typeof window<"u"?(vx=new Promise(g)).catch(function(p){if(!o)throw Error("Failed to download MathJax version 3 from '".concat(f,"' due to: ").concat(p));o(p)}):(vx=Promise.reject()).catch(function(p){})),h.current=bH(bH({},d),t===2?{version:2,promise:_x}:{version:3,promise:vx})),re.createElement(wH.Provider,{value:h.current},u)},Cp=function(){return(Cp=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}).apply(this,arguments)},Dct=function(i,e){var t={};for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(t[s[n]]=i[s[n]]);return t},yx=function(i){return"Typesetting failed: ".concat(i.message!==void 0?i.message:i.toString())},Act=function(i){function e(){var S;p==="every"&&v&&_==="post"&&f.current!==null&&(f.current.style.visibility=(S=(S=h.style)==null?void 0:S.visibility)!=null?S:"visible"),y.current||(p==="first"&&f.current!==null&&(f.current.style.visibility="visible"),s&&s(),y.current=!0),r&&r(),C.current=!1}var n=i.inline,t=n!==void 0&&n,n=i.hideUntilTypeset,s=i.onInitTypeset,r=i.onTypeset,o=i.text,a=i.dynamic,l=i.typesettingOptions,c=i.renderMode,u=i.children,h=Dct(i,["inline","hideUntilTypeset","onInitTypeset","onTypeset","text","dynamic","typesettingOptions","renderMode","children"]),d=G.useRef(""),f=G.useRef(null),g=G.useContext(wH),p=n??(g==null?void 0:g.hideUntilTypeset),_=c??(g==null?void 0:g.renderMode),m=l??(g==null?void 0:g.typesettingOptions),v=a!==!1&&(a||!1),y=G.useRef(!1),C=G.useRef(!1);return!C.current&&f.current!==null&&v&&p==="every"&&_==="post"&&(f.current.style.visibility="hidden"),(typeof window<"u"?G.useLayoutEffect:G.useEffect)(function(){if((v||!y.current)&&f.current!==null){if(!g)throw Error("MathJax was not loaded, did you use the MathJax component outside of a MathJaxContext?");if(_==="pre"){if(!(typeof(S=o)=="string"&&0<S.length))throw Error(`Render mode 'pre' requires text prop to be set and non-empty, which was currently "`.concat(o,'"'));if(!l||!l.fn)throw Error("Render mode 'pre' requires 'typesettingOptions' prop with 'fn' property to be set on MathJax element or in the MathJaxContext");if(g.version===2)throw Error("Render mode 'pre' only available with MathJax 3, and version 2 is currently in use")}_!=="post"&&o===d.current||C.current||(C.current=!0,g.version===3?g.promise.then(function(x){var E;_==="pre"?(E=function(L){d.current=o,x.startup.document.clear(),x.startup.document.updateDocument(),f.current!==null&&(f.current.innerHTML=L.outerHTML),e()},l.fn.endsWith("Promise")?x.startup.promise.then(function(){return x[m.fn](o,Cp(Cp({},(m==null?void 0:m.options)||{}),{display:!t}))}).then(E).catch(function(L){throw e(),Error(yx(L))}):x.startup.promise.then(function(){var L=x[m.fn](o,Cp(Cp({},(m==null?void 0:m.options)||{}),{display:!t}));E(L)}).catch(function(L){throw e(),Error(yx(L))})):x.startup.promise.then(function(){return x.typesetClear([f.current]),x.typesetPromise([f.current])}).then(e).catch(function(L){throw e(),Error(yx(L))})}).catch(function(x){throw e(),Error(yx(x))}):g.promise.then(function(x){x.Hub.Queue(["Typeset",x.Hub,f.current]),x.Hub.Queue(e)}).catch(function(x){throw e(),Error(yx(x))}))}var S}),re.createElement("span",Cp({},h,{style:Cp(Cp({display:t?"inline":"block"},h.style),{visibility:p?"hidden":(i=h.style)==null?void 0:i.visibility}),ref:f}),u)};const yl=({name:i})=>ge.jsx("span",{style:{color:"#dcdcaa"},children:i}),Zh=({name:i})=>ge.jsx("span",{style:{color:"#c586c0"},children:i}),iy=({name:i})=>ge.jsx("span",{style:{color:"#569cd6"},children:i}),Co=({prefix:i,name:e})=>ge.jsxs("span",{children:[i&&ge.jsx("span",{children:i}),ge.jsx("span",{children:e})]}),o6=({name:i})=>ge.jsx("span",{children:i}),Ict=({text:i})=>ge.jsx("span",{style:{color:"#6A9955"},children:i}),Nct=({text:i})=>ge.jsx("span",{children:i}),Rct=i=>{switch(i.type){case no.Start:return ge.jsx(ge.Fragment,{children:ge.jsx(yl,{name:"Start"})});case no.AssignRoot:return ge.jsx(yl,{name:"Assign Root"});case no.SplitCoordinator:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Split"}),ge.jsx(Co,{prefix:"node",name:i.leaderNodeId}),ge.jsx(Zh,{name:"from"}),ge.jsx(Co,{prefix:"node",name:i.leaderFatherNodeId}),ge.jsx(Zh,{name:"to"}),ge.jsx(Co,{prefix:"coord",name:i.coordinatorId})]});case no.FullUnSAT:return ge.jsxs(ge.Fragment,{children:[ge.jsx(Co,{name:i.leaderNodeId}),ge.jsx(Zh,{name:"is"}),ge.jsx(o6,{name:su.FullUnSAT})]});case no.PartialUnSAT:return ge.jsxs(ge.Fragment,{children:[ge.jsx(Co,{prefix:"node",name:i.leaderNodeId}),ge.jsx(Zh,{name:"is"}),ge.jsx(o6,{name:su.PartialUnSAT})]});case no.SetupCoordinator:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Setup"}),ge.jsx(Zh,{name:"with"}),ge.jsx(Co,{name:i.cores}),ge.jsx(iy,{name:"cores"}),ge.jsx(Zh,{name:"and"}),ge.jsx(Co,{name:i.alives}),ge.jsx(iy,{name:"alives"})]});case no.PrePartitionDone:return ge.jsx(yl,{name:"Pre partition done"});case no.StartSolving:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Start solving"}),ge.jsx(Co,{prefix:"node",name:i.leaderNodeId}),ge.jsx(Zh,{name:"as"}),ge.jsx(Co,{prefix:"round",name:i.round})]});case no.NewNode:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Append"}),ge.jsx(Co,{prefix:"node",name:i.nodeId}),ge.jsx(Zh,{name:"to"}),ge.jsx(Co,{prefix:"node",name:i.fatherNodeId}),i.label&&ge.jsxs(ge.Fragment,{children:[ge.jsx(Zh,{name:"as"}),ge.jsx(o6,{name:i.label})]})]});case no.Solve:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Solve"}),ge.jsx(Co,{prefix:"node",name:i.nodeId})]});case no.UnSAT:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"UNSAT"}),ge.jsx(Co,{prefix:"node",name:i.nodeId})]});case no.UnSATByPushDown:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"UNSAT"}),ge.jsx(Co,{prefix:"node",name:i.nodeId}),ge.jsx(iy,{name:"by"}),ge.jsx(iy,{name:"pushdown"})]});case no.UnSATByPushUp:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"UNSAT"}),ge.jsx(Co,{prefix:"node",name:i.nodeId}),ge.jsx(iy,{name:"by"}),ge.jsx(iy,{name:"pushup"})]});case no.PerformSplit:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Split"}),ge.jsx(Co,{prefix:"node",name:i.nodeId}),ge.jsx(Zh,{name:"to"}),ge.jsx(Co,{prefix:"coord",name:i.coordinatorId})]});case no.Terminate:return ge.jsxs(ge.Fragment,{children:[ge.jsx(yl,{name:"Terminate"}),ge.jsx(Co,{prefix:"node",name:i.nodeId})]});case no.Done:return ge.jsx(yl,{name:"Done"});case no.Unknown:return ge.jsx(Nct,{text:i.raw});case no.Comment:return ge.jsx(Ict,{text:i.raw})}},r1e=i=>{const{action:e,className:t}=i,n=G.useMemo(()=>Rct(e),[e]);return ge.jsx("span",{style:{fontFamily:"var(--code-font)"},className:`${t} ${s1e.print}`,children:n})},Pct=()=>{const{isDevMode:i,setIsDevMode:e,actionList:t,loadActionList:n,currentIndex:s,moveTo:r}=Z3.useStore(),[o,a]=G.useState(!1),[l,c]=G.useState(""),{isDarkMode:u}=KT.useStore();G.useLayoutEffect(()=>{},[s]);const h=G.useMemo(()=>L9e(200,500),[s]),d=G.useMemo(()=>i?t:t.slice(0,s+1),[u,s,t]);return ge.jsxs("div",{className:"h-full flex flex-col",children:[ge.jsx(Sc,{visible:o,title:"load log",size:"large",onOk:()=>{try{const f=E7e(l);n(f),a(!1)}catch(f){wge.error(`log parse failed: ${String(f)}`)}},onCancel:()=>{c(""),a(!1)},children:ge.jsx(sX,{width:800,height:400,language:"json",theme:u?"vs-dark":"vs",value:l,onChange:c})}),ge.jsxs("div",{className:"p-1 flex items-center",children:[ge.jsx(Za,{onClick:()=>a(!0),children:"load log"}),ge.jsx(bge,{className:"ml-2",checked:i,mode:"advanced",onChange:f=>e(f.target.checked),children:"调试模式"})]}),t.length>0&&ge.jsx("div",{className:"flex",children:ge.jsx(O7e,{value:s,total:t.length,onChange:r,speed:h})}),ge.jsx("div",{className:`grow h-0 overflow-y-auto ${s1e.scroll}`,children:ge.jsx(c2,{size:"small",dataSource:d,renderItem:(f,g)=>{const p=s===g;return ge.jsxs(c2.Item,{style:{backgroundColor:p?"var(--semi-color-bg-3)":""},children:[p&&ge.jsx("div",{className:"absolute pt-10 pb-10",ref:_=>{_==null||_.scrollIntoView()}}),ge.jsx(mv,{children:f.source}),ge.jsx(r1e,{className:"ml-1",action:f})]})}})})]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const t5="154",o1e={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Oct={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a1e=0,CH=1,l1e=2,Fct=3,c1e=0,n5=1,_L=2,th=3,Gd=0,La=1,Ks=2,Bct=2,xg=0,q0=1,SH=2,xH=3,EH=4,u1e=5,f0=100,h1e=101,d1e=102,LH=103,TH=104,f1e=200,g1e=201,p1e=202,m1e=203,rX=204,oX=205,_1e=206,v1e=207,y1e=208,b1e=209,w1e=210,C1e=0,S1e=1,x1e=2,BP=3,E1e=4,L1e=5,T1e=6,k1e=7,Ck=0,M1e=1,D1e=2,yh=0,A1e=1,I1e=2,N1e=3,aX=4,R1e=5,i5=300,Rm=301,Pm=302,iT=303,sT=304,eS=306,rT=1e3,Ca=1001,oT=1002,kr=1003,zP=1004,zct=1004,vL=1005,Uct=1005,Fs=1006,lX=1007,Vct=1007,Om=1008,Wct=1008,Pd=1009,P1e=1010,O1e=1011,s5=1012,cX=1013,hg=1014,Ed=1015,hC=1016,uX=1017,hX=1018,gm=1020,F1e=1021,Nl=1023,B1e=1024,z1e=1025,pm=1026,Ov=1027,U1e=1028,dX=1029,V1e=1030,fX=1031,gX=1033,YI=33776,ZI=33777,QI=33778,JI=33779,kH=35840,MH=35841,DH=35842,AH=35843,W1e=36196,IH=37492,NH=37496,RH=37808,PH=37809,OH=37810,FH=37811,BH=37812,zH=37813,UH=37814,VH=37815,WH=37816,HH=37817,$H=37818,GH=37819,jH=37820,KH=37821,eN=36492,H1e=36283,qH=36284,XH=36285,YH=36286,$1e=2200,G1e=2201,j1e=2202,aT=2300,lT=2301,tN=2302,A0=2400,I0=2401,cT=2402,r5=2500,pX=2501,Hct=0,$ct=1,Gct=2,mX=3e3,mm=3001,K1e=3200,_X=3201,Gm=0,q1e=1,_m="",Gn="srgb",kh="srgb-linear",vX="display-p3",jct=0,nN=7680,Kct=7681,qct=7682,Xct=7683,Yct=34055,Zct=34056,Qct=5386,Jct=512,eut=513,tut=514,nut=515,iut=516,sut=517,rut=518,X1e=519,Y1e=512,Z1e=513,Q1e=514,J1e=515,eye=516,tye=517,nye=518,iye=519,uT=35044,out=35048,aut=35040,lut=35045,cut=35049,uut=35041,hut=35046,dut=35050,fut=35042,gut="100",ZH="300 es",UP=1035,Ld=2e3,hT=2001;let jg=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const da=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zoe=1234567;const X0=Math.PI/180,dC=180/Math.PI;function wc(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(da[i&255]+da[i>>8&255]+da[i>>16&255]+da[i>>24&255]+"-"+da[e&255]+da[e>>8&255]+"-"+da[e>>16&15|64]+da[e>>24&255]+"-"+da[t&63|128]+da[t>>8&255]+"-"+da[t>>16&255]+da[t>>24&255]+da[n&255]+da[n>>8&255]+da[n>>16&255]+da[n>>24&255]).toLowerCase()}function pr(i,e,t){return Math.max(e,Math.min(t,i))}function yX(i,e){return(i%e+e)%e}function put(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function mut(i,e,t){return i!==e?(t-i)/(e-i):0}function yL(i,e,t){return(1-t)*i+t*e}function _ut(i,e,t,n){return yL(i,e,1-Math.exp(-t*n))}function vut(i,e=1){return e-Math.abs(yX(i,e*2)-e)}function yut(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function but(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function wut(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Cut(i,e){return i+Math.random()*(e-i)}function Sut(i){return i*(.5-Math.random())}function xut(i){i!==void 0&&(zoe=i);let e=zoe+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Eut(i){return i*X0}function Lut(i){return i*dC}function QH(i){return(i&i-1)===0&&i!==0}function sye(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function VP(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Tut(i,e,t,n,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+n)/2),u=o((e+n)/2),h=r((e-n)/2),d=o((e-n)/2),f=r((n-e)/2),g=o((n-e)/2);switch(s){case"XYX":i.set(a*u,l*h,l*d,a*c);break;case"YZY":i.set(l*d,a*u,l*h,a*c);break;case"ZXZ":i.set(l*h,l*d,a*u,a*c);break;case"XZX":i.set(a*u,l*g,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*g,a*c);break;case"ZYZ":i.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function _c(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function ii(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const WP={DEG2RAD:X0,RAD2DEG:dC,generateUUID:wc,clamp:pr,euclideanModulo:yX,mapLinear:put,inverseLerp:mut,lerp:yL,damp:_ut,pingpong:vut,smoothstep:yut,smootherstep:but,randInt:wut,randFloat:Cut,randFloatSpread:Sut,seededRandom:xut,degToRad:Eut,radToDeg:Lut,isPowerOfTwo:QH,ceilPowerOfTwo:sye,floorPowerOfTwo:VP,setQuaternionFromProperEuler:Tut,normalize:ii,denormalize:_c};class rt{constructor(e=0,t=0){rt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(pr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*s+e.x,this.y=r*s+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zn{constructor(e,t,n,s,r,o,a,l,c){Zn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,a,l,c)}set(e,t,n,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],f=n[5],g=n[8],p=s[0],_=s[3],m=s[6],v=s[1],y=s[4],C=s[7],S=s[2],x=s[5],E=s[8];return r[0]=o*p+a*v+l*S,r[3]=o*_+a*y+l*x,r[6]=o*m+a*C+l*E,r[1]=c*p+u*v+h*S,r[4]=c*_+u*y+h*x,r[7]=c*m+u*C+h*E,r[2]=d*p+f*v+g*S,r[5]=d*_+f*y+g*x,r[8]=d*m+f*C+g*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*r*u+n*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*r,f=c*r-o*l,g=t*h+n*d+s*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return e[0]=h*p,e[1]=(s*c-u*n)*p,e[2]=(a*n-s*o)*p,e[3]=d*p,e[4]=(u*t-s*l)*p,e[5]=(s*r-a*t)*p,e[6]=f*p,e[7]=(n*l-c*t)*p,e[8]=(o*t-n*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(a6.makeScale(e,t)),this}rotate(e){return this.premultiply(a6.makeRotation(-e)),this}translate(e,t){return this.premultiply(a6.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const a6=new Zn;function rye(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const kut={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lb(i,e){return new kut[i](e)}function dT(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const Uoe={};function bL(i){i in Uoe||(Uoe[i]=!0,console.warn(i))}function Sw(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function l6(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const Mut=new Zn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Dut=new Zn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Aut(i){return i.convertSRGBToLinear().applyMatrix3(Dut)}function Iut(i){return i.applyMatrix3(Mut).convertLinearToSRGB()}const Nut={[kh]:i=>i,[Gn]:i=>i.convertSRGBToLinear(),[vX]:Aut},Rut={[kh]:i=>i,[Gn]:i=>i.convertLinearToSRGB(),[vX]:Iut},Xc={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return kh},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=Nut[e],s=Rut[t];if(n===void 0||s===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return s(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let sy;class bX{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{sy===void 0&&(sy=dT("canvas")),sy.width=e.width,sy.height=e.height;const n=sy.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=sy}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=dT("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Sw(r[o]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Sw(t[n]/255)*255):t[n]=Sw(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Put=0;class N0{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Put++}),this.uuid=wc(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(c6(s[o].image)):r.push(c6(s[o]))}else r=c6(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function c6(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?bX.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Out=0;class nr extends jg{constructor(e=nr.DEFAULT_IMAGE,t=nr.DEFAULT_MAPPING,n=Ca,s=Ca,r=Fs,o=Om,a=Nl,l=Pd,c=nr.DEFAULT_ANISOTROPY,u=_m){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Out++}),this.uuid=wc(),this.name="",this.source=new N0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(bL("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===mm?Gn:_m),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==i5)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rT:e.x=e.x-Math.floor(e.x);break;case Ca:e.x=e.x<0?0:1;break;case oT:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rT:e.y=e.y-Math.floor(e.y);break;case Ca:e.y=e.y<0?0:1;break;case oT:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return bL("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Gn?mm:mX}set encoding(e){bL("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===mm?Gn:_m}}nr.DEFAULT_IMAGE=null;nr.DEFAULT_MAPPING=i5;nr.DEFAULT_ANISOTROPY=1;class Fi{constructor(e=0,t=0,n=0,s=1){Fi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],g=l[9],p=l[2],_=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-p)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+p)<.1&&Math.abs(g+_)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,C=(f+1)/2,S=(m+1)/2,x=(u+d)/4,E=(h+p)/4,L=(g+_)/4;return y>C&&y>S?y<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(y),s=x/n,r=E/n):C>S?C<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(C),n=x/s,r=L/s):S<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(S),n=E/r,s=L/r),this.set(n,s,r,t),this}let v=Math.sqrt((_-g)*(_-g)+(h-p)*(h-p)+(d-u)*(d-u));return Math.abs(v)<.001&&(v=1),this.x=(_-g)/v,this.y=(h-p)/v,this.z=(d-u)/v,this.w=Math.acos((c+f+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Mh extends jg{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Fi(0,0,e,t),this.scissorTest=!1,this.viewport=new Fi(0,0,e,t);const s={width:e,height:t,depth:1};n.encoding!==void 0&&(bL("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===mm?Gn:_m),this.texture=new nr(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Fs,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new N0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class o5 extends nr{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=kr,this.minFilter=kr,this.wrapR=Ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fut extends Mh{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new o5(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class wX extends nr{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=kr,this.minFilter=kr,this.wrapR=Ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class But extends Mh{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new wX(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class zut extends Mh{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=r.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.texture.length;s<r;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class qo{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,o,a){let l=n[s+0],c=n[s+1],u=n[s+2],h=n[s+3];const d=r[o+0],f=r[o+1],g=r[o+2],p=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=p;return}if(h!==p||l!==d||c!==f||u!==g){let _=1-a;const m=l*d+c*f+u*g+h*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const S=Math.sqrt(y),x=Math.atan2(S,m*v);_=Math.sin(_*x)/S,a=Math.sin(a*x)/S}const C=a*v;if(l=l*_+d*C,c=c*_+f*C,u=u*_+g*C,h=h*_+p*C,_===1-a){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,s,r,o){const a=n[s],l=n[s+1],c=n[s+2],u=n[s+3],h=r[o],d=r[o+1],f=r[o+2],g=r[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(s/2),h=a(r/2),d=l(n/2),f=l(s/2),g=l(r/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(r-c)*f,this._z=(o-s)*f}else if(n>a&&n>h){const f=2*Math.sqrt(1+n-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(s+o)/f,this._z=(r+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-n-h);this._w=(r-c)/f,this._x=(s+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-n-a);this._w=(o-s)/f,this._x=(r+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pr(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-n*c,this._z=r*u+o*c+n*l-s*a,this._w=o*u-n*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*s+t*this._y,this._z=f*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=s*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(s),n*Math.sin(r),n*Math.cos(r),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,t=0,n=0){se.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Voe.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Voe.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*s-a*n,u=l*n+a*t-r*s,h=l*s+r*n-o*t,d=-r*t-o*n-a*s;return this.x=c*l+d*-r+u*-a-h*-o,this.y=u*l+d*-o+h*-r-c*-a,this.z=h*l+d*-a+c*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-n*l,this.z=n*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return u6.copy(this).projectOnVector(e),this.sub(u6)}reflect(e){return this.sub(u6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(pr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const u6=new se,Voe=new qo;class Ic{constructor(e=new se(1/0,1/0,1/0),t=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(vf.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(vf.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),ry.copy(e.boundingBox),ry.applyMatrix4(e.matrixWorld),this.union(ry);else{const s=e.geometry;if(s!==void 0)if(t&&s.attributes!==void 0&&s.attributes.position!==void 0){const r=s.attributes.position;for(let o=0,a=r.count;o<a;o++)vf.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),this.expandByPoint(vf)}else s.boundingBox===null&&s.computeBoundingBox(),ry.copy(s.boundingBox),ry.applyMatrix4(e.matrixWorld),this.union(ry)}const n=e.children;for(let s=0,r=n.length;s<r;s++)this.expandByObject(n[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vf),vf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bx),YD.subVectors(this.max,bx),oy.subVectors(e.a,bx),ay.subVectors(e.b,bx),ly.subVectors(e.c,bx),hp.subVectors(ay,oy),dp.subVectors(ly,ay),S_.subVectors(oy,ly);let t=[0,-hp.z,hp.y,0,-dp.z,dp.y,0,-S_.z,S_.y,hp.z,0,-hp.x,dp.z,0,-dp.x,S_.z,0,-S_.x,-hp.y,hp.x,0,-dp.y,dp.x,0,-S_.y,S_.x,0];return!h6(t,oy,ay,ly,YD)||(t=[1,0,0,0,1,0,0,0,1],!h6(t,oy,ay,ly,YD))?!1:(ZD.crossVectors(hp,dp),t=[ZD.x,ZD.y,ZD.z],h6(t,oy,ay,ly,YD))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vf).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_f[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_f[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_f[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_f[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_f[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_f[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_f[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_f[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_f),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _f=[new se,new se,new se,new se,new se,new se,new se,new se],vf=new se,ry=new Ic,oy=new se,ay=new se,ly=new se,hp=new se,dp=new se,S_=new se,bx=new se,YD=new se,ZD=new se,x_=new se;function h6(i,e,t,n,s){for(let r=0,o=i.length-3;r<=o;r+=3){x_.fromArray(i,r);const a=s.x*Math.abs(x_.x)+s.y*Math.abs(x_.y)+s.z*Math.abs(x_.z),l=e.dot(x_),c=t.dot(x_),u=n.dot(x_);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Uut=new Ic,wx=new se,d6=new se;let Nc=class{constructor(e=new se,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Uut.setFromPoints(e).getCenter(n);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wx.subVectors(e,this.center);const t=wx.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(wx,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(d6.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wx.copy(e.center).add(d6)),this.expandByPoint(wx.copy(e.center).sub(d6))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const yf=new se,f6=new se,QD=new se,fp=new se,g6=new se,JD=new se,p6=new se;class tS{constructor(e=new se,t=new se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yf.copy(this.origin).addScaledVector(this.direction,t),yf.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){f6.copy(e).add(t).multiplyScalar(.5),QD.copy(t).sub(e).normalize(),fp.copy(this.origin).sub(f6);const r=e.distanceTo(t)*.5,o=-this.direction.dot(QD),a=fp.dot(this.direction),l=-fp.dot(QD),c=fp.lengthSq(),u=Math.abs(1-o*o);let h,d,f,g;if(u>0)if(h=o*l-a,d=o*a-l,g=r*u,h>=0)if(d>=-g)if(d<=g){const p=1/u;h*=p,d*=p,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-r,-l),r),f=d*(d+2*l)+c):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-l),r),f=-h*h+d*(d+2*l)+c);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(f6).addScaledVector(QD,d),f}intersectSphere(e,t){yf.subVectors(e.center,this.origin);const n=yf.dot(this.direction),s=yf.dot(yf)-n*n,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,s=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,s=(e.min.x-d.x)*c),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),n>o||r>s||((r>n||isNaN(n))&&(n=r),(o<s||isNaN(s))&&(s=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||a>s)||((a>n||n!==n)&&(n=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,yf)!==null}intersectTriangle(e,t,n,s,r){g6.subVectors(t,e),JD.subVectors(n,e),p6.crossVectors(g6,JD);let o=this.direction.dot(p6),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;fp.subVectors(this.origin,e);const l=a*this.direction.dot(JD.crossVectors(fp,JD));if(l<0)return null;const c=a*this.direction.dot(g6.cross(fp));if(c<0||l+c>o)return null;const u=-a*fp.dot(p6);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Rn{constructor(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_){Rn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_)}set(e,t,n,s,r,o,a,l,c,u,h,d,f,g,p,_){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=s,m[1]=r,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=g,m[11]=p,m[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Rn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/cy.setFromMatrixColumn(e,0).length(),r=1/cy.setFromMatrixColumn(e,1).length(),o=1/cy.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,p=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-p*c,t[9]=-a*l,t[2]=p-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,p=c*h;t[0]=d+p*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=p+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,p=c*h;t[0]=d-p*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=p-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,p=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+p,t[1]=l*h,t[5]=p*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*u,t[4]=p-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-p*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+p,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=p*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Vut,e,Wut)}lookAt(e,t,n){const s=this.elements;return rc.subVectors(e,t),rc.lengthSq()===0&&(rc.z=1),rc.normalize(),gp.crossVectors(n,rc),gp.lengthSq()===0&&(Math.abs(n.z)===1?rc.x+=1e-4:rc.z+=1e-4,rc.normalize(),gp.crossVectors(n,rc)),gp.normalize(),eA.crossVectors(rc,gp),s[0]=gp.x,s[4]=eA.x,s[8]=rc.x,s[1]=gp.y,s[5]=eA.y,s[9]=rc.y,s[2]=gp.z,s[6]=eA.z,s[10]=rc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],f=n[13],g=n[2],p=n[6],_=n[10],m=n[14],v=n[3],y=n[7],C=n[11],S=n[15],x=s[0],E=s[4],L=s[8],T=s[12],D=s[1],I=s[5],N=s[9],P=s[13],O=s[2],V=s[6],z=s[10],K=s[14],H=s[3],U=s[7],j=s[11],W=s[15];return r[0]=o*x+a*D+l*O+c*H,r[4]=o*E+a*I+l*V+c*U,r[8]=o*L+a*N+l*z+c*j,r[12]=o*T+a*P+l*K+c*W,r[1]=u*x+h*D+d*O+f*H,r[5]=u*E+h*I+d*V+f*U,r[9]=u*L+h*N+d*z+f*j,r[13]=u*T+h*P+d*K+f*W,r[2]=g*x+p*D+_*O+m*H,r[6]=g*E+p*I+_*V+m*U,r[10]=g*L+p*N+_*z+m*j,r[14]=g*T+p*P+_*K+m*W,r[3]=v*x+y*D+C*O+S*H,r[7]=v*E+y*I+C*V+S*U,r[11]=v*L+y*N+C*z+S*j,r[15]=v*T+y*P+C*K+S*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],p=e[7],_=e[11],m=e[15];return g*(+r*l*h-s*c*h-r*a*d+n*c*d+s*a*f-n*l*f)+p*(+t*l*f-t*c*d+r*o*d-s*o*f+s*c*u-r*l*u)+_*(+t*c*h-t*a*f-r*o*h+n*o*f+r*a*u-n*c*u)+m*(-s*a*u-t*l*h+t*a*d+s*o*h-n*o*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],p=e[13],_=e[14],m=e[15],v=h*_*c-p*d*c+p*l*f-a*_*f-h*l*m+a*d*m,y=g*d*c-u*_*c-g*l*f+o*_*f+u*l*m-o*d*m,C=u*p*c-g*h*c+g*a*f-o*p*f-u*a*m+o*h*m,S=g*h*l-u*p*l-g*a*d+o*p*d+u*a*_-o*h*_,x=t*v+n*y+s*C+r*S;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/x;return e[0]=v*E,e[1]=(p*d*r-h*_*r-p*s*f+n*_*f+h*s*m-n*d*m)*E,e[2]=(a*_*r-p*l*r+p*s*c-n*_*c-a*s*m+n*l*m)*E,e[3]=(h*l*r-a*d*r-h*s*c+n*d*c+a*s*f-n*l*f)*E,e[4]=y*E,e[5]=(u*_*r-g*d*r+g*s*f-t*_*f-u*s*m+t*d*m)*E,e[6]=(g*l*r-o*_*r-g*s*c+t*_*c+o*s*m-t*l*m)*E,e[7]=(o*d*r-u*l*r+u*s*c-t*d*c-o*s*f+t*l*f)*E,e[8]=C*E,e[9]=(g*h*r-u*p*r-g*n*f+t*p*f+u*n*m-t*h*m)*E,e[10]=(o*p*r-g*a*r+g*n*c-t*p*c-o*n*m+t*a*m)*E,e[11]=(u*a*r-o*h*r-u*n*c+t*h*c+o*n*f-t*a*f)*E,e[12]=S*E,e[13]=(u*p*s-g*h*s+g*n*d-t*p*d-u*n*_+t*h*_)*E,e[14]=(g*a*s-o*p*s-g*n*l+t*p*l+o*n*_-t*a*_)*E,e[15]=(o*h*s-u*a*s+u*n*l-t*h*l-o*n*d+t*a*d)*E,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+n,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+n,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,o){return this.set(1,n,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,h=a+a,d=r*c,f=r*u,g=r*h,p=o*u,_=o*h,m=a*h,v=l*c,y=l*u,C=l*h,S=n.x,x=n.y,E=n.z;return s[0]=(1-(p+m))*S,s[1]=(f+C)*S,s[2]=(g-y)*S,s[3]=0,s[4]=(f-C)*x,s[5]=(1-(d+m))*x,s[6]=(_+v)*x,s[7]=0,s[8]=(g+y)*E,s[9]=(_-v)*E,s[10]=(1-(d+p))*E,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=cy.set(s[0],s[1],s[2]).length();const o=cy.set(s[4],s[5],s[6]).length(),a=cy.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Vu.copy(this);const c=1/r,u=1/o,h=1/a;return Vu.elements[0]*=c,Vu.elements[1]*=c,Vu.elements[2]*=c,Vu.elements[4]*=u,Vu.elements[5]*=u,Vu.elements[6]*=u,Vu.elements[8]*=h,Vu.elements[9]*=h,Vu.elements[10]*=h,t.setFromRotationMatrix(Vu),n.x=r,n.y=o,n.z=a,this}makePerspective(e,t,n,s,r,o,a=Ld){const l=this.elements,c=2*r/(t-e),u=2*r/(n-s),h=(t+e)/(t-e),d=(n+s)/(n-s);let f,g;if(a===Ld)f=-(o+r)/(o-r),g=-2*o*r/(o-r);else if(a===hT)f=-o/(o-r),g=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,s,r,o,a=Ld){const l=this.elements,c=1/(t-e),u=1/(n-s),h=1/(o-r),d=(t+e)*c,f=(n+s)*u;let g,p;if(a===Ld)g=(o+r)*h,p=-2*h;else if(a===hT)g=r*h,p=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=p,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const cy=new se,Vu=new Rn,Vut=new se(0,0,0),Wut=new se(1,1,1),gp=new se,eA=new se,rc=new se,Woe=new Rn,Hoe=new qo;class m1{constructor(e=0,t=0,n=0,s=m1.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],h=s[2],d=s[6],f=s[10];switch(t){case"XYZ":this._y=Math.asin(pr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-pr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(pr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-pr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(pr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-pr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Woe.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Woe,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Hoe.setFromEuler(this),this.setFromQuaternion(Hoe,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}m1.DEFAULT_ORDER="XYZ";class Y0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Hut=0;const $oe=new se,uy=new qo,bf=new Rn,tA=new se,Cx=new se,$ut=new se,Gut=new qo,Goe=new se(1,0,0),joe=new se(0,1,0),Koe=new se(0,0,1),jut={type:"added"},qoe={type:"removed"};class Bi extends jg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Hut++}),this.uuid=wc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bi.DEFAULT_UP.clone();const e=new se,t=new m1,n=new qo,s=new se(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Rn},normalMatrix:{value:new Zn}}),this.matrix=new Rn,this.matrixWorld=new Rn,this.matrixAutoUpdate=Bi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Y0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uy.setFromAxisAngle(e,t),this.quaternion.multiply(uy),this}rotateOnWorldAxis(e,t){return uy.setFromAxisAngle(e,t),this.quaternion.premultiply(uy),this}rotateX(e){return this.rotateOnAxis(Goe,e)}rotateY(e){return this.rotateOnAxis(joe,e)}rotateZ(e){return this.rotateOnAxis(Koe,e)}translateOnAxis(e,t){return $oe.copy(e).applyQuaternion(this.quaternion),this.position.add($oe.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Goe,e)}translateY(e){return this.translateOnAxis(joe,e)}translateZ(e){return this.translateOnAxis(Koe,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(bf.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?tA.copy(e):tA.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Cx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?bf.lookAt(Cx,tA,this.up):bf.lookAt(tA,Cx,this.up),this.quaternion.setFromRotationMatrix(bf),s&&(bf.extractRotation(s.matrixWorld),uy.setFromRotationMatrix(bf),this.quaternion.premultiply(uy.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(jut)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qoe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(qoe)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),bf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),bf.multiply(e.parent.matrixWorld)),e.applyMatrix4(bf),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let s=0,r=this.children.length;s<r;s++){const o=this.children[s].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cx,e,$ut),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cx,Gut,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++){const r=t[n];(r.matrixWorldAutoUpdate===!0||e===!0)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++){const a=s[r];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];r(e.shapes,h)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),h.length>0&&(n.shapes=h),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),g.length>0&&(n.nodes=g)}return n.object=s,n;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Bi.DEFAULT_UP=new se(0,1,0);Bi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wu=new se,wf=new se,m6=new se,Cf=new se,hy=new se,dy=new se,Xoe=new se,_6=new se,v6=new se,y6=new se;let nA=!1;class Dl{constructor(e=new se,t=new se,n=new se){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Wu.subVectors(e,t),s.cross(Wu);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){Wu.subVectors(s,t),wf.subVectors(n,t),m6.subVectors(e,t);const o=Wu.dot(Wu),a=Wu.dot(wf),l=Wu.dot(m6),c=wf.dot(wf),u=wf.dot(m6),h=o*c-a*a;if(h===0)return r.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,g=(o*u-a*l)*d;return r.set(1-f-g,g,f)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Cf),Cf.x>=0&&Cf.y>=0&&Cf.x+Cf.y<=1}static getUV(e,t,n,s,r,o,a,l){return nA===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),nA=!0),this.getInterpolation(e,t,n,s,r,o,a,l)}static getInterpolation(e,t,n,s,r,o,a,l){return this.getBarycoord(e,t,n,s,Cf),l.setScalar(0),l.addScaledVector(r,Cf.x),l.addScaledVector(o,Cf.y),l.addScaledVector(a,Cf.z),l}static isFrontFacing(e,t,n,s){return Wu.subVectors(n,t),wf.subVectors(e,t),Wu.cross(wf).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wu.subVectors(this.c,this.b),wf.subVectors(this.a,this.b),Wu.cross(wf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Dl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Dl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,s,r){return nA===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),nA=!0),Dl.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}getInterpolation(e,t,n,s,r){return Dl.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return Dl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Dl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let o,a;hy.subVectors(s,n),dy.subVectors(r,n),_6.subVectors(e,n);const l=hy.dot(_6),c=dy.dot(_6);if(l<=0&&c<=0)return t.copy(n);v6.subVectors(e,s);const u=hy.dot(v6),h=dy.dot(v6);if(u>=0&&h<=u)return t.copy(s);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(hy,o);y6.subVectors(e,r);const f=hy.dot(y6),g=dy.dot(y6);if(g>=0&&f<=g)return t.copy(r);const p=f*c-l*g;if(p<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(n).addScaledVector(dy,a);const _=u*g-f*h;if(_<=0&&h-u>=0&&f-g>=0)return Xoe.subVectors(r,s),a=(h-u)/(h-u+(f-g)),t.copy(s).addScaledVector(Xoe,a);const m=1/(_+p+d);return o=p*m,a=d*m,t.copy(n).addScaledVector(hy,o).addScaledVector(dy,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Kut=0;class ta extends jg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kut++}),this.uuid=wc(),this.name="",this.type="Material",this.blending=q0,this.side=Gd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rX,this.blendDst=oX,this.blendEquation=f0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=BP,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=X1e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=nN,this.stencilZFail=nN,this.stencilZPass=nN,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==q0&&(n.blending=this.blending),this.side!==Gd&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const oye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Hu={h:0,s:0,l:0},iA={h:0,s:0,l:0};function b6(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Pt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xc.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=Xc.workingColorSpace){return this.r=e,this.g=t,this.b=n,Xc.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=Xc.workingColorSpace){if(e=yX(e,1),t=pr(t,0,1),n=pr(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,o=2*n-r;this.r=b6(o,r,e+1/3),this.g=b6(o,r,e),this.b=b6(o,r,e-1/3)}return Xc.toWorkingColorSpace(this,s),this}setStyle(e,t=Gn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gn){const n=oye[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sw(e.r),this.g=Sw(e.g),this.b=Sw(e.b),this}copyLinearToSRGB(e){return this.r=l6(e.r),this.g=l6(e.g),this.b=l6(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gn){return Xc.fromWorkingColorSpace(fa.copy(this),e),Math.round(pr(fa.r*255,0,255))*65536+Math.round(pr(fa.g*255,0,255))*256+Math.round(pr(fa.b*255,0,255))}getHexString(e=Gn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xc.workingColorSpace){Xc.fromWorkingColorSpace(fa.copy(this),t);const n=fa.r,s=fa.g,r=fa.b,o=Math.max(n,s,r),a=Math.min(n,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case n:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-n)/h+2;break;case r:l=(n-s)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Xc.workingColorSpace){return Xc.fromWorkingColorSpace(fa.copy(this),t),e.r=fa.r,e.g=fa.g,e.b=fa.b,e}getStyle(e=Gn){Xc.fromWorkingColorSpace(fa.copy(this),e);const t=fa.r,n=fa.g,s=fa.b;return e!==Gn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(Hu),Hu.h+=e,Hu.s+=t,Hu.l+=n,this.setHSL(Hu.h,Hu.s,Hu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Hu),e.getHSL(iA);const n=yL(Hu.h,iA.h,t),s=yL(Hu.s,iA.s,t),r=yL(Hu.l,iA.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const fa=new Pt;Pt.NAMES=oye;class Kg extends ta{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ck,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const tg=qut();function qut(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,s[l]=24,s[l|256]=24):(n[l]=31744,n[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,r[l]=c|u}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function Sl(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=pr(i,-65504,65504),tg.floatView[0]=i;const e=tg.uint32View[0],t=e>>23&511;return tg.baseTable[t]+((e&8388607)>>tg.shiftTable[t])}function wE(i){const e=i>>10;return tg.uint32View[0]=tg.mantissaTable[tg.offsetTable[e]+(i&1023)]+tg.exponentTable[e],tg.floatView[0]}const Xut={toHalfFloat:Sl,fromHalfFloat:wE},Ur=new se,sA=new rt;class is{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=uT,this.updateRange={offset:0,count:-1},this.gpuType=Ed,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)sA.fromBufferAttribute(this,t),sA.applyMatrix3(e),this.setXY(t,sA.x,sA.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix3(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_c(t,this.array)),t}setX(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_c(t,this.array)),t}setY(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_c(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_c(t,this.array)),t}setW(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array),r=ii(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uT&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Yut extends is{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Zut extends is{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Qut extends is{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Jut extends is{constructor(e,t,n){super(new Int16Array(e),t,n)}}class CX extends is{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class eht extends is{constructor(e,t,n){super(new Int32Array(e),t,n)}}class SX extends is{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class tht extends is{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=wE(this.array[e*this.itemSize]);return this.normalized&&(t=_c(t,this.array)),t}setX(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize]=Sl(t),this}getY(e){let t=wE(this.array[e*this.itemSize+1]);return this.normalized&&(t=_c(t,this.array)),t}setY(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+1]=Sl(t),this}getZ(e){let t=wE(this.array[e*this.itemSize+2]);return this.normalized&&(t=_c(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+2]=Sl(t),this}getW(e){let t=wE(this.array[e*this.itemSize+3]);return this.normalized&&(t=_c(t,this.array)),t}setW(e,t){return this.normalized&&(t=ii(t,this.array)),this.array[e*this.itemSize+3]=Sl(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array)),this.array[e+0]=Sl(t),this.array[e+1]=Sl(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array)),this.array[e+0]=Sl(t),this.array[e+1]=Sl(n),this.array[e+2]=Sl(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array),r=ii(r,this.array)),this.array[e+0]=Sl(t),this.array[e+1]=Sl(n),this.array[e+2]=Sl(s),this.array[e+3]=Sl(r),this}}class Jt extends is{constructor(e,t,n){super(new Float32Array(e),t,n)}}class nht extends is{constructor(e,t,n){super(new Float64Array(e),t,n)}}let iht=0;const Hc=new Rn,w6=new Bi,fy=new se,oc=new Ic,Sx=new Ic,So=new se;class Kn extends jg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iht++}),this.uuid=wc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rye(e)?SX:CX)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Zn().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Hc.makeRotationFromQuaternion(e),this.applyMatrix4(Hc),this}rotateX(e){return Hc.makeRotationX(e),this.applyMatrix4(Hc),this}rotateY(e){return Hc.makeRotationY(e),this.applyMatrix4(Hc),this}rotateZ(e){return Hc.makeRotationZ(e),this.applyMatrix4(Hc),this}translate(e,t,n){return Hc.makeTranslation(e,t,n),this.applyMatrix4(Hc),this}scale(e,t,n){return Hc.makeScale(e,t,n),this.applyMatrix4(Hc),this}lookAt(e){return w6.lookAt(e),w6.updateMatrix(),this.applyMatrix4(w6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fy).negate(),this.translate(fy.x,fy.y,fy.z),this}setFromPoints(e){const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Jt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ic);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];oc.setFromBufferAttribute(r),this.morphTargetsRelative?(So.addVectors(this.boundingBox.min,oc.min),this.boundingBox.expandByPoint(So),So.addVectors(this.boundingBox.max,oc.max),this.boundingBox.expandByPoint(So)):(this.boundingBox.expandByPoint(oc.min),this.boundingBox.expandByPoint(oc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Nc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new se,1/0);return}if(e){const n=this.boundingSphere.center;if(oc.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];Sx.setFromBufferAttribute(a),this.morphTargetsRelative?(So.addVectors(oc.min,Sx.min),oc.expandByPoint(So),So.addVectors(oc.max,Sx.max),oc.expandByPoint(So)):(oc.expandByPoint(Sx.min),oc.expandByPoint(Sx.max))}oc.getCenter(n);let s=0;for(let r=0,o=e.count;r<o;r++)So.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(So));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)So.fromBufferAttribute(a,c),l&&(fy.fromBufferAttribute(e,c),So.add(fy)),s=Math.max(s,n.distanceToSquared(So))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,s=t.position.array,r=t.normal.array,o=t.uv.array,a=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new is(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let D=0;D<a;D++)c[D]=new se,u[D]=new se;const h=new se,d=new se,f=new se,g=new rt,p=new rt,_=new rt,m=new se,v=new se;function y(D,I,N){h.fromArray(s,D*3),d.fromArray(s,I*3),f.fromArray(s,N*3),g.fromArray(o,D*2),p.fromArray(o,I*2),_.fromArray(o,N*2),d.sub(h),f.sub(h),p.sub(g),_.sub(g);const P=1/(p.x*_.y-_.x*p.y);isFinite(P)&&(m.copy(d).multiplyScalar(_.y).addScaledVector(f,-p.y).multiplyScalar(P),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-_.x).multiplyScalar(P),c[D].add(m),c[I].add(m),c[N].add(m),u[D].add(v),u[I].add(v),u[N].add(v))}let C=this.groups;C.length===0&&(C=[{start:0,count:n.length}]);for(let D=0,I=C.length;D<I;++D){const N=C[D],P=N.start,O=N.count;for(let V=P,z=P+O;V<z;V+=3)y(n[V+0],n[V+1],n[V+2])}const S=new se,x=new se,E=new se,L=new se;function T(D){E.fromArray(r,D*3),L.copy(E);const I=c[D];S.copy(I),S.sub(E.multiplyScalar(E.dot(I))).normalize(),x.crossVectors(L,I);const P=x.dot(u[D])<0?-1:1;l[D*4]=S.x,l[D*4+1]=S.y,l[D*4+2]=S.z,l[D*4+3]=P}for(let D=0,I=C.length;D<I;++D){const N=C[D],P=N.start,O=N.count;for(let V=P,z=P+O;V<z;V+=3)T(n[V+0]),T(n[V+1]),T(n[V+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new is(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const s=new se,r=new se,o=new se,a=new se,l=new se,c=new se,u=new se,h=new se;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),p=e.getX(d+1),_=e.getX(d+2);s.fromBufferAttribute(t,g),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,_),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,p),c.fromBufferAttribute(n,_),a.add(u),l.add(u),c.add(u),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z),n.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)s.fromBufferAttribute(t,d+0),r.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)So.fromBufferAttribute(e,t),So.normalize(),e.setXYZ(t,So.x,So.y,So.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,g=0;for(let p=0,_=l.length;p<_;p++){a.isInterleavedBufferAttribute?f=l[p]*a.data.stride+a.offset:f=l[p]*u;for(let m=0;m<u;m++)d[g++]=c[f++]}return new is(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kn,n=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,n);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],h=r[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Yoe=new Rn,E_=new tS,rA=new Nc,Zoe=new se,gy=new se,py=new se,my=new se,C6=new se,oA=new se,aA=new rt,lA=new rt,cA=new rt,Qoe=new se,Joe=new se,eae=new se,uA=new se,hA=new se;class Zs extends Bi{constructor(e=new Kn,t=new Kg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){oA.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],h=r[l];u!==0&&(C6.fromBufferAttribute(h,e),o?oA.addScaledVector(C6,u):oA.addScaledVector(C6.sub(t),u))}t.add(oA)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),rA.copy(n.boundingSphere),rA.applyMatrix4(r),E_.copy(e.ray).recast(e.near),!(rA.containsPoint(E_.origin)===!1&&(E_.intersectSphere(rA,Zoe)===null||E_.origin.distanceToSquared(Zoe)>(e.far-e.near)**2))&&(Yoe.copy(r).invert(),E_.copy(e.ray).applyMatrix4(Yoe),!(n.boundingBox!==null&&E_.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,E_)))}_computeIntersections(e,t,n){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,h=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,p=d.length;g<p;g++){const _=d[g],m=o[_.materialIndex],v=Math.max(_.start,f.start),y=Math.min(a.count,Math.min(_.start+_.count,f.start+f.count));for(let C=v,S=y;C<S;C+=3){const x=a.getX(C),E=a.getX(C+1),L=a.getX(C+2);s=dA(this,m,e,n,c,u,h,x,E,L),s&&(s.faceIndex=Math.floor(C/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const g=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let _=g,m=p;_<m;_+=3){const v=a.getX(_),y=a.getX(_+1),C=a.getX(_+2);s=dA(this,o,e,n,c,u,h,v,y,C),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,p=d.length;g<p;g++){const _=d[g],m=o[_.materialIndex],v=Math.max(_.start,f.start),y=Math.min(l.count,Math.min(_.start+_.count,f.start+f.count));for(let C=v,S=y;C<S;C+=3){const x=C,E=C+1,L=C+2;s=dA(this,m,e,n,c,u,h,x,E,L),s&&(s.faceIndex=Math.floor(C/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const g=Math.max(0,f.start),p=Math.min(l.count,f.start+f.count);for(let _=g,m=p;_<m;_+=3){const v=_,y=_+1,C=_+2;s=dA(this,o,e,n,c,u,h,v,y,C),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}}}function sht(i,e,t,n,s,r,o,a){let l;if(e.side===La?l=n.intersectTriangle(o,r,s,!0,a):l=n.intersectTriangle(s,r,o,e.side===Gd,a),l===null)return null;hA.copy(a),hA.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(hA);return c<t.near||c>t.far?null:{distance:c,point:hA.clone(),object:i}}function dA(i,e,t,n,s,r,o,a,l,c){i.getVertexPosition(a,gy),i.getVertexPosition(l,py),i.getVertexPosition(c,my);const u=sht(i,e,t,n,gy,py,my,uA);if(u){s&&(aA.fromBufferAttribute(s,a),lA.fromBufferAttribute(s,l),cA.fromBufferAttribute(s,c),u.uv=Dl.getInterpolation(uA,gy,py,my,aA,lA,cA,new rt)),r&&(aA.fromBufferAttribute(r,a),lA.fromBufferAttribute(r,l),cA.fromBufferAttribute(r,c),u.uv1=Dl.getInterpolation(uA,gy,py,my,aA,lA,cA,new rt),u.uv2=u.uv1),o&&(Qoe.fromBufferAttribute(o,a),Joe.fromBufferAttribute(o,l),eae.fromBufferAttribute(o,c),u.normal=Dl.getInterpolation(uA,gy,py,my,Qoe,Joe,eae,new se),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new se,materialIndex:0};Dl.getNormal(gy,py,my,h.normal),u.face=h}return u}class jm extends Kn{constructor(e=1,t=1,n=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;g("z","y","x",-1,-1,n,t,e,o,r,0),g("z","y","x",1,-1,n,t,-e,o,r,1),g("x","z","y",1,1,e,n,t,s,o,2),g("x","z","y",1,-1,e,n,-t,s,o,3),g("x","y","z",1,-1,e,t,n,s,r,4),g("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(l),this.setAttribute("position",new Jt(c,3)),this.setAttribute("normal",new Jt(u,3)),this.setAttribute("uv",new Jt(h,2));function g(p,_,m,v,y,C,S,x,E,L,T){const D=C/E,I=S/L,N=C/2,P=S/2,O=x/2,V=E+1,z=L+1;let K=0,H=0;const U=new se;for(let j=0;j<z;j++){const W=j*I-P;for(let X=0;X<V;X++){const ee=X*D-N;U[p]=ee*v,U[_]=W*y,U[m]=O,c.push(U.x,U.y,U.z),U[p]=0,U[_]=0,U[m]=x>0?1:-1,u.push(U.x,U.y,U.z),h.push(X/E),h.push(1-j/L),K+=1}}for(let j=0;j<L;j++)for(let W=0;W<E;W++){const X=d+W+V*j,ee=d+W+V*(j+1),le=d+(W+1)+V*(j+1),fe=d+(W+1)+V*j;l.push(X,ee,fe),l.push(ee,le,fe),H+=6}a.addGroup(f,H,T),f+=H,d+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fC(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function ja(i){const e={};for(let t=0;t<i.length;t++){const n=fC(i[t]);for(const s in n)e[s]=n[s]}return e}function rht(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function aye(i){return i.getRenderTarget()===null?i.outputColorSpace:kh}const xX={clone:fC,merge:ja};var oht=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,aht=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jd extends ta{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=oht,this.fragmentShader=aht,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fC(e.uniforms),this.uniformsGroups=rht(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Sk extends Bi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rn,this.projectionMatrix=new Rn,this.projectionMatrixInverse=new Rn,this.coordinateSystem=Ld}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class qr extends Sk{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dC*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(X0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dC*2*Math.atan(Math.tan(X0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(X0*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*n/c,s*=o.width/l,n*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _y=-90,vy=1;class lye extends Bi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const s=new qr(_y,vy,e,t);s.layers=this.layers,this.add(s);const r=new qr(_y,vy,e,t);r.layers=this.layers,this.add(r);const o=new qr(_y,vy,e,t);o.layers=this.layers,this.add(o);const a=new qr(_y,vy,e,t);a.layers=this.layers,this.add(a);const l=new qr(_y,vy,e,t);l.layers=this.layers,this.add(l);const c=new qr(_y,vy,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ld)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===hT)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,r,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=yh,e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,s),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class xk extends nr{constructor(e,t,n,s,r,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Rm,super(e,t,n,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cye extends Mh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];t.encoding!==void 0&&(bL("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===mm?Gn:_m),this.texture=new xk(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new jm(5,5,5),r=new jd({name:"CubemapFromEquirect",uniforms:fC(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:La,blending:xg});r.uniforms.tEquirect.value=t;const o=new Zs(s,r),a=t.minFilter;return t.minFilter===Om&&(t.minFilter=Fs),new lye(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,s);e.setRenderTarget(r)}}const S6=new se,lht=new se,cht=new Zn;class Kf{constructor(e=new se(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=S6.subVectors(n,t).cross(lht.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(S6),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||cht.getNormalMatrix(e),s=this.coplanarPoint(S6).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const L_=new Nc,fA=new se;class Ek{constructor(e=new Kf,t=new Kf,n=new Kf,s=new Kf,r=new Kf,o=new Kf){this.planes=[e,t,n,s,r,o]}set(e,t,n,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Ld){const n=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],h=s[6],d=s[7],f=s[8],g=s[9],p=s[10],_=s[11],m=s[12],v=s[13],y=s[14],C=s[15];if(n[0].setComponents(l-r,d-c,_-f,C-m).normalize(),n[1].setComponents(l+r,d+c,_+f,C+m).normalize(),n[2].setComponents(l+o,d+u,_+g,C+v).normalize(),n[3].setComponents(l-o,d-u,_-g,C-v).normalize(),n[4].setComponents(l-a,d-h,_-p,C-y).normalize(),t===Ld)n[5].setComponents(l+a,d+h,_+p,C+y).normalize();else if(t===hT)n[5].setComponents(a,h,p,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),L_.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),L_.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(L_)}intersectsSprite(e){return L_.center.set(0,0,0),L_.radius=.7071067811865476,L_.applyMatrix4(e.matrixWorld),this.intersectsSphere(L_)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(fA.x=s.normal.x>0?e.max.x:e.min.x,fA.y=s.normal.y>0?e.max.y:e.min.y,fA.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(fA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function uye(){let i=null,e=!1,t=null,n=null;function s(r,o){t(r,o),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function uht(i,e){const t=e.isWebGL2,n=new WeakMap;function s(c,u){const h=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(u,f),i.bufferData(u,h,d),c.onUploadCallback();let g;if(h instanceof Float32Array)g=i.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=i.SHORT;else if(h instanceof Uint32Array)g=i.UNSIGNED_INT;else if(h instanceof Int32Array)g=i.INT;else if(h instanceof Int8Array)g=i.BYTE;else if(h instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function r(c,u,h){const d=u.array,f=u.updateRange;i.bindBuffer(h,c),f.count===-1?i.bufferSubData(h,0,d):(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=n.get(c);(!d||d.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);h===void 0?n.set(c,s(c,u)):h.version<c.version&&(r(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class Km extends Kn{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(n),l=Math.floor(s),c=a+1,u=l+1,h=e/a,d=t/l,f=[],g=[],p=[],_=[];for(let m=0;m<u;m++){const v=m*d-o;for(let y=0;y<c;y++){const C=y*h-r;g.push(C,-v,0),p.push(0,0,1),_.push(y/a),_.push(1-m/l)}}for(let m=0;m<l;m++)for(let v=0;v<a;v++){const y=v+c*m,C=v+c*(m+1),S=v+1+c*(m+1),x=v+1+c*m;f.push(y,C,x),f.push(C,S,x)}this.setIndex(f),this.setAttribute("position",new Jt(g,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Km(e.width,e.height,e.widthSegments,e.heightSegments)}}var hht=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dht=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fht=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ght=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pht=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,mht=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_ht=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,vht=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yht=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bht=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wht=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Cht=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Sht=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xht=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Eht=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Lht=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Tht=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,kht=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Mht=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Dht=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Aht=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Iht=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Nht=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Rht=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Pht=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Oht=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Fht=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Bht=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zht="gl_FragColor = linearToOutputTexel( gl_FragColor );",Uht=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Vht=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Wht=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Hht=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$ht=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ght=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jht=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Kht=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qht=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Xht=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yht=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Zht=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Qht=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Jht=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,edt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,tdt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ndt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,idt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sdt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rdt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,odt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,adt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,ldt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cdt=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,udt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,hdt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ddt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fdt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gdt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,pdt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mdt=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,_dt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vdt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ydt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bdt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,wdt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Cdt=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Sdt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,xdt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Edt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Ldt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Tdt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,kdt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mdt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ddt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Adt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Idt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Ndt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Rdt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Pdt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Odt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Fdt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Bdt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zdt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Udt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Vdt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Wdt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Hdt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$dt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Gdt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jdt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Kdt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qdt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Xdt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Ydt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Zdt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Qdt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Jdt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eft=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tft=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nft=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,ift=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,sft=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rft=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oft=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aft=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lft=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cft=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uft=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hft=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dft=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fft=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gft=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pft=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,mft=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_ft=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vft=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yft=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bft=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wft=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Cft=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Sft=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xft=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Eft=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lft=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Tft=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kft=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Mft=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Dft=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Aft=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ift=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Nft=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rft=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pft=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oft=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Fft=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bft=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zft=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Uft=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Vft=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$n={alphahash_fragment:hht,alphahash_pars_fragment:dht,alphamap_fragment:fht,alphamap_pars_fragment:ght,alphatest_fragment:pht,alphatest_pars_fragment:mht,aomap_fragment:_ht,aomap_pars_fragment:vht,begin_vertex:yht,beginnormal_vertex:bht,bsdfs:wht,iridescence_fragment:Cht,bumpmap_pars_fragment:Sht,clipping_planes_fragment:xht,clipping_planes_pars_fragment:Eht,clipping_planes_pars_vertex:Lht,clipping_planes_vertex:Tht,color_fragment:kht,color_pars_fragment:Mht,color_pars_vertex:Dht,color_vertex:Aht,common:Iht,cube_uv_reflection_fragment:Nht,defaultnormal_vertex:Rht,displacementmap_pars_vertex:Pht,displacementmap_vertex:Oht,emissivemap_fragment:Fht,emissivemap_pars_fragment:Bht,colorspace_fragment:zht,colorspace_pars_fragment:Uht,envmap_fragment:Vht,envmap_common_pars_fragment:Wht,envmap_pars_fragment:Hht,envmap_pars_vertex:$ht,envmap_physical_pars_fragment:ndt,envmap_vertex:Ght,fog_vertex:jht,fog_pars_vertex:Kht,fog_fragment:qht,fog_pars_fragment:Xht,gradientmap_pars_fragment:Yht,lightmap_fragment:Zht,lightmap_pars_fragment:Qht,lights_lambert_fragment:Jht,lights_lambert_pars_fragment:edt,lights_pars_begin:tdt,lights_toon_fragment:idt,lights_toon_pars_fragment:sdt,lights_phong_fragment:rdt,lights_phong_pars_fragment:odt,lights_physical_fragment:adt,lights_physical_pars_fragment:ldt,lights_fragment_begin:cdt,lights_fragment_maps:udt,lights_fragment_end:hdt,logdepthbuf_fragment:ddt,logdepthbuf_pars_fragment:fdt,logdepthbuf_pars_vertex:gdt,logdepthbuf_vertex:pdt,map_fragment:mdt,map_pars_fragment:_dt,map_particle_fragment:vdt,map_particle_pars_fragment:ydt,metalnessmap_fragment:bdt,metalnessmap_pars_fragment:wdt,morphcolor_vertex:Cdt,morphnormal_vertex:Sdt,morphtarget_pars_vertex:xdt,morphtarget_vertex:Edt,normal_fragment_begin:Ldt,normal_fragment_maps:Tdt,normal_pars_fragment:kdt,normal_pars_vertex:Mdt,normal_vertex:Ddt,normalmap_pars_fragment:Adt,clearcoat_normal_fragment_begin:Idt,clearcoat_normal_fragment_maps:Ndt,clearcoat_pars_fragment:Rdt,iridescence_pars_fragment:Pdt,opaque_fragment:Odt,packing:Fdt,premultiplied_alpha_fragment:Bdt,project_vertex:zdt,dithering_fragment:Udt,dithering_pars_fragment:Vdt,roughnessmap_fragment:Wdt,roughnessmap_pars_fragment:Hdt,shadowmap_pars_fragment:$dt,shadowmap_pars_vertex:Gdt,shadowmap_vertex:jdt,shadowmask_pars_fragment:Kdt,skinbase_vertex:qdt,skinning_pars_vertex:Xdt,skinning_vertex:Ydt,skinnormal_vertex:Zdt,specularmap_fragment:Qdt,specularmap_pars_fragment:Jdt,tonemapping_fragment:eft,tonemapping_pars_fragment:tft,transmission_fragment:nft,transmission_pars_fragment:ift,uv_pars_fragment:sft,uv_pars_vertex:rft,uv_vertex:oft,worldpos_vertex:aft,background_vert:lft,background_frag:cft,backgroundCube_vert:uft,backgroundCube_frag:hft,cube_vert:dft,cube_frag:fft,depth_vert:gft,depth_frag:pft,distanceRGBA_vert:mft,distanceRGBA_frag:_ft,equirect_vert:vft,equirect_frag:yft,linedashed_vert:bft,linedashed_frag:wft,meshbasic_vert:Cft,meshbasic_frag:Sft,meshlambert_vert:xft,meshlambert_frag:Eft,meshmatcap_vert:Lft,meshmatcap_frag:Tft,meshnormal_vert:kft,meshnormal_frag:Mft,meshphong_vert:Dft,meshphong_frag:Aft,meshphysical_vert:Ift,meshphysical_frag:Nft,meshtoon_vert:Rft,meshtoon_frag:Pft,points_vert:Oft,points_frag:Fft,shadow_vert:Bft,shadow_frag:zft,sprite_vert:Uft,sprite_frag:Vft},Ot={common:{diffuse:{value:new Pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zn},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zn},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0},uvTransform:{value:new Zn}},sprite:{diffuse:{value:new Pt(16777215)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zn},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0}}},ah={basic:{uniforms:ja([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:$n.meshbasic_vert,fragmentShader:$n.meshbasic_frag},lambert:{uniforms:ja([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Pt(0)}}]),vertexShader:$n.meshlambert_vert,fragmentShader:$n.meshlambert_frag},phong:{uniforms:ja([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Pt(0)},specular:{value:new Pt(1118481)},shininess:{value:30}}]),vertexShader:$n.meshphong_vert,fragmentShader:$n.meshphong_frag},standard:{uniforms:ja([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new Pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag},toon:{uniforms:ja([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new Pt(0)}}]),vertexShader:$n.meshtoon_vert,fragmentShader:$n.meshtoon_frag},matcap:{uniforms:ja([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:$n.meshmatcap_vert,fragmentShader:$n.meshmatcap_frag},points:{uniforms:ja([Ot.points,Ot.fog]),vertexShader:$n.points_vert,fragmentShader:$n.points_frag},dashed:{uniforms:ja([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$n.linedashed_vert,fragmentShader:$n.linedashed_frag},depth:{uniforms:ja([Ot.common,Ot.displacementmap]),vertexShader:$n.depth_vert,fragmentShader:$n.depth_frag},normal:{uniforms:ja([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:$n.meshnormal_vert,fragmentShader:$n.meshnormal_frag},sprite:{uniforms:ja([Ot.sprite,Ot.fog]),vertexShader:$n.sprite_vert,fragmentShader:$n.sprite_frag},background:{uniforms:{uvTransform:{value:new Zn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$n.background_vert,fragmentShader:$n.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:$n.backgroundCube_vert,fragmentShader:$n.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$n.cube_vert,fragmentShader:$n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$n.equirect_vert,fragmentShader:$n.equirect_frag},distanceRGBA:{uniforms:ja([Ot.common,Ot.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$n.distanceRGBA_vert,fragmentShader:$n.distanceRGBA_frag},shadow:{uniforms:ja([Ot.lights,Ot.fog,{color:{value:new Pt(0)},opacity:{value:1}}]),vertexShader:$n.shadow_vert,fragmentShader:$n.shadow_frag}};ah.physical={uniforms:ja([ah.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zn},clearcoatNormalScale:{value:new rt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zn},sheen:{value:0},sheenColor:{value:new Pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zn},transmissionSamplerSize:{value:new rt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zn},attenuationDistance:{value:0},attenuationColor:{value:new Pt(0)},specularColor:{value:new Pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zn},anisotropyVector:{value:new rt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zn}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag};const gA={r:0,b:0,g:0};function Wft(i,e,t,n,s,r,o){const a=new Pt(0);let l=r===!0?0:1,c,u,h=null,d=0,f=null;function g(_,m){let v=!1,y=m.isScene===!0?m.background:null;switch(y&&y.isTexture&&(y=(m.backgroundBlurriness>0?t:e).get(y)),y===null?p(a,l):y&&y.isColor&&(p(y,1),v=!0),i.xr.getEnvironmentBlendMode()){case"opaque":v=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,o),v=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,o),v=!0;break}(i.autoClear||v)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),y&&(y.isCubeTexture||y.mapping===eS)?(u===void 0&&(u=new Zs(new jm(1,1,1),new jd({name:"BackgroundCubeMaterial",uniforms:fC(ah.backgroundCube.uniforms),vertexShader:ah.backgroundCube.vertexShader,fragmentShader:ah.backgroundCube.fragmentShader,side:La,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,E,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=y.colorSpace!==Gn,(h!==y||d!==y.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=y,d=y.version,f=i.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new Zs(new Km(2,2),new jd({name:"BackgroundMaterial",uniforms:fC(ah.background.uniforms),vertexShader:ah.background.vertexShader,fragmentShader:ah.background.fragmentShader,side:Gd,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=y.colorSpace!==Gn,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||d!==y.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=y,d=y.version,f=i.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function p(_,m){_.getRGB(gA,aye(i)),n.buffers.color.setClear(gA.r,gA.g,gA.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(_,m=1){a.set(_),l=m,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,p(a,l)},render:g}}function Hft(i,e,t,n){const s=i.getParameter(i.MAX_VERTEX_ATTRIBS),r=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||r!==null,a={},l=_(null);let c=l,u=!1;function h(O,V,z,K,H){let U=!1;if(o){const j=p(K,z,V);c!==j&&(c=j,f(c.object)),U=m(O,K,z,H),U&&v(O,K,z,H)}else{const j=V.wireframe===!0;(c.geometry!==K.id||c.program!==z.id||c.wireframe!==j)&&(c.geometry=K.id,c.program=z.id,c.wireframe=j,U=!0)}H!==null&&t.update(H,i.ELEMENT_ARRAY_BUFFER),(U||u)&&(u=!1,L(O,V,z,K),H!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))}function d(){return n.isWebGL2?i.createVertexArray():r.createVertexArrayOES()}function f(O){return n.isWebGL2?i.bindVertexArray(O):r.bindVertexArrayOES(O)}function g(O){return n.isWebGL2?i.deleteVertexArray(O):r.deleteVertexArrayOES(O)}function p(O,V,z){const K=z.wireframe===!0;let H=a[O.id];H===void 0&&(H={},a[O.id]=H);let U=H[V.id];U===void 0&&(U={},H[V.id]=U);let j=U[K];return j===void 0&&(j=_(d()),U[K]=j),j}function _(O){const V=[],z=[],K=[];for(let H=0;H<s;H++)V[H]=0,z[H]=0,K[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:z,attributeDivisors:K,object:O,attributes:{},index:null}}function m(O,V,z,K){const H=c.attributes,U=V.attributes;let j=0;const W=z.getAttributes();for(const X in W)if(W[X].location>=0){const le=H[X];let fe=U[X];if(fe===void 0&&(X==="instanceMatrix"&&O.instanceMatrix&&(fe=O.instanceMatrix),X==="instanceColor"&&O.instanceColor&&(fe=O.instanceColor)),le===void 0||le.attribute!==fe||fe&&le.data!==fe.data)return!0;j++}return c.attributesNum!==j||c.index!==K}function v(O,V,z,K){const H={},U=V.attributes;let j=0;const W=z.getAttributes();for(const X in W)if(W[X].location>=0){let le=U[X];le===void 0&&(X==="instanceMatrix"&&O.instanceMatrix&&(le=O.instanceMatrix),X==="instanceColor"&&O.instanceColor&&(le=O.instanceColor));const fe={};fe.attribute=le,le&&le.data&&(fe.data=le.data),H[X]=fe,j++}c.attributes=H,c.attributesNum=j,c.index=K}function y(){const O=c.newAttributes;for(let V=0,z=O.length;V<z;V++)O[V]=0}function C(O){S(O,0)}function S(O,V){const z=c.newAttributes,K=c.enabledAttributes,H=c.attributeDivisors;z[O]=1,K[O]===0&&(i.enableVertexAttribArray(O),K[O]=1),H[O]!==V&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,V),H[O]=V)}function x(){const O=c.newAttributes,V=c.enabledAttributes;for(let z=0,K=V.length;z<K;z++)V[z]!==O[z]&&(i.disableVertexAttribArray(z),V[z]=0)}function E(O,V,z,K,H,U,j){j===!0?i.vertexAttribIPointer(O,V,z,H,U):i.vertexAttribPointer(O,V,z,K,H,U)}function L(O,V,z,K){if(n.isWebGL2===!1&&(O.isInstancedMesh||K.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const H=K.attributes,U=z.getAttributes(),j=V.defaultAttributeValues;for(const W in U){const X=U[W];if(X.location>=0){let ee=H[W];if(ee===void 0&&(W==="instanceMatrix"&&O.instanceMatrix&&(ee=O.instanceMatrix),W==="instanceColor"&&O.instanceColor&&(ee=O.instanceColor)),ee!==void 0){const le=ee.normalized,fe=ee.itemSize,be=t.get(ee);if(be===void 0)continue;const ye=be.buffer,xe=be.type,He=be.bytesPerElement,qe=n.isWebGL2===!0&&(xe===i.INT||xe===i.UNSIGNED_INT||ee.gpuType===cX);if(ee.isInterleavedBufferAttribute){const ke=ee.data,q=ke.stride,Ee=ee.offset;if(ke.isInstancedInterleavedBuffer){for(let De=0;De<X.locationSize;De++)S(X.location+De,ke.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let De=0;De<X.locationSize;De++)C(X.location+De);i.bindBuffer(i.ARRAY_BUFFER,ye);for(let De=0;De<X.locationSize;De++)E(X.location+De,fe/X.locationSize,xe,le,q*He,(Ee+fe/X.locationSize*De)*He,qe)}else{if(ee.isInstancedBufferAttribute){for(let ke=0;ke<X.locationSize;ke++)S(X.location+ke,ee.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ke=0;ke<X.locationSize;ke++)C(X.location+ke);i.bindBuffer(i.ARRAY_BUFFER,ye);for(let ke=0;ke<X.locationSize;ke++)E(X.location+ke,fe/X.locationSize,xe,le,fe*He,fe/X.locationSize*ke*He,qe)}}else if(j!==void 0){const le=j[W];if(le!==void 0)switch(le.length){case 2:i.vertexAttrib2fv(X.location,le);break;case 3:i.vertexAttrib3fv(X.location,le);break;case 4:i.vertexAttrib4fv(X.location,le);break;default:i.vertexAttrib1fv(X.location,le)}}}}x()}function T(){N();for(const O in a){const V=a[O];for(const z in V){const K=V[z];for(const H in K)g(K[H].object),delete K[H];delete V[z]}delete a[O]}}function D(O){if(a[O.id]===void 0)return;const V=a[O.id];for(const z in V){const K=V[z];for(const H in K)g(K[H].object),delete K[H];delete V[z]}delete a[O.id]}function I(O){for(const V in a){const z=a[V];if(z[O.id]===void 0)continue;const K=z[O.id];for(const H in K)g(K[H].object),delete K[H];delete z[O.id]}}function N(){P(),u=!0,c!==l&&(c=l,f(c.object))}function P(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:N,resetDefaultState:P,dispose:T,releaseStatesOfGeometry:D,releaseStatesOfProgram:I,initAttributes:y,enableAttribute:C,disableUnusedAttributes:x}}function $ft(i,e,t,n){const s=n.isWebGL2;let r;function o(c){r=c}function a(c,u){i.drawArrays(r,c,u),t.update(u,r,1)}function l(c,u,h){if(h===0)return;let d,f;if(s)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](r,c,u,h),t.update(u,r,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Gft(i,e,t){let n;function s(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function r(E){if(E==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_TEXTURE_SIZE),g=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),p=i.getParameter(i.MAX_VERTEX_ATTRIBS),_=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),m=i.getParameter(i.MAX_VARYING_VECTORS),v=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,C=o||e.has("OES_texture_float"),S=y&&C,x=o?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:_,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:C,floatVertexTextures:S,maxSamples:x}}function jft(i){const e=this;let t=null,n=0,s=!1,r=!1;const o=new Kf,a=new Zn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||n!==0||s;return s=d,n=h.length,f},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const g=h.clippingPlanes,p=h.clipIntersection,_=h.clipShadows,m=i.get(h);if(!s||g===null||g.length===0||r&&!_)r?u(null):c();else{const v=r?0:n,y=v*4;let C=m.clippingState||null;l.value=C,C=u(g,d,y,f);for(let S=0;S!==y;++S)C[S]=t[S];m.clippingState=C,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=v}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(h,d,f,g){const p=h!==null?h.length:0;let _=null;if(p!==0){if(_=l.value,g!==!0||_===null){const m=f+p*4,v=d.matrixWorldInverse;a.getNormalMatrix(v),(_===null||_.length<m)&&(_=new Float32Array(m));for(let y=0,C=f;y!==p;++y,C+=4)o.copy(h[y]).applyMatrix4(v,a),o.normal.toArray(_,C),_[C+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,_}}function Kft(i){let e=new WeakMap;function t(o,a){return a===iT?o.mapping=Rm:a===sT&&(o.mapping=Pm),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===iT||a===sT)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new cye(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}class _1 extends Sk{constructor(e=-1,t=1,n=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Tb=4,tae=[.125,.215,.35,.446,.526,.582],g0=20,x6=new _1,nae=new Pt;let E6=null;const Z_=(1+Math.sqrt(5))/2,yy=1/Z_,iae=[new se(1,1,1),new se(-1,1,1),new se(1,1,-1),new se(-1,1,-1),new se(0,Z_,yy),new se(0,Z_,-yy),new se(yy,0,Z_),new se(-yy,0,Z_),new se(Z_,yy,0),new se(-Z_,yy,0)];class JH{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100){E6=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=oae(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=rae(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(E6),e.scissorTest=!1,pA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Rm||e.mapping===Pm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),E6=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Fs,minFilter:Fs,generateMipmaps:!1,type:hC,format:Nl,colorSpace:kh,depthBuffer:!1},s=sae(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sae(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=qft(r)),this._blurMaterial=Xft(r,e,t)}return s}_compileMaterial(e){const t=new Zs(this._lodPlanes[0],e);this._renderer.compile(t,x6)}_sceneToCubeUV(e,t,n,s){const a=new qr(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(nae),u.toneMapping=yh,u.autoClear=!1;const f=new Kg({name:"PMREM.Background",side:La,depthWrite:!1,depthTest:!1}),g=new Zs(new jm,f);let p=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,p=!0):(f.color.copy(nae),p=!0);for(let m=0;m<6;m++){const v=m%3;v===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):v===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const y=this._cubeSize;pA(s,v*y,m>2?y:0,y,y),u.setRenderTarget(s),p&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===Rm||e.mapping===Pm;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=oae()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=rae());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Zs(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;pA(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,x6)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=iae[(s-1)%iae.length];this._blur(e,s-1,s,r,o)}t.autoClear=n}_blur(e,t,n,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,s,"latitudinal",r),this._halfBlur(o,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Zs(this._lodPlanes[s],c),d=c.uniforms,f=this._sizeLods[n]-1,g=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*g0-1),p=r/g,_=isFinite(r)?1+Math.floor(u*p):g0;_>g0&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${g0}`);const m=[];let v=0;for(let E=0;E<g0;++E){const L=E/p,T=Math.exp(-L*L/2);m.push(T),E===0?v+=T:E<_&&(v+=2*T)}for(let E=0;E<m.length;E++)m[E]=m[E]/v;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=m,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:y}=this;d.dTheta.value=g,d.mipInt.value=y-n;const C=this._sizeLods[s],S=3*C*(s>y-Tb?s-y+Tb:0),x=4*(this._cubeSize-C);pA(t,S,x,3*C,2*C),l.setRenderTarget(t),l.render(h,x6)}}function qft(i){const e=[],t=[],n=[];let s=i;const r=i-Tb+1+tae.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>i-Tb?l=tae[o-i+Tb-1]:o===0&&(l=0),n.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,g=6,p=3,_=2,m=1,v=new Float32Array(p*g*f),y=new Float32Array(_*g*f),C=new Float32Array(m*g*f);for(let x=0;x<f;x++){const E=x%3*2/3-1,L=x>2?0:-1,T=[E,L,0,E+2/3,L,0,E+2/3,L+1,0,E,L,0,E+2/3,L+1,0,E,L+1,0];v.set(T,p*g*x),y.set(d,_*g*x);const D=[x,x,x,x,x,x];C.set(D,m*g*x)}const S=new Kn;S.setAttribute("position",new is(v,p)),S.setAttribute("uv",new is(y,_)),S.setAttribute("faceIndex",new is(C,m)),e.push(S),s>Tb&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function sae(i,e,t){const n=new Mh(i,e,t);return n.texture.mapping=eS,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function pA(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function Xft(i,e,t){const n=new Float32Array(g0),s=new se(0,1,0);return new jd({name:"SphericalGaussianBlur",defines:{n:g0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:EX(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xg,depthTest:!1,depthWrite:!1})}function rae(){return new jd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:EX(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xg,depthTest:!1,depthWrite:!1})}function oae(){return new jd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:EX(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xg,depthTest:!1,depthWrite:!1})}function EX(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Yft(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===iT||l===sT,u=l===Rm||l===Pm;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new JH(i)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&s(h)){t===null&&(t=new JH(i));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",r),d.texture}else return null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function Zft(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const s=t(n);return s===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function Qft(i,e,t,n){const s={},r=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);for(const g in d.morphAttributes){const p=d.morphAttributes[g];for(let _=0,m=p.length;_<m;_++)e.remove(p[_])}d.removeEventListener("dispose",o),delete s[d.id];const f=r.get(d);f&&(e.remove(f),r.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return s[d.id]===!0||(d.addEventListener("dispose",o),s[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const g in d)e.update(d[g],i.ARRAY_BUFFER);const f=h.morphAttributes;for(const g in f){const p=f[g];for(let _=0,m=p.length;_<m;_++)e.update(p[_],i.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,g=h.attributes.position;let p=0;if(f!==null){const v=f.array;p=f.version;for(let y=0,C=v.length;y<C;y+=3){const S=v[y+0],x=v[y+1],E=v[y+2];d.push(S,x,x,E,E,S)}}else{const v=g.array;p=g.version;for(let y=0,C=v.length/3-1;y<C;y+=3){const S=y+0,x=y+1,E=y+2;d.push(S,x,x,E,E,S)}}const _=new(rye(d)?SX:CX)(d,1);_.version=p;const m=r.get(h);m&&e.remove(m),r.set(h,_)}function u(h){const d=r.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return r.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function Jft(i,e,t,n){const s=n.isWebGL2;let r;function o(d){r=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,f){i.drawElements(r,f,a,d*l),t.update(f,r,1)}function h(d,f,g){if(g===0)return;let p,_;if(s)p=i,_="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[_](r,f,a,d*l,g),t.update(f,r,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function egt(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(r/3);break;case i.LINES:t.lines+=a*(r/2);break;case i.LINE_STRIP:t.lines+=a*(r-1);break;case i.LINE_LOOP:t.lines+=a*r;break;case i.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function tgt(i,e){return i[0]-e[0]}function ngt(i,e){return Math.abs(e[1])-Math.abs(i[1])}function igt(i,e,t){const n={},s=new Float32Array(8),r=new WeakMap,o=new Fi,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=f!==void 0?f.length:0;let p=r.get(u);if(p===void 0||p.count!==g){let O=function(){N.dispose(),r.delete(u),u.removeEventListener("dispose",O)};p!==void 0&&p.texture.dispose();const v=u.morphAttributes.position!==void 0,y=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],x=u.morphAttributes.normal||[],E=u.morphAttributes.color||[];let L=0;v===!0&&(L=1),y===!0&&(L=2),C===!0&&(L=3);let T=u.attributes.position.count*L,D=1;T>e.maxTextureSize&&(D=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const I=new Float32Array(T*D*4*g),N=new o5(I,T,D,g);N.type=Ed,N.needsUpdate=!0;const P=L*4;for(let V=0;V<g;V++){const z=S[V],K=x[V],H=E[V],U=T*D*4*V;for(let j=0;j<z.count;j++){const W=j*P;v===!0&&(o.fromBufferAttribute(z,j),I[U+W+0]=o.x,I[U+W+1]=o.y,I[U+W+2]=o.z,I[U+W+3]=0),y===!0&&(o.fromBufferAttribute(K,j),I[U+W+4]=o.x,I[U+W+5]=o.y,I[U+W+6]=o.z,I[U+W+7]=0),C===!0&&(o.fromBufferAttribute(H,j),I[U+W+8]=o.x,I[U+W+9]=o.y,I[U+W+10]=o.z,I[U+W+11]=H.itemSize===4?o.w:1)}}p={count:g,texture:N,size:new rt(T,D)},r.set(u,p),u.addEventListener("dispose",O)}let _=0;for(let v=0;v<d.length;v++)_+=d[v];const m=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",m),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",p.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",p.size)}else{const f=d===void 0?0:d.length;let g=n[u.id];if(g===void 0||g.length!==f){g=[];for(let y=0;y<f;y++)g[y]=[y,0];n[u.id]=g}for(let y=0;y<f;y++){const C=g[y];C[0]=y,C[1]=d[y]}g.sort(ngt);for(let y=0;y<8;y++)y<f&&g[y][1]?(a[y][0]=g[y][0],a[y][1]=g[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(tgt);const p=u.morphAttributes.position,_=u.morphAttributes.normal;let m=0;for(let y=0;y<8;y++){const C=a[y],S=C[0],x=C[1];S!==Number.MAX_SAFE_INTEGER&&x?(p&&u.getAttribute("morphTarget"+y)!==p[S]&&u.setAttribute("morphTarget"+y,p[S]),_&&u.getAttribute("morphNormal"+y)!==_[S]&&u.setAttribute("morphNormal"+y,_[S]),s[y]=x,m+=x):(p&&u.hasAttribute("morphTarget"+y)===!0&&u.deleteAttribute("morphTarget"+y),_&&u.hasAttribute("morphNormal"+y)===!0&&u.deleteAttribute("morphNormal"+y),s[y]=0)}const v=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",s)}}return{update:l}}function sgt(i,e,t,n){let s=new WeakMap;function r(l){const c=n.render.frame,u=l.geometry,h=e.get(l,u);if(s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;s.get(d)!==c&&(d.update(),s.set(d,c))}return h}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}const hye=new nr,dye=new o5,fye=new wX,gye=new xk,aae=[],lae=[],cae=new Float32Array(16),uae=new Float32Array(9),hae=new Float32Array(4);function nS(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=aae[s];if(r===void 0&&(r=new Float32Array(s),aae[s]=r),e!==0){n.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(r,a)}return r}function uo(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ho(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function a5(i,e){let t=lae[e];t===void 0&&(t=new Int32Array(e),lae[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function rgt(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function ogt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2fv(this.addr,e),ho(t,e)}}function agt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(uo(t,e))return;i.uniform3fv(this.addr,e),ho(t,e)}}function lgt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4fv(this.addr,e),ho(t,e)}}function cgt(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;hae.set(n),i.uniformMatrix2fv(this.addr,!1,hae),ho(t,n)}}function ugt(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;uae.set(n),i.uniformMatrix3fv(this.addr,!1,uae),ho(t,n)}}function hgt(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;cae.set(n),i.uniformMatrix4fv(this.addr,!1,cae),ho(t,n)}}function dgt(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function fgt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2iv(this.addr,e),ho(t,e)}}function ggt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(uo(t,e))return;i.uniform3iv(this.addr,e),ho(t,e)}}function pgt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4iv(this.addr,e),ho(t,e)}}function mgt(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function _gt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2uiv(this.addr,e),ho(t,e)}}function vgt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(uo(t,e))return;i.uniform3uiv(this.addr,e),ho(t,e)}}function ygt(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4uiv(this.addr,e),ho(t,e)}}function bgt(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2D(e||hye,s)}function wgt(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||fye,s)}function Cgt(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||gye,s)}function Sgt(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||dye,s)}function xgt(i){switch(i){case 5126:return rgt;case 35664:return ogt;case 35665:return agt;case 35666:return lgt;case 35674:return cgt;case 35675:return ugt;case 35676:return hgt;case 5124:case 35670:return dgt;case 35667:case 35671:return fgt;case 35668:case 35672:return ggt;case 35669:case 35673:return pgt;case 5125:return mgt;case 36294:return _gt;case 36295:return vgt;case 36296:return ygt;case 35678:case 36198:case 36298:case 36306:case 35682:return bgt;case 35679:case 36299:case 36307:return wgt;case 35680:case 36300:case 36308:case 36293:return Cgt;case 36289:case 36303:case 36311:case 36292:return Sgt}}function Egt(i,e){i.uniform1fv(this.addr,e)}function Lgt(i,e){const t=nS(e,this.size,2);i.uniform2fv(this.addr,t)}function Tgt(i,e){const t=nS(e,this.size,3);i.uniform3fv(this.addr,t)}function kgt(i,e){const t=nS(e,this.size,4);i.uniform4fv(this.addr,t)}function Mgt(i,e){const t=nS(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Dgt(i,e){const t=nS(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Agt(i,e){const t=nS(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Igt(i,e){i.uniform1iv(this.addr,e)}function Ngt(i,e){i.uniform2iv(this.addr,e)}function Rgt(i,e){i.uniform3iv(this.addr,e)}function Pgt(i,e){i.uniform4iv(this.addr,e)}function Ogt(i,e){i.uniform1uiv(this.addr,e)}function Fgt(i,e){i.uniform2uiv(this.addr,e)}function Bgt(i,e){i.uniform3uiv(this.addr,e)}function zgt(i,e){i.uniform4uiv(this.addr,e)}function Ugt(i,e,t){const n=this.cache,s=e.length,r=a5(t,s);uo(n,r)||(i.uniform1iv(this.addr,r),ho(n,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||hye,r[o])}function Vgt(i,e,t){const n=this.cache,s=e.length,r=a5(t,s);uo(n,r)||(i.uniform1iv(this.addr,r),ho(n,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||fye,r[o])}function Wgt(i,e,t){const n=this.cache,s=e.length,r=a5(t,s);uo(n,r)||(i.uniform1iv(this.addr,r),ho(n,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||gye,r[o])}function Hgt(i,e,t){const n=this.cache,s=e.length,r=a5(t,s);uo(n,r)||(i.uniform1iv(this.addr,r),ho(n,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||dye,r[o])}function $gt(i){switch(i){case 5126:return Egt;case 35664:return Lgt;case 35665:return Tgt;case 35666:return kgt;case 35674:return Mgt;case 35675:return Dgt;case 35676:return Agt;case 5124:case 35670:return Igt;case 35667:case 35671:return Ngt;case 35668:case 35672:return Rgt;case 35669:case 35673:return Pgt;case 5125:return Ogt;case 36294:return Fgt;case 36295:return Bgt;case 36296:return zgt;case 35678:case 36198:case 36298:case 36306:case 35682:return Ugt;case 35679:case 36299:case 36307:return Vgt;case 35680:case 36300:case 36308:case 36293:return Wgt;case 36289:case 36303:case 36311:case 36292:return Hgt}}class Ggt{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=xgt(t.type)}}class jgt{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=$gt(t.type)}}class Kgt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],n)}}}const L6=/(\w+)(\])?(\[|\.)?/g;function dae(i,e){i.seq.push(e),i.map[e.id]=e}function qgt(i,e,t){const n=i.name,s=n.length;for(L6.lastIndex=0;;){const r=L6.exec(n),o=L6.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){dae(t,c===void 0?new Ggt(a,i,e):new jgt(a,i,e));break}else{let h=t.map[a];h===void 0&&(h=new Kgt(a),dae(t,h)),t=h}}}class iN{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);qgt(r,o,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&n.push(o)}return n}}function fae(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Xgt=0;function Ygt(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function Zgt(i){switch(i){case kh:return["Linear","( value )"];case Gn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function gae(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+Ygt(i.getShaderSource(e),o)}else return s}function Qgt(i,e){const t=Zgt(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Jgt(i,e){let t;switch(e){case A1e:t="Linear";break;case I1e:t="Reinhard";break;case N1e:t="OptimizedCineon";break;case aX:t="ACESFilmic";break;case R1e:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ept(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(CE).join(`
`)}function tpt(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function npt(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),o=r.name;let a=1;r.type===i.FLOAT_MAT2&&(a=2),r.type===i.FLOAT_MAT3&&(a=3),r.type===i.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function CE(i){return i!==""}function pae(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function mae(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ipt=/^[ \t]*#include +<([\w\d./]+)>/gm;function e$(i){return i.replace(ipt,rpt)}const spt=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function rpt(i,e){let t=$n[e];if(t===void 0){const n=spt.get(e);if(n!==void 0)t=$n[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return e$(t)}const opt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _ae(i){return i.replace(opt,apt)}function apt(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function vae(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lpt(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===n5?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===_L?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===th&&(e="SHADOWMAP_TYPE_VSM"),e}function cpt(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Rm:case Pm:e="ENVMAP_TYPE_CUBE";break;case eS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function upt(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Pm:e="ENVMAP_MODE_REFRACTION";break}return e}function hpt(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Ck:e="ENVMAP_BLENDING_MULTIPLY";break;case M1e:e="ENVMAP_BLENDING_MIX";break;case D1e:e="ENVMAP_BLENDING_ADD";break}return e}function dpt(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function fpt(i,e,t,n){const s=i.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=lpt(t),c=cpt(t),u=upt(t),h=hpt(t),d=dpt(t),f=t.isWebGL2?"":ept(t),g=tpt(r),p=s.createProgram();let _,m,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(CE).join(`
`),_.length>0&&(_+=`
`),m=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(CE).join(`
`),m.length>0&&(m+=`
`)):(_=[vae(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(CE).join(`
`),m=[f,vae(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==yh?"#define TONE_MAPPING":"",t.toneMapping!==yh?$n.tonemapping_pars_fragment:"",t.toneMapping!==yh?Jgt("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$n.colorspace_pars_fragment,Qgt("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(CE).join(`
`)),o=e$(o),o=pae(o,t),o=mae(o,t),a=e$(a),a=pae(a,t),a=mae(a,t),o=_ae(o),a=_ae(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,m=["#define varying in",t.glslVersion===ZH?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ZH?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const y=v+_+o,C=v+m+a,S=fae(s,s.VERTEX_SHADER,y),x=fae(s,s.FRAGMENT_SHADER,C);if(s.attachShader(p,S),s.attachShader(p,x),t.index0AttributeName!==void 0?s.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(p,0,"position"),s.linkProgram(p),i.debug.checkShaderErrors){const T=s.getProgramInfoLog(p).trim(),D=s.getShaderInfoLog(S).trim(),I=s.getShaderInfoLog(x).trim();let N=!0,P=!0;if(s.getProgramParameter(p,s.LINK_STATUS)===!1)if(N=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,p,S,x);else{const O=gae(s,S,"vertex"),V=gae(s,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(p,s.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+O+`
`+V)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(D===""||I==="")&&(P=!1);P&&(this.diagnostics={runnable:N,programLog:T,vertexShader:{log:D,prefix:_},fragmentShader:{log:I,prefix:m}})}s.deleteShader(S),s.deleteShader(x);let E;this.getUniforms=function(){return E===void 0&&(E=new iN(s,p)),E};let L;return this.getAttributes=function(){return L===void 0&&(L=npt(s,p)),L},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(p),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Xgt++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=S,this.fragmentShader=x,this}let gpt=0;class ppt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new mpt(e),t.set(e,n)),n}}class mpt{constructor(e){this.id=gpt++,this.code=e,this.usedTimes=0}}function _pt(i,e,t,n,s,r,o){const a=new Y0,l=new ppt,c=[],u=s.isWebGL2,h=s.logarithmicDepthBuffer,d=s.vertexTextures;let f=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(T){return T===0?"uv":`uv${T}`}function _(T,D,I,N,P){const O=N.fog,V=P.geometry,z=T.isMeshStandardMaterial?N.environment:null,K=(T.isMeshStandardMaterial?t:e).get(T.envMap||z),H=K&&K.mapping===eS?K.image.height:null,U=g[T.type];T.precision!==null&&(f=s.getMaxPrecision(T.precision),f!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",f,"instead."));const j=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,W=j!==void 0?j.length:0;let X=0;V.morphAttributes.position!==void 0&&(X=1),V.morphAttributes.normal!==void 0&&(X=2),V.morphAttributes.color!==void 0&&(X=3);let ee,le,fe,be;if(U){const St=ah[U];ee=St.vertexShader,le=St.fragmentShader}else ee=T.vertexShader,le=T.fragmentShader,l.update(T),fe=l.getVertexShaderID(T),be=l.getFragmentShaderID(T);const ye=i.getRenderTarget(),xe=P.isInstancedMesh===!0,He=!!T.map,qe=!!T.matcap,ke=!!K,q=!!T.aoMap,Ee=!!T.lightMap,De=!!T.bumpMap,Ae=!!T.normalMap,Me=!!T.displacementMap,Je=!!T.emissiveMap,Pe=!!T.metalnessMap,Xe=!!T.roughnessMap,Re=T.anisotropy>0,Fe=T.clearcoat>0,wt=T.iridescence>0,te=T.sheen>0,Z=T.transmission>0,we=Re&&!!T.anisotropyMap,Ye=Fe&&!!T.clearcoatMap,je=Fe&&!!T.clearcoatNormalMap,Ge=Fe&&!!T.clearcoatRoughnessMap,ot=wt&&!!T.iridescenceMap,tt=wt&&!!T.iridescenceThicknessMap,Oe=te&&!!T.sheenColorMap,lt=te&&!!T.sheenRoughnessMap,xt=!!T.specularMap,ut=!!T.specularColorMap,nt=!!T.specularIntensityMap,ft=Z&&!!T.transmissionMap,At=Z&&!!T.thicknessMap,kt=!!T.gradientMap,he=!!T.alphaMap,at=T.alphaTest>0,Ue=!!T.alphaHash,gt=!!T.extensions,Ct=!!V.attributes.uv1,cn=!!V.attributes.uv2,wn=!!V.attributes.uv3;return{isWebGL2:u,shaderID:U,shaderType:T.type,shaderName:T.name,vertexShader:ee,fragmentShader:le,defines:T.defines,customVertexShaderID:fe,customFragmentShaderID:be,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:f,instancing:xe,instancingColor:xe&&P.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:ye===null?i.outputColorSpace:ye.isXRRenderTarget===!0?ye.texture.colorSpace:kh,map:He,matcap:qe,envMap:ke,envMapMode:ke&&K.mapping,envMapCubeUVHeight:H,aoMap:q,lightMap:Ee,bumpMap:De,normalMap:Ae,displacementMap:d&&Me,emissiveMap:Je,normalMapObjectSpace:Ae&&T.normalMapType===q1e,normalMapTangentSpace:Ae&&T.normalMapType===Gm,metalnessMap:Pe,roughnessMap:Xe,anisotropy:Re,anisotropyMap:we,clearcoat:Fe,clearcoatMap:Ye,clearcoatNormalMap:je,clearcoatRoughnessMap:Ge,iridescence:wt,iridescenceMap:ot,iridescenceThicknessMap:tt,sheen:te,sheenColorMap:Oe,sheenRoughnessMap:lt,specularMap:xt,specularColorMap:ut,specularIntensityMap:nt,transmission:Z,transmissionMap:ft,thicknessMap:At,gradientMap:kt,opaque:T.transparent===!1&&T.blending===q0,alphaMap:he,alphaTest:at,alphaHash:Ue,combine:T.combine,mapUv:He&&p(T.map.channel),aoMapUv:q&&p(T.aoMap.channel),lightMapUv:Ee&&p(T.lightMap.channel),bumpMapUv:De&&p(T.bumpMap.channel),normalMapUv:Ae&&p(T.normalMap.channel),displacementMapUv:Me&&p(T.displacementMap.channel),emissiveMapUv:Je&&p(T.emissiveMap.channel),metalnessMapUv:Pe&&p(T.metalnessMap.channel),roughnessMapUv:Xe&&p(T.roughnessMap.channel),anisotropyMapUv:we&&p(T.anisotropyMap.channel),clearcoatMapUv:Ye&&p(T.clearcoatMap.channel),clearcoatNormalMapUv:je&&p(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ge&&p(T.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&p(T.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&p(T.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&p(T.sheenColorMap.channel),sheenRoughnessMapUv:lt&&p(T.sheenRoughnessMap.channel),specularMapUv:xt&&p(T.specularMap.channel),specularColorMapUv:ut&&p(T.specularColorMap.channel),specularIntensityMapUv:nt&&p(T.specularIntensityMap.channel),transmissionMapUv:ft&&p(T.transmissionMap.channel),thicknessMapUv:At&&p(T.thicknessMap.channel),alphaMapUv:he&&p(T.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(Ae||Re),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,vertexUv1s:Ct,vertexUv2s:cn,vertexUv3s:wn,pointsUvs:P.isPoints===!0&&!!V.attributes.uv&&(He||he),fog:!!O,useFog:T.fog===!0,fogExp2:O&&O.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:P.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:X,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:i.shadowMap.enabled&&I.length>0,shadowMapType:i.shadowMap.type,toneMapping:T.toneMapped?i.toneMapping:yh,useLegacyLights:i.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Ks,flipSided:T.side===La,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:gt&&T.extensions.derivatives===!0,extensionFragDepth:gt&&T.extensions.fragDepth===!0,extensionDrawBuffers:gt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:gt&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function m(T){const D=[];if(T.shaderID?D.push(T.shaderID):(D.push(T.customVertexShaderID),D.push(T.customFragmentShaderID)),T.defines!==void 0)for(const I in T.defines)D.push(I),D.push(T.defines[I]);return T.isRawShaderMaterial===!1&&(v(D,T),y(D,T),D.push(i.outputColorSpace)),D.push(T.customProgramCacheKey),D.join()}function v(T,D){T.push(D.precision),T.push(D.outputColorSpace),T.push(D.envMapMode),T.push(D.envMapCubeUVHeight),T.push(D.mapUv),T.push(D.alphaMapUv),T.push(D.lightMapUv),T.push(D.aoMapUv),T.push(D.bumpMapUv),T.push(D.normalMapUv),T.push(D.displacementMapUv),T.push(D.emissiveMapUv),T.push(D.metalnessMapUv),T.push(D.roughnessMapUv),T.push(D.anisotropyMapUv),T.push(D.clearcoatMapUv),T.push(D.clearcoatNormalMapUv),T.push(D.clearcoatRoughnessMapUv),T.push(D.iridescenceMapUv),T.push(D.iridescenceThicknessMapUv),T.push(D.sheenColorMapUv),T.push(D.sheenRoughnessMapUv),T.push(D.specularMapUv),T.push(D.specularColorMapUv),T.push(D.specularIntensityMapUv),T.push(D.transmissionMapUv),T.push(D.thicknessMapUv),T.push(D.combine),T.push(D.fogExp2),T.push(D.sizeAttenuation),T.push(D.morphTargetsCount),T.push(D.morphAttributeCount),T.push(D.numDirLights),T.push(D.numPointLights),T.push(D.numSpotLights),T.push(D.numSpotLightMaps),T.push(D.numHemiLights),T.push(D.numRectAreaLights),T.push(D.numDirLightShadows),T.push(D.numPointLightShadows),T.push(D.numSpotLightShadows),T.push(D.numSpotLightShadowsWithMaps),T.push(D.shadowMapType),T.push(D.toneMapping),T.push(D.numClippingPlanes),T.push(D.numClipIntersection),T.push(D.depthPacking)}function y(T,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),T.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),T.push(a.mask)}function C(T){const D=g[T.type];let I;if(D){const N=ah[D];I=xX.clone(N.uniforms)}else I=T.uniforms;return I}function S(T,D){let I;for(let N=0,P=c.length;N<P;N++){const O=c[N];if(O.cacheKey===D){I=O,++I.usedTimes;break}}return I===void 0&&(I=new fpt(i,D,T,r),c.push(I)),I}function x(T){if(--T.usedTimes===0){const D=c.indexOf(T);c[D]=c[c.length-1],c.pop(),T.destroy()}}function E(T){l.remove(T)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:m,getUniforms:C,acquireProgram:S,releaseProgram:x,releaseShaderCache:E,programs:c,dispose:L}}function vpt(){let i=new WeakMap;function e(r){let o=i.get(r);return o===void 0&&(o={},i.set(r,o)),o}function t(r){i.delete(r)}function n(r,o,a){i.get(r)[o]=a}function s(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:s}}function ypt(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function yae(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function bae(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function o(h,d,f,g,p,_){let m=i[e];return m===void 0?(m={id:h.id,object:h,geometry:d,material:f,groupOrder:g,renderOrder:h.renderOrder,z:p,group:_},i[e]=m):(m.id=h.id,m.object=h,m.geometry=d,m.material=f,m.groupOrder=g,m.renderOrder=h.renderOrder,m.z=p,m.group=_),e++,m}function a(h,d,f,g,p,_){const m=o(h,d,f,g,p,_);f.transmission>0?n.push(m):f.transparent===!0?s.push(m):t.push(m)}function l(h,d,f,g,p,_){const m=o(h,d,f,g,p,_);f.transmission>0?n.unshift(m):f.transparent===!0?s.unshift(m):t.unshift(m)}function c(h,d){t.length>1&&t.sort(h||ypt),n.length>1&&n.sort(d||yae),s.length>1&&s.sort(d||yae)}function u(){for(let h=e,d=i.length;h<d;h++){const f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function bpt(){let i=new WeakMap;function e(n,s){const r=i.get(n);let o;return r===void 0?(o=new bae,i.set(n,[o])):s>=r.length?(o=new bae,r.push(o)):o=r[s],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function wpt(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new se,color:new Pt};break;case"SpotLight":t={position:new se,direction:new se,color:new Pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new se,color:new Pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new se,skyColor:new Pt,groundColor:new Pt};break;case"RectAreaLight":t={color:new Pt,position:new se,halfWidth:new se,halfHeight:new se};break}return i[e.id]=t,t}}}function Cpt(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let Spt=0;function xpt(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Ept(i,e){const t=new wpt,n=Cpt(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)s.probe.push(new se);const r=new se,o=new Rn,a=new Rn;function l(u,h){let d=0,f=0,g=0;for(let I=0;I<9;I++)s.probe[I].set(0,0,0);let p=0,_=0,m=0,v=0,y=0,C=0,S=0,x=0,E=0,L=0;u.sort(xpt);const T=h===!0?Math.PI:1;for(let I=0,N=u.length;I<N;I++){const P=u[I],O=P.color,V=P.intensity,z=P.distance,K=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=O.r*V*T,f+=O.g*V*T,g+=O.b*V*T;else if(P.isLightProbe)for(let H=0;H<9;H++)s.probe[H].addScaledVector(P.sh.coefficients[H],V);else if(P.isDirectionalLight){const H=t.get(P);if(H.color.copy(P.color).multiplyScalar(P.intensity*T),P.castShadow){const U=P.shadow,j=n.get(P);j.shadowBias=U.bias,j.shadowNormalBias=U.normalBias,j.shadowRadius=U.radius,j.shadowMapSize=U.mapSize,s.directionalShadow[p]=j,s.directionalShadowMap[p]=K,s.directionalShadowMatrix[p]=P.shadow.matrix,C++}s.directional[p]=H,p++}else if(P.isSpotLight){const H=t.get(P);H.position.setFromMatrixPosition(P.matrixWorld),H.color.copy(O).multiplyScalar(V*T),H.distance=z,H.coneCos=Math.cos(P.angle),H.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),H.decay=P.decay,s.spot[m]=H;const U=P.shadow;if(P.map&&(s.spotLightMap[E]=P.map,E++,U.updateMatrices(P),P.castShadow&&L++),s.spotLightMatrix[m]=U.matrix,P.castShadow){const j=n.get(P);j.shadowBias=U.bias,j.shadowNormalBias=U.normalBias,j.shadowRadius=U.radius,j.shadowMapSize=U.mapSize,s.spotShadow[m]=j,s.spotShadowMap[m]=K,x++}m++}else if(P.isRectAreaLight){const H=t.get(P);H.color.copy(O).multiplyScalar(V),H.halfWidth.set(P.width*.5,0,0),H.halfHeight.set(0,P.height*.5,0),s.rectArea[v]=H,v++}else if(P.isPointLight){const H=t.get(P);if(H.color.copy(P.color).multiplyScalar(P.intensity*T),H.distance=P.distance,H.decay=P.decay,P.castShadow){const U=P.shadow,j=n.get(P);j.shadowBias=U.bias,j.shadowNormalBias=U.normalBias,j.shadowRadius=U.radius,j.shadowMapSize=U.mapSize,j.shadowCameraNear=U.camera.near,j.shadowCameraFar=U.camera.far,s.pointShadow[_]=j,s.pointShadowMap[_]=K,s.pointShadowMatrix[_]=P.shadow.matrix,S++}s.point[_]=H,_++}else if(P.isHemisphereLight){const H=t.get(P);H.skyColor.copy(P.color).multiplyScalar(V*T),H.groundColor.copy(P.groundColor).multiplyScalar(V*T),s.hemi[y]=H,y++}}v>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Ot.LTC_FLOAT_1,s.rectAreaLTC2=Ot.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Ot.LTC_HALF_1,s.rectAreaLTC2=Ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=d,s.ambient[1]=f,s.ambient[2]=g;const D=s.hash;(D.directionalLength!==p||D.pointLength!==_||D.spotLength!==m||D.rectAreaLength!==v||D.hemiLength!==y||D.numDirectionalShadows!==C||D.numPointShadows!==S||D.numSpotShadows!==x||D.numSpotMaps!==E)&&(s.directional.length=p,s.spot.length=m,s.rectArea.length=v,s.point.length=_,s.hemi.length=y,s.directionalShadow.length=C,s.directionalShadowMap.length=C,s.pointShadow.length=S,s.pointShadowMap.length=S,s.spotShadow.length=x,s.spotShadowMap.length=x,s.directionalShadowMatrix.length=C,s.pointShadowMatrix.length=S,s.spotLightMatrix.length=x+E-L,s.spotLightMap.length=E,s.numSpotLightShadowsWithMaps=L,D.directionalLength=p,D.pointLength=_,D.spotLength=m,D.rectAreaLength=v,D.hemiLength=y,D.numDirectionalShadows=C,D.numPointShadows=S,D.numSpotShadows=x,D.numSpotMaps=E,s.version=Spt++)}function c(u,h){let d=0,f=0,g=0,p=0,_=0;const m=h.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const C=u[v];if(C.isDirectionalLight){const S=s.directional[d];S.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(m),d++}else if(C.isSpotLight){const S=s.spot[g];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(m),S.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(m),g++}else if(C.isRectAreaLight){const S=s.rectArea[p];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(m),a.identity(),o.copy(C.matrixWorld),o.premultiply(m),a.extractRotation(o),S.halfWidth.set(C.width*.5,0,0),S.halfHeight.set(0,C.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),p++}else if(C.isPointLight){const S=s.point[f];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(m),f++}else if(C.isHemisphereLight){const S=s.hemi[_];S.direction.setFromMatrixPosition(C.matrixWorld),S.direction.transformDirection(m),_++}}}return{setup:l,setupView:c,state:s}}function wae(i,e){const t=new Ept(i,e),n=[],s=[];function r(){n.length=0,s.length=0}function o(h){n.push(h)}function a(h){s.push(h)}function l(h){t.setup(n,h)}function c(h){t.setupView(n,h)}return{init:r,state:{lightsArray:n,shadowsArray:s,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Lpt(i,e){let t=new WeakMap;function n(r,o=0){const a=t.get(r);let l;return a===void 0?(l=new wae(i,e),t.set(r,[l])):o>=a.length?(l=new wae(i,e),a.push(l)):l=a[o],l}function s(){t=new WeakMap}return{get:n,dispose:s}}class l5 extends ta{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=K1e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class c5 extends ta{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Tpt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kpt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mpt(i,e,t){let n=new Ek;const s=new rt,r=new rt,o=new Fi,a=new l5({depthPacking:_X}),l=new c5,c={},u=t.maxTextureSize,h={[Gd]:La,[La]:Gd,[Ks]:Ks},d=new jd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:Tpt,fragmentShader:kpt}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new Kn;g.setAttribute("position",new is(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Zs(g,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=n5;let m=this.type;this.render=function(S,x,E){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||S.length===0)return;const L=i.getRenderTarget(),T=i.getActiveCubeFace(),D=i.getActiveMipmapLevel(),I=i.state;I.setBlending(xg),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const N=m!==th&&this.type===th,P=m===th&&this.type!==th;for(let O=0,V=S.length;O<V;O++){const z=S[O],K=z.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;s.copy(K.mapSize);const H=K.getFrameExtents();if(s.multiply(H),r.copy(K.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/H.x),s.x=r.x*H.x,K.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/H.y),s.y=r.y*H.y,K.mapSize.y=r.y)),K.map===null||N===!0||P===!0){const j=this.type!==th?{minFilter:kr,magFilter:kr}:{};K.map!==null&&K.map.dispose(),K.map=new Mh(s.x,s.y,j),K.map.texture.name=z.name+".shadowMap",K.camera.updateProjectionMatrix()}i.setRenderTarget(K.map),i.clear();const U=K.getViewportCount();for(let j=0;j<U;j++){const W=K.getViewport(j);o.set(r.x*W.x,r.y*W.y,r.x*W.z,r.y*W.w),I.viewport(o),K.updateMatrices(z,j),n=K.getFrustum(),C(x,E,K.camera,z,this.type)}K.isPointLightShadow!==!0&&this.type===th&&v(K,E),K.needsUpdate=!1}m=this.type,_.needsUpdate=!1,i.setRenderTarget(L,T,D)};function v(S,x){const E=e.update(p);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Mh(s.x,s.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,i.setRenderTarget(S.mapPass),i.clear(),i.renderBufferDirect(x,null,E,d,p,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,i.setRenderTarget(S.map),i.clear(),i.renderBufferDirect(x,null,E,f,p,null)}function y(S,x,E,L){let T=null;const D=E.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(D!==void 0)T=D;else if(T=E.isPointLight===!0?l:a,i.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0){const I=T.uuid,N=x.uuid;let P=c[I];P===void 0&&(P={},c[I]=P);let O=P[N];O===void 0&&(O=T.clone(),P[N]=O),T=O}if(T.visible=x.visible,T.wireframe=x.wireframe,L===th?T.side=x.shadowSide!==null?x.shadowSide:x.side:T.side=x.shadowSide!==null?x.shadowSide:h[x.side],T.alphaMap=x.alphaMap,T.alphaTest=x.alphaTest,T.map=x.map,T.clipShadows=x.clipShadows,T.clippingPlanes=x.clippingPlanes,T.clipIntersection=x.clipIntersection,T.displacementMap=x.displacementMap,T.displacementScale=x.displacementScale,T.displacementBias=x.displacementBias,T.wireframeLinewidth=x.wireframeLinewidth,T.linewidth=x.linewidth,E.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const I=i.properties.get(T);I.light=E}return T}function C(S,x,E,L,T){if(S.visible===!1)return;if(S.layers.test(x.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&T===th)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,S.matrixWorld);const N=e.update(S),P=S.material;if(Array.isArray(P)){const O=N.groups;for(let V=0,z=O.length;V<z;V++){const K=O[V],H=P[K.materialIndex];if(H&&H.visible){const U=y(S,H,L,T);i.renderBufferDirect(E,null,N,U,S,K)}}}else if(P.visible){const O=y(S,P,L,T);i.renderBufferDirect(E,null,N,O,S,null)}}const I=S.children;for(let N=0,P=I.length;N<P;N++)C(I[N],x,E,L,T)}}function Dpt(i,e,t){const n=t.isWebGL2;function s(){let he=!1;const at=new Fi;let Ue=null;const gt=new Fi(0,0,0,0);return{setMask:function(Ct){Ue!==Ct&&!he&&(i.colorMask(Ct,Ct,Ct,Ct),Ue=Ct)},setLocked:function(Ct){he=Ct},setClear:function(Ct,cn,wn,qn,St){St===!0&&(Ct*=qn,cn*=qn,wn*=qn),at.set(Ct,cn,wn,qn),gt.equals(at)===!1&&(i.clearColor(Ct,cn,wn,qn),gt.copy(at))},reset:function(){he=!1,Ue=null,gt.set(-1,0,0,0)}}}function r(){let he=!1,at=null,Ue=null,gt=null;return{setTest:function(Ct){Ct?ye(i.DEPTH_TEST):xe(i.DEPTH_TEST)},setMask:function(Ct){at!==Ct&&!he&&(i.depthMask(Ct),at=Ct)},setFunc:function(Ct){if(Ue!==Ct){switch(Ct){case C1e:i.depthFunc(i.NEVER);break;case S1e:i.depthFunc(i.ALWAYS);break;case x1e:i.depthFunc(i.LESS);break;case BP:i.depthFunc(i.LEQUAL);break;case E1e:i.depthFunc(i.EQUAL);break;case L1e:i.depthFunc(i.GEQUAL);break;case T1e:i.depthFunc(i.GREATER);break;case k1e:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ue=Ct}},setLocked:function(Ct){he=Ct},setClear:function(Ct){gt!==Ct&&(i.clearDepth(Ct),gt=Ct)},reset:function(){he=!1,at=null,Ue=null,gt=null}}}function o(){let he=!1,at=null,Ue=null,gt=null,Ct=null,cn=null,wn=null,qn=null,St=null;return{setTest:function(Q){he||(Q?ye(i.STENCIL_TEST):xe(i.STENCIL_TEST))},setMask:function(Q){at!==Q&&!he&&(i.stencilMask(Q),at=Q)},setFunc:function(Q,J,ne){(Ue!==Q||gt!==J||Ct!==ne)&&(i.stencilFunc(Q,J,ne),Ue=Q,gt=J,Ct=ne)},setOp:function(Q,J,ne){(cn!==Q||wn!==J||qn!==ne)&&(i.stencilOp(Q,J,ne),cn=Q,wn=J,qn=ne)},setLocked:function(Q){he=Q},setClear:function(Q){St!==Q&&(i.clearStencil(Q),St=Q)},reset:function(){he=!1,at=null,Ue=null,gt=null,Ct=null,cn=null,wn=null,qn=null,St=null}}}const a=new s,l=new r,c=new o,u=new WeakMap,h=new WeakMap;let d={},f={},g=new WeakMap,p=[],_=null,m=!1,v=null,y=null,C=null,S=null,x=null,E=null,L=null,T=!1,D=null,I=null,N=null,P=null,O=null;const V=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,K=0;const H=i.getParameter(i.VERSION);H.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(H)[1]),z=K>=1):H.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),z=K>=2);let U=null,j={};const W=i.getParameter(i.SCISSOR_BOX),X=i.getParameter(i.VIEWPORT),ee=new Fi().fromArray(W),le=new Fi().fromArray(X);function fe(he,at,Ue,gt){const Ct=new Uint8Array(4),cn=i.createTexture();i.bindTexture(he,cn),i.texParameteri(he,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(he,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let wn=0;wn<Ue;wn++)n&&(he===i.TEXTURE_3D||he===i.TEXTURE_2D_ARRAY)?i.texImage3D(at,0,i.RGBA,1,1,gt,0,i.RGBA,i.UNSIGNED_BYTE,Ct):i.texImage2D(at+wn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ct);return cn}const be={};be[i.TEXTURE_2D]=fe(i.TEXTURE_2D,i.TEXTURE_2D,1),be[i.TEXTURE_CUBE_MAP]=fe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(be[i.TEXTURE_2D_ARRAY]=fe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),be[i.TEXTURE_3D]=fe(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ye(i.DEPTH_TEST),l.setFunc(BP),Me(!1),Je(CH),ye(i.CULL_FACE),De(xg);function ye(he){d[he]!==!0&&(i.enable(he),d[he]=!0)}function xe(he){d[he]!==!1&&(i.disable(he),d[he]=!1)}function He(he,at){return f[he]!==at?(i.bindFramebuffer(he,at),f[he]=at,n&&(he===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=at),he===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=at)),!0):!1}function qe(he,at){let Ue=p,gt=!1;if(he)if(Ue=g.get(at),Ue===void 0&&(Ue=[],g.set(at,Ue)),he.isWebGLMultipleRenderTargets){const Ct=he.texture;if(Ue.length!==Ct.length||Ue[0]!==i.COLOR_ATTACHMENT0){for(let cn=0,wn=Ct.length;cn<wn;cn++)Ue[cn]=i.COLOR_ATTACHMENT0+cn;Ue.length=Ct.length,gt=!0}}else Ue[0]!==i.COLOR_ATTACHMENT0&&(Ue[0]=i.COLOR_ATTACHMENT0,gt=!0);else Ue[0]!==i.BACK&&(Ue[0]=i.BACK,gt=!0);gt&&(t.isWebGL2?i.drawBuffers(Ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function ke(he){return _!==he?(i.useProgram(he),_=he,!0):!1}const q={[f0]:i.FUNC_ADD,[h1e]:i.FUNC_SUBTRACT,[d1e]:i.FUNC_REVERSE_SUBTRACT};if(n)q[LH]=i.MIN,q[TH]=i.MAX;else{const he=e.get("EXT_blend_minmax");he!==null&&(q[LH]=he.MIN_EXT,q[TH]=he.MAX_EXT)}const Ee={[f1e]:i.ZERO,[g1e]:i.ONE,[p1e]:i.SRC_COLOR,[rX]:i.SRC_ALPHA,[w1e]:i.SRC_ALPHA_SATURATE,[y1e]:i.DST_COLOR,[_1e]:i.DST_ALPHA,[m1e]:i.ONE_MINUS_SRC_COLOR,[oX]:i.ONE_MINUS_SRC_ALPHA,[b1e]:i.ONE_MINUS_DST_COLOR,[v1e]:i.ONE_MINUS_DST_ALPHA};function De(he,at,Ue,gt,Ct,cn,wn,qn){if(he===xg){m===!0&&(xe(i.BLEND),m=!1);return}if(m===!1&&(ye(i.BLEND),m=!0),he!==u1e){if(he!==v||qn!==T){if((y!==f0||x!==f0)&&(i.blendEquation(i.FUNC_ADD),y=f0,x=f0),qn)switch(he){case q0:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case SH:i.blendFunc(i.ONE,i.ONE);break;case xH:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case EH:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case q0:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case SH:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case xH:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case EH:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}C=null,S=null,E=null,L=null,v=he,T=qn}return}Ct=Ct||at,cn=cn||Ue,wn=wn||gt,(at!==y||Ct!==x)&&(i.blendEquationSeparate(q[at],q[Ct]),y=at,x=Ct),(Ue!==C||gt!==S||cn!==E||wn!==L)&&(i.blendFuncSeparate(Ee[Ue],Ee[gt],Ee[cn],Ee[wn]),C=Ue,S=gt,E=cn,L=wn),v=he,T=!1}function Ae(he,at){he.side===Ks?xe(i.CULL_FACE):ye(i.CULL_FACE);let Ue=he.side===La;at&&(Ue=!Ue),Me(Ue),he.blending===q0&&he.transparent===!1?De(xg):De(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.premultipliedAlpha),l.setFunc(he.depthFunc),l.setTest(he.depthTest),l.setMask(he.depthWrite),a.setMask(he.colorWrite);const gt=he.stencilWrite;c.setTest(gt),gt&&(c.setMask(he.stencilWriteMask),c.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),c.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),Xe(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?ye(i.SAMPLE_ALPHA_TO_COVERAGE):xe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Me(he){D!==he&&(he?i.frontFace(i.CW):i.frontFace(i.CCW),D=he)}function Je(he){he!==a1e?(ye(i.CULL_FACE),he!==I&&(he===CH?i.cullFace(i.BACK):he===l1e?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):xe(i.CULL_FACE),I=he}function Pe(he){he!==N&&(z&&i.lineWidth(he),N=he)}function Xe(he,at,Ue){he?(ye(i.POLYGON_OFFSET_FILL),(P!==at||O!==Ue)&&(i.polygonOffset(at,Ue),P=at,O=Ue)):xe(i.POLYGON_OFFSET_FILL)}function Re(he){he?ye(i.SCISSOR_TEST):xe(i.SCISSOR_TEST)}function Fe(he){he===void 0&&(he=i.TEXTURE0+V-1),U!==he&&(i.activeTexture(he),U=he)}function wt(he,at,Ue){Ue===void 0&&(U===null?Ue=i.TEXTURE0+V-1:Ue=U);let gt=j[Ue];gt===void 0&&(gt={type:void 0,texture:void 0},j[Ue]=gt),(gt.type!==he||gt.texture!==at)&&(U!==Ue&&(i.activeTexture(Ue),U=Ue),i.bindTexture(he,at||be[he]),gt.type=he,gt.texture=at)}function te(){const he=j[U];he!==void 0&&he.type!==void 0&&(i.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function Z(){try{i.compressedTexImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function we(){try{i.compressedTexImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ye(){try{i.texSubImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function je(){try{i.texSubImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ge(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ot(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function tt(){try{i.texStorage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Oe(){try{i.texStorage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function lt(){try{i.texImage2D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function xt(){try{i.texImage3D.apply(i,arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ut(he){ee.equals(he)===!1&&(i.scissor(he.x,he.y,he.z,he.w),ee.copy(he))}function nt(he){le.equals(he)===!1&&(i.viewport(he.x,he.y,he.z,he.w),le.copy(he))}function ft(he,at){let Ue=h.get(at);Ue===void 0&&(Ue=new WeakMap,h.set(at,Ue));let gt=Ue.get(he);gt===void 0&&(gt=i.getUniformBlockIndex(at,he.name),Ue.set(he,gt))}function At(he,at){const gt=h.get(at).get(he);u.get(at)!==gt&&(i.uniformBlockBinding(at,gt,he.__bindingPointIndex),u.set(at,gt))}function kt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},U=null,j={},f={},g=new WeakMap,p=[],_=null,m=!1,v=null,y=null,C=null,S=null,x=null,E=null,L=null,T=!1,D=null,I=null,N=null,P=null,O=null,ee.set(0,0,i.canvas.width,i.canvas.height),le.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ye,disable:xe,bindFramebuffer:He,drawBuffers:qe,useProgram:ke,setBlending:De,setMaterial:Ae,setFlipSided:Me,setCullFace:Je,setLineWidth:Pe,setPolygonOffset:Xe,setScissorTest:Re,activeTexture:Fe,bindTexture:wt,unbindTexture:te,compressedTexImage2D:Z,compressedTexImage3D:we,texImage2D:lt,texImage3D:xt,updateUBOMapping:ft,uniformBlockBinding:At,texStorage2D:tt,texStorage3D:Oe,texSubImage2D:Ye,texSubImage3D:je,compressedTexSubImage2D:Ge,compressedTexSubImage3D:ot,scissor:ut,viewport:nt,reset:kt}}function Apt(i,e,t,n,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,u=s.maxTextureSize,h=s.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let p;const _=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(te,Z){return m?new OffscreenCanvas(te,Z):dT("canvas")}function y(te,Z,we,Ye){let je=1;if((te.width>Ye||te.height>Ye)&&(je=Ye/Math.max(te.width,te.height)),je<1||Z===!0)if(typeof HTMLImageElement<"u"&&te instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&te instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&te instanceof ImageBitmap){const Ge=Z?VP:Math.floor,ot=Ge(je*te.width),tt=Ge(je*te.height);p===void 0&&(p=v(ot,tt));const Oe=we?v(ot,tt):p;return Oe.width=ot,Oe.height=tt,Oe.getContext("2d").drawImage(te,0,0,ot,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+te.width+"x"+te.height+") to ("+ot+"x"+tt+")."),Oe}else return"data"in te&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+te.width+"x"+te.height+")."),te;return te}function C(te){return QH(te.width)&&QH(te.height)}function S(te){return a?!1:te.wrapS!==Ca||te.wrapT!==Ca||te.minFilter!==kr&&te.minFilter!==Fs}function x(te,Z){return te.generateMipmaps&&Z&&te.minFilter!==kr&&te.minFilter!==Fs}function E(te){i.generateMipmap(te)}function L(te,Z,we,Ye,je=!1){if(a===!1)return Z;if(te!==null){if(i[te]!==void 0)return i[te];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+te+"'")}let Ge=Z;return Z===i.RED&&(we===i.FLOAT&&(Ge=i.R32F),we===i.HALF_FLOAT&&(Ge=i.R16F),we===i.UNSIGNED_BYTE&&(Ge=i.R8)),Z===i.RG&&(we===i.FLOAT&&(Ge=i.RG32F),we===i.HALF_FLOAT&&(Ge=i.RG16F),we===i.UNSIGNED_BYTE&&(Ge=i.RG8)),Z===i.RGBA&&(we===i.FLOAT&&(Ge=i.RGBA32F),we===i.HALF_FLOAT&&(Ge=i.RGBA16F),we===i.UNSIGNED_BYTE&&(Ge=Ye===Gn&&je===!1?i.SRGB8_ALPHA8:i.RGBA8),we===i.UNSIGNED_SHORT_4_4_4_4&&(Ge=i.RGBA4),we===i.UNSIGNED_SHORT_5_5_5_1&&(Ge=i.RGB5_A1)),(Ge===i.R16F||Ge===i.R32F||Ge===i.RG16F||Ge===i.RG32F||Ge===i.RGBA16F||Ge===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ge}function T(te,Z,we){return x(te,we)===!0||te.isFramebufferTexture&&te.minFilter!==kr&&te.minFilter!==Fs?Math.log2(Math.max(Z.width,Z.height))+1:te.mipmaps!==void 0&&te.mipmaps.length>0?te.mipmaps.length:te.isCompressedTexture&&Array.isArray(te.image)?Z.mipmaps.length:1}function D(te){return te===kr||te===zP||te===vL?i.NEAREST:i.LINEAR}function I(te){const Z=te.target;Z.removeEventListener("dispose",I),P(Z),Z.isVideoTexture&&g.delete(Z)}function N(te){const Z=te.target;Z.removeEventListener("dispose",N),V(Z)}function P(te){const Z=n.get(te);if(Z.__webglInit===void 0)return;const we=te.source,Ye=_.get(we);if(Ye){const je=Ye[Z.__cacheKey];je.usedTimes--,je.usedTimes===0&&O(te),Object.keys(Ye).length===0&&_.delete(we)}n.remove(te)}function O(te){const Z=n.get(te);i.deleteTexture(Z.__webglTexture);const we=te.source,Ye=_.get(we);delete Ye[Z.__cacheKey],o.memory.textures--}function V(te){const Z=te.texture,we=n.get(te),Ye=n.get(Z);if(Ye.__webglTexture!==void 0&&(i.deleteTexture(Ye.__webglTexture),o.memory.textures--),te.depthTexture&&te.depthTexture.dispose(),te.isWebGLCubeRenderTarget)for(let je=0;je<6;je++)i.deleteFramebuffer(we.__webglFramebuffer[je]),we.__webglDepthbuffer&&i.deleteRenderbuffer(we.__webglDepthbuffer[je]);else{if(i.deleteFramebuffer(we.__webglFramebuffer),we.__webglDepthbuffer&&i.deleteRenderbuffer(we.__webglDepthbuffer),we.__webglMultisampledFramebuffer&&i.deleteFramebuffer(we.__webglMultisampledFramebuffer),we.__webglColorRenderbuffer)for(let je=0;je<we.__webglColorRenderbuffer.length;je++)we.__webglColorRenderbuffer[je]&&i.deleteRenderbuffer(we.__webglColorRenderbuffer[je]);we.__webglDepthRenderbuffer&&i.deleteRenderbuffer(we.__webglDepthRenderbuffer)}if(te.isWebGLMultipleRenderTargets)for(let je=0,Ge=Z.length;je<Ge;je++){const ot=n.get(Z[je]);ot.__webglTexture&&(i.deleteTexture(ot.__webglTexture),o.memory.textures--),n.remove(Z[je])}n.remove(Z),n.remove(te)}let z=0;function K(){z=0}function H(){const te=z;return te>=l&&console.warn("THREE.WebGLTextures: Trying to use "+te+" texture units while this GPU supports only "+l),z+=1,te}function U(te){const Z=[];return Z.push(te.wrapS),Z.push(te.wrapT),Z.push(te.wrapR||0),Z.push(te.magFilter),Z.push(te.minFilter),Z.push(te.anisotropy),Z.push(te.internalFormat),Z.push(te.format),Z.push(te.type),Z.push(te.generateMipmaps),Z.push(te.premultiplyAlpha),Z.push(te.flipY),Z.push(te.unpackAlignment),Z.push(te.colorSpace),Z.join()}function j(te,Z){const we=n.get(te);if(te.isVideoTexture&&Fe(te),te.isRenderTargetTexture===!1&&te.version>0&&we.__version!==te.version){const Ye=te.image;if(Ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{He(we,te,Z);return}}t.bindTexture(i.TEXTURE_2D,we.__webglTexture,i.TEXTURE0+Z)}function W(te,Z){const we=n.get(te);if(te.version>0&&we.__version!==te.version){He(we,te,Z);return}t.bindTexture(i.TEXTURE_2D_ARRAY,we.__webglTexture,i.TEXTURE0+Z)}function X(te,Z){const we=n.get(te);if(te.version>0&&we.__version!==te.version){He(we,te,Z);return}t.bindTexture(i.TEXTURE_3D,we.__webglTexture,i.TEXTURE0+Z)}function ee(te,Z){const we=n.get(te);if(te.version>0&&we.__version!==te.version){qe(we,te,Z);return}t.bindTexture(i.TEXTURE_CUBE_MAP,we.__webglTexture,i.TEXTURE0+Z)}const le={[rT]:i.REPEAT,[Ca]:i.CLAMP_TO_EDGE,[oT]:i.MIRRORED_REPEAT},fe={[kr]:i.NEAREST,[zP]:i.NEAREST_MIPMAP_NEAREST,[vL]:i.NEAREST_MIPMAP_LINEAR,[Fs]:i.LINEAR,[lX]:i.LINEAR_MIPMAP_NEAREST,[Om]:i.LINEAR_MIPMAP_LINEAR},be={[Y1e]:i.NEVER,[iye]:i.ALWAYS,[Z1e]:i.LESS,[J1e]:i.LEQUAL,[Q1e]:i.EQUAL,[nye]:i.GEQUAL,[eye]:i.GREATER,[tye]:i.NOTEQUAL};function ye(te,Z,we){if(we?(i.texParameteri(te,i.TEXTURE_WRAP_S,le[Z.wrapS]),i.texParameteri(te,i.TEXTURE_WRAP_T,le[Z.wrapT]),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,le[Z.wrapR]),i.texParameteri(te,i.TEXTURE_MAG_FILTER,fe[Z.magFilter]),i.texParameteri(te,i.TEXTURE_MIN_FILTER,fe[Z.minFilter])):(i.texParameteri(te,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(te,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY)&&i.texParameteri(te,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(Z.wrapS!==Ca||Z.wrapT!==Ca)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(te,i.TEXTURE_MAG_FILTER,D(Z.magFilter)),i.texParameteri(te,i.TEXTURE_MIN_FILTER,D(Z.minFilter)),Z.minFilter!==kr&&Z.minFilter!==Fs&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Z.compareFunction&&(i.texParameteri(te,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(te,i.TEXTURE_COMPARE_FUNC,be[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ye=e.get("EXT_texture_filter_anisotropic");if(Z.magFilter===kr||Z.minFilter!==vL&&Z.minFilter!==Om||Z.type===Ed&&e.has("OES_texture_float_linear")===!1||a===!1&&Z.type===hC&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||n.get(Z).__currentAnisotropy)&&(i.texParameterf(te,Ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,s.getMaxAnisotropy())),n.get(Z).__currentAnisotropy=Z.anisotropy)}}function xe(te,Z){let we=!1;te.__webglInit===void 0&&(te.__webglInit=!0,Z.addEventListener("dispose",I));const Ye=Z.source;let je=_.get(Ye);je===void 0&&(je={},_.set(Ye,je));const Ge=U(Z);if(Ge!==te.__cacheKey){je[Ge]===void 0&&(je[Ge]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,we=!0),je[Ge].usedTimes++;const ot=je[te.__cacheKey];ot!==void 0&&(je[te.__cacheKey].usedTimes--,ot.usedTimes===0&&O(Z)),te.__cacheKey=Ge,te.__webglTexture=je[Ge].texture}return we}function He(te,Z,we){let Ye=i.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Ye=i.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Ye=i.TEXTURE_3D);const je=xe(te,Z),Ge=Z.source;t.bindTexture(Ye,te.__webglTexture,i.TEXTURE0+we);const ot=n.get(Ge);if(Ge.version!==ot.__version||je===!0){t.activeTexture(i.TEXTURE0+we),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Z.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Z.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const tt=S(Z)&&C(Z.image)===!1;let Oe=y(Z.image,tt,!1,u);Oe=wt(Z,Oe);const lt=C(Oe)||a,xt=r.convert(Z.format,Z.colorSpace);let ut=r.convert(Z.type),nt=L(Z.internalFormat,xt,ut,Z.colorSpace);ye(Ye,Z,lt);let ft;const At=Z.mipmaps,kt=a&&Z.isVideoTexture!==!0,he=ot.__version===void 0||je===!0,at=T(Z,Oe,lt);if(Z.isDepthTexture)nt=i.DEPTH_COMPONENT,a?Z.type===Ed?nt=i.DEPTH_COMPONENT32F:Z.type===hg?nt=i.DEPTH_COMPONENT24:Z.type===gm?nt=i.DEPTH24_STENCIL8:nt=i.DEPTH_COMPONENT16:Z.type===Ed&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===pm&&nt===i.DEPTH_COMPONENT&&Z.type!==s5&&Z.type!==hg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=hg,ut=r.convert(Z.type)),Z.format===Ov&&nt===i.DEPTH_COMPONENT&&(nt=i.DEPTH_STENCIL,Z.type!==gm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=gm,ut=r.convert(Z.type))),he&&(kt?t.texStorage2D(i.TEXTURE_2D,1,nt,Oe.width,Oe.height):t.texImage2D(i.TEXTURE_2D,0,nt,Oe.width,Oe.height,0,xt,ut,null));else if(Z.isDataTexture)if(At.length>0&&lt){kt&&he&&t.texStorage2D(i.TEXTURE_2D,at,nt,At[0].width,At[0].height);for(let Ue=0,gt=At.length;Ue<gt;Ue++)ft=At[Ue],kt?t.texSubImage2D(i.TEXTURE_2D,Ue,0,0,ft.width,ft.height,xt,ut,ft.data):t.texImage2D(i.TEXTURE_2D,Ue,nt,ft.width,ft.height,0,xt,ut,ft.data);Z.generateMipmaps=!1}else kt?(he&&t.texStorage2D(i.TEXTURE_2D,at,nt,Oe.width,Oe.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Oe.width,Oe.height,xt,ut,Oe.data)):t.texImage2D(i.TEXTURE_2D,0,nt,Oe.width,Oe.height,0,xt,ut,Oe.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){kt&&he&&t.texStorage3D(i.TEXTURE_2D_ARRAY,at,nt,At[0].width,At[0].height,Oe.depth);for(let Ue=0,gt=At.length;Ue<gt;Ue++)ft=At[Ue],Z.format!==Nl?xt!==null?kt?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ue,0,0,0,ft.width,ft.height,Oe.depth,xt,ft.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ue,nt,ft.width,ft.height,Oe.depth,0,ft.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):kt?t.texSubImage3D(i.TEXTURE_2D_ARRAY,Ue,0,0,0,ft.width,ft.height,Oe.depth,xt,ut,ft.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Ue,nt,ft.width,ft.height,Oe.depth,0,xt,ut,ft.data)}else{kt&&he&&t.texStorage2D(i.TEXTURE_2D,at,nt,At[0].width,At[0].height);for(let Ue=0,gt=At.length;Ue<gt;Ue++)ft=At[Ue],Z.format!==Nl?xt!==null?kt?t.compressedTexSubImage2D(i.TEXTURE_2D,Ue,0,0,ft.width,ft.height,xt,ft.data):t.compressedTexImage2D(i.TEXTURE_2D,Ue,nt,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):kt?t.texSubImage2D(i.TEXTURE_2D,Ue,0,0,ft.width,ft.height,xt,ut,ft.data):t.texImage2D(i.TEXTURE_2D,Ue,nt,ft.width,ft.height,0,xt,ut,ft.data)}else if(Z.isDataArrayTexture)kt?(he&&t.texStorage3D(i.TEXTURE_2D_ARRAY,at,nt,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,xt,ut,Oe.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,nt,Oe.width,Oe.height,Oe.depth,0,xt,ut,Oe.data);else if(Z.isData3DTexture)kt?(he&&t.texStorage3D(i.TEXTURE_3D,at,nt,Oe.width,Oe.height,Oe.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,xt,ut,Oe.data)):t.texImage3D(i.TEXTURE_3D,0,nt,Oe.width,Oe.height,Oe.depth,0,xt,ut,Oe.data);else if(Z.isFramebufferTexture){if(he)if(kt)t.texStorage2D(i.TEXTURE_2D,at,nt,Oe.width,Oe.height);else{let Ue=Oe.width,gt=Oe.height;for(let Ct=0;Ct<at;Ct++)t.texImage2D(i.TEXTURE_2D,Ct,nt,Ue,gt,0,xt,ut,null),Ue>>=1,gt>>=1}}else if(At.length>0&&lt){kt&&he&&t.texStorage2D(i.TEXTURE_2D,at,nt,At[0].width,At[0].height);for(let Ue=0,gt=At.length;Ue<gt;Ue++)ft=At[Ue],kt?t.texSubImage2D(i.TEXTURE_2D,Ue,0,0,xt,ut,ft):t.texImage2D(i.TEXTURE_2D,Ue,nt,xt,ut,ft);Z.generateMipmaps=!1}else kt?(he&&t.texStorage2D(i.TEXTURE_2D,at,nt,Oe.width,Oe.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,xt,ut,Oe)):t.texImage2D(i.TEXTURE_2D,0,nt,xt,ut,Oe);x(Z,lt)&&E(Ye),ot.__version=Ge.version,Z.onUpdate&&Z.onUpdate(Z)}te.__version=Z.version}function qe(te,Z,we){if(Z.image.length!==6)return;const Ye=xe(te,Z),je=Z.source;t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+we);const Ge=n.get(je);if(je.version!==Ge.__version||Ye===!0){t.activeTexture(i.TEXTURE0+we),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Z.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Z.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const ot=Z.isCompressedTexture||Z.image[0].isCompressedTexture,tt=Z.image[0]&&Z.image[0].isDataTexture,Oe=[];for(let Ue=0;Ue<6;Ue++)!ot&&!tt?Oe[Ue]=y(Z.image[Ue],!1,!0,c):Oe[Ue]=tt?Z.image[Ue].image:Z.image[Ue],Oe[Ue]=wt(Z,Oe[Ue]);const lt=Oe[0],xt=C(lt)||a,ut=r.convert(Z.format,Z.colorSpace),nt=r.convert(Z.type),ft=L(Z.internalFormat,ut,nt,Z.colorSpace),At=a&&Z.isVideoTexture!==!0,kt=Ge.__version===void 0||Ye===!0;let he=T(Z,lt,xt);ye(i.TEXTURE_CUBE_MAP,Z,xt);let at;if(ot){At&&kt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,he,ft,lt.width,lt.height);for(let Ue=0;Ue<6;Ue++){at=Oe[Ue].mipmaps;for(let gt=0;gt<at.length;gt++){const Ct=at[gt];Z.format!==Nl?ut!==null?At?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt,0,0,Ct.width,Ct.height,ut,Ct.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt,ft,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):At?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt,0,0,Ct.width,Ct.height,ut,nt,Ct.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt,ft,Ct.width,Ct.height,0,ut,nt,Ct.data)}}}else{at=Z.mipmaps,At&&kt&&(at.length>0&&he++,t.texStorage2D(i.TEXTURE_CUBE_MAP,he,ft,Oe[0].width,Oe[0].height));for(let Ue=0;Ue<6;Ue++)if(tt){At?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,Oe[Ue].width,Oe[Ue].height,ut,nt,Oe[Ue].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,ft,Oe[Ue].width,Oe[Ue].height,0,ut,nt,Oe[Ue].data);for(let gt=0;gt<at.length;gt++){const cn=at[gt].image[Ue].image;At?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt+1,0,0,cn.width,cn.height,ut,nt,cn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt+1,ft,cn.width,cn.height,0,ut,nt,cn.data)}}else{At?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,0,0,ut,nt,Oe[Ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0,ft,ut,nt,Oe[Ue]);for(let gt=0;gt<at.length;gt++){const Ct=at[gt];At?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt+1,0,0,ut,nt,Ct.image[Ue]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,gt+1,ft,ut,nt,Ct.image[Ue])}}}x(Z,xt)&&E(i.TEXTURE_CUBE_MAP),Ge.__version=je.version,Z.onUpdate&&Z.onUpdate(Z)}te.__version=Z.version}function ke(te,Z,we,Ye,je){const Ge=r.convert(we.format,we.colorSpace),ot=r.convert(we.type),tt=L(we.internalFormat,Ge,ot,we.colorSpace);n.get(Z).__hasExternalTextures||(je===i.TEXTURE_3D||je===i.TEXTURE_2D_ARRAY?t.texImage3D(je,0,tt,Z.width,Z.height,Z.depth,0,Ge,ot,null):t.texImage2D(je,0,tt,Z.width,Z.height,0,Ge,ot,null)),t.bindFramebuffer(i.FRAMEBUFFER,te),Re(Z)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ye,je,n.get(we).__webglTexture,0,Xe(Z)):(je===i.TEXTURE_2D||je>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&je<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ye,je,n.get(we).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function q(te,Z,we){if(i.bindRenderbuffer(i.RENDERBUFFER,te),Z.depthBuffer&&!Z.stencilBuffer){let Ye=i.DEPTH_COMPONENT16;if(we||Re(Z)){const je=Z.depthTexture;je&&je.isDepthTexture&&(je.type===Ed?Ye=i.DEPTH_COMPONENT32F:je.type===hg&&(Ye=i.DEPTH_COMPONENT24));const Ge=Xe(Z);Re(Z)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ge,Ye,Z.width,Z.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Ge,Ye,Z.width,Z.height)}else i.renderbufferStorage(i.RENDERBUFFER,Ye,Z.width,Z.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,te)}else if(Z.depthBuffer&&Z.stencilBuffer){const Ye=Xe(Z);we&&Re(Z)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ye,i.DEPTH24_STENCIL8,Z.width,Z.height):Re(Z)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ye,i.DEPTH24_STENCIL8,Z.width,Z.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,Z.width,Z.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,te)}else{const Ye=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let je=0;je<Ye.length;je++){const Ge=Ye[je],ot=r.convert(Ge.format,Ge.colorSpace),tt=r.convert(Ge.type),Oe=L(Ge.internalFormat,ot,tt,Ge.colorSpace),lt=Xe(Z);we&&Re(Z)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,lt,Oe,Z.width,Z.height):Re(Z)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,lt,Oe,Z.width,Z.height):i.renderbufferStorage(i.RENDERBUFFER,Oe,Z.width,Z.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ee(te,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,te),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),j(Z.depthTexture,0);const Ye=n.get(Z.depthTexture).__webglTexture,je=Xe(Z);if(Z.depthTexture.format===pm)Re(Z)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ye,0,je):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ye,0);else if(Z.depthTexture.format===Ov)Re(Z)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ye,0,je):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ye,0);else throw new Error("Unknown depthTexture format")}function De(te){const Z=n.get(te),we=te.isWebGLCubeRenderTarget===!0;if(te.depthTexture&&!Z.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");Ee(Z.__webglFramebuffer,te)}else if(we){Z.__webglDepthbuffer=[];for(let Ye=0;Ye<6;Ye++)t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer[Ye]),Z.__webglDepthbuffer[Ye]=i.createRenderbuffer(),q(Z.__webglDepthbuffer[Ye],te,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer=i.createRenderbuffer(),q(Z.__webglDepthbuffer,te,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ae(te,Z,we){const Ye=n.get(te);Z!==void 0&&ke(Ye.__webglFramebuffer,te,te.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),we!==void 0&&De(te)}function Me(te){const Z=te.texture,we=n.get(te),Ye=n.get(Z);te.addEventListener("dispose",N),te.isWebGLMultipleRenderTargets!==!0&&(Ye.__webglTexture===void 0&&(Ye.__webglTexture=i.createTexture()),Ye.__version=Z.version,o.memory.textures++);const je=te.isWebGLCubeRenderTarget===!0,Ge=te.isWebGLMultipleRenderTargets===!0,ot=C(te)||a;if(je){we.__webglFramebuffer=[];for(let tt=0;tt<6;tt++)we.__webglFramebuffer[tt]=i.createFramebuffer()}else{if(we.__webglFramebuffer=i.createFramebuffer(),Ge)if(s.drawBuffers){const tt=te.texture;for(let Oe=0,lt=tt.length;Oe<lt;Oe++){const xt=n.get(tt[Oe]);xt.__webglTexture===void 0&&(xt.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&te.samples>0&&Re(te)===!1){const tt=Ge?Z:[Z];we.__webglMultisampledFramebuffer=i.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let Oe=0;Oe<tt.length;Oe++){const lt=tt[Oe];we.__webglColorRenderbuffer[Oe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,we.__webglColorRenderbuffer[Oe]);const xt=r.convert(lt.format,lt.colorSpace),ut=r.convert(lt.type),nt=L(lt.internalFormat,xt,ut,lt.colorSpace,te.isXRRenderTarget===!0),ft=Xe(te);i.renderbufferStorageMultisample(i.RENDERBUFFER,ft,nt,te.width,te.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Oe,i.RENDERBUFFER,we.__webglColorRenderbuffer[Oe])}i.bindRenderbuffer(i.RENDERBUFFER,null),te.depthBuffer&&(we.__webglDepthRenderbuffer=i.createRenderbuffer(),q(we.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(je){t.bindTexture(i.TEXTURE_CUBE_MAP,Ye.__webglTexture),ye(i.TEXTURE_CUBE_MAP,Z,ot);for(let tt=0;tt<6;tt++)ke(we.__webglFramebuffer[tt],te,Z,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+tt);x(Z,ot)&&E(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ge){const tt=te.texture;for(let Oe=0,lt=tt.length;Oe<lt;Oe++){const xt=tt[Oe],ut=n.get(xt);t.bindTexture(i.TEXTURE_2D,ut.__webglTexture),ye(i.TEXTURE_2D,xt,ot),ke(we.__webglFramebuffer,te,xt,i.COLOR_ATTACHMENT0+Oe,i.TEXTURE_2D),x(xt,ot)&&E(i.TEXTURE_2D)}t.unbindTexture()}else{let tt=i.TEXTURE_2D;(te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&&(a?tt=te.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(tt,Ye.__webglTexture),ye(tt,Z,ot),ke(we.__webglFramebuffer,te,Z,i.COLOR_ATTACHMENT0,tt),x(Z,ot)&&E(tt),t.unbindTexture()}te.depthBuffer&&De(te)}function Je(te){const Z=C(te)||a,we=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let Ye=0,je=we.length;Ye<je;Ye++){const Ge=we[Ye];if(x(Ge,Z)){const ot=te.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,tt=n.get(Ge).__webglTexture;t.bindTexture(ot,tt),E(ot),t.unbindTexture()}}}function Pe(te){if(a&&te.samples>0&&Re(te)===!1){const Z=te.isWebGLMultipleRenderTargets?te.texture:[te.texture],we=te.width,Ye=te.height;let je=i.COLOR_BUFFER_BIT;const Ge=[],ot=te.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,tt=n.get(te),Oe=te.isWebGLMultipleRenderTargets===!0;if(Oe)for(let lt=0;lt<Z.length;lt++)t.bindFramebuffer(i.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,tt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,tt.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,tt.__webglFramebuffer);for(let lt=0;lt<Z.length;lt++){Ge.push(i.COLOR_ATTACHMENT0+lt),te.depthBuffer&&Ge.push(ot);const xt=tt.__ignoreDepthValues!==void 0?tt.__ignoreDepthValues:!1;if(xt===!1&&(te.depthBuffer&&(je|=i.DEPTH_BUFFER_BIT),te.stencilBuffer&&(je|=i.STENCIL_BUFFER_BIT)),Oe&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,tt.__webglColorRenderbuffer[lt]),xt===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[ot]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[ot])),Oe){const ut=n.get(Z[lt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ut,0)}i.blitFramebuffer(0,0,we,Ye,0,0,we,Ye,je,i.NEAREST),f&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ge)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Oe)for(let lt=0;lt<Z.length;lt++){t.bindFramebuffer(i.FRAMEBUFFER,tt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,tt.__webglColorRenderbuffer[lt]);const xt=n.get(Z[lt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,tt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,xt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,tt.__webglMultisampledFramebuffer)}}function Xe(te){return Math.min(h,te.samples)}function Re(te){const Z=n.get(te);return a&&te.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function Fe(te){const Z=o.render.frame;g.get(te)!==Z&&(g.set(te,Z),te.update())}function wt(te,Z){const we=te.colorSpace,Ye=te.format,je=te.type;return te.isCompressedTexture===!0||te.format===UP||we!==kh&&we!==_m&&(we===Gn?a===!1?e.has("EXT_sRGB")===!0&&Ye===Nl?(te.format=UP,te.minFilter=Fs,te.generateMipmaps=!1):Z=bX.sRGBToLinear(Z):(Ye!==Nl||je!==Pd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),Z}this.allocateTextureUnit=H,this.resetTextureUnits=K,this.setTexture2D=j,this.setTexture2DArray=W,this.setTexture3D=X,this.setTextureCube=ee,this.rebindTextures=Ae,this.setupRenderTarget=Me,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=De,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=Re}function pye(i,e,t){const n=t.isWebGL2;function s(r,o=_m){let a;if(r===Pd)return i.UNSIGNED_BYTE;if(r===uX)return i.UNSIGNED_SHORT_4_4_4_4;if(r===hX)return i.UNSIGNED_SHORT_5_5_5_1;if(r===P1e)return i.BYTE;if(r===O1e)return i.SHORT;if(r===s5)return i.UNSIGNED_SHORT;if(r===cX)return i.INT;if(r===hg)return i.UNSIGNED_INT;if(r===Ed)return i.FLOAT;if(r===hC)return n?i.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(r===F1e)return i.ALPHA;if(r===Nl)return i.RGBA;if(r===B1e)return i.LUMINANCE;if(r===z1e)return i.LUMINANCE_ALPHA;if(r===pm)return i.DEPTH_COMPONENT;if(r===Ov)return i.DEPTH_STENCIL;if(r===UP)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(r===U1e)return i.RED;if(r===dX)return i.RED_INTEGER;if(r===V1e)return i.RG;if(r===fX)return i.RG_INTEGER;if(r===gX)return i.RGBA_INTEGER;if(r===YI||r===ZI||r===QI||r===JI)if(o===Gn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===YI)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===ZI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===QI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===JI)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===YI)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===ZI)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===QI)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===JI)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===kH||r===MH||r===DH||r===AH)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===kH)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===MH)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===DH)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===AH)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===W1e)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===IH||r===NH)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===IH)return o===Gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===NH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===RH||r===PH||r===OH||r===FH||r===BH||r===zH||r===UH||r===VH||r===WH||r===HH||r===$H||r===GH||r===jH||r===KH)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===RH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===PH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===OH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===FH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===BH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===zH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===UH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===VH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===WH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===HH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===$H)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===GH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===jH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===KH)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===eN)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===eN)return o===Gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(r===H1e||r===qH||r===XH||r===YH)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===eN)return a.COMPRESSED_RED_RGTC1_EXT;if(r===qH)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===XH)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===YH)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===gm?n?i.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):i[r]!==void 0?i[r]:null}return{convert:s}}class mye extends qr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class kb extends Bi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ipt={type:"move"};class T6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new kb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new kb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new kb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const p of e.hand.values()){const _=t.getJointPose(p,n),m=this._getHandJoint(c,p);_!==null&&(m.matrix.fromArray(_.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=_.radius),m.visible=_!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ipt)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new kb;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class _ye extends nr{constructor(e,t,n,s,r,o,a,l,c,u){if(u=u!==void 0?u:pm,u!==pm&&u!==Ov)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===pm&&(n=hg),n===void 0&&u===Ov&&(n=gm),super(null,s,r,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:kr,this.minFilter=l!==void 0?l:kr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Npt extends jg{constructor(e,t){super();const n=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,g=null;const p=t.getContextAttributes();let _=null,m=null;const v=[],y=[],C=new qr;C.layers.enable(1),C.viewport=new Fi;const S=new qr;S.layers.enable(2),S.viewport=new Fi;const x=[C,S],E=new mye;E.layers.enable(1),E.layers.enable(2);let L=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let X=v[W];return X===void 0&&(X=new T6,v[W]=X),X.getTargetRaySpace()},this.getControllerGrip=function(W){let X=v[W];return X===void 0&&(X=new T6,v[W]=X),X.getGripSpace()},this.getHand=function(W){let X=v[W];return X===void 0&&(X=new T6,v[W]=X),X.getHandSpace()};function D(W){const X=y.indexOf(W.inputSource);if(X===-1)return;const ee=v[X];ee!==void 0&&(ee.update(W.inputSource,W.frame,c||o),ee.dispatchEvent({type:W.type,data:W.inputSource}))}function I(){s.removeEventListener("select",D),s.removeEventListener("selectstart",D),s.removeEventListener("selectend",D),s.removeEventListener("squeeze",D),s.removeEventListener("squeezestart",D),s.removeEventListener("squeezeend",D),s.removeEventListener("end",I),s.removeEventListener("inputsourceschange",N);for(let W=0;W<v.length;W++){const X=y[W];X!==null&&(y[W]=null,v[W].disconnect(X))}L=null,T=null,e.setRenderTarget(_),f=null,d=null,h=null,s=null,m=null,j.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){r=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){a=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(W){c=W},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(W){if(s=W,s!==null){if(_=e.getRenderTarget(),s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",I),s.addEventListener("inputsourceschange",N),p.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const X={antialias:s.renderState.layers===void 0?p.antialias:!0,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};f=new XRWebGLLayer(s,t,X),s.updateRenderState({baseLayer:f}),m=new Mh(f.framebufferWidth,f.framebufferHeight,{format:Nl,type:Pd,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let X=null,ee=null,le=null;p.depth&&(le=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,X=p.stencil?Ov:pm,ee=p.stencil?gm:hg);const fe={colorFormat:t.RGBA8,depthFormat:le,scaleFactor:r};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer(fe),s.updateRenderState({layers:[d]}),m=new Mh(d.textureWidth,d.textureHeight,{format:Nl,type:Pd,depthTexture:new _ye(d.textureWidth,d.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0});const be=e.properties.get(m);be.__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),j.setContext(s),j.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function N(W){for(let X=0;X<W.removed.length;X++){const ee=W.removed[X],le=y.indexOf(ee);le>=0&&(y[le]=null,v[le].disconnect(ee))}for(let X=0;X<W.added.length;X++){const ee=W.added[X];let le=y.indexOf(ee);if(le===-1){for(let be=0;be<v.length;be++)if(be>=y.length){y.push(ee),le=be;break}else if(y[be]===null){y[be]=ee,le=be;break}if(le===-1)break}const fe=v[le];fe&&fe.connect(ee)}}const P=new se,O=new se;function V(W,X,ee){P.setFromMatrixPosition(X.matrixWorld),O.setFromMatrixPosition(ee.matrixWorld);const le=P.distanceTo(O),fe=X.projectionMatrix.elements,be=ee.projectionMatrix.elements,ye=fe[14]/(fe[10]-1),xe=fe[14]/(fe[10]+1),He=(fe[9]+1)/fe[5],qe=(fe[9]-1)/fe[5],ke=(fe[8]-1)/fe[0],q=(be[8]+1)/be[0],Ee=ye*ke,De=ye*q,Ae=le/(-ke+q),Me=Ae*-ke;X.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Me),W.translateZ(Ae),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert();const Je=ye+Ae,Pe=xe+Ae,Xe=Ee-Me,Re=De+(le-Me),Fe=He*xe/Pe*Je,wt=qe*xe/Pe*Je;W.projectionMatrix.makePerspective(Xe,Re,Fe,wt,Je,Pe),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}function z(W,X){X===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices(X.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(s===null)return;E.near=S.near=C.near=W.near,E.far=S.far=C.far=W.far,(L!==E.near||T!==E.far)&&(s.updateRenderState({depthNear:E.near,depthFar:E.far}),L=E.near,T=E.far);const X=W.parent,ee=E.cameras;z(E,X);for(let le=0;le<ee.length;le++)z(ee[le],X);ee.length===2?V(E,C,S):E.projectionMatrix.copy(C.projectionMatrix),K(W,E,X)};function K(W,X,ee){ee===null?W.matrix.copy(X.matrixWorld):(W.matrix.copy(ee.matrixWorld),W.matrix.invert(),W.matrix.multiply(X.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0);const le=W.children;for(let fe=0,be=le.length;fe<be;fe++)le[fe].updateMatrixWorld(!0);W.projectionMatrix.copy(X.projectionMatrix),W.projectionMatrixInverse.copy(X.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=dC*2*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(W){l=W,d!==null&&(d.fixedFoveation=W),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=W)};let H=null;function U(W,X){if(u=X.getViewerPose(c||o),g=X,u!==null){const ee=u.views;f!==null&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let le=!1;ee.length!==E.cameras.length&&(E.cameras.length=0,le=!0);for(let fe=0;fe<ee.length;fe++){const be=ee[fe];let ye=null;if(f!==null)ye=f.getViewport(be);else{const He=h.getViewSubImage(d,be);ye=He.viewport,fe===0&&(e.setRenderTargetTextures(m,He.colorTexture,d.ignoreDepthValues?void 0:He.depthStencilTexture),e.setRenderTarget(m))}let xe=x[fe];xe===void 0&&(xe=new qr,xe.layers.enable(fe),xe.viewport=new Fi,x[fe]=xe),xe.matrix.fromArray(be.transform.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.projectionMatrix.fromArray(be.projectionMatrix),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert(),xe.viewport.set(ye.x,ye.y,ye.width,ye.height),fe===0&&(E.matrix.copy(xe.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),le===!0&&E.cameras.push(xe)}}for(let ee=0;ee<v.length;ee++){const le=y[ee],fe=v[ee];le!==null&&fe!==void 0&&fe.update(le,X,c||o)}H&&H(W,X),X.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:X}),g=null}const j=new uye;j.setAnimationLoop(U),this.setAnimationLoop=function(W){H=W},this.dispose=function(){}}}function Rpt(i,e){function t(_,m){_.matrixAutoUpdate===!0&&_.updateMatrix(),m.value.copy(_.matrix)}function n(_,m){m.color.getRGB(_.fogColor.value,aye(i)),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)}function s(_,m,v,y,C){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(_,m):m.isMeshToonMaterial?(r(_,m),h(_,m)):m.isMeshPhongMaterial?(r(_,m),u(_,m)):m.isMeshStandardMaterial?(r(_,m),d(_,m),m.isMeshPhysicalMaterial&&f(_,m,C)):m.isMeshMatcapMaterial?(r(_,m),g(_,m)):m.isMeshDepthMaterial?r(_,m):m.isMeshDistanceMaterial?(r(_,m),p(_,m)):m.isMeshNormalMaterial?r(_,m):m.isLineBasicMaterial?(o(_,m),m.isLineDashedMaterial&&a(_,m)):m.isPointsMaterial?l(_,m,v,y):m.isSpriteMaterial?c(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.bumpMap&&(_.bumpMap.value=m.bumpMap,t(m.bumpMap,_.bumpMapTransform),_.bumpScale.value=m.bumpScale,m.side===La&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,t(m.normalMap,_.normalMapTransform),_.normalScale.value.copy(m.normalScale),m.side===La&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,t(m.displacementMap,_.displacementMapTransform),_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,_.emissiveMapTransform)),m.specularMap&&(_.specularMap.value=m.specularMap,t(m.specularMap,_.specularMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const v=e.get(m).envMap;if(v&&(_.envMap.value=v,_.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio),m.lightMap){_.lightMap.value=m.lightMap;const y=i.useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=m.lightMapIntensity*y,t(m.lightMap,_.lightMapTransform)}m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,_.aoMapTransform))}function o(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform))}function a(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}function l(_,m,v,y){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*v,_.scale.value=y*.5,m.map&&(_.map.value=m.map,t(m.map,_.uvTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function c(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function u(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4)}function h(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap)}function d(_,m){_.metalness.value=m.metalness,m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,_.metalnessMapTransform)),_.roughness.value=m.roughness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,_.roughnessMapTransform)),e.get(m).envMap&&(_.envMapIntensity.value=m.envMapIntensity)}function f(_,m,v){_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,_.sheenColorMapTransform)),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,_.sheenRoughnessMapTransform))),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,_.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(_.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===La&&_.clearcoatNormalScale.value.negate())),m.iridescence>0&&(_.iridescence.value=m.iridescence,_.iridescenceIOR.value=m.iridescenceIOR,_.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(_.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,_.iridescenceMapTransform)),m.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=v.texture,_.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,_.transmissionMapTransform)),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(_.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(_.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,_.specularColorMapTransform)),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,m){m.matcap&&(_.matcap.value=m.matcap)}function p(_,m){const v=e.get(m).light;_.referencePosition.value.setFromMatrixPosition(v.matrixWorld),_.nearDistance.value=v.shadow.camera.near,_.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Ppt(i,e,t,n){let s={},r={},o=[];const a=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(v,y){const C=y.program;n.uniformBlockBinding(v,C)}function c(v,y){let C=s[v.id];C===void 0&&(g(v),C=u(v),s[v.id]=C,v.addEventListener("dispose",_));const S=y.program;n.updateUBOMapping(v,S);const x=e.render.frame;r[v.id]!==x&&(d(v),r[v.id]=x)}function u(v){const y=h();v.__bindingPointIndex=y;const C=i.createBuffer(),S=v.__size,x=v.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,S,x),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,y,C),C}function h(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(v){const y=s[v.id],C=v.uniforms,S=v.__cache;i.bindBuffer(i.UNIFORM_BUFFER,y);for(let x=0,E=C.length;x<E;x++){const L=C[x];if(f(L,x,S)===!0){const T=L.__offset,D=Array.isArray(L.value)?L.value:[L.value];let I=0;for(let N=0;N<D.length;N++){const P=D[N],O=p(P);typeof P=="number"?(L.__data[0]=P,i.bufferSubData(i.UNIFORM_BUFFER,T+I,L.__data)):P.isMatrix3?(L.__data[0]=P.elements[0],L.__data[1]=P.elements[1],L.__data[2]=P.elements[2],L.__data[3]=P.elements[0],L.__data[4]=P.elements[3],L.__data[5]=P.elements[4],L.__data[6]=P.elements[5],L.__data[7]=P.elements[0],L.__data[8]=P.elements[6],L.__data[9]=P.elements[7],L.__data[10]=P.elements[8],L.__data[11]=P.elements[0]):(P.toArray(L.__data,I),I+=O.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,T,L.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(v,y,C){const S=v.value;if(C[y]===void 0){if(typeof S=="number")C[y]=S;else{const x=Array.isArray(S)?S:[S],E=[];for(let L=0;L<x.length;L++)E.push(x[L].clone());C[y]=E}return!0}else if(typeof S=="number"){if(C[y]!==S)return C[y]=S,!0}else{const x=Array.isArray(C[y])?C[y]:[C[y]],E=Array.isArray(S)?S:[S];for(let L=0;L<x.length;L++){const T=x[L];if(T.equals(E[L])===!1)return T.copy(E[L]),!0}}return!1}function g(v){const y=v.uniforms;let C=0;const S=16;let x=0;for(let E=0,L=y.length;E<L;E++){const T=y[E],D={boundary:0,storage:0},I=Array.isArray(T.value)?T.value:[T.value];for(let N=0,P=I.length;N<P;N++){const O=I[N],V=p(O);D.boundary+=V.boundary,D.storage+=V.storage}if(T.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=C,E>0){x=C%S;const N=S-x;x!==0&&N-D.boundary<0&&(C+=S-x,T.__offset=C)}C+=D.storage}return x=C%S,x>0&&(C+=S-x),v.__size=C,v.__cache={},this}function p(v){const y={boundary:0,storage:0};return typeof v=="number"?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function _(v){const y=v.target;y.removeEventListener("dispose",_);const C=o.indexOf(y.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(s[y.id]),delete s[y.id],delete r[y.id]}function m(){for(const v in s)i.deleteBuffer(s[v]);o=[],s={},r={}}return{bind:l,update:c,dispose:m}}function Opt(){const i=dT("canvas");return i.style.display="block",i}class LX{constructor(e={}){const{canvas:t=Opt(),context:n=null,depth:s=!0,stencil:r=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;n!==null?d=n.getContextAttributes().alpha:d=o;const f=new Uint32Array(4),g=new Int32Array(4);let p=null,_=null;const m=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Gn,this.useLegacyLights=!0,this.toneMapping=yh,this.toneMappingExposure=1;const y=this;let C=!1,S=0,x=0,E=null,L=-1,T=null;const D=new Fi,I=new Fi;let N=null;const P=new Pt(0);let O=0,V=t.width,z=t.height,K=1,H=null,U=null;const j=new Fi(0,0,V,z),W=new Fi(0,0,V,z);let X=!1;const ee=new Ek;let le=!1,fe=!1,be=null;const ye=new Rn,xe=new rt,He=new se,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ke(){return E===null?K:1}let q=n;function Ee(ae,_e){for(let ie=0;ie<ae.length;ie++){const ce=ae[ie],Ce=t.getContext(ce,_e);if(Ce!==null)return Ce}return null}try{const ae={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${t5}`),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",Ue,!1),t.addEventListener("webglcontextcreationerror",gt,!1),q===null){const _e=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&_e.shift(),q=Ee(_e,ae),q===null)throw Ee(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&q instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let De,Ae,Me,Je,Pe,Xe,Re,Fe,wt,te,Z,we,Ye,je,Ge,ot,tt,Oe,lt,xt,ut,nt,ft,At;function kt(){De=new Zft(q),Ae=new Gft(q,De,e),De.init(Ae),nt=new pye(q,De,Ae),Me=new Dpt(q,De,Ae),Je=new egt(q),Pe=new vpt,Xe=new Apt(q,De,Me,Pe,Ae,nt,Je),Re=new Kft(y),Fe=new Yft(y),wt=new uht(q,Ae),ft=new Hft(q,De,wt,Ae),te=new Qft(q,wt,Je,ft),Z=new sgt(q,te,wt,Je),lt=new igt(q,Ae,Xe),ot=new jft(Pe),we=new _pt(y,Re,Fe,De,Ae,ft,ot),Ye=new Rpt(y,Pe),je=new bpt,Ge=new Lpt(De,Ae),Oe=new Wft(y,Re,Fe,Me,Z,d,l),tt=new Mpt(y,Z,Ae),At=new Ppt(q,Je,Ae,Me),xt=new $ft(q,De,Je,Ae),ut=new Jft(q,De,Je,Ae),Je.programs=we.programs,y.capabilities=Ae,y.extensions=De,y.properties=Pe,y.renderLists=je,y.shadowMap=tt,y.state=Me,y.info=Je}kt();const he=new Npt(y,q);this.xr=he,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const ae=De.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=De.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(ae){ae!==void 0&&(K=ae,this.setSize(V,z,!1))},this.getSize=function(ae){return ae.set(V,z)},this.setSize=function(ae,_e,ie=!0){if(he.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=ae,z=_e,t.width=Math.floor(ae*K),t.height=Math.floor(_e*K),ie===!0&&(t.style.width=ae+"px",t.style.height=_e+"px"),this.setViewport(0,0,ae,_e)},this.getDrawingBufferSize=function(ae){return ae.set(V*K,z*K).floor()},this.setDrawingBufferSize=function(ae,_e,ie){V=ae,z=_e,K=ie,t.width=Math.floor(ae*ie),t.height=Math.floor(_e*ie),this.setViewport(0,0,ae,_e)},this.getCurrentViewport=function(ae){return ae.copy(D)},this.getViewport=function(ae){return ae.copy(j)},this.setViewport=function(ae,_e,ie,ce){ae.isVector4?j.set(ae.x,ae.y,ae.z,ae.w):j.set(ae,_e,ie,ce),Me.viewport(D.copy(j).multiplyScalar(K).floor())},this.getScissor=function(ae){return ae.copy(W)},this.setScissor=function(ae,_e,ie,ce){ae.isVector4?W.set(ae.x,ae.y,ae.z,ae.w):W.set(ae,_e,ie,ce),Me.scissor(I.copy(W).multiplyScalar(K).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(ae){Me.setScissorTest(X=ae)},this.setOpaqueSort=function(ae){H=ae},this.setTransparentSort=function(ae){U=ae},this.getClearColor=function(ae){return ae.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(ae=!0,_e=!0,ie=!0){let ce=0;if(ae){let Ce=!1;if(E!==null){const mt=E.texture.format;Ce=mt===gX||mt===fX||mt===dX}if(Ce){const mt=E.texture.type,Bt=mt===Pd||mt===hg||mt===s5||mt===gm||mt===uX||mt===hX,jt=Oe.getClearColor(),Ut=Oe.getClearAlpha(),dn=jt.r,dt=jt.g,un=jt.b;Bt?(f[0]=dn,f[1]=dt,f[2]=un,f[3]=Ut,q.clearBufferuiv(q.COLOR,0,f)):(g[0]=dn,g[1]=dt,g[2]=un,g[3]=Ut,q.clearBufferiv(q.COLOR,0,g))}else ce|=q.COLOR_BUFFER_BIT}_e&&(ce|=q.DEPTH_BUFFER_BIT),ie&&(ce|=q.STENCIL_BUFFER_BIT),q.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",Ue,!1),t.removeEventListener("webglcontextcreationerror",gt,!1),je.dispose(),Ge.dispose(),Pe.dispose(),Re.dispose(),Fe.dispose(),Z.dispose(),ft.dispose(),At.dispose(),we.dispose(),he.dispose(),he.removeEventListener("sessionstart",Q),he.removeEventListener("sessionend",J),be&&(be.dispose(),be=null),ne.stop()};function at(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const ae=Je.autoReset,_e=tt.enabled,ie=tt.autoUpdate,ce=tt.needsUpdate,Ce=tt.type;kt(),Je.autoReset=ae,tt.enabled=_e,tt.autoUpdate=ie,tt.needsUpdate=ce,tt.type=Ce}function gt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Ct(ae){const _e=ae.target;_e.removeEventListener("dispose",Ct),cn(_e)}function cn(ae){wn(ae),Pe.remove(ae)}function wn(ae){const _e=Pe.get(ae).programs;_e!==void 0&&(_e.forEach(function(ie){we.releaseProgram(ie)}),ae.isShaderMaterial&&we.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,_e,ie,ce,Ce,mt){_e===null&&(_e=qe);const Bt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,jt=sn(ae,_e,ie,ce,Ce);Me.setMaterial(ce,Bt);let Ut=ie.index,dn=1;ce.wireframe===!0&&(Ut=te.getWireframeAttribute(ie),dn=2);const dt=ie.drawRange,un=ie.attributes.position;let Ji=dt.start*dn,Di=(dt.start+dt.count)*dn;mt!==null&&(Ji=Math.max(Ji,mt.start*dn),Di=Math.min(Di,(mt.start+mt.count)*dn)),Ut!==null?(Ji=Math.max(Ji,0),Di=Math.min(Di,Ut.count)):un!=null&&(Ji=Math.max(Ji,0),Di=Math.min(Di,un.count));const go=Di-Ji;if(go<0||go===1/0)return;ft.setup(Ce,ce,jt,ie,Ut);let na,Ui=xt;if(Ut!==null&&(na=wt.get(Ut),Ui=ut,Ui.setIndex(na)),Ce.isMesh)ce.wireframe===!0?(Me.setLineWidth(ce.wireframeLinewidth*ke()),Ui.setMode(q.LINES)):Ui.setMode(q.TRIANGLES);else if(Ce.isLine){let Sn=ce.linewidth;Sn===void 0&&(Sn=1),Me.setLineWidth(Sn*ke()),Ce.isLineSegments?Ui.setMode(q.LINES):Ce.isLineLoop?Ui.setMode(q.LINE_LOOP):Ui.setMode(q.LINE_STRIP)}else Ce.isPoints?Ui.setMode(q.POINTS):Ce.isSprite&&Ui.setMode(q.TRIANGLES);if(Ce.isInstancedMesh)Ui.renderInstances(Ji,go,Ce.count);else if(ie.isInstancedBufferGeometry){const Sn=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,wi=Math.min(ie.instanceCount,Sn);Ui.renderInstances(Ji,go,wi)}else Ui.render(Ji,go)},this.compile=function(ae,_e){function ie(ce,Ce,mt){ce.transparent===!0&&ce.side===Ks&&ce.forceSinglePass===!1?(ce.side=La,ce.needsUpdate=!0,ct(ce,Ce,mt),ce.side=Gd,ce.needsUpdate=!0,ct(ce,Ce,mt),ce.side=Ks):ct(ce,Ce,mt)}_=Ge.get(ae),_.init(),v.push(_),ae.traverseVisible(function(ce){ce.isLight&&ce.layers.test(_e.layers)&&(_.pushLight(ce),ce.castShadow&&_.pushShadow(ce))}),_.setupLights(y.useLegacyLights),ae.traverse(function(ce){const Ce=ce.material;if(Ce)if(Array.isArray(Ce))for(let mt=0;mt<Ce.length;mt++){const Bt=Ce[mt];ie(Bt,ae,ce)}else ie(Ce,ae,ce)}),v.pop(),_=null};let qn=null;function St(ae){qn&&qn(ae)}function Q(){ne.stop()}function J(){ne.start()}const ne=new uye;ne.setAnimationLoop(St),typeof self<"u"&&ne.setContext(self),this.setAnimationLoop=function(ae){qn=ae,he.setAnimationLoop(ae),ae===null?ne.stop():ne.start()},he.addEventListener("sessionstart",Q),he.addEventListener("sessionend",J),this.render=function(ae,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),he.enabled===!0&&he.isPresenting===!0&&(he.cameraAutoUpdate===!0&&he.updateCamera(_e),_e=he.getCamera()),ae.isScene===!0&&ae.onBeforeRender(y,ae,_e,E),_=Ge.get(ae,v.length),_.init(),v.push(_),ye.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),ee.setFromProjectionMatrix(ye),fe=this.localClippingEnabled,le=ot.init(this.clippingPlanes,fe),p=je.get(ae,m.length),p.init(),m.push(p),pe(ae,_e,0,y.sortObjects),p.finish(),y.sortObjects===!0&&p.sort(H,U),this.info.render.frame++,le===!0&&ot.beginShadows();const ie=_.state.shadowsArray;if(tt.render(ie,ae,_e),le===!0&&ot.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(p,ae),_.setupLights(y.useLegacyLights),_e.isArrayCamera){const ce=_e.cameras;for(let Ce=0,mt=ce.length;Ce<mt;Ce++){const Bt=ce[Ce];ve(p,ae,Bt,Bt.viewport)}}else ve(p,ae,_e);E!==null&&(Xe.updateMultisampleRenderTarget(E),Xe.updateRenderTargetMipmap(E)),ae.isScene===!0&&ae.onAfterRender(y,ae,_e),ft.resetDefaultState(),L=-1,T=null,v.pop(),v.length>0?_=v[v.length-1]:_=null,m.pop(),m.length>0?p=m[m.length-1]:p=null};function pe(ae,_e,ie,ce){if(ae.visible===!1)return;if(ae.layers.test(_e.layers)){if(ae.isGroup)ie=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(_e);else if(ae.isLight)_.pushLight(ae),ae.castShadow&&_.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||ee.intersectsSprite(ae)){ce&&He.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(ye);const Bt=Z.update(ae),jt=ae.material;jt.visible&&p.push(ae,Bt,jt,ie,He.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||ee.intersectsObject(ae))){const Bt=Z.update(ae),jt=ae.material;if(ce&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),He.copy(ae.boundingSphere.center)):(Bt.boundingSphere===null&&Bt.computeBoundingSphere(),He.copy(Bt.boundingSphere.center)),He.applyMatrix4(ae.matrixWorld).applyMatrix4(ye)),Array.isArray(jt)){const Ut=Bt.groups;for(let dn=0,dt=Ut.length;dn<dt;dn++){const un=Ut[dn],Ji=jt[un.materialIndex];Ji&&Ji.visible&&p.push(ae,Bt,Ji,ie,He.z,un)}}else jt.visible&&p.push(ae,Bt,jt,ie,He.z,null)}}const mt=ae.children;for(let Bt=0,jt=mt.length;Bt<jt;Bt++)pe(mt[Bt],_e,ie,ce)}function ve(ae,_e,ie,ce){const Ce=ae.opaque,mt=ae.transmissive,Bt=ae.transparent;_.setupLightsView(ie),le===!0&&ot.setGlobalState(y.clippingPlanes,ie),mt.length>0&&Te(Ce,mt,_e,ie),ce&&Me.viewport(D.copy(ce)),Ce.length>0&&ze(Ce,_e,ie),mt.length>0&&ze(mt,_e,ie),Bt.length>0&&ze(Bt,_e,ie),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function Te(ae,_e,ie,ce){const Ce=Ae.isWebGL2;be===null&&(be=new Mh(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")?hC:Pd,minFilter:Om,samples:Ce?4:0})),y.getDrawingBufferSize(xe),Ce?be.setSize(xe.x,xe.y):be.setSize(VP(xe.x),VP(xe.y));const mt=y.getRenderTarget();y.setRenderTarget(be),y.getClearColor(P),O=y.getClearAlpha(),O<1&&y.setClearColor(16777215,.5),y.clear();const Bt=y.toneMapping;y.toneMapping=yh,ze(ae,ie,ce),Xe.updateMultisampleRenderTarget(be),Xe.updateRenderTargetMipmap(be);let jt=!1;for(let Ut=0,dn=_e.length;Ut<dn;Ut++){const dt=_e[Ut],un=dt.object,Ji=dt.geometry,Di=dt.material,go=dt.group;if(Di.side===Ks&&un.layers.test(ce.layers)){const na=Di.side;Di.side=La,Di.needsUpdate=!0,ht(un,ie,ce,Ji,Di,go),Di.side=na,Di.needsUpdate=!0,jt=!0}}jt===!0&&(Xe.updateMultisampleRenderTarget(be),Xe.updateRenderTargetMipmap(be)),y.setRenderTarget(mt),y.setClearColor(P,O),y.toneMapping=Bt}function ze(ae,_e,ie){const ce=_e.isScene===!0?_e.overrideMaterial:null;for(let Ce=0,mt=ae.length;Ce<mt;Ce++){const Bt=ae[Ce],jt=Bt.object,Ut=Bt.geometry,dn=ce===null?Bt.material:ce,dt=Bt.group;jt.layers.test(ie.layers)&&ht(jt,_e,ie,Ut,dn,dt)}}function ht(ae,_e,ie,ce,Ce,mt){ae.onBeforeRender(y,_e,ie,ce,Ce,mt),ae.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Ce.onBeforeRender(y,_e,ie,ce,ae,mt),Ce.transparent===!0&&Ce.side===Ks&&Ce.forceSinglePass===!1?(Ce.side=La,Ce.needsUpdate=!0,y.renderBufferDirect(ie,_e,ce,Ce,ae,mt),Ce.side=Gd,Ce.needsUpdate=!0,y.renderBufferDirect(ie,_e,ce,Ce,ae,mt),Ce.side=Ks):y.renderBufferDirect(ie,_e,ce,Ce,ae,mt),ae.onAfterRender(y,_e,ie,ce,Ce,mt)}function ct(ae,_e,ie){_e.isScene!==!0&&(_e=qe);const ce=Pe.get(ae),Ce=_.state.lights,mt=_.state.shadowsArray,Bt=Ce.state.version,jt=we.getParameters(ae,Ce.state,mt,_e,ie),Ut=we.getProgramCacheKey(jt);let dn=ce.programs;ce.environment=ae.isMeshStandardMaterial?_e.environment:null,ce.fog=_e.fog,ce.envMap=(ae.isMeshStandardMaterial?Fe:Re).get(ae.envMap||ce.environment),dn===void 0&&(ae.addEventListener("dispose",Ct),dn=new Map,ce.programs=dn);let dt=dn.get(Ut);if(dt!==void 0){if(ce.currentProgram===dt&&ce.lightsStateVersion===Bt)return zt(ae,jt),dt}else jt.uniforms=we.getUniforms(ae),ae.onBuild(ie,jt,y),ae.onBeforeCompile(jt,y),dt=we.acquireProgram(jt,Ut),dn.set(Ut,dt),ce.uniforms=jt.uniforms;const un=ce.uniforms;(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(un.clippingPlanes=ot.uniform),zt(ae,jt),ce.needsLights=On(ae),ce.lightsStateVersion=Bt,ce.needsLights&&(un.ambientLightColor.value=Ce.state.ambient,un.lightProbe.value=Ce.state.probe,un.directionalLights.value=Ce.state.directional,un.directionalLightShadows.value=Ce.state.directionalShadow,un.spotLights.value=Ce.state.spot,un.spotLightShadows.value=Ce.state.spotShadow,un.rectAreaLights.value=Ce.state.rectArea,un.ltc_1.value=Ce.state.rectAreaLTC1,un.ltc_2.value=Ce.state.rectAreaLTC2,un.pointLights.value=Ce.state.point,un.pointLightShadows.value=Ce.state.pointShadow,un.hemisphereLights.value=Ce.state.hemi,un.directionalShadowMap.value=Ce.state.directionalShadowMap,un.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,un.spotShadowMap.value=Ce.state.spotShadowMap,un.spotLightMatrix.value=Ce.state.spotLightMatrix,un.spotLightMap.value=Ce.state.spotLightMap,un.pointShadowMap.value=Ce.state.pointShadowMap,un.pointShadowMatrix.value=Ce.state.pointShadowMatrix);const Ji=dt.getUniforms(),Di=iN.seqWithValue(Ji.seq,un);return ce.currentProgram=dt,ce.uniformsList=Di,dt}function zt(ae,_e){const ie=Pe.get(ae);ie.outputColorSpace=_e.outputColorSpace,ie.instancing=_e.instancing,ie.skinning=_e.skinning,ie.morphTargets=_e.morphTargets,ie.morphNormals=_e.morphNormals,ie.morphColors=_e.morphColors,ie.morphTargetsCount=_e.morphTargetsCount,ie.numClippingPlanes=_e.numClippingPlanes,ie.numIntersection=_e.numClipIntersection,ie.vertexAlphas=_e.vertexAlphas,ie.vertexTangents=_e.vertexTangents,ie.toneMapping=_e.toneMapping}function sn(ae,_e,ie,ce,Ce){_e.isScene!==!0&&(_e=qe),Xe.resetTextureUnits();const mt=_e.fog,Bt=ce.isMeshStandardMaterial?_e.environment:null,jt=E===null?y.outputColorSpace:E.isXRRenderTarget===!0?E.texture.colorSpace:kh,Ut=(ce.isMeshStandardMaterial?Fe:Re).get(ce.envMap||Bt),dn=ce.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,dt=!!ie.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),un=!!ie.morphAttributes.position,Ji=!!ie.morphAttributes.normal,Di=!!ie.morphAttributes.color,go=ce.toneMapped?y.toneMapping:yh,na=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Ui=na!==void 0?na.length:0,Sn=Pe.get(ce),wi=_.state.lights;if(le===!0&&(fe===!0||ae!==T)){const Fr=ae===T&&ce.id===L;ot.setState(ce,ae,Fr)}let xn=!1;ce.version===Sn.__version?(Sn.needsLights&&Sn.lightsStateVersion!==wi.state.version||Sn.outputColorSpace!==jt||Ce.isInstancedMesh&&Sn.instancing===!1||!Ce.isInstancedMesh&&Sn.instancing===!0||Ce.isSkinnedMesh&&Sn.skinning===!1||!Ce.isSkinnedMesh&&Sn.skinning===!0||Sn.envMap!==Ut||ce.fog===!0&&Sn.fog!==mt||Sn.numClippingPlanes!==void 0&&(Sn.numClippingPlanes!==ot.numPlanes||Sn.numIntersection!==ot.numIntersection)||Sn.vertexAlphas!==dn||Sn.vertexTangents!==dt||Sn.morphTargets!==un||Sn.morphNormals!==Ji||Sn.morphColors!==Di||Sn.toneMapping!==go||Ae.isWebGL2===!0&&Sn.morphTargetsCount!==Ui)&&(xn=!0):(xn=!0,Sn.__version=ce.version);let br=Sn.currentProgram;xn===!0&&(br=ct(ce,_e,Ce));let rr=!1,Is=!1,gl=!1;const rs=br.getUniforms(),ws=Sn.uniforms;if(Me.useProgram(br.program)&&(rr=!0,Is=!0,gl=!0),ce.id!==L&&(L=ce.id,Is=!0),rr||T!==ae){if(rs.setValue(q,"projectionMatrix",ae.projectionMatrix),Ae.logarithmicDepthBuffer&&rs.setValue(q,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),T!==ae&&(T=ae,Is=!0,gl=!0),ce.isShaderMaterial||ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshStandardMaterial||ce.envMap){const Fr=rs.map.cameraPosition;Fr!==void 0&&Fr.setValue(q,He.setFromMatrixPosition(ae.matrixWorld))}(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&rs.setValue(q,"isOrthographic",ae.isOrthographicCamera===!0),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial||ce.isShadowMaterial||Ce.isSkinnedMesh)&&rs.setValue(q,"viewMatrix",ae.matrixWorldInverse)}if(Ce.isSkinnedMesh){rs.setOptional(q,Ce,"bindMatrix"),rs.setOptional(q,Ce,"bindMatrixInverse");const Fr=Ce.skeleton;Fr&&(Ae.floatVertexTextures?(Fr.boneTexture===null&&Fr.computeBoneTexture(),rs.setValue(q,"boneTexture",Fr.boneTexture,Xe),rs.setValue(q,"boneTextureSize",Fr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Pa=ie.morphAttributes;if((Pa.position!==void 0||Pa.normal!==void 0||Pa.color!==void 0&&Ae.isWebGL2===!0)&&lt.update(Ce,ie,br),(Is||Sn.receiveShadow!==Ce.receiveShadow)&&(Sn.receiveShadow=Ce.receiveShadow,rs.setValue(q,"receiveShadow",Ce.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(ws.envMap.value=Ut,ws.flipEnvMap.value=Ut.isCubeTexture&&Ut.isRenderTargetTexture===!1?-1:1),Is&&(rs.setValue(q,"toneMappingExposure",y.toneMappingExposure),Sn.needsLights&&Hn(ws,gl),mt&&ce.fog===!0&&Ye.refreshFogUniforms(ws,mt),Ye.refreshMaterialUniforms(ws,ce,K,z,be),iN.upload(q,Sn.uniformsList,ws,Xe)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(iN.upload(q,Sn.uniformsList,ws,Xe),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&rs.setValue(q,"center",Ce.center),rs.setValue(q,"modelViewMatrix",Ce.modelViewMatrix),rs.setValue(q,"normalMatrix",Ce.normalMatrix),rs.setValue(q,"modelMatrix",Ce.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Fr=ce.uniformsGroups;for(let zh=0,Uh=Fr.length;zh<Uh;zh++)if(Ae.isWebGL2){const ia=Fr[zh];At.update(ia,br),At.bind(ia,br)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return br}function Hn(ae,_e){ae.ambientLightColor.needsUpdate=_e,ae.lightProbe.needsUpdate=_e,ae.directionalLights.needsUpdate=_e,ae.directionalLightShadows.needsUpdate=_e,ae.pointLights.needsUpdate=_e,ae.pointLightShadows.needsUpdate=_e,ae.spotLights.needsUpdate=_e,ae.spotLightShadows.needsUpdate=_e,ae.rectAreaLights.needsUpdate=_e,ae.hemisphereLights.needsUpdate=_e}function On(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(ae,_e,ie){Pe.get(ae.texture).__webglTexture=_e,Pe.get(ae.depthTexture).__webglTexture=ie;const ce=Pe.get(ae);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=ie===void 0,ce.__autoAllocateDepthBuffer||De.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ae,_e){const ie=Pe.get(ae);ie.__webglFramebuffer=_e,ie.__useDefaultFramebuffer=_e===void 0},this.setRenderTarget=function(ae,_e=0,ie=0){E=ae,S=_e,x=ie;let ce=!0,Ce=null,mt=!1,Bt=!1;if(ae){const Ut=Pe.get(ae);Ut.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(q.FRAMEBUFFER,null),ce=!1):Ut.__webglFramebuffer===void 0?Xe.setupRenderTarget(ae):Ut.__hasExternalTextures&&Xe.rebindTextures(ae,Pe.get(ae.texture).__webglTexture,Pe.get(ae.depthTexture).__webglTexture);const dn=ae.texture;(dn.isData3DTexture||dn.isDataArrayTexture||dn.isCompressedArrayTexture)&&(Bt=!0);const dt=Pe.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Ce=dt[_e],mt=!0):Ae.isWebGL2&&ae.samples>0&&Xe.useMultisampledRTT(ae)===!1?Ce=Pe.get(ae).__webglMultisampledFramebuffer:Ce=dt,D.copy(ae.viewport),I.copy(ae.scissor),N=ae.scissorTest}else D.copy(j).multiplyScalar(K).floor(),I.copy(W).multiplyScalar(K).floor(),N=X;if(Me.bindFramebuffer(q.FRAMEBUFFER,Ce)&&Ae.drawBuffers&&ce&&Me.drawBuffers(ae,Ce),Me.viewport(D),Me.scissor(I),Me.setScissorTest(N),mt){const Ut=Pe.get(ae.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+_e,Ut.__webglTexture,ie)}else if(Bt){const Ut=Pe.get(ae.texture),dn=_e||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ut.__webglTexture,ie||0,dn)}L=-1},this.readRenderTargetPixels=function(ae,_e,ie,ce,Ce,mt,Bt){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jt=Pe.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&Bt!==void 0&&(jt=jt[Bt]),jt){Me.bindFramebuffer(q.FRAMEBUFFER,jt);try{const Ut=ae.texture,dn=Ut.format,dt=Ut.type;if(dn!==Nl&&nt.convert(dn)!==q.getParameter(q.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const un=dt===hC&&(De.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&De.has("EXT_color_buffer_float"));if(dt!==Pd&&nt.convert(dt)!==q.getParameter(q.IMPLEMENTATION_COLOR_READ_TYPE)&&!(dt===Ed&&(Ae.isWebGL2||De.has("OES_texture_float")||De.has("WEBGL_color_buffer_float")))&&!un){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=ae.width-ce&&ie>=0&&ie<=ae.height-Ce&&q.readPixels(_e,ie,ce,Ce,nt.convert(dn),nt.convert(dt),mt)}finally{const Ut=E!==null?Pe.get(E).__webglFramebuffer:null;Me.bindFramebuffer(q.FRAMEBUFFER,Ut)}}},this.copyFramebufferToTexture=function(ae,_e,ie=0){const ce=Math.pow(2,-ie),Ce=Math.floor(_e.image.width*ce),mt=Math.floor(_e.image.height*ce);Xe.setTexture2D(_e,0),q.copyTexSubImage2D(q.TEXTURE_2D,ie,0,0,ae.x,ae.y,Ce,mt),Me.unbindTexture()},this.copyTextureToTexture=function(ae,_e,ie,ce=0){const Ce=_e.image.width,mt=_e.image.height,Bt=nt.convert(ie.format),jt=nt.convert(ie.type);Xe.setTexture2D(ie,0),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ie.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,ie.unpackAlignment),_e.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,ce,ae.x,ae.y,Ce,mt,Bt,jt,_e.image.data):_e.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,ce,ae.x,ae.y,_e.mipmaps[0].width,_e.mipmaps[0].height,Bt,_e.mipmaps[0].data):q.texSubImage2D(q.TEXTURE_2D,ce,ae.x,ae.y,Bt,jt,_e.image),ce===0&&ie.generateMipmaps&&q.generateMipmap(q.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(ae,_e,ie,ce,Ce=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const mt=ae.max.x-ae.min.x+1,Bt=ae.max.y-ae.min.y+1,jt=ae.max.z-ae.min.z+1,Ut=nt.convert(ce.format),dn=nt.convert(ce.type);let dt;if(ce.isData3DTexture)Xe.setTexture3D(ce,0),dt=q.TEXTURE_3D;else if(ce.isDataArrayTexture)Xe.setTexture2DArray(ce,0),dt=q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,ce.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,ce.unpackAlignment);const un=q.getParameter(q.UNPACK_ROW_LENGTH),Ji=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Di=q.getParameter(q.UNPACK_SKIP_PIXELS),go=q.getParameter(q.UNPACK_SKIP_ROWS),na=q.getParameter(q.UNPACK_SKIP_IMAGES),Ui=ie.isCompressedTexture?ie.mipmaps[0]:ie.image;q.pixelStorei(q.UNPACK_ROW_LENGTH,Ui.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Ui.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,ae.min.x),q.pixelStorei(q.UNPACK_SKIP_ROWS,ae.min.y),q.pixelStorei(q.UNPACK_SKIP_IMAGES,ae.min.z),ie.isDataTexture||ie.isData3DTexture?q.texSubImage3D(dt,Ce,_e.x,_e.y,_e.z,mt,Bt,jt,Ut,dn,Ui.data):ie.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(dt,Ce,_e.x,_e.y,_e.z,mt,Bt,jt,Ut,Ui.data)):q.texSubImage3D(dt,Ce,_e.x,_e.y,_e.z,mt,Bt,jt,Ut,dn,Ui),q.pixelStorei(q.UNPACK_ROW_LENGTH,un),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Ji),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Di),q.pixelStorei(q.UNPACK_SKIP_ROWS,go),q.pixelStorei(q.UNPACK_SKIP_IMAGES,na),Ce===0&&ce.generateMipmaps&&q.generateMipmap(dt),Me.unbindTexture()},this.initTexture=function(ae){ae.isCubeTexture?Xe.setTextureCube(ae,0):ae.isData3DTexture?Xe.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?Xe.setTexture2DArray(ae,0):Xe.setTexture2D(ae,0),Me.unbindTexture()},this.resetState=function(){S=0,x=0,E=null,Me.reset(),ft.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ld}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Gn?mm:mX}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===mm?Gn:kh}}class vye extends LX{}vye.prototype.isWebGL1Renderer=!0;class u5{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pt(e),this.density=t}clone(){return new u5(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class h5{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Pt(e),this.near=t,this.far=n}clone(){return new h5(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class fT extends Bi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class d5{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wc()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wc()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $a=new se;class Fv{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)$a.fromBufferAttribute(this,t),$a.applyMatrix4(e),this.setXYZ(t,$a.x,$a.y,$a.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)$a.fromBufferAttribute(this,t),$a.applyNormalMatrix(e),this.setXYZ(t,$a.x,$a.y,$a.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)$a.fromBufferAttribute(this,t),$a.transformDirection(e),this.setXYZ(t,$a.x,$a.y,$a.z);return this}setX(e,t){return this.normalized&&(t=ii(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ii(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ii(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ii(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_c(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_c(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_c(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_c(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ii(t,this.array),n=ii(n,this.array),s=ii(s,this.array),r=ii(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new is(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fv(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class TX extends ta{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let by;const xx=new se,wy=new se,Cy=new se,Sy=new rt,Ex=new rt,yye=new Rn,mA=new se,Lx=new se,_A=new se,Cae=new rt,k6=new rt,Sae=new rt;class bye extends Bi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",by===void 0){by=new Kn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new d5(t,5);by.setIndex([0,1,2,0,2,3]),by.setAttribute("position",new Fv(n,3,0,!1)),by.setAttribute("uv",new Fv(n,2,3,!1))}this.geometry=by,this.material=e!==void 0?e:new TX,this.center=new rt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wy.setFromMatrixScale(this.matrixWorld),yye.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&wy.multiplyScalar(-Cy.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const o=this.center;vA(mA.set(-.5,-.5,0),Cy,o,wy,s,r),vA(Lx.set(.5,-.5,0),Cy,o,wy,s,r),vA(_A.set(.5,.5,0),Cy,o,wy,s,r),Cae.set(0,0),k6.set(1,0),Sae.set(1,1);let a=e.ray.intersectTriangle(mA,Lx,_A,!1,xx);if(a===null&&(vA(Lx.set(-.5,.5,0),Cy,o,wy,s,r),k6.set(0,1),a=e.ray.intersectTriangle(mA,_A,Lx,!1,xx),a===null))return;const l=e.ray.origin.distanceTo(xx);l<e.near||l>e.far||t.push({distance:l,point:xx.clone(),uv:Dl.getInterpolation(xx,mA,Lx,_A,Cae,k6,Sae,new rt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function vA(i,e,t,n,s,r){Sy.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(Ex.x=r*Sy.x-s*Sy.y,Ex.y=s*Sy.x+r*Sy.y):Ex.copy(Sy),i.copy(e),i.x+=Ex.x,i.y+=Ex.y,i.applyMatrix4(yye)}const yA=new se,xae=new se;class wye extends Bi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){yA.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(yA);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){yA.setFromMatrixPosition(e.matrixWorld),xae.setFromMatrixPosition(this.matrixWorld);const n=yA.distanceTo(xae)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),n>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const o=n[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Eae=new se,Lae=new Fi,Tae=new Fi,Fpt=new se,kae=new Rn,xy=new se,M6=new Nc,Mae=new Rn,D6=new tS;class Cye extends Zs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Rn,this.bindMatrixInverse=new Rn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ic),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)xy.fromBufferAttribute(t,n),this.applyBoneTransform(n,xy),this.boundingBox.expandByPoint(xy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Nc),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)xy.fromBufferAttribute(t,n),this.applyBoneTransform(n,xy),this.boundingSphere.expandByPoint(xy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),M6.copy(this.boundingSphere),M6.applyMatrix4(s),e.ray.intersectsSphere(M6)!==!1&&(Mae.copy(s).invert(),D6.copy(e.ray).applyMatrix4(Mae),!(this.boundingBox!==null&&D6.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,D6)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fi,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;Lae.fromBufferAttribute(s.attributes.skinIndex,e),Tae.fromBufferAttribute(s.attributes.skinWeight,e),Eae.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=Tae.getComponent(r);if(o!==0){const a=Lae.getComponent(r);kae.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(Fpt.copy(Eae).applyMatrix4(kae),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class kX extends Bi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xw extends nr{constructor(e=null,t=1,n=1,s,r,o,a,l,c=kr,u=kr,h,d){super(null,o,a,l,c,u,s,r,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Dae=new Rn,Bpt=new Rn;class f5{constructor(e=[],t=[]){this.uuid=wc(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Rn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Rn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:Bpt;Dae.multiplyMatrices(a,t[r]),Dae.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new f5(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=sye(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new xw(t,e,e,Nl,Ed);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new kX),this.bones.push(o),this.boneInverses.push(new Rn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=n[s];e.boneInverses.push(a.toArray())}return e}}class Bv extends is{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ey=new Rn,Aae=new Rn,bA=[],Iae=new Ic,zpt=new Rn,Tx=new Zs,kx=new Nc;class Sye extends Zs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bv(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,zpt)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ic),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ey),Iae.copy(e.boundingBox).applyMatrix4(Ey),this.boundingBox.union(Iae)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Nc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ey),kx.copy(e.boundingSphere).applyMatrix4(Ey),this.boundingSphere.union(kx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Tx.geometry=this.geometry,Tx.material=this.material,Tx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kx.copy(this.boundingSphere),kx.applyMatrix4(n),e.ray.intersectsSphere(kx)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Ey),Aae.multiplyMatrices(n,Ey),Tx.matrixWorld=Aae,Tx.raycast(e,bA);for(let o=0,a=bA.length;o<a;o++){const l=bA[o];l.instanceId=r,l.object=this,t.push(l)}bA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bv(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class dl extends ta{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Nae=new se,Rae=new se,Pae=new Rn,A6=new tS,wA=new Nc;let Fm=class extends Bi{constructor(e=new Kn,t=new dl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)Nae.fromBufferAttribute(t,s-1),Rae.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=Nae.distanceTo(Rae);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wA.copy(n.boundingSphere),wA.applyMatrix4(s),wA.radius+=r,e.ray.intersectsSphere(wA)===!1)return;Pae.copy(s).invert(),A6.copy(e.ray).applyMatrix4(Pae);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new se,u=new se,h=new se,d=new se,f=this.isLineSegments?2:1,g=n.index,_=n.attributes.position;if(g!==null){const m=Math.max(0,o.start),v=Math.min(g.count,o.start+o.count);for(let y=m,C=v-1;y<C;y+=f){const S=g.getX(y),x=g.getX(y+1);if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,x),A6.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(d);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),v=Math.min(_.count,o.start+o.count);for(let y=m,C=v-1;y<C;y+=f){if(c.fromBufferAttribute(_,y),u.fromBufferAttribute(_,y+1),A6.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}};const Oae=new se,Fae=new se;class ef extends Fm{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)Oae.fromBufferAttribute(t,s),Fae.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+Oae.distanceTo(Fae);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class xye extends Fm{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class MX extends ta{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Bae=new Rn,t$=new tS,CA=new Nc,SA=new se;class Eye extends Bi{constructor(e=new Kn,t=new MX){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),CA.copy(n.boundingSphere),CA.applyMatrix4(s),CA.radius+=r,e.ray.intersectsSphere(CA)===!1)return;Bae.copy(s).invert(),t$.copy(e.ray).applyMatrix4(Bae);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,h=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let g=d,p=f;g<p;g++){const _=c.getX(g);SA.fromBufferAttribute(h,_),zae(SA,_,l,s,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let g=d,p=f;g<p;g++)SA.fromBufferAttribute(h,g),zae(SA,g,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function zae(i,e,t,n,s,r,o){const a=t$.distanceSqToPoint(i);if(a<t){const l=new se;t$.closestPointToPoint(i,l),l.applyMatrix4(n);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Upt extends nr{constructor(e,t,n,s,r,o,a,l,c){super(e,t,n,s,r,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Fs,this.magFilter=r!==void 0?r:Fs,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Vpt extends nr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=kr,this.minFilter=kr,this.generateMipmaps=!1,this.needsUpdate=!0}}class DX extends nr{constructor(e,t,n,s,r,o,a,l,c,u,h,d){super(null,o,a,l,c,u,s,r,h,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Wpt extends DX{constructor(e,t,n,s,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ca}}class Hpt extends nr{constructor(e,t,n,s,r,o,a,l,c){super(e,t,n,s,r,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let s=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let a=0,l=r-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=n[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,n[s]===o)return s/(r-1);const u=n[s],d=n[s+1]-u,f=(o-u)/d;return(s+f)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=t||(o.isVector2?new rt:new se);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new se,s=[],r=[],o=[],a=new se,l=new Rn;for(let f=0;f<=e;f++){const g=f/e;s[f]=this.getTangentAt(g,new se)}r[0]=new se,o[0]=new se;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),h=Math.abs(s[0].y),d=Math.abs(s[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let f=1;f<=e;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(s[f-1],s[f]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(pr(s[f-1].dot(s[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(a,g))}o[f].crossVectors(s[f],r[f])}if(t===!0){let f=Math.acos(pr(r[0].dot(r[e]),-1,1));f/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(f=-f);for(let g=1;g<=e;g++)r[g].applyMatrix4(l.makeRotationAxis(s[g],f*g)),o[g].crossVectors(s[g],r[g])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class g5 extends Fh{constructor(e=0,t=0,n=1,s=1,r=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new rt,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const a=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Lye extends g5{constructor(e,t,n,s,r,o){super(e,t,n,n,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function AX(){let i=0,e=0,t=0,n=0;function s(r,o,a,l){i=r,e=a,t=-3*r+3*o-2*a-l,n=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,u,h){let d=(o-r)/c-(a-r)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,s(o,a,d,f)},calc:function(r){const o=r*r,a=o*r;return i+e*r+t*o+n*a}}}const xA=new se,I6=new AX,N6=new AX,R6=new AX;class Tye extends Fh{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new se){const n=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:l===0&&a===r-1&&(a=r-2,l=1);let c,u;this.closed||a>0?c=s[(a-1)%r]:(xA.subVectors(s[0],s[1]).add(s[0]),c=xA);const h=s[a%r],d=s[(a+1)%r];if(this.closed||a+2<r?u=s[(a+2)%r]:(xA.subVectors(s[r-1],s[r-2]).add(s[r-1]),u=xA),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),f),p=Math.pow(h.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(u),f);p<1e-4&&(p=1),g<1e-4&&(g=p),_<1e-4&&(_=p),I6.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,g,p,_),N6.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,g,p,_),R6.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,g,p,_)}else this.curveType==="catmullrom"&&(I6.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),N6.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),R6.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return n.set(I6.calc(l),N6.calc(l),R6.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new se().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Uae(i,e,t,n,s){const r=(n-e)*.5,o=(s-t)*.5,a=i*i,l=i*a;return(2*t-2*n+r+o)*l+(-3*t+3*n-2*r-o)*a+r*i+t}function $pt(i,e){const t=1-i;return t*t*e}function Gpt(i,e){return 2*(1-i)*i*e}function jpt(i,e){return i*i*e}function wL(i,e,t,n){return $pt(i,e)+Gpt(i,t)+jpt(i,n)}function Kpt(i,e){const t=1-i;return t*t*t*e}function qpt(i,e){const t=1-i;return 3*t*t*i*e}function Xpt(i,e){return 3*(1-i)*i*i*e}function Ypt(i,e){return i*i*i*e}function CL(i,e,t,n,s){return Kpt(i,e)+qpt(i,t)+Xpt(i,n)+Ypt(i,s)}class IX extends Fh{constructor(e=new rt,t=new rt,n=new rt,s=new rt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new rt){const n=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(CL(e,s.x,r.x,o.x,a.x),CL(e,s.y,r.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kye extends Fh{constructor(e=new se,t=new se,n=new se,s=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new se){const n=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(CL(e,s.x,r.x,o.x,a.x),CL(e,s.y,r.y,o.y,a.y),CL(e,s.z,r.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class p5 extends Fh{constructor(e=new rt,t=new rt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new rt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new rt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NX extends Fh{constructor(e=new se,t=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new se){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RX extends Fh{constructor(e=new rt,t=new rt,n=new rt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new rt){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(wL(e,s.x,r.x,o.x),wL(e,s.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m5 extends Fh{constructor(e=new se,t=new se,n=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new se){const n=t,s=this.v0,r=this.v1,o=this.v2;return n.set(wL(e,s.x,r.x,o.x),wL(e,s.y,r.y,o.y),wL(e,s.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PX extends Fh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new rt){const n=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,l=s[o===0?o:o-1],c=s[o],u=s[o>s.length-2?s.length-1:o+1],h=s[o>s.length-3?s.length-1:o+2];return n.set(Uae(a,l.x,c.x,u.x,h.x),Uae(a,l.y,c.y,u.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new rt().fromArray(s))}return this}}var OX=Object.freeze({__proto__:null,ArcCurve:Lye,CatmullRomCurve3:Tye,CubicBezierCurve:IX,CubicBezierCurve3:kye,EllipseCurve:g5,LineCurve:p5,LineCurve3:NX,QuadraticBezierCurve:RX,QuadraticBezierCurve3:m5,SplineCurve:PX});class Mye extends Fh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new p5(t,e))}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const o=s[r]-n,a=this.curves[r],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new OX[s.type]().fromJSON(s))}return this}}class gT extends Mye{constructor(e){super(),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new p5(this.currentPoint.clone(),new rt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new RX(this.currentPoint.clone(),new rt(e,t),new rt(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,o){const a=new IX(this.currentPoint.clone(),new rt(e,t),new rt(n,s),new rt(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new PX(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,s,r,o),this}absarc(e,t,n,s,r,o){return this.absellipse(e,t,n,n,s,r,o),this}ellipse(e,t,n,s,r,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,s,r,o,a,l),this}absellipse(e,t,n,s,r,o,a,l){const c=new g5(e,t,n,s,r,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Lk extends Kn{constructor(e=[new rt(0,-.5),new rt(.5,0),new rt(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=pr(s,0,Math.PI*2);const r=[],o=[],a=[],l=[],c=[],u=1/t,h=new se,d=new rt,f=new se,g=new se,p=new se;let _=0,m=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:_=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,f.x=m*1,f.y=-_,f.z=m*0,p.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(p.x,p.y,p.z);break;default:_=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,f.x=m*1,f.y=-_,f.z=m*0,g.copy(f),f.x+=p.x,f.y+=p.y,f.z+=p.z,f.normalize(),l.push(f.x,f.y,f.z),p.copy(g)}for(let v=0;v<=t;v++){const y=n+v*u*s,C=Math.sin(y),S=Math.cos(y);for(let x=0;x<=e.length-1;x++){h.x=e[x].x*C,h.y=e[x].y,h.z=e[x].x*S,o.push(h.x,h.y,h.z),d.x=v/t,d.y=x/(e.length-1),a.push(d.x,d.y);const E=l[3*x+0]*C,L=l[3*x+1],T=l[3*x+0]*S;c.push(E,L,T)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){const C=y+v*e.length,S=C,x=C+e.length,E=C+e.length+1,L=C+1;r.push(S,x,L),r.push(E,L,x)}this.setIndex(r),this.setAttribute("position",new Jt(o,3)),this.setAttribute("uv",new Jt(a,2)),this.setAttribute("normal",new Jt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lk(e.points,e.segments,e.phiStart,e.phiLength)}}class _5 extends Lk{constructor(e=1,t=1,n=4,s=8){const r=new gT;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(n),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s}}static fromJSON(e){return new _5(e.radius,e.length,e.capSegments,e.radialSegments)}}class v5 extends Kn{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],o=[],a=[],l=[],c=new se,u=new rt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=n+h/t*s;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)r.push(h,h+1,0);this.setIndex(r),this.setAttribute("position",new Jt(o,3)),this.setAttribute("normal",new Jt(a,3)),this.setAttribute("uv",new Jt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v5(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class v1 extends Kn{constructor(e=1,t=1,n=1,s=32,r=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const c=this;s=Math.floor(s),r=Math.floor(r);const u=[],h=[],d=[],f=[];let g=0;const p=[],_=n/2;let m=0;v(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Jt(h,3)),this.setAttribute("normal",new Jt(d,3)),this.setAttribute("uv",new Jt(f,2));function v(){const C=new se,S=new se;let x=0;const E=(t-e)/n;for(let L=0;L<=r;L++){const T=[],D=L/r,I=D*(t-e)+e;for(let N=0;N<=s;N++){const P=N/s,O=P*l+a,V=Math.sin(O),z=Math.cos(O);S.x=I*V,S.y=-D*n+_,S.z=I*z,h.push(S.x,S.y,S.z),C.set(V,E,z).normalize(),d.push(C.x,C.y,C.z),f.push(P,1-D),T.push(g++)}p.push(T)}for(let L=0;L<s;L++)for(let T=0;T<r;T++){const D=p[T][L],I=p[T+1][L],N=p[T+1][L+1],P=p[T][L+1];u.push(D,I,P),u.push(I,N,P),x+=6}c.addGroup(m,x,0),m+=x}function y(C){const S=g,x=new rt,E=new se;let L=0;const T=C===!0?e:t,D=C===!0?1:-1;for(let N=1;N<=s;N++)h.push(0,_*D,0),d.push(0,D,0),f.push(.5,.5),g++;const I=g;for(let N=0;N<=s;N++){const O=N/s*l+a,V=Math.cos(O),z=Math.sin(O);E.x=T*z,E.y=_*D,E.z=T*V,h.push(E.x,E.y,E.z),d.push(0,D,0),x.x=V*.5+.5,x.y=z*.5*D+.5,f.push(x.x,x.y),g++}for(let N=0;N<s;N++){const P=S+N,O=I+N;C===!0?u.push(O,O+1,P):u.push(O+1,O,P),L+=3}c.addGroup(m,L,C===!0?1:2),m+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class y5 extends v1{constructor(e=1,t=1,n=32,s=1,r=!1,o=0,a=Math.PI*2){super(0,e,t,n,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(e){return new y5(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qm extends Kn{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],o=[];a(s),c(n),u(),this.setAttribute("position",new Jt(r,3)),this.setAttribute("normal",new Jt(r.slice(),3)),this.setAttribute("uv",new Jt(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(v){const y=new se,C=new se,S=new se;for(let x=0;x<t.length;x+=3)f(t[x+0],y),f(t[x+1],C),f(t[x+2],S),l(y,C,S,v)}function l(v,y,C,S){const x=S+1,E=[];for(let L=0;L<=x;L++){E[L]=[];const T=v.clone().lerp(C,L/x),D=y.clone().lerp(C,L/x),I=x-L;for(let N=0;N<=I;N++)N===0&&L===x?E[L][N]=T:E[L][N]=T.clone().lerp(D,N/I)}for(let L=0;L<x;L++)for(let T=0;T<2*(x-L)-1;T++){const D=Math.floor(T/2);T%2===0?(d(E[L][D+1]),d(E[L+1][D]),d(E[L][D])):(d(E[L][D+1]),d(E[L+1][D+1]),d(E[L+1][D]))}}function c(v){const y=new se;for(let C=0;C<r.length;C+=3)y.x=r[C+0],y.y=r[C+1],y.z=r[C+2],y.normalize().multiplyScalar(v),r[C+0]=y.x,r[C+1]=y.y,r[C+2]=y.z}function u(){const v=new se;for(let y=0;y<r.length;y+=3){v.x=r[y+0],v.y=r[y+1],v.z=r[y+2];const C=_(v)/2/Math.PI+.5,S=m(v)/Math.PI+.5;o.push(C,1-S)}g(),h()}function h(){for(let v=0;v<o.length;v+=6){const y=o[v+0],C=o[v+2],S=o[v+4],x=Math.max(y,C,S),E=Math.min(y,C,S);x>.9&&E<.1&&(y<.2&&(o[v+0]+=1),C<.2&&(o[v+2]+=1),S<.2&&(o[v+4]+=1))}}function d(v){r.push(v.x,v.y,v.z)}function f(v,y){const C=v*3;y.x=e[C+0],y.y=e[C+1],y.z=e[C+2]}function g(){const v=new se,y=new se,C=new se,S=new se,x=new rt,E=new rt,L=new rt;for(let T=0,D=0;T<r.length;T+=9,D+=6){v.set(r[T+0],r[T+1],r[T+2]),y.set(r[T+3],r[T+4],r[T+5]),C.set(r[T+6],r[T+7],r[T+8]),x.set(o[D+0],o[D+1]),E.set(o[D+2],o[D+3]),L.set(o[D+4],o[D+5]),S.copy(v).add(y).add(C).divideScalar(3);const I=_(S);p(x,D+0,v,I),p(E,D+2,y,I),p(L,D+4,C,I)}}function p(v,y,C,S){S<0&&v.x===1&&(o[y]=v.x-1),C.x===0&&C.z===0&&(o[y]=S/2/Math.PI+.5)}function _(v){return Math.atan2(v.z,-v.x)}function m(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qm(e.vertices,e.indices,e.radius,e.details)}}class b5 extends qm{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b5(e.radius,e.detail)}}const EA=new se,LA=new se,P6=new se,TA=new Dl;class Dye extends Kn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(X0*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:p,b:_,c:m}=TA;if(p.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),m.fromBufferAttribute(a,c[2]),TA.getNormal(P6),h[0]=`${Math.round(p.x*s)},${Math.round(p.y*s)},${Math.round(p.z*s)}`,h[1]=`${Math.round(_.x*s)},${Math.round(_.y*s)},${Math.round(_.z*s)}`,h[2]=`${Math.round(m.x*s)},${Math.round(m.y*s)},${Math.round(m.z*s)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let v=0;v<3;v++){const y=(v+1)%3,C=h[v],S=h[y],x=TA[u[v]],E=TA[u[y]],L=`${C}_${S}`,T=`${S}_${C}`;T in d&&d[T]?(P6.dot(d[T].normal)<=r&&(f.push(x.x,x.y,x.z),f.push(E.x,E.y,E.z)),d[T]=null):L in d||(d[L]={index0:c[v],index1:c[y],normal:P6.clone()})}}for(const g in d)if(d[g]){const{index0:p,index1:_}=d[g];EA.fromBufferAttribute(a,p),LA.fromBufferAttribute(a,_),f.push(EA.x,EA.y,EA.z),f.push(LA.x,LA.y,LA.z)}this.setAttribute("position",new Jt(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Z0 extends gT{constructor(e){super(e),this.uuid=wc(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new gT().fromJSON(s))}return this}}const Zpt={triangulate:function(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=Aye(i,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,u,h,d,f;if(n&&(r=nmt(i,e,r,t)),i.length>80*t){a=c=i[0],l=u=i[1];for(let g=t;g<s;g+=t)h=i[g],d=i[g+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return pT(r,o,t,a,l,f,0),o}};function Aye(i,e,t,n,s){let r,o;if(s===fmt(i,e,t,n)>0)for(r=e;r<t;r+=n)o=Vae(r,i[r],i[r+1],o);else for(r=t-n;r>=e;r-=n)o=Vae(r,i[r],i[r+1],o);return o&&w5(o,o.next)&&(_T(o),o=o.next),o}function zv(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(w5(t,t.next)||qs(t.prev,t,t.next)===0)){if(_T(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function pT(i,e,t,n,s,r,o){if(!i)return;!o&&r&&amt(i,n,s,r);let a=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,r?Jpt(i,n,s,r):Qpt(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),_T(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=emt(zv(i),e,t),pT(i,e,t,n,s,r,2)):o===2&&tmt(i,e,t,n,s,r):pT(zv(i),e,t,n,s,r,1);break}}}function Qpt(i){const e=i.prev,t=i,n=i.next;if(qs(e,t,n)>=0)return!1;const s=e.x,r=t.x,o=n.x,a=e.y,l=t.y,c=n.y,u=s<r?s<o?s:o:r<o?r:o,h=a<l?a<c?a:c:l<c?l:c,d=s>r?s>o?s:o:r>o?r:o,f=a>l?a>c?a:c:l>c?l:c;let g=n.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=h&&g.y<=f&&Mb(s,a,r,l,o,c,g.x,g.y)&&qs(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Jpt(i,e,t,n){const s=i.prev,r=i,o=i.next;if(qs(s,r,o)>=0)return!1;const a=s.x,l=r.x,c=o.x,u=s.y,h=r.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,g=u<h?u<d?u:d:h<d?h:d,p=a>l?a>c?a:c:l>c?l:c,_=u>h?u>d?u:d:h>d?h:d,m=n$(f,g,e,t,n),v=n$(p,_,e,t,n);let y=i.prevZ,C=i.nextZ;for(;y&&y.z>=m&&C&&C.z<=v;){if(y.x>=f&&y.x<=p&&y.y>=g&&y.y<=_&&y!==s&&y!==o&&Mb(a,u,l,h,c,d,y.x,y.y)&&qs(y.prev,y,y.next)>=0||(y=y.prevZ,C.x>=f&&C.x<=p&&C.y>=g&&C.y<=_&&C!==s&&C!==o&&Mb(a,u,l,h,c,d,C.x,C.y)&&qs(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;y&&y.z>=m;){if(y.x>=f&&y.x<=p&&y.y>=g&&y.y<=_&&y!==s&&y!==o&&Mb(a,u,l,h,c,d,y.x,y.y)&&qs(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;C&&C.z<=v;){if(C.x>=f&&C.x<=p&&C.y>=g&&C.y<=_&&C!==s&&C!==o&&Mb(a,u,l,h,c,d,C.x,C.y)&&qs(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function emt(i,e,t){let n=i;do{const s=n.prev,r=n.next.next;!w5(s,r)&&Iye(s,n,n.next,r)&&mT(s,r)&&mT(r,s)&&(e.push(s.i/t|0),e.push(n.i/t|0),e.push(r.i/t|0),_T(n),_T(n.next),n=i=r),n=n.next}while(n!==i);return zv(n)}function tmt(i,e,t,n,s,r){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&umt(o,a)){let l=Nye(o,a);o=zv(o,o.next),l=zv(l,l.next),pT(o,e,t,n,s,r,0),pT(l,e,t,n,s,r,0);return}a=a.next}o=o.next}while(o!==i)}function nmt(i,e,t,n){const s=[];let r,o,a,l,c;for(r=0,o=e.length;r<o;r++)a=e[r]*n,l=r<o-1?e[r+1]*n:i.length,c=Aye(i,a,l,n,!1),c===c.next&&(c.steiner=!0),s.push(cmt(c));for(s.sort(imt),r=0;r<s.length;r++)t=smt(s[r],t);return t}function imt(i,e){return i.x-e.x}function smt(i,e){const t=rmt(i,e);if(!t)return e;const n=Nye(t,i);return zv(n,n.next),zv(t,t.next)}function rmt(i,e){let t=e,n=-1/0,s;const r=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>n&&(n=d,s=t.x<t.next.x?t:t.next,d===r))return s}t=t.next}while(t!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0,h;t=s;do r>=t.x&&t.x>=l&&r!==t.x&&Mb(o<c?r:n,o,l,c,o<c?n:r,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(r-t.x),mT(t,i)&&(h<u||h===u&&(t.x>s.x||t.x===s.x&&omt(s,t)))&&(s=t,u=h)),t=t.next;while(t!==a);return s}function omt(i,e){return qs(i.prev,i,e.prev)<0&&qs(e.next,i,i.next)<0}function amt(i,e,t,n){let s=i;do s.z===0&&(s.z=n$(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,lmt(s)}function lmt(i){let e,t,n,s,r,o,a,l,c=1;do{for(t=i,i=null,r=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(s=t,t=t.nextZ,a--):(s=n,n=n.nextZ,l--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;t=n}r.nextZ=null,c*=2}while(o>1);return i}function n$(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function cmt(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Mb(i,e,t,n,s,r,o,a){return(s-o)*(e-a)>=(i-o)*(r-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(s-o)*(n-a)}function umt(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!hmt(i,e)&&(mT(i,e)&&mT(e,i)&&dmt(i,e)&&(qs(i.prev,i,e.prev)||qs(i,e.prev,e))||w5(i,e)&&qs(i.prev,i,i.next)>0&&qs(e.prev,e,e.next)>0)}function qs(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function w5(i,e){return i.x===e.x&&i.y===e.y}function Iye(i,e,t,n){const s=MA(qs(i,e,t)),r=MA(qs(i,e,n)),o=MA(qs(t,n,i)),a=MA(qs(t,n,e));return!!(s!==r&&o!==a||s===0&&kA(i,t,e)||r===0&&kA(i,n,e)||o===0&&kA(t,i,n)||a===0&&kA(t,e,n))}function kA(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function MA(i){return i>0?1:i<0?-1:0}function hmt(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Iye(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function mT(i,e){return qs(i.prev,i,i.next)<0?qs(i,e,i.next)>=0&&qs(i,i.prev,e)>=0:qs(i,e,i.prev)<0||qs(i,i.next,e)<0}function dmt(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Nye(i,e){const t=new i$(i.i,i.x,i.y),n=new i$(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function Vae(i,e,t,n){const s=new i$(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function _T(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function i$(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fmt(i,e,t,n){let s=0;for(let r=e,o=t-n;r<t;r+=n)s+=(i[o]-i[r])*(i[r+1]+i[o+1]),o=r;return s}class Od{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return Od.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];Wae(e),Hae(n,e);let o=e.length;t.forEach(Wae);for(let l=0;l<t.length;l++)s.push(o),o+=t[l].length,Hae(n,t[l]);const a=Zpt.triangulate(n,s);for(let l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}}function Wae(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Hae(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class C5 extends Kn{constructor(e=new Z0([new rt(.5,.5),new rt(-.5,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Jt(s,3)),this.setAttribute("uv",new Jt(r,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:f-.1,p=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const m=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:gmt;let y,C=!1,S,x,E,L;m&&(y=m.getSpacedPoints(u),C=!0,d=!1,S=m.computeFrenetFrames(u,!1),x=new se,E=new se,L=new se),d||(_=0,f=0,g=0,p=0);const T=a.extractPoints(c);let D=T.shape;const I=T.holes;if(!Od.isClockWise(D)){D=D.reverse();for(let q=0,Ee=I.length;q<Ee;q++){const De=I[q];Od.isClockWise(De)&&(I[q]=De.reverse())}}const P=Od.triangulateShape(D,I),O=D;for(let q=0,Ee=I.length;q<Ee;q++){const De=I[q];D=D.concat(De)}function V(q,Ee,De){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),q.clone().addScaledVector(Ee,De)}const z=D.length,K=P.length;function H(q,Ee,De){let Ae,Me,Je;const Pe=q.x-Ee.x,Xe=q.y-Ee.y,Re=De.x-q.x,Fe=De.y-q.y,wt=Pe*Pe+Xe*Xe,te=Pe*Fe-Xe*Re;if(Math.abs(te)>Number.EPSILON){const Z=Math.sqrt(wt),we=Math.sqrt(Re*Re+Fe*Fe),Ye=Ee.x-Xe/Z,je=Ee.y+Pe/Z,Ge=De.x-Fe/we,ot=De.y+Re/we,tt=((Ge-Ye)*Fe-(ot-je)*Re)/(Pe*Fe-Xe*Re);Ae=Ye+Pe*tt-q.x,Me=je+Xe*tt-q.y;const Oe=Ae*Ae+Me*Me;if(Oe<=2)return new rt(Ae,Me);Je=Math.sqrt(Oe/2)}else{let Z=!1;Pe>Number.EPSILON?Re>Number.EPSILON&&(Z=!0):Pe<-Number.EPSILON?Re<-Number.EPSILON&&(Z=!0):Math.sign(Xe)===Math.sign(Fe)&&(Z=!0),Z?(Ae=-Xe,Me=Pe,Je=Math.sqrt(wt)):(Ae=Pe,Me=Xe,Je=Math.sqrt(wt/2))}return new rt(Ae/Je,Me/Je)}const U=[];for(let q=0,Ee=O.length,De=Ee-1,Ae=q+1;q<Ee;q++,De++,Ae++)De===Ee&&(De=0),Ae===Ee&&(Ae=0),U[q]=H(O[q],O[De],O[Ae]);const j=[];let W,X=U.concat();for(let q=0,Ee=I.length;q<Ee;q++){const De=I[q];W=[];for(let Ae=0,Me=De.length,Je=Me-1,Pe=Ae+1;Ae<Me;Ae++,Je++,Pe++)Je===Me&&(Je=0),Pe===Me&&(Pe=0),W[Ae]=H(De[Ae],De[Je],De[Pe]);j.push(W),X=X.concat(W)}for(let q=0;q<_;q++){const Ee=q/_,De=f*Math.cos(Ee*Math.PI/2),Ae=g*Math.sin(Ee*Math.PI/2)+p;for(let Me=0,Je=O.length;Me<Je;Me++){const Pe=V(O[Me],U[Me],Ae);ye(Pe.x,Pe.y,-De)}for(let Me=0,Je=I.length;Me<Je;Me++){const Pe=I[Me];W=j[Me];for(let Xe=0,Re=Pe.length;Xe<Re;Xe++){const Fe=V(Pe[Xe],W[Xe],Ae);ye(Fe.x,Fe.y,-De)}}}const ee=g+p;for(let q=0;q<z;q++){const Ee=d?V(D[q],X[q],ee):D[q];C?(E.copy(S.normals[0]).multiplyScalar(Ee.x),x.copy(S.binormals[0]).multiplyScalar(Ee.y),L.copy(y[0]).add(E).add(x),ye(L.x,L.y,L.z)):ye(Ee.x,Ee.y,0)}for(let q=1;q<=u;q++)for(let Ee=0;Ee<z;Ee++){const De=d?V(D[Ee],X[Ee],ee):D[Ee];C?(E.copy(S.normals[q]).multiplyScalar(De.x),x.copy(S.binormals[q]).multiplyScalar(De.y),L.copy(y[q]).add(E).add(x),ye(L.x,L.y,L.z)):ye(De.x,De.y,h/u*q)}for(let q=_-1;q>=0;q--){const Ee=q/_,De=f*Math.cos(Ee*Math.PI/2),Ae=g*Math.sin(Ee*Math.PI/2)+p;for(let Me=0,Je=O.length;Me<Je;Me++){const Pe=V(O[Me],U[Me],Ae);ye(Pe.x,Pe.y,h+De)}for(let Me=0,Je=I.length;Me<Je;Me++){const Pe=I[Me];W=j[Me];for(let Xe=0,Re=Pe.length;Xe<Re;Xe++){const Fe=V(Pe[Xe],W[Xe],Ae);C?ye(Fe.x,Fe.y+y[u-1].y,y[u-1].x+De):ye(Fe.x,Fe.y,h+De)}}}le(),fe();function le(){const q=s.length/3;if(d){let Ee=0,De=z*Ee;for(let Ae=0;Ae<K;Ae++){const Me=P[Ae];xe(Me[2]+De,Me[1]+De,Me[0]+De)}Ee=u+_*2,De=z*Ee;for(let Ae=0;Ae<K;Ae++){const Me=P[Ae];xe(Me[0]+De,Me[1]+De,Me[2]+De)}}else{for(let Ee=0;Ee<K;Ee++){const De=P[Ee];xe(De[2],De[1],De[0])}for(let Ee=0;Ee<K;Ee++){const De=P[Ee];xe(De[0]+z*u,De[1]+z*u,De[2]+z*u)}}n.addGroup(q,s.length/3-q,0)}function fe(){const q=s.length/3;let Ee=0;be(O,Ee),Ee+=O.length;for(let De=0,Ae=I.length;De<Ae;De++){const Me=I[De];be(Me,Ee),Ee+=Me.length}n.addGroup(q,s.length/3-q,1)}function be(q,Ee){let De=q.length;for(;--De>=0;){const Ae=De;let Me=De-1;Me<0&&(Me=q.length-1);for(let Je=0,Pe=u+_*2;Je<Pe;Je++){const Xe=z*Je,Re=z*(Je+1),Fe=Ee+Ae+Xe,wt=Ee+Me+Xe,te=Ee+Me+Re,Z=Ee+Ae+Re;He(Fe,wt,te,Z)}}}function ye(q,Ee,De){l.push(q),l.push(Ee),l.push(De)}function xe(q,Ee,De){qe(q),qe(Ee),qe(De);const Ae=s.length/3,Me=v.generateTopUV(n,s,Ae-3,Ae-2,Ae-1);ke(Me[0]),ke(Me[1]),ke(Me[2])}function He(q,Ee,De,Ae){qe(q),qe(Ee),qe(Ae),qe(Ee),qe(De),qe(Ae);const Me=s.length/3,Je=v.generateSideWallUV(n,s,Me-6,Me-3,Me-2,Me-1);ke(Je[0]),ke(Je[1]),ke(Je[3]),ke(Je[1]),ke(Je[2]),ke(Je[3])}function qe(q){s.push(l[q*3+0]),s.push(l[q*3+1]),s.push(l[q*3+2])}function ke(q){r.push(q.x),r.push(q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return pmt(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const a=t[e.shapes[r]];n.push(a)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new OX[s.type]().fromJSON(s)),new C5(n,e.options)}}const gmt={generateTopUV:function(i,e,t,n,s){const r=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],c=e[s*3],u=e[s*3+1];return[new rt(r,o),new rt(a,l),new rt(c,u)]},generateSideWallUV:function(i,e,t,n,s,r){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],h=e[n*3+2],d=e[s*3],f=e[s*3+1],g=e[s*3+2],p=e[r*3],_=e[r*3+1],m=e[r*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new rt(o,1-l),new rt(c,1-h),new rt(d,1-g),new rt(p,1-m)]:[new rt(a,1-l),new rt(u,1-h),new rt(f,1-g),new rt(_,1-m)]}};function pmt(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class S5 extends qm{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new S5(e.radius,e.detail)}}class Tk extends qm{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tk(e.radius,e.detail)}}class x5 extends Kn{constructor(e=.5,t=1,n=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:o},n=Math.max(3,n),s=Math.max(1,s);const a=[],l=[],c=[],u=[];let h=e;const d=(t-e)/s,f=new se,g=new rt;for(let p=0;p<=s;p++){for(let _=0;_<=n;_++){const m=r+_/n*o;f.x=h*Math.cos(m),f.y=h*Math.sin(m),l.push(f.x,f.y,f.z),c.push(0,0,1),g.x=(f.x/t+1)/2,g.y=(f.y/t+1)/2,u.push(g.x,g.y)}h+=d}for(let p=0;p<s;p++){const _=p*(n+1);for(let m=0;m<n;m++){const v=m+_,y=v,C=v+n+1,S=v+n+2,x=v+1;a.push(y,C,x),a.push(C,S,x)}}this.setIndex(a),this.setAttribute("position",new Jt(l,3)),this.setAttribute("normal",new Jt(c,3)),this.setAttribute("uv",new Jt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x5(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class E5 extends Kn{constructor(e=new Z0([new rt(0,.5),new rt(-.5,-.5),new rt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Jt(s,3)),this.setAttribute("normal",new Jt(r,3)),this.setAttribute("uv",new Jt(o,2));function c(u){const h=s.length/3,d=u.extractPoints(t);let f=d.shape;const g=d.holes;Od.isClockWise(f)===!1&&(f=f.reverse());for(let _=0,m=g.length;_<m;_++){const v=g[_];Od.isClockWise(v)===!0&&(g[_]=v.reverse())}const p=Od.triangulateShape(f,g);for(let _=0,m=g.length;_<m;_++){const v=g[_];f=f.concat(v)}for(let _=0,m=f.length;_<m;_++){const v=f[_];s.push(v.x,v.y,0),r.push(0,0,1),o.push(v.x,v.y)}for(let _=0,m=p.length;_<m;_++){const v=p[_],y=v[0]+h,C=v[1]+h,S=v[2]+h;n.push(y,C,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return mmt(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];n.push(o)}return new E5(n,e.curveSegments)}}function mmt(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class kk extends Kn{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new se,d=new se,f=[],g=[],p=[],_=[];for(let m=0;m<=n;m++){const v=[],y=m/n;let C=0;m===0&&o===0?C=.5/t:m===n&&l===Math.PI&&(C=-.5/t);for(let S=0;S<=t;S++){const x=S/t;h.x=-e*Math.cos(s+x*r)*Math.sin(o+y*a),h.y=e*Math.cos(o+y*a),h.z=e*Math.sin(s+x*r)*Math.sin(o+y*a),g.push(h.x,h.y,h.z),d.copy(h).normalize(),p.push(d.x,d.y,d.z),_.push(x+C,1-y),v.push(c++)}u.push(v)}for(let m=0;m<n;m++)for(let v=0;v<t;v++){const y=u[m][v+1],C=u[m][v],S=u[m+1][v],x=u[m+1][v+1];(m!==0||o>0)&&f.push(y,C,x),(m!==n-1||l<Math.PI)&&f.push(C,S,x)}this.setIndex(f),this.setAttribute("position",new Jt(g,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kk(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class L5 extends qm{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L5(e.radius,e.detail)}}class T5 extends Kn{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const o=[],a=[],l=[],c=[],u=new se,h=new se,d=new se;for(let f=0;f<=n;f++)for(let g=0;g<=s;g++){const p=g/s*r,_=f/n*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(p),h.y=(e+t*Math.cos(_))*Math.sin(p),h.z=t*Math.sin(_),a.push(h.x,h.y,h.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/s),c.push(f/n)}for(let f=1;f<=n;f++)for(let g=1;g<=s;g++){const p=(s+1)*f+g-1,_=(s+1)*(f-1)+g-1,m=(s+1)*(f-1)+g,v=(s+1)*f+g;o.push(p,_,v),o.push(_,m,v)}this.setIndex(o),this.setAttribute("position",new Jt(a,3)),this.setAttribute("normal",new Jt(l,3)),this.setAttribute("uv",new Jt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T5(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class k5 extends Kn{constructor(e=1,t=.4,n=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:o},n=Math.floor(n),s=Math.floor(s);const a=[],l=[],c=[],u=[],h=new se,d=new se,f=new se,g=new se,p=new se,_=new se,m=new se;for(let y=0;y<=n;++y){const C=y/n*r*Math.PI*2;v(C,r,o,e,f),v(C+.01,r,o,e,g),_.subVectors(g,f),m.addVectors(g,f),p.crossVectors(_,m),m.crossVectors(p,_),p.normalize(),m.normalize();for(let S=0;S<=s;++S){const x=S/s*Math.PI*2,E=-t*Math.cos(x),L=t*Math.sin(x);h.x=f.x+(E*m.x+L*p.x),h.y=f.y+(E*m.y+L*p.y),h.z=f.z+(E*m.z+L*p.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),c.push(d.x,d.y,d.z),u.push(y/n),u.push(S/s)}}for(let y=1;y<=n;y++)for(let C=1;C<=s;C++){const S=(s+1)*(y-1)+(C-1),x=(s+1)*y+(C-1),E=(s+1)*y+C,L=(s+1)*(y-1)+C;a.push(S,x,L),a.push(x,E,L)}this.setIndex(a),this.setAttribute("position",new Jt(l,3)),this.setAttribute("normal",new Jt(c,3)),this.setAttribute("uv",new Jt(u,2));function v(y,C,S,x,E){const L=Math.cos(y),T=Math.sin(y),D=S/C*y,I=Math.cos(D);E.x=x*(2+I)*.5*L,E.y=x*(2+I)*T*.5,E.z=x*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k5(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Uv extends Kn{constructor(e=new m5(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new se,l=new se,c=new rt;let u=new se;const h=[],d=[],f=[],g=[];p(),this.setIndex(g),this.setAttribute("position",new Jt(h,3)),this.setAttribute("normal",new Jt(d,3)),this.setAttribute("uv",new Jt(f,2));function p(){for(let y=0;y<t;y++)_(y);_(r===!1?t:0),v(),m()}function _(y){u=e.getPointAt(y/t,u);const C=o.normals[y],S=o.binormals[y];for(let x=0;x<=s;x++){const E=x/s*Math.PI*2,L=Math.sin(E),T=-Math.cos(E);l.x=T*C.x+L*S.x,l.y=T*C.y+L*S.y,l.z=T*C.z+L*S.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+n*l.x,a.y=u.y+n*l.y,a.z=u.z+n*l.z,h.push(a.x,a.y,a.z)}}function m(){for(let y=1;y<=t;y++)for(let C=1;C<=s;C++){const S=(s+1)*(y-1)+(C-1),x=(s+1)*y+(C-1),E=(s+1)*y+C,L=(s+1)*(y-1)+C;g.push(S,x,L),g.push(x,E,L)}}function v(){for(let y=0;y<=t;y++)for(let C=0;C<=s;C++)c.x=y/t,c.y=C/s,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Uv(new OX[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Rye extends Kn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new se,r=new se;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,f=h.count;for(let g=d,p=d+f;g<p;g+=3)for(let _=0;_<3;_++){const m=a.getX(g+_),v=a.getX(g+(_+1)%3);s.fromBufferAttribute(o,m),r.fromBufferAttribute(o,v),$ae(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;s.fromBufferAttribute(o,u),r.fromBufferAttribute(o,h),$ae(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Jt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $ae(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var Gae=Object.freeze({__proto__:null,BoxGeometry:jm,CapsuleGeometry:_5,CircleGeometry:v5,ConeGeometry:y5,CylinderGeometry:v1,DodecahedronGeometry:b5,EdgesGeometry:Dye,ExtrudeGeometry:C5,IcosahedronGeometry:S5,LatheGeometry:Lk,OctahedronGeometry:Tk,PlaneGeometry:Km,PolyhedronGeometry:qm,RingGeometry:x5,ShapeGeometry:E5,SphereGeometry:kk,TetrahedronGeometry:L5,TorusGeometry:T5,TorusKnotGeometry:k5,TubeGeometry:Uv,WireframeGeometry:Rye});class Pye extends ta{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Oye extends jd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FX extends ta{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fye extends FX{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Bye extends ta{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pt(16777215),this.specular=new Pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ck,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zye extends ta{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Uye extends ta{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Vye extends ta{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ck,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wye extends ta{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gm,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hye extends dl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Jc(i,e,t){return BX(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function R0(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function BX(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function $ye(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function s$(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,o=0;o!==n;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=i[a+l]}return s}function zX(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let o=r[n];if(o!==void 0)if(Array.isArray(o))do o=r[n],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=i[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[n],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do o=r[n],o!==void 0&&(e.push(r.time),t.push(o)),r=i[s++];while(r!==void 0)}function _mt(i,e,t,n,s=30){const r=i.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const g=c.times[f]*s;if(!(g<t||g>=n)){h.push(c.times[f]);for(let p=0;p<u;++p)d.push(c.values[f*u+p])}}h.length!==0&&(c.times=R0(h,c.times.constructor),c.values=R0(d,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r}function vmt(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let o=0;o<s;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const g=a.times.length-1;let p;if(r<=a.times[0]){const m=u,v=h-u;p=Jc(a.values,m,v)}else if(r>=a.times[g]){const m=g*h+u,v=m+h-u;p=Jc(a.values,m,v)}else{const m=a.createInterpolant(),v=u,y=h-u;m.evaluate(r),p=Jc(m.resultBuffer,v,y)}l==="quaternion"&&new qo().fromArray(p).normalize().conjugate().toArray(p);const _=c.times.length;for(let m=0;m<_;++m){const v=m*f+d;if(l==="quaternion")qo.multiplyQuaternionsFlat(c.values,v,p,0,c.values,v);else{const y=f-d*2;for(let C=0;C<y;++C)c.values[v+C]-=p[C]}}}return i.blendMode=pX,i}const ymt={arraySlice:Jc,convertArray:R0,isTypedArray:BX,getKeyframeOrder:$ye,sortedArray:s$,flattenJSON:zX,subclip:_mt,makeClipAdditive:vmt};class Mk{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=s,s=t[++n],e<s)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(n=2,r=a);for(let l=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(s=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Gye extends Mk{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:A0,endingEnd:A0}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case I0:r=e,a=2*t-n;break;case cT:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case I0:o=e,l=2*n-t;break;case cT:o=1,l=n+s[1]-s[0];break;default:o=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,g=(n-t)/(s-t),p=g*g,_=p*g,m=-d*_+2*d*p-d*g,v=(1+d)*_+(-1.5-2*d)*p+(-.5+d)*g+1,y=(-1-f)*_+(1.5+f)*p+.5*g,C=f*_-f*p;for(let S=0;S!==a;++S)r[S]=m*o[u+S]+v*o[c+S]+y*o[l+S]+C*o[h+S];return r}}class UX extends Mk{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(s-t),h=1-u;for(let d=0;d!==a;++d)r[d]=o[c+d]*h+o[l+d]*u;return r}}class jye extends Mk{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Bh{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=R0(t,this.TimeBufferType),this.values=R0(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:R0(e.times,Array),values:R0(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new jye(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new UX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Gye(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case aT:t=this.InterpolantFactoryMethodDiscrete;break;case lT:t=this.InterpolantFactoryMethodLinear;break;case tN:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return aT;case this.InterpolantFactoryMethodLinear:return lT;case this.InterpolantFactoryMethodSmooth:return tN}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,o=s-1;for(;r!==s&&n[r]<e;)++r;for(;o!==-1&&n[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=Jc(n,r,o),this.values=Jc(this.values,r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&BX(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Jc(this.times),t=Jc(this.values),n=this.getValueSize(),s=this.getInterpolation()===tN,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(s)l=!0;else{const h=a*n,d=h-n,f=h+n;for(let g=0;g!==n;++g){const p=t[h+g];if(p!==t[d+g]||p!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[h+f]}++o}}if(r>0){e[o]=e[r];for(let a=r*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Jc(e,0,o),this.values=Jc(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Jc(this.times,0),t=Jc(this.values,0),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Bh.prototype.TimeBufferType=Float32Array;Bh.prototype.ValueBufferType=Float32Array;Bh.prototype.DefaultInterpolation=lT;class y1 extends Bh{}y1.prototype.ValueTypeName="bool";y1.prototype.ValueBufferType=Array;y1.prototype.DefaultInterpolation=aT;y1.prototype.InterpolantFactoryMethodLinear=void 0;y1.prototype.InterpolantFactoryMethodSmooth=void 0;class VX extends Bh{}VX.prototype.ValueTypeName="color";class vT extends Bh{}vT.prototype.ValueTypeName="number";class Kye extends Mk{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(s-t);let c=e*a;for(let u=c+a;c!==u;c+=4)qo.slerpFlat(r,0,o,c-a,o,c,l);return r}}class iS extends Bh{InterpolantFactoryMethodLinear(e){return new Kye(this.times,this.values,this.getValueSize(),e)}}iS.prototype.ValueTypeName="quaternion";iS.prototype.DefaultInterpolation=lT;iS.prototype.InterpolantFactoryMethodSmooth=void 0;class b1 extends Bh{}b1.prototype.ValueTypeName="string";b1.prototype.ValueBufferType=Array;b1.prototype.DefaultInterpolation=aT;b1.prototype.InterpolantFactoryMethodLinear=void 0;b1.prototype.InterpolantFactoryMethodSmooth=void 0;class yT extends Bh{}yT.prototype.ValueTypeName="vector";class bT{constructor(e,t=-1,n,s=r5){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=wc(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(wmt(n[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(Bh.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const u=$ye(l);l=s$(l,1,u),c=s$(c,1,u),!s&&l[0]===0&&(l.push(r),c.push(c[0])),o.push(new vT(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(r);if(u&&u.length>1){const h=u[1];let d=s[h];d||(s[h]=d=[]),d.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,d,f,g,p){if(f.length!==0){const _=[],m=[];zX(f,_,m,g),_.length!==0&&p.push(new h(d,_,m))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let p=0;p<d[g].morphTargets.length;p++)f[d[g].morphTargets[p]]=-1;for(const p in f){const _=[],m=[];for(let v=0;v!==d[g].morphTargets.length;++v){const y=d[g];_.push(y.time),m.push(y.morphTarget===p?1:0)}s.push(new vT(".morphTargetInfluence["+p+"]",_,m))}l=f.length*o}else{const f=".bones["+t[h].name+"]";n(yT,f+".position",d,"pos",s),n(iS,f+".quaternion",d,"rot",s),n(yT,f+".scale",d,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function bmt(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vT;case"vector":case"vector2":case"vector3":case"vector4":return yT;case"color":return VX;case"quaternion":return iS;case"bool":case"boolean":return y1;case"string":return b1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function wmt(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bmt(i.type);if(i.times===void 0){const t=[],n=[];zX(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Vv={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class WX{constructor(e,t,n){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],g=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}}const qye=new WX;class Kl{constructor(e){this.manager=e!==void 0?e:qye,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Kl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Sf={};class Cmt extends Error{constructor(e,t){super(e),this.response=t}}class Og extends Kl{constructor(e){super(e)}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Vv.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Sf[e]!==void 0){Sf[e].push({onLoad:t,onProgress:n,onError:s});return}Sf[e]=[],Sf[e].push({onLoad:t,onProgress:n,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Sf[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,g=f!==0;let p=0;const _=new ReadableStream({start(m){v();function v(){h.read().then(({done:y,value:C})=>{if(y)m.close();else{p+=C.byteLength;const S=new ProgressEvent("progress",{lengthComputable:g,loaded:p,total:f});for(let x=0,E=u.length;x<E;x++){const L=u[x];L.onProgress&&L.onProgress(S)}m.enqueue(C),v()}})}}});return new Response(_)}else throw new Cmt(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(g=>f.decode(g))}}}).then(c=>{Vv.add(e,c);const u=Sf[e];delete Sf[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Sf[e];if(u===void 0)throw this.manager.itemError(e),c;delete Sf[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Smt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Og(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=bT.parse(e[n]);t.push(s)}return t}}class xmt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=[],a=new DX,l=new Og(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const f=r.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=Fs),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},n,s)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=r.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let g=0;g<f;g++){o[g]={mipmaps:[]};for(let p=0;p<d.mipmapCount;p++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+p]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Fs),a.format=d.format,a.needsUpdate=!0,t&&t(a)},n,s);return a}}class wT extends Kl{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Vv.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=dT("img");function l(){u(),Vv.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Emt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=new xk;r.colorSpace=Gn;const o=new wT(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){r.images[c]=u,a++,a===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let c=0;c<e.length;++c)l(c);return r}}class Lmt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new xw,a=new Og(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(l){const c=r.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ca,o.wrapT=c.wrapT!==void 0?c.wrapT:Ca,o.magFilter=c.magFilter!==void 0?c.magFilter:Fs,o.minFilter=c.minFilter!==void 0?c.minFilter:Fs,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Om),c.mipmapCount===1&&(o.minFilter=Fs),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},n,s),o}}class Xye extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=new nr,o=new wT(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class Xm extends Bi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Yye extends Xm{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const O6=new Rn,jae=new se,Kae=new se;class HX{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new Rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ek,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new Fi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;jae.setFromMatrixPosition(e.matrixWorld),t.position.copy(jae),Kae.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Kae),t.updateMatrixWorld(),O6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O6),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(O6)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Tmt extends HX{constructor(){super(new qr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=dC*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Zye extends Xm{constructor(e,t,n=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.distance=n,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new Tmt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qae=new Rn,Mx=new se,F6=new se;class kmt extends HX{constructor(){super(new qr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new Fi(2,1,1,1),new Fi(0,1,1,1),new Fi(3,1,1,1),new Fi(1,1,1,1),new Fi(3,0,1,1),new Fi(1,0,1,1)],this._cubeDirections=[new se(1,0,0),new se(-1,0,0),new se(0,0,1),new se(0,0,-1),new se(0,1,0),new se(0,-1,0)],this._cubeUps=[new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,0,1),new se(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Mx.setFromMatrixPosition(e.matrixWorld),n.position.copy(Mx),F6.copy(n.position),F6.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(F6),n.updateMatrixWorld(),s.makeTranslation(-Mx.x,-Mx.y,-Mx.z),qae.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qae)}}class Qye extends Xm{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new kmt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Mmt extends HX{constructor(){super(new _1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Jye extends Xm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.shadow=new Mmt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ebe extends Xm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tbe extends Xm{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nbe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(n*r)),t.addScaledVector(o[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*n*r),t.addScaledVector(o[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class M5 extends Xm{constructor(e=new nbe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class D5 extends Kl{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,o=new Og(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=D5.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=n(o.value);break;case"c":s.uniforms[r].value=new Pt().setHex(o.value);break;case"v2":s.uniforms[r].value=new rt().fromArray(o.value);break;case"v3":s.uniforms[r].value=new se().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Fi().fromArray(o.value);break;case"m3":s.uniforms[r].value=new Zn().fromArray(o.value);break;case"m4":s.uniforms[r].value=new Rn().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new rt().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new rt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Pye,SpriteMaterial:TX,RawShaderMaterial:Oye,ShaderMaterial:jd,PointsMaterial:MX,MeshPhysicalMaterial:Fye,MeshStandardMaterial:FX,MeshPhongMaterial:Bye,MeshToonMaterial:zye,MeshNormalMaterial:Uye,MeshLambertMaterial:Vye,MeshDepthMaterial:l5,MeshDistanceMaterial:c5,MeshBasicMaterial:Kg,MeshMatcapMaterial:Wye,LineDashedMaterial:Hye,LineBasicMaterial:dl,Material:ta};return new t[e]}}class r${static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,s=e.length;n<s;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $X extends Kn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ibe extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Og(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(f,g){if(t[g]!==void 0)return t[g];const _=f.interleavedBuffers[g],m=r(f,_.buffer),v=Lb(_.type,m),y=new d5(v,_.stride);return y.uuid=_.uuid,t[g]=y,y}function r(f,g){if(n[g]!==void 0)return n[g];const _=f.arrayBuffers[g],m=new Uint32Array(_).buffer;return n[g]=m,m}const o=e.isInstancedBufferGeometry?new $X:new Kn,a=e.data.index;if(a!==void 0){const f=Lb(a.type,a.array);o.setIndex(new is(f,1))}const l=e.data.attributes;for(const f in l){const g=l[f];let p;if(g.isInterleavedBufferAttribute){const _=s(e.data,g.data);p=new Fv(_,g.itemSize,g.offset,g.normalized)}else{const _=Lb(g.type,g.array),m=g.isInstancedBufferAttribute?Bv:is;p=new m(_,g.itemSize,g.normalized)}g.name!==void 0&&(p.name=g.name),g.usage!==void 0&&p.setUsage(g.usage),g.updateRange!==void 0&&(p.updateRange.offset=g.updateRange.offset,p.updateRange.count=g.updateRange.count),o.setAttribute(f,p)}const c=e.data.morphAttributes;if(c)for(const f in c){const g=c[f],p=[];for(let _=0,m=g.length;_<m;_++){const v=g[_];let y;if(v.isInterleavedBufferAttribute){const C=s(e.data,v.data);y=new Fv(C,v.itemSize,v.offset,v.normalized)}else{const C=Lb(v.type,v.array);y=new is(C,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),p.push(y)}o.morphAttributes[f]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,g=h.length;f!==g;++f){const p=h[f];o.addGroup(p.start,p.count,p.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new se;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Nc(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Dmt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=this.path===""?r$.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Og(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){s!==void 0&&s(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(c,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?r$.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new Og(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,l,a,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new Z0().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=new f5().fromJSON(e[r],s);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new ibe;for(let r=0,o=e.length;r<o;r++){let a;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;default:l.type in Gae?a=Gae[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new D5;r.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=r.parse(l)),s[l.uuid]=n[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=bT.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function o(l){return n.manager.itemStart(l),r.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return o(u)}else return l.data?{data:Lb(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new WX(t);r=new wT(l),r.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const f=[];for(let g=0,p=d.length;g<p;g++){const _=d[g],m=a(_);m!==null&&(m instanceof HTMLImageElement?f.push(m):f.push(new xw(m.data,m.width,m.height)))}s[h.uuid]=new N0(f)}else{const f=a(h.url);s[h.uuid]=new N0(f)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await s.loadAsync(l)}else return o.data?{data:Lb(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new wT(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h],g=await r(f);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new xw(g.data,g.width,g.height)))}n[l.uuid]=new N0(u)}else{const u=await r(l.url);n[l.uuid]=new N0(u)}}}return n}parseTextures(e,t){function n(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=e[r];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new xk,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new xw:u=new nr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=n(a.mapping,Amt)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=n(a.wrap[0],Xae),u.wrapT=n(a.wrap[1],Xae)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=n(a.minFilter,Yae)),a.magFilter!==void 0&&(u.magFilter=n(a.magFilter,Yae)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),s[a.uuid]=u}return s}parseObject(e,t,n,s,r){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let g=0,p=d.length;g<p;g++){const _=d[g];n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),f.push(n[_])}return f}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function c(d){return s[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),s[d]}let u,h;switch(e.type){case"Scene":o=new fT,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Pt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new h5(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new u5(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new qr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new _1(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ebe(e.color,e.intensity);break;case"DirectionalLight":o=new Jye(e.color,e.intensity);break;case"PointLight":o=new Qye(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new tbe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Zye(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Yye(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new M5().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new Cye(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new Zs(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,g=e.instanceColor;o=new Sye(u,h,d),o.instanceMatrix=new Bv(new Float32Array(f.array),16),g!==void 0&&(o.instanceColor=new Bv(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new wye;break;case"Line":o=new Fm(a(e.geometry),l(e.material));break;case"LineLoop":o=new xye(a(e.geometry),l(e.material));break;case"LineSegments":o=new ef(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Eye(a(e.geometry),l(e.material));break;case"Sprite":o=new bye(l(e.material));break;case"Group":o=new kb;break;case"Bone":o=new kX;break;default:o=new Bi}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,n,s,r))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const g=d[f];o.animations.push(r[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const g=d[f],p=o.getObjectByProperty("uuid",g.object);p!==void 0&&o.addLevel(p,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}}const Amt={UVMapping:i5,CubeReflectionMapping:Rm,CubeRefractionMapping:Pm,EquirectangularReflectionMapping:iT,EquirectangularRefractionMapping:sT,CubeUVReflectionMapping:eS},Xae={RepeatWrapping:rT,ClampToEdgeWrapping:Ca,MirroredRepeatWrapping:oT},Yae={NearestFilter:kr,NearestMipmapNearestFilter:zP,NearestMipmapLinearFilter:vL,LinearFilter:Fs,LinearMipmapNearestFilter:lX,LinearMipmapLinearFilter:Om};class Imt extends Kl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Vv.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(l){Vv.add(e,l),t&&t(l),r.manager.itemEnd(e)}).catch(function(l){s&&s(l),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}let DA;class GX{static getContext(){return DA===void 0&&(DA=new(window.AudioContext||window.webkitAudioContext)),DA}static setContext(e){DA=e}}class Nmt extends Kl{constructor(e){super(e)}load(e,t,n,s){const r=this,o=new Og(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);GX.getContext().decodeAudioData(c,function(h){t(h)},a)}catch(c){a(c)}},n,s);function a(l){s?s(l):console.error(l),r.manager.itemError(e)}}}class Rmt extends M5{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const s=new Pt().set(e),r=new Pt().set(t),o=new se(s.r,s.g,s.b),a=new se(r.r,r.g,r.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Pmt extends M5{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new Pt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Zae=new Rn,Qae=new Rn,T_=new Rn;class Omt{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,T_.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(X0*t.fov*.5)/t.zoom;let a,l;Qae.elements[12]=-s,Zae.elements[12]=s,a=-o*t.aspect+r,l=o*t.aspect+r,T_.elements[0]=2*t.near/(l-a),T_.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(T_),a=-o*t.aspect-r,l=o*t.aspect-r,T_.elements[0]=2*t.near/(l-a),T_.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(T_)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Qae),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Zae)}}class jX{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Jae(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Jae();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Jae(){return(typeof performance>"u"?Date:performance).now()}const k_=new se,ele=new qo,Fmt=new se,M_=new se;class Bmt extends Bi{constructor(){super(),this.type="AudioListener",this.context=GX.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new jX}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(k_,ele,Fmt),M_.set(0,0,-1).applyQuaternion(ele),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(k_.x,s),t.positionY.linearRampToValueAtTime(k_.y,s),t.positionZ.linearRampToValueAtTime(k_.z,s),t.forwardX.linearRampToValueAtTime(M_.x,s),t.forwardY.linearRampToValueAtTime(M_.y,s),t.forwardZ.linearRampToValueAtTime(M_.z,s),t.upX.linearRampToValueAtTime(n.x,s),t.upY.linearRampToValueAtTime(n.y,s),t.upZ.linearRampToValueAtTime(n.z,s)}else t.setPosition(k_.x,k_.y,k_.z),t.setOrientation(M_.x,M_.y,M_.z,n.x,n.y,n.z)}}class sbe extends Bi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const D_=new se,tle=new qo,zmt=new se,A_=new se;class Umt extends sbe{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(D_,tle,zmt),A_.set(0,0,1).applyQuaternion(tle);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(D_.x,n),t.positionY.linearRampToValueAtTime(D_.y,n),t.positionZ.linearRampToValueAtTime(D_.z,n),t.orientationX.linearRampToValueAtTime(A_.x,n),t.orientationY.linearRampToValueAtTime(A_.y,n),t.orientationZ.linearRampToValueAtTime(A_.z,n)}else t.setPosition(D_.x,D_.y,D_.z),t.setOrientation(A_.x,A_.y,A_.z)}}class Vmt{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class rbe{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==s;++a)n[r+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,r,0,a,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(n,s,l,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,o=s;r!==o;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,s){qo.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const o=this._workIndex*r;qo.multiplyQuaternionsFlat(e,o,e,t,e,n),qo.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,n,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*s}}_lerpAdditive(e,t,n,s,r){for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]+e[n+o]*s}}}const KX="\\[\\]\\.:\\/",Wmt=new RegExp("["+KX+"]","g"),qX="[^"+KX+"]",Hmt="[^"+KX.replace("\\.","")+"]",$mt=/((?:WC+[\/:])*)/.source.replace("WC",qX),Gmt=/(WCOD+)?/.source.replace("WCOD",Hmt),jmt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qX),Kmt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qX),qmt=new RegExp("^"+$mt+Gmt+jmt+Kmt+"$"),Xmt=["material","materials","bones","map"];class Ymt{constructor(e,t,n){const s=n||Ti.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Ti{constructor(e,t,n){this.path=t,this.parsedPath=n||Ti.parseTrackName(t),this.node=Ti.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ti.Composite(e,t,n):new Ti(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Wmt,"")}static parseTrackName(e){const t=qmt.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);Xmt.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Ti.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[s];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ti.Composite=Ymt;Ti.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ti.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ti.prototype.GetterByBindingType=[Ti.prototype._getValue_direct,Ti.prototype._getValue_array,Ti.prototype._getValue_arrayElement,Ti.prototype._getValue_toArray];Ti.prototype.SetterByBindingTypeAndVersioning=[[Ti.prototype._setValue_direct,Ti.prototype._setValue_direct_setNeedsUpdate,Ti.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_array,Ti.prototype._setValue_array_setNeedsUpdate,Ti.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_arrayElement,Ti.prototype._setValue_arrayElement_setNeedsUpdate,Ti.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_fromArray,Ti.prototype._setValue_fromArray_setNeedsUpdate,Ti.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zmt{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let g=t[f];if(g===void 0){g=l++,t[f]=g,e.push(d);for(let p=0,_=o;p!==_;++p)r[p].push(new Ti(d,n[p],s[p]))}else if(g<c){a=e[g];const p=--c,_=e[p];t[_.uuid]=g,e[g]=_,t[f]=p,e[p]=d;for(let m=0,v=o;m!==v;++m){const y=r[m],C=y[p];let S=y[g];y[g]=C,S===void 0&&(S=new Ti(d,n[m],s[m])),y[p]=S}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=r){const h=r++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let f=0,g=s;f!==g;++f){const p=n[f],_=p[h],m=p[u];p[u]=_,p[h]=m}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<r){const d=--r,f=e[d],g=--o,p=e[g];t[f.uuid]=h,e[h]=f,t[p.uuid]=d,e[d]=p,e.pop();for(let _=0,m=s;_!==m;++_){const v=n[_],y=v[d],C=v[g];v[h]=y,v[d]=C,v.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let g=0,p=s;g!==p;++g){const _=n[g];_[h]=_[d],_.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);s=r.length,n[e]=s,o.push(e),a.push(t),r.push(h);for(let d=u,f=l.length;d!==f;++d){const g=l[d];h[d]=new Ti(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=n,o[n]=l,o.pop(),r[n]=r[a],r.pop(),s[n]=s[a],s.pop()}}}class obe{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,o=r.length,a=new Array(o),l={endingStart:A0,endingEnd:A0};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=G1e,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case pX:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case r5:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const o=n===j1e;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(n===$1e){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const a=Math.floor(s/t);s-=t*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=I0,s.endingEnd=I0):(e?s.endingStart=this.zeroSlopeAtStart?I0:A0:s.endingStart=cT,t?s.endingEnd=this.zeroSlopeAtEnd?I0:A0:s.endingEnd=cT)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=t,a[1]=r+e,l[1]=n,this}}const Qmt=new Float32Array(1);class Jmt extends jg{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==r;++h){const d=s[h],f=d.name;let g=u[f];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,f));continue}const p=t&&t._propertyBindings[h].binding.parsedPath;g=new rbe(Ti.create(n,f,p),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,f),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[r],Object.keys(a).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new UX(new Float32Array(2),new Float32Array(2),1,Qmt),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?bT.findByName(s,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=r5),l!==void 0){const h=l.actionByRoot[r];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new obe(this,o,t,n);return this._bindAction(u,c),this._addInactiveAction(u,a,r),u}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?bT.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(s,e,r,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class XX{constructor(e){this.value=e}clone(){return new XX(this.value.clone===void 0?this.value:this.value.clone())}}let e_t=0;class t_t extends jg{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:e_t++}),this.name="",this.usage=uT,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class n_t extends d5{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class i_t{constructor(e,t,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class YX{constructor(e,t,n=0,s=1/0){this.ray=new tS(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new Y0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return o$(e,this,n,t),n.sort(nle),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)o$(e[s],this,n,t);return n.sort(nle),n}}function nle(i,e){return i.distance-e.distance}function o$(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const s=i.children;for(let r=0,o=s.length;r<o;r++)o$(s[r],e,t,!0)}}class abe{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(pr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class s_t{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const ile=new rt;class r_t{constructor(e=new rt(1/0,1/0),t=new rt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ile.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ile).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sle=new se,AA=new se;class o_t{constructor(e=new se,t=new se){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){sle.subVectors(e,this.start),AA.subVectors(this.end,this.start);const n=AA.dot(AA);let r=AA.dot(sle)/n;return t&&(r=pr(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rle=new se;class a_t extends Bi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Kn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;s.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new Jt(s,3));const r=new dl({fog:!1,toneMapped:!1});this.cone=new ef(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rle.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rle),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const pp=new se,IA=new Rn,B6=new Rn;class l_t extends ef{constructor(e){const t=lbe(e),n=new Kn,s=[],r=[],o=new Pt(0,0,1),a=new Pt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Jt(s,3)),n.setAttribute("color",new Jt(r,3));const l=new dl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");B6.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const a=t[r];a.parent&&a.parent.isBone&&(IA.multiplyMatrices(B6,a.matrixWorld),pp.setFromMatrixPosition(IA),s.setXYZ(o,pp.x,pp.y,pp.z),IA.multiplyMatrices(B6,a.parent.matrixWorld),pp.setFromMatrixPosition(IA),s.setXYZ(o+1,pp.x,pp.y,pp.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lbe(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,lbe(i.children[t]));return e}class c_t extends Zs{constructor(e,t,n){const s=new kk(t,4,2),r=new Kg({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const u_t=new se,ole=new Pt,ale=new Pt;class h_t extends Bi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new Tk(t);s.rotateY(Math.PI*.5),this.material=new Kg({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new is(o,3)),this.add(new Zs(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ole.copy(this.light.color),ale.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?ole:ale;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(u_t.setFromMatrixPosition(this.light.matrixWorld).negate())}}class d_t extends ef{constructor(e=10,t=10,n=4473924,s=8947848){n=new Pt(n),s=new Pt(s);const r=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,f=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const p=d===r?n:s;p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3}const u=new Kn;u.setAttribute("position",new Jt(l,3)),u.setAttribute("color",new Jt(c,3));const h=new dl({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class f_t extends ef{constructor(e=10,t=16,n=8,s=64,r=4473924,o=8947848){r=new Pt(r),o=new Pt(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,g);const p=h&1?r:o;l.push(p.r,p.g,p.b),l.push(p.r,p.g,p.b)}for(let h=0;h<n;h++){const d=h&1?r:o,f=e-e/n*h;for(let g=0;g<s;g++){let p=g/s*(Math.PI*2),_=Math.sin(p)*f,m=Math.cos(p)*f;a.push(_,0,m),l.push(d.r,d.g,d.b),p=(g+1)/s*(Math.PI*2),_=Math.sin(p)*f,m=Math.cos(p)*f,a.push(_,0,m),l.push(d.r,d.g,d.b)}}const c=new Kn;c.setAttribute("position",new Jt(a,3)),c.setAttribute("color",new Jt(l,3));const u=new dl({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const lle=new se,NA=new se,cle=new se;class g_t extends Bi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Kn;s.setAttribute("position",new Jt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new dl({fog:!1,toneMapped:!1});this.lightPlane=new Fm(s,r),this.add(this.lightPlane),s=new Kn,s.setAttribute("position",new Jt([0,0,0,0,0,1],3)),this.targetLine=new Fm(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),lle.setFromMatrixPosition(this.light.matrixWorld),NA.setFromMatrixPosition(this.light.target.matrixWorld),cle.subVectors(NA,lle),this.lightPlane.lookAt(NA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(NA),this.targetLine.scale.z=cle.length()}}const RA=new se,ar=new Sk;class p_t extends ef{constructor(e){const t=new Kn,n=new dl({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,p){l(g),l(p)}function l(g){s.push(0,0,0),r.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(s.length/3-1)}t.setAttribute("position",new Jt(s,3)),t.setAttribute("color",new Jt(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Pt(16755200),u=new Pt(16711680),h=new Pt(43775),d=new Pt(16777215),f=new Pt(3355443);this.setColors(c,u,h,d,f)}setColors(e,t,n,s,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,s.r,s.g,s.b),a.setXYZ(39,s.r,s.g,s.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;ar.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),xr("c",t,e,ar,0,0,-1),xr("t",t,e,ar,0,0,1),xr("n1",t,e,ar,-n,-s,-1),xr("n2",t,e,ar,n,-s,-1),xr("n3",t,e,ar,-n,s,-1),xr("n4",t,e,ar,n,s,-1),xr("f1",t,e,ar,-n,-s,1),xr("f2",t,e,ar,n,-s,1),xr("f3",t,e,ar,-n,s,1),xr("f4",t,e,ar,n,s,1),xr("u1",t,e,ar,n*.7,s*1.1,-1),xr("u2",t,e,ar,-n*.7,s*1.1,-1),xr("u3",t,e,ar,0,s*2,-1),xr("cf1",t,e,ar,-n,0,1),xr("cf2",t,e,ar,n,0,1),xr("cf3",t,e,ar,0,-s,1),xr("cf4",t,e,ar,0,s,1),xr("cn1",t,e,ar,-n,0,-1),xr("cn2",t,e,ar,n,0,-1),xr("cn3",t,e,ar,0,-s,-1),xr("cn4",t,e,ar,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function xr(i,e,t,n,s,r,o){RA.set(s,r,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],RA.x,RA.y,RA.z)}}const PA=new Ic;class m_t extends ef{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new Kn;r.setIndex(new is(n,1)),r.setAttribute("position",new is(s,3)),super(r,new dl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&PA.setFromObject(this.object),PA.isEmpty())return;const t=PA.min,n=PA.max,s=this.geometry.attributes.position,r=s.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class __t extends ef{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Kn;r.setIndex(new is(n,1)),r.setAttribute("position",new Jt(s,3)),super(r,new dl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class v_t extends Fm{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Kn;o.setAttribute("position",new Jt(r,3)),o.computeBoundingSphere(),super(o,new dl({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Kn;l.setAttribute("position",new Jt(a,3)),l.computeBoundingSphere(),this.add(new Zs(l,new Kg({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const ule=new se;let OA,z6;class y_t extends Bi{constructor(e=new se(0,0,1),t=new se(0,0,0),n=1,s=16776960,r=n*.2,o=r*.2){super(),this.type="ArrowHelper",OA===void 0&&(OA=new Kn,OA.setAttribute("position",new Jt([0,0,0,0,1,0],3)),z6=new v1(0,.5,1,5,1),z6.translate(0,-.5,0)),this.position.copy(t),this.line=new Fm(OA,new dl({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zs(z6,new Kg({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ule.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ule,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class b_t extends ef{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Kn;s.setAttribute("position",new Jt(t,3)),s.setAttribute("color",new Jt(n,3));const r=new dl({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new Pt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class w_t{constructor(){this.type="ShapePath",this.color=new Pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new gT,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,o){return this.currentPath.bezierCurveTo(e,t,n,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(m){const v=[];for(let y=0,C=m.length;y<C;y++){const S=m[y],x=new Z0;x.curves=S.curves,v.push(x)}return v}function n(m,v){const y=v.length;let C=!1;for(let S=y-1,x=0;x<y;S=x++){let E=v[S],L=v[x],T=L.x-E.x,D=L.y-E.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(E=v[x],T=-T,L=v[S],D=-D),m.y<E.y||m.y>L.y)continue;if(m.y===E.y){if(m.x===E.x)return!0}else{const I=D*(m.x-E.x)-T*(m.y-E.y);if(I===0)return!0;if(I<0)continue;C=!C}}else{if(m.y!==E.y)continue;if(L.x<=m.x&&m.x<=E.x||E.x<=m.x&&m.x<=L.x)return!0}}return C}const s=Od.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,a,l;const c=[];if(r.length===1)return a=r[0],l=new Z0,l.curves=a.curves,c.push(l),c;let u=!s(r[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],g=0,p;d[g]=void 0,f[g]=[];for(let m=0,v=r.length;m<v;m++)a=r[m],p=a.getPoints(),o=s(p),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Z0,p},d[g].s.curves=a.curves,u&&g++,f[g]=[]):f[g].push({h:a,p:p[0]});if(!d[0])return t(r);if(d.length>1){let m=!1,v=0;for(let y=0,C=d.length;y<C;y++)h[y]=[];for(let y=0,C=d.length;y<C;y++){const S=f[y];for(let x=0;x<S.length;x++){const E=S[x];let L=!0;for(let T=0;T<d.length;T++)n(E.p,d[T].p)&&(y!==T&&v++,L?(L=!1,h[T].push(E)):m=!0);L&&h[y].push(E)}}v>0&&m===!1&&(f=h)}let _;for(let m=0,v=d.length;m<v;m++){l=d[m].s,c.push(l),_=f[m];for(let y=0,C=_.length;y<C;y++)l.holes.push(_[y].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:t5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=t5);const cbe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aX,AddEquation:f0,AddOperation:D1e,AdditiveAnimationBlendMode:pX,AdditiveBlending:SH,AlphaFormat:F1e,AlwaysCompare:iye,AlwaysDepth:S1e,AlwaysStencilFunc:X1e,AmbientLight:ebe,AmbientLightProbe:Pmt,AnimationAction:obe,AnimationClip:bT,AnimationLoader:Smt,AnimationMixer:Jmt,AnimationObjectGroup:Zmt,AnimationUtils:ymt,ArcCurve:Lye,ArrayCamera:mye,ArrowHelper:y_t,Audio:sbe,AudioAnalyser:Vmt,AudioContext:GX,AudioListener:Bmt,AudioLoader:Nmt,AxesHelper:b_t,BackSide:La,BasicDepthPacking:K1e,BasicShadowMap:c1e,Bone:kX,BooleanKeyframeTrack:y1,Box2:r_t,Box3:Ic,Box3Helper:__t,BoxGeometry:jm,BoxHelper:m_t,BufferAttribute:is,BufferGeometry:Kn,BufferGeometryLoader:ibe,ByteType:P1e,Cache:Vv,Camera:Sk,CameraHelper:p_t,CanvasTexture:Hpt,CapsuleGeometry:_5,CatmullRomCurve3:Tye,CineonToneMapping:N1e,CircleGeometry:v5,ClampToEdgeWrapping:Ca,Clock:jX,Color:Pt,ColorKeyframeTrack:VX,ColorManagement:Xc,CompressedArrayTexture:Wpt,CompressedTexture:DX,CompressedTextureLoader:xmt,ConeGeometry:y5,CubeCamera:lye,CubeReflectionMapping:Rm,CubeRefractionMapping:Pm,CubeTexture:xk,CubeTextureLoader:Emt,CubeUVReflectionMapping:eS,CubicBezierCurve:IX,CubicBezierCurve3:kye,CubicInterpolant:Gye,CullFaceBack:CH,CullFaceFront:l1e,CullFaceFrontBack:Fct,CullFaceNone:a1e,Curve:Fh,CurvePath:Mye,CustomBlending:u1e,CustomToneMapping:R1e,CylinderGeometry:v1,Cylindrical:s_t,Data3DTexture:wX,DataArrayTexture:o5,DataTexture:xw,DataTextureLoader:Lmt,DataUtils:Xut,DecrementStencilOp:Xct,DecrementWrapStencilOp:Zct,DefaultLoadingManager:qye,DepthFormat:pm,DepthStencilFormat:Ov,DepthTexture:_ye,DirectionalLight:Jye,DirectionalLightHelper:g_t,DiscreteInterpolant:jye,DisplayP3ColorSpace:vX,DodecahedronGeometry:b5,DoubleSide:Ks,DstAlphaFactor:_1e,DstColorFactor:y1e,DynamicCopyUsage:dut,DynamicDrawUsage:out,DynamicReadUsage:cut,EdgesGeometry:Dye,EllipseCurve:g5,EqualCompare:Q1e,EqualDepth:E1e,EqualStencilFunc:tut,EquirectangularReflectionMapping:iT,EquirectangularRefractionMapping:sT,Euler:m1,EventDispatcher:jg,ExtrudeGeometry:C5,FileLoader:Og,Float16BufferAttribute:tht,Float32BufferAttribute:Jt,Float64BufferAttribute:nht,FloatType:Ed,Fog:h5,FogExp2:u5,FramebufferTexture:Vpt,FrontSide:Gd,Frustum:Ek,GLBufferAttribute:i_t,GLSL1:gut,GLSL3:ZH,GreaterCompare:eye,GreaterDepth:T1e,GreaterEqualCompare:nye,GreaterEqualDepth:L1e,GreaterEqualStencilFunc:rut,GreaterStencilFunc:iut,GridHelper:d_t,Group:kb,HalfFloatType:hC,HemisphereLight:Yye,HemisphereLightHelper:h_t,HemisphereLightProbe:Rmt,IcosahedronGeometry:S5,ImageBitmapLoader:Imt,ImageLoader:wT,ImageUtils:bX,IncrementStencilOp:qct,IncrementWrapStencilOp:Yct,InstancedBufferAttribute:Bv,InstancedBufferGeometry:$X,InstancedInterleavedBuffer:n_t,InstancedMesh:Sye,Int16BufferAttribute:Jut,Int32BufferAttribute:eht,Int8BufferAttribute:Yut,IntType:cX,InterleavedBuffer:d5,InterleavedBufferAttribute:Fv,Interpolant:Mk,InterpolateDiscrete:aT,InterpolateLinear:lT,InterpolateSmooth:tN,InvertStencilOp:Qct,KeepStencilOp:nN,KeyframeTrack:Bh,LOD:wye,LatheGeometry:Lk,Layers:Y0,LessCompare:Z1e,LessDepth:x1e,LessEqualCompare:J1e,LessEqualDepth:BP,LessEqualStencilFunc:nut,LessStencilFunc:eut,Light:Xm,LightProbe:M5,Line:Fm,Line3:o_t,LineBasicMaterial:dl,LineCurve:p5,LineCurve3:NX,LineDashedMaterial:Hye,LineLoop:xye,LineSegments:ef,LinearEncoding:mX,LinearFilter:Fs,LinearInterpolant:UX,LinearMipMapLinearFilter:Wct,LinearMipMapNearestFilter:Vct,LinearMipmapLinearFilter:Om,LinearMipmapNearestFilter:lX,LinearSRGBColorSpace:kh,LinearToneMapping:A1e,Loader:Kl,LoaderUtils:r$,LoadingManager:WX,LoopOnce:$1e,LoopPingPong:j1e,LoopRepeat:G1e,LuminanceAlphaFormat:z1e,LuminanceFormat:B1e,MOUSE:o1e,Material:ta,MaterialLoader:D5,MathUtils:WP,Matrix3:Zn,Matrix4:Rn,MaxEquation:TH,Mesh:Zs,MeshBasicMaterial:Kg,MeshDepthMaterial:l5,MeshDistanceMaterial:c5,MeshLambertMaterial:Vye,MeshMatcapMaterial:Wye,MeshNormalMaterial:Uye,MeshPhongMaterial:Bye,MeshPhysicalMaterial:Fye,MeshStandardMaterial:FX,MeshToonMaterial:zye,MinEquation:LH,MirroredRepeatWrapping:oT,MixOperation:M1e,MultiplyBlending:EH,MultiplyOperation:Ck,NearestFilter:kr,NearestMipMapLinearFilter:Uct,NearestMipMapNearestFilter:zct,NearestMipmapLinearFilter:vL,NearestMipmapNearestFilter:zP,NeverCompare:Y1e,NeverDepth:C1e,NeverStencilFunc:Jct,NoBlending:xg,NoColorSpace:_m,NoToneMapping:yh,NormalAnimationBlendMode:r5,NormalBlending:q0,NotEqualCompare:tye,NotEqualDepth:k1e,NotEqualStencilFunc:sut,NumberKeyframeTrack:vT,Object3D:Bi,ObjectLoader:Dmt,ObjectSpaceNormalMap:q1e,OctahedronGeometry:Tk,OneFactor:g1e,OneMinusDstAlphaFactor:v1e,OneMinusDstColorFactor:b1e,OneMinusSrcAlphaFactor:oX,OneMinusSrcColorFactor:m1e,OrthographicCamera:_1,PCFShadowMap:n5,PCFSoftShadowMap:_L,PMREMGenerator:JH,Path:gT,PerspectiveCamera:qr,Plane:Kf,PlaneGeometry:Km,PlaneHelper:v_t,PointLight:Qye,PointLightHelper:c_t,Points:Eye,PointsMaterial:MX,PolarGridHelper:f_t,PolyhedronGeometry:qm,PositionalAudio:Umt,PropertyBinding:Ti,PropertyMixer:rbe,QuadraticBezierCurve:RX,QuadraticBezierCurve3:m5,Quaternion:qo,QuaternionKeyframeTrack:iS,QuaternionLinearInterpolant:Kye,RED_GREEN_RGTC2_Format:XH,RED_RGTC1_Format:H1e,REVISION:t5,RGBADepthPacking:_X,RGBAFormat:Nl,RGBAIntegerFormat:gX,RGBA_ASTC_10x10_Format:GH,RGBA_ASTC_10x5_Format:WH,RGBA_ASTC_10x6_Format:HH,RGBA_ASTC_10x8_Format:$H,RGBA_ASTC_12x10_Format:jH,RGBA_ASTC_12x12_Format:KH,RGBA_ASTC_4x4_Format:RH,RGBA_ASTC_5x4_Format:PH,RGBA_ASTC_5x5_Format:OH,RGBA_ASTC_6x5_Format:FH,RGBA_ASTC_6x6_Format:BH,RGBA_ASTC_8x5_Format:zH,RGBA_ASTC_8x6_Format:UH,RGBA_ASTC_8x8_Format:VH,RGBA_BPTC_Format:eN,RGBA_ETC2_EAC_Format:NH,RGBA_PVRTC_2BPPV1_Format:AH,RGBA_PVRTC_4BPPV1_Format:DH,RGBA_S3TC_DXT1_Format:ZI,RGBA_S3TC_DXT3_Format:QI,RGBA_S3TC_DXT5_Format:JI,RGB_ETC1_Format:W1e,RGB_ETC2_Format:IH,RGB_PVRTC_2BPPV1_Format:MH,RGB_PVRTC_4BPPV1_Format:kH,RGB_S3TC_DXT1_Format:YI,RGFormat:V1e,RGIntegerFormat:fX,RawShaderMaterial:Oye,Ray:tS,Raycaster:YX,RectAreaLight:tbe,RedFormat:U1e,RedIntegerFormat:dX,ReinhardToneMapping:I1e,RepeatWrapping:rT,ReplaceStencilOp:Kct,ReverseSubtractEquation:d1e,RingGeometry:x5,SIGNED_RED_GREEN_RGTC2_Format:YH,SIGNED_RED_RGTC1_Format:qH,SRGBColorSpace:Gn,Scene:fT,ShaderChunk:$n,ShaderLib:ah,ShaderMaterial:jd,ShadowMaterial:Pye,Shape:Z0,ShapeGeometry:E5,ShapePath:w_t,ShapeUtils:Od,ShortType:O1e,Skeleton:f5,SkeletonHelper:l_t,SkinnedMesh:Cye,Source:N0,Sphere:Nc,SphereGeometry:kk,Spherical:abe,SphericalHarmonics3:nbe,SplineCurve:PX,SpotLight:Zye,SpotLightHelper:a_t,Sprite:bye,SpriteMaterial:TX,SrcAlphaFactor:rX,SrcAlphaSaturateFactor:w1e,SrcColorFactor:p1e,StaticCopyUsage:hut,StaticDrawUsage:uT,StaticReadUsage:lut,StereoCamera:Omt,StreamCopyUsage:fut,StreamDrawUsage:aut,StreamReadUsage:uut,StringKeyframeTrack:b1,SubtractEquation:h1e,SubtractiveBlending:xH,TOUCH:Oct,TangentSpaceNormalMap:Gm,TetrahedronGeometry:L5,Texture:nr,TextureLoader:Xye,TorusGeometry:T5,TorusKnotGeometry:k5,Triangle:Dl,TriangleFanDrawMode:Gct,TriangleStripDrawMode:$ct,TrianglesDrawMode:Hct,TubeGeometry:Uv,TwoPassDoubleSide:Bct,UVMapping:i5,Uint16BufferAttribute:CX,Uint32BufferAttribute:SX,Uint8BufferAttribute:Zut,Uint8ClampedBufferAttribute:Qut,Uniform:XX,UniformsGroup:t_t,UniformsLib:Ot,UniformsUtils:xX,UnsignedByteType:Pd,UnsignedInt248Type:gm,UnsignedIntType:hg,UnsignedShort4444Type:uX,UnsignedShort5551Type:hX,UnsignedShortType:s5,VSMShadowMap:th,Vector2:rt,Vector3:se,Vector4:Fi,VectorKeyframeTrack:yT,VideoTexture:Upt,WebGL1Renderer:vye,WebGL3DRenderTarget:But,WebGLArrayRenderTarget:Fut,WebGLCoordinateSystem:Ld,WebGLCubeRenderTarget:cye,WebGLMultipleRenderTargets:zut,WebGLRenderTarget:Mh,WebGLRenderer:LX,WebGLUtils:pye,WebGPUCoordinateSystem:hT,WireframeGeometry:Rye,WrapAroundEnding:cT,ZeroCurvatureEnding:A0,ZeroFactor:f1e,ZeroSlopeEnding:I0,ZeroStencilOp:jct,_SRGBAFormat:UP,sRGBEncoding:mm},Symbol.toStringTag,{value:"Module"}));var ube={exports:{}},w1={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */w1.ConcurrentRoot=1;w1.ContinuousEventPriority=4;w1.DefaultEventPriority=16;w1.DiscreteEventPriority=1;w1.IdleEventPriority=536870912;w1.LegacyRoot=0;ube.exports=w1;var Db=ube.exports;function C_t(i){let e;const t=new Set,n=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const d=e;e=u?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},s=()=>e,r=(c,u=s,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function f(){const g=u(e);if(!h(d,g)){const p=d;c(d=g,p)}}return t.add(f),()=>t.delete(f)},l={setState:n,getState:s,subscribe:(c,u,h)=>u||h?r(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=i(n,s,l),l}const S_t=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hle=S_t?G.useEffect:G.useLayoutEffect;function x_t(i){const e=typeof i=="function"?C_t(i):i,t=(n=e.getState,s=Object.is)=>{const[,r]=G.useReducer(_=>_+1,0),o=e.getState(),a=G.useRef(o),l=G.useRef(n),c=G.useRef(s),u=G.useRef(!1),h=G.useRef();h.current===void 0&&(h.current=n(o));let d,f=!1;(a.current!==o||l.current!==n||c.current!==s||u.current)&&(d=n(o),f=!s(h.current,d)),hle(()=>{f&&(h.current=d),a.current=o,l.current=n,c.current=s,u.current=!1});const g=G.useRef(o);hle(()=>{const _=()=>{try{const v=e.getState(),y=l.current(v);c.current(h.current,y)||(a.current=v,h.current=y,r())}catch{u.current=!0,r()}},m=e.subscribe(_);return e.getState()!==g.current&&_(),m},[]);const p=f?d:h.current;return G.useDebugValue(p),p};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const s=n.length<=0;return{value:n.shift(),done:s}}}},t}var hbe={exports:{}},dbe={exports:{}},fbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(H,U){var j=H.length;H.push(U);e:for(;0<j;){var W=j-1>>>1,X=H[W];if(0<s(X,U))H[W]=U,H[j]=X,j=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var U=H[0],j=H.pop();if(j!==U){H[0]=j;e:for(var W=0,X=H.length,ee=X>>>1;W<ee;){var le=2*(W+1)-1,fe=H[le],be=le+1,ye=H[be];if(0>s(fe,j))be<X&&0>s(ye,fe)?(H[W]=ye,H[be]=j,W=be):(H[W]=fe,H[le]=j,W=le);else if(be<X&&0>s(ye,j))H[W]=ye,H[be]=j,W=be;else break e}}return U}function s(H,U){var j=H.sortIndex-U.sortIndex;return j!==0?j:H.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(H){for(var U=t(c);U!==null;){if(U.callback===null)n(c);else if(U.startTime<=H)n(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function C(H){if(p=!1,y(H),!g)if(t(l)!==null)g=!0,z(S);else{var U=t(c);U!==null&&K(C,U.startTime-H)}}function S(H,U){g=!1,p&&(p=!1,m(L),L=-1),f=!0;var j=d;try{for(y(U),h=t(l);h!==null&&(!(h.expirationTime>U)||H&&!I());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var X=W(h.expirationTime<=U);U=i.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&n(l),y(U)}else n(l);h=t(l)}if(h!==null)var ee=!0;else{var le=t(c);le!==null&&K(C,le.startTime-U),ee=!1}return ee}finally{h=null,d=j,f=!1}}var x=!1,E=null,L=-1,T=5,D=-1;function I(){return!(i.unstable_now()-D<T)}function N(){if(E!==null){var H=i.unstable_now();D=H;var U=!0;try{U=E(!0,H)}finally{U?P():(x=!1,E=null)}}else x=!1}var P;if(typeof v=="function")P=function(){v(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,V=O.port2;O.port1.onmessage=N,P=function(){V.postMessage(null)}}else P=function(){_(N,0)};function z(H){E=H,x||(x=!0,P())}function K(H,U){L=_(function(){H(i.unstable_now())},U)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){g||f||(g=!0,z(S))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(H){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var j=d;d=U;try{return H()}finally{d=j}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=d;d=H;try{return U()}finally{d=j}},i.unstable_scheduleCallback=function(H,U,j){var W=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?W+j:W):j=W,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,H={id:u++,callback:U,priorityLevel:H,startTime:j,expirationTime:X,sortIndex:-1},j>W?(H.sortIndex=j,e(c,H),t(l)===null&&H===t(c)&&(p?(m(L),L=-1):p=!0,K(C,j-W))):(H.sortIndex=X,e(l,H),g||f||(g=!0,z(S))),H},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(H){var U=d;return function(){var j=d;d=U;try{return H.apply(this,arguments)}finally{d=j}}}})(fbe);dbe.exports=fbe;var a$=dbe.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_t=function(e){var t={},n=G,s=a$,r=Object.assign;function o(b){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+b,M=1;M<arguments.length;M++)w+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),S=Symbol.iterator;function x(b){return b===null||typeof b!="object"?null:(b=S&&b[S]||b["@@iterator"],typeof b=="function"?b:null)}function E(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case m:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case g:return(b.displayName||"Context")+".Consumer";case f:return(b._context.displayName||"Context")+".Provider";case p:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case v:return w=b.displayName||null,w!==null?w:E(b.type)||"Memo";case y:w=b._payload,b=b._init;try{return E(b(w))}catch{}}return null}function L(b){var w=b.type;switch(b.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=w.render,b=b.displayName||b.name||"",w.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(w);case 8:return w===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function T(b){var w=b,M=b;if(b.alternate)for(;w.return;)w=w.return;else{b=w;do w=b,w.flags&4098&&(M=w.return),b=w.return;while(b)}return w.tag===3?M:null}function D(b){if(T(b)!==b)throw Error(o(188))}function I(b){var w=b.alternate;if(!w){if(w=T(b),w===null)throw Error(o(188));return w!==b?null:b}for(var M=b,A=w;;){var R=M.return;if(R===null)break;var $=R.alternate;if($===null){if(A=R.return,A!==null){M=A;continue}break}if(R.child===$.child){for($=R.child;$;){if($===M)return D(R),b;if($===A)return D(R),w;$=$.sibling}throw Error(o(188))}if(M.return!==A.return)M=R,A=$;else{for(var ue=!1,Le=R.child;Le;){if(Le===M){ue=!0,M=R,A=$;break}if(Le===A){ue=!0,A=R,M=$;break}Le=Le.sibling}if(!ue){for(Le=$.child;Le;){if(Le===M){ue=!0,M=$,A=R;break}if(Le===A){ue=!0,A=$,M=R;break}Le=Le.sibling}if(!ue)throw Error(o(189))}}if(M.alternate!==A)throw Error(o(190))}if(M.tag!==3)throw Error(o(188));return M.stateNode.current===M?b:w}function N(b){return b=I(b),b!==null?P(b):null}function P(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var w=P(b);if(w!==null)return w;b=b.sibling}return null}function O(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var w=O(b);if(w!==null)return w}b=b.sibling}return null}var V=Array.isArray,z=e.getPublicInstance,K=e.getRootHostContext,H=e.getChildHostContext,U=e.prepareForCommit,j=e.resetAfterCommit,W=e.createInstance,X=e.appendInitialChild,ee=e.finalizeInitialChildren,le=e.prepareUpdate,fe=e.shouldSetTextContent,be=e.createTextInstance,ye=e.scheduleTimeout,xe=e.cancelTimeout,He=e.noTimeout,qe=e.isPrimaryRenderer,ke=e.supportsMutation,q=e.supportsPersistence,Ee=e.supportsHydration,De=e.getInstanceFromNode,Ae=e.preparePortalMount,Me=e.getCurrentEventPriority,Je=e.detachDeletedInstance,Pe=e.supportsMicrotasks,Xe=e.scheduleMicrotask,Re=e.supportsTestSelectors,Fe=e.findFiberRoot,wt=e.getBoundingRect,te=e.getTextContent,Z=e.isHiddenSubtree,we=e.matchAccessibilityRole,Ye=e.setFocusIfFocusable,je=e.setupIntersectionObserver,Ge=e.appendChild,ot=e.appendChildToContainer,tt=e.commitTextUpdate,Oe=e.commitMount,lt=e.commitUpdate,xt=e.insertBefore,ut=e.insertInContainerBefore,nt=e.removeChild,ft=e.removeChildFromContainer,At=e.resetTextContent,kt=e.hideInstance,he=e.hideTextInstance,at=e.unhideInstance,Ue=e.unhideTextInstance,gt=e.clearContainer,Ct=e.cloneInstance,cn=e.createContainerChildSet,wn=e.appendChildToContainerChildSet,qn=e.finalizeContainerChildren,St=e.replaceContainerChildren,Q=e.cloneHiddenInstance,J=e.cloneHiddenTextInstance,ne=e.canHydrateInstance,pe=e.canHydrateTextInstance,ve=e.canHydrateSuspenseInstance,Te=e.isSuspenseInstancePending,ze=e.isSuspenseInstanceFallback,ht=e.registerSuspenseInstanceRetry,ct=e.getNextHydratableSibling,zt=e.getFirstHydratableChild,sn=e.getFirstHydratableChildWithinContainer,Hn=e.getFirstHydratableChildWithinSuspenseInstance,On=e.hydrateInstance,ae=e.hydrateTextInstance,_e=e.hydrateSuspenseInstance,ie=e.getNextHydratableInstanceAfterSuspenseInstance,ce=e.commitHydratedContainer,Ce=e.commitHydratedSuspenseInstance,mt=e.clearSuspenseBoundary,Bt=e.clearSuspenseBoundaryFromContainer,jt=e.shouldDeleteUnhydratedTailInstances,Ut=e.didNotMatchHydratedContainerTextInstance,dn=e.didNotMatchHydratedTextInstance,dt;function un(b){if(dt===void 0)try{throw Error()}catch(M){var w=M.stack.trim().match(/\n( *(at )?)/);dt=w&&w[1]||""}return`
`+dt+b}var Ji=!1;function Di(b,w){if(!b||Ji)return"";Ji=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Lt){var A=Lt}Reflect.construct(b,[],w)}else{try{w.call()}catch(Lt){A=Lt}b.call(w.prototype)}else{try{throw Error()}catch(Lt){A=Lt}b()}}catch(Lt){if(Lt&&A&&typeof Lt.stack=="string"){for(var R=Lt.stack.split(`
`),$=A.stack.split(`
`),ue=R.length-1,Le=$.length-1;1<=ue&&0<=Le&&R[ue]!==$[Le];)Le--;for(;1<=ue&&0<=Le;ue--,Le--)if(R[ue]!==$[Le]){if(ue!==1||Le!==1)do if(ue--,Le--,0>Le||R[ue]!==$[Le]){var Ze=`
`+R[ue].replace(" at new "," at ");return b.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",b.displayName)),Ze}while(1<=ue&&0<=Le);break}}}finally{Ji=!1,Error.prepareStackTrace=M}return(b=b?b.displayName||b.name:"")?un(b):""}var go=Object.prototype.hasOwnProperty,na=[],Ui=-1;function Sn(b){return{current:b}}function wi(b){0>Ui||(b.current=na[Ui],na[Ui]=null,Ui--)}function xn(b,w){Ui++,na[Ui]=b.current,b.current=w}var br={},rr=Sn(br),Is=Sn(!1),gl=br;function rs(b,w){var M=b.type.contextTypes;if(!M)return br;var A=b.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===w)return A.__reactInternalMemoizedMaskedChildContext;var R={},$;for($ in M)R[$]=w[$];return A&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=w,b.__reactInternalMemoizedMaskedChildContext=R),R}function ws(b){return b=b.childContextTypes,b!=null}function Pa(){wi(Is),wi(rr)}function Fr(b,w,M){if(rr.current!==br)throw Error(o(168));xn(rr,w),xn(Is,M)}function zh(b,w,M){var A=b.stateNode;if(w=w.childContextTypes,typeof A.getChildContext!="function")return M;A=A.getChildContext();for(var R in A)if(!(R in w))throw Error(o(108,L(b)||"Unknown",R));return r({},M,A)}function Uh(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||br,gl=rr.current,xn(rr,b),xn(Is,Is.current),!0}function ia(b,w,M){var A=b.stateNode;if(!A)throw Error(o(169));M?(b=zh(b,w,gl),A.__reactInternalMemoizedMergedChildContext=b,wi(Is),wi(rr),xn(rr,b)):wi(Is),xn(Is,M)}var Xl=Math.clz32?Math.clz32:Gk,x1=Math.log,Zm=Math.LN2;function Gk(b){return b>>>=0,b===0?32:31-(x1(b)/Zm|0)|0}var tf=64,nf=4194304;function sf(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function Qm(b,w){var M=b.pendingLanes;if(M===0)return 0;var A=0,R=b.suspendedLanes,$=b.pingedLanes,ue=M&268435455;if(ue!==0){var Le=ue&~R;Le!==0?A=sf(Le):($&=ue,$!==0&&(A=sf($)))}else ue=M&~R,ue!==0?A=sf(ue):$!==0&&(A=sf($));if(A===0)return 0;if(w!==0&&w!==A&&!(w&R)&&(R=A&-A,$=w&-w,R>=$||R===16&&($&4194240)!==0))return w;if(A&4&&(A|=M&16),w=b.entangledLanes,w!==0)for(b=b.entanglements,w&=A;0<w;)M=31-Xl(w),R=1<<M,A|=b[M],w&=~R;return A}function jk(b,w){switch(b){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(b,w){for(var M=b.suspendedLanes,A=b.pingedLanes,R=b.expirationTimes,$=b.pendingLanes;0<$;){var ue=31-Xl($),Le=1<<ue,Ze=R[ue];Ze===-1?(!(Le&M)||Le&A)&&(R[ue]=jk(Le,w)):Ze<=w&&(b.expiredLanes|=Le),$&=~Le}}function rf(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function E1(b){for(var w=[],M=0;31>M;M++)w.push(b);return w}function Vh(b,w,M){b.pendingLanes|=w,w!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,w=31-Xl(w),b[w]=M}function Zg(b,w){var M=b.pendingLanes&~w;b.pendingLanes=w,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=w,b.mutableReadLanes&=w,b.entangledLanes&=w,w=b.entanglements;var A=b.eventTimes;for(b=b.expirationTimes;0<M;){var R=31-Xl(M),$=1<<R;w[R]=0,A[R]=-1,b[R]=-1,M&=~$}}function Wh(b,w){var M=b.entangledLanes|=w;for(b=b.entanglements;M;){var A=31-Xl(M),R=1<<A;R&w|b[A]&w&&(b[A]|=w),M&=~R}}var ai=0;function hS(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var of=s.unstable_scheduleCallback,L1=s.unstable_cancelCallback,dS=s.unstable_shouldYield,Kk=s.unstable_requestPaint,Bs=s.unstable_now,Jm=s.unstable_ImmediatePriority,qk=s.unstable_UserBlockingPriority,Oa=s.unstable_NormalPriority,fS=s.unstable_IdlePriority,e_=null,Yl=null;function gS(b){if(Yl&&typeof Yl.onCommitFiberRoot=="function")try{Yl.onCommitFiberRoot(e_,b,void 0,(b.current.flags&128)===128)}catch{}}function Xk(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var Zl=typeof Object.is=="function"?Object.is:Xk,Fa=null,Hh=!1,Rc=!1;function pS(b){Fa===null?Fa=[b]:Fa.push(b)}function mS(b){Hh=!0,pS(b)}function pl(){if(!Rc&&Fa!==null){Rc=!0;var b=0,w=ai;try{var M=Fa;for(ai=1;b<M.length;b++){var A=M[b];do A=A(!0);while(A!==null)}Fa=null,Hh=!1}catch(R){throw Fa!==null&&(Fa=Fa.slice(b+1)),of(Jm,pl),R}finally{ai=w,Rc=!1}}return null}var t_=a.ReactCurrentBatchConfig;function n_(b,w){if(Zl(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var M=Object.keys(b),A=Object.keys(w);if(M.length!==A.length)return!1;for(A=0;A<M.length;A++){var R=M[A];if(!go.call(w,R)||!Zl(b[R],w[R]))return!1}return!0}function i_(b){switch(b.tag){case 5:return un(b.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return b=Di(b.type,!1),b;case 11:return b=Di(b.type.render,!1),b;case 1:return b=Di(b.type,!0),b;default:return""}}function Ba(b,w){if(b&&b.defaultProps){w=r({},w),b=b.defaultProps;for(var M in b)w[M]===void 0&&(w[M]=b[M]);return w}return w}var po=Sn(null),T1=null,Nu=null,Qg=null;function k1(){Qg=Nu=T1=null}function Yk(b,w,M){qe?(xn(po,w._currentValue),w._currentValue=M):(xn(po,w._currentValue2),w._currentValue2=M)}function mo(b){var w=po.current;wi(po),qe?b._currentValue=w:b._currentValue2=w}function za(b,w,M){for(;b!==null;){var A=b.alternate;if((b.childLanes&w)!==w?(b.childLanes|=w,A!==null&&(A.childLanes|=w)):A!==null&&(A.childLanes&w)!==w&&(A.childLanes|=w),b===M)break;b=b.return}}function wr(b,w){T1=b,Qg=Nu=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&w&&(tc=!0),b.firstContext=null)}function Cr(b){var w=qe?b._currentValue:b._currentValue2;if(Qg!==b)if(b={context:b,memoizedValue:w,next:null},Nu===null){if(T1===null)throw Error(o(308));Nu=b,T1.dependencies={lanes:0,firstContext:b}}else Nu=Nu.next=b;return w}var Ql=null,Jg=!1;function tF(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oZ(b,w){b=b.updateQueue,w.updateQueue===b&&(w.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function af(b,w){return{eventTime:b,lane:w,tag:0,payload:null,callback:null,next:null}}function ep(b,w){var M=b.updateQueue;M!==null&&(M=M.shared,Br!==null&&b.mode&1&&!(si&2)?(b=M.interleaved,b===null?(w.next=w,Ql===null?Ql=[M]:Ql.push(M)):(w.next=b.next,b.next=w),M.interleaved=w):(b=M.pending,b===null?w.next=w:(w.next=b.next,b.next=w),M.pending=w))}function Zk(b,w,M){if(w=w.updateQueue,w!==null&&(w=w.shared,(M&4194240)!==0)){var A=w.lanes;A&=b.pendingLanes,M|=A,w.lanes=M,Wh(b,M)}}function aZ(b,w){var M=b.updateQueue,A=b.alternate;if(A!==null&&(A=A.updateQueue,M===A)){var R=null,$=null;if(M=M.firstBaseUpdate,M!==null){do{var ue={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};$===null?R=$=ue:$=$.next=ue,M=M.next}while(M!==null);$===null?R=$=w:$=$.next=w}else R=$=w;M={baseState:A.baseState,firstBaseUpdate:R,lastBaseUpdate:$,shared:A.shared,effects:A.effects},b.updateQueue=M;return}b=M.lastBaseUpdate,b===null?M.firstBaseUpdate=w:b.next=w,M.lastBaseUpdate=w}function Qk(b,w,M,A){var R=b.updateQueue;Jg=!1;var $=R.firstBaseUpdate,ue=R.lastBaseUpdate,Le=R.shared.pending;if(Le!==null){R.shared.pending=null;var Ze=Le,Lt=Ze.next;Ze.next=null,ue===null?$=Lt:ue.next=Lt,ue=Ze;var Yt=b.alternate;Yt!==null&&(Yt=Yt.updateQueue,Le=Yt.lastBaseUpdate,Le!==ue&&(Le===null?Yt.firstBaseUpdate=Lt:Le.next=Lt,Yt.lastBaseUpdate=Ze))}if($!==null){var zn=R.baseState;ue=0,Yt=Lt=Ze=null,Le=$;do{var gn=Le.lane,fs=Le.eventTime;if((A&gn)===gn){Yt!==null&&(Yt=Yt.next={eventTime:fs,lane:0,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null});e:{var on=b,aa=Le;switch(gn=w,fs=M,aa.tag){case 1:if(on=aa.payload,typeof on=="function"){zn=on.call(fs,zn,gn);break e}zn=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=aa.payload,gn=typeof on=="function"?on.call(fs,zn,gn):on,gn==null)break e;zn=r({},zn,gn);break e;case 2:Jg=!0}}Le.callback!==null&&Le.lane!==0&&(b.flags|=64,gn=R.effects,gn===null?R.effects=[Le]:gn.push(Le))}else fs={eventTime:fs,lane:gn,tag:Le.tag,payload:Le.payload,callback:Le.callback,next:null},Yt===null?(Lt=Yt=fs,Ze=zn):Yt=Yt.next=fs,ue|=gn;if(Le=Le.next,Le===null){if(Le=R.shared.pending,Le===null)break;gn=Le,Le=gn.next,gn.next=null,R.lastBaseUpdate=gn,R.shared.pending=null}}while(!0);if(Yt===null&&(Ze=zn),R.baseState=Ze,R.firstBaseUpdate=Lt,R.lastBaseUpdate=Yt,w=R.shared.interleaved,w!==null){R=w;do ue|=R.lane,R=R.next;while(R!==w)}else $===null&&(R.shared.lanes=0);F1|=ue,b.lanes=ue,b.memoizedState=zn}}function lZ(b,w,M){if(b=w.effects,w.effects=null,b!==null)for(w=0;w<b.length;w++){var A=b[w],R=A.callback;if(R!==null){if(A.callback=null,A=M,typeof R!="function")throw Error(o(191,R));R.call(A)}}}var cZ=new n.Component().refs;function nF(b,w,M,A){w=b.memoizedState,M=M(A,w),M=M==null?w:r({},w,M),b.memoizedState=M,b.lanes===0&&(b.updateQueue.baseState=M)}var Jk={isMounted:function(b){return(b=b._reactInternals)?T(b)===b:!1},enqueueSetState:function(b,w,M){b=b._reactInternals;var A=Va(),R=ip(b),$=af(A,R);$.payload=w,M!=null&&($.callback=M),ep(b,$),w=zc(b,R,A),w!==null&&Zk(w,b,R)},enqueueReplaceState:function(b,w,M){b=b._reactInternals;var A=Va(),R=ip(b),$=af(A,R);$.tag=1,$.payload=w,M!=null&&($.callback=M),ep(b,$),w=zc(b,R,A),w!==null&&Zk(w,b,R)},enqueueForceUpdate:function(b,w){b=b._reactInternals;var M=Va(),A=ip(b),R=af(M,A);R.tag=2,w!=null&&(R.callback=w),ep(b,R),w=zc(b,A,M),w!==null&&Zk(w,b,A)}};function uZ(b,w,M,A,R,$,ue){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(A,$,ue):w.prototype&&w.prototype.isPureReactComponent?!n_(M,A)||!n_(R,$):!0}function hZ(b,w,M){var A=!1,R=br,$=w.contextType;return typeof $=="object"&&$!==null?$=Cr($):(R=ws(w)?gl:rr.current,A=w.contextTypes,$=(A=A!=null)?rs(b,R):br),w=new w(M,$),b.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Jk,b.stateNode=w,w._reactInternals=b,A&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=R,b.__reactInternalMemoizedMaskedChildContext=$),w}function dZ(b,w,M,A){b=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(M,A),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(M,A),w.state!==b&&Jk.enqueueReplaceState(w,w.state,null)}function iF(b,w,M,A){var R=b.stateNode;R.props=M,R.state=b.memoizedState,R.refs=cZ,tF(b);var $=w.contextType;typeof $=="object"&&$!==null?R.context=Cr($):($=ws(w)?gl:rr.current,R.context=rs(b,$)),R.state=b.memoizedState,$=w.getDerivedStateFromProps,typeof $=="function"&&(nF(b,w,$,M),R.state=b.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(w=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),w!==R.state&&Jk.enqueueReplaceState(R,R.state,null),Qk(b,M,R,A),R.state=b.memoizedState),typeof R.componentDidMount=="function"&&(b.flags|=4194308)}var M1=[],D1=0,eM=null,tM=0,Pc=[],Oc=0,s_=null,lf=1,cf="";function r_(b,w){M1[D1++]=tM,M1[D1++]=eM,eM=b,tM=w}function fZ(b,w,M){Pc[Oc++]=lf,Pc[Oc++]=cf,Pc[Oc++]=s_,s_=b;var A=lf;b=cf;var R=32-Xl(A)-1;A&=~(1<<R),M+=1;var $=32-Xl(w)+R;if(30<$){var ue=R-R%5;$=(A&(1<<ue)-1).toString(32),A>>=ue,R-=ue,lf=1<<32-Xl(w)+R|M<<R|A,cf=$+b}else lf=1<<$|M<<R|A,cf=b}function sF(b){b.return!==null&&(r_(b,1),fZ(b,1,0))}function rF(b){for(;b===eM;)eM=M1[--D1],M1[D1]=null,tM=M1[--D1],M1[D1]=null;for(;b===s_;)s_=Pc[--Oc],Pc[Oc]=null,cf=Pc[--Oc],Pc[Oc]=null,lf=Pc[--Oc],Pc[Oc]=null}var Jl=null,ec=null,Ns=!1,_S=!1,Ru=null;function gZ(b,w){var M=Uc(5,null,null,0);M.elementType="DELETED",M.stateNode=w,M.return=b,w=b.deletions,w===null?(b.deletions=[M],b.flags|=16):w.push(M)}function pZ(b,w){switch(b.tag){case 5:return w=ne(w,b.type,b.pendingProps),w!==null?(b.stateNode=w,Jl=b,ec=zt(w),!0):!1;case 6:return w=pe(w,b.pendingProps),w!==null?(b.stateNode=w,Jl=b,ec=null,!0):!1;case 13:if(w=ve(w),w!==null){var M=s_!==null?{id:lf,overflow:cf}:null;return b.memoizedState={dehydrated:w,treeContext:M,retryLane:1073741824},M=Uc(18,null,null,0),M.stateNode=w,M.return=b,b.child=M,Jl=b,ec=null,!0}return!1;default:return!1}}function oF(b){return(b.mode&1)!==0&&(b.flags&128)===0}function aF(b){if(Ns){var w=ec;if(w){var M=w;if(!pZ(b,w)){if(oF(b))throw Error(o(418));w=ct(M);var A=Jl;w&&pZ(b,w)?gZ(A,M):(b.flags=b.flags&-4097|2,Ns=!1,Jl=b)}}else{if(oF(b))throw Error(o(418));b.flags=b.flags&-4097|2,Ns=!1,Jl=b}}}function mZ(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Jl=b}function vS(b){if(!Ee||b!==Jl)return!1;if(!Ns)return mZ(b),Ns=!0,!1;if(b.tag!==3&&(b.tag!==5||jt(b.type)&&!fe(b.type,b.memoizedProps))){var w=ec;if(w){if(oF(b)){for(b=ec;b;)b=ct(b);throw Error(o(418))}for(;w;)gZ(b,w),w=ct(w)}}if(mZ(b),b.tag===13){if(!Ee)throw Error(o(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));ec=ie(b)}else ec=Jl?ct(b.stateNode):null;return!0}function A1(){Ee&&(ec=Jl=null,_S=Ns=!1)}function lF(b){Ru===null?Ru=[b]:Ru.push(b)}function yS(b,w,M){if(b=M.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(M._owner){if(M=M._owner,M){if(M.tag!==1)throw Error(o(309));var A=M.stateNode}if(!A)throw Error(o(147,b));var R=A,$=""+b;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===$?w.ref:(w=function(ue){var Le=R.refs;Le===cZ&&(Le=R.refs={}),ue===null?delete Le[$]:Le[$]=ue},w._stringRef=$,w)}if(typeof b!="string")throw Error(o(284));if(!M._owner)throw Error(o(290,b))}return b}function nM(b,w){throw b=Object.prototype.toString.call(w),Error(o(31,b==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":b))}function _Z(b){var w=b._init;return w(b._payload)}function vZ(b){function w(Ve,Ie){if(b){var Ke=Ve.deletions;Ke===null?(Ve.deletions=[Ie],Ve.flags|=16):Ke.push(Ie)}}function M(Ve,Ie){if(!b)return null;for(;Ie!==null;)w(Ve,Ie),Ie=Ie.sibling;return null}function A(Ve,Ie){for(Ve=new Map;Ie!==null;)Ie.key!==null?Ve.set(Ie.key,Ie):Ve.set(Ie.index,Ie),Ie=Ie.sibling;return Ve}function R(Ve,Ie){return Ve=rp(Ve,Ie),Ve.index=0,Ve.sibling=null,Ve}function $(Ve,Ie,Ke){return Ve.index=Ke,b?(Ke=Ve.alternate,Ke!==null?(Ke=Ke.index,Ke<Ie?(Ve.flags|=2,Ie):Ke):(Ve.flags|=2,Ie)):(Ve.flags|=1048576,Ie)}function ue(Ve){return b&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Le(Ve,Ie,Ke,Wt){return Ie===null||Ie.tag!==6?(Ie=GF(Ke,Ve.mode,Wt),Ie.return=Ve,Ie):(Ie=R(Ie,Ke),Ie.return=Ve,Ie)}function Ze(Ve,Ie,Ke,Wt){var rn=Ke.type;return rn===u?Yt(Ve,Ie,Ke.props.children,Wt,Ke.key):Ie!==null&&(Ie.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===y&&_Z(rn)===Ie.type)?(Wt=R(Ie,Ke.props),Wt.ref=yS(Ve,Ie,Ke),Wt.return=Ve,Wt):(Wt=NM(Ke.type,Ke.key,Ke.props,null,Ve.mode,Wt),Wt.ref=yS(Ve,Ie,Ke),Wt.return=Ve,Wt)}function Lt(Ve,Ie,Ke,Wt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ke.containerInfo||Ie.stateNode.implementation!==Ke.implementation?(Ie=jF(Ke,Ve.mode,Wt),Ie.return=Ve,Ie):(Ie=R(Ie,Ke.children||[]),Ie.return=Ve,Ie)}function Yt(Ve,Ie,Ke,Wt,rn){return Ie===null||Ie.tag!==7?(Ie=d_(Ke,Ve.mode,Wt,rn),Ie.return=Ve,Ie):(Ie=R(Ie,Ke),Ie.return=Ve,Ie)}function zn(Ve,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=GF(""+Ie,Ve.mode,Ke),Ie.return=Ve,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Ke=NM(Ie.type,Ie.key,Ie.props,null,Ve.mode,Ke),Ke.ref=yS(Ve,null,Ie),Ke.return=Ve,Ke;case c:return Ie=jF(Ie,Ve.mode,Ke),Ie.return=Ve,Ie;case y:var Wt=Ie._init;return zn(Ve,Wt(Ie._payload),Ke)}if(V(Ie)||x(Ie))return Ie=d_(Ie,Ve.mode,Ke,null),Ie.return=Ve,Ie;nM(Ve,Ie)}return null}function gn(Ve,Ie,Ke,Wt){var rn=Ie!==null?Ie.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return rn!==null?null:Le(Ve,Ie,""+Ke,Wt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return Ke.key===rn?Ze(Ve,Ie,Ke,Wt):null;case c:return Ke.key===rn?Lt(Ve,Ie,Ke,Wt):null;case y:return rn=Ke._init,gn(Ve,Ie,rn(Ke._payload),Wt)}if(V(Ke)||x(Ke))return rn!==null?null:Yt(Ve,Ie,Ke,Wt,null);nM(Ve,Ke)}return null}function fs(Ve,Ie,Ke,Wt,rn){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number")return Ve=Ve.get(Ke)||null,Le(Ie,Ve,""+Wt,rn);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case l:return Ve=Ve.get(Wt.key===null?Ke:Wt.key)||null,Ze(Ie,Ve,Wt,rn);case c:return Ve=Ve.get(Wt.key===null?Ke:Wt.key)||null,Lt(Ie,Ve,Wt,rn);case y:var ei=Wt._init;return fs(Ve,Ie,Ke,ei(Wt._payload),rn)}if(V(Wt)||x(Wt))return Ve=Ve.get(Ke)||null,Yt(Ie,Ve,Wt,rn,null);nM(Ie,Wt)}return null}function on(Ve,Ie,Ke,Wt){for(var rn=null,ei=null,Un=Ie,Ai=Ie=0,vo=null;Un!==null&&Ai<Ke.length;Ai++){Un.index>Ai?(vo=Un,Un=null):vo=Un.sibling;var Ii=gn(Ve,Un,Ke[Ai],Wt);if(Ii===null){Un===null&&(Un=vo);break}b&&Un&&Ii.alternate===null&&w(Ve,Un),Ie=$(Ii,Ie,Ai),ei===null?rn=Ii:ei.sibling=Ii,ei=Ii,Un=vo}if(Ai===Ke.length)return M(Ve,Un),Ns&&r_(Ve,Ai),rn;if(Un===null){for(;Ai<Ke.length;Ai++)Un=zn(Ve,Ke[Ai],Wt),Un!==null&&(Ie=$(Un,Ie,Ai),ei===null?rn=Un:ei.sibling=Un,ei=Un);return Ns&&r_(Ve,Ai),rn}for(Un=A(Ve,Un);Ai<Ke.length;Ai++)vo=fs(Un,Ve,Ai,Ke[Ai],Wt),vo!==null&&(b&&vo.alternate!==null&&Un.delete(vo.key===null?Ai:vo.key),Ie=$(vo,Ie,Ai),ei===null?rn=vo:ei.sibling=vo,ei=vo);return b&&Un.forEach(function(op){return w(Ve,op)}),Ns&&r_(Ve,Ai),rn}function aa(Ve,Ie,Ke,Wt){var rn=x(Ke);if(typeof rn!="function")throw Error(o(150));if(Ke=rn.call(Ke),Ke==null)throw Error(o(151));for(var ei=rn=null,Un=Ie,Ai=Ie=0,vo=null,Ii=Ke.next();Un!==null&&!Ii.done;Ai++,Ii=Ke.next()){Un.index>Ai?(vo=Un,Un=null):vo=Un.sibling;var op=gn(Ve,Un,Ii.value,Wt);if(op===null){Un===null&&(Un=vo);break}b&&Un&&op.alternate===null&&w(Ve,Un),Ie=$(op,Ie,Ai),ei===null?rn=op:ei.sibling=op,ei=op,Un=vo}if(Ii.done)return M(Ve,Un),Ns&&r_(Ve,Ai),rn;if(Un===null){for(;!Ii.done;Ai++,Ii=Ke.next())Ii=zn(Ve,Ii.value,Wt),Ii!==null&&(Ie=$(Ii,Ie,Ai),ei===null?rn=Ii:ei.sibling=Ii,ei=Ii);return Ns&&r_(Ve,Ai),rn}for(Un=A(Ve,Un);!Ii.done;Ai++,Ii=Ke.next())Ii=fs(Un,Ve,Ai,Ii.value,Wt),Ii!==null&&(b&&Ii.alternate!==null&&Un.delete(Ii.key===null?Ai:Ii.key),Ie=$(Ii,Ie,Ai),ei===null?rn=Ii:ei.sibling=Ii,ei=Ii);return b&&Un.forEach(function(rxe){return w(Ve,rxe)}),Ns&&r_(Ve,Ai),rn}function Vc(Ve,Ie,Ke,Wt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===u&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:e:{for(var rn=Ke.key,ei=Ie;ei!==null;){if(ei.key===rn){if(rn=Ke.type,rn===u){if(ei.tag===7){M(Ve,ei.sibling),Ie=R(ei,Ke.props.children),Ie.return=Ve,Ve=Ie;break e}}else if(ei.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===y&&_Z(rn)===ei.type){M(Ve,ei.sibling),Ie=R(ei,Ke.props),Ie.ref=yS(Ve,ei,Ke),Ie.return=Ve,Ve=Ie;break e}M(Ve,ei);break}else w(Ve,ei);ei=ei.sibling}Ke.type===u?(Ie=d_(Ke.props.children,Ve.mode,Wt,Ke.key),Ie.return=Ve,Ve=Ie):(Wt=NM(Ke.type,Ke.key,Ke.props,null,Ve.mode,Wt),Wt.ref=yS(Ve,Ie,Ke),Wt.return=Ve,Ve=Wt)}return ue(Ve);case c:e:{for(ei=Ke.key;Ie!==null;){if(Ie.key===ei)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ke.containerInfo&&Ie.stateNode.implementation===Ke.implementation){M(Ve,Ie.sibling),Ie=R(Ie,Ke.children||[]),Ie.return=Ve,Ve=Ie;break e}else{M(Ve,Ie);break}else w(Ve,Ie);Ie=Ie.sibling}Ie=jF(Ke,Ve.mode,Wt),Ie.return=Ve,Ve=Ie}return ue(Ve);case y:return ei=Ke._init,Vc(Ve,Ie,ei(Ke._payload),Wt)}if(V(Ke))return on(Ve,Ie,Ke,Wt);if(x(Ke))return aa(Ve,Ie,Ke,Wt);nM(Ve,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Ie!==null&&Ie.tag===6?(M(Ve,Ie.sibling),Ie=R(Ie,Ke),Ie.return=Ve,Ve=Ie):(M(Ve,Ie),Ie=GF(Ke,Ve.mode,Wt),Ie.return=Ve,Ve=Ie),ue(Ve)):M(Ve,Ie)}return Vc}var I1=vZ(!0),yZ=vZ(!1),bS={},Fc=Sn(bS),wS=Sn(bS),N1=Sn(bS);function $h(b){if(b===bS)throw Error(o(174));return b}function cF(b,w){xn(N1,w),xn(wS,b),xn(Fc,bS),b=K(w),wi(Fc),xn(Fc,b)}function R1(){wi(Fc),wi(wS),wi(N1)}function bZ(b){var w=$h(N1.current),M=$h(Fc.current);w=H(M,b.type,w),M!==w&&(xn(wS,b),xn(Fc,w))}function uF(b){wS.current===b&&(wi(Fc),wi(wS))}var zs=Sn(0);function iM(b){for(var w=b;w!==null;){if(w.tag===13){var M=w.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||Te(M)||ze(M)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var hF=[];function dF(){for(var b=0;b<hF.length;b++){var w=hF[b];qe?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}hF.length=0}var sM=a.ReactCurrentDispatcher,Bc=a.ReactCurrentBatchConfig,P1=0,or=null,sa=null,_o=null,rM=!1,CS=!1,SS=0,DSe=0;function ra(){throw Error(o(321))}function fF(b,w){if(w===null)return!1;for(var M=0;M<w.length&&M<b.length;M++)if(!Zl(b[M],w[M]))return!1;return!0}function gF(b,w,M,A,R,$){if(P1=$,or=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,sM.current=b===null||b.memoizedState===null?RSe:PSe,b=M(A,R),CS){$=0;do{if(CS=!1,SS=0,25<=$)throw Error(o(301));$+=1,_o=sa=null,w.updateQueue=null,sM.current=OSe,b=M(A,R)}while(CS)}if(sM.current=uM,w=sa!==null&&sa.next!==null,P1=0,_o=sa=or=null,rM=!1,w)throw Error(o(300));return b}function pF(){var b=SS!==0;return SS=0,b}function uf(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _o===null?or.memoizedState=_o=b:_o=_o.next=b,_o}function Gh(){if(sa===null){var b=or.alternate;b=b!==null?b.memoizedState:null}else b=sa.next;var w=_o===null?or.memoizedState:_o.next;if(w!==null)_o=w,sa=b;else{if(b===null)throw Error(o(310));sa=b,b={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},_o===null?or.memoizedState=_o=b:_o=_o.next=b}return _o}function o_(b,w){return typeof w=="function"?w(b):w}function oM(b){var w=Gh(),M=w.queue;if(M===null)throw Error(o(311));M.lastRenderedReducer=b;var A=sa,R=A.baseQueue,$=M.pending;if($!==null){if(R!==null){var ue=R.next;R.next=$.next,$.next=ue}A.baseQueue=R=$,M.pending=null}if(R!==null){$=R.next,A=A.baseState;var Le=ue=null,Ze=null,Lt=$;do{var Yt=Lt.lane;if((P1&Yt)===Yt)Ze!==null&&(Ze=Ze.next={lane:0,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null}),A=Lt.hasEagerState?Lt.eagerState:b(A,Lt.action);else{var zn={lane:Yt,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null};Ze===null?(Le=Ze=zn,ue=A):Ze=Ze.next=zn,or.lanes|=Yt,F1|=Yt}Lt=Lt.next}while(Lt!==null&&Lt!==$);Ze===null?ue=A:Ze.next=Le,Zl(A,w.memoizedState)||(tc=!0),w.memoizedState=A,w.baseState=ue,w.baseQueue=Ze,M.lastRenderedState=A}if(b=M.interleaved,b!==null){R=b;do $=R.lane,or.lanes|=$,F1|=$,R=R.next;while(R!==b)}else R===null&&(M.lanes=0);return[w.memoizedState,M.dispatch]}function aM(b){var w=Gh(),M=w.queue;if(M===null)throw Error(o(311));M.lastRenderedReducer=b;var A=M.dispatch,R=M.pending,$=w.memoizedState;if(R!==null){M.pending=null;var ue=R=R.next;do $=b($,ue.action),ue=ue.next;while(ue!==R);Zl($,w.memoizedState)||(tc=!0),w.memoizedState=$,w.baseQueue===null&&(w.baseState=$),M.lastRenderedState=$}return[$,A]}function wZ(){}function CZ(b,w){var M=or,A=Gh(),R=w(),$=!Zl(A.memoizedState,R);if($&&(A.memoizedState=R,tc=!0),A=A.queue,ES(EZ.bind(null,M,A,b),[b]),A.getSnapshot!==w||$||_o!==null&&_o.memoizedState.tag&1){if(M.flags|=2048,xS(9,xZ.bind(null,M,A,R,w),void 0,null),Br===null)throw Error(o(349));P1&30||SZ(M,w,R)}return R}function SZ(b,w,M){b.flags|=16384,b={getSnapshot:w,value:M},w=or.updateQueue,w===null?(w={lastEffect:null,stores:null},or.updateQueue=w,w.stores=[b]):(M=w.stores,M===null?w.stores=[b]:M.push(b))}function xZ(b,w,M,A){w.value=M,w.getSnapshot=A,LZ(w)&&zc(b,1,-1)}function EZ(b,w,M){return M(function(){LZ(w)&&zc(b,1,-1)})}function LZ(b){var w=b.getSnapshot;b=b.value;try{var M=w();return!Zl(b,M)}catch{return!0}}function mF(b){var w=uf();return typeof b=="function"&&(b=b()),w.memoizedState=w.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o_,lastRenderedState:b},w.queue=b,b=b.dispatch=NSe.bind(null,or,b),[w.memoizedState,b]}function xS(b,w,M,A){return b={tag:b,create:w,destroy:M,deps:A,next:null},w=or.updateQueue,w===null?(w={lastEffect:null,stores:null},or.updateQueue=w,w.lastEffect=b.next=b):(M=w.lastEffect,M===null?w.lastEffect=b.next=b:(A=M.next,M.next=b,b.next=A,w.lastEffect=b)),b}function TZ(){return Gh().memoizedState}function lM(b,w,M,A){var R=uf();or.flags|=b,R.memoizedState=xS(1|w,M,void 0,A===void 0?null:A)}function cM(b,w,M,A){var R=Gh();A=A===void 0?null:A;var $=void 0;if(sa!==null){var ue=sa.memoizedState;if($=ue.destroy,A!==null&&fF(A,ue.deps)){R.memoizedState=xS(w,M,$,A);return}}or.flags|=b,R.memoizedState=xS(1|w,M,$,A)}function _F(b,w){return lM(8390656,8,b,w)}function ES(b,w){return cM(2048,8,b,w)}function kZ(b,w){return cM(4,2,b,w)}function MZ(b,w){return cM(4,4,b,w)}function DZ(b,w){if(typeof w=="function")return b=b(),w(b),function(){w(null)};if(w!=null)return b=b(),w.current=b,function(){w.current=null}}function AZ(b,w,M){return M=M!=null?M.concat([b]):null,cM(4,4,DZ.bind(null,w,b),M)}function vF(){}function IZ(b,w){var M=Gh();w=w===void 0?null:w;var A=M.memoizedState;return A!==null&&w!==null&&fF(w,A[1])?A[0]:(M.memoizedState=[b,w],b)}function NZ(b,w){var M=Gh();w=w===void 0?null:w;var A=M.memoizedState;return A!==null&&w!==null&&fF(w,A[1])?A[0]:(b=b(),M.memoizedState=[b,w],b)}function ASe(b,w){var M=ai;ai=M!==0&&4>M?M:4,b(!0);var A=Bc.transition;Bc.transition={};try{b(!1),w()}finally{ai=M,Bc.transition=A}}function RZ(){return Gh().memoizedState}function ISe(b,w,M){var A=ip(b);M={lane:A,action:M,hasEagerState:!1,eagerState:null,next:null},PZ(b)?OZ(w,M):(FZ(b,w,M),M=Va(),b=zc(b,A,M),b!==null&&BZ(b,w,A))}function NSe(b,w,M){var A=ip(b),R={lane:A,action:M,hasEagerState:!1,eagerState:null,next:null};if(PZ(b))OZ(w,R);else{FZ(b,w,R);var $=b.alternate;if(b.lanes===0&&($===null||$.lanes===0)&&($=w.lastRenderedReducer,$!==null))try{var ue=w.lastRenderedState,Le=$(ue,M);if(R.hasEagerState=!0,R.eagerState=Le,Zl(Le,ue))return}catch{}finally{}M=Va(),b=zc(b,A,M),b!==null&&BZ(b,w,A)}}function PZ(b){var w=b.alternate;return b===or||w!==null&&w===or}function OZ(b,w){CS=rM=!0;var M=b.pending;M===null?w.next=w:(w.next=M.next,M.next=w),b.pending=w}function FZ(b,w,M){Br!==null&&b.mode&1&&!(si&2)?(b=w.interleaved,b===null?(M.next=M,Ql===null?Ql=[w]:Ql.push(w)):(M.next=b.next,b.next=M),w.interleaved=M):(b=w.pending,b===null?M.next=M:(M.next=b.next,b.next=M),w.pending=M)}function BZ(b,w,M){if(M&4194240){var A=w.lanes;A&=b.pendingLanes,M|=A,w.lanes=M,Wh(b,M)}}var uM={readContext:Cr,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useInsertionEffect:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useSyncExternalStore:ra,useId:ra,unstable_isNewReconciler:!1},RSe={readContext:Cr,useCallback:function(b,w){return uf().memoizedState=[b,w===void 0?null:w],b},useContext:Cr,useEffect:_F,useImperativeHandle:function(b,w,M){return M=M!=null?M.concat([b]):null,lM(4194308,4,DZ.bind(null,w,b),M)},useLayoutEffect:function(b,w){return lM(4194308,4,b,w)},useInsertionEffect:function(b,w){return lM(4,2,b,w)},useMemo:function(b,w){var M=uf();return w=w===void 0?null:w,b=b(),M.memoizedState=[b,w],b},useReducer:function(b,w,M){var A=uf();return w=M!==void 0?M(w):w,A.memoizedState=A.baseState=w,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:w},A.queue=b,b=b.dispatch=ISe.bind(null,or,b),[A.memoizedState,b]},useRef:function(b){var w=uf();return b={current:b},w.memoizedState=b},useState:mF,useDebugValue:vF,useDeferredValue:function(b){var w=mF(b),M=w[0],A=w[1];return _F(function(){var R=Bc.transition;Bc.transition={};try{A(b)}finally{Bc.transition=R}},[b]),M},useTransition:function(){var b=mF(!1),w=b[0];return b=ASe.bind(null,b[1]),uf().memoizedState=b,[w,b]},useMutableSource:function(){},useSyncExternalStore:function(b,w,M){var A=or,R=uf();if(Ns){if(M===void 0)throw Error(o(407));M=M()}else{if(M=w(),Br===null)throw Error(o(349));P1&30||SZ(A,w,M)}R.memoizedState=M;var $={value:M,getSnapshot:w};return R.queue=$,_F(EZ.bind(null,A,$,b),[b]),A.flags|=2048,xS(9,xZ.bind(null,A,$,M,w),void 0,null),M},useId:function(){var b=uf(),w=Br.identifierPrefix;if(Ns){var M=cf,A=lf;M=(A&~(1<<32-Xl(A)-1)).toString(32)+M,w=":"+w+"R"+M,M=SS++,0<M&&(w+="H"+M.toString(32)),w+=":"}else M=DSe++,w=":"+w+"r"+M.toString(32)+":";return b.memoizedState=w},unstable_isNewReconciler:!1},PSe={readContext:Cr,useCallback:IZ,useContext:Cr,useEffect:ES,useImperativeHandle:AZ,useInsertionEffect:kZ,useLayoutEffect:MZ,useMemo:NZ,useReducer:oM,useRef:TZ,useState:function(){return oM(o_)},useDebugValue:vF,useDeferredValue:function(b){var w=oM(o_),M=w[0],A=w[1];return ES(function(){var R=Bc.transition;Bc.transition={};try{A(b)}finally{Bc.transition=R}},[b]),M},useTransition:function(){var b=oM(o_)[0],w=Gh().memoizedState;return[b,w]},useMutableSource:wZ,useSyncExternalStore:CZ,useId:RZ,unstable_isNewReconciler:!1},OSe={readContext:Cr,useCallback:IZ,useContext:Cr,useEffect:ES,useImperativeHandle:AZ,useInsertionEffect:kZ,useLayoutEffect:MZ,useMemo:NZ,useReducer:aM,useRef:TZ,useState:function(){return aM(o_)},useDebugValue:vF,useDeferredValue:function(b){var w=aM(o_),M=w[0],A=w[1];return ES(function(){var R=Bc.transition;Bc.transition={};try{A(b)}finally{Bc.transition=R}},[b]),M},useTransition:function(){var b=aM(o_)[0],w=Gh().memoizedState;return[b,w]},useMutableSource:wZ,useSyncExternalStore:CZ,useId:RZ,unstable_isNewReconciler:!1};function yF(b,w){try{var M="",A=w;do M+=i_(A),A=A.return;while(A);var R=M}catch($){R=`
Error generating stack: `+$.message+`
`+$.stack}return{value:b,source:w,stack:R}}function bF(b,w){try{console.error(w.value)}catch(M){setTimeout(function(){throw M})}}var FSe=typeof WeakMap=="function"?WeakMap:Map;function zZ(b,w,M){M=af(-1,M),M.tag=3,M.payload={element:null};var A=w.value;return M.callback=function(){LM||(LM=!0,BF=A),bF(b,w)},M}function UZ(b,w,M){M=af(-1,M),M.tag=3;var A=b.type.getDerivedStateFromError;if(typeof A=="function"){var R=w.value;M.payload=function(){return A(R)},M.callback=function(){bF(b,w)}}var $=b.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(M.callback=function(){bF(b,w),typeof A!="function"&&(tp===null?tp=new Set([this]):tp.add(this));var ue=w.stack;this.componentDidCatch(w.value,{componentStack:ue!==null?ue:""})}),M}function VZ(b,w,M){var A=b.pingCache;if(A===null){A=b.pingCache=new FSe;var R=new Set;A.set(w,R)}else R=A.get(w),R===void 0&&(R=new Set,A.set(w,R));R.has(M)||(R.add(M),b=ZSe.bind(null,b,w,M),w.then(b,b))}function WZ(b){do{var w;if((w=b.tag===13)&&(w=b.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return b;b=b.return}while(b!==null);return null}function HZ(b,w,M,A,R){return b.mode&1?(b.flags|=65536,b.lanes=R,b):(b===w?b.flags|=65536:(b.flags|=128,M.flags|=131072,M.flags&=-52805,M.tag===1&&(M.alternate===null?M.tag=17:(w=af(-1,1),w.tag=2,ep(M,w))),M.lanes|=1),b)}function jh(b){b.flags|=4}function $Z(b,w){if(b!==null&&b.child===w.child)return!0;if(w.flags&16)return!1;for(b=w.child;b!==null;){if(b.flags&12854||b.subtreeFlags&12854)return!1;b=b.sibling}return!0}var LS,TS,hM,dM;if(ke)LS=function(b,w){for(var M=w.child;M!==null;){if(M.tag===5||M.tag===6)X(b,M.stateNode);else if(M.tag!==4&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===w)break;for(;M.sibling===null;){if(M.return===null||M.return===w)return;M=M.return}M.sibling.return=M.return,M=M.sibling}},TS=function(){},hM=function(b,w,M,A,R){if(b=b.memoizedProps,b!==A){var $=w.stateNode,ue=$h(Fc.current);M=le($,M,b,A,R,ue),(w.updateQueue=M)&&jh(w)}},dM=function(b,w,M,A){M!==A&&jh(w)};else if(q){LS=function(b,w,M,A){for(var R=w.child;R!==null;){if(R.tag===5){var $=R.stateNode;M&&A&&($=Q($,R.type,R.memoizedProps,R)),X(b,$)}else if(R.tag===6)$=R.stateNode,M&&A&&($=J($,R.memoizedProps,R)),X(b,$);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)$=R.child,$!==null&&($.return=R),LS(b,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===w)break;for(;R.sibling===null;){if(R.return===null||R.return===w)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var GZ=function(b,w,M,A){for(var R=w.child;R!==null;){if(R.tag===5){var $=R.stateNode;M&&A&&($=Q($,R.type,R.memoizedProps,R)),wn(b,$)}else if(R.tag===6)$=R.stateNode,M&&A&&($=J($,R.memoizedProps,R)),wn(b,$);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)$=R.child,$!==null&&($.return=R),GZ(b,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===w)break;for(;R.sibling===null;){if(R.return===null||R.return===w)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};TS=function(b,w){var M=w.stateNode;if(!$Z(b,w)){b=M.containerInfo;var A=cn(b);GZ(A,w,!1,!1),M.pendingChildren=A,jh(w),qn(b,A)}},hM=function(b,w,M,A,R){var $=b.stateNode,ue=b.memoizedProps;if((b=$Z(b,w))&&ue===A)w.stateNode=$;else{var Le=w.stateNode,Ze=$h(Fc.current),Lt=null;ue!==A&&(Lt=le(Le,M,ue,A,R,Ze)),b&&Lt===null?w.stateNode=$:($=Ct($,Lt,M,ue,A,w,b,Le),ee($,M,A,R,Ze)&&jh(w),w.stateNode=$,b?jh(w):LS($,w,!1,!1))}},dM=function(b,w,M,A){M!==A?(b=$h(N1.current),M=$h(Fc.current),w.stateNode=be(A,b,M,w),jh(w)):w.stateNode=b.stateNode}}else TS=function(){},hM=function(){},dM=function(){};function kS(b,w){if(!Ns)switch(b.tailMode){case"hidden":w=b.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?b.tail=null:M.sibling=null;break;case"collapsed":M=b.tail;for(var A=null;M!==null;)M.alternate!==null&&(A=M),M=M.sibling;A===null?w||b.tail===null?b.tail=null:b.tail.sibling=null:A.sibling=null}}function oa(b){var w=b.alternate!==null&&b.alternate.child===b.child,M=0,A=0;if(w)for(var R=b.child;R!==null;)M|=R.lanes|R.childLanes,A|=R.subtreeFlags&14680064,A|=R.flags&14680064,R.return=b,R=R.sibling;else for(R=b.child;R!==null;)M|=R.lanes|R.childLanes,A|=R.subtreeFlags,A|=R.flags,R.return=b,R=R.sibling;return b.subtreeFlags|=A,b.childLanes=M,w}function BSe(b,w,M){var A=w.pendingProps;switch(rF(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oa(w),null;case 1:return ws(w.type)&&Pa(),oa(w),null;case 3:return A=w.stateNode,R1(),wi(Is),wi(rr),dF(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(b===null||b.child===null)&&(vS(w)?jh(w):b===null||b.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,Ru!==null&&(VF(Ru),Ru=null))),TS(b,w),oa(w),null;case 5:uF(w),M=$h(N1.current);var R=w.type;if(b!==null&&w.stateNode!=null)hM(b,w,R,A,M),b.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!A){if(w.stateNode===null)throw Error(o(166));return oa(w),null}if(b=$h(Fc.current),vS(w)){if(!Ee)throw Error(o(175));b=On(w.stateNode,w.type,w.memoizedProps,M,b,w,!_S),w.updateQueue=b,b!==null&&jh(w)}else{var $=W(R,A,M,b,w);LS($,w,!1,!1),w.stateNode=$,ee($,R,A,M,b)&&jh(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return oa(w),null;case 6:if(b&&w.stateNode!=null)dM(b,w,b.memoizedProps,A);else{if(typeof A!="string"&&w.stateNode===null)throw Error(o(166));if(b=$h(N1.current),M=$h(Fc.current),vS(w)){if(!Ee)throw Error(o(176));if(b=w.stateNode,A=w.memoizedProps,(M=ae(b,A,w,!_S))&&(R=Jl,R!==null))switch($=(R.mode&1)!==0,R.tag){case 3:Ut(R.stateNode.containerInfo,b,A,$);break;case 5:dn(R.type,R.memoizedProps,R.stateNode,b,A,$)}M&&jh(w)}else w.stateNode=be(A,b,M,w)}return oa(w),null;case 13:if(wi(zs),A=w.memoizedState,Ns&&ec!==null&&w.mode&1&&!(w.flags&128)){for(b=ec;b;)b=ct(b);return A1(),w.flags|=98560,w}if(A!==null&&A.dehydrated!==null){if(A=vS(w),b===null){if(!A)throw Error(o(318));if(!Ee)throw Error(o(344));if(b=w.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));_e(b,w)}else A1(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return oa(w),null}return Ru!==null&&(VF(Ru),Ru=null),w.flags&128?(w.lanes=M,w):(A=A!==null,M=!1,b===null?vS(w):M=b.memoizedState!==null,A&&!M&&(w.child.flags|=8192,w.mode&1&&(b===null||zs.current&1?to===0&&(to=3):HF())),w.updateQueue!==null&&(w.flags|=4),oa(w),null);case 4:return R1(),TS(b,w),b===null&&Ae(w.stateNode.containerInfo),oa(w),null;case 10:return mo(w.type._context),oa(w),null;case 17:return ws(w.type)&&Pa(),oa(w),null;case 19:if(wi(zs),R=w.memoizedState,R===null)return oa(w),null;if(A=(w.flags&128)!==0,$=R.rendering,$===null)if(A)kS(R,!1);else{if(to!==0||b!==null&&b.flags&128)for(b=w.child;b!==null;){if($=iM(b),$!==null){for(w.flags|=128,kS(R,!1),b=$.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),w.subtreeFlags=0,b=M,A=w.child;A!==null;)M=A,R=b,M.flags&=14680066,$=M.alternate,$===null?(M.childLanes=0,M.lanes=R,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=$.childLanes,M.lanes=$.lanes,M.child=$.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=$.memoizedProps,M.memoizedState=$.memoizedState,M.updateQueue=$.updateQueue,M.type=$.type,R=$.dependencies,M.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),A=A.sibling;return xn(zs,zs.current&1|2),w.child}b=b.sibling}R.tail!==null&&Bs()>FF&&(w.flags|=128,A=!0,kS(R,!1),w.lanes=4194304)}else{if(!A)if(b=iM($),b!==null){if(w.flags|=128,A=!0,b=b.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),kS(R,!0),R.tail===null&&R.tailMode==="hidden"&&!$.alternate&&!Ns)return oa(w),null}else 2*Bs()-R.renderingStartTime>FF&&M!==1073741824&&(w.flags|=128,A=!0,kS(R,!1),w.lanes=4194304);R.isBackwards?($.sibling=w.child,w.child=$):(b=R.last,b!==null?b.sibling=$:w.child=$,R.last=$)}return R.tail!==null?(w=R.tail,R.rendering=w,R.tail=w.sibling,R.renderingStartTime=Bs(),w.sibling=null,b=zs.current,xn(zs,A?b&1|2:b&1),w):(oa(w),null);case 22:case 23:return WF(),A=w.memoizedState!==null,b!==null&&b.memoizedState!==null!==A&&(w.flags|=8192),A&&w.mode&1?nc&1073741824&&(oa(w),ke&&w.subtreeFlags&6&&(w.flags|=8192)):oa(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var zSe=a.ReactCurrentOwner,tc=!1;function Ua(b,w,M,A){w.child=b===null?yZ(w,null,M,A):I1(w,b.child,M,A)}function jZ(b,w,M,A,R){M=M.render;var $=w.ref;return wr(w,R),A=gF(b,w,M,A,$,R),M=pF(),b!==null&&!tc?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~R,hf(b,w,R)):(Ns&&M&&sF(w),w.flags|=1,Ua(b,w,A,R),w.child)}function KZ(b,w,M,A,R){if(b===null){var $=M.type;return typeof $=="function"&&!$F($)&&$.defaultProps===void 0&&M.compare===null&&M.defaultProps===void 0?(w.tag=15,w.type=$,qZ(b,w,$,A,R)):(b=NM(M.type,null,A,w,w.mode,R),b.ref=w.ref,b.return=w,w.child=b)}if($=b.child,!(b.lanes&R)){var ue=$.memoizedProps;if(M=M.compare,M=M!==null?M:n_,M(ue,A)&&b.ref===w.ref)return hf(b,w,R)}return w.flags|=1,b=rp($,A),b.ref=w.ref,b.return=w,w.child=b}function qZ(b,w,M,A,R){if(b!==null&&n_(b.memoizedProps,A)&&b.ref===w.ref)if(tc=!1,(b.lanes&R)!==0)b.flags&131072&&(tc=!0);else return w.lanes=b.lanes,hf(b,w,R);return wF(b,w,M,A,R)}function XZ(b,w,M){var A=w.pendingProps,R=A.children,$=b!==null?b.memoizedState:null;if(A.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},xn(O1,nc),nc|=M;else if(M&1073741824)w.memoizedState={baseLanes:0,cachePool:null},A=$!==null?$.baseLanes:M,xn(O1,nc),nc|=A;else return b=$!==null?$.baseLanes|M:M,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:b,cachePool:null},w.updateQueue=null,xn(O1,nc),nc|=b,null;else $!==null?(A=$.baseLanes|M,w.memoizedState=null):A=M,xn(O1,nc),nc|=A;return Ua(b,w,R,M),w.child}function YZ(b,w){var M=w.ref;(b===null&&M!==null||b!==null&&b.ref!==M)&&(w.flags|=512,w.flags|=2097152)}function wF(b,w,M,A,R){var $=ws(M)?gl:rr.current;return $=rs(w,$),wr(w,R),M=gF(b,w,M,A,$,R),A=pF(),b!==null&&!tc?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~R,hf(b,w,R)):(Ns&&A&&sF(w),w.flags|=1,Ua(b,w,M,R),w.child)}function ZZ(b,w,M,A,R){if(ws(M)){var $=!0;Uh(w)}else $=!1;if(wr(w,R),w.stateNode===null)b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),hZ(w,M,A),iF(w,M,A,R),A=!0;else if(b===null){var ue=w.stateNode,Le=w.memoizedProps;ue.props=Le;var Ze=ue.context,Lt=M.contextType;typeof Lt=="object"&&Lt!==null?Lt=Cr(Lt):(Lt=ws(M)?gl:rr.current,Lt=rs(w,Lt));var Yt=M.getDerivedStateFromProps,zn=typeof Yt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";zn||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Le!==A||Ze!==Lt)&&dZ(w,ue,A,Lt),Jg=!1;var gn=w.memoizedState;ue.state=gn,Qk(w,A,ue,R),Ze=w.memoizedState,Le!==A||gn!==Ze||Is.current||Jg?(typeof Yt=="function"&&(nF(w,M,Yt,A),Ze=w.memoizedState),(Le=Jg||uZ(w,M,Le,A,gn,Ze,Lt))?(zn||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=A,w.memoizedState=Ze),ue.props=A,ue.state=Ze,ue.context=Lt,A=Le):(typeof ue.componentDidMount=="function"&&(w.flags|=4194308),A=!1)}else{ue=w.stateNode,oZ(b,w),Le=w.memoizedProps,Lt=w.type===w.elementType?Le:Ba(w.type,Le),ue.props=Lt,zn=w.pendingProps,gn=ue.context,Ze=M.contextType,typeof Ze=="object"&&Ze!==null?Ze=Cr(Ze):(Ze=ws(M)?gl:rr.current,Ze=rs(w,Ze));var fs=M.getDerivedStateFromProps;(Yt=typeof fs=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Le!==zn||gn!==Ze)&&dZ(w,ue,A,Ze),Jg=!1,gn=w.memoizedState,ue.state=gn,Qk(w,A,ue,R);var on=w.memoizedState;Le!==zn||gn!==on||Is.current||Jg?(typeof fs=="function"&&(nF(w,M,fs,A),on=w.memoizedState),(Lt=Jg||uZ(w,M,Lt,A,gn,on,Ze)||!1)?(Yt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(A,on,Ze),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(A,on,Ze)),typeof ue.componentDidUpdate=="function"&&(w.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Le===b.memoizedProps&&gn===b.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Le===b.memoizedProps&&gn===b.memoizedState||(w.flags|=1024),w.memoizedProps=A,w.memoizedState=on),ue.props=A,ue.state=on,ue.context=Ze,A=Lt):(typeof ue.componentDidUpdate!="function"||Le===b.memoizedProps&&gn===b.memoizedState||(w.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Le===b.memoizedProps&&gn===b.memoizedState||(w.flags|=1024),A=!1)}return CF(b,w,M,A,$,R)}function CF(b,w,M,A,R,$){YZ(b,w);var ue=(w.flags&128)!==0;if(!A&&!ue)return R&&ia(w,M,!1),hf(b,w,$);A=w.stateNode,zSe.current=w;var Le=ue&&typeof M.getDerivedStateFromError!="function"?null:A.render();return w.flags|=1,b!==null&&ue?(w.child=I1(w,b.child,null,$),w.child=I1(w,null,Le,$)):Ua(b,w,Le,$),w.memoizedState=A.state,R&&ia(w,M,!0),w.child}function QZ(b){var w=b.stateNode;w.pendingContext?Fr(b,w.pendingContext,w.pendingContext!==w.context):w.context&&Fr(b,w.context,!1),cF(b,w.containerInfo)}function JZ(b,w,M,A,R){return A1(),lF(R),w.flags|=256,Ua(b,w,M,A),w.child}var fM={dehydrated:null,treeContext:null,retryLane:0};function gM(b){return{baseLanes:b,cachePool:null}}function eQ(b,w,M){var A=w.pendingProps,R=zs.current,$=!1,ue=(w.flags&128)!==0,Le;if((Le=ue)||(Le=b!==null&&b.memoizedState===null?!1:(R&2)!==0),Le?($=!0,w.flags&=-129):(b===null||b.memoizedState!==null)&&(R|=1),xn(zs,R&1),b===null)return aF(w),b=w.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(w.mode&1?ze(b)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(R=A.children,b=A.fallback,$?(A=w.mode,$=w.child,R={mode:"hidden",children:R},!(A&1)&&$!==null?($.childLanes=0,$.pendingProps=R):$=RM(R,A,0,null),b=d_(b,A,M,null),$.return=w,b.return=w,$.sibling=b,w.child=$,w.child.memoizedState=gM(M),w.memoizedState=fM,b):SF(w,R));if(R=b.memoizedState,R!==null){if(Le=R.dehydrated,Le!==null){if(ue)return w.flags&256?(w.flags&=-257,pM(b,w,M,Error(o(422)))):w.memoizedState!==null?(w.child=b.child,w.flags|=128,null):($=A.fallback,R=w.mode,A=RM({mode:"visible",children:A.children},R,0,null),$=d_($,R,M,null),$.flags|=2,A.return=w,$.return=w,A.sibling=$,w.child=A,w.mode&1&&I1(w,b.child,null,M),w.child.memoizedState=gM(M),w.memoizedState=fM,$);if(!(w.mode&1))w=pM(b,w,M,null);else if(ze(Le))w=pM(b,w,M,Error(o(419)));else if(A=(M&b.childLanes)!==0,tc||A){if(A=Br,A!==null){switch(M&-M){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}A=$&(A.suspendedLanes|M)?0:$,A!==0&&A!==R.retryLane&&(R.retryLane=A,zc(b,A,-1))}HF(),w=pM(b,w,M,Error(o(421)))}else Te(Le)?(w.flags|=128,w.child=b.child,w=QSe.bind(null,b),ht(Le,w),w=null):(M=R.treeContext,Ee&&(ec=Hn(Le),Jl=w,Ns=!0,Ru=null,_S=!1,M!==null&&(Pc[Oc++]=lf,Pc[Oc++]=cf,Pc[Oc++]=s_,lf=M.id,cf=M.overflow,s_=w)),w=SF(w,w.pendingProps.children),w.flags|=4096);return w}return $?(A=nQ(b,w,A.children,A.fallback,M),$=w.child,R=b.child.memoizedState,$.memoizedState=R===null?gM(M):{baseLanes:R.baseLanes|M,cachePool:null},$.childLanes=b.childLanes&~M,w.memoizedState=fM,A):(M=tQ(b,w,A.children,M),w.memoizedState=null,M)}return $?(A=nQ(b,w,A.children,A.fallback,M),$=w.child,R=b.child.memoizedState,$.memoizedState=R===null?gM(M):{baseLanes:R.baseLanes|M,cachePool:null},$.childLanes=b.childLanes&~M,w.memoizedState=fM,A):(M=tQ(b,w,A.children,M),w.memoizedState=null,M)}function SF(b,w){return w=RM({mode:"visible",children:w},b.mode,0,null),w.return=b,b.child=w}function tQ(b,w,M,A){var R=b.child;return b=R.sibling,M=rp(R,{mode:"visible",children:M}),!(w.mode&1)&&(M.lanes=A),M.return=w,M.sibling=null,b!==null&&(A=w.deletions,A===null?(w.deletions=[b],w.flags|=16):A.push(b)),w.child=M}function nQ(b,w,M,A,R){var $=w.mode;b=b.child;var ue=b.sibling,Le={mode:"hidden",children:M};return!($&1)&&w.child!==b?(M=w.child,M.childLanes=0,M.pendingProps=Le,w.deletions=null):(M=rp(b,Le),M.subtreeFlags=b.subtreeFlags&14680064),ue!==null?A=rp(ue,A):(A=d_(A,$,R,null),A.flags|=2),A.return=w,M.return=w,M.sibling=A,w.child=M,A}function pM(b,w,M,A){return A!==null&&lF(A),I1(w,b.child,null,M),b=SF(w,w.pendingProps.children),b.flags|=2,w.memoizedState=null,b}function iQ(b,w,M){b.lanes|=w;var A=b.alternate;A!==null&&(A.lanes|=w),za(b.return,w,M)}function xF(b,w,M,A,R){var $=b.memoizedState;$===null?b.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:A,tail:M,tailMode:R}:($.isBackwards=w,$.rendering=null,$.renderingStartTime=0,$.last=A,$.tail=M,$.tailMode=R)}function sQ(b,w,M){var A=w.pendingProps,R=A.revealOrder,$=A.tail;if(Ua(b,w,A.children,M),A=zs.current,A&2)A=A&1|2,w.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=w.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&iQ(b,M,w);else if(b.tag===19)iQ(b,M,w);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===w)break e;for(;b.sibling===null;){if(b.return===null||b.return===w)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}A&=1}if(xn(zs,A),!(w.mode&1))w.memoizedState=null;else switch(R){case"forwards":for(M=w.child,R=null;M!==null;)b=M.alternate,b!==null&&iM(b)===null&&(R=M),M=M.sibling;M=R,M===null?(R=w.child,w.child=null):(R=M.sibling,M.sibling=null),xF(w,!1,R,M,$);break;case"backwards":for(M=null,R=w.child,w.child=null;R!==null;){if(b=R.alternate,b!==null&&iM(b)===null){w.child=R;break}b=R.sibling,R.sibling=M,M=R,R=b}xF(w,!0,M,null,$);break;case"together":xF(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function hf(b,w,M){if(b!==null&&(w.dependencies=b.dependencies),F1|=w.lanes,!(M&w.childLanes))return null;if(b!==null&&w.child!==b.child)throw Error(o(153));if(w.child!==null){for(b=w.child,M=rp(b,b.pendingProps),w.child=M,M.return=w;b.sibling!==null;)b=b.sibling,M=M.sibling=rp(b,b.pendingProps),M.return=w;M.sibling=null}return w.child}function USe(b,w,M){switch(w.tag){case 3:QZ(w),A1();break;case 5:bZ(w);break;case 1:ws(w.type)&&Uh(w);break;case 4:cF(w,w.stateNode.containerInfo);break;case 10:Yk(w,w.type._context,w.memoizedProps.value);break;case 13:var A=w.memoizedState;if(A!==null)return A.dehydrated!==null?(xn(zs,zs.current&1),w.flags|=128,null):M&w.child.childLanes?eQ(b,w,M):(xn(zs,zs.current&1),b=hf(b,w,M),b!==null?b.sibling:null);xn(zs,zs.current&1);break;case 19:if(A=(M&w.childLanes)!==0,b.flags&128){if(A)return sQ(b,w,M);w.flags|=128}var R=w.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),xn(zs,zs.current),A)break;return null;case 22:case 23:return w.lanes=0,XZ(b,w,M)}return hf(b,w,M)}function VSe(b,w){switch(rF(w),w.tag){case 1:return ws(w.type)&&Pa(),b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 3:return R1(),wi(Is),wi(rr),dF(),b=w.flags,b&65536&&!(b&128)?(w.flags=b&-65537|128,w):null;case 5:return uF(w),null;case 13:if(wi(zs),b=w.memoizedState,b!==null&&b.dehydrated!==null){if(w.alternate===null)throw Error(o(340));A1()}return b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 19:return wi(zs),null;case 4:return R1(),null;case 10:return mo(w.type._context),null;case 22:case 23:return WF(),null;case 24:return null;default:return null}}var mM=!1,a_=!1,WSe=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function _M(b,w){var M=b.ref;if(M!==null)if(typeof M=="function")try{M(null)}catch(A){vl(b,w,A)}else M.current=null}function EF(b,w,M){try{M()}catch(A){vl(b,w,A)}}var rQ=!1;function HSe(b,w){for(U(b.containerInfo),Vt=w;Vt!==null;)if(b=Vt,w=b.child,(b.subtreeFlags&1028)!==0&&w!==null)w.return=b,Vt=w;else for(;Vt!==null;){b=Vt;try{var M=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var A=M.memoizedProps,R=M.memoizedState,$=b.stateNode,ue=$.getSnapshotBeforeUpdate(b.elementType===b.type?A:Ba(b.type,A),R);$.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:ke&&gt(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Le){vl(b,b.return,Le)}if(w=b.sibling,w!==null){w.return=b.return,Vt=w;break}Vt=b.return}return M=rQ,rQ=!1,M}function l_(b,w,M){var A=w.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var R=A=A.next;do{if((R.tag&b)===b){var $=R.destroy;R.destroy=void 0,$!==void 0&&EF(w,M,$)}R=R.next}while(R!==A)}}function MS(b,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var M=w=w.next;do{if((M.tag&b)===b){var A=M.create;M.destroy=A()}M=M.next}while(M!==w)}}function LF(b){var w=b.ref;if(w!==null){var M=b.stateNode;switch(b.tag){case 5:b=z(M);break;default:b=M}typeof w=="function"?w(b):w.current=b}}function oQ(b,w,M){if(Yl&&typeof Yl.onCommitFiberUnmount=="function")try{Yl.onCommitFiberUnmount(e_,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(b=w.updateQueue,b!==null&&(b=b.lastEffect,b!==null)){var A=b=b.next;do{var R=A,$=R.destroy;R=R.tag,$!==void 0&&(R&2||R&4)&&EF(w,M,$),A=A.next}while(A!==b)}break;case 1:if(_M(w,M),b=w.stateNode,typeof b.componentWillUnmount=="function")try{b.props=w.memoizedProps,b.state=w.memoizedState,b.componentWillUnmount()}catch(ue){vl(w,M,ue)}break;case 5:_M(w,M);break;case 4:ke?dQ(b,w,M):q&&q&&(w=w.stateNode.containerInfo,M=cn(w),St(w,M))}}function aQ(b,w,M){for(var A=w;;)if(oQ(b,A,M),A.child===null||ke&&A.tag===4){if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function lQ(b){var w=b.alternate;w!==null&&(b.alternate=null,lQ(w)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(w=b.stateNode,w!==null&&Je(w)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function cQ(b){return b.tag===5||b.tag===3||b.tag===4}function uQ(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||cQ(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function hQ(b){if(ke){e:{for(var w=b.return;w!==null;){if(cQ(w))break e;w=w.return}throw Error(o(160))}var M=w;switch(M.tag){case 5:w=M.stateNode,M.flags&32&&(At(w),M.flags&=-33),M=uQ(b),kF(b,M,w);break;case 3:case 4:w=M.stateNode.containerInfo,M=uQ(b),TF(b,M,w);break;default:throw Error(o(161))}}}function TF(b,w,M){var A=b.tag;if(A===5||A===6)b=b.stateNode,w?ut(M,b,w):ot(M,b);else if(A!==4&&(b=b.child,b!==null))for(TF(b,w,M),b=b.sibling;b!==null;)TF(b,w,M),b=b.sibling}function kF(b,w,M){var A=b.tag;if(A===5||A===6)b=b.stateNode,w?xt(M,b,w):Ge(M,b);else if(A!==4&&(b=b.child,b!==null))for(kF(b,w,M),b=b.sibling;b!==null;)kF(b,w,M),b=b.sibling}function dQ(b,w,M){for(var A=w,R=!1,$,ue;;){if(!R){R=A.return;e:for(;;){if(R===null)throw Error(o(160));switch($=R.stateNode,R.tag){case 5:ue=!1;break e;case 3:$=$.containerInfo,ue=!0;break e;case 4:$=$.containerInfo,ue=!0;break e}R=R.return}R=!0}if(A.tag===5||A.tag===6)aQ(b,A,M),ue?ft($,A.stateNode):nt($,A.stateNode);else if(A.tag===18)ue?Bt($,A.stateNode):mt($,A.stateNode);else if(A.tag===4){if(A.child!==null){$=A.stateNode.containerInfo,ue=!0,A.child.return=A,A=A.child;continue}}else if(oQ(b,A,M),A.child!==null){A.child.return=A,A=A.child;continue}if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return;A=A.return,A.tag===4&&(R=!1)}A.sibling.return=A.return,A=A.sibling}}function MF(b,w){if(ke){switch(w.tag){case 0:case 11:case 14:case 15:l_(3,w,w.return),MS(3,w),l_(5,w,w.return);return;case 1:return;case 5:var M=w.stateNode;if(M!=null){var A=w.memoizedProps;b=b!==null?b.memoizedProps:A;var R=w.type,$=w.updateQueue;w.updateQueue=null,$!==null&&lt(M,$,R,b,A,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));M=w.memoizedProps,tt(w.stateNode,b!==null?b.memoizedProps:M,M);return;case 3:Ee&&b!==null&&b.memoizedState.isDehydrated&&ce(w.stateNode.containerInfo);return;case 12:return;case 13:vM(w);return;case 19:vM(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:l_(3,w,w.return),MS(3,w),l_(5,w,w.return);return;case 12:return;case 13:vM(w);return;case 19:vM(w);return;case 3:Ee&&b!==null&&b.memoizedState.isDehydrated&&ce(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(q){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,St(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function vM(b){var w=b.updateQueue;if(w!==null){b.updateQueue=null;var M=b.stateNode;M===null&&(M=b.stateNode=new WSe),w.forEach(function(A){var R=JSe.bind(null,b,A);M.has(A)||(M.add(A),A.then(R,R))})}}function $Se(b,w){for(Vt=w;Vt!==null;){w=Vt;var M=w.deletions;if(M!==null)for(var A=0;A<M.length;A++){var R=M[A];try{var $=b;ke?dQ($,R,w):aQ($,R,w);var ue=R.alternate;ue!==null&&(ue.return=null),R.return=null}catch(rn){vl(R,w,rn)}}if(M=w.child,w.subtreeFlags&12854&&M!==null)M.return=w,Vt=M;else for(;Vt!==null;){w=Vt;try{var Le=w.flags;if(Le&32&&ke&&At(w.stateNode),Le&512){var Ze=w.alternate;if(Ze!==null){var Lt=Ze.ref;Lt!==null&&(typeof Lt=="function"?Lt(null):Lt.current=null)}}if(Le&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Yt=w.alternate;(Yt===null||Yt.memoizedState===null)&&(OF=Bs())}break;case 22:var zn=w.memoizedState!==null,gn=w.alternate,fs=gn!==null&&gn.memoizedState!==null;if(M=w,ke){e:if(A=M,R=zn,$=null,ke)for(var on=A;;){if(on.tag===5){if($===null){$=on;var aa=on.stateNode;R?kt(aa):at(on.stateNode,on.memoizedProps)}}else if(on.tag===6){if($===null){var Vc=on.stateNode;R?he(Vc):Ue(Vc,on.memoizedProps)}}else if((on.tag!==22&&on.tag!==23||on.memoizedState===null||on===A)&&on.child!==null){on.child.return=on,on=on.child;continue}if(on===A)break;for(;on.sibling===null;){if(on.return===null||on.return===A)break e;$===on&&($=null),on=on.return}$===on&&($=null),on.sibling.return=on.return,on=on.sibling}}if(zn&&!fs&&M.mode&1){Vt=M;for(var Ve=M.child;Ve!==null;){for(M=Vt=Ve;Vt!==null;){A=Vt;var Ie=A.child;switch(A.tag){case 0:case 11:case 14:case 15:l_(4,A,A.return);break;case 1:_M(A,A.return);var Ke=A.stateNode;if(typeof Ke.componentWillUnmount=="function"){var Wt=A.return;try{Ke.props=A.memoizedProps,Ke.state=A.memoizedState,Ke.componentWillUnmount()}catch(rn){vl(A,Wt,rn)}}break;case 5:_M(A,A.return);break;case 22:if(A.memoizedState!==null){pQ(M);continue}}Ie!==null?(Ie.return=A,Vt=Ie):pQ(M)}Ve=Ve.sibling}}}switch(Le&4102){case 2:hQ(w),w.flags&=-3;break;case 6:hQ(w),w.flags&=-3,MF(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,MF(w.alternate,w);break;case 4:MF(w.alternate,w)}}catch(rn){vl(w,w.return,rn)}if(M=w.sibling,M!==null){M.return=w.return,Vt=M;break}Vt=w.return}}}function GSe(b,w,M){Vt=b,fQ(b)}function fQ(b,w,M){for(var A=(b.mode&1)!==0;Vt!==null;){var R=Vt,$=R.child;if(R.tag===22&&A){var ue=R.memoizedState!==null||mM;if(!ue){var Le=R.alternate,Ze=Le!==null&&Le.memoizedState!==null||a_;Le=mM;var Lt=a_;if(mM=ue,(a_=Ze)&&!Lt)for(Vt=R;Vt!==null;)ue=Vt,Ze=ue.child,ue.tag===22&&ue.memoizedState!==null?mQ(R):Ze!==null?(Ze.return=ue,Vt=Ze):mQ(R);for(;$!==null;)Vt=$,fQ($),$=$.sibling;Vt=R,mM=Le,a_=Lt}gQ(b)}else R.subtreeFlags&8772&&$!==null?($.return=R,Vt=$):gQ(b)}}function gQ(b){for(;Vt!==null;){var w=Vt;if(w.flags&8772){var M=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:a_||MS(5,w);break;case 1:var A=w.stateNode;if(w.flags&4&&!a_)if(M===null)A.componentDidMount();else{var R=w.elementType===w.type?M.memoizedProps:Ba(w.type,M.memoizedProps);A.componentDidUpdate(R,M.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var $=w.updateQueue;$!==null&&lZ(w,$,A);break;case 3:var ue=w.updateQueue;if(ue!==null){if(M=null,w.child!==null)switch(w.child.tag){case 5:M=z(w.child.stateNode);break;case 1:M=w.child.stateNode}lZ(w,ue,M)}break;case 5:var Le=w.stateNode;M===null&&w.flags&4&&Oe(Le,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&w.memoizedState===null){var Ze=w.alternate;if(Ze!==null){var Lt=Ze.memoizedState;if(Lt!==null){var Yt=Lt.dehydrated;Yt!==null&&Ce(Yt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}a_||w.flags&512&&LF(w)}catch(zn){vl(w,w.return,zn)}}if(w===b){Vt=null;break}if(M=w.sibling,M!==null){M.return=w.return,Vt=M;break}Vt=w.return}}function pQ(b){for(;Vt!==null;){var w=Vt;if(w===b){Vt=null;break}var M=w.sibling;if(M!==null){M.return=w.return,Vt=M;break}Vt=w.return}}function mQ(b){for(;Vt!==null;){var w=Vt;try{switch(w.tag){case 0:case 11:case 15:var M=w.return;try{MS(4,w)}catch(Ze){vl(w,M,Ze)}break;case 1:var A=w.stateNode;if(typeof A.componentDidMount=="function"){var R=w.return;try{A.componentDidMount()}catch(Ze){vl(w,R,Ze)}}var $=w.return;try{LF(w)}catch(Ze){vl(w,$,Ze)}break;case 5:var ue=w.return;try{LF(w)}catch(Ze){vl(w,ue,Ze)}}}catch(Ze){vl(w,w.return,Ze)}if(w===b){Vt=null;break}var Le=w.sibling;if(Le!==null){Le.return=w.return,Vt=Le;break}Vt=w.return}}var yM=0,bM=1,wM=2,CM=3,SM=4;if(typeof Symbol=="function"&&Symbol.for){var DS=Symbol.for;yM=DS("selector.component"),bM=DS("selector.has_pseudo_class"),wM=DS("selector.role"),CM=DS("selector.test_id"),SM=DS("selector.text")}function DF(b){var w=De(b);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(b=Fe(b),b===null)throw Error(o(362));return b.stateNode.current}function AF(b,w){switch(w.$$typeof){case yM:if(b.type===w.value)return!0;break;case bM:e:{w=w.value,b=[b,0];for(var M=0;M<b.length;){var A=b[M++],R=b[M++],$=w[R];if(A.tag!==5||!Z(A)){for(;$!=null&&AF(A,$);)R++,$=w[R];if(R===w.length){w=!0;break e}else for(A=A.child;A!==null;)b.push(A,R),A=A.sibling}}w=!1}return w;case wM:if(b.tag===5&&we(b.stateNode,w.value))return!0;break;case SM:if((b.tag===5||b.tag===6)&&(b=te(b),b!==null&&0<=b.indexOf(w.value)))return!0;break;case CM:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function IF(b){switch(b.$$typeof){case yM:return"<"+(E(b.value)||"Unknown")+">";case bM:return":has("+(IF(b)||"")+")";case wM:return'[role="'+b.value+'"]';case SM:return'"'+b.value+'"';case CM:return'[data-testname="'+b.value+'"]';default:throw Error(o(365))}}function _Q(b,w){var M=[];b=[b,0];for(var A=0;A<b.length;){var R=b[A++],$=b[A++],ue=w[$];if(R.tag!==5||!Z(R)){for(;ue!=null&&AF(R,ue);)$++,ue=w[$];if($===w.length)M.push(R);else for(R=R.child;R!==null;)b.push(R,$),R=R.sibling}}return M}function NF(b,w){if(!Re)throw Error(o(363));b=DF(b),b=_Q(b,w),w=[],b=Array.from(b);for(var M=0;M<b.length;){var A=b[M++];if(A.tag===5)Z(A)||w.push(A.stateNode);else for(A=A.child;A!==null;)b.push(A),A=A.sibling}return w}var jSe=Math.ceil,xM=a.ReactCurrentDispatcher,RF=a.ReactCurrentOwner,Sr=a.ReactCurrentBatchConfig,si=0,Br=null,zr=null,Fo=0,nc=0,O1=Sn(0),to=0,AS=null,F1=0,EM=0,PF=0,IS=null,ml=null,OF=0,FF=1/0;function B1(){FF=Bs()+500}var LM=!1,BF=null,tp=null,TM=!1,np=null,kM=0,NS=0,zF=null,MM=-1,DM=0;function Va(){return si&6?Bs():MM!==-1?MM:MM=Bs()}function ip(b){return b.mode&1?si&2&&Fo!==0?Fo&-Fo:t_.transition!==null?(DM===0&&(b=tf,tf<<=1,!(tf&4194240)&&(tf=64),DM=b),DM):(b=ai,b!==0?b:Me()):1}function zc(b,w,M){if(50<NS)throw NS=0,zF=null,Error(o(185));var A=AM(b,w);return A===null?null:(Vh(A,w,M),(!(si&2)||A!==Br)&&(A===Br&&(!(si&2)&&(EM|=w),to===4&&sp(A,Fo)),_l(A,M),w===1&&si===0&&!(b.mode&1)&&(B1(),Hh&&pl())),A)}function AM(b,w){b.lanes|=w;var M=b.alternate;for(M!==null&&(M.lanes|=w),M=b,b=b.return;b!==null;)b.childLanes|=w,M=b.alternate,M!==null&&(M.childLanes|=w),M=b,b=b.return;return M.tag===3?M.stateNode:null}function _l(b,w){var M=b.callbackNode;uS(b,w);var A=Qm(b,b===Br?Fo:0);if(A===0)M!==null&&L1(M),b.callbackNode=null,b.callbackPriority=0;else if(w=A&-A,b.callbackPriority!==w){if(M!=null&&L1(M),w===1)b.tag===0?mS(yQ.bind(null,b)):pS(yQ.bind(null,b)),Pe?Xe(function(){si===0&&pl()}):of(Jm,pl),M=null;else{switch(hS(A)){case 1:M=Jm;break;case 4:M=qk;break;case 16:M=Oa;break;case 536870912:M=fS;break;default:M=Oa}M=kQ(M,vQ.bind(null,b))}b.callbackPriority=w,b.callbackNode=M}}function vQ(b,w){if(MM=-1,DM=0,si&6)throw Error(o(327));var M=b.callbackNode;if(h_()&&b.callbackNode!==M)return null;var A=Qm(b,b===Br?Fo:0);if(A===0)return null;if(A&30||A&b.expiredLanes||w)w=IM(b,A);else{w=A;var R=si;si|=2;var $=CQ();(Br!==b||Fo!==w)&&(B1(),c_(b,w));do try{XSe();break}catch(Le){wQ(b,Le)}while(!0);k1(),xM.current=$,si=R,zr!==null?w=0:(Br=null,Fo=0,w=to)}if(w!==0){if(w===2&&(R=rf(b),R!==0&&(A=R,w=UF(b,R))),w===1)throw M=AS,c_(b,0),sp(b,A),_l(b,Bs()),M;if(w===6)sp(b,A);else{if(R=b.current.alternate,!(A&30)&&!KSe(R)&&(w=IM(b,A),w===2&&($=rf(b),$!==0&&(A=$,w=UF(b,$))),w===1))throw M=AS,c_(b,0),sp(b,A),_l(b,Bs()),M;switch(b.finishedWork=R,b.finishedLanes=A,w){case 0:case 1:throw Error(o(345));case 2:u_(b,ml);break;case 3:if(sp(b,A),(A&130023424)===A&&(w=OF+500-Bs(),10<w)){if(Qm(b,0)!==0)break;if(R=b.suspendedLanes,(R&A)!==A){Va(),b.pingedLanes|=b.suspendedLanes&R;break}b.timeoutHandle=ye(u_.bind(null,b,ml),w);break}u_(b,ml);break;case 4:if(sp(b,A),(A&4194240)===A)break;for(w=b.eventTimes,R=-1;0<A;){var ue=31-Xl(A);$=1<<ue,ue=w[ue],ue>R&&(R=ue),A&=~$}if(A=R,A=Bs()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*jSe(A/1960))-A,10<A){b.timeoutHandle=ye(u_.bind(null,b,ml),A);break}u_(b,ml);break;case 5:u_(b,ml);break;default:throw Error(o(329))}}}return _l(b,Bs()),b.callbackNode===M?vQ.bind(null,b):null}function UF(b,w){var M=IS;return b.current.memoizedState.isDehydrated&&(c_(b,w).flags|=256),b=IM(b,w),b!==2&&(w=ml,ml=M,w!==null&&VF(w)),b}function VF(b){ml===null?ml=b:ml.push.apply(ml,b)}function KSe(b){for(var w=b;;){if(w.flags&16384){var M=w.updateQueue;if(M!==null&&(M=M.stores,M!==null))for(var A=0;A<M.length;A++){var R=M[A],$=R.getSnapshot;R=R.value;try{if(!Zl($(),R))return!1}catch{return!1}}}if(M=w.child,w.subtreeFlags&16384&&M!==null)M.return=w,w=M;else{if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function sp(b,w){for(w&=~PF,w&=~EM,b.suspendedLanes|=w,b.pingedLanes&=~w,b=b.expirationTimes;0<w;){var M=31-Xl(w),A=1<<M;b[M]=-1,w&=~A}}function yQ(b){if(si&6)throw Error(o(327));h_();var w=Qm(b,0);if(!(w&1))return _l(b,Bs()),null;var M=IM(b,w);if(b.tag!==0&&M===2){var A=rf(b);A!==0&&(w=A,M=UF(b,A))}if(M===1)throw M=AS,c_(b,0),sp(b,w),_l(b,Bs()),M;if(M===6)throw Error(o(345));return b.finishedWork=b.current.alternate,b.finishedLanes=w,u_(b,ml),_l(b,Bs()),null}function bQ(b){np!==null&&np.tag===0&&!(si&6)&&h_();var w=si;si|=1;var M=Sr.transition,A=ai;try{if(Sr.transition=null,ai=1,b)return b()}finally{ai=A,Sr.transition=M,si=w,!(si&6)&&pl()}}function WF(){nc=O1.current,wi(O1)}function c_(b,w){b.finishedWork=null,b.finishedLanes=0;var M=b.timeoutHandle;if(M!==He&&(b.timeoutHandle=He,xe(M)),zr!==null)for(M=zr.return;M!==null;){var A=M;switch(rF(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Pa();break;case 3:R1(),wi(Is),wi(rr),dF();break;case 5:uF(A);break;case 4:R1();break;case 13:wi(zs);break;case 19:wi(zs);break;case 10:mo(A.type._context);break;case 22:case 23:WF()}M=M.return}if(Br=b,zr=b=rp(b.current,null),Fo=nc=w,to=0,AS=null,PF=EM=F1=0,ml=IS=null,Ql!==null){for(w=0;w<Ql.length;w++)if(M=Ql[w],A=M.interleaved,A!==null){M.interleaved=null;var R=A.next,$=M.pending;if($!==null){var ue=$.next;$.next=R,A.next=ue}M.pending=A}Ql=null}return b}function wQ(b,w){do{var M=zr;try{if(k1(),sM.current=uM,rM){for(var A=or.memoizedState;A!==null;){var R=A.queue;R!==null&&(R.pending=null),A=A.next}rM=!1}if(P1=0,_o=sa=or=null,CS=!1,SS=0,RF.current=null,M===null||M.return===null){to=1,AS=w,zr=null;break}e:{var $=b,ue=M.return,Le=M,Ze=w;if(w=Fo,Le.flags|=32768,Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Lt=Ze,Yt=Le,zn=Yt.tag;if(!(Yt.mode&1)&&(zn===0||zn===11||zn===15)){var gn=Yt.alternate;gn?(Yt.updateQueue=gn.updateQueue,Yt.memoizedState=gn.memoizedState,Yt.lanes=gn.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var fs=WZ(ue);if(fs!==null){fs.flags&=-257,HZ(fs,ue,Le,$,w),fs.mode&1&&VZ($,Lt,w),w=fs,Ze=Lt;var on=w.updateQueue;if(on===null){var aa=new Set;aa.add(Ze),w.updateQueue=aa}else on.add(Ze);break e}else{if(!(w&1)){VZ($,Lt,w),HF();break e}Ze=Error(o(426))}}else if(Ns&&Le.mode&1){var Vc=WZ(ue);if(Vc!==null){!(Vc.flags&65536)&&(Vc.flags|=256),HZ(Vc,ue,Le,$,w),lF(Ze);break e}}$=Ze,to!==4&&(to=2),IS===null?IS=[$]:IS.push($),Ze=yF(Ze,Le),Le=ue;do{switch(Le.tag){case 3:Le.flags|=65536,w&=-w,Le.lanes|=w;var Ve=zZ(Le,Ze,w);aZ(Le,Ve);break e;case 1:$=Ze;var Ie=Le.type,Ke=Le.stateNode;if(!(Le.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(tp===null||!tp.has(Ke)))){Le.flags|=65536,w&=-w,Le.lanes|=w;var Wt=UZ(Le,$,w);aZ(Le,Wt);break e}}Le=Le.return}while(Le!==null)}xQ(M)}catch(rn){w=rn,zr===M&&M!==null&&(zr=M=M.return);continue}break}while(!0)}function CQ(){var b=xM.current;return xM.current=uM,b===null?uM:b}function HF(){(to===0||to===3||to===2)&&(to=4),Br===null||!(F1&268435455)&&!(EM&268435455)||sp(Br,Fo)}function IM(b,w){var M=si;si|=2;var A=CQ();Br===b&&Fo===w||c_(b,w);do try{qSe();break}catch(R){wQ(b,R)}while(!0);if(k1(),si=M,xM.current=A,zr!==null)throw Error(o(261));return Br=null,Fo=0,to}function qSe(){for(;zr!==null;)SQ(zr)}function XSe(){for(;zr!==null&&!dS();)SQ(zr)}function SQ(b){var w=TQ(b.alternate,b,nc);b.memoizedProps=b.pendingProps,w===null?xQ(b):zr=w,RF.current=null}function xQ(b){var w=b;do{var M=w.alternate;if(b=w.return,w.flags&32768){if(M=VSe(M,w),M!==null){M.flags&=32767,zr=M;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{to=6,zr=null;return}}else if(M=BSe(M,w,nc),M!==null){zr=M;return}if(w=w.sibling,w!==null){zr=w;return}zr=w=b}while(w!==null);to===0&&(to=5)}function u_(b,w){var M=ai,A=Sr.transition;try{Sr.transition=null,ai=1,YSe(b,w,M)}finally{Sr.transition=A,ai=M}return null}function YSe(b,w,M){do h_();while(np!==null);if(si&6)throw Error(o(327));var A=b.finishedWork,R=b.finishedLanes;if(A===null)return null;if(b.finishedWork=null,b.finishedLanes=0,A===b.current)throw Error(o(177));b.callbackNode=null,b.callbackPriority=0;var $=A.lanes|A.childLanes;if(Zg(b,$),b===Br&&(zr=Br=null,Fo=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||TM||(TM=!0,kQ(Oa,function(){return h_(),null})),$=(A.flags&15990)!==0,A.subtreeFlags&15990||$){$=Sr.transition,Sr.transition=null;var ue=ai;ai=1;var Le=si;si|=4,RF.current=null,HSe(b,A),$Se(b,A),j(b.containerInfo),b.current=A,GSe(A),Kk(),si=Le,ai=ue,Sr.transition=$}else b.current=A;if(TM&&(TM=!1,np=b,kM=R),$=b.pendingLanes,$===0&&(tp=null),gS(A.stateNode),_l(b,Bs()),w!==null)for(M=b.onRecoverableError,A=0;A<w.length;A++)M(w[A]);if(LM)throw LM=!1,b=BF,BF=null,b;return kM&1&&b.tag!==0&&h_(),$=b.pendingLanes,$&1?b===zF?NS++:(NS=0,zF=b):NS=0,pl(),null}function h_(){if(np!==null){var b=hS(kM),w=Sr.transition,M=ai;try{if(Sr.transition=null,ai=16>b?16:b,np===null)var A=!1;else{if(b=np,np=null,kM=0,si&6)throw Error(o(331));var R=si;for(si|=4,Vt=b.current;Vt!==null;){var $=Vt,ue=$.child;if(Vt.flags&16){var Le=$.deletions;if(Le!==null){for(var Ze=0;Ze<Le.length;Ze++){var Lt=Le[Ze];for(Vt=Lt;Vt!==null;){var Yt=Vt;switch(Yt.tag){case 0:case 11:case 15:l_(8,Yt,$)}var zn=Yt.child;if(zn!==null)zn.return=Yt,Vt=zn;else for(;Vt!==null;){Yt=Vt;var gn=Yt.sibling,fs=Yt.return;if(lQ(Yt),Yt===Lt){Vt=null;break}if(gn!==null){gn.return=fs,Vt=gn;break}Vt=fs}}}var on=$.alternate;if(on!==null){var aa=on.child;if(aa!==null){on.child=null;do{var Vc=aa.sibling;aa.sibling=null,aa=Vc}while(aa!==null)}}Vt=$}}if($.subtreeFlags&2064&&ue!==null)ue.return=$,Vt=ue;else e:for(;Vt!==null;){if($=Vt,$.flags&2048)switch($.tag){case 0:case 11:case 15:l_(9,$,$.return)}var Ve=$.sibling;if(Ve!==null){Ve.return=$.return,Vt=Ve;break e}Vt=$.return}}var Ie=b.current;for(Vt=Ie;Vt!==null;){ue=Vt;var Ke=ue.child;if(ue.subtreeFlags&2064&&Ke!==null)Ke.return=ue,Vt=Ke;else e:for(ue=Ie;Vt!==null;){if(Le=Vt,Le.flags&2048)try{switch(Le.tag){case 0:case 11:case 15:MS(9,Le)}}catch(rn){vl(Le,Le.return,rn)}if(Le===ue){Vt=null;break e}var Wt=Le.sibling;if(Wt!==null){Wt.return=Le.return,Vt=Wt;break e}Vt=Le.return}}if(si=R,pl(),Yl&&typeof Yl.onPostCommitFiberRoot=="function")try{Yl.onPostCommitFiberRoot(e_,b)}catch{}A=!0}return A}finally{ai=M,Sr.transition=w}}return!1}function EQ(b,w,M){w=yF(M,w),w=zZ(b,w,1),ep(b,w),w=Va(),b=AM(b,1),b!==null&&(Vh(b,1,w),_l(b,w))}function vl(b,w,M){if(b.tag===3)EQ(b,b,M);else for(;w!==null;){if(w.tag===3){EQ(w,b,M);break}else if(w.tag===1){var A=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(tp===null||!tp.has(A))){b=yF(M,b),b=UZ(w,b,1),ep(w,b),b=Va(),w=AM(w,1),w!==null&&(Vh(w,1,b),_l(w,b));break}}w=w.return}}function ZSe(b,w,M){var A=b.pingCache;A!==null&&A.delete(w),w=Va(),b.pingedLanes|=b.suspendedLanes&M,Br===b&&(Fo&M)===M&&(to===4||to===3&&(Fo&130023424)===Fo&&500>Bs()-OF?c_(b,0):PF|=M),_l(b,w)}function LQ(b,w){w===0&&(b.mode&1?(w=nf,nf<<=1,!(nf&130023424)&&(nf=4194304)):w=1);var M=Va();b=AM(b,w),b!==null&&(Vh(b,w,M),_l(b,M))}function QSe(b){var w=b.memoizedState,M=0;w!==null&&(M=w.retryLane),LQ(b,M)}function JSe(b,w){var M=0;switch(b.tag){case 13:var A=b.stateNode,R=b.memoizedState;R!==null&&(M=R.retryLane);break;case 19:A=b.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(w),LQ(b,M)}var TQ;TQ=function(b,w,M){if(b!==null)if(b.memoizedProps!==w.pendingProps||Is.current)tc=!0;else{if(!(b.lanes&M)&&!(w.flags&128))return tc=!1,USe(b,w,M);tc=!!(b.flags&131072)}else tc=!1,Ns&&w.flags&1048576&&fZ(w,tM,w.index);switch(w.lanes=0,w.tag){case 2:var A=w.type;b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps;var R=rs(w,rr.current);wr(w,M),R=gF(null,w,A,b,R,M);var $=pF();return w.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,ws(A)?($=!0,Uh(w)):$=!1,w.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,tF(w),R.updater=Jk,w.stateNode=R,R._reactInternals=w,iF(w,A,b,M),w=CF(null,w,A,!0,$,M)):(w.tag=0,Ns&&$&&sF(w),Ua(null,w,R,M),w=w.child),w;case 16:A=w.elementType;e:{switch(b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps,R=A._init,A=R(A._payload),w.type=A,R=w.tag=txe(A),b=Ba(A,b),R){case 0:w=wF(null,w,A,b,M);break e;case 1:w=ZZ(null,w,A,b,M);break e;case 11:w=jZ(null,w,A,b,M);break e;case 14:w=KZ(null,w,A,Ba(A.type,b),M);break e}throw Error(o(306,A,""))}return w;case 0:return A=w.type,R=w.pendingProps,R=w.elementType===A?R:Ba(A,R),wF(b,w,A,R,M);case 1:return A=w.type,R=w.pendingProps,R=w.elementType===A?R:Ba(A,R),ZZ(b,w,A,R,M);case 3:e:{if(QZ(w),b===null)throw Error(o(387));A=w.pendingProps,$=w.memoizedState,R=$.element,oZ(b,w),Qk(w,A,null,M);var ue=w.memoizedState;if(A=ue.element,Ee&&$.isDehydrated)if($={element:A,isDehydrated:!1,cache:ue.cache,transitions:ue.transitions},w.updateQueue.baseState=$,w.memoizedState=$,w.flags&256){R=Error(o(423)),w=JZ(b,w,A,M,R);break e}else if(A!==R){R=Error(o(424)),w=JZ(b,w,A,M,R);break e}else for(Ee&&(ec=sn(w.stateNode.containerInfo),Jl=w,Ns=!0,Ru=null,_S=!1),M=yZ(w,null,A,M),w.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(A1(),A===R){w=hf(b,w,M);break e}Ua(b,w,A,M)}w=w.child}return w;case 5:return bZ(w),b===null&&aF(w),A=w.type,R=w.pendingProps,$=b!==null?b.memoizedProps:null,ue=R.children,fe(A,R)?ue=null:$!==null&&fe(A,$)&&(w.flags|=32),YZ(b,w),Ua(b,w,ue,M),w.child;case 6:return b===null&&aF(w),null;case 13:return eQ(b,w,M);case 4:return cF(w,w.stateNode.containerInfo),A=w.pendingProps,b===null?w.child=I1(w,null,A,M):Ua(b,w,A,M),w.child;case 11:return A=w.type,R=w.pendingProps,R=w.elementType===A?R:Ba(A,R),jZ(b,w,A,R,M);case 7:return Ua(b,w,w.pendingProps,M),w.child;case 8:return Ua(b,w,w.pendingProps.children,M),w.child;case 12:return Ua(b,w,w.pendingProps.children,M),w.child;case 10:e:{if(A=w.type._context,R=w.pendingProps,$=w.memoizedProps,ue=R.value,Yk(w,A,ue),$!==null)if(Zl($.value,ue)){if($.children===R.children&&!Is.current){w=hf(b,w,M);break e}}else for($=w.child,$!==null&&($.return=w);$!==null;){var Le=$.dependencies;if(Le!==null){ue=$.child;for(var Ze=Le.firstContext;Ze!==null;){if(Ze.context===A){if($.tag===1){Ze=af(-1,M&-M),Ze.tag=2;var Lt=$.updateQueue;if(Lt!==null){Lt=Lt.shared;var Yt=Lt.pending;Yt===null?Ze.next=Ze:(Ze.next=Yt.next,Yt.next=Ze),Lt.pending=Ze}}$.lanes|=M,Ze=$.alternate,Ze!==null&&(Ze.lanes|=M),za($.return,M,w),Le.lanes|=M;break}Ze=Ze.next}}else if($.tag===10)ue=$.type===w.type?null:$.child;else if($.tag===18){if(ue=$.return,ue===null)throw Error(o(341));ue.lanes|=M,Le=ue.alternate,Le!==null&&(Le.lanes|=M),za(ue,M,w),ue=$.sibling}else ue=$.child;if(ue!==null)ue.return=$;else for(ue=$;ue!==null;){if(ue===w){ue=null;break}if($=ue.sibling,$!==null){$.return=ue.return,ue=$;break}ue=ue.return}$=ue}Ua(b,w,R.children,M),w=w.child}return w;case 9:return R=w.type,A=w.pendingProps.children,wr(w,M),R=Cr(R),A=A(R),w.flags|=1,Ua(b,w,A,M),w.child;case 14:return A=w.type,R=Ba(A,w.pendingProps),R=Ba(A.type,R),KZ(b,w,A,R,M);case 15:return qZ(b,w,w.type,w.pendingProps,M);case 17:return A=w.type,R=w.pendingProps,R=w.elementType===A?R:Ba(A,R),b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,ws(A)?(b=!0,Uh(w)):b=!1,wr(w,M),hZ(w,A,R),iF(w,A,R,M),CF(null,w,A,!0,b,M);case 19:return sQ(b,w,M);case 22:return XZ(b,w,M)}throw Error(o(156,w.tag))};function kQ(b,w){return of(b,w)}function exe(b,w,M,A){this.tag=b,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uc(b,w,M,A){return new exe(b,w,M,A)}function $F(b){return b=b.prototype,!(!b||!b.isReactComponent)}function txe(b){if(typeof b=="function")return $F(b)?1:0;if(b!=null){if(b=b.$$typeof,b===p)return 11;if(b===v)return 14}return 2}function rp(b,w){var M=b.alternate;return M===null?(M=Uc(b.tag,w,b.key,b.mode),M.elementType=b.elementType,M.type=b.type,M.stateNode=b.stateNode,M.alternate=b,b.alternate=M):(M.pendingProps=w,M.type=b.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=b.flags&14680064,M.childLanes=b.childLanes,M.lanes=b.lanes,M.child=b.child,M.memoizedProps=b.memoizedProps,M.memoizedState=b.memoizedState,M.updateQueue=b.updateQueue,w=b.dependencies,M.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},M.sibling=b.sibling,M.index=b.index,M.ref=b.ref,M}function NM(b,w,M,A,R,$){var ue=2;if(A=b,typeof b=="function")$F(b)&&(ue=1);else if(typeof b=="string")ue=5;else e:switch(b){case u:return d_(M.children,R,$,w);case h:ue=8,R|=8;break;case d:return b=Uc(12,M,w,R|2),b.elementType=d,b.lanes=$,b;case _:return b=Uc(13,M,w,R),b.elementType=_,b.lanes=$,b;case m:return b=Uc(19,M,w,R),b.elementType=m,b.lanes=$,b;case C:return RM(M,R,$,w);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case f:ue=10;break e;case g:ue=9;break e;case p:ue=11;break e;case v:ue=14;break e;case y:ue=16,A=null;break e}throw Error(o(130,b==null?b:typeof b,""))}return w=Uc(ue,M,w,R),w.elementType=b,w.type=A,w.lanes=$,w}function d_(b,w,M,A){return b=Uc(7,b,A,w),b.lanes=M,b}function RM(b,w,M,A){return b=Uc(22,b,A,w),b.elementType=C,b.lanes=M,b.stateNode={},b}function GF(b,w,M){return b=Uc(6,b,null,w),b.lanes=M,b}function jF(b,w,M){return w=Uc(4,b.children!==null?b.children:[],b.key,w),w.lanes=M,w.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},w}function nxe(b,w,M,A,R){this.tag=w,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=He,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E1(0),this.expirationTimes=E1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E1(0),this.identifierPrefix=A,this.onRecoverableError=R,Ee&&(this.mutableSourceEagerHydrationData=null)}function MQ(b,w,M,A,R,$,ue,Le,Ze){return b=new nxe(b,w,M,Le,Ze),w===1?(w=1,$===!0&&(w|=8)):w=0,$=Uc(3,null,null,w),b.current=$,$.stateNode=b,$.memoizedState={element:A,isDehydrated:M,cache:null,transitions:null},tF($),b}function DQ(b){if(!b)return br;b=b._reactInternals;e:{if(T(b)!==b||b.tag!==1)throw Error(o(170));var w=b;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(ws(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(b.tag===1){var M=b.type;if(ws(M))return zh(b,M,w)}return w}function AQ(b){var w=b._reactInternals;if(w===void 0)throw typeof b.render=="function"?Error(o(188)):(b=Object.keys(b).join(","),Error(o(268,b)));return b=N(w),b===null?null:b.stateNode}function IQ(b,w){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var M=b.retryLane;b.retryLane=M!==0&&M<w?M:w}}function KF(b,w){IQ(b,w),(b=b.alternate)&&IQ(b,w)}function ixe(b){return b=N(b),b===null?null:b.stateNode}function sxe(){return null}return t.attemptContinuousHydration=function(b){if(b.tag===13){var w=Va();zc(b,134217728,w),KF(b,134217728)}},t.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var w=Va(),M=ip(b);zc(b,M,w),KF(b,M)}},t.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var w=b.stateNode;if(w.current.memoizedState.isDehydrated){var M=sf(w.pendingLanes);M!==0&&(Wh(w,M|1),_l(w,Bs()),!(si&6)&&(B1(),pl()))}break;case 13:var A=Va();bQ(function(){return zc(b,1,A)}),KF(b,1)}},t.batchedUpdates=function(b,w){var M=si;si|=1;try{return b(w)}finally{si=M,si===0&&(B1(),Hh&&pl())}},t.createComponentSelector=function(b){return{$$typeof:yM,value:b}},t.createContainer=function(b,w,M,A,R,$,ue){return MQ(b,w,!1,null,M,A,R,$,ue)},t.createHasPseudoClassSelector=function(b){return{$$typeof:bM,value:b}},t.createHydrationContainer=function(b,w,M,A,R,$,ue,Le,Ze){return b=MQ(M,A,!0,b,R,$,ue,Le,Ze),b.context=DQ(null),M=b.current,A=Va(),R=ip(M),$=af(A,R),$.callback=w??null,ep(M,$),b.current.lanes=R,Vh(b,R,A),_l(b,A),b},t.createPortal=function(b,w,M){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:b,containerInfo:w,implementation:M}},t.createRoleSelector=function(b){return{$$typeof:wM,value:b}},t.createTestNameSelector=function(b){return{$$typeof:CM,value:b}},t.createTextSelector=function(b){return{$$typeof:SM,value:b}},t.deferredUpdates=function(b){var w=ai,M=Sr.transition;try{return Sr.transition=null,ai=16,b()}finally{ai=w,Sr.transition=M}},t.discreteUpdates=function(b,w,M,A,R){var $=ai,ue=Sr.transition;try{return Sr.transition=null,ai=1,b(w,M,A,R)}finally{ai=$,Sr.transition=ue,si===0&&B1()}},t.findAllNodes=NF,t.findBoundingRects=function(b,w){if(!Re)throw Error(o(363));w=NF(b,w),b=[];for(var M=0;M<w.length;M++)b.push(wt(w[M]));for(w=b.length-1;0<w;w--){M=b[w];for(var A=M.x,R=A+M.width,$=M.y,ue=$+M.height,Le=w-1;0<=Le;Le--)if(w!==Le){var Ze=b[Le],Lt=Ze.x,Yt=Lt+Ze.width,zn=Ze.y,gn=zn+Ze.height;if(A>=Lt&&$>=zn&&R<=Yt&&ue<=gn){b.splice(w,1);break}else if(A!==Lt||M.width!==Ze.width||gn<$||zn>ue){if(!($!==zn||M.height!==Ze.height||Yt<A||Lt>R)){Lt>A&&(Ze.width+=Lt-A,Ze.x=A),Yt<R&&(Ze.width=R-Lt),b.splice(w,1);break}}else{zn>$&&(Ze.height+=zn-$,Ze.y=$),gn<ue&&(Ze.height=ue-zn),b.splice(w,1);break}}}return b},t.findHostInstance=AQ,t.findHostInstanceWithNoPortals=function(b){return b=I(b),b=b!==null?O(b):null,b===null?null:b.stateNode},t.findHostInstanceWithWarning=function(b){return AQ(b)},t.flushControlled=function(b){var w=si;si|=1;var M=Sr.transition,A=ai;try{Sr.transition=null,ai=1,b()}finally{ai=A,Sr.transition=M,si=w,si===0&&(B1(),pl())}},t.flushPassiveEffects=h_,t.flushSync=bQ,t.focusWithin=function(b,w){if(!Re)throw Error(o(363));for(b=DF(b),w=_Q(b,w),w=Array.from(w),b=0;b<w.length;){var M=w[b++];if(!Z(M)){if(M.tag===5&&Ye(M.stateNode))return!0;for(M=M.child;M!==null;)w.push(M),M=M.sibling}}return!1},t.getCurrentUpdatePriority=function(){return ai},t.getFindAllNodesFailureDescription=function(b,w){if(!Re)throw Error(o(363));var M=0,A=[];b=[DF(b),0];for(var R=0;R<b.length;){var $=b[R++],ue=b[R++],Le=w[ue];if(($.tag!==5||!Z($))&&(AF($,Le)&&(A.push(IF(Le)),ue++,ue>M&&(M=ue)),ue<w.length))for($=$.child;$!==null;)b.push($,ue),$=$.sibling}if(M<w.length){for(b=[];M<w.length;M++)b.push(IF(w[M]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},t.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return z(b.child.stateNode);default:return b.child.stateNode}},t.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:ixe,findFiberByHostInstance:b.findFiberByHostInstance||sxe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)b=!0;else{try{e_=w.inject(b),Yl=w}catch{}b=!!w.checkDCE}}return b},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(b,w,M,A){if(!Re)throw Error(o(363));b=NF(b,w);var R=je(b,M,A).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(b,w){var M=w._getVersion;M=M(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,M]:b.mutableSourceEagerHydrationData.push(w,M)},t.runWithPriority=function(b,w){var M=ai;try{return ai=b,w()}finally{ai=M}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(b,w,M,A){var R=w.current,$=Va(),ue=ip(R);return M=DQ(M),w.context===null?w.context=M:w.pendingContext=M,w=af($,ue),w.payload={element:b},A=A===void 0?null:A,A!==null&&(w.callback=A),ep(R,w),b=zc(R,ue,$),b!==null&&Zk(b,R,ue),ue},t};hbe.exports=E_t;var L_t=hbe.exports;const T_t=Mi(L_t),k_t=i=>typeof i=="object"&&typeof i.then=="function",FA=[];function M_t(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function D_t(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of FA)if(M_t(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=FA.indexOf(s);r!==-1&&FA.splice(r,1)},promise:(k_t(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(FA.push(s),!t)throw s.promise}const A_t=(i,e,t)=>D_t(i,e,!1,t),ZX={},gbe=i=>void Object.assign(ZX,i);function I_t(i,e){function t(u,{args:h=[],attach:d,...f},g){let p=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=f.object;_=Uy(m,{type:u,root:g,attach:d,primitive:!0})}else{const m=ZX[p];if(!m)throw new Error(`R3F: ${p} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Uy(new m(...h),{type:u,root:g,attach:d,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_ instanceof Kn?_.__r3f.attach="geometry":_ instanceof ta&&(_.__r3f.attach="material")),p!=="inject"&&W6(_,f),_}function n(u,h){let d=!1;if(h){var f,g;(f=h.__r3f)!=null&&f.attach?V6(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),d=!0),d||(g=u.__r3f)==null||g.objects.push(h),h.__r3f||Uy(h,{}),h.__r3f.parent=u,c$(h),Vy(h)}}function s(u,h,d){let f=!1;if(h){var g,p;if((g=h.__r3f)!=null&&g.attach)V6(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"});const _=u.children.filter(v=>v!==h),m=_.indexOf(d);u.children=[..._.slice(0,m),h,..._.slice(m)],f=!0}f||(p=u.__r3f)==null||p.objects.push(h),h.__r3f||Uy(h,{}),h.__r3f.parent=u,c$(h),Vy(h)}}function r(u,h,d=!1){u&&[...u].forEach(f=>o(h,f,d))}function o(u,h,d){if(h){var f,g,p;if(h.__r3f&&(h.__r3f.parent=null),(f=u.__r3f)!=null&&f.objects&&(u.__r3f.objects=u.__r3f.objects.filter(C=>C!==h)),(g=h.__r3f)!=null&&g.attach)mle(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var _;u.remove(h),(_=h.__r3f)!=null&&_.root&&z_t(h.__r3f.root,h)}const v=(p=h.__r3f)==null?void 0:p.primitive,y=d===void 0?h.dispose!==null&&!v:d;if(!v){var m;r((m=h.__r3f)==null?void 0:m.objects,h,y),r(h.children,h,y)}delete h.__r3f,y&&h.dispose&&h.type!=="Scene"&&a$.unstable_scheduleCallback(a$.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Vy(u)}}function a(u,h,d,f){var g;const p=(g=u.__r3f)==null?void 0:g.parent;if(!p)return;const _=t(h,d,u.__r3f.root);if(u.children){for(const m of u.children)m.__r3f&&n(_,m);u.children=u.children.filter(m=>!m.__r3f)}u.__r3f.objects.forEach(m=>n(_,m)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(p,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),n(p,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[f,f.alternate].forEach(m=>{m!==null&&(m.stateNode=_,m.ref&&(typeof m.ref=="function"?m.ref(_):m.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:T_t({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,n(d,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,d)=>{if(!h||!d)return;const f=u.getState().scene;f.__r3f&&s(f,h,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,d,f){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&f.object&&f.object!==u)return[!0];{const{args:_=[],children:m,...v}=f,{args:y=[],children:C,...S}=d;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((E,L)=>E!==y[L]))return[!0];const x=wbe(u,v,S,!0);return x.changes.length?[!1,x]:null}},commitUpdate(u,[h,d],f,g,p,_){h?a(u,f,p,_):W6(u,d)},commitMount(u,h,d,f){var g;const p=(g=u.__r3f)!=null?g:{};u.raycast&&p.handlers&&p.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Uy(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:d,parent:f}=(h=u.__r3f)!=null?h:{};d&&f&&mle(f,u,d),u.isObject3D&&(u.visible=!1),Vy(u)},unhideInstance(u,h){var d;const{attach:f,parent:g}=(d=u.__r3f)!=null?d:{};f&&g&&V6(g,u,f),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Vy(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Db.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Rs.fun(performance.now)?performance.now:Rs.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Rs.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Rs.fun(clearTimeout)?clearTimeout:void 0}),applyProps:W6}}var dle,fle;const U6=i=>"colorSpace"in i||"outputColorSpace"in i,pbe=()=>{var i;return(i=ZX.ColorManagement)!=null?i:null},mbe=i=>i&&i.isOrthographicCamera,N_t=i=>i&&i.hasOwnProperty("current"),Dk=typeof window<"u"&&((dle=window.document)!=null&&dle.createElement||((fle=window.navigator)==null?void 0:fle.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function _be(i){const e=G.useRef(i);return Dk(()=>void(e.current=i),[i]),e}function R_t({set:i}){return Dk(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class vbe extends G.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}vbe.getDerivedStateFromError=()=>({error:!0});const ybe="__default",gle=new Map,P_t=i=>i&&!!i.memoized&&!!i.changes;function bbe(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Dx=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()},Rs={obj:i=>i===Object(i)&&!Rs.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Rs.str(i)||Rs.num(i))return i===e;const r=Rs.obj(i);if(r&&n==="reference")return i===e;const o=Rs.arr(i);if(o&&t==="reference")return i===e;if((o||r)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(a in s?e:i)if(!Rs.equ(i[a],e[a],{strict:s,objects:"reference"}))return!1}else for(a in s?e:i)if(i[a]!==e[a])return!1;if(Rs.und(a)){if(o&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function O_t(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function Uy(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function l$(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),s=n.pop();return t=n.reduce((r,o)=>r[o],i),{target:t,key:s}}else return{target:t,key:e}}const ple=/-\d+$/;function V6(i,e,t){if(Rs.str(t)){if(ple.test(t)){const r=t.replace(ple,""),{target:o,key:a}=l$(i,r);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:s}=l$(i,t);e.__r3f.previousAttach=n[s],n[s]=e}else e.__r3f.previousAttach=t(i,e)}function mle(i,e,t){var n,s;if(Rs.str(t)){const{target:r,key:o}=l$(i,t),a=e.__r3f.previousAttach;a===void 0?delete r[o]:r[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(s=e.__r3f)==null||delete s.previousAttach}function wbe(i,{children:e,key:t,ref:n,...s},{children:r,key:o,ref:a,...l}={},c=!1){var u;const h=(u=i==null?void 0:i.__r3f)!=null?u:{},d=Object.entries(s),f=[];if(c){const p=Object.keys(l);for(let _=0;_<p.length;_++)s.hasOwnProperty(p[_])||d.unshift([p[_],ybe+"remove"])}d.forEach(([p,_])=>{var m;if((m=i.__r3f)!=null&&m.primitive&&p==="object"||Rs.equ(_,l[p]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(p))return f.push([p,_,!0,[]]);let v=[];p.includes("-")&&(v=p.split("-")),f.push([p,_,!1,v]);for(const y in s){const C=s[y];y.startsWith(`${p}-`)&&f.push([y,C,!1,y.split("-")])}});const g={...s};return h.memoizedProps&&h.memoizedProps.args&&(g.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(g.attach=h.memoizedProps.attach),{memoized:g,changes:f}}function W6(i,e){var t,n,s;const r=(t=i.__r3f)!=null?t:{},o=r.root,a=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:l,changes:c}=P_t(e)?e:wbe(i,e),u=r.eventCount;i.__r3f&&(i.__r3f.memoizedProps=l);for(let d=0;d<c.length;d++){let[f,g,p,_]=c[d];if(U6(i)){const C="srgb",S="srgb-linear";f==="encoding"?(f="colorSpace",g=g===3001?C:S):f==="outputEncoding"&&(f="outputColorSpace",g=g===3001?C:S)}let m=i,v=m[f];if(_.length&&(v=_.reduce((y,C)=>y[C],i),!(v&&v.set))){const[y,...C]=_.reverse();m=C.reverse().reduce((S,x)=>S[x],i),f=y}if(g===ybe+"remove")if(m.constructor){let y=gle.get(m.constructor);y||(y=new m.constructor,gle.set(m.constructor,y)),g=y[f]}else g=0;if(p)g?r.handlers[f]=g:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(v&&v.set&&(v.copy||v instanceof Y0)){if(Array.isArray(g))v.fromArray?v.fromArray(g):v.set(...g);else if(v.copy&&g&&g.constructor&&v.constructor===g.constructor)v.copy(g);else if(g!==void 0){const y=v instanceof Pt;!y&&v.setScalar?v.setScalar(g):v instanceof Y0&&g instanceof Y0?v.mask=g.mask:v.set(g),!pbe()&&!a.linear&&y&&v.convertSRGBToLinear()}}else if(m[f]=g,m[f]instanceof nr&&m[f].format===Nl&&m[f].type===Pd){const y=m[f];U6(y)&&U6(a.gl)?y.colorSpace=a.gl.outputColorSpace:y.encoding=a.gl.outputEncoding}Vy(i)}if(r.parent&&a.internal&&i.raycast&&u!==r.eventCount){const d=a.internal.interaction.indexOf(i);d>-1&&a.internal.interaction.splice(d,1),r.eventCount&&a.internal.interaction.push(i)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(s=i.__r3f)!=null&&s.parent&&c$(i),i}function Vy(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function c$(i){i.onUpdate==null||i.onUpdate(i)}function F_t(i,e){i.manual||(mbe(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function BA(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function B_t(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Db.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Db.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Db.ContinuousEventPriority;default:return Db.DefaultEventPriority}}function Cbe(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function z_t(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{Cbe(t.capturedMap,e,n,s)})}function U_t(i){function e(l){const{internal:c}=i.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function n(l,c){const u=i.getState(),h=new Set,d=[],f=c?c(u.internal.interaction):u.internal.interaction;for(let m=0;m<f.length;m++){const v=Dx(f[m]);v&&(v.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(m){const v=Dx(m);if(!v||!v.events.enabled||v.raycaster.camera===null)return[];if(v.raycaster.camera===void 0){var y;v.events.compute==null||v.events.compute(l,v,(y=v.previousRoot)==null?void 0:y.getState()),v.raycaster.camera===void 0&&(v.raycaster.camera=null)}return v.raycaster.camera?v.raycaster.intersectObject(m,!0):[]}let p=f.flatMap(g).sort((m,v)=>{const y=Dx(m.object),C=Dx(v.object);return!y||!C?m.distance-v.distance:C.events.priority-y.events.priority||m.distance-v.distance}).filter(m=>{const v=BA(m);return h.has(v)?!1:(h.add(v),!0)});u.events.filter&&(p=u.events.filter(p,u));for(const m of p){let v=m.object;for(;v;){var _;(_=v.__r3f)!=null&&_.eventCount&&d.push({...m,eventObject:v}),v=v.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let m of u.internal.capturedMap.get(l.pointerId).values())h.has(BA(m.intersection))||d.push(m.intersection);return d}function s(l,c,u,h){const d=i.getState();if(l.length){const f={stopped:!1};for(const g of l){const p=Dx(g.object)||d,{raycaster:_,pointer:m,camera:v,internal:y}=p,C=new se(m.x,m.y,0).unproject(v),S=D=>{var I,N;return(I=(N=y.capturedMap.get(D))==null?void 0:N.has(g.eventObject))!=null?I:!1},x=D=>{const I={intersection:g,target:c.target};y.capturedMap.has(D)?y.capturedMap.get(D).set(g.eventObject,I):y.capturedMap.set(D,new Map([[g.eventObject,I]])),c.target.setPointerCapture(D)},E=D=>{const I=y.capturedMap.get(D);I&&Cbe(y.capturedMap,g.eventObject,I,D)};let L={};for(let D in c){let I=c[D];typeof I!="function"&&(L[D]=I)}let T={...g,...L,pointer:m,intersections:l,stopped:f.stopped,delta:u,unprojectedPoint:C,ray:_.ray,camera:v,stopPropagation(){const D="pointerId"in c&&y.capturedMap.get(c.pointerId);if((!D||D.has(g.eventObject))&&(T.stopped=f.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(I=>I.eventObject===g.eventObject))){const I=l.slice(0,l.indexOf(g));r([...I,g])}},target:{hasPointerCapture:S,setPointerCapture:x,releasePointerCapture:E},currentTarget:{hasPointerCapture:S,setPointerCapture:x,releasePointerCapture:E},nativeEvent:c};if(h(T),f.stopped===!0)break}}return l}function r(l){const{internal:c}=i.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const d=u.eventObject.__r3f,f=d==null?void 0:d.handlers;if(c.hovered.delete(BA(u)),d!=null&&d.eventCount){const g={...u,intersections:l};f.onPointerOut==null||f.onPointerOut(g),f.onPointerLeave==null||f.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return c=>{const{internal:u}=i.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),r([]))})}}return function(u){const{onPointerMissed:h,internal:d}=i.getState();d.lastEvent.current=u;const f=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=n(u,f?t:void 0),m=g?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=_.map(y=>y.eventObject)),g&&!_.length&&m<=2&&(o(u,d.interaction),h&&h(u)),f&&r(_);function v(y){const C=y.eventObject,S=C.__r3f,x=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(f){if(x.onPointerOver||x.onPointerEnter||x.onPointerOut||x.onPointerLeave){const E=BA(y),L=d.hovered.get(E);L?L.stopped&&y.stopPropagation():(d.hovered.set(E,y),x.onPointerOver==null||x.onPointerOver(y),x.onPointerEnter==null||x.onPointerEnter(y))}x.onPointerMove==null||x.onPointerMove(y)}else{const E=x[l];E?(!g||d.initialHits.includes(C))&&(o(u,d.interaction.filter(L=>!d.initialHits.includes(L))),E(y)):g&&d.initialHits.includes(C)&&o(u,d.interaction.filter(L=>!d.initialHits.includes(L)))}}s(_,u,m,v)}}return{handlePointer:a}}const Sbe=i=>!!(i!=null&&i.render),xbe=G.createContext(null),V_t=(i,e)=>{const t=x_t((a,l)=>{const c=new se,u=new se,h=new se;function d(m=l().camera,v=u,y=l().size){const{width:C,height:S,top:x,left:E}=y,L=C/S;v instanceof se?h.copy(v):h.set(...v);const T=m.getWorldPosition(c).distanceTo(h);if(mbe(m))return{width:C/m.zoom,height:S/m.zoom,top:x,left:E,factor:1,distance:T,aspect:L};{const D=m.fov*Math.PI/180,I=2*Math.tan(D/2)*T,N=I*(C/S);return{width:N,height:I,top:x,left:E,factor:C/N,distance:T,aspect:L}}}let f;const g=m=>a(v=>({performance:{...v.performance,current:m}})),p=new rt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>i(l(),m),advance:(m,v)=>e(m,v,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new jX,pointer:p,mouse:p,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();f&&clearTimeout(f),m.performance.current!==m.performance.min&&g(m.performance.min),f=setTimeout(()=>g(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:m=>a(v=>({...v,events:{...v.events,...m}})),setSize:(m,v,y,C,S)=>{const x=l().camera,E={width:m,height:v,top:C||0,left:S||0,updateStyle:y};a(L=>({size:E,viewport:{...L.viewport,...d(x,u,E)}}))},setDpr:m=>a(v=>{const y=bbe(m);return{viewport:{...v.viewport,dpr:y,initialDpr:v.viewport.initialDpr||y}}}),setFrameloop:(m="always")=>{const v=l().clock;v.stop(),v.elapsedTime=0,m!=="never"&&(v.start(),v.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:G.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,v,y)=>{const C=l().internal;return C.priority=C.priority+(v>0?1:0),C.subscribers.push({ref:m,priority:v,store:y}),C.subscribers=C.subscribers.sort((S,x)=>S.priority-x.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(v>0?1:0),S.subscribers=S.subscribers.filter(x=>x.ref!==m))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l!==s||c.dpr!==r){var d;s=l,r=c.dpr,F_t(a,l),u.setPixelRatio(c.dpr);const f=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,f)}a!==o&&(o=a,h(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};function W_t(i,e){const t={callback:i};return e.add(t),()=>void e.delete(t)}let zA,Ebe=new Set,H_t=new Set,$_t=new Set;const G_t=i=>W_t(i,Ebe);function H6(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Ax(i,e){switch(i){case"before":return H6(Ebe,e);case"after":return H6(H_t,e);case"tail":return H6($_t,e)}}let $6,G6;function j6(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),$6=e.internal.subscribers,zA=0;zA<$6.length;zA++)G6=$6[zA],G6.ref.current(G6.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function j_t(i){let e=!1,t,n,s;function r(l){n=requestAnimationFrame(r),e=!0,t=0,Ax("before",l);for(const u of i.values()){var c;s=u.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(t+=j6(l,s))}if(Ax("after",l),t===0)return Ax("tail",l),e=!1,cancelAnimationFrame(n)}function o(l,c=1){var u;if(!l)return i.forEach(h=>o(h.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(r)))}function a(l,c=!0,u,h){if(c&&Ax("before",l),u)j6(l,u,h);else for(const d of i.values())j6(l,d.store.getState());c&&Ax("after",l)}return{loop:r,invalidate:o,advance:a}}function Lbe(){const i=G.useContext(xbe);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Xr(i=t=>t,e){return Lbe()(i,e)}function A5(i,e=0){const t=Lbe(),n=t.getState().internal.subscribe,s=_be(i);return Dk(()=>n(s,e,t),[e,n,t]),null}const gC=new Map,{invalidate:_le,advance:vle}=j_t(gC),{reconciler:HP,applyProps:Q_}=I_t(gC,B_t),Ly={objects:"shallow",strict:!1},K_t=(i,e)=>{const t=typeof i=="function"?i(e):i;return Sbe(t)?t:new LX({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function q_t(i,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function X_t(i){const e=gC.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||V_t(_le,vle),o=t||HP.createContainer(r,Db.ConcurrentRoot,null,!1,null,"",s,null);e||gC.set(i,{fiber:o,store:r});let a,l=!1,c;return{configure(u={}){let{gl:h,size:d,scene:f,events:g,onCreated:p,shadows:_=!1,linear:m=!1,flat:v=!1,legacy:y=!1,orthographic:C=!1,frameloop:S="always",dpr:x=[1,2],performance:E,raycaster:L,camera:T,onPointerMissed:D}=u,I=r.getState(),N=I.gl;I.gl||I.set({gl:N=K_t(h,i)});let P=I.raycaster;P||I.set({raycaster:P=new YX});const{params:O,...V}=L||{};if(Rs.equ(V,P,Ly)||Q_(P,{...V}),Rs.equ(O,P.params,Ly)||Q_(P,{params:{...P.params,...O}}),!I.camera||I.camera===c&&!Rs.equ(c,T,Ly)){c=T;const W=T instanceof Sk,X=W?T:C?new _1(0,0,0,0,.1,1e3):new qr(75,0,.1,1e3);W||(X.position.z=5,T&&Q_(X,T),!I.camera&&!(T!=null&&T.rotation)&&X.lookAt(0,0,0)),I.set({camera:X})}if(!I.scene){let W;f instanceof fT?W=f:(W=new fT,f&&Q_(W,f)),I.set({scene:Uy(W)})}if(!I.xr){const W=(le,fe)=>{const be=r.getState();be.frameloop!=="never"&&vle(le,!0,be,fe)},X=()=>{const le=r.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?W:null),le.gl.xr.isPresenting||_le(le)},ee={connect(){const le=r.getState().gl;le.xr.addEventListener("sessionstart",X),le.xr.addEventListener("sessionend",X)},disconnect(){const le=r.getState().gl;le.xr.removeEventListener("sessionstart",X),le.xr.removeEventListener("sessionend",X)}};N.xr&&ee.connect(),I.set({xr:ee})}if(N.shadowMap){const W=N.shadowMap.enabled,X=N.shadowMap.type;if(N.shadowMap.enabled=!!_,Rs.boo(_))N.shadowMap.type=_L;else if(Rs.str(_)){var z;const ee={basic:c1e,percentage:n5,soft:_L,variance:th};N.shadowMap.type=(z=ee[_])!=null?z:_L}else Rs.obj(_)&&Object.assign(N.shadowMap,_);(W!==N.shadowMap.enabled||X!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const K=pbe();K&&("enabled"in K?K.enabled=!y:"legacyMode"in K&&(K.legacyMode=y)),Q_(N,{outputEncoding:m?3e3:3001,toneMapping:v?yh:aX}),I.legacy!==y&&I.set(()=>({legacy:y})),I.linear!==m&&I.set(()=>({linear:m})),I.flat!==v&&I.set(()=>({flat:v})),h&&!Rs.fun(h)&&!Sbe(h)&&!Rs.equ(h,N,Ly)&&Q_(N,h),g&&!I.events.handlers&&I.set({events:g(r)});const j=q_t(i,d);return Rs.equ(j,I.size,Ly)||I.setSize(j.width,j.height,j.updateStyle,j.top,j.left),x&&I.viewport.dpr!==bbe(x)&&I.setDpr(x),I.frameloop!==S&&I.setFrameloop(S),I.onPointerMissed||I.set({onPointerMissed:D}),E&&!Rs.equ(E,I.performance,Ly)&&I.set(W=>({performance:{...W.performance,...E}})),a=p,l=!0,this},render(u){return l||this.configure(),HP.updateContainer(G.createElement(Y_t,{store:r,children:u,onCreated:a,rootElement:i}),o,null,()=>{}),r},unmount(){Tbe(i)}}}function Y_t({store:i,children:e,onCreated:t,rootElement:n}){return Dk(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),G.createElement(xbe.Provider,{value:i},e)}function Tbe(i,e){const t=gC.get(i),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),HP.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,o,a,l;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(a=s.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),O_t(s),gC.delete(i)}catch{}},500)})}}HP.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:G.version});function u$(i,e,t){var n,s,r,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?n=setTimeout(l,e-u):(n=null,t||(a=i.apply(r,s),r=s=null))}var c=function(){r=this,s=arguments,o=Date.now();var u=t&&!n;return n||(n=setTimeout(l,e)),u&&(a=i.apply(r,s),r=s=null),a};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(a=i.apply(r,s),r=s=null,clearTimeout(n),n=null)},c}u$.debounce=u$;var Z_t=u$;const yle=Mi(Z_t);function Q_t(i){let{debounce:e,scroll:t,polyfill:n,offsetSize:s}=i===void 0?{debounce:0,scroll:!1,offsetSize:!1}:i;const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,h=G.useRef(!1);G.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,f,g]=G.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:y,top:C,width:S,height:x,bottom:E,right:L,x:T,y:D}=l.current.element.getBoundingClientRect(),I={left:y,top:C,width:S,height:x,bottom:E,right:L,x:T,y:D};l.current.element instanceof HTMLElement&&s&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),h.current&&!n0t(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[v,u?yle(v,u):v,c?yle(v,c):v]},[a,s,c,u]);function p(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new r(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})))}const m=v=>{!v||v===l.current.element||(p(),l.current.element=v,l.current.scrollContainers=kbe(v),_())};return e0t(g,!!t),J_t(f),G.useEffect(()=>{p(),_()},[t,g,f]),G.useEffect(()=>p,[]),[m,o,d]}function J_t(i){G.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function e0t(i,e){G.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function kbe(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...kbe(i.parentElement)]}const t0t=["x","y","top","bottom","left","right","width","height"],n0t=(i,e)=>t0t.every(t=>i[t]===e[t]);var i0t=Object.defineProperty,s0t=Object.defineProperties,r0t=Object.getOwnPropertyDescriptors,ble=Object.getOwnPropertySymbols,o0t=Object.prototype.hasOwnProperty,a0t=Object.prototype.propertyIsEnumerable,wle=(i,e,t)=>e in i?i0t(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Cle=(i,e)=>{for(var t in e||(e={}))o0t.call(e,t)&&wle(i,t,e[t]);if(ble)for(var t of ble(e))a0t.call(e,t)&&wle(i,t,e[t]);return i},l0t=(i,e)=>s0t(i,r0t(e)),Sle,xle;typeof window<"u"&&((Sle=window.document)!=null&&Sle.createElement||((xle=window.navigator)==null?void 0:xle.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function Mbe(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const s=Mbe(n,e,t);if(s)return s;n=n.sibling}}function Dbe(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const Ele=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=Ele;return}return Ele.apply(this,arguments)};const QX=Dbe(G.createContext(null));class Abe extends G.Component{render(){return G.createElement(QX.Provider,{value:this._reactInternals},this.props.children)}}function c0t(){const i=G.useContext(QX);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const s=Mbe(n,!1,r=>{let o=r.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(s)return s}},[i,e])}function u0t(){const i=c0t(),[e]=G.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const s=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;s&&s!==QX&&!e.has(s)&&e.set(s,G.useContext(Dbe(s)))}t=t.return}return e}function h0t(){const i=u0t();return G.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>G.createElement(e,null,G.createElement(t.Provider,l0t(Cle({},n),{value:i.get(t)}))),e=>G.createElement(Abe,Cle({},e))),[i])}const K6={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function d0t(i){const{handlePointer:e}=U_t(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(K6).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var n;const{set:s,events:r}=i.getState();r.disconnect==null||r.disconnect(),s(o=>({events:{...o.events,connected:t}})),Object.entries((n=r.handlers)!=null?n:[]).forEach(([o,a])=>{const[l,c]=K6[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var s;Object.entries((s=n.handlers)!=null?s:[]).forEach(([r,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=K6[r];n.connected.removeEventListener(a,o)}}),t(r=>({events:{...r.events,connected:void 0}}))}}}}const f0t=G.forwardRef(function({children:e,fallback:t,resize:n,style:s,gl:r,events:o=d0t,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:g,dpr:p,performance:_,raycaster:m,camera:v,onPointerMissed:y,onCreated:C,...S},x){G.useMemo(()=>gbe(cbe),[]);const E=h0t(),[L,T]=Q_t({scroll:!0,debounce:{scroll:50,resize:0},...n}),D=G.useRef(null),I=G.useRef(null);G.useImperativeHandle(x,()=>D.current);const N=_be(y),[P,O]=G.useState(!1),[V,z]=G.useState(!1);if(P)throw P;if(V)throw V;const K=G.useRef(null);Dk(()=>{const U=D.current;T.width>0&&T.height>0&&U&&(K.current||(K.current=X_t(U)),K.current.configure({gl:r,events:o,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:g,dpr:p,performance:_,raycaster:m,camera:v,size:T,onPointerMissed:(...j)=>N.current==null?void 0:N.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?N_t(a)?a.current:a:I.current),l&&j.setEvents({compute:(W,X)=>{const ee=W[l+"X"],le=W[l+"Y"];X.pointer.set(ee/X.size.width*2-1,-(le/X.size.height)*2+1),X.raycaster.setFromCamera(X.pointer,X.camera)}}),C==null||C(j)}}),K.current.render(G.createElement(E,null,G.createElement(vbe,{set:z},G.createElement(G.Suspense,{fallback:G.createElement(R_t,{set:O})},e)))))}),G.useEffect(()=>{const U=D.current;if(U)return()=>Tbe(U)},[]);const H=a?"none":"auto";return G.createElement("div",pv({ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...s}},S),G.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},G.createElement("canvas",{ref:D,style:{display:"block"}},t)))}),g0t=G.forwardRef(function(e,t){return G.createElement(Abe,null,G.createElement(f0t,pv({},e,{ref:t})))});function p0t(i,e,t){var n,s=1;i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);function r(){var o,a=n.length,l,c=0,u=0,h=0;for(o=0;o<a;++o)l=n[o],c+=l.x||0,u+=l.y||0,h+=l.z||0;for(c=(c/a-i)*s,u=(u/a-e)*s,h=(h/a-t)*s,o=0;o<a;++o)l=n[o],c&&(l.x-=c),u&&(l.y-=u),h&&(l.z-=h)}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(i=+o,r):i},r.y=function(o){return arguments.length?(e=+o,r):e},r.z=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(s=+o,r):s},r}function m0t(i){const e=+this._x.call(null,i);return Ibe(this.cover(e),e,i)}function Ibe(i,e,t){if(isNaN(e))return i;var n,s=i._root,r={data:t},o=i._x0,a=i._x1,l,c,u,h,d;if(!s)return i._root=r,i;for(;s.length;)if((u=e>=(l=(o+a)/2))?o=l:a=l,n=s,!(s=s[h=+u]))return n[h]=r,i;if(c=+i._x.call(null,s.data),e===c)return r.next=s,n?n[h]=r:i._root=r,i;do n=n?n[h]=new Array(2):i._root=new Array(2),(u=e>=(l=(o+a)/2))?o=l:a=l;while((h=+u)==(d=+(c>=l)));return n[d]=s,n[h]=r,i}function _0t(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e);let n=1/0,s=-1/0;for(let r=0,o;r<e;++r)isNaN(o=+this._x.call(null,i[r]))||(t[r]=o,o<n&&(n=o),o>s&&(s=o));if(n>s)return this;this.cover(n).cover(s);for(let r=0;r<e;++r)Ibe(this,t[r],i[r]);return this}function v0t(i){if(isNaN(i=+i))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(i))+1;else{for(var n=t-e||1,s=this._root,r,o;e>i||i>=t;)switch(o=+(i<e),r=new Array(2),r[o]=s,s=r,n*=2,o){case 0:t=e+n;break;case 1:e=t-n;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=t,this}function y0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function b0t(i){return arguments.length?this.cover(+i[0][0]).cover(+i[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Eg(i,e,t){this.node=i,this.x0=e,this.x1=t}function w0t(i,e){var t,n=this._x0,s,r,o=this._x1,a=[],l=this._root,c,u;for(l&&a.push(new Eg(l,n,o)),e==null?e=1/0:(n=i-e,o=i+e);c=a.pop();)if(!(!(l=c.node)||(s=c.x0)>o||(r=c.x1)<n))if(l.length){var h=(s+r)/2;a.push(new Eg(l[1],h,r),new Eg(l[0],s,h)),(u=+(i>=h))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-u],a[a.length-1-u]=c)}else{var d=Math.abs(i-+this._x.call(null,l.data));d<e&&(e=d,n=i-d,o=i+d,t=l.data)}return t}function C0t(i){if(isNaN(l=+this._x.call(null,i)))return this;var e,t=this._root,n,s,r,o=this._x0,a=this._x1,l,c,u,h,d;if(!t)return this;if(t.length)for(;;){if((u=l>=(c=(o+a)/2))?o=c:a=c,e=t,!(t=t[h=+u]))return this;if(!t.length)break;e[h+1&1]&&(n=e,d=h)}for(;t.data!==i;)if(s=t,!(t=t.next))return this;return(r=t.next)&&delete t.next,s?(r?s.next=r:delete s.next,this):e?(r?e[h]=r:delete e[h],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(n?n[d]=t:this._root=t),this):(this._root=r,this)}function S0t(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function x0t(){return this._root}function E0t(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function L0t(i){var e=[],t,n=this._root,s,r,o;for(n&&e.push(new Eg(n,this._x0,this._x1));t=e.pop();)if(!i(n=t.node,r=t.x0,o=t.x1)&&n.length){var a=(r+o)/2;(s=n[1])&&e.push(new Eg(s,a,o)),(s=n[0])&&e.push(new Eg(s,r,a))}return this}function T0t(i){var e=[],t=[],n;for(this._root&&e.push(new Eg(this._root,this._x0,this._x1));n=e.pop();){var s=n.node;if(s.length){var r,o=n.x0,a=n.x1,l=(o+a)/2;(r=s[0])&&e.push(new Eg(r,o,l)),(r=s[1])&&e.push(new Eg(r,l,a))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.x1);return this}function k0t(i){return i[0]}function M0t(i){return arguments.length?(this._x=i,this):this._x}function JX(i,e){var t=new eY(e??k0t,NaN,NaN);return i==null?t:t.addAll(i)}function eY(i,e,t){this._x=i,this._x0=e,this._x1=t,this._root=void 0}function Lle(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var ql=JX.prototype=eY.prototype;ql.copy=function(){var i=new eY(this._x,this._x0,this._x1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=Lle(e),i;for(t=[{source:e,target:i._root=new Array(2)}];e=t.pop();)for(var s=0;s<2;++s)(n=e.source[s])&&(n.length?t.push({source:n,target:e.target[s]=new Array(2)}):e.target[s]=Lle(n));return i};ql.add=m0t;ql.addAll=_0t;ql.cover=v0t;ql.data=y0t;ql.extent=b0t;ql.find=w0t;ql.remove=C0t;ql.removeAll=S0t;ql.root=x0t;ql.size=E0t;ql.visit=L0t;ql.visitAfter=T0t;ql.x=M0t;function D0t(i){const e=+this._x.call(null,i),t=+this._y.call(null,i);return Nbe(this.cover(e,t),e,t,i)}function Nbe(i,e,t,n){if(isNaN(e)||isNaN(t))return i;var s,r=i._root,o={data:n},a=i._x0,l=i._y0,c=i._x1,u=i._y1,h,d,f,g,p,_,m,v;if(!r)return i._root=o,i;for(;r.length;)if((p=e>=(h=(a+c)/2))?a=h:c=h,(_=t>=(d=(l+u)/2))?l=d:u=d,s=r,!(r=r[m=_<<1|p]))return s[m]=o,i;if(f=+i._x.call(null,r.data),g=+i._y.call(null,r.data),e===f&&t===g)return o.next=r,s?s[m]=o:i._root=o,i;do s=s?s[m]=new Array(4):i._root=new Array(4),(p=e>=(h=(a+c)/2))?a=h:c=h,(_=t>=(d=(l+u)/2))?l=d:u=d;while((m=_<<1|p)===(v=(g>=d)<<1|f>=h));return s[v]=r,s[m]=o,i}function A0t(i){var e,t,n=i.length,s,r,o=new Array(n),a=new Array(n),l=1/0,c=1/0,u=-1/0,h=-1/0;for(t=0;t<n;++t)isNaN(s=+this._x.call(null,e=i[t]))||isNaN(r=+this._y.call(null,e))||(o[t]=s,a[t]=r,s<l&&(l=s),s>u&&(u=s),r<c&&(c=r),r>h&&(h=r));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),t=0;t<n;++t)Nbe(this,o[t],a[t],i[t]);return this}function I0t(i,e){if(isNaN(i=+i)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,s=this._x1,r=this._y1;if(isNaN(t))s=(t=Math.floor(i))+1,r=(n=Math.floor(e))+1;else{for(var o=s-t||1,a=this._root,l,c;t>i||i>=s||n>e||e>=r;)switch(c=(e<n)<<1|i<t,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:s=t+o,r=n+o;break;case 1:t=s-o,r=n+o;break;case 2:s=t+o,n=r-o;break;case 3:t=s-o,n=r-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=n,this._x1=s,this._y1=r,this}function N0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function R0t(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function el(i,e,t,n,s){this.node=i,this.x0=e,this.y0=t,this.x1=n,this.y1=s}function P0t(i,e,t){var n,s=this._x0,r=this._y0,o,a,l,c,u=this._x1,h=this._y1,d=[],f=this._root,g,p;for(f&&d.push(new el(f,s,r,u,h)),t==null?t=1/0:(s=i-t,r=e-t,u=i+t,h=e+t,t*=t);g=d.pop();)if(!(!(f=g.node)||(o=g.x0)>u||(a=g.y0)>h||(l=g.x1)<s||(c=g.y1)<r))if(f.length){var _=(o+l)/2,m=(a+c)/2;d.push(new el(f[3],_,m,l,c),new el(f[2],o,m,_,c),new el(f[1],_,a,l,m),new el(f[0],o,a,_,m)),(p=(e>=m)<<1|i>=_)&&(g=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=g)}else{var v=i-+this._x.call(null,f.data),y=e-+this._y.call(null,f.data),C=v*v+y*y;if(C<t){var S=Math.sqrt(t=C);s=i-S,r=e-S,u=i+S,h=e+S,n=f.data}}return n}function O0t(i){if(isNaN(u=+this._x.call(null,i))||isNaN(h=+this._y.call(null,i)))return this;var e,t=this._root,n,s,r,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,h,d,f,g,p,_,m;if(!t)return this;if(t.length)for(;;){if((g=u>=(d=(o+l)/2))?o=d:l=d,(p=h>=(f=(a+c)/2))?a=f:c=f,e=t,!(t=t[_=p<<1|g]))return this;if(!t.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(n=e,m=_)}for(;t.data!==i;)if(s=t,!(t=t.next))return this;return(r=t.next)&&delete t.next,s?(r?s.next=r:delete s.next,this):e?(r?e[_]=r:delete e[_],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[m]=t:this._root=t),this):(this._root=r,this)}function F0t(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function B0t(){return this._root}function z0t(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function U0t(i){var e=[],t,n=this._root,s,r,o,a,l;for(n&&e.push(new el(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!i(n=t.node,r=t.x0,o=t.y0,a=t.x1,l=t.y1)&&n.length){var c=(r+a)/2,u=(o+l)/2;(s=n[3])&&e.push(new el(s,c,u,a,l)),(s=n[2])&&e.push(new el(s,r,u,c,l)),(s=n[1])&&e.push(new el(s,c,o,a,u)),(s=n[0])&&e.push(new el(s,r,o,c,u))}return this}function V0t(i){var e=[],t=[],n;for(this._root&&e.push(new el(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var s=n.node;if(s.length){var r,o=n.x0,a=n.y0,l=n.x1,c=n.y1,u=(o+l)/2,h=(a+c)/2;(r=s[0])&&e.push(new el(r,o,a,u,h)),(r=s[1])&&e.push(new el(r,u,a,l,h)),(r=s[2])&&e.push(new el(r,o,h,u,c)),(r=s[3])&&e.push(new el(r,u,h,l,c))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.x1,n.y1);return this}function W0t(i){return i[0]}function H0t(i){return arguments.length?(this._x=i,this):this._x}function $0t(i){return i[1]}function G0t(i){return arguments.length?(this._y=i,this):this._y}function tY(i,e,t){var n=new nY(e??W0t,t??$0t,NaN,NaN,NaN,NaN);return i==null?n:n.addAll(i)}function nY(i,e,t,n,s,r){this._x=i,this._y=e,this._x0=t,this._y0=n,this._x1=s,this._y1=r,this._root=void 0}function Tle(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var fl=tY.prototype=nY.prototype;fl.copy=function(){var i=new nY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=Tle(e),i;for(t=[{source:e,target:i._root=new Array(4)}];e=t.pop();)for(var s=0;s<4;++s)(n=e.source[s])&&(n.length?t.push({source:n,target:e.target[s]=new Array(4)}):e.target[s]=Tle(n));return i};fl.add=D0t;fl.addAll=A0t;fl.cover=I0t;fl.data=N0t;fl.extent=R0t;fl.find=P0t;fl.remove=O0t;fl.removeAll=F0t;fl.root=B0t;fl.size=z0t;fl.visit=U0t;fl.visitAfter=V0t;fl.x=H0t;fl.y=G0t;function j0t(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return Rbe(this.cover(e,t,n),e,t,n,i)}function Rbe(i,e,t,n,s){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var r,o=i._root,a={data:s},l=i._x0,c=i._y0,u=i._z0,h=i._x1,d=i._y1,f=i._z1,g,p,_,m,v,y,C,S,x,E,L;if(!o)return i._root=a,i;for(;o.length;)if((C=e>=(g=(l+h)/2))?l=g:h=g,(S=t>=(p=(c+d)/2))?c=p:d=p,(x=n>=(_=(u+f)/2))?u=_:f=_,r=o,!(o=o[E=x<<2|S<<1|C]))return r[E]=a,i;if(m=+i._x.call(null,o.data),v=+i._y.call(null,o.data),y=+i._z.call(null,o.data),e===m&&t===v&&n===y)return a.next=o,r?r[E]=a:i._root=a,i;do r=r?r[E]=new Array(8):i._root=new Array(8),(C=e>=(g=(l+h)/2))?l=g:h=g,(S=t>=(p=(c+d)/2))?c=p:d=p,(x=n>=(_=(u+f)/2))?u=_:f=_;while((E=x<<2|S<<1|C)===(L=(y>=_)<<2|(v>=p)<<1|m>=g));return r[L]=o,r[E]=a,i}function K0t(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),s=new Float64Array(e);let r=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h=0,d,f,g,p;h<e;++h)isNaN(f=+this._x.call(null,d=i[h]))||isNaN(g=+this._y.call(null,d))||isNaN(p=+this._z.call(null,d))||(t[h]=f,n[h]=g,s[h]=p,f<r&&(r=f),f>l&&(l=f),g<o&&(o=g),g>c&&(c=g),p<a&&(a=p),p>u&&(u=p));if(r>l||o>c||a>u)return this;this.cover(r,o,a).cover(l,c,u);for(let h=0;h<e;++h)Rbe(this,t[h],n[h],s[h],i[h]);return this}function q0t(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,s=this._y0,r=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(n))o=(n=Math.floor(i))+1,a=(s=Math.floor(e))+1,l=(r=Math.floor(t))+1;else{for(var c=o-n||1,u=this._root,h,d;n>i||i>=o||s>e||e>=a||r>t||t>=l;)switch(d=(t<r)<<2|(e<s)<<1|i<n,h=new Array(8),h[d]=u,u=h,c*=2,d){case 0:o=n+c,a=s+c,l=r+c;break;case 1:n=o-c,a=s+c,l=r+c;break;case 2:o=n+c,s=a-c,l=r+c;break;case 3:n=o-c,s=a-c,l=r+c;break;case 4:o=n+c,a=s+c,r=l-c;break;case 5:n=o-c,a=s+c,r=l-c;break;case 6:o=n+c,s=a-c,r=l-c;break;case 7:n=o-c,s=a-c,r=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=s,this._z0=r,this._x1=o,this._y1=a,this._z1=l,this}function X0t(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function Y0t(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function _s(i,e,t,n,s,r,o){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=s,this.y1=r,this.z1=o}function Z0t(i,e,t,n){var s,r=this._x0,o=this._y0,a=this._z0,l,c,u,h,d,f,g=this._x1,p=this._y1,_=this._z1,m=[],v=this._root,y,C;for(v&&m.push(new _s(v,r,o,a,g,p,_)),n==null?n=1/0:(r=i-n,o=e-n,a=t-n,g=i+n,p=e+n,_=t+n,n*=n);y=m.pop();)if(!(!(v=y.node)||(l=y.x0)>g||(c=y.y0)>p||(u=y.z0)>_||(h=y.x1)<r||(d=y.y1)<o||(f=y.z1)<a))if(v.length){var S=(l+h)/2,x=(c+d)/2,E=(u+f)/2;m.push(new _s(v[7],S,x,E,h,d,f),new _s(v[6],l,x,E,S,d,f),new _s(v[5],S,c,E,h,x,f),new _s(v[4],l,c,E,S,x,f),new _s(v[3],S,x,u,h,d,E),new _s(v[2],l,x,u,S,d,E),new _s(v[1],S,c,u,h,x,E),new _s(v[0],l,c,u,S,x,E)),(C=(t>=E)<<2|(e>=x)<<1|i>=S)&&(y=m[m.length-1],m[m.length-1]=m[m.length-1-C],m[m.length-1-C]=y)}else{var L=i-+this._x.call(null,v.data),T=e-+this._y.call(null,v.data),D=t-+this._z.call(null,v.data),I=L*L+T*T+D*D;if(I<n){var N=Math.sqrt(n=I);r=i-N,o=e-N,a=t-N,g=i+N,p=e+N,_=t+N,s=v.data}}return s}function Q0t(i){if(isNaN(d=+this._x.call(null,i))||isNaN(f=+this._y.call(null,i))||isNaN(g=+this._z.call(null,i)))return this;var e,t=this._root,n,s,r,o=this._x0,a=this._y0,l=this._z0,c=this._x1,u=this._y1,h=this._z1,d,f,g,p,_,m,v,y,C,S,x;if(!t)return this;if(t.length)for(;;){if((v=d>=(p=(o+c)/2))?o=p:c=p,(y=f>=(_=(a+u)/2))?a=_:u=_,(C=g>=(m=(l+h)/2))?l=m:h=m,e=t,!(t=t[S=C<<2|y<<1|v]))return this;if(!t.length)break;(e[S+1&7]||e[S+2&7]||e[S+3&7]||e[S+4&7]||e[S+5&7]||e[S+6&7]||e[S+7&7])&&(n=e,x=S)}for(;t.data!==i;)if(s=t,!(t=t.next))return this;return(r=t.next)&&delete t.next,s?(r?s.next=r:delete s.next,this):e?(r?e[S]=r:delete e[S],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[x]=t:this._root=t),this):(this._root=r,this)}function J0t(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function evt(){return this._root}function tvt(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function nvt(i){var e=[],t,n=this._root,s,r,o,a,l,c,u;for(n&&e.push(new _s(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,r=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,u=t.z1)&&n.length){var h=(r+l)/2,d=(o+c)/2,f=(a+u)/2;(s=n[7])&&e.push(new _s(s,h,d,f,l,c,u)),(s=n[6])&&e.push(new _s(s,r,d,f,h,c,u)),(s=n[5])&&e.push(new _s(s,h,o,f,l,d,u)),(s=n[4])&&e.push(new _s(s,r,o,f,h,d,u)),(s=n[3])&&e.push(new _s(s,h,d,a,l,c,f)),(s=n[2])&&e.push(new _s(s,r,d,a,h,c,f)),(s=n[1])&&e.push(new _s(s,h,o,a,l,d,f)),(s=n[0])&&e.push(new _s(s,r,o,a,h,d,f))}return this}function ivt(i){var e=[],t=[],n;for(this._root&&e.push(new _s(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var s=n.node;if(s.length){var r,o=n.x0,a=n.y0,l=n.z0,c=n.x1,u=n.y1,h=n.z1,d=(o+c)/2,f=(a+u)/2,g=(l+h)/2;(r=s[0])&&e.push(new _s(r,o,a,l,d,f,g)),(r=s[1])&&e.push(new _s(r,d,a,l,c,f,g)),(r=s[2])&&e.push(new _s(r,o,f,l,d,u,g)),(r=s[3])&&e.push(new _s(r,d,f,l,c,u,g)),(r=s[4])&&e.push(new _s(r,o,a,g,d,f,h)),(r=s[5])&&e.push(new _s(r,d,a,g,c,f,h)),(r=s[6])&&e.push(new _s(r,o,f,g,d,u,h)),(r=s[7])&&e.push(new _s(r,d,f,g,c,u,h))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function svt(i){return i[0]}function rvt(i){return arguments.length?(this._x=i,this):this._x}function ovt(i){return i[1]}function avt(i){return arguments.length?(this._y=i,this):this._y}function lvt(i){return i[2]}function cvt(i){return arguments.length?(this._z=i,this):this._z}function iY(i,e,t,n){var s=new sY(e??svt,t??ovt,n??lvt,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?s:s.addAll(i)}function sY(i,e,t,n,s,r,o,a,l){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=s,this._z0=r,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function kle(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var Ra=iY.prototype=sY.prototype;Ra.copy=function(){var i=new sY(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=kle(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var s=0;s<8;++s)(n=e.source[s])&&(n.length?t.push({source:n,target:e.target[s]=new Array(8)}):e.target[s]=kle(n));return i};Ra.add=j0t;Ra.addAll=K0t;Ra.cover=q0t;Ra.data=X0t;Ra.extent=Y0t;Ra.find=Z0t;Ra.remove=Q0t;Ra.removeAll=J0t;Ra.root=evt;Ra.size=tvt;Ra.visit=nvt;Ra.visitAfter=ivt;Ra.x=rvt;Ra.y=avt;Ra.z=cvt;function Qs(i){return function(){return i}}function lu(i){return(i()-.5)*1e-6}function q6(i){return i.x+i.vx}function Mle(i){return i.y+i.vy}function uvt(i){return i.z+i.vz}function Pbe(i){var e,t,n,s,r=1,o=1;typeof i!="function"&&(i=Qs(i==null?1:+i));function a(){for(var u,h=e.length,d,f,g,p,_,m,v,y=0;y<o;++y)for(d=(t===1?JX(e,q6):t===2?tY(e,q6,Mle):t===3?iY(e,q6,Mle,uvt):null).visitAfter(l),u=0;u<h;++u)f=e[u],m=n[f.index],v=m*m,g=f.x+f.vx,t>1&&(p=f.y+f.vy),t>2&&(_=f.z+f.vz),d.visit(C);function C(S,x,E,L,T,D,I){var N=[x,E,L,T,D,I],P=N[0],O=N[1],V=N[2],z=N[t],K=N[t+1],H=N[t+2],U=S.data,j=S.r,W=m+j;if(U){if(U.index>f.index){var X=g-U.x-U.vx,ee=t>1?p-U.y-U.vy:0,le=t>2?_-U.z-U.vz:0,fe=X*X+ee*ee+le*le;fe<W*W&&(X===0&&(X=lu(s),fe+=X*X),t>1&&ee===0&&(ee=lu(s),fe+=ee*ee),t>2&&le===0&&(le=lu(s),fe+=le*le),fe=(W-(fe=Math.sqrt(fe)))/fe*r,f.vx+=(X*=fe)*(W=(j*=j)/(v+j)),t>1&&(f.vy+=(ee*=fe)*W),t>2&&(f.vz+=(le*=fe)*W),U.vx-=X*(W=1-W),t>1&&(U.vy-=ee*W),t>2&&(U.vz-=le*W))}return}return P>g+W||z<g-W||t>1&&(O>p+W||K<p-W)||t>2&&(V>_+W||H<_-W)}}function l(u){if(u.data)return u.r=n[u.data.index];for(var h=u.r=0;h<Math.pow(2,t);++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function c(){if(e){var u,h=e.length,d;for(n=new Array(h),u=0;u<h;++u)d=e[u],n[d.index]=+i(d,u,e)}}return a.initialize=function(u,...h){e=u,s=h.find(d=>typeof d=="function")||Math.random,t=h.find(d=>[1,2,3].includes(d))||2,c()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(i=typeof u=="function"?u:Qs(+u),c(),a):i},a}function hvt(i){return i.index}function Dle(i,e){var t=i.get(e);if(!t)throw new Error("node not found: "+e);return t}function Obe(i){var e=hvt,t=d,n,s=Qs(30),r,o,a,l,c,u,h=1;i==null&&(i=[]);function d(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function f(m){for(var v=0,y=i.length;v<h;++v)for(var C=0,S,x,E,L=0,T=0,D=0,I,N;C<y;++C)S=i[C],x=S.source,E=S.target,L=E.x+E.vx-x.x-x.vx||lu(u),a>1&&(T=E.y+E.vy-x.y-x.vy||lu(u)),a>2&&(D=E.z+E.vz-x.z-x.vz||lu(u)),I=Math.sqrt(L*L+T*T+D*D),I=(I-r[C])/I*m*n[C],L*=I,T*=I,D*=I,E.vx-=L*(N=c[C]),a>1&&(E.vy-=T*N),a>2&&(E.vz-=D*N),x.vx+=L*(N=1-N),a>1&&(x.vy+=T*N),a>2&&(x.vz+=D*N)}function g(){if(o){var m,v=o.length,y=i.length,C=new Map(o.map((x,E)=>[e(x,E,o),x])),S;for(m=0,l=new Array(v);m<y;++m)S=i[m],S.index=m,typeof S.source!="object"&&(S.source=Dle(C,S.source)),typeof S.target!="object"&&(S.target=Dle(C,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(m=0,c=new Array(y);m<y;++m)S=i[m],c[m]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);n=new Array(y),p(),r=new Array(y),_()}}function p(){if(o)for(var m=0,v=i.length;m<v;++m)n[m]=+t(i[m],m,i)}function _(){if(o)for(var m=0,v=i.length;m<v;++m)r[m]=+s(i[m],m,i)}return f.initialize=function(m,...v){o=m,u=v.find(y=>typeof y=="function")||Math.random,a=v.find(y=>[1,2,3].includes(y))||2,g()},f.links=function(m){return arguments.length?(i=m,g(),f):i},f.id=function(m){return arguments.length?(e=m,f):e},f.iterations=function(m){return arguments.length?(h=+m,f):h},f.strength=function(m){return arguments.length?(t=typeof m=="function"?m:Qs(+m),p(),f):t},f.distance=function(m){return arguments.length?(s=typeof m=="function"?m:Qs(+m),_(),f):s},f}var dvt={value:()=>{}};function Fbe(){for(var i=0,e=arguments.length,t={},n;i<e;++i){if(!(n=arguments[i]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new sN(t)}function sN(i){this._=i}function fvt(i,e){return i.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}sN.prototype=Fbe.prototype={constructor:sN,on:function(i,e){var t=this._,n=fvt(i+"",t),s,r=-1,o=n.length;if(arguments.length<2){for(;++r<o;)if((s=(i=n[r]).type)&&(s=gvt(t[s],i.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<o;)if(s=(i=n[r]).type)t[s]=Ale(t[s],i.name,e);else if(e==null)for(s in t)t[s]=Ale(t[s],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new sN(i)},call:function(i,e){if((s=arguments.length-2)>0)for(var t=new Array(s),n=0,s,r;n<s;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(r=this._[i],n=0,s=r.length;n<s;++n)r[n].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],s=0,r=n.length;s<r;++s)n[s].value.apply(e,t)}};function gvt(i,e){for(var t=0,n=i.length,s;t<n;++t)if((s=i[t]).name===e)return s.value}function Ale(i,e,t){for(var n=0,s=i.length;n<s;++n)if(i[n].name===e){i[n]=dvt,i=i.slice(0,n).concat(i.slice(n+1));break}return t!=null&&i.push({name:e,value:t}),i}var pC=0,SE=0,Ix=0,Bbe=1e3,$P,xE,GP=0,Wv=0,I5=0,CT=typeof performance=="object"&&performance.now?performance:Date,zbe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Ube(){return Wv||(zbe(pvt),Wv=CT.now()+I5)}function pvt(){Wv=0}function h$(){this._call=this._time=this._next=null}h$.prototype=Vbe.prototype={constructor:h$,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?Ube():+t)+(e==null?0:+e),!this._next&&xE!==this&&(xE?xE._next=this:$P=this,xE=this),this._call=i,this._time=t,d$()},stop:function(){this._call&&(this._call=null,this._time=1/0,d$())}};function Vbe(i,e,t){var n=new h$;return n.restart(i,e,t),n}function mvt(){Ube(),++pC;for(var i=$P,e;i;)(e=Wv-i._time)>=0&&i._call.call(void 0,e),i=i._next;--pC}function Ile(){Wv=(GP=CT.now())+I5,pC=SE=0;try{mvt()}finally{pC=0,vvt(),Wv=0}}function _vt(){var i=CT.now(),e=i-GP;e>Bbe&&(I5-=e,GP=i)}function vvt(){for(var i,e=$P,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:$P=t);xE=i,d$(n)}function d$(i){if(!pC){SE&&(SE=clearTimeout(SE));var e=i-Wv;e>24?(i<1/0&&(SE=setTimeout(Ile,i-CT.now()-I5)),Ix&&(Ix=clearInterval(Ix))):(Ix||(GP=CT.now(),Ix=setInterval(_vt,Bbe)),pC=1,zbe(Ile))}}const yvt=1664525,bvt=1013904223,Nle=4294967296;function wvt(){let i=1;return()=>(i=(yvt*i+bvt)%Nle)/Nle}var Rle=3;function X6(i){return i.x}function Ple(i){return i.y}function Cvt(i){return i.z}var Svt=10,xvt=Math.PI*(3-Math.sqrt(5)),Evt=Math.PI*20/(9+Math.sqrt(221));function Wbe(i,e){e=e||2;var t=Math.min(Rle,Math.max(1,Math.round(e))),n,s=1,r=.001,o=1-Math.pow(r,1/300),a=0,l=.6,c=new Map,u=Vbe(f),h=Fbe("tick","end"),d=wvt();i==null&&(i=[]);function f(){g(),h.call("tick",n),s<r&&(u.stop(),h.call("end",n))}function g(m){var v,y=i.length,C;m===void 0&&(m=1);for(var S=0;S<m;++S)for(s+=(a-s)*o,c.forEach(function(x){x(s)}),v=0;v<y;++v)C=i[v],C.fx==null?C.x+=C.vx*=l:(C.x=C.fx,C.vx=0),t>1&&(C.fy==null?C.y+=C.vy*=l:(C.y=C.fy,C.vy=0)),t>2&&(C.fz==null?C.z+=C.vz*=l:(C.z=C.fz,C.vz=0));return n}function p(){for(var m=0,v=i.length,y;m<v;++m){if(y=i[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),y.fz!=null&&(y.z=y.fz),isNaN(y.x)||t>1&&isNaN(y.y)||t>2&&isNaN(y.z)){var C=Svt*(t>2?Math.cbrt(.5+m):t>1?Math.sqrt(.5+m):m),S=m*xvt,x=m*Evt;t===1?y.x=C:t===2?(y.x=C*Math.cos(S),y.y=C*Math.sin(S)):(y.x=C*Math.sin(S)*Math.cos(x),y.y=C*Math.cos(S),y.z=C*Math.sin(S)*Math.sin(x))}(isNaN(y.vx)||t>1&&isNaN(y.vy)||t>2&&isNaN(y.vz))&&(y.vx=0,t>1&&(y.vy=0),t>2&&(y.vz=0))}}function _(m){return m.initialize&&m.initialize(i,d,t),m}return p(),n={tick:g,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(m){return arguments.length?(t=Math.min(Rle,Math.max(1,Math.round(m))),c.forEach(_),n):t},nodes:function(m){return arguments.length?(i=m,p(),c.forEach(_),n):i},alpha:function(m){return arguments.length?(s=+m,n):s},alphaMin:function(m){return arguments.length?(r=+m,n):r},alphaDecay:function(m){return arguments.length?(o=+m,n):+o},alphaTarget:function(m){return arguments.length?(a=+m,n):a},velocityDecay:function(m){return arguments.length?(l=1-m,n):1-l},randomSource:function(m){return arguments.length?(d=m,c.forEach(_),n):d},force:function(m,v){return arguments.length>1?(v==null?c.delete(m):c.set(m,_(v)),n):c.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),v=m.shift()||0,y=(t>1?m.shift():null)||0,C=(t>2?m.shift():null)||0,S=m.shift()||1/0,x=0,E=i.length,L,T,D,I,N,P;for(S*=S,x=0;x<E;++x)N=i[x],L=v-N.x,T=y-(N.y||0),D=C-(N.z||0),I=L*L+T*T+D*D,I<S&&(P=N,S=I);return P},on:function(m,v){return arguments.length>1?(h.on(m,v),n):h.on(m)}}}function Hbe(){var i,e,t,n,s,r=Qs(-30),o,a=1,l=1/0,c=.81;function u(g){var p,_=i.length,m=(e===1?JX(i,X6):e===2?tY(i,X6,Ple):e===3?iY(i,X6,Ple,Cvt):null).visitAfter(d);for(s=g,p=0;p<_;++p)t=i[p],m.visit(f)}function h(){if(i){var g,p=i.length,_;for(o=new Array(p),g=0;g<p;++g)_=i[g],o[_.index]=+r(_,g,i)}}function d(g){var p=0,_,m,v=0,y,C,S,x,E=g.length;if(E){for(y=C=S=x=0;x<E;++x)(_=g[x])&&(m=Math.abs(_.value))&&(p+=_.value,v+=m,y+=m*(_.x||0),C+=m*(_.y||0),S+=m*(_.z||0));p*=Math.sqrt(4/E),g.x=y/v,e>1&&(g.y=C/v),e>2&&(g.z=S/v)}else{_=g,_.x=_.data.x,e>1&&(_.y=_.data.y),e>2&&(_.z=_.data.z);do p+=o[_.data.index];while(_=_.next)}g.value=p}function f(g,p,_,m,v){if(!g.value)return!0;var y=[_,m,v][e-1],C=g.x-t.x,S=e>1?g.y-t.y:0,x=e>2?g.z-t.z:0,E=y-p,L=C*C+S*S+x*x;if(E*E/c<L)return L<l&&(C===0&&(C=lu(n),L+=C*C),e>1&&S===0&&(S=lu(n),L+=S*S),e>2&&x===0&&(x=lu(n),L+=x*x),L<a&&(L=Math.sqrt(a*L)),t.vx+=C*g.value*s/L,e>1&&(t.vy+=S*g.value*s/L),e>2&&(t.vz+=x*g.value*s/L)),!0;if(g.length||L>=l)return;(g.data!==t||g.next)&&(C===0&&(C=lu(n),L+=C*C),e>1&&S===0&&(S=lu(n),L+=S*S),e>2&&x===0&&(x=lu(n),L+=x*x),L<a&&(L=Math.sqrt(a*L)));do g.data!==t&&(E=o[g.data.index]*s/L,t.vx+=C*E,e>1&&(t.vy+=S*E),e>2&&(t.vz+=x*E));while(g=g.next)}return u.initialize=function(g,...p){i=g,n=p.find(_=>typeof _=="function")||Math.random,e=p.find(_=>[1,2,3].includes(_))||2,h()},u.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Qs(+g),h(),u):r},u.distanceMin=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.distanceMax=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u.theta=function(g){return arguments.length?(c=g*g,u):Math.sqrt(c)},u}function Lvt(i,e,t,n){var s,r,o=Qs(.1),a,l;typeof i!="function"&&(i=Qs(+i)),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);function c(h){for(var d=0,f=s.length;d<f;++d){var g=s[d],p=g.x-e||1e-6,_=(g.y||0)-t||1e-6,m=(g.z||0)-n||1e-6,v=Math.sqrt(p*p+_*_+m*m),y=(l[d]-v)*a[d]*h/v;g.vx+=p*y,r>1&&(g.vy+=_*y),r>2&&(g.vz+=m*y)}}function u(){if(s){var h,d=s.length;for(a=new Array(d),l=new Array(d),h=0;h<d;++h)l[h]=+i(s[h],h,s),a[h]=isNaN(l[h])?0:+o(s[h],h,s)}}return c.initialize=function(h,...d){s=h,r=d.find(f=>[1,2,3].includes(f))||2,u()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:Qs(+h),u(),c):o},c.radius=function(h){return arguments.length?(i=typeof h=="function"?h:Qs(+h),u(),c):i},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(t=+h,c):t},c.z=function(h){return arguments.length?(n=+h,c):n},c}function f$(i){var e=Qs(.1),t,n,s;typeof i!="function"&&(i=Qs(i==null?0:+i));function r(a){for(var l=0,c=t.length,u;l<c;++l)u=t[l],u.vx+=(s[l]-u.x)*n[l]*a}function o(){if(t){var a,l=t.length;for(n=new Array(l),s=new Array(l),a=0;a<l;++a)n[a]=isNaN(s[a]=+i(t[a],a,t))?0:+e(t[a],a,t)}}return r.initialize=function(a){t=a,o()},r.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Qs(+a),o(),r):e},r.x=function(a){return arguments.length?(i=typeof a=="function"?a:Qs(+a),o(),r):i},r}function g$(i){var e=Qs(.1),t,n,s;typeof i!="function"&&(i=Qs(i==null?0:+i));function r(a){for(var l=0,c=t.length,u;l<c;++l)u=t[l],u.vy+=(s[l]-u.y)*n[l]*a}function o(){if(t){var a,l=t.length;for(n=new Array(l),s=new Array(l),a=0;a<l;++a)n[a]=isNaN(s[a]=+i(t[a],a,t))?0:+e(t[a],a,t)}}return r.initialize=function(a){t=a,o()},r.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Qs(+a),o(),r):e},r.y=function(a){return arguments.length?(i=typeof a=="function"?a:Qs(+a),o(),r):i},r}function Tvt(i){var e=Qs(.1),t,n,s;typeof i!="function"&&(i=Qs(i==null?0:+i));function r(a){for(var l=0,c=t.length,u;l<c;++l)u=t[l],u.vz+=(s[l]-u.z)*n[l]*a}function o(){if(t){var a,l=t.length;for(n=new Array(l),s=new Array(l),a=0;a<l;++a)n[a]=isNaN(s[a]=+i(t[a],a,t))?0:+e(t[a],a,t)}}return r.initialize=function(a){t=a,o()},r.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Qs(+a),o(),r):e},r.z=function(a){return arguments.length?(i=typeof a=="function"?a:Qs(+a),o(),r):i},r}function kvt(i){var e=0,t=i.children,n=t&&t.length;if(!n)e=1;else for(;--n>=0;)e+=t[n].value;i.value=e}function Mvt(){return this.eachAfter(kvt)}function Dvt(i,e){let t=-1;for(const n of this)i.call(e,n,++t,this);return this}function Avt(i,e){for(var t=this,n=[t],s,r,o=-1;t=n.pop();)if(i.call(e,t,++o,this),s=t.children)for(r=s.length-1;r>=0;--r)n.push(s[r]);return this}function Ivt(i,e){for(var t=this,n=[t],s=[],r,o,a,l=-1;t=n.pop();)if(s.push(t),r=t.children)for(o=0,a=r.length;o<a;++o)n.push(r[o]);for(;t=s.pop();)i.call(e,t,++l,this);return this}function Nvt(i,e){let t=-1;for(const n of this)if(i.call(e,n,++t,this))return n}function Rvt(i){return this.eachAfter(function(e){for(var t=+i(e.data)||0,n=e.children,s=n&&n.length;--s>=0;)t+=n[s].value;e.value=t})}function Pvt(i){return this.eachBefore(function(e){e.children&&e.children.sort(i)})}function Ovt(i){for(var e=this,t=Fvt(e,i),n=[e];e!==t;)e=e.parent,n.push(e);for(var s=n.length;i!==t;)n.splice(s,0,i),i=i.parent;return n}function Fvt(i,e){if(i===e)return i;var t=i.ancestors(),n=e.ancestors(),s=null;for(i=t.pop(),e=n.pop();i===e;)s=i,i=t.pop(),e=n.pop();return s}function Bvt(){for(var i=this,e=[i];i=i.parent;)e.push(i);return e}function zvt(){return Array.from(this)}function Uvt(){var i=[];return this.eachBefore(function(e){e.children||i.push(e)}),i}function Vvt(){var i=this,e=[];return i.each(function(t){t!==i&&e.push({source:t.parent,target:t})}),e}function*Wvt(){var i=this,e,t=[i],n,s,r;do for(e=t.reverse(),t=[];i=e.pop();)if(yield i,n=i.children)for(s=0,r=n.length;s<r;++s)t.push(n[s]);while(t.length)}function N5(i,e){i instanceof Map?(i=[void 0,i],e===void 0&&(e=Gvt)):e===void 0&&(e=$vt);for(var t=new mC(i),n,s=[t],r,o,a,l;n=s.pop();)if((o=e(n.data))&&(l=(o=Array.from(o)).length))for(n.children=o,a=l-1;a>=0;--a)s.push(r=o[a]=new mC(o[a])),r.parent=n,r.depth=n.depth+1;return t.eachBefore($be)}function Hvt(){return N5(this).eachBefore(jvt)}function $vt(i){return i.children}function Gvt(i){return Array.isArray(i)?i[1]:null}function jvt(i){i.data.value!==void 0&&(i.value=i.data.value),i.data=i.data.data}function $be(i){var e=0;do i.height=e;while((i=i.parent)&&i.height<++e)}function mC(i){this.data=i,this.depth=this.height=0,this.parent=null}mC.prototype=N5.prototype={constructor:mC,count:Mvt,each:Dvt,eachAfter:Ivt,eachBefore:Avt,find:Nvt,sum:Rvt,sort:Pvt,path:Ovt,ancestors:Bvt,descendants:zvt,leaves:Uvt,links:Vvt,copy:Hvt,[Symbol.iterator]:Wvt};function Y6(i){return i==null?null:Gbe(i)}function Gbe(i){if(typeof i!="function")throw new Error;return i}function Nx(){return 0}function Rx(i){return function(){return i}}function Kvt(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function qvt(i,e,t,n,s){for(var r=i.children,o,a=-1,l=r.length,c=i.value&&(n-e)/i.value;++a<l;)o=r[a],o.y0=t,o.y1=s,o.x0=e,o.x1=e+=o.value*c}var Xvt={depth:-1},Ole={},Z6={};function Yvt(i){return i.id}function Zvt(i){return i.parentId}function Qvt(){var i=Yvt,e=Zvt,t;function n(s){var r=Array.from(s),o=i,a=e,l,c,u,h,d,f,g,p,_=new Map;if(t!=null){const m=r.map((C,S)=>Jvt(t(C,S,s))),v=m.map(Fle),y=new Set(m).add("");for(const C of v)y.has(C)||(y.add(C),m.push(C),v.push(Fle(C)),r.push(Z6));o=(C,S)=>m[S],a=(C,S)=>v[S]}for(u=0,l=r.length;u<l;++u)c=r[u],f=r[u]=new mC(c),(g=o(c,u,s))!=null&&(g+="")&&(p=f.id=g,_.set(p,_.has(p)?Ole:f)),(g=a(c,u,s))!=null&&(g+="")&&(f.parent=g);for(u=0;u<l;++u)if(f=r[u],g=f.parent){if(d=_.get(g),!d)throw new Error("missing: "+g);if(d===Ole)throw new Error("ambiguous: "+g);d.children?d.children.push(f):d.children=[f],f.parent=d}else{if(h)throw new Error("multiple roots");h=f}if(!h)throw new Error("no root");if(t!=null){for(;h.data===Z6&&h.children.length===1;)h=h.children[0],--l;for(let m=r.length-1;m>=0&&(f=r[m],f.data===Z6);--m)f.data=null}if(h.parent=Xvt,h.eachBefore(function(m){m.depth=m.parent.depth+1,--l}).eachBefore($be),h.parent=null,l>0)throw new Error("cycle");return h}return n.id=function(s){return arguments.length?(i=Y6(s),n):i},n.parentId=function(s){return arguments.length?(e=Y6(s),n):e},n.path=function(s){return arguments.length?(t=Y6(s),n):t},n}function Jvt(i){i=`${i}`;let e=i.length;return p$(i,e-1)&&!p$(i,e-2)&&(i=i.slice(0,-1)),i[0]==="/"?i:`/${i}`}function Fle(i){let e=i.length;if(e<2)return"";for(;--e>1&&!p$(i,e););return i.slice(0,e)}function p$(i,e){if(i[e]==="/"){let t=0;for(;e>0&&i[--e]==="\\";)++t;if(!(t&1))return!0}return!1}function e1t(i,e){return i.parent===e.parent?1:2}function Q6(i){var e=i.children;return e?e[0]:i.t}function J6(i){var e=i.children;return e?e[e.length-1]:i.t}function t1t(i,e,t){var n=t/(e.i-i.i);e.c-=n,e.s+=t,i.c+=n,e.z+=t,e.m+=t}function n1t(i){for(var e=0,t=0,n=i.children,s=n.length,r;--s>=0;)r=n[s],r.z+=e,r.m+=e,e+=r.s+(t+=r.c)}function i1t(i,e,t){return i.a.parent===e.parent?i.a:t}function rN(i,e){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}rN.prototype=Object.create(mC.prototype);function s1t(i){for(var e=new rN(i,0),t,n=[e],s,r,o,a;t=n.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),o=a-1;o>=0;--o)n.push(s=t.children[o]=new rN(r[o],o)),s.parent=t;return(e.parent=new rN(null,0)).children=[e],e}function r1t(){var i=e1t,e=1,t=1,n=null;function s(c){var u=s1t(c);if(u.eachAfter(r),u.parent.m=-u.z,u.eachBefore(o),n)c.eachBefore(l);else{var h=c,d=c,f=c;c.eachBefore(function(v){v.x<h.x&&(h=v),v.x>d.x&&(d=v),v.depth>f.depth&&(f=v)});var g=h===d?1:i(h,d)/2,p=g-h.x,_=e/(d.x+g+p),m=t/(f.depth||1);c.eachBefore(function(v){v.x=(v.x+p)*_,v.y=v.depth*m})}return c}function r(c){var u=c.children,h=c.parent.children,d=c.i?h[c.i-1]:null;if(u){n1t(c);var f=(u[0].z+u[u.length-1].z)/2;d?(c.z=d.z+i(c._,d._),c.m=c.z-f):c.z=f}else d&&(c.z=d.z+i(c._,d._));c.parent.A=a(c,d,c.parent.A||h[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,u,h){if(u){for(var d=c,f=c,g=u,p=d.parent.children[0],_=d.m,m=f.m,v=g.m,y=p.m,C;g=J6(g),d=Q6(d),g&&d;)p=Q6(p),f=J6(f),f.a=c,C=g.z+v-d.z-_+i(g._,d._),C>0&&(t1t(i1t(g,c,h),c,C),_+=C,m+=C),v+=g.m,_+=d.m,y+=p.m,m+=f.m;g&&!J6(f)&&(f.t=g,f.m+=v-m),d&&!Q6(p)&&(p.t=d,p.m+=_-y,h=c)}return h}function l(c){c.x*=e,c.y=c.depth*t}return s.separation=function(c){return arguments.length?(i=c,s):i},s.size=function(c){return arguments.length?(n=!1,e=+c[0],t=+c[1],s):n?null:[e,t]},s.nodeSize=function(c){return arguments.length?(n=!0,e=+c[0],t=+c[1],s):n?[e,t]:null},s}function o1t(i,e,t,n,s){for(var r=i.children,o,a=-1,l=r.length,c=i.value&&(s-t)/i.value;++a<l;)o=r[a],o.x0=e,o.x1=n,o.y0=t,o.y1=t+=o.value*c}var a1t=(1+Math.sqrt(5))/2;function l1t(i,e,t,n,s,r){for(var o=[],a=e.children,l,c,u=0,h=0,d=a.length,f,g,p=e.value,_,m,v,y,C,S,x;u<d;){f=s-t,g=r-n;do _=a[h++].value;while(!_&&h<d);for(m=v=_,S=Math.max(g/f,f/g)/(p*i),x=_*_*S,C=Math.max(v/x,x/m);h<d;++h){if(_+=c=a[h].value,c<m&&(m=c),c>v&&(v=c),x=_*_*S,y=Math.max(v/x,x/m),y>C){_-=c;break}C=y}o.push(l={value:_,dice:f<g,children:a.slice(u,h)}),l.dice?qvt(l,t,n,s,p?n+=g*_/p:r):o1t(l,t,n,p?t+=f*_/p:s,r),p-=_,u=h}return o}const c1t=function i(e){function t(n,s,r,o,a){l1t(e,n,s,r,o,a)}return t.ratio=function(n){return i((n=+n)>1?n:1)},t}(a1t);function u1t(){var i=c1t,e=!1,t=1,n=1,s=[0],r=Nx,o=Nx,a=Nx,l=Nx,c=Nx;function u(d){return d.x0=d.y0=0,d.x1=t,d.y1=n,d.eachBefore(h),s=[0],e&&d.eachBefore(Kvt),d}function h(d){var f=s[d.depth],g=d.x0+f,p=d.y0+f,_=d.x1-f,m=d.y1-f;_<g&&(g=_=(g+_)/2),m<p&&(p=m=(p+m)/2),d.x0=g,d.y0=p,d.x1=_,d.y1=m,d.children&&(f=s[d.depth+1]=r(d)/2,g+=c(d)-f,p+=o(d)-f,_-=a(d)-f,m-=l(d)-f,_<g&&(g=_=(g+_)/2),m<p&&(p=m=(p+m)/2),i(d,g,p,_,m))}return u.round=function(d){return arguments.length?(e=!!d,u):e},u.size=function(d){return arguments.length?(t=+d[0],n=+d[1],u):[t,n]},u.tile=function(d){return arguments.length?(i=Gbe(d),u):i},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(r=typeof d=="function"?d:Rx(+d),u):r},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Rx(+d),u):o},u.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Rx(+d),u):a},u.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Rx(+d),u):l},u.paddingLeft=function(d){return arguments.length?(c=typeof d=="function"?d:Rx(+d),u):c},u}function h1t(i){return!i||typeof i!="object"||typeof i=="function"||Array.isArray(i)||i instanceof Set||i instanceof Map||i instanceof RegExp||i instanceof Date}function jbe(i,e){i=i||{};var t={};for(var n in e){var s=i[n],r=e[n];if(!h1t(r)){t[n]=jbe(s,r);continue}s===void 0?t[n]=r:t[n]=s}return t}var rY=jbe,qg=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},d1t=rY,f1t=qg,g1t={dimensions:["x","y"],center:.5,scale:1};function Kbe(i,e,t){if(!f1t(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");t=d1t(t,g1t);var n=t.dimensions;if(!Array.isArray(n)||n.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=t.center,r=t.scale,o=Math.PI*2,a=(s-.5)*r,l=e.order,c=n[0],u=n[1];function h(g,p){return p[c]=r*Math.cos(g*o/l)+a,p[u]=r*Math.sin(g*o/l)+a,p}var d=0;if(!i){var f={};return e.forEachNode(function(g){f[g]=h(d++,{})}),f}e.updateEachNodeAttributes(function(g,p){return h(d++,p),p},{attributes:n})}var qbe=Kbe.bind(null,!1);qbe.assign=Kbe.bind(null,!0);var p1t=qbe;const m1t=Mi(p1t);var Px=0,Ox=1,UA=2,Fx=3;function _1t(i,e){return i+"§"+e}function Ble(){return .01*(.5-Math.random())}var v1t=function(e,t){var n=e.margin,s=e.ratio,r=e.expansion,o=e.gridSize,a=e.speed,l,c,u,h,d,f,g=!0,p=t.length,_=p/Fx|0,m=new Float32Array(_),v=new Float32Array(_),y=1/0,C=1/0,S=-1/0,x=-1/0;for(l=0;l<p;l+=Fx)u=t[l+Px],h=t[l+Ox],f=t[l+UA]*s+n,y=Math.min(y,u-f),S=Math.max(S,u+f),C=Math.min(C,h-f),x=Math.max(x,h+f);var E=S-y,L=x-C,T=(y+S)/2,D=(C+x)/2;y=T-r*E/2,S=T+r*E/2,C=D-r*L/2,x=D+r*L/2;var I=new Array(o*o),N=I.length,P;for(P=0;P<N;P++)I[P]=[];var O,V,z,K,H,U,j,W,X,ee;for(l=0;l<p;l+=Fx)for(u=t[l+Px],h=t[l+Ox],f=t[l+UA]*s+n,O=u-f,V=u+f,z=h-f,K=h+f,H=Math.floor(o*(O-y)/(S-y)),U=Math.floor(o*(V-y)/(S-y)),j=Math.floor(o*(z-C)/(x-C)),W=Math.floor(o*(K-C)/(x-C)),X=H;X<=U;X++)for(ee=j;ee<=W;ee++)I[X*o+ee].push(l);var le,fe=new Set,be,ye,xe,He,qe,ke,q,Ee,De,Ae,Me,Je,Pe;for(P=0;P<N;P++)for(le=I[P],l=0,d=le.length;l<d;l++)for(be=le[l],xe=t[be+Px],qe=t[be+Ox],q=t[be+UA],c=l+1;c<d;c++)ye=le[c],De=_1t(be,ye),!(N>1&&fe.has(De))&&(N>1&&fe.add(De),He=t[ye+Px],ke=t[ye+Ox],Ee=t[ye+UA],Ae=He-xe,Me=ke-qe,Je=Math.sqrt(Ae*Ae+Me*Me),Pe=Je<q*s+n+(Ee*s+n),Pe&&(g=!1,ye=ye/Fx|0,Je>0?(m[ye]+=Ae/Je*(1+q),v[ye]+=Me/Je*(1+q)):(m[ye]+=E*Ble(),v[ye]+=L*Ble())));for(l=0,c=0;l<p;l+=Fx,c++)t[l+Px]+=m[c]*.1*a,t[l+Ox]+=v[c]*.1*a;return{converged:g}},sS={},jP=3;sS.validateSettings=function(i){return"gridSize"in i&&typeof i.gridSize!="number"||i.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in i&&typeof i.margin!="number"||i.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in i&&typeof i.expansion!="number"||i.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in i&&typeof i.ratio!="number"||i.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in i&&typeof i.speed!="number"||i.speed<=0?{message:"the `speed` setting should be a positive number."}:null};sS.graphToByteArray=function(i,e){var t=i.order,n=new Float32Array(t*jP),s=0;return i.forEachNode(function(r,o){typeof e=="function"&&(o=e(r,o)),n[s]=o.x,n[s+1]=o.y,n[s+2]=o.size||1,s+=jP}),n};sS.assignLayoutChanges=function(i,e,t){var n=0;i.forEachNode(function(s){var r={x:e[n],y:e[n+1]};typeof t=="function"&&(r=t(s,r)),i.mergeNodeAttributes(s,r),n+=jP})};sS.collectLayoutChanges=function(i,e,t){var n={},s=0;return i.forEachNode(function(r){var o={x:e[s],y:e[s+1]};typeof t=="function"&&(o=t(r,o)),n[r]=o,s+=jP}),n};sS.createWorker=function(e){var t=window.URL||window.webkitURL,n=e.toString(),s=t.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),r=new Worker(s);return t.revokeObjectURL(s),r};var y1t={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3},b1t=qg,w1t=v1t,VA=sS,C1t=y1t,S1t=500;function Xbe(i,e,t){if(!b1t(e))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof t=="number"?t={maxIterations:t}:t=t||{};var n=t.maxIterations||S1t;if(typeof n!="number"||n<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var s=Object.assign({},C1t,t.settings),r=VA.validateSettings(s);if(r)throw new Error("graphology-layout-noverlap: "+r.message);var o=VA.graphToByteArray(e,t.inputReducer),a=!1,l;for(l=0;l<n&&!a;l++)a=w1t(s,o).converged;if(i){VA.assignLayoutChanges(e,o,t.outputReducer);return}return VA.collectLayoutChanges(e,o,t.outputReducer)}var Ybe=Xbe.bind(null,!1);Ybe.assign=Xbe.bind(null,!0);var x1t=Ybe;const E1t=Mi(x1t);var C1={};function L1t(i){return typeof i!="number"||isNaN(i)?1:i}function T1t(i,e){var t={},n=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(n=e);var s=function(o){return n(o[i])},r=function(){return n(void 0)};return typeof i=="string"?(t.fromAttributes=s,t.fromGraph=function(o,a){return s(o.getNodeAttributes(a))},t.fromEntry=function(o,a){return s(a)}):typeof i=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){return n(i(a,o.getNodeAttributes(a)))},t.fromEntry=function(o,a){return n(i(o,a))}):(t.fromAttributes=r,t.fromGraph=r,t.fromEntry=r),t}function Zbe(i,e){var t={},n=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(n=e);var s=function(o){return n(o[i])},r=function(){return n(void 0)};return typeof i=="string"?(t.fromAttributes=s,t.fromGraph=function(o,a){return s(o.getEdgeAttributes(a))},t.fromEntry=function(o,a){return s(a)},t.fromPartialEntry=t.fromEntry,t.fromMinimalEntry=t.fromEntry):typeof i=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){var l=o.extremities(a);return n(i(a,o.getEdgeAttributes(a),l[0],l[1],o.getNodeAttributes(l[0]),o.getNodeAttributes(l[1]),o.isUndirected(a)))},t.fromEntry=function(o,a,l,c,u,h,d){return n(i(o,a,l,c,u,h,d))},t.fromPartialEntry=function(o,a,l,c){return n(i(o,a,l,c))},t.fromMinimalEntry=function(o,a){return n(i(o,a))}):(t.fromAttributes=r,t.fromGraph=r,t.fromEntry=r,t.fromMinimalEntry=r),t}C1.createNodeValueGetter=T1t;C1.createEdgeValueGetter=Zbe;C1.createEdgeWeightGetter=function(i){return Zbe(i,L1t)};var Vr=0,Ws=1,Vi=2,Wi=3,xf=4,Ef=5,ji=6,zle=7,WA=8,Ule=9,k1t=0,M1t=1,D1t=2,xo=0,$c=1,Ga=2,I_=3,mp=4,lr=5,bl=6,Qh=7,Jh=8,Vle=3,$u=10,A1t=3,ga=9,e7=10,I1t=function(e,t,n){var s,r,o,a,l,c,u,h,d,f,g=t.length,p=n.length,_=e.adjustSizes,m=e.barnesHutTheta*e.barnesHutTheta,v,y,C,S,x,E,L,T=[];for(o=0;o<g;o+=$u)t[o+xf]=t[o+Vi],t[o+Ef]=t[o+Wi],t[o+Vi]=0,t[o+Wi]=0;if(e.outboundAttractionDistribution){for(v=0,o=0;o<g;o+=$u)v+=t[o+ji];v/=g/$u}if(e.barnesHutOptimize){var D=1/0,I=-1/0,N=1/0,P=-1/0,O,V,z;for(o=0;o<g;o+=$u)D=Math.min(D,t[o+Vr]),I=Math.max(I,t[o+Vr]),N=Math.min(N,t[o+Ws]),P=Math.max(P,t[o+Ws]);var K=I-D,H=P-N;for(K>H?(N-=(K-H)/2,P=N+K):(D-=(H-K)/2,I=D+H),T[0+xo]=-1,T[0+$c]=(D+I)/2,T[0+Ga]=(N+P)/2,T[0+I_]=Math.max(I-D,P-N),T[0+mp]=-1,T[0+lr]=-1,T[0+bl]=0,T[0+Qh]=0,T[0+Jh]=0,s=1,o=0;o<g;o+=$u)for(r=0,z=Vle;;)if(T[r+lr]>=0){t[o+Vr]<T[r+$c]?t[o+Ws]<T[r+Ga]?O=T[r+lr]:O=T[r+lr]+ga:t[o+Ws]<T[r+Ga]?O=T[r+lr]+ga*2:O=T[r+lr]+ga*3,T[r+Qh]=(T[r+Qh]*T[r+bl]+t[o+Vr]*t[o+ji])/(T[r+bl]+t[o+ji]),T[r+Jh]=(T[r+Jh]*T[r+bl]+t[o+Ws]*t[o+ji])/(T[r+bl]+t[o+ji]),T[r+bl]+=t[o+ji],r=O;continue}else if(T[r+xo]<0){T[r+xo]=o;break}else{if(T[r+lr]=s*ga,h=T[r+I_]/2,d=T[r+lr],T[d+xo]=-1,T[d+$c]=T[r+$c]-h,T[d+Ga]=T[r+Ga]-h,T[d+I_]=h,T[d+mp]=d+ga,T[d+lr]=-1,T[d+bl]=0,T[d+Qh]=0,T[d+Jh]=0,d+=ga,T[d+xo]=-1,T[d+$c]=T[r+$c]-h,T[d+Ga]=T[r+Ga]+h,T[d+I_]=h,T[d+mp]=d+ga,T[d+lr]=-1,T[d+bl]=0,T[d+Qh]=0,T[d+Jh]=0,d+=ga,T[d+xo]=-1,T[d+$c]=T[r+$c]+h,T[d+Ga]=T[r+Ga]-h,T[d+I_]=h,T[d+mp]=d+ga,T[d+lr]=-1,T[d+bl]=0,T[d+Qh]=0,T[d+Jh]=0,d+=ga,T[d+xo]=-1,T[d+$c]=T[r+$c]+h,T[d+Ga]=T[r+Ga]+h,T[d+I_]=h,T[d+mp]=T[r+mp],T[d+lr]=-1,T[d+bl]=0,T[d+Qh]=0,T[d+Jh]=0,s+=4,t[T[r+xo]+Vr]<T[r+$c]?t[T[r+xo]+Ws]<T[r+Ga]?O=T[r+lr]:O=T[r+lr]+ga:t[T[r+xo]+Ws]<T[r+Ga]?O=T[r+lr]+ga*2:O=T[r+lr]+ga*3,T[r+bl]=t[T[r+xo]+ji],T[r+Qh]=t[T[r+xo]+Vr],T[r+Jh]=t[T[r+xo]+Ws],T[O+xo]=T[r+xo],T[r+xo]=-1,t[o+Vr]<T[r+$c]?t[o+Ws]<T[r+Ga]?V=T[r+lr]:V=T[r+lr]+ga:t[o+Ws]<T[r+Ga]?V=T[r+lr]+ga*2:V=T[r+lr]+ga*3,O===V)if(z--){r=O;continue}else{z=Vle;break}T[V+xo]=o;break}}if(e.barnesHutOptimize)for(y=e.scalingRatio,o=0;o<g;o+=$u)for(r=0;;)if(T[r+lr]>=0)if(E=Math.pow(t[o+Vr]-T[r+Qh],2)+Math.pow(t[o+Ws]-T[r+Jh],2),f=T[r+I_],4*f*f/E<m){if(C=t[o+Vr]-T[r+Qh],S=t[o+Ws]-T[r+Jh],_===!0?E>0?(L=y*t[o+ji]*T[r+bl]/E,t[o+Vi]+=C*L,t[o+Wi]+=S*L):E<0&&(L=-y*t[o+ji]*T[r+bl]/Math.sqrt(E),t[o+Vi]+=C*L,t[o+Wi]+=S*L):E>0&&(L=y*t[o+ji]*T[r+bl]/E,t[o+Vi]+=C*L,t[o+Wi]+=S*L),r=T[r+mp],r<0)break;continue}else{r=T[r+lr];continue}else{if(c=T[r+xo],c>=0&&c!==o&&(C=t[o+Vr]-t[c+Vr],S=t[o+Ws]-t[c+Ws],E=C*C+S*S,_===!0?E>0?(L=y*t[o+ji]*t[c+ji]/E,t[o+Vi]+=C*L,t[o+Wi]+=S*L):E<0&&(L=-y*t[o+ji]*t[c+ji]/Math.sqrt(E),t[o+Vi]+=C*L,t[o+Wi]+=S*L):E>0&&(L=y*t[o+ji]*t[c+ji]/E,t[o+Vi]+=C*L,t[o+Wi]+=S*L)),r=T[r+mp],r<0)break;continue}else for(y=e.scalingRatio,a=0;a<g;a+=$u)for(l=0;l<a;l+=$u)C=t[a+Vr]-t[l+Vr],S=t[a+Ws]-t[l+Ws],_===!0?(E=Math.sqrt(C*C+S*S)-t[a+WA]-t[l+WA],E>0?(L=y*t[a+ji]*t[l+ji]/E/E,t[a+Vi]+=C*L,t[a+Wi]+=S*L,t[l+Vi]-=C*L,t[l+Wi]-=S*L):E<0&&(L=100*y*t[a+ji]*t[l+ji],t[a+Vi]+=C*L,t[a+Wi]+=S*L,t[l+Vi]-=C*L,t[l+Wi]-=S*L)):(E=Math.sqrt(C*C+S*S),E>0&&(L=y*t[a+ji]*t[l+ji]/E/E,t[a+Vi]+=C*L,t[a+Wi]+=S*L,t[l+Vi]-=C*L,t[l+Wi]-=S*L));for(d=e.gravity/e.scalingRatio,y=e.scalingRatio,o=0;o<g;o+=$u)L=0,C=t[o+Vr],S=t[o+Ws],E=Math.sqrt(Math.pow(C,2)+Math.pow(S,2)),e.strongGravityMode?E>0&&(L=y*t[o+ji]*d):E>0&&(L=y*t[o+ji]*d/E),t[o+Vi]-=C*L,t[o+Wi]-=S*L;for(y=1*(e.outboundAttractionDistribution?v:1),u=0;u<p;u+=A1t)a=n[u+k1t],l=n[u+M1t],h=n[u+D1t],x=Math.pow(h,e.edgeWeightInfluence),C=t[a+Vr]-t[l+Vr],S=t[a+Ws]-t[l+Ws],_===!0?(E=Math.sqrt(C*C+S*S)-t[a+WA]-t[l+WA],e.linLogMode?e.outboundAttractionDistribution?E>0&&(L=-y*x*Math.log(1+E)/E/t[a+ji]):E>0&&(L=-y*x*Math.log(1+E)/E):e.outboundAttractionDistribution?E>0&&(L=-y*x/t[a+ji]):E>0&&(L=-y*x)):(E=Math.sqrt(Math.pow(C,2)+Math.pow(S,2)),e.linLogMode?e.outboundAttractionDistribution?E>0&&(L=-y*x*Math.log(1+E)/E/t[a+ji]):E>0&&(L=-y*x*Math.log(1+E)/E):e.outboundAttractionDistribution?(E=1,L=-y*x/t[a+ji]):(E=1,L=-y*x)),E>0&&(t[a+Vi]+=C*L,t[a+Wi]+=S*L,t[l+Vi]-=C*L,t[l+Wi]-=S*L);var U,j,W,X,ee,le;if(_===!0)for(o=0;o<g;o+=$u)t[o+Ule]!==1&&(U=Math.sqrt(Math.pow(t[o+Vi],2)+Math.pow(t[o+Wi],2)),U>e7&&(t[o+Vi]=t[o+Vi]*e7/U,t[o+Wi]=t[o+Wi]*e7/U),j=t[o+ji]*Math.sqrt((t[o+xf]-t[o+Vi])*(t[o+xf]-t[o+Vi])+(t[o+Ef]-t[o+Wi])*(t[o+Ef]-t[o+Wi])),W=Math.sqrt((t[o+xf]+t[o+Vi])*(t[o+xf]+t[o+Vi])+(t[o+Ef]+t[o+Wi])*(t[o+Ef]+t[o+Wi]))/2,X=.1*Math.log(1+W)/(1+Math.sqrt(j)),ee=t[o+Vr]+t[o+Vi]*(X/e.slowDown),t[o+Vr]=ee,le=t[o+Ws]+t[o+Wi]*(X/e.slowDown),t[o+Ws]=le);else for(o=0;o<g;o+=$u)t[o+Ule]!==1&&(j=t[o+ji]*Math.sqrt((t[o+xf]-t[o+Vi])*(t[o+xf]-t[o+Vi])+(t[o+Ef]-t[o+Wi])*(t[o+Ef]-t[o+Wi])),W=Math.sqrt((t[o+xf]+t[o+Vi])*(t[o+xf]+t[o+Vi])+(t[o+Ef]+t[o+Wi])*(t[o+Ef]+t[o+Wi]))/2,X=t[o+zle]*Math.log(1+W)/(1+Math.sqrt(j)),t[o+zle]=Math.min(1,Math.sqrt(X*(Math.pow(t[o+Vi],2)+Math.pow(t[o+Wi],2))/(1+Math.sqrt(j)))),ee=t[o+Vr]+t[o+Vi]*(X/e.slowDown),t[o+Vr]=ee,le=t[o+Ws]+t[o+Wi]*(X/e.slowDown),t[o+Ws]=le);return{}},Ym={},ST=10,Wle=3;Ym.assign=function(i){i=i||{};var e=Array.prototype.slice.call(arguments).slice(1),t,n,s;for(t=0,s=e.length;t<s;t++)if(e[t])for(n in e[t])i[n]=e[t][n];return i};Ym.validateSettings=function(i){return"linLogMode"in i&&typeof i.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in i&&typeof i.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in i&&typeof i.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in i&&typeof i.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in i&&!(typeof i.scalingRatio=="number"&&i.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in i&&typeof i.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in i&&!(typeof i.gravity=="number"&&i.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in i&&!(typeof i.slowDown=="number"||i.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in i&&typeof i.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in i&&!(typeof i.barnesHutTheta=="number"&&i.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};Ym.graphToByteArrays=function(i,e){var t=i.order,n=i.size,s={},r,o=new Float32Array(t*ST),a=new Float32Array(n*Wle);return r=0,i.forEachNode(function(l,c){s[l]=r,o[r]=c.x,o[r+1]=c.y,o[r+2]=0,o[r+3]=0,o[r+4]=0,o[r+5]=0,o[r+6]=1,o[r+7]=1,o[r+8]=c.size||1,o[r+9]=c.fixed?1:0,r+=ST}),r=0,i.forEachEdge(function(l,c,u,h,d,f,g){var p=s[u],_=s[h],m=e(l,c,u,h,d,f,g);o[p+6]+=m,o[_+6]+=m,a[r]=p,a[r+1]=_,a[r+2]=m,r+=Wle}),{nodes:o,edges:a}};Ym.assignLayoutChanges=function(i,e,t){var n=0;i.updateEachNodeAttributes(function(s,r){return r.x=e[n],r.y=e[n+1],n+=ST,t?t(s,r):r})};Ym.readGraphPositions=function(i,e){var t=0;i.forEachNode(function(n,s){e[t]=s.x,e[t+1]=s.y,t+=ST})};Ym.collectLayoutChanges=function(i,e,t){for(var n=i.nodes(),s={},r=0,o=0,a=e.length;r<a;r+=ST){if(t){var l=Object.assign({},i.getNodeAttributes(n[o]));l.x=e[r],l.y=e[r+1],l=t(n[o],l),s[n[o]]={x:l.x,y:l.y}}else s[n[o]]={x:e[r],y:e[r+1]};o++}return s};Ym.createWorker=function(e){var t=window.URL||window.webkitURL,n=e.toString(),s=t.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),r=new Worker(s);return t.revokeObjectURL(s),r};var N1t={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},R1t=qg,P1t=C1.createEdgeWeightGetter,O1t=I1t,Bx=Ym,F1t=N1t;function Qbe(i,e,t){if(!R1t(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof t=="number"&&(t={iterations:t});var n=t.iterations;if(typeof n!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(n<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var s=P1t("getEdgeWeight"in t?t.getEdgeWeight:"weight").fromEntry,r=typeof t.outputReducer=="function"?t.outputReducer:null,o=Bx.assign({},F1t,t.settings),a=Bx.validateSettings(o);if(a)throw new Error("graphology-layout-forceatlas2: "+a.message);var l=Bx.graphToByteArrays(e,s),c;for(c=0;c<n;c++)O1t(o,l.nodes,l.edges);if(i){Bx.assignLayoutChanges(e,l.nodes,r);return}return Bx.collectLayoutChanges(e,l.nodes)}function B1t(i){var e=typeof i=="number"?i:i.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}}var oY=Qbe.bind(null,!1);oY.assign=Qbe.bind(null,!0);oY.inferSettings=B1t;var z1t=oY;const U1t=Mi(z1t);var V1t=rY,W1t=qg,H1t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function Jbe(i,e,t){if(!W1t(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");t=V1t(t,H1t);var n=t.dimensions;if(!Array.isArray(n)||n.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=n.length,r=t.center,o=t.rng,a=t.scale,l=(r-.5)*a;function c(h){for(var d=0;d<s;d++)h[n[d]]=o()*a+l;return h}if(!i){var u={};return e.forEachNode(function(h){u[h]=c({})}),u}e.updateEachNodeAttributes(function(h,d){return c(d),d},{attributes:n})}var ewe=Jbe.bind(null,!1);ewe.assign=Jbe.bind(null,!0);var $1t=ewe;const G1t=Mi($1t);var aY={},lY={};(function(i){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,n=Math.pow(2,32)-1,s=Math.pow(2,7)-1,r=Math.pow(2,15)-1,o=Math.pow(2,31)-1;i.getPointerArray=function(l){var c=l-1;if(c<=e)return Uint8Array;if(c<=t)return Uint16Array;if(c<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},i.getSignedPointerArray=function(l){var c=l-1;return c<=s?Int8Array:c<=r?Int16Array:c<=o?Int32Array:Float64Array},i.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};i.getMinimalRepresentation=function(l,c){var u=null,h=0,d,f,g,p,_;for(p=0,_=l.length;p<_;p++)g=c?c(l[p]):l[p],f=i.getNumberType(g),d=a[f.name],d>h&&(h=d,u=f);return u},i.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},i.concat=function(){var l=0,c,u,h;for(c=0,h=arguments.length;c<h;c++)l+=arguments[c].length;var d=new arguments[0].constructor(l);for(c=0,u=0;c<h;c++)d.set(arguments[c],u),u+=arguments[c].length;return d},i.indices=function(l){for(var c=i.getPointerArray(l),u=new c(l),h=0;h<l;h++)u[h]=h;return u}})(lY);var KP=lY,j1t=C1.createEdgeWeightGetter;function twe(i,e){return i==="outbound"||i==="inbound"?e.directedSize+e.undirectedSize*2:i==="in"||i==="out"||i==="directed"?e.directedSize:e.undirectedSize*2}function Xg(i,e){e=e||"outbound";var t=i[e+"Neighbors"].bind(i),n=twe(e,i),s=KP.getPointerArray(n),r=KP.getPointerArray(i.order);this.graph=i,this.neighborhood=new r(n),this.starts=new s(i.order+1),this.nodes=i.nodes();var o={},a,l,c,u,h,d,f=0;for(a=0,l=i.order;a<l;a++)o[this.nodes[a]]=a;for(a=0,l=i.order;a<l;a++)for(h=this.nodes[a],d=t(h),this.starts[a]=f,c=0,u=d.length;c<u;c++)this.neighborhood[f++]=o[d[c]];this.starts[a]=n}Xg.prototype.bounds=function(i){return[this.starts[i],this.starts[i+1]]};Xg.prototype.project=function(){var i=this,e={};return i.nodes.forEach(function(t,n){e[t]=Array.from(i.neighborhood.slice(i.starts[n],i.starts[n+1])).map(function(s){return i.nodes[s]})}),e};Xg.prototype.collect=function(i){var e,t,n={};for(e=0,t=i.length;e<t;e++)n[this.nodes[e]]=i[e];return n};Xg.prototype.assign=function(i,e){var t=0;this.graph.updateEachNodeAttributes(function(n,s){return s[i]=e[t++],s},{attributes:[i]})};aY.NeighborhoodIndex=Xg;function Ak(i,e,t){t=t||"outbound";var n=i[t+"Edges"].bind(i),s=twe(t,i),r=KP.getPointerArray(s),o=KP.getPointerArray(i.order),a=j1t(e).fromMinimalEntry;this.graph=i,this.neighborhood=new o(s),this.weights=new Float64Array(s),this.outDegrees=new Float64Array(i.order),this.starts=new r(i.order+1),this.nodes=i.nodes();var l={},c,u,h,d,f,g,p,_,m,v=0;for(c=0,u=i.order;c<u;c++)l[this.nodes[c]]=c;for(c=0,u=i.order;c<u;c++)for(f=this.nodes[c],p=n(f),this.starts[c]=v,h=0,d=p.length;h<d;h++)_=p[h],g=i.opposite(f,_),m=a(_,i.getEdgeAttributes(_)),this.neighborhood[v]=l[g],this.weights[v++]=m,this.outDegrees[c]+=m;this.starts[c]=s}Ak.prototype.bounds=Xg.prototype.bounds;Ak.prototype.project=Xg.prototype.project;Ak.prototype.collect=Xg.prototype.collect;Ak.prototype.assign=Xg.prototype.assign;aY.WeightedNeighborhoodIndex=Ak;var K1t=qg,q1t=rY,X1t=aY.WeightedNeighborhoodIndex,Y1t={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function nwe(i,e,t){if(!K1t(e))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");t=q1t(t,Y1t);var n=t.alpha,s=t.maxIterations,r=t.tolerance,o=t.nodePagerankAttribute,a=e.order,l=1/a,c=new X1t(e,t.getEdgeWeight),u,h,d,f,g=new Float64Array(e.order),p=new Float64Array(c.weights.length),_=[];for(u=0;u<a;u++)for(g[u]=l,d=c.starts[u+1],f=c.outDegrees[u],f===0&&_.push(u),h=c.starts[u];h<d;h++)p[h]=c.weights[h]/f;for(var m=0,v=0,y,C,S,x=!1;m<s;){for(S=g,g=new Float64Array(e.order),y=0,u=0,d=_.length;u<d;u++)y+=S[_[u]];for(y*=n,u=0;u<a;u++){for(d=c.starts[u+1],h=c.starts[u];h<d;h++)C=c.neighborhood[h],g[C]+=n*S[u]*p[h];g[u]+=y*l+(1-n)*l}for(v=0,u=0;u<a;u++)v+=Math.abs(g[u]-S[u]);if(v<a*r){x=!0;break}m++}if(!x)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(i){c.assign(o,g);return}return c.collect(g)}var iwe=nwe.bind(null,!1);iwe.assign=nwe.bind(null,!0);var Z1t=iwe;const Q1t=Mi(Z1t);var J1t=qg;function rS(i,e,t,n){var s=e+"Centrality";if(!J1t(t))throw new Error("graphology-centrality/"+s+": the given graph is not a valid graphology instance.");if(e!=="degree"&&t.type==="undirected")throw new Error("graphology-centrality/"+s+": cannot compute "+e+" centrality on an undirected graph.");n=n||{};var r=n.nodeCentralityAttribute||s,o=t.order-1,a=t[e].bind(t);if(i){t.updateEachNodeAttributes(function(c,u){return u[r]=a(c)/o,u},{attributes:[r]});return}var l={};return t.forEachNode(function(c){l[c]=a(c)/o}),l}var swe=rS.bind(null,!1,"degree"),eyt=rS.bind(null,!1,"inDegree"),tyt=rS.bind(null,!1,"outDegree");swe.assign=rS.bind(null,!0,"degree");eyt.assign=rS.bind(null,!0,"inDegree");tyt.assign=rS.bind(null,!0,"outDegree");var nyt=swe;function oN(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function iyt(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function rwe(i){let e,t,n;i.length!==2?(e=oN,t=(a,l)=>oN(i(a),l),n=(a,l)=>i(a)-l):(e=i===oN||i===iyt?i:syt,t=i,n=i);function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=s(a,l,c,u-1);return h>c&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:s,center:o,right:r}}function syt(){return 0}function ryt(i){return i===null?NaN:+i}const oyt=rwe(oN),ayt=oyt.right;rwe(ryt).center;const lyt=Math.sqrt(50),cyt=Math.sqrt(10),uyt=Math.sqrt(2);function qP(i,e,t){const n=(e-i)/Math.max(0,t),s=Math.floor(Math.log10(n)),r=n/Math.pow(10,s),o=r>=lyt?10:r>=cyt?5:r>=uyt?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(i*c),l=Math.round(e*c),a/c<i&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(i/c),l=Math.round(e/c),a*c<i&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?qP(i,e,t*2):[a,l,c]}function hyt(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[s,r,o]=n?qP(e,i,t):qP(i,e,t);if(!(r>=s))return[];const a=r-s+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(r-c)/-o;else for(let c=0;c<a;++c)l[c]=(r-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function m$(i,e,t){return e=+e,i=+i,t=+t,qP(i,e,t)[2]}function dyt(i,e,t){e=+e,i=+i,t=+t;const n=e<i,s=n?m$(e,i,t):m$(i,e,t);return(n?-1:1)*(s<0?1/-s:s)}function fyt(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function cY(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function owe(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function Ik(){}var xT=.7,XP=1/xT,Ew="\\s*([+-]?\\d+)\\s*",ET="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gyt=/^#([0-9a-f]{3,8})$/,pyt=new RegExp(`^rgb\\(${Ew},${Ew},${Ew}\\)$`),myt=new RegExp(`^rgb\\(${Fd},${Fd},${Fd}\\)$`),_yt=new RegExp(`^rgba\\(${Ew},${Ew},${Ew},${ET}\\)$`),vyt=new RegExp(`^rgba\\(${Fd},${Fd},${Fd},${ET}\\)$`),yyt=new RegExp(`^hsl\\(${ET},${Fd},${Fd}\\)$`),byt=new RegExp(`^hsla\\(${ET},${Fd},${Fd},${ET}\\)$`),Hle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cY(Ik,LT,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:$le,formatHex:$le,formatHex8:wyt,formatHsl:Cyt,formatRgb:Gle,toString:Gle});function $le(){return this.rgb().formatHex()}function wyt(){return this.rgb().formatHex8()}function Cyt(){return awe(this).formatHsl()}function Gle(){return this.rgb().formatRgb()}function LT(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=gyt.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?jle(e):t===3?new Fl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?HA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?HA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pyt.exec(i))?new Fl(e[1],e[2],e[3],1):(e=myt.exec(i))?new Fl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_yt.exec(i))?HA(e[1],e[2],e[3],e[4]):(e=vyt.exec(i))?HA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yyt.exec(i))?Xle(e[1],e[2]/100,e[3]/100,1):(e=byt.exec(i))?Xle(e[1],e[2]/100,e[3]/100,e[4]):Hle.hasOwnProperty(i)?jle(Hle[i]):i==="transparent"?new Fl(NaN,NaN,NaN,0):null}function jle(i){return new Fl(i>>16&255,i>>8&255,i&255,1)}function HA(i,e,t,n){return n<=0&&(i=e=t=NaN),new Fl(i,e,t,n)}function Syt(i){return i instanceof Ik||(i=LT(i)),i?(i=i.rgb(),new Fl(i.r,i.g,i.b,i.opacity)):new Fl}function _$(i,e,t,n){return arguments.length===1?Syt(i):new Fl(i,e,t,n??1)}function Fl(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}cY(Fl,_$,owe(Ik,{brighter(i){return i=i==null?XP:Math.pow(XP,i),new Fl(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?xT:Math.pow(xT,i),new Fl(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Fl(Q0(this.r),Q0(this.g),Q0(this.b),YP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kle,formatHex:Kle,formatHex8:xyt,formatRgb:qle,toString:qle}));function Kle(){return`#${P0(this.r)}${P0(this.g)}${P0(this.b)}`}function xyt(){return`#${P0(this.r)}${P0(this.g)}${P0(this.b)}${P0((isNaN(this.opacity)?1:this.opacity)*255)}`}function qle(){const i=YP(this.opacity);return`${i===1?"rgb(":"rgba("}${Q0(this.r)}, ${Q0(this.g)}, ${Q0(this.b)}${i===1?")":`, ${i})`}`}function YP(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Q0(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function P0(i){return i=Q0(i),(i<16?"0":"")+i.toString(16)}function Xle(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new hh(i,e,t,n)}function awe(i){if(i instanceof hh)return new hh(i.h,i.s,i.l,i.opacity);if(i instanceof Ik||(i=LT(i)),!i)return new hh;if(i instanceof hh)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,s=Math.min(e,t,n),r=Math.max(e,t,n),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-n)/a+(t<n)*6:t===r?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new hh(o,a,l,i.opacity)}function Eyt(i,e,t,n){return arguments.length===1?awe(i):new hh(i,e,t,n??1)}function hh(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}cY(hh,Eyt,owe(Ik,{brighter(i){return i=i==null?XP:Math.pow(XP,i),new hh(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?xT:Math.pow(xT,i),new hh(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,s=2*t-n;return new Fl(t7(i>=240?i-240:i+120,s,n),t7(i,s,n),t7(i<120?i+240:i-120,s,n),this.opacity)},clamp(){return new hh(Yle(this.h),$A(this.s),$A(this.l),YP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=YP(this.opacity);return`${i===1?"hsl(":"hsla("}${Yle(this.h)}, ${$A(this.s)*100}%, ${$A(this.l)*100}%${i===1?")":`, ${i})`}`}}));function Yle(i){return i=(i||0)%360,i<0?i+360:i}function $A(i){return Math.max(0,Math.min(1,i||0))}function t7(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const uY=i=>()=>i;function Lyt(i,e){return function(t){return i+t*e}}function Tyt(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function kyt(i){return(i=+i)==1?lwe:function(e,t){return t-e?Tyt(e,t,i):uY(isNaN(e)?t:e)}}function lwe(i,e){var t=e-i;return t?Lyt(i,t):uY(isNaN(i)?e:i)}const Zle=function i(e){var t=kyt(e);function n(s,r){var o=t((s=_$(s)).r,(r=_$(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),c=lwe(s.opacity,r.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return n.gamma=i,n}(1);function Myt(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),s;return function(r){for(s=0;s<t;++s)n[s]=i[s]*(1-r)+e[s]*r;return n}}function Dyt(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Ayt(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,s=new Array(n),r=new Array(t),o;for(o=0;o<n;++o)s[o]=hY(i[o],e[o]);for(;o<t;++o)r[o]=e[o];return function(a){for(o=0;o<n;++o)r[o]=s[o](a);return r}}function Iyt(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function ZP(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Nyt(i,e){var t={},n={},s;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in i?t[s]=hY(i[s],e[s]):n[s]=e[s];return function(r){for(s in t)n[s]=t[s](r);return n}}var v$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,n7=new RegExp(v$.source,"g");function Ryt(i){return function(){return i}}function Pyt(i){return function(e){return i(e)+""}}function Oyt(i,e){var t=v$.lastIndex=n7.lastIndex=0,n,s,r,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=v$.exec(i))&&(s=n7.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ZP(n,s)})),t=n7.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?Pyt(l[0].x):Ryt(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function hY(i,e){var t=typeof e,n;return e==null||t==="boolean"?uY(e):(t==="number"?ZP:t==="string"?(n=LT(e))?(e=n,Zle):Oyt:e instanceof LT?Zle:e instanceof Date?Iyt:Dyt(e)?Myt:Array.isArray(e)?Ayt:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Nyt:ZP)(i,e)}function Fyt(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function Byt(i){return function(){return i}}function zyt(i){return+i}var Qle=[0,1];function Ab(i){return i}function y$(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:Byt(isNaN(e)?NaN:.5)}function Uyt(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function Vyt(i,e,t){var n=i[0],s=i[1],r=e[0],o=e[1];return s<n?(n=y$(s,n),r=t(o,r)):(n=y$(n,s),r=t(r,o)),function(a){return r(n(a))}}function Wyt(i,e,t){var n=Math.min(i.length,e.length)-1,s=new Array(n),r=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=y$(i[o],i[o+1]),r[o]=t(e[o],e[o+1]);return function(a){var l=ayt(i,a,1,n)-1;return r[l](s[l](a))}}function Hyt(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function $yt(){var i=Qle,e=Qle,t=hY,n,s,r,o=Ab,a,l,c;function u(){var d=Math.min(i.length,e.length);return o!==Ab&&(o=Uyt(i[0],i[d-1])),a=d>2?Wyt:Vyt,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?r:(l||(l=a(i.map(n),e,t)))(n(o(d)))}return h.invert=function(d){return o(s((c||(c=a(e,i.map(n),ZP)))(d)))},h.domain=function(d){return arguments.length?(i=Array.from(d,zyt),u()):i.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),t=Fyt,u()},h.clamp=function(d){return arguments.length?(o=d?!0:Ab,u()):o!==Ab},h.interpolate=function(d){return arguments.length?(t=d,u()):t},h.unknown=function(d){return arguments.length?(r=d,h):r},function(d,f){return n=d,s=f,u()}}function Gyt(){return $yt()(Ab,Ab)}function jyt(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function QP(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function _C(i){return i=QP(Math.abs(i)),i?i[1]:NaN}function Kyt(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function qyt(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var Xyt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function JP(i){if(!(e=Xyt.exec(i)))throw new Error("invalid format: "+i);var e;return new dY({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}JP.prototype=dY.prototype;function dY(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}dY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yyt(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var cwe;function Zyt(i,e){var t=QP(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(cwe=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+QP(i,Math.max(0,e+r-1))[0]}function Jle(i,e){var t=QP(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const ece={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:jyt,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>Jle(i*100,e),r:Jle,s:Zyt,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function tce(i){return i}var nce=Array.prototype.map,ice=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qyt(i){var e=i.grouping===void 0||i.thousands===void 0?tce:Kyt(nce.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?tce:qyt(nce.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(h){h=JP(h);var d=h.fill,f=h.align,g=h.sign,p=h.symbol,_=h.zero,m=h.width,v=h.comma,y=h.precision,C=h.trim,S=h.type;S==="n"?(v=!0,S="g"):ece[S]||(y===void 0&&(y=12),C=!0,S="g"),(_||d==="0"&&f==="=")&&(_=!0,d="0",f="=");var x=p==="$"?t:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=p==="$"?n:/[%p]/.test(S)?o:"",L=ece[S],T=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function D(I){var N=x,P=E,O,V,z;if(S==="c")P=L(I)+P,I="";else{I=+I;var K=I<0||1/I<0;if(I=isNaN(I)?l:L(Math.abs(I),y),C&&(I=Yyt(I)),K&&+I==0&&g!=="+"&&(K=!1),N=(K?g==="("?g:a:g==="-"||g==="("?"":g)+N,P=(S==="s"?ice[8+cwe/3]:"")+P+(K&&g==="("?")":""),T){for(O=-1,V=I.length;++O<V;)if(z=I.charCodeAt(O),48>z||z>57){P=(z===46?s+I.slice(O+1):I.slice(O))+P,I=I.slice(0,O);break}}}v&&!_&&(I=e(I,1/0));var H=N.length+I.length+P.length,U=H<m?new Array(m-H+1).join(d):"";switch(v&&_&&(I=e(U+I,U.length?m-P.length:1/0),U=""),f){case"<":I=N+I+P+U;break;case"=":I=N+U+I+P;break;case"^":I=U.slice(0,H=U.length>>1)+N+I+P+U.slice(H);break;default:I=U+N+I+P;break}return r(I)}return D.toString=function(){return h+""},D}function u(h,d){var f=c((h=JP(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(_C(d)/3)))*3,p=Math.pow(10,-g),_=ice[8+g/3];return function(m){return f(p*m)+_}}return{format:c,formatPrefix:u}}var GA,uwe,hwe;Jyt({thousands:",",grouping:[3],currency:["$",""]});function Jyt(i){return GA=Qyt(i),uwe=GA.format,hwe=GA.formatPrefix,GA}function ebt(i){return Math.max(0,-_C(Math.abs(i)))}function tbt(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_C(e)/3)))*3-_C(Math.abs(i)))}function nbt(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,_C(e)-_C(i))+1}function ibt(i,e,t,n){var s=dyt(i,e,t),r;switch(n=JP(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(r=tbt(s,o))&&(n.precision=r),hwe(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(r=nbt(s,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=r-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(r=ebt(s))&&(n.precision=r-(n.type==="%")*2);break}}return uwe(n)}function sbt(i){var e=i.domain;return i.ticks=function(t){var n=e();return hyt(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var s=e();return ibt(s[0],s[s.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),s=0,r=n.length-1,o=n[s],a=n[r],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);u-- >0;){if(c=m$(o,a,t),c===l)return n[s]=o,n[r]=a,e(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function dwe(){var i=Gyt();return i.copy=function(){return Hyt(i,dwe())},fyt.apply(i,arguments),sbt(i)}const rbt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},sce=i=>{let e;const t=new Set,n=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const h=e;e=c??typeof u!="object"?u:Object.assign({},e,u),t.forEach(d=>d(e,h))}},s=()=>e,a={setState:n,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{(rbt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=i(n,s,a),a},obt=i=>i?sce(i):sce;var fwe={exports:{}},gwe={},pwe={exports:{}},mwe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=G;function abt(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var lbt=typeof Object.is=="function"?Object.is:abt,cbt=vC.useState,ubt=vC.useEffect,hbt=vC.useLayoutEffect,dbt=vC.useDebugValue;function fbt(i,e){var t=e(),n=cbt({inst:{value:t,getSnapshot:e}}),s=n[0].inst,r=n[1];return hbt(function(){s.value=t,s.getSnapshot=e,i7(s)&&r({inst:s})},[i,t,e]),ubt(function(){return i7(s)&&r({inst:s}),i(function(){i7(s)&&r({inst:s})})},[i]),dbt(t),t}function i7(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!lbt(i,t)}catch{return!0}}function gbt(i,e){return e()}var pbt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gbt:fbt;mwe.useSyncExternalStore=vC.useSyncExternalStore!==void 0?vC.useSyncExternalStore:pbt;pwe.exports=mwe;var mbt=pwe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R5=G,_bt=mbt;function vbt(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var ybt=typeof Object.is=="function"?Object.is:vbt,bbt=_bt.useSyncExternalStore,wbt=R5.useRef,Cbt=R5.useEffect,Sbt=R5.useMemo,xbt=R5.useDebugValue;gwe.useSyncExternalStoreWithSelector=function(i,e,t,n,s){var r=wbt(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=Sbt(function(){function l(f){if(!c){if(c=!0,u=f,f=n(f),s!==void 0&&o.hasValue){var g=o.value;if(s(g,f))return h=g}return h=f}if(g=h,ybt(u,f))return g;var p=n(f);return s!==void 0&&s(g,p)?g:(u=f,h=p)}var c=!1,u,h,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,n,s]);var a=bbt(i,r[0],r[1]);return Cbt(function(){o.hasValue=!0,o.value=a},[a]),xbt(a),a};fwe.exports=gwe;var Ebt=fwe.exports;const Lbt=Mi(Ebt),Tbt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useSyncExternalStoreWithSelector:kbt}=Lbt;function _we(i,e=i.getState,t){const n=kbt(i.subscribe,i.getState,i.getServerState||i.getState,e,t);return G.useDebugValue(n),n}const rce=i=>{(Tbt?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof i=="function"?obt(i):i,t=(n,s)=>_we(e,n,s);return Object.assign(t,e),t},Mbt=i=>i?rce(i):rce,Dbt={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Abt(){(Dbt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `context` will be removed in a future version. Instead use `import { createStore, useStore } from 'zustand'`. See: https://github.com/pmndrs/zustand/discussions/1180.");const i=G.createContext(void 0);return{Provider:({createStore:s,children:r})=>{const o=G.useRef();return o.current||(o.current=s()),G.createElement(i.Provider,{value:o.current},r)},useStore:(s,r)=>{const o=G.useContext(i);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return _we(o,s,r)},useStoreApi:()=>{const s=G.useContext(i);if(!s)throw new Error("Seems like you have not used zustand provider as an ancestor.");return G.useMemo(()=>({...s}),[s])}}}function Ibt(i,e,t){return Math.max(e,Math.min(i,t))}const As={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function oce(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function ace(i,e,t,n=.15){return n===0?Ibt(i,e,t):i<e?-oce(e-i,t-e,n)+e:i>t?+oce(i-t,t-e,n)+t:i}function Nbt(i,[e,t],[n,s]){const[[r,o],[a,l]]=i;return[ace(e,r,o,n),ace(t,a,l,s)]}function Rbt(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Pbt(i){var e=Rbt(i,"string");return typeof e=="symbol"?e:String(e)}function Kr(i,e,t){return e=Pbt(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function lce(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Js(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lce(Object(t),!0).forEach(function(n){Kr(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):lce(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const vwe={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function cce(i){return i?i[0].toUpperCase()+i.slice(1):""}const Obt=["enter","leave"];function Fbt(i=!1,e){return i&&!Obt.includes(e)}function Bbt(i,e="",t=!1){const n=vwe[i],s=n&&n[e]||e;return"on"+cce(i)+cce(s)+(Fbt(t,s)?"Capture":"")}const zbt=["gotpointercapture","lostpointercapture"];function Ubt(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=zbt.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(n);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:t}}function Vbt(i,e=""){const t=vwe[i],n=t&&t[e]||e;return i+n}function P5(i){return"touches"in i}function ywe(i){return P5(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function Wbt(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function Hbt(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function bwe(i){return P5(i)?Hbt(i)[0]:i}function b$(i,e){try{const t=e.clientX-i.clientX,n=e.clientY-i.clientY,s=(e.clientX+i.clientX)/2,r=(e.clientY+i.clientY)/2,o=Math.hypot(t,n);return{angle:-(Math.atan2(t,n)*180)/Math.PI,distance:o,origin:[s,r]}}catch{}return null}function $bt(i){return Wbt(i).map(e=>e.identifier)}function uce(i,e){const[t,n]=Array.from(i.touches).filter(s=>e.includes(s.identifier));return b$(t,n)}function s7(i){const e=bwe(i);return P5(i)?e.identifier:e.pointerId}function yC(i){const e=bwe(i);return[e.clientX,e.clientY]}const hce=40,dce=800;function wwe(i){let{deltaX:e,deltaY:t,deltaMode:n}=i;return n===1?(e*=hce,t*=hce):n===2&&(e*=dce,t*=dce),[e,t]}function Gbt(i){var e,t;const{scrollX:n,scrollY:s,scrollLeft:r,scrollTop:o}=i.currentTarget;return[(e=n??r)!==null&&e!==void 0?e:0,(t=s??o)!==null&&t!==void 0?t:0]}function jbt(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:s,ctrlKey:r})}return e}function eO(i,...e){return typeof i=="function"?i(...e):i}function Kbt(){}function qbt(...i){return i.length===0?Kbt:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function fce(i,e){return Object.assign({},e,i||{})}const Xbt=32;class Cwe{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:s}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?eO(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:s}=this;t.args=this.args;let r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,jbt(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const x=t._delta.map(Math.abs);As.addTo(t._distance,x)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=n.threshold,{_step:u,values:h}=t;if(n.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&h[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&h[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const d=[0,0];if(n.hasCustomTransform){const[x,E]=h;d[0]=u[0]!==!1?x-u[0]:0,d[1]=u[1]!==!1?E-u[1]:0}else d[0]=u[0]!==!1?o-u[0]:0,d[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);const f=t.offset,g=t._active&&!t._blocked||t.active;g&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=s[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=eO(n.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));const[p,_]=t.offset,[[m,v],[y,C]]=t._bounds;t.overflow=[p<m?-1:p>v?1:0,_<y?-1:_>C?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const S=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=Nbt(t._bounds,t.offset,S),t.delta=As.sub(t.offset,f),this.computeMovement(),g&&(!t.last||r>Xbt)){t.delta=As.sub(t.offset,f);const x=t.delta.map(Math.abs);As.addTo(t.distance,x),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[x[0]/r,x[1]/r],t.timeDelta=r)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const s=this.handler(Js(Js(Js({},t),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ybt([i,e],t){const n=Math.abs(i),s=Math.abs(e);if(n>s&&n>t)return"x";if(s>n&&s>t)return"y"}class Nk extends Cwe{constructor(...e){super(...e),Kr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=As.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=As.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const s=typeof n.axisThreshold=="object"?n.axisThreshold[ywe(e)]:n.axisThreshold;t.axis=Ybt(t._movement,s)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Zbt=i=>i,gce=.15,Swe={enabled(i=!0){return i},eventOptions(i,e,t){return Js(Js({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[gce,gce];case!1:return[0,0];default:return As.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return As.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||Zbt},threshold(i){return As.toVector(i,0)}},Qbt=0,S1=Js(Js({},Swe),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=Qbt){return i},bounds(i={}){if(typeof i=="function")return r=>S1.bounds(i(r));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:s=1/0}=i;return[[e,t],[n,s]]}}),pce={ArrowRight:(i,e=1)=>[i*e,0],ArrowLeft:(i,e=1)=>[-1*i*e,0],ArrowUp:(i,e=1)=>[0,-1*i*e],ArrowDown:(i,e=1)=>[0,i*e]};class Jbt extends Nk{constructor(...e){super(...e),Kr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),s={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=S1.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=s7(e),n._pointerActive=!0,this.computeValues(yC(e)),this.computeInitial(),t.preventScrollAxis&&ywe(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const s=s7(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;const r=yC(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=As.sub(r,t._values),this.computeValues(r)),As.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const s=s7(e);if(t._pointerId!==void 0&&s!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[r,o]=t._distance;if(t.tap=r<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[h,d]=n.swipe.velocity,[f,g]=n.swipe.distance,p=n.swipe.duration;if(t.elapsedTime<p){const _=Math.abs(a/t.timeDelta),m=Math.abs(l/t.timeDelta);_>h&&Math.abs(c)>f&&(t.swipe[0]=Math.sign(a)),m>d&&Math.abs(u)>g&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,ewt(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=pce[e.key];if(t){const n=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,s),n._keyboardActive=!0,As.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in pce&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function ewt(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const Rk=typeof window<"u"&&window.document&&window.document.createElement;function xwe(){return Rk&&"ontouchstart"in window}function twt(){return xwe()||Rk&&window.navigator.maxTouchPoints>1}function nwt(){return Rk&&"onpointerdown"in window}function iwt(){return Rk&&"exitPointerLock"in window.document}function swt(){try{return"constructor"in GestureEvent}catch{return!1}}const cu={isBrowser:Rk,gesture:swt(),touch:xwe(),touchscreen:twt(),pointer:nwt(),pointerLock:iwt()},rwt=250,owt=180,awt=.5,lwt=50,cwt=250,uwt=10,mce={mouse:0,touch:0,pen:8},hwt=Js(Js({},S1),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:s=!1}={}}){return this.pointerLock=n&&cu.pointerLock,cu.touch&&t?"touch":this.pointerLock?"mouse":cu.pointer&&!s?"pointer":cu.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?rwt:void 0,!(!cu.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1,keys:s=!0}={}}){return this.pointerButtons=n,this.keys=s,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:s=void 0}){const r=As.toVector(i,t?n:s?1:0);return this.filterTaps=t,this.tapsThreshold=n,r},swipe({velocity:i=awt,distance:e=lwt,duration:t=cwt}={}){return{velocity:this.transform(As.toVector(i)),distance:this.transform(As.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return owt;case!1:return 0;default:return i}},axisThreshold(i){return i?Js(Js({},mce),i):mce},keyboardDisplacement(i=uwt){return i}});function Ewe(i){const[e,t]=i.overflow,[n,s]=i._delta,[r,o]=i._direction;(e<0&&n>0&&r<0||e>0&&n<0&&r>0)&&(i._movement[0]=i._movementBound[0]),(t<0&&s>0&&o<0||t>0&&s<0&&o>0)&&(i._movement[1]=i._movementBound[1])}const dwt=30,fwt=100;class gwt extends Cwe{constructor(...e){super(...e),Kr(this,"ingKey","pinching"),Kr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;e==="wheel"?this.state.offset=As.add(t,n):this.state.offset=[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const s=Math.abs(t)*dwt-Math.abs(n);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every(r=>n.has(r))||n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const s=uce(e,t._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,s=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every(o=>s.has(o))||(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const r=b$(...Array.from(n.values()));r&&this.pinchStart(e,r)}pinchStart(e,t){const n=this.state;n.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=uce(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=b$(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,s=n._values[1],r=t.angle-s;let o=0;Math.abs(r)>270&&(o+=Math.sign(r)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=As.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(n=>e[n]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const n=this.state;n._delta=[-wwe(e)[1]/fwt*n.offset[0],0],As.addTo(n._movement,n._delta),Ewe(n),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const pwt=Js(Js({},Swe),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!cu.touch&&cu.gesture)return"gesture";if(cu.touch&&n)return"touch";if(cu.touchscreen){if(cu.pointer)return"pointer";if(cu.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const s=o=>{const a=fce(eO(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},r=o=>{const a=fce(eO(n,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof n!="function"?[s(),r()]:o=>[s(o),r(o)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",As.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class mwt extends Nk{constructor(...e){super(...e),Kr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(yC(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=yC(e),n=this.state;n._delta=As.sub(t,n._values),As.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const _wt=Js(Js({},S1),{},{mouseOnly:(i=!0)=>i});class vwt extends Nk{constructor(...e){super(...e),Kr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=Gbt(e);t._delta=As.sub(n,t._values),As.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const ywt=S1;class bwt extends Nk{constructor(...e){super(...e),Kr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=wwe(e),As.addTo(t._movement,t._delta),Ewe(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const wwt=S1;class Cwt extends Nk{constructor(...e){super(...e),Kr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(yC(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const n=yC(e);t._movement=t._delta=As.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Swt=Js(Js({},S1),{},{mouseOnly:(i=!0)=>i}),fY=new Map,w$=new Map;function xwt(i){fY.set(i.key,i.engine),w$.set(i.key,i.resolver)}const Ewt={key:"drag",engine:Jbt,resolver:hwt},Lwt={key:"hover",engine:Cwt,resolver:Swt},Twt={key:"move",engine:mwt,resolver:_wt},kwt={key:"pinch",engine:gwt,resolver:pwt},Mwt={key:"scroll",engine:vwt,resolver:ywt},Dwt={key:"wheel",engine:bwt,resolver:wwt};function Awt(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function Iwt(i,e){if(i==null)return{};var t=Awt(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const Nwt={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=cu.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},Rwt=["target","eventOptions","window","enabled","transform"];function aN(i={},e){const t={};for(const[n,s]of Object.entries(e))switch(typeof s){case"function":t[n]=s.call(t,i[n],n,i);break;case"object":t[n]=aN(i[n],s);break;case"boolean":s&&(t[n]=i[n]);break}return t}function Pwt(i,e,t={}){const n=i,{target:s,eventOptions:r,window:o,enabled:a,transform:l}=n,c=Iwt(n,Rwt);if(t.shared=aN({target:s,eventOptions:r,window:o,enabled:a,transform:l},Nwt),e){const u=w$.get(e);t[e]=aN(Js({shared:t.shared},c),u)}else for(const u in c){const h=w$.get(u);h&&(t[u]=aN(Js({shared:t.shared},c[u]),h))}return t}class Lwe{constructor(e,t){Kr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,s,r){const o=this._listeners,a=Vbt(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Js(Js({},l),r);e.addEventListener(a,s,c);const u=()=>{e.removeEventListener(a,s,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Owt{constructor(){Kr(this,"_timeouts",new Map)}add(e,t,n=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...s))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let Fwt=class{constructor(e){Kr(this,"gestures",new Set),Kr(this,"_targetEventStore",new Lwe(this)),Kr(this,"gestureEventStores",{}),Kr(this,"gestureTimeoutStores",{}),Kr(this,"handlers",{}),Kr(this,"config",{}),Kr(this,"pointerIds",new Set),Kr(this,"touchIds",new Set),Kr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Bwt(this,e)}setEventIds(e){if(P5(e))return this.touchIds=new Set($bt(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Pwt(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let s;if(!(t.target&&(s=t.target(),!s))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=_ce(n,a.eventOptions,!!s);if(a.enabled){const c=fY.get(o);new c(this,e,o).bind(l)}}const r=_ce(n,t.eventOptions,!!s);for(const o in this.nativeHandlers)r(o,"",a=>this.nativeHandlers[o](Js(Js({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const r in n)n[r]=qbt(...n[r]);if(!s)return n;for(const r in n){const{device:o,capture:a,passive:l}=Ubt(r);this._targetEventStore.add(s,o,"",n[r],{capture:a,passive:l})}}}};function Ty(i,e){i.gestures.add(e),i.gestureEventStores[e]=new Lwe(i,e),i.gestureTimeoutStores[e]=new Owt}function Bwt(i,e){e.drag&&Ty(i,"drag"),e.wheel&&Ty(i,"wheel"),e.scroll&&Ty(i,"scroll"),e.move&&Ty(i,"move"),e.pinch&&Ty(i,"pinch"),e.hover&&Ty(i,"hover")}const _ce=(i,e,t)=>(n,s,r,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let d=a?n:Bbt(n,s,u);t&&h&&(d+="Passive"),i[d]=i[d]||[],i[d].push(r)},zwt=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Uwt(i){const e={},t={},n=new Set;for(let s in i)zwt.test(s)?(n.add(RegExp.lastMatch),t[s]=i[s]):e[s]=i[s];return[t,e,n]}function ky(i,e,t,n,s,r){if(!i.has(t)||!fY.has(n))return;const o=t+"Start",a=t+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),t in e&&(u=e[t](c)),c.last&&a in e&&e[a](c),u};s[n]=l,r[n]=r[n]||{}}function Vwt(i,e){const[t,n,s]=Uwt(i),r={};return ky(s,t,"onDrag","drag",r,e),ky(s,t,"onWheel","wheel",r,e),ky(s,t,"onScroll","scroll",r,e),ky(s,t,"onPinch","pinch",r,e),ky(s,t,"onMove","move",r,e),ky(s,t,"onHover","hover",r,e),{handlers:r,config:e,nativeHandlers:n}}function Wwt(i,e={},t,n){const s=re.useMemo(()=>new Fwt(i),[]);if(s.applyHandlers(i,n),s.applyConfig(e,t),re.useEffect(s.effect.bind(s)),re.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function Hwt(i){return i.forEach(xwt),function(t,n){const{handlers:s,nativeHandlers:r,config:o}=Vwt(t,n||{});return Wwt(s,o,void 0,r)}}function $wt(i,e){return Hwt([Ewt,kwt,Mwt,Dwt,Twt,Lwt])(i,e||{})}var oS={};function Kd(i){if(typeof i!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=i}typeof Symbol<"u"&&(Kd.prototype[Symbol.iterator]=function(){return this});Kd.of=function(){var i=arguments,e=i.length,t=0;return new Kd(function(){return t>=e?{done:!0}:{done:!1,value:i[t++]}})};Kd.empty=function(){var i=new Kd(function(){return{done:!0}});return i};Kd.fromSequence=function(i){var e=0,t=i.length;return new Kd(function(){return e>=t?{done:!0}:{done:!1,value:i[e++]}})};Kd.is=function(i){return i instanceof Kd?!0:typeof i=="object"&&i!==null&&typeof i.next=="function"};var O5=Kd;const Tu=Mi(O5);var F5={};F5.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";F5.SYMBOL_SUPPORT=typeof Symbol<"u";var Twe=F5,Gwt=Twe.ARRAY_BUFFER_SUPPORT,jwt=Twe.SYMBOL_SUPPORT,gY=function(e,t){var n,s,r,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Gwt&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(r=0,o=e.length;r<o;r++)t(e[r],r);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(jwt&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(n=e,r=0;a=n.next(),a.done!==!0;)t(a.value,r),r++;return}for(s in e)e.hasOwnProperty(s)&&t(e[s],s)},kwe=O5,Kwt=gY;function Pr(){this.clear()}Pr.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Pr.prototype.enqueue=function(i){return this.items.push(i),++this.size};Pr.prototype.dequeue=function(){if(this.size){var i=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,i}};Pr.prototype.peek=function(){if(this.size)return this.items[this.offset]};Pr.prototype.forEach=function(i,e){e=arguments.length>1?e:this;for(var t=this.offset,n=0,s=this.items.length;t<s;t++,n++)i.call(e,this.items[t],n,this)};Pr.prototype.toArray=function(){return this.items.slice(this.offset)};Pr.prototype.values=function(){var i=this.items,e=this.offset;return new kwe(function(){if(e>=i.length)return{done:!0};var t=i[e];return e++,{value:t,done:!1}})};Pr.prototype.entries=function(){var i=this.items,e=this.offset,t=0;return new kwe(function(){if(e>=i.length)return{done:!0};var n=i[e];return e++,{value:[t++,n],done:!1}})};typeof Symbol<"u"&&(Pr.prototype[Symbol.iterator]=Pr.prototype.values);Pr.prototype.toString=function(){return this.toArray().join(",")};Pr.prototype.toJSON=function(){return this.toArray()};Pr.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:Pr,enumerable:!1}),i};typeof Symbol<"u"&&(Pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pr.prototype.inspect);Pr.from=function(i){var e=new Pr;return Kwt(i,function(t){e.enqueue(t)}),e};Pr.of=function(){return Pr.from(arguments)};var qwt=Pr,Xwt=function(e,t){var n=t.length;if(n!==0){var s=e.length;e.length+=n;for(var r=0;r<n;r++)e[s+r]=t[r]}},pY=qg,Ywt=qwt,Zwt=Xwt;function Qwt(i,e,t){if(!pY(i))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!i.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!i.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" target node does not exist in the given graph.');if(e=""+e,t=""+t,e===t)return[e];var n=i.inboundNeighbors.bind(i),s=i.outboundNeighbors.bind(i),r={},o={};r[e]=null,o[t]=null;var a=[e],l=[t],c,u,h,d,f,g,p,_,m=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],f=0,p=c.length;f<p;f++)for(u=c[f],h=s(u),g=0,_=h.length;g<_;g++)if(d=h[g],d in r||(a.push(d),r[d]=u),d in o){m=!0;break e}}else for(c=l,l=[],f=0,p=c.length;f<p;f++)for(u=c[f],h=n(u),g=0,_=h.length;g<_;g++)if(d=h[g],d in o||(l.push(d),o[d]=u),d in r){m=!0;break e}if(!m)return null;for(var v=[];d;)v.unshift(d),d=r[d];for(d=o[v[v.length-1]];d;)v.push(d),d=o[d];return v.length?v:null}function Jwt(i,e){if(!pY(i))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!i.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var t={},n={},s,r,o,a,l,c;for(t[e]=!0,n[e]=[e];Object.keys(t).length;){s=t,t={};for(o in s)for(r=i.outboundNeighbors(o),l=0,c=r.length;l<c;l++)a=r[l],n[a]||(n[a]=n[o].concat(a),t[a]=!0)}return n}function Mwe(i,e,t){if(!pY(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');t=""+t;var n=new Set,s={},r=0;s[t]=0;for(var o=[t],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!n.has(c)&&(n.add(c),Zwt(u,e[i](c)),s[c]=r);r++,o=u}return s}var eCt=Mwe.bind(null,"outboundNeighbors"),tCt=Mwe.bind(null,"neighbors");function nCt(i,e){e=""+e;var t=[],n={},s={},r=i.nodes(),o,a,l,c,u,h,d,f,g;for(h=0,f=r.length;h<f;h++)c=r[h],n[c]=[],s[c]=0;var p={};s[e]=1,p[e]=0;for(var _=Ywt.of(e);_.size;)for(c=_.dequeue(),t.push(c),o=p[c],a=s[c],l=i.outboundNeighbors(c),d=0,g=l.length;d<g;d++)u=l[d],u in p||(_.enqueue(u),p[u]=o+1),p[u]===o+1&&(s[u]+=a,n[u].push(c));return[t,n,s]}oS.bidirectional=Qwt;oS.singleSource=Jwt;oS.singleSourceLength=eCt;oS.undirectedSingleSourceLength=tCt;oS.brandes=nCt;var mY={},Pk={},iCt=function(i,e){return i<e?-1:i>e?1:0},sCt=function(i,e){return i<e?1:i>e?-1:0};function rCt(i){return function(e,t){return i(t,e)}}function oCt(i){return i===2?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(e,t){for(var n=0;n<i;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n++}return 0}}Pk.DEFAULT_COMPARATOR=iCt;Pk.DEFAULT_REVERSE_COMPARATOR=sCt;Pk.reverseComparator=rCt;Pk.createTupleComparator=oCt;var Ok={},Dwe=gY,Awe=lY;function aCt(i){return Array.isArray(i)||Awe.isTypedArray(i)}function _Y(i){if(typeof i.length=="number")return i.length;if(typeof i.size=="number")return i.size}function lCt(i){var e=_Y(i),t=typeof e=="number"?new Array(e):[],n=0;return Dwe(i,function(s){t[n++]=s}),t}function cCt(i){var e=_Y(i),t=typeof e=="number"?Awe.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],s=typeof e=="number"?new t(e):[],r=0;return Dwe(i,function(o){n[r]=o,s[r]=r++}),[n,s]}Ok.isArrayLike=aCt;Ok.guessLength=_Y;Ok.toArray=lCt;Ok.toArrayWithIndices=cCt;var tO=gY,Iwe=Pk,Bd=Ok,B5=Iwe.DEFAULT_COMPARATOR,vY=Iwe.reverseComparator;function yY(i,e,t,n){for(var s=e[n],r,o;n>t;){if(r=n-1>>1,o=e[r],i(s,o)<0){e[n]=o,n=r;continue}break}e[n]=s}function Fk(i,e,t){for(var n=e.length,s=t,r=e[t],o=2*t+1,a;o<n;)a=o+1,a<n&&i(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=2*t+1;e[t]=r,yY(i,e,s,t)}function Nwe(i,e,t){e.push(t),yY(i,e,0,e.length-1)}function bY(i,e){var t=e.pop();if(e.length!==0){var n=e[0];return e[0]=t,Fk(i,e,0),n}return t}function bC(i,e,t){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var n=e[0];return e[0]=t,Fk(i,e,0),n}function Rwe(i,e,t){var n;return e.length!==0&&i(e[0],t)<0&&(n=e[0],e[0]=t,t=n,Fk(i,e,0)),t}function Hv(i,e){for(var t=e.length,n=t>>1,s=n;--s>=0;)Fk(i,e,s)}function wY(i,e){for(var t=e.length,n=0,s=new Array(t);n<t;)s[n++]=bY(i,e);return s}function uCt(i,e,t){arguments.length===2&&(t=e,e=i,i=B5);var n=vY(i),s,r,o,a=1/0,l;if(e===1){if(Bd.isArrayLike(t)){for(s=0,r=t.length;s<r;s++)o=t[s],(a===1/0||i(o,a)<0)&&(a=o);return l=new t.constructor(1),l[0]=a,l}return tO(t,function(u){(a===1/0||i(u,a)<0)&&(a=u)}),[a]}if(Bd.isArrayLike(t)){if(e>=t.length)return t.slice().sort(i);for(l=t.slice(0,e),Hv(n,l),s=e,r=t.length;s<r;s++)n(t[s],l[0])>0&&bC(n,l,t[s]);return l.sort(i)}var c=Bd.guessLength(t);return c!==null&&c<e&&(e=c),l=new Array(e),s=0,tO(t,function(u){s<e?l[s]=u:(s===e&&Hv(n,l),n(u,l[0])>0&&bC(n,l,u)),s++}),l.length>s&&(l.length=s),l.sort(i)}function hCt(i,e,t){arguments.length===2&&(t=e,e=i,i=B5);var n=vY(i),s,r,o,a=-1/0,l;if(e===1){if(Bd.isArrayLike(t)){for(s=0,r=t.length;s<r;s++)o=t[s],(a===-1/0||i(o,a)>0)&&(a=o);return l=new t.constructor(1),l[0]=a,l}return tO(t,function(u){(a===-1/0||i(u,a)>0)&&(a=u)}),[a]}if(Bd.isArrayLike(t)){if(e>=t.length)return t.slice().sort(n);for(l=t.slice(0,e),Hv(i,l),s=e,r=t.length;s<r;s++)i(t[s],l[0])>0&&bC(i,l,t[s]);return l.sort(n)}var c=Bd.guessLength(t);return c!==null&&c<e&&(e=c),l=new Array(e),s=0,tO(t,function(u){s<e?l[s]=u:(s===e&&Hv(i,l),i(u,l[0])>0&&bC(i,l,u)),s++}),l.length>s&&(l.length=s),l.sort(n)}function ss(i){if(this.clear(),this.comparator=i||B5,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}ss.prototype.clear=function(){this.items=[],this.size=0};ss.prototype.push=function(i){return Nwe(this.comparator,this.items,i),++this.size};ss.prototype.peek=function(){return this.items[0]};ss.prototype.pop=function(){return this.size!==0&&this.size--,bY(this.comparator,this.items)};ss.prototype.replace=function(i){return bC(this.comparator,this.items,i)};ss.prototype.pushpop=function(i){return Rwe(this.comparator,this.items,i)};ss.prototype.consume=function(){return this.size=0,wY(this.comparator,this.items)};ss.prototype.toArray=function(){return wY(this.comparator,this.items.slice())};ss.prototype.inspect=function(){var i=this.toArray();return Object.defineProperty(i,"constructor",{value:ss,enumerable:!1}),i};typeof Symbol<"u"&&(ss.prototype[Symbol.for("nodejs.util.inspect.custom")]=ss.prototype.inspect);function nO(i){if(this.clear(),this.comparator=i||B5,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=vY(this.comparator)}nO.prototype=ss.prototype;ss.from=function(i,e){var t=new ss(e),n;return Bd.isArrayLike(i)?n=i.slice():n=Bd.toArray(i),Hv(t.comparator,n),t.items=n,t.size=n.length,t};nO.from=function(i,e){var t=new nO(e),n;return Bd.isArrayLike(i)?n=i.slice():n=Bd.toArray(i),Hv(t.comparator,n),t.items=n,t.size=n.length,t};ss.siftUp=Fk;ss.siftDown=yY;ss.push=Nwe;ss.pop=bY;ss.replace=bC;ss.pushpop=Rwe;ss.heapify=Hv;ss.consume=wY;ss.nsmallest=uCt;ss.nlargest=hCt;ss.MinHeap=ss;ss.MaxHeap=nO;var Pwe=ss,Owe=qg,CY=C1.createEdgeWeightGetter,iO=Pwe,SY="weight";function C$(i,e){return i[0]>e[0]?1:i[0]<e[0]?-1:i[1]>e[1]?1:i[1]<e[1]?-1:i[2]>e[2]?1:i[2]<e[2]?-1:0}function dCt(i,e){return i[0]>e[0]?1:i[0]<e[0]?-1:i[1]>e[1]?1:i[1]<e[1]?-1:i[2]>e[2]?1:i[2]<e[2]?-1:i[3]>e[3]?1:i[3]<e[3]?-1:0}function fCt(i,e,t,n){if(e=""+e,t=""+t,!Owe(i))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!i.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(t&&!i.hasNode(t))throw new Error('graphology-shortest-path/dijkstra: the "'+t+'" target node does not exist in the given graph.');if(n=CY(n||SY).fromMinimalEntry,e===t)return[0,[e]];var s=[{},{}],r=[{},{}],o=[new iO(C$),new iO(C$)],a=[{},{}];r[0][e]=[e],r[1][t]=[t],a[0][e]=0,a[1][t]=0;var l=[],c=1/0,u=0,h=1,d,f,g,p,_,m,v,y,C;for(o[0].push([0,u++,e]),o[1].push([0,u++,t]);o[0].size&&o[1].size;)if(h=1-h,d=o[h].pop(),p=d[0],_=d[2],!(_ in s[h])){if(s[h][_]=p,_ in s[1-h])return[c,l];for(f=h===1?i.inboundEdges(_):i.outboundEdges(_),y=0,C=f.length;y<C;y++){if(v=f[y],m=i.opposite(_,v),g=s[h][_]+n(v,i.getEdgeAttributes(v)),m in s[h]&&g<s[h][m])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(m in a[h])||g<a[h][m])&&(a[h][m]=g,o[h].push([g,u++,m]),r[h][m]=r[h][_].concat(m),m in a[0]&&m in a[1]&&(p=a[0][m]+a[1][m],(l.length===0||c>p)&&(c=p,l=r[0][m].concat(r[1][m].slice(0,-1).reverse()))))}}return[1/0,null]}function gCt(i,e,t,n,s,r){if(!Owe(i))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");t=CY(t||SY).fromMinimalEntry;var o={},a={},l=new iO(C$),c=0,u,h,d,f,g,p,_,m,v,y,C;for(m=0,y=e.length;m<y;m++)f=e[m],a[f]=0,l.push([0,c++,f]),r&&(r[f]=[f]);for(;l.size;)if(h=l.pop(),_=h[0],f=h[2],!(f in o)){if(o[f]=_,f===s)break;for(u=i.outboundEdges(f),v=0,C=u.length;v<C;v++){if(p=u[v],g=i.opposite(f,p),d=t(p,i.getEdgeAttributes(p))+o[f],g in o&&d<o[g])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(g in a)||d<a[g])&&(a[g]=d,l.push([d,c++,g]),r&&(r[g]=r[f].concat(g)))}}return o}function pCt(i,e,t){var n={};return gCt(i,[e],t,0,null,n),n}function mCt(i,e,t,n){return fCt(i,e,t,n)[1]}function _Ct(i,e,t){e=""+e,t=CY(t||SY).fromMinimalEntry;var n=[],s={},r={},o=i.nodes(),a,l,c,u,h,d,f,g,p,_;for(p=0,_=o.length;p<_;p++)d=o[p],s[d]=[],r[d]=0;var m={};r[e]=1;var v={};v[e]=0;var y=0,C=new iO(dCt);for(C.push([0,y++,e,e]);C.size;)if(l=C.pop(),u=l[0],c=l[2],d=l[3],!(d in m))for(r[d]+=r[c],n.push(d),m[d]=u,a=i.outboundEdges(d),p=0,_=a.length;p<_;p++)g=a[p],f=i.opposite(d,g),h=u+t(g,i.getEdgeAttributes(g)),!(f in m)&&(!(f in v)||h<v[f])?(v[f]=h,C.push([h,y++,d,f]),r[f]=0,s[f]=[d]):h===v[f]&&(r[f]+=r[d],s[f].push(d));return[n,s,r]}mY.bidirectional=mCt;mY.singleSource=pCt;mY.brandes=_Ct;var vCt={},yCt=qg,bCt=C1.createEdgeWeightGetter,wCt=Pwe,CCt="weight";function SCt(i,e){return i[0]>e[0]?1:i[0]<e[0]?-1:i[1]>e[1]?1:i[1]<e[1]?-1:0}function xCt(i,e,t,n,s,r){if(!yCt(i))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(e&&!i.hasNode(e))throw new Error('graphology-shortest-path/astar: the "'+e+'" source node does not exist in the given graph.');if(t&&!i.hasNode(t))throw new Error('graphology-shortest-path/astar: the "'+t+'" target node does not exist in the given graph.');if(n=bCt(n||CCt).fromMinimalEntry,e===t)return[e];s=s||function(){return 0},r=r||{};var o=0,a=new wCt(SCt);a.push([0,o++,e,0,null]);var l={},c={},u,h,d,f,g,p,_,m,v,y,C,S;function x(E,L,T,D){if(S=h===T?D:T,y=n(E,L),y!==null){if(C=f+y,l.hasOwnProperty(S)){if(d=l[S],m=d[0],v=d[1],m<=C)return}else v=s(S,t);r.cutoff&&C+v>r.cutoff||(l[S]=[C,v],a.push([C+v,o++,S,C,h]))}}for(;a.size!==0;){if(u=a.pop(),h=u[2],f=u[3],g=u[4],h===t){for(p=[h],_=g;_!==null;)p.push(_),_=c[_];return p.reverse(),p}c.hasOwnProperty(h)&&(c[h]===null||(m=l[h][0],m<f))||(c[h]=g,i.forEachOutboundEdge(h,x))}return null}vCt.bidirectional=xCt;var Bk=oS;Bk.bidirectional;Bk.singleSource;Bk.singleSourceLength;Bk.undirectedSingleSourceLength;Bk.brandes;var xY={exports:{}},Lw=typeof Reflect=="object"?Reflect:null,vce=Lw&&typeof Lw.apply=="function"?Lw.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},lN;Lw&&typeof Lw.ownKeys=="function"?lN=Lw.ownKeys:Object.getOwnPropertySymbols?lN=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:lN=function(e){return Object.getOwnPropertyNames(e)};function ECt(i){console&&console.warn&&console.warn(i)}var Fwe=Number.isNaN||function(e){return e!==e};function cs(){cs.init.call(this)}xY.exports=cs;xY.exports.once=MCt;cs.EventEmitter=cs;cs.prototype._events=void 0;cs.prototype._eventsCount=0;cs.prototype._maxListeners=void 0;var yce=10;function z5(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(cs,"defaultMaxListeners",{enumerable:!0,get:function(){return yce},set:function(i){if(typeof i!="number"||i<0||Fwe(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");yce=i}});cs.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};cs.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Fwe(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Bwe(i){return i._maxListeners===void 0?cs.defaultMaxListeners:i._maxListeners}cs.prototype.getMaxListeners=function(){return Bwe(this)};cs.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s=e==="error",r=this._events;if(r!==void 0)s=s&&r.error===void 0;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=r[e];if(l===void 0)return!1;if(typeof l=="function")vce(l,this,t);else for(var c=l.length,u=Hwe(l,c),n=0;n<c;++n)vce(u[n],this,t);return!0};function zwe(i,e,t,n){var s,r,o;if(z5(t),r=i._events,r===void 0?(r=i._events=Object.create(null),i._eventsCount=0):(r.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),r=i._events),o=r[e]),o===void 0)o=r[e]=t,++i._eventsCount;else if(typeof o=="function"?o=r[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),s=Bwe(i),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=i,a.type=e,a.count=o.length,ECt(a)}return i}cs.prototype.addListener=function(e,t){return zwe(this,e,t,!1)};cs.prototype.on=cs.prototype.addListener;cs.prototype.prependListener=function(e,t){return zwe(this,e,t,!0)};function LCt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Uwe(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},s=LCt.bind(n);return s.listener=t,n.wrapFn=s,s}cs.prototype.once=function(e,t){return z5(t),this.on(e,Uwe(this,e,t)),this};cs.prototype.prependOnceListener=function(e,t){return z5(t),this.prependListener(e,Uwe(this,e,t)),this};cs.prototype.removeListener=function(e,t){var n,s,r,o,a;if(z5(t),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;r===0?n.shift():TCt(n,r),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};cs.prototype.off=cs.prototype.removeListener;cs.prototype.removeAllListeners=function(e){var t,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var r=Object.keys(n),o;for(s=0;s<r.length;++s)o=r[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this};function Vwe(i,e,t){var n=i._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?kCt(s):Hwe(s,s.length)}cs.prototype.listeners=function(e){return Vwe(this,e,!0)};cs.prototype.rawListeners=function(e){return Vwe(this,e,!1)};cs.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Wwe.call(i,e)};cs.prototype.listenerCount=Wwe;function Wwe(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}cs.prototype.eventNames=function(){return this._eventsCount>0?lN(this._events):[]};function Hwe(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function TCt(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function kCt(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function MCt(i,e){return new Promise(function(t,n){function s(o){i.removeListener(e,r),n(o)}function r(){typeof i.removeListener=="function"&&i.removeListener("error",s),t([].slice.call(arguments))}$we(i,e,r,{once:!0}),e!=="error"&&DCt(i,s,{once:!0})})}function DCt(i,e,t){typeof i.on=="function"&&$we(i,"error",e,t)}function $we(i,e,t,n){if(typeof i.on=="function")n.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function s(r){n.once&&i.removeEventListener(e,s),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var ACt=xY.exports,ICt=O5,Gwe=F5,NCt=Gwe.ARRAY_BUFFER_SUPPORT,RCt=Gwe.SYMBOL_SUPPORT;function PCt(i){return typeof i=="string"||Array.isArray(i)||NCt&&ArrayBuffer.isView(i)?ICt.fromSequence(i):typeof i!="object"||i===null?null:RCt&&typeof i[Symbol.iterator]=="function"?i[Symbol.iterator]():typeof i.next=="function"?i:null}var jwe=function(e){var t=PCt(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},OCt=jwe,FCt=function(e,t){for(var n=arguments.length>1?t:1/0,s=n!==1/0?new Array(n):[],r,o=0,a=OCt(e);;){if(o===n)return s;if(r=a.next(),r.done)return o!==t&&(s.length=o),s;s[o++]=r.value}};const Kwe=Mi(FCt);var BCt=O5,zCt=jwe,UCt=function(){var e=arguments,t=null,n=-1;return new BCt(function(){var r=null;do{if(t===null){if(n++,n>=e.length)return{done:!0};t=zCt(e[n])}if(r=t.next(),r.done===!0){t=null;continue}break}while(!0);return r})};const Lg=Mi(UCt);function VCt(){const i=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const n in arguments[e])i[n]=arguments[e][n];return i}let ro=VCt;typeof Object.assign=="function"&&(ro=Object.assign);function yu(i,e,t,n){const s=i._nodes.get(e);let r=null;return s&&(n==="mixed"?r=s.out&&s.out[t]||s.undirected&&s.undirected[t]:n==="directed"?r=s.out&&s.out[t]:r=s.undirected&&s.undirected[t]),r}function $o(i){return typeof i=="object"&&i!==null}function qwe(i){let e;for(e in i)return!1;return!0}function Gc(i,e,t){Object.defineProperty(i,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Gu(i,e,t){const n={enumerable:!0,configurable:!0};typeof t=="function"?n.get=t:(n.value=t,n.writable=!1),Object.defineProperty(i,e,n)}function bce(i){return!(!$o(i)||i.attributes&&!Array.isArray(i.attributes))}function WCt(){let i=Math.floor(Math.random()*256)&255;return()=>i++}class EY extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class $t extends EY{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$t.prototype.constructor)}}class Dt extends EY{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Dt.prototype.constructor)}}class vn extends EY{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,vn.prototype.constructor)}}function Xwe(i,e){this.key=i,this.attributes=e,this.clear()}Xwe.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Ywe(i,e){this.key=i,this.attributes=e,this.clear()}Ywe.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Zwe(i,e){this.key=i,this.attributes=e,this.clear()}Zwe.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function aS(i,e,t,n,s){this.key=e,this.attributes=s,this.undirected=i,this.source=t,this.target=n}aS.prototype.attach=function(){let i="out",e="in";this.undirected&&(i=e="undirected");const t=this.source.key,n=this.target.key;this.source[i][n]=this,!(this.undirected&&t===n)&&(this.target[e][t]=this)};aS.prototype.attachMulti=function(){let i="out",e="in";const t=this.source.key,n=this.target.key;this.undirected&&(i=e="undirected");const s=this.source[i],r=s[n];if(typeof r>"u"){s[n]=this,this.undirected&&t===n||(this.target[e][t]=this);return}r.previous=this,this.next=r,s[n]=this,this.target[e][t]=this};aS.prototype.detach=function(){const i=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),delete this.source[t][e],delete this.target[n][i]};aS.prototype.detachMulti=function(){const i=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[n][i]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[n][i]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Qwe=0,Jwe=1,HCt=2,eCe=3;function Yg(i,e,t,n,s,r,o){let a,l,c,u;if(n=""+n,t===Qwe){if(a=i._nodes.get(n),!a)throw new Dt(`Graph.${e}: could not find the "${n}" node in the graph.`);c=s,u=r}else if(t===eCe){if(s=""+s,l=i._edges.get(s),!l)throw new Dt(`Graph.${e}: could not find the "${s}" edge in the graph.`);const h=l.source.key,d=l.target.key;if(n===h)a=l.target;else if(n===d)a=l.source;else throw new Dt(`Graph.${e}: the "${n}" node is not attached to the "${s}" edge (${h}, ${d}).`);c=r,u=o}else{if(l=i._edges.get(n),!l)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`);t===Jwe?a=l.source:a=l.target,c=s,u=r}return[a,c,u]}function $Ct(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);return o.attributes[a]}}function GCt(i,e,t){i.prototype[e]=function(n,s){const[r]=Yg(this,e,t,n,s);return r.attributes}}function jCt(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);return o.attributes.hasOwnProperty(a)}}function KCt(i,e,t){i.prototype[e]=function(n,s,r,o){const[a,l,c]=Yg(this,e,t,n,s,r,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function qCt(i,e,t){i.prototype[e]=function(n,s,r,o){const[a,l,c]=Yg(this,e,t,n,s,r,o);if(typeof c!="function")throw new $t(`Graph.${e}: updater should be a function.`);const u=a.attributes,h=c(u[l]);return u[l]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function XCt(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function YCt(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);if(!$o(a))throw new $t(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ZCt(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);if(!$o(a))throw new $t(`Graph.${e}: provided attributes are not a plain object.`);return ro(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function QCt(i,e,t){i.prototype[e]=function(n,s,r){const[o,a]=Yg(this,e,t,n,s,r);if(typeof a!="function")throw new $t(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const JCt=[{name:i=>`get${i}Attribute`,attacher:$Ct},{name:i=>`get${i}Attributes`,attacher:GCt},{name:i=>`has${i}Attribute`,attacher:jCt},{name:i=>`set${i}Attribute`,attacher:KCt},{name:i=>`update${i}Attribute`,attacher:qCt},{name:i=>`remove${i}Attribute`,attacher:XCt},{name:i=>`replace${i}Attributes`,attacher:YCt},{name:i=>`merge${i}Attributes`,attacher:ZCt},{name:i=>`update${i}Attributes`,attacher:QCt}];function eSt(i){JCt.forEach(function({name:e,attacher:t}){t(i,e("Node"),Qwe),t(i,e("Source"),Jwe),t(i,e("Target"),HCt),t(i,e("Opposite"),eCe)})}function tSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return r.attributes[s]}}function nSt(i,e,t){i.prototype[e]=function(n){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const r=""+n,o=""+arguments[1];if(s=yu(this,r,o,t),!s)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${r}" - "${o}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return s.attributes}}function iSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return r.attributes.hasOwnProperty(s)}}function sSt(i,e,t){i.prototype[e]=function(n,s,r){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,l=""+s;if(s=arguments[2],r=arguments[3],o=yu(this,a,l,t),!o)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return o.attributes[s]=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:s}),this}}function rSt(i,e,t){i.prototype[e]=function(n,s,r){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,l=""+s;if(s=arguments[2],r=arguments[3],o=yu(this,a,l,t),!o)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof r!="function")throw new $t(`Graph.${e}: updater should be a function.`);return o.attributes[s]=r(o.attributes[s]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:s}),this}}function oSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return delete r.attributes[s],this.emit("edgeAttributesUpdated",{key:r.key,type:"remove",attributes:r.attributes,name:s}),this}}function aSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!$o(s))throw new $t(`Graph.${e}: provided attributes are not a plain object.`);return r.attributes=s,this.emit("edgeAttributesUpdated",{key:r.key,type:"replace",attributes:r.attributes}),this}}function lSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!$o(s))throw new $t(`Graph.${e}: provided attributes are not a plain object.`);return ro(r.attributes,s),this.emit("edgeAttributesUpdated",{key:r.key,type:"merge",attributes:r.attributes,data:s}),this}}function cSt(i,e,t){i.prototype[e]=function(n,s){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new vn(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new vn(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,a=""+s;if(s=arguments[2],r=yu(this,o,a,t),!r)throw new Dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new vn(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new Dt(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof s!="function")throw new $t(`Graph.${e}: provided updater is not a function.`);return r.attributes=s(r.attributes),this.emit("edgeAttributesUpdated",{key:r.key,type:"update",attributes:r.attributes}),this}}const uSt=[{name:i=>`get${i}Attribute`,attacher:tSt},{name:i=>`get${i}Attributes`,attacher:nSt},{name:i=>`has${i}Attribute`,attacher:iSt},{name:i=>`set${i}Attribute`,attacher:sSt},{name:i=>`update${i}Attribute`,attacher:rSt},{name:i=>`remove${i}Attribute`,attacher:oSt},{name:i=>`replace${i}Attributes`,attacher:aSt},{name:i=>`merge${i}Attributes`,attacher:lSt},{name:i=>`update${i}Attributes`,attacher:cSt}];function hSt(i){uSt.forEach(function({name:e,attacher:t}){t(i,e("Edge"),"mixed"),t(i,e("DirectedEdge"),"directed"),t(i,e("UndirectedEdge"),"undirected")})}const dSt=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function fSt(i,e,t,n){let s=!1;for(const r in e){if(r===n)continue;const o=e[r];if(s=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),i&&s)return o.key}}function gSt(i,e,t,n){let s,r,o,a=!1;for(const l in e)if(l!==n){s=e[l];do{if(r=s.source,o=s.target,a=t(s.key,s.attributes,r.key,o.key,r.attributes,o.attributes,s.undirected),i&&a)return s.key;s=s.next}while(s!==void 0)}}function r7(i,e){const t=Object.keys(i),n=t.length;let s,r=0;return new Tu(function(){do if(s)s=s.next;else{if(r>=n)return{done:!0};const a=t[r++];if(a===e){s=void 0;continue}s=i[a]}while(!s);return{done:!1,value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected}}})}function pSt(i,e,t,n){const s=e[t];if(!s)return;const r=s.source,o=s.target;if(n(s.key,s.attributes,r.key,o.key,r.attributes,o.attributes,s.undirected)&&i)return s.key}function mSt(i,e,t,n){let s=e[t];if(!s)return;let r=!1;do{if(r=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),i&&r)return s.key;s=s.next}while(s!==void 0)}function o7(i,e){let t=i[e];return t.next!==void 0?new Tu(function(){if(!t)return{done:!0};const n={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:n}}):Tu.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function _St(i,e){if(i.size===0)return[];if(e==="mixed"||e===i.type)return typeof Array.from=="function"?Array.from(i._edges.keys()):Kwe(i._edges.keys(),i._edges.size);const t=e==="undirected"?i.undirectedSize:i.directedSize,n=new Array(t),s=e==="undirected",r=i._edges.values();let o=0,a,l;for(;a=r.next(),a.done!==!0;)l=a.value,l.undirected===s&&(n[o++]=l.key);return n}function tCe(i,e,t,n){if(e.size===0)return;const s=t!=="mixed"&&t!==e.type,r=t==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,s&&a.undirected!==r)continue;const{key:u,attributes:h,source:d,target:f}=a;if(l=n(u,h,d.key,f.key,d.attributes,f.attributes,a.undirected),i&&l)return u}}function vSt(i,e){if(i.size===0)return Tu.empty();const t=e!=="mixed"&&e!==i.type,n=e==="undirected",s=i._edges.values();return new Tu(function(){let o,a;for(;;){if(o=s.next(),o.done)return o;if(a=o.value,!(t&&a.undirected!==n))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function LY(i,e,t,n,s,r){const o=e?gSt:fSt;let a;if(t!=="undirected"&&(n!=="out"&&(a=o(i,s.in,r),i&&a)||n!=="in"&&(a=o(i,s.out,r,n?void 0:s.key),i&&a))||t!=="directed"&&(a=o(i,s.undirected,r),i&&a))return a}function ySt(i,e,t,n){const s=[];return LY(!1,i,e,t,n,function(r){s.push(r)}),s}function bSt(i,e,t){let n=Tu.empty();return i!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(n=Lg(n,r7(t.in))),e!=="in"&&typeof t.out<"u"&&(n=Lg(n,r7(t.out,e?void 0:t.key)))),i!=="directed"&&typeof t.undirected<"u"&&(n=Lg(n,r7(t.undirected))),n}function TY(i,e,t,n,s,r,o){const a=t?mSt:pSt;let l;if(e!=="undirected"&&(typeof s.in<"u"&&n!=="out"&&(l=a(i,s.in,r,o),i&&l)||typeof s.out<"u"&&n!=="in"&&(n||s.key!==r)&&(l=a(i,s.out,r,o),i&&l))||e!=="directed"&&typeof s.undirected<"u"&&(l=a(i,s.undirected,r,o),i&&l))return l}function wSt(i,e,t,n,s){const r=[];return TY(!1,i,e,t,n,s,function(o){r.push(o)}),r}function CSt(i,e,t,n){let s=Tu.empty();return i!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&n in t.in&&(s=Lg(s,o7(t.in,n))),typeof t.out<"u"&&e!=="in"&&n in t.out&&(e||t.key!==n)&&(s=Lg(s,o7(t.out,n)))),i!=="directed"&&typeof t.undirected<"u"&&n in t.undirected&&(s=Lg(s,o7(t.undirected,n))),s}function SSt(i,e){const{name:t,type:n,direction:s}=e;i.prototype[t]=function(r,o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return _St(this,n);if(arguments.length===1){r=""+r;const a=this._nodes.get(r);if(typeof a>"u")throw new Dt(`Graph.${t}: could not find the "${r}" node in the graph.`);return ySt(this.multi,n==="mixed"?this.type:n,s,a)}if(arguments.length===2){r=""+r,o=""+o;const a=this._nodes.get(r);if(!a)throw new Dt(`Graph.${t}:  could not find the "${r}" source node in the graph.`);if(!this._nodes.has(o))throw new Dt(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return wSt(n,this.multi,s,a,o)}throw new $t(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function xSt(i,e){const{name:t,type:n,direction:s}=e,r="forEach"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[r]=function(c,u,h){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return h=c,tCe(!1,this,n,h);if(arguments.length===2){c=""+c,h=u;const d=this._nodes.get(c);if(typeof d>"u")throw new Dt(`Graph.${r}: could not find the "${c}" node in the graph.`);return LY(!1,this.multi,n==="mixed"?this.type:n,s,d,h)}if(arguments.length===3){c=""+c,u=""+u;const d=this._nodes.get(c);if(!d)throw new Dt(`Graph.${r}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new Dt(`Graph.${r}:  could not find the "${u}" target node in the graph.`);return TY(!1,n,this.multi,s,d,u,h)}throw new $t(`Graph.${r}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);i.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let h;if(c.length===0){let d=0;n!=="directed"&&(d+=this.undirectedSize),n!=="undirected"&&(d+=this.directedSize),h=new Array(d);let f=0;c.push((g,p,_,m,v,y,C)=>{h[f++]=u(g,p,_,m,v,y,C)})}else h=[],c.push((d,f,g,p,_,m,v)=>{h.push(u(d,f,g,p,_,m,v))});return this[r].apply(this,c),h};const a="filter"+t[0].toUpperCase()+t.slice(1);i.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),h=[];return c.push((d,f,g,p,_,m,v)=>{u(d,f,g,p,_,m,v)&&h.push(d)}),this[r].apply(this,c),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);i.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new $t(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new $t(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,h;c.length===2?(u=c[0],h=c[1],c=[]):c.length===3?(u=c[1],h=c[2],c=[c[0]]):c.length===4&&(u=c[2],h=c[3],c=[c[0],c[1]]);let d=h;return c.push((f,g,p,_,m,v,y)=>{d=u(d,f,g,p,_,m,v,y)}),this[r].apply(this,c),d}}function ESt(i,e){const{name:t,type:n,direction:s}=e,r="find"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[r]=function(l,c,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return u=l,tCe(!0,this,n,u);if(arguments.length===2){l=""+l,u=c;const h=this._nodes.get(l);if(typeof h>"u")throw new Dt(`Graph.${r}: could not find the "${l}" node in the graph.`);return LY(!0,this.multi,n==="mixed"?this.type:n,s,h,u)}if(arguments.length===3){l=""+l,c=""+c;const h=this._nodes.get(l);if(!h)throw new Dt(`Graph.${r}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new Dt(`Graph.${r}:  could not find the "${c}" target node in the graph.`);return TY(!0,n,this.multi,s,h,c,u)}throw new $t(`Graph.${r}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,_,m)=>c(h,d,f,g,p,_,m)),!!this[r].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,_,m)=>!c(h,d,f,g,p,_,m)),!this[r].apply(this,l)}}function LSt(i,e){const{name:t,type:n,direction:s}=e,r=t.slice(0,-1)+"Entries";i.prototype[r]=function(o,a){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Tu.empty();if(!arguments.length)return vSt(this,n);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new Dt(`Graph.${r}: could not find the "${o}" node in the graph.`);return bSt(n,s,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new Dt(`Graph.${r}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new Dt(`Graph.${r}:  could not find the "${a}" target node in the graph.`);return CSt(n,s,l,a)}throw new $t(`Graph.${r}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function TSt(i){dSt.forEach(e=>{SSt(i,e),xSt(i,e),ESt(i,e),LSt(i,e)})}const kSt=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function U5(){this.A=null,this.B=null}U5.prototype.wrap=function(i){this.A===null?this.A=i:this.B===null&&(this.B=i)};U5.prototype.has=function(i){return this.A!==null&&i in this.A||this.B!==null&&i in this.B};function zx(i,e,t,n,s){for(const r in n){const o=n[r],a=o.source,l=o.target,c=a===t?l:a;if(e&&e.has(c.key))continue;const u=s(c.key,c.attributes);if(i&&u)return c.key}}function kY(i,e,t,n,s){if(e!=="mixed"){if(e==="undirected")return zx(i,null,n,n.undirected,s);if(typeof t=="string")return zx(i,null,n,n[t],s)}const r=new U5;let o;if(e!=="undirected"){if(t!=="out"){if(o=zx(i,null,n,n.in,s),i&&o)return o;r.wrap(n.in)}if(t!=="in"){if(o=zx(i,r,n,n.out,s),i&&o)return o;r.wrap(n.out)}}if(e!=="directed"&&(o=zx(i,r,n,n.undirected,s),i&&o))return o}function MSt(i,e,t){if(i!=="mixed"){if(i==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const n=[];return kY(!1,i,e,t,function(s){n.push(s)}),n}function Ux(i,e,t){const n=Object.keys(t),s=n.length;let r=0;return new Tu(function(){let a=null;do{if(r>=s)return i&&i.wrap(t),{done:!0};const l=t[n[r++]],c=l.source,u=l.target;if(a=c===e?u:c,i&&i.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function DSt(i,e,t){if(i!=="mixed"){if(i==="undirected")return Ux(null,t,t.undirected);if(typeof e=="string")return Ux(null,t,t[e])}let n=Tu.empty();const s=new U5;return i!=="undirected"&&(e!=="out"&&(n=Lg(n,Ux(s,t,t.in))),e!=="in"&&(n=Lg(n,Ux(s,t,t.out)))),i!=="directed"&&(n=Lg(n,Ux(s,t,t.undirected))),n}function ASt(i,e){const{name:t,type:n,direction:s}=e;i.prototype[t]=function(r){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];r=""+r;const o=this._nodes.get(r);if(typeof o>"u")throw new Dt(`Graph.${t}: could not find the "${r}" node in the graph.`);return MSt(n==="mixed"?this.type:n,s,o)}}function ISt(i,e){const{name:t,type:n,direction:s}=e,r="forEach"+t[0].toUpperCase()+t.slice(1,-1);i.prototype[r]=function(c,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new Dt(`Graph.${r}: could not find the "${c}" node in the graph.`);kY(!1,n==="mixed"?this.type:n,s,h,u)};const o="map"+t[0].toUpperCase()+t.slice(1);i.prototype[o]=function(c,u){const h=[];return this[r](c,(d,f)=>{h.push(u(d,f))}),h};const a="filter"+t[0].toUpperCase()+t.slice(1);i.prototype[a]=function(c,u){const h=[];return this[r](c,(d,f)=>{u(d,f)&&h.push(d)}),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);i.prototype[l]=function(c,u,h){if(arguments.length<3)throw new $t(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=h;return this[r](c,(f,g)=>{d=u(d,f,g)}),d}}function NSt(i,e){const{name:t,type:n,direction:s}=e,r=t[0].toUpperCase()+t.slice(1,-1),o="find"+r;i.prototype[o]=function(c,u){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new Dt(`Graph.${o}: could not find the "${c}" node in the graph.`);return kY(!0,n==="mixed"?this.type:n,s,h,u)};const a="some"+r;i.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+r;i.prototype[l]=function(c,u){return!this[o](c,(d,f)=>!u(d,f))}}function RSt(i,e){const{name:t,type:n,direction:s}=e,r=t.slice(0,-1)+"Entries";i.prototype[r]=function(o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Tu.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new Dt(`Graph.${r}: could not find the "${o}" node in the graph.`);return DSt(n==="mixed"?this.type:n,s,a)}}function PSt(i){kSt.forEach(e=>{ASt(i,e),ISt(i,e),NSt(i,e),RSt(i,e)})}function jA(i,e,t,n,s){const r=n._nodes.values(),o=n.type;let a,l,c,u,h,d;for(;a=r.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){h=u[c];do d=h.target,f=!0,s(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){h=u[c];do d=h.target,d.key!==c&&(d=h.source),f=!0,s(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}t&&!f&&s(l.key,null,l.attributes,null,null,null,null)}}function OSt(i,e){const t={key:i};return qwe(e.attributes)||(t.attributes=ro({},e.attributes)),t}function FSt(i,e,t){const n={key:e,source:t.source.key,target:t.target.key};return qwe(t.attributes)||(n.attributes=ro({},t.attributes)),i==="mixed"&&t.undirected&&(n.undirected=!0),n}function BSt(i){if(!$o(i))throw new $t('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in i))throw new $t("Graph.import: serialized node is missing its key.");if("attributes"in i&&(!$o(i.attributes)||i.attributes===null))throw new $t("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function zSt(i){if(!$o(i))throw new $t('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in i))throw new $t("Graph.import: serialized edge is missing its source.");if(!("target"in i))throw new $t("Graph.import: serialized edge is missing its target.");if("attributes"in i&&(!$o(i.attributes)||i.attributes===null))throw new $t("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in i&&typeof i.undirected!="boolean")throw new $t("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const USt=WCt(),VSt=new Set(["directed","undirected","mixed"]),wce=new Set(["domain","_events","_eventsCount","_maxListeners"]),WSt=[{name:i=>`${i}Edge`,generateKey:!0},{name:i=>`${i}DirectedEdge`,generateKey:!0,type:"directed"},{name:i=>`${i}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:i=>`${i}EdgeWithKey`},{name:i=>`${i}DirectedEdgeWithKey`,type:"directed"},{name:i=>`${i}UndirectedEdgeWithKey`,type:"undirected"}],HSt={allowSelfLoops:!0,multi:!1,type:"mixed"};function $St(i,e,t){if(t&&!$o(t))throw new $t(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},i._nodes.has(e))throw new vn(`Graph.addNode: the "${e}" node already exist in the graph.`);const n=new i.NodeDataClass(e,t);return i._nodes.set(e,n),i.emit("nodeAdded",{key:e,attributes:t}),n}function Cce(i,e,t){const n=new i.NodeDataClass(e,t);return i._nodes.set(e,n),i.emit("nodeAdded",{key:e,attributes:t}),n}function nCe(i,e,t,n,s,r,o,a){if(!n&&i.type==="undirected")throw new vn(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&i.type==="directed")throw new vn(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!$o(a))throw new $t(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(r=""+r,o=""+o,a=a||{},!i.allowSelfLoops&&r===o)throw new vn(`Graph.${e}: source & target are the same ("${r}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=i._nodes.get(r),c=i._nodes.get(o);if(!l)throw new Dt(`Graph.${e}: source node "${r}" not found.`);if(!c)throw new Dt(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:n,source:r,target:o,attributes:a};if(t)s=i._edgeKeyGenerator();else if(s=""+s,i._edges.has(s))throw new vn(`Graph.${e}: the "${s}" edge already exists in the graph.`);if(!i.multi&&(n?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new vn(`Graph.${e}: an edge linking "${r}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new aS(n,s,l,c,a);i._edges.set(s,h);const d=r===o;return n?(l.undirectedDegree++,c.undirectedDegree++,d&&(l.undirectedLoops++,i._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,d&&(l.directedLoops++,i._directedSelfLoopCount++)),i.multi?h.attachMulti():h.attach(),n?i._undirectedSize++:i._directedSize++,u.key=s,i.emit("edgeAdded",u),s}function GSt(i,e,t,n,s,r,o,a,l){if(!n&&i.type==="undirected")throw new vn(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&i.type==="directed")throw new vn(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new $t(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!$o(a))throw new $t(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}r=""+r,o=""+o;let c;if(l&&(c=a,a=void 0),!i.allowSelfLoops&&r===o)throw new vn(`Graph.${e}: source & target are the same ("${r}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=i._nodes.get(r),h=i._nodes.get(o),d,f;if(!t&&(d=i._edges.get(s),d)){if((d.source.key!==r||d.target.key!==o)&&(!n||d.source.key!==o||d.target.key!==r))throw new vn(`Graph.${e}: inconsistency detected when attempting to merge the "${s}" edge with "${r}" source & "${o}" target vs. ("${d.source.key}", "${d.target.key}").`);f=d}if(!f&&!i.multi&&u&&(f=n?u.undirected[o]:u.out[o]),f){const v=[f.key,!1,!1,!1];if(l?!c:!a)return v;if(l){const y=f.attributes;f.attributes=c(y),i.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else ro(f.attributes,a),i.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return v}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:n,source:r,target:o,attributes:a};if(t)s=i._edgeKeyGenerator();else if(s=""+s,i._edges.has(s))throw new vn(`Graph.${e}: the "${s}" edge already exists in the graph.`);let p=!1,_=!1;u||(u=Cce(i,r,{}),p=!0,r===o&&(h=u,_=!0)),h||(h=Cce(i,o,{}),_=!0),d=new aS(n,s,u,h,a),i._edges.set(s,d);const m=r===o;return n?(u.undirectedDegree++,h.undirectedDegree++,m&&(u.undirectedLoops++,i._undirectedSelfLoopCount++)):(u.outDegree++,h.inDegree++,m&&(u.directedLoops++,i._directedSelfLoopCount++)),i.multi?d.attachMulti():d.attach(),n?i._undirectedSize++:i._directedSize++,g.key=s,i.emit("edgeAdded",g),[s,!0,p,_]}function My(i,e){i._edges.delete(e.key);const{source:t,target:n,attributes:s}=e,r=e.undirected,o=t===n;r?(t.undirectedDegree--,n.undirectedDegree--,o&&(t.undirectedLoops--,i._undirectedSelfLoopCount--)):(t.outDegree--,n.inDegree--,o&&(t.directedLoops--,i._directedSelfLoopCount--)),i.multi?e.detachMulti():e.detach(),r?i._undirectedSize--:i._directedSize--,i.emit("edgeDropped",{key:e.key,attributes:s,source:t.key,target:n.key,undirected:r})}class us extends ACt.EventEmitter{constructor(e){if(super(),e=ro({},HSt,e),typeof e.multi!="boolean")throw new $t(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!VSt.has(e.type))throw new $t(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new $t(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?Xwe:e.type==="directed"?Ywe:Zwe;Gc(this,"NodeDataClass",t);const n="geid_"+USt()+"_";let s=0;const r=()=>{let o;do o=n+s++;while(this._edges.has(o));return o};Gc(this,"_attributes",{}),Gc(this,"_nodes",new Map),Gc(this,"_edges",new Map),Gc(this,"_directedSize",0),Gc(this,"_undirectedSize",0),Gc(this,"_directedSelfLoopCount",0),Gc(this,"_undirectedSelfLoopCount",0),Gc(this,"_edgeKeyGenerator",r),Gc(this,"_options",e),wce.forEach(o=>Gc(this,o,this[o])),Gu(this,"order",()=>this._nodes.size),Gu(this,"size",()=>this._edges.size),Gu(this,"directedSize",()=>this._directedSize),Gu(this,"undirectedSize",()=>this._undirectedSize),Gu(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Gu(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Gu(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Gu(this,"multi",this._options.multi),Gu(this,"type",this._options.type),Gu(this,"allowSelfLoops",this._options.allowSelfLoops),Gu(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+e,s=this._edges.get(n);return!!s&&!s.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.out.hasOwnProperty(t):!1}throw new $t(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+e,s=this._edges.get(n);return!!s&&s.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.undirected.hasOwnProperty(t):!1}throw new $t(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const n=""+e;return this._edges.has(n)}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?typeof n.out<"u"&&n.out.hasOwnProperty(t)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(t):!1}throw new $t(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new vn("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new Dt(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const s=n.out&&n.out[t]||void 0;if(s)return s.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new vn("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new Dt(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const s=n.undirected&&n.undirected[t]||void 0;if(s)return s.key}edge(e,t){if(this.multi)throw new vn("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new Dt(`Graph.edge: could not find the "${t}" target node in the graph.`);const s=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(s)return s.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in||t in n.out}areOutNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.out}areInNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in n.undirected}areNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in n.in||t in n.out)||this.type!=="directed"&&t in n.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.in||this.type!=="directed"&&t in n.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new Dt(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.out||this.type!=="directed"&&t in n.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree),n}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.outDegree),n}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.degree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree),n}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,s=0;return this.type!=="directed"&&(n+=t.undirectedDegree,s+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree,s+=t.directedLoops),n-s}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,s=0;return this.type!=="directed"&&(n+=t.undirectedDegree,s+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.outDegree,s+=t.directedLoops),n-s}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,s=0;return this.type!=="directed"&&(n+=t.undirectedDegree,s+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree,s+=t.directedLoops*2),n-s}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const n=this._edges.get(t);if(!n)throw new Dt(`Graph.opposite: could not find the "${t}" edge in the graph.`);const s=n.source.key,r=n.target.key;if(e===s)return r;if(e===r)return s;throw new Dt(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${s}, ${r}).`)}hasExtremity(e,t){e=""+e,t=""+t;const n=this._edges.get(e);if(!n)throw new Dt(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return n.source.key===t||n.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new Dt(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return $St(this,e,t).key}mergeNode(e,t){if(t&&!$o(t))throw new $t(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let n=this._nodes.get(e);return n?(t&&(ro(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),[e,!1]):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new $t(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let n=this._nodes.get(e);if(n){if(t){const r=n.attributes;n.attributes=t(r),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})}return[e,!1]}const s=t?t({}):{};return n=new this.NodeDataClass(e,s),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:s}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new Dt(`Graph.dropNode: could not find the "${e}" node in the graph.`);let n;if(this.type!=="undirected"){for(const s in t.out){n=t.out[s];do My(this,n),n=n.next;while(n)}for(const s in t.in){n=t.in[s];do My(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const s in t.undirected){n=t.undirected[s];do My(this,n),n=n.next;while(n)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const n=""+arguments[0],s=""+arguments[1];if(t=yu(this,n,s,this.type),!t)throw new Dt(`Graph.dropEdge: could not find the "${n}" -> "${s}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new Dt(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return My(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new vn("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new vn("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const n=yu(this,e,t,"directed");if(!n)throw new Dt(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return My(this,n),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new vn("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new vn("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=yu(this,e,t,"undirected");if(!n)throw new Dt(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return My(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new $t("Graph.updateAttribute: updater should be a function.");const n=this._attributes[e];return this._attributes[e]=t(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!$o(e))throw new $t("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!$o(e))throw new $t("Graph.mergeAttributes: provided attributes are not a plain object.");return ro(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new $t("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new $t("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!bce(t))throw new $t("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let s,r;for(;s=n.next(),s.done!==!0;)r=s.value,r.attributes=e(r.key,r.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new $t("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!bce(t))throw new $t("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let s,r,o,a;for(;s=n.next(),s.done!==!0;)r=s.value,o=r.source,a=r.target,r.attributes=e(r.key,r.attributes,o.key,a.key,o.attributes,a.attributes,r.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new $t("Graph.forEachAdjacencyEntry: expecting a callback.");jA(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new $t("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");jA(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new $t("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");jA(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new $t("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");jA(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Kwe(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new $t("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let n,s;for(;n=t.next(),n.done!==!0;)s=n.value,e(s.key,s.attributes)}findNode(e){if(typeof e!="function")throw new $t("Graph.findNode: expecting a callback.");const t=this._nodes.values();let n,s;for(;n=t.next(),n.done!==!0;)if(s=n.value,e(s.key,s.attributes))return s.key}mapNodes(e){if(typeof e!="function")throw new $t("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let n,s;const r=new Array(this.order);let o=0;for(;n=t.next(),n.done!==!0;)s=n.value,r[o++]=e(s.key,s.attributes);return r}someNode(e){if(typeof e!="function")throw new $t("Graph.someNode: expecting a callback.");const t=this._nodes.values();let n,s;for(;n=t.next(),n.done!==!0;)if(s=n.value,e(s.key,s.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new $t("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let n,s;for(;n=t.next(),n.done!==!0;)if(s=n.value,!e(s.key,s.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new $t("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let n,s;const r=[];for(;n=t.next(),n.done!==!0;)s=n.value,e(s.key,s.attributes)&&r.push(s.key);return r}reduceNodes(e,t){if(typeof e!="function")throw new $t("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new $t("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=t;const s=this._nodes.values();let r,o;for(;r=s.next(),r.done!==!0;)o=r.value,n=e(n,o.key,o.attributes);return n}nodeEntries(){const e=this._nodes.values();return new Tu(()=>{const t=e.next();if(t.done)return t;const n=t.value;return{value:{node:n.key,attributes:n.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((s,r)=>{e[t++]=OSt(r,s)});const n=new Array(this._edges.size);return t=0,this._edges.forEach((s,r)=>{n[t++]=FSt(this.type,r,s)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:n}}import(e,t=!1){if(e instanceof us)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,h,d,f,g)=>{t?g?this.mergeUndirectedEdgeWithKey(l,u,h,c):this.mergeDirectedEdgeWithKey(l,u,h,c):g?this.addUndirectedEdgeWithKey(l,u,h,c):this.addDirectedEdgeWithKey(l,u,h,c)}),this;if(!$o(e))throw new $t("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!$o(e.attributes))throw new $t("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let n,s,r,o,a;if(e.nodes){if(r=e.nodes,!Array.isArray(r))throw new $t("Graph.import: invalid nodes. Expecting an array.");for(n=0,s=r.length;n<s;n++){o=r[n],BSt(o);const{key:l,attributes:c}=o;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),r=e.edges,!Array.isArray(r))throw new $t("Graph.import: invalid edges. Expecting an array.");for(n=0,s=r.length;n<s;n++){a=r[n],zSt(a);const{source:c,target:u,attributes:h,undirected:d=l}=a;let f;"key"in a?(f=t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,u,h)):(f=t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,u,h))}}return this}nullCopy(e){const t=new us(ro({},this._options,e));return t.replaceAttributes(ro({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((n,s)=>{const r=ro({},n.attributes);n=new t.NodeDataClass(s,r),t._nodes.set(s,n)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new vn(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new vn("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new vn("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),n=this._edges.values();let s,r;for(;s=n.next(),s.done!==!0;)r=s.value,nCe(t,"copy",!1,r.undirected,r.key,r.source.key,r.target.key,ro({},r.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((r,o)=>{e[o]=r.attributes});const t={},n={};this._edges.forEach((r,o)=>{const a=r.undirected?"--":"->";let l="",c=r.source.key,u=r.target.key,h;r.undirected&&c>u&&(h=c,c=u,u=h);const d=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof n[d]>"u"?n[d]=0:n[d]++,l+=`${n[d]}. `):l+=`[${o}]: `,l+=d,t[l]=r.attributes});const s={};for(const r in this)this.hasOwnProperty(r)&&!wce.has(r)&&typeof this[r]!="function"&&typeof r!="symbol"&&(s[r]=this[r]);return s.attributes=this._attributes,s.nodes=e,s.edges=t,Gc(s,"constructor",this.constructor),s}}typeof Symbol<"u"&&(us.prototype[Symbol.for("nodejs.util.inspect.custom")]=us.prototype.inspect);WSt.forEach(i=>{["add","merge","update"].forEach(e=>{const t=i.name(e),n=e==="add"?nCe:GSt;i.generateKey?us.prototype[t]=function(s,r,o){return n(this,t,!0,(i.type||this.type)==="undirected",null,s,r,o,e==="update")}:us.prototype[t]=function(s,r,o,a){return n(this,t,!1,(i.type||this.type)==="undirected",s,r,o,a,e==="update")}})});eSt(us);hSt(us);TSt(us);PSt(us);class iCe extends us{constructor(e){const t=ro({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new $t("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new $t('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class sCe extends us{constructor(e){const t=ro({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new $t("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new $t('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class rCe extends us{constructor(e){const t=ro({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new $t("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class oCe extends us{constructor(e){const t=ro({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new $t("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new $t('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class aCe extends us{constructor(e){const t=ro({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new $t("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new $t('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function lS(i){i.from=function(e,t){const n=ro({},e.options,t),s=new i(n);return s.import(e),s}}lS(us);lS(iCe);lS(sCe);lS(rCe);lS(oCe);lS(aCe);us.Graph=us;us.DirectedGraph=iCe;us.UndirectedGraph=sCe;us.MultiGraph=rCe;us.MultiDirectedGraph=oCe;us.MultiUndirectedGraph=aCe;us.InvalidArgumentsGraphError=$t;us.NotFoundGraphError=Dt;us.UsageGraphError=vn;const zk=new se,MY=new se,jSt=new se;function KSt(i,e,t){const n=zk.setFromMatrixPosition(i.matrixWorld);n.project(e);const s=t.width/2,r=t.height/2;return[n.x*s+s,-(n.y*r)+r]}function qSt(i,e){const t=zk.setFromMatrixPosition(i.matrixWorld),n=MY.setFromMatrixPosition(e.matrixWorld),s=t.sub(n),r=e.getWorldDirection(jSt);return s.angleTo(r)>Math.PI/2}function XSt(i,e,t,n){const s=zk.setFromMatrixPosition(i.matrixWorld),r=s.clone();r.project(e),t.setFromCamera(r,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return s.distanceTo(t.ray.origin)<a}return!0}function YSt(i,e){if(e instanceof _1)return e.zoom;if(e instanceof qr){const t=zk.setFromMatrixPosition(i.matrixWorld),n=MY.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,r=t.distanceTo(n);return 1/(2*Math.tan(s/2)*r)}else return 1}function ZSt(i,e,t){if(e instanceof qr||e instanceof _1){const n=zk.setFromMatrixPosition(i.matrixWorld),s=MY.setFromMatrixPosition(e.matrixWorld),r=n.distanceTo(s),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*r+a)}}const S$=i=>Math.abs(i)<1e-10?0:i;function lCe(i,e,t=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=S$(e[s]*i.elements[s])+(s!==15?",":")");return t+n}const QSt=(i=>e=>lCe(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),JSt=(i=>(e,t)=>lCe(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function ext(i){return i&&typeof i=="object"&&"current"in i}const DY=G.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:s,center:r,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:d,castShadow:f,receiveShadow:g,material:p,geometry:_,zIndexRange:m=[16777271,0],calculatePosition:v=KSt,as:y="div",wrapperClass:C,pointerEvents:S="auto",...x},E)=>{const{gl:L,camera:T,scene:D,size:I,raycaster:N,events:P,viewport:O}=Xr(),[V]=G.useState(()=>document.createElement(y)),z=G.useRef(),K=G.useRef(null),H=G.useRef(0),U=G.useRef([0,0]),j=G.useRef(null),W=G.useRef(null),X=(a==null?void 0:a.current)||P.connected||L.domElement.parentNode,ee=G.useRef(null),le=G.useRef(!1),fe=G.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&ext(h[0]),[h]);G.useLayoutEffect(()=>{const qe=L.domElement;h&&h==="blending"?(qe.style.zIndex=`${Math.floor(m[0]/2)}`,qe.style.position="absolute",qe.style.pointerEvents="none"):(qe.style.zIndex=null,qe.style.position=null,qe.style.pointerEvents=null)},[h]),G.useLayoutEffect(()=>{if(K.current){const qe=z.current=OG(V);if(D.updateMatrixWorld(),u)V.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ke=v(K.current,T,I);V.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ke[0]}px,${ke[1]}px,0);transform-origin:0 0;`}return X&&(s?X.prepend(V):X.appendChild(V)),()=>{X&&X.removeChild(V),qe.unmount()}}},[X,u]),G.useLayoutEffect(()=>{C&&(V.className=C)},[C]);const be=G.useMemo(()=>u?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...o&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...t},[t,r,o,I,u]),ye=G.useMemo(()=>({position:"absolute",pointerEvents:S}),[S]);G.useLayoutEffect(()=>{if(le.current=!1,u){var qe;(qe=z.current)==null||qe.render(G.createElement("div",{ref:j,style:be},G.createElement("div",{ref:W,style:ye},G.createElement("div",{ref:E,className:n,style:t,children:i}))))}else{var ke;(ke=z.current)==null||ke.render(G.createElement("div",{ref:E,style:be,className:n,children:i}))}});const xe=G.useRef(!0);A5(qe=>{if(K.current){T.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const ke=u?U.current:v(K.current,T,I);if(u||Math.abs(H.current-T.zoom)>e||Math.abs(U.current[0]-ke[0])>e||Math.abs(U.current[1]-ke[1])>e){const q=qSt(K.current,T);let Ee=!1;fe&&(Array.isArray(h)?Ee=h.map(Je=>Je.current):h!=="blending"&&(Ee=[D]));const De=xe.current;if(Ee){const Je=XSt(K.current,T,N,Ee);xe.current=Je&&!q}else xe.current=!q;De!==xe.current&&(d?d(!xe.current):V.style.display=xe.current?"block":"none");const Ae=Math.floor(m[0]/2),Me=h?fe?[m[0],Ae]:[Ae-1,0]:m;if(V.style.zIndex=`${ZSt(K.current,T,Me)}`,u){const[Je,Pe]=[I.width/2,I.height/2],Xe=T.projectionMatrix.elements[5]*Pe,{isOrthographicCamera:Re,top:Fe,left:wt,bottom:te,right:Z}=T,we=QSt(T.matrixWorldInverse),Ye=Re?`scale(${Xe})translate(${S$(-(Z+wt)/2)}px,${S$((Fe+te)/2)}px)`:`translateZ(${Xe}px)`;let je=K.current.matrixWorld;c&&(je=T.matrixWorldInverse.clone().transpose().copyPosition(je).scale(K.current.scale),je.elements[3]=je.elements[7]=je.elements[11]=0,je.elements[15]=1),V.style.width=I.width+"px",V.style.height=I.height+"px",V.style.perspective=Re?"":`${Xe}px`,j.current&&W.current&&(j.current.style.transform=`${Ye}${we}translate(${Je}px,${Pe}px)`,W.current.style.transform=JSt(je,1/((l||10)/400)))}else{const Je=l===void 0?1:YSt(K.current,T)*l;V.style.transform=`translate3d(${ke[0]}px,${ke[1]}px,0) scale(${Je})`}U.current=ke,H.current=T.zoom}}if(!fe&&ee.current&&!le.current)if(u){if(j.current){const ke=j.current.children[0];if(ke!=null&&ke.clientWidth&&ke!=null&&ke.clientHeight){const{isOrthographicCamera:q}=T;if(q||_)x.scale&&(Array.isArray(x.scale)?x.scale instanceof se?ee.current.scale.copy(x.scale.clone().divideScalar(1)):ee.current.scale.set(1/x.scale[0],1/x.scale[1],1/x.scale[2]):ee.current.scale.setScalar(1/x.scale));else{const Ee=(l||10)/400,De=ke.clientWidth*Ee,Ae=ke.clientHeight*Ee;ee.current.scale.set(De,Ae,1)}le.current=!0}}}else{const ke=V.children[0];if(ke!=null&&ke.clientWidth&&ke!=null&&ke.clientHeight){const q=1/O.factor,Ee=ke.clientWidth*q,De=ke.clientHeight*q;ee.current.scale.set(Ee,De,1),le.current=!0}ee.current.lookAt(qe.camera.position)}});const He=G.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return G.createElement("group",pv({},x,{ref:K}),h&&!fe&&G.createElement("mesh",{castShadow:f,receiveShadow:g,ref:ee},_||G.createElement("planeGeometry",null),p||G.createElement("shaderMaterial",{side:Ks,vertexShader:He.vertexShader,fragmentShader:He.fragmentShader})))});function SL(i,e="pointer",t="auto",n=document.body){G.useEffect(()=>{if(i)return n.style.cursor=e,()=>void(n.style.cursor=t)},[i])}let AY=Vk();const Bn=i=>Uk(i,AY);let IY=Vk();Bn.write=i=>Uk(i,IY);let V5=Vk();Bn.onStart=i=>Uk(i,V5);let NY=Vk();Bn.onFrame=i=>Uk(i,NY);let RY=Vk();Bn.onFinish=i=>Uk(i,RY);let Tw=[];Bn.setTimeout=(i,e)=>{let t=Bn.now()+e,n=()=>{let r=Tw.findIndex(o=>o.cancel==n);~r&&Tw.splice(r,1),Jp-=~r?1:0},s={time:t,handler:i,cancel:n};return Tw.splice(cCe(t),0,s),Jp+=1,uCe(),s};let cCe=i=>~(~Tw.findIndex(e=>e.time>i)||~Tw.length);Bn.cancel=i=>{V5.delete(i),NY.delete(i),RY.delete(i),AY.delete(i),IY.delete(i)};Bn.sync=i=>{x$=!0,Bn.batchedUpdates(i),x$=!1};Bn.throttle=i=>{let e;function t(){try{i(...e)}finally{e=null}}function n(...s){e=s,Bn.onStart(t)}return n.handler=i,n.cancel=()=>{V5.delete(t),e=null},n};let PY=typeof window<"u"?window.requestAnimationFrame:()=>{};Bn.use=i=>PY=i;Bn.now=typeof performance<"u"?()=>performance.now():Date.now;Bn.batchedUpdates=i=>i();Bn.catch=console.error;Bn.frameLoop="always";Bn.advance=()=>{Bn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):dCe()};let Qp=-1,Jp=0,x$=!1;function Uk(i,e){x$?(e.delete(i),i(0)):(e.add(i),uCe())}function uCe(){Qp<0&&(Qp=0,Bn.frameLoop!=="demand"&&PY(hCe))}function txt(){Qp=-1}function hCe(){~Qp&&(PY(hCe),Bn.batchedUpdates(dCe))}function dCe(){let i=Qp;Qp=Bn.now();let e=cCe(Qp);if(e&&(fCe(Tw.splice(0,e),t=>t.handler()),Jp-=e),!Jp){txt();return}V5.flush(),AY.flush(i?Math.min(64,Qp-i):16.667),NY.flush(),IY.flush(),RY.flush()}function Vk(){let i=new Set,e=i;return{add(t){Jp+=e==i&&!i.has(t)?1:0,i.add(t)},delete(t){return Jp-=e==i&&i.has(t)?1:0,i.delete(t)},flush(t){e.size&&(i=new Set,Jp-=e.size,fCe(e,n=>n(t)&&i.add(n)),Jp+=i.size,e=i)}}}function fCe(i,e){i.forEach(t=>{try{e(t)}catch(n){Bn.catch(n)}})}function E$(){}const nxt=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),Rt={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function Ff(i,e){if(Rt.arr(i)){if(!Rt.arr(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}return i===e}const Qi=(i,e)=>i.forEach(e);function Fg(i,e,t){if(Rt.arr(i)){for(let n=0;n<i.length;n++)e.call(t,i[n],`${n}`);return}for(const n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n)}const pu=i=>Rt.und(i)?[]:Rt.arr(i)?i:[i];function xL(i,e){if(i.size){const t=Array.from(i);i.clear(),Qi(t,e)}}const EE=(i,...e)=>xL(i,t=>t(...e)),OY=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let FY,gCe,vm=null,pCe=!1,BY=E$;const ixt=i=>{i.to&&(gCe=i.to),i.now&&(Bn.now=i.now),i.colors!==void 0&&(vm=i.colors),i.skipAnimation!=null&&(pCe=i.skipAnimation),i.createStringInterpolator&&(FY=i.createStringInterpolator),i.requestAnimationFrame&&Bn.use(i.requestAnimationFrame),i.batchedUpdates&&(Bn.batchedUpdates=i.batchedUpdates),i.willAdvance&&(BY=i.willAdvance),i.frameLoop&&(Bn.frameLoop=i.frameLoop)};var qd=Object.freeze({__proto__:null,get createStringInterpolator(){return FY},get to(){return gCe},get colors(){return vm},get skipAnimation(){return pCe},get willAdvance(){return BY},assign:ixt});const EL=new Set;let uu=[],a7=[],sO=0;const W5={get idle(){return!EL.size&&!uu.length},start(i){sO>i.priority?(EL.add(i),Bn.onStart(sxt)):(mCe(i),Bn(L$))},advance:L$,sort(i){if(sO)Bn.onFrame(()=>W5.sort(i));else{const e=uu.indexOf(i);~e&&(uu.splice(e,1),_Ce(i))}},clear(){uu=[],EL.clear()}};function sxt(){EL.forEach(mCe),EL.clear(),Bn(L$)}function mCe(i){uu.includes(i)||_Ce(i)}function _Ce(i){uu.splice(rxt(uu,e=>e.priority>i.priority),0,i)}function L$(i){const e=a7;for(let t=0;t<uu.length;t++){const n=uu[t];sO=n.priority,n.idle||(BY(n),n.advance(i),n.idle||e.push(n))}return sO=0,a7=uu,a7.length=0,uu=e,uu.length>0}function rxt(i,e){const t=i.findIndex(e);return t<0?i.length:t}const oxt=(i,e,t)=>Math.min(Math.max(t,i),e),axt={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},gh="[-+]?\\d*\\.?\\d+",rO=gh+"%";function H5(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}const lxt=new RegExp("rgb"+H5(gh,gh,gh)),cxt=new RegExp("rgba"+H5(gh,gh,gh,gh)),uxt=new RegExp("hsl"+H5(gh,rO,rO)),hxt=new RegExp("hsla"+H5(gh,rO,rO,gh)),dxt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fxt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gxt=/^#([0-9a-fA-F]{6})$/,pxt=/^#([0-9a-fA-F]{8})$/;function mxt(i){let e;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(e=gxt.exec(i))?parseInt(e[1]+"ff",16)>>>0:vm&&vm[i]!==void 0?vm[i]:(e=lxt.exec(i))?(Dy(e[1])<<24|Dy(e[2])<<16|Dy(e[3])<<8|255)>>>0:(e=cxt.exec(i))?(Dy(e[1])<<24|Dy(e[2])<<16|Dy(e[3])<<8|Ece(e[4]))>>>0:(e=dxt.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=pxt.exec(i))?parseInt(e[1],16)>>>0:(e=fxt.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=uxt.exec(i))?(Sce(xce(e[1]),KA(e[2]),KA(e[3]))|255)>>>0:(e=hxt.exec(i))?(Sce(xce(e[1]),KA(e[2]),KA(e[3]))|Ece(e[4]))>>>0:null}function l7(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function Sce(i,e,t){const n=t<.5?t*(1+e):t+e-t*e,s=2*t-n,r=l7(s,n,i+1/3),o=l7(s,n,i),a=l7(s,n,i-1/3);return Math.round(r*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Dy(i){const e=parseInt(i,10);return e<0?0:e>255?255:e}function xce(i){return(parseFloat(i)%360+360)%360/360}function Ece(i){const e=parseFloat(i);return e<0?0:e>1?255:Math.round(e*255)}function KA(i){const e=parseFloat(i);return e<0?0:e>100?1:e/100}function Lce(i){let e=mxt(i);if(e===null)return i;e=e||0;let t=(e&4278190080)>>>24,n=(e&16711680)>>>16,s=(e&65280)>>>8,r=(e&255)/255;return`rgba(${t}, ${n}, ${s}, ${r})`}const TT=(i,e,t)=>{if(Rt.fun(i))return i;if(Rt.arr(i))return TT({range:i,output:e,extrapolate:t});if(Rt.str(i.output[0]))return FY(i);const n=i,s=n.output,r=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",a=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(c=>c);return c=>{const u=vxt(c,r);return _xt(c,r[u],r[u+1],s[u],s[u+1],l,o,a,n.map)}};function _xt(i,e,t,n,s,r,o,a,l){let c=l?l(i):i;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return n===s?n:e===t?i<=e?n:s:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=r(c),n===-1/0?c=-c:s===1/0?c=c+n:c=c*(s-n)+n,c)}function vxt(i,e){for(var t=1;t<e.length-1&&!(e[t]>=i);++t);return t-1}const yxt=(i,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const n=t*i,s=e==="end"?Math.floor(n):Math.ceil(n);return oxt(0,1,s/i)},oO=1.70158,qA=oO*1.525,Tce=oO+1,kce=2*Math.PI/3,Mce=2*Math.PI/4.5,XA=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,bxt={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>Tce*i*i*i-oO*i*i,easeOutBack:i=>1+Tce*Math.pow(i-1,3)+oO*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((qA+1)*2*i-qA)/2:(Math.pow(2*i-2,2)*((qA+1)*(i*2-2)+qA)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*kce),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*kce)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*Mce))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*Mce)/2+1,easeInBounce:i=>1-XA(1-i),easeOutBounce:XA,easeInOutBounce:i=>i<.5?(1-XA(1-2*i))/2:(1+XA(2*i-1))/2,steps:yxt};function T$(){return T$=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},T$.apply(this,arguments)}const wC=Symbol.for("FluidValue.get"),$v=Symbol.for("FluidValue.observers"),vd=i=>!!(i&&i[wC]),eu=i=>i&&i[wC]?i[wC]():i,Dce=i=>i[$v]||null;function wxt(i,e){i.eventObserved?i.eventObserved(e):i(e)}function aO(i,e){let t=i[$v];t&&t.forEach(n=>{wxt(n,e)})}class Cxt{constructor(e){if(this[wC]=void 0,this[$v]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Sxt(this,e)}}const Sxt=(i,e)=>vCe(i,wC,e);function Wk(i,e){if(i[wC]){let t=i[$v];t||vCe(i,$v,t=new Set),t.has(e)||(t.add(e),i.observerAdded&&i.observerAdded(t.size,e))}return e}function lO(i,e){let t=i[$v];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):i[$v]=null,i.observerRemoved&&i.observerRemoved(n,e)}}const vCe=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),cN=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,xxt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ace=new RegExp(`(${cN.source})(%|[a-z]+)`,"i"),Ext=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,$5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,yCe=i=>{const[e,t]=Lxt(i);if(!e||OY())return i;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);return s||i}else{if(t&&$5.test(t))return yCe(t);if(t)return t}return i},Lxt=i=>{const e=$5.exec(i);if(!e)return[,];const[,t,n]=e;return[t,n]};let c7;const Txt=(i,e,t,n,s)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${s})`,bCe=i=>{c7||(c7=vm?new RegExp(`(${Object.keys(vm).join("|")})(?!\\w)`,"g"):/^\b$/);const e=i.output.map(r=>eu(r).replace($5,yCe).replace(xxt,Lce).replace(c7,Lce)),t=e.map(r=>r.match(cN).map(Number)),s=t[0].map((r,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(r=>TT(T$({},i,{output:r})));return r=>{var o;const a=!Ace.test(e[0])&&((o=e.find(c=>Ace.test(c)))==null?void 0:o.replace(cN,""));let l=0;return e[0].replace(cN,()=>`${s[l++](r)}${a||""}`).replace(Ext,Txt)}},zY="react-spring: ",wCe=i=>{const e=i;let t=!1;if(typeof e!="function")throw new TypeError(`${zY}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},kxt=wCe(console.warn);function Mxt(){kxt(`${zY}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Dxt=wCe(console.warn);function Axt(){Dxt(`${zY}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function G5(i){return Rt.str(i)&&(i[0]=="#"||/\d/.test(i)||!OY()&&$5.test(i)||i in(vm||{}))}const UY=OY()?G.useEffect:G.useLayoutEffect,Ixt=()=>{const i=G.useRef(!1);return UY(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function CCe(){const i=G.useState()[1],e=Ixt();return()=>{e.current&&i(Math.random())}}function Nxt(i,e){const[t]=G.useState(()=>({inputs:e,result:i()})),n=G.useRef(),s=n.current;let r=s;return r?e&&r.inputs&&Rxt(e,r.inputs)||(r={inputs:e,result:i()}):r=t,G.useEffect(()=>{n.current=r,s==t&&(t.inputs=t.result=void 0)},[r]),r.result}function Rxt(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}const SCe=i=>G.useEffect(i,Pxt),Pxt=[];function Ice(i){const e=G.useRef();return G.useEffect(()=>{e.current=i}),e.current}const kT=Symbol.for("Animated:node"),Oxt=i=>!!i&&i[kT]===i,gd=i=>i&&i[kT],VY=(i,e)=>nxt(i,kT,e),j5=i=>i&&i[kT]&&i[kT].getPayload();class xCe{constructor(){this.payload=void 0,VY(this,this)}getPayload(){return this.payload||[]}}class cS extends xCe{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Rt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new cS(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Rt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Rt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class CC extends cS{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=TT({output:[e,e]})}static create(e){return new CC(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Rt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=TT({output:[this.getValue(),e]})),this._value=0,super.reset()}}const cO={dependencies:null};class WY extends xCe{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Fg(this.source,(n,s)=>{Oxt(n)?t[s]=n.getValue(e):vd(n)?t[s]=eu(n):e||(t[s]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Qi(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Fg(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){cO.dependencies&&vd(e)&&cO.dependencies.add(e);const t=j5(e);t&&Qi(t,n=>this.add(n))}}class HY extends WY{constructor(e){super(e)}static create(e){return new HY(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,s)=>n.setValue(e[s])).some(Boolean):(super.setValue(e.map(Fxt)),!0)}}function Fxt(i){return(G5(i)?CC:cS).create(i)}function k$(i){const e=gd(i);return e?e.constructor:Rt.arr(i)?HY:G5(i)?CC:cS}function uO(){return uO=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},uO.apply(this,arguments)}const Nce=(i,e)=>{const t=!Rt.fun(i)||i.prototype&&i.prototype.isReactComponent;return G.forwardRef((n,s)=>{const r=G.useRef(null),o=t&&G.useCallback(g=>{r.current=Uxt(s,g)},[s]),[a,l]=zxt(n,e),c=CCe(),u=()=>{const g=r.current;if(t&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&c()},h=new Bxt(u,l),d=G.useRef();UY(()=>(d.current=h,Qi(l,g=>Wk(g,h)),()=>{d.current&&(Qi(d.current.deps,g=>lO(g,d.current)),Bn.cancel(d.current.update))})),G.useEffect(u,[]),SCe(()=>()=>{const g=d.current;Qi(g.deps,p=>lO(p,g))});const f=e.getComponentProps(a.getValue());return G.createElement(i,uO({},f,{ref:o}))})};class Bxt{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Bn.write(this.update)}}function zxt(i,e){const t=new Set;return cO.dependencies=t,i.style&&(i=uO({},i,{style:e.createAnimatedStyle(i.style)})),i=new WY(i),cO.dependencies=null,[i,t]}function Uxt(i,e){return i&&(Rt.fun(i)?i(e):i.current=e),e}const Rce=Symbol.for("AnimatedComponent"),Vxt=(i,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=s=>new WY(s),getComponentProps:n=s=>s}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},r=o=>{const a=Pce(o)||"Anonymous";return Rt.str(o)?o=r[o]||(r[o]=Nce(o,s)):o=o[Rce]||(o[Rce]=Nce(o,s)),o.displayName=`Animated(${a})`,o};return Fg(i,(o,a)=>{Rt.arr(i)&&(a=Pce(o)),r[a]=r(o)}),{animated:r}},Pce=i=>Rt.str(i)?i:i&&Rt.str(i.displayName)?i.displayName:Rt.fun(i)&&i.name||null;function Io(){return Io=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Io.apply(this,arguments)}function p0(i,...e){return Rt.fun(i)?i(...e):i}const LL=(i,e)=>i===!0||!!(e&&i&&(Rt.fun(i)?i(e):pu(i).includes(e))),ECe=(i,e)=>Rt.obj(i)?e&&i[e]:i,LCe=(i,e)=>i.default===!0?i[e]:i.default?i.default[e]:void 0,Wxt=i=>i,$Y=(i,e=Wxt)=>{let t=Hxt;i.default&&i.default!==!0&&(i=i.default,t=Object.keys(i));const n={};for(const s of t){const r=e(i[s],s);Rt.und(r)||(n[s]=r)}return n},Hxt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],$xt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Gxt(i){const e={};let t=0;if(Fg(i,(n,s)=>{$xt[s]||(e[s]=n,t++)}),t)return e}function TCe(i){const e=Gxt(i);if(e){const t={to:e};return Fg(i,(n,s)=>s in e||(t[s]=n)),t}return Io({},i)}function MT(i){return i=eu(i),Rt.arr(i)?i.map(MT):G5(i)?qd.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function jxt(i){for(const e in i)return!0;return!1}function M$(i){return Rt.fun(i)||Rt.arr(i)&&Rt.obj(i[0])}function Kxt(i,e){var t;(t=i.ref)==null||t.delete(i),e==null||e.delete(i)}function qxt(i,e){if(e&&i.ref!==e){var t;(t=i.ref)==null||t.delete(i),e.add(i),i.ref=e}}const Xxt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},D$=Io({},Xxt.default,{mass:1,damping:1,easing:bxt.linear,clamp:!1});class Yxt{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,D$)}}function Zxt(i,e,t){t&&(t=Io({},t),Oce(t,e),e=Io({},t,e)),Oce(i,e),Object.assign(i,e);for(const o in D$)i[o]==null&&(i[o]=D$[o]);let{mass:n,frequency:s,damping:r}=i;return Rt.und(s)||(s<.01&&(s=.01),r<0&&(r=0),i.tension=Math.pow(2*Math.PI/s,2)*n,i.friction=4*Math.PI*r*n/s),i}function Oce(i,e){if(!Rt.und(e.decay))i.duration=void 0;else{const t=!Rt.und(e.tension)||!Rt.und(e.friction);(t||!Rt.und(e.frequency)||!Rt.und(e.damping)||!Rt.und(e.mass))&&(i.duration=void 0,i.decay=void 0),t&&(i.frequency=void 0)}}const Fce=[];class Qxt{constructor(){this.changed=!1,this.values=Fce,this.toValues=null,this.fromValues=Fce,this.to=void 0,this.from=void 0,this.config=new Yxt,this.immediate=!1}}function kCe(i,{key:e,props:t,defaultProps:n,state:s,actions:r}){return new Promise((o,a)=>{var l;let c,u,h=LL((l=t.cancel)!=null?l:n==null?void 0:n.cancel,e);if(h)g();else{Rt.und(t.pause)||(s.paused=LL(t.pause,e));let p=n==null?void 0:n.pause;p!==!0&&(p=s.paused||LL(p,e)),c=p0(t.delay||0,e),p?(s.resumeQueue.add(f),r.pause()):(r.resume(),f())}function d(){s.resumeQueue.add(f),s.timeouts.delete(u),u.cancel(),c=u.time-Bn.now()}function f(){c>0&&!qd.skipAnimation?(s.delayed=!0,u=Bn.setTimeout(g,c),s.pauseQueue.add(d),s.timeouts.add(u)):g()}function g(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(d),s.timeouts.delete(u),i<=(s.cancelId||0)&&(h=!0);try{r.start(Io({},t,{callId:i,cancel:h}),o)}catch(p){a(p)}}})}const GY=(i,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?kw(i.get()):e.every(t=>t.noop)?MCe(i.get()):lh(i.get(),e.every(t=>t.finished)),MCe=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),lh=(i,e,t=!1)=>({value:i,finished:e,cancelled:t}),kw=i=>({value:i,cancelled:!0,finished:!1});function DCe(i,e,t,n){const{callId:s,parentId:r,onRest:o}=e,{asyncTo:a,promise:l}=t;return!r&&i===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=s,t.asyncTo=i;const c=$Y(e,(_,m)=>m==="onRest"?void 0:_);let u,h;const d=new Promise((_,m)=>(u=_,h=m)),f=_=>{const m=s<=(t.cancelId||0)&&kw(n)||s!==t.asyncId&&lh(n,!1);if(m)throw _.result=m,h(_),_},g=(_,m)=>{const v=new Bce,y=new zce;return(async()=>{if(qd.skipAnimation)throw DT(t),y.result=lh(n,!1),h(y),y;f(v);const C=Rt.obj(_)?Io({},_):Io({},m,{to:_});C.parentId=s,Fg(c,(x,E)=>{Rt.und(C[E])&&(C[E]=x)});const S=await n.start(C);return f(v),t.paused&&await new Promise(x=>{t.resumeQueue.add(x)}),S})()};let p;if(qd.skipAnimation)return DT(t),lh(n,!1);try{let _;Rt.arr(i)?_=(async m=>{for(const v of m)await g(v)})(i):_=Promise.resolve(i(g,n.stop.bind(n))),await Promise.all([_.then(u),d]),p=lh(n.get(),!0,!1)}catch(_){if(_ instanceof Bce)p=_.result;else if(_ instanceof zce)p=_.result;else throw _}finally{s==t.asyncId&&(t.asyncId=r,t.asyncTo=r?a:void 0,t.promise=r?l:void 0)}return Rt.fun(o)&&Bn.batchedUpdates(()=>{o(p,n,n.item)}),p})()}function DT(i,e){xL(i.timeouts,t=>t.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,e&&(i.cancelId=e)}class Bce extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class zce extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const A$=i=>i instanceof jY;let Jxt=1;class jY extends Cxt{constructor(...e){super(...e),this.id=Jxt++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=gd(this);return e&&e.getValue()}to(...e){return qd.to(this,e)}interpolate(...e){return Mxt(),qd.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){aO(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||W5.sort(this),aO(this,{type:"priority",parent:this,priority:e})}}const Gv=Symbol.for("SpringPhase"),ACe=1,I$=2,N$=4,u7=i=>(i[Gv]&ACe)>0,_p=i=>(i[Gv]&I$)>0,Vx=i=>(i[Gv]&N$)>0,Uce=(i,e)=>e?i[Gv]|=I$|ACe:i[Gv]&=~I$,Vce=(i,e)=>e?i[Gv]|=N$:i[Gv]&=~N$;class eEt extends jY{constructor(e,t){if(super(),this.key=void 0,this.animation=new Qxt,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Rt.und(e)||!Rt.und(t)){const n=Rt.obj(e)?Io({},e):Io({},t,{from:e});Rt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(_p(this)||this._state.asyncTo)||Vx(this)}get goal(){return eu(this.animation.to)}get velocity(){const e=gd(this);return e instanceof cS?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return u7(this)}get isAnimating(){return _p(this)}get isPaused(){return Vx(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const s=this.animation;let{config:r,toValues:o}=s;const a=j5(s.to);!a&&vd(s.to)&&(o=pu(eu(s.to))),s.values.forEach((u,h)=>{if(u.done)return;const d=u.constructor==CC?1:a?a[h].lastPosition:o[h];let f=s.immediate,g=d;if(!f){if(g=u.lastPosition,r.tension<=0){u.done=!0;return}let p=u.elapsedTime+=e;const _=s.fromValues[h],m=u.v0!=null?u.v0:u.v0=Rt.arr(r.velocity)?r.velocity[h]:r.velocity;let v;const y=r.precision||(_==d?.005:Math.min(1,Math.abs(d-_)*.001));if(Rt.und(r.duration))if(r.decay){const C=r.decay===!0?.998:r.decay,S=Math.exp(-(1-C)*p);g=_+m/(1-C)*(1-S),f=Math.abs(u.lastPosition-g)<=y,v=m*S}else{v=u.lastVelocity==null?m:u.lastVelocity;const C=r.restVelocity||y/10,S=r.clamp?0:r.bounce,x=!Rt.und(S),E=_==d?u.v0>0:_<d;let L,T=!1;const D=1,I=Math.ceil(e/D);for(let N=0;N<I&&(L=Math.abs(v)>C,!(!L&&(f=Math.abs(d-g)<=y,f)));++N){x&&(T=g==d||g>d==E,T&&(v=-v*S,g=d));const P=-r.tension*1e-6*(g-d),O=-r.friction*.001*v,V=(P+O)/r.mass;v=v+V*D,g=g+v*D}}else{let C=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,u.durationProgress>0&&(u.elapsedTime=r.duration*u.durationProgress,p=u.elapsedTime+=e)),C=(r.progress||0)+p/this._memoizedDuration,C=C>1?1:C<0?0:C,u.durationProgress=C),g=_+r.easing(C)*(d-_),v=(g-u.lastPosition)/e,f=C==1}u.lastVelocity=v,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),f=!0)}a&&!a[h].done&&(f=!1),f?u.done=!0:t=!1,u.setValue(g,r.round)&&(n=!0)});const l=gd(this),c=l.getValue();if(t){const u=eu(s.to);(c!==u||n)&&!r.decay?(l.setValue(u),this._onChange(u)):n&&r.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Bn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(_p(this)){const{to:e,config:t}=this.animation;Bn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Rt.und(e)?(n=this.queue||[],this.queue=[]):n=[Rt.obj(e)?e:Io({},t,{to:e})],Promise.all(n.map(s=>this._update(s))).then(s=>GY(this,s))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),DT(this._state,e&&this._lastCallId),Bn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:s}=e;n=Rt.obj(n)?n[t]:n,(n==null||M$(n))&&(n=void 0),s=Rt.obj(s)?s[t]:s,s==null&&(s=void 0);const r={to:n,from:s};return u7(this)||(e.reverse&&([n,s]=[s,n]),s=eu(s),Rt.und(s)?gd(this)||this._set(n):this._set(s)),r}_update(e,t){let n=Io({},e);const{key:s,defaultProps:r}=this;n.default&&Object.assign(r,$Y(n,(l,c)=>/^on/.test(c)?ECe(l,s):l)),Hce(this,n,"onProps"),Hx(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return kCe(++this._lastCallId,{key:s,props:n,defaultProps:r,state:a,actions:{pause:()=>{Vx(this)||(Vce(this,!0),EE(a.pauseQueue),Hx(this,"onPause",lh(this,Wx(this,this.animation.to)),this))},resume:()=>{Vx(this)&&(Vce(this,!1),_p(this)&&this._resume(),EE(a.resumeQueue),Hx(this,"onResume",lh(this,Wx(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(n.loop&&l.finished&&!(t&&l.noop)){const c=ICe(n);if(c)return this._update(c,!0)}return l})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(kw(this));const s=!Rt.und(e.to),r=!Rt.und(e.from);if(s||r)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(kw(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:h=c,from:d=u}=e;r&&!s&&(!t.default||Rt.und(h))&&(h=d),t.reverse&&([h,d]=[d,h]);const f=!Ff(d,u);f&&(l.from=d),d=eu(d);const g=!Ff(h,c);g&&this._focus(h);const p=M$(t.to),{config:_}=l,{decay:m,velocity:v}=_;(s||r)&&(_.velocity=0),t.config&&!p&&Zxt(_,p0(t.config,o),t.config!==a.config?p0(a.config,o):void 0);let y=gd(this);if(!y||Rt.und(h))return n(lh(this,!0));const C=Rt.und(t.reset)?r&&!t.default:!Rt.und(d)&&LL(t.reset,o),S=C?d:this.get(),x=MT(h),E=Rt.num(x)||Rt.arr(x)||G5(x),L=!p&&(!E||LL(a.immediate||t.immediate,o));if(g){const N=k$(h);if(N!==y.constructor)if(L)y=this._set(x);else throw Error(`Cannot animate between ${y.constructor.name} and ${N.name}, as the "to" prop suggests`)}const T=y.constructor;let D=vd(h),I=!1;if(!D){const N=C||!u7(this)&&f;(g||N)&&(I=Ff(MT(S),x),D=!I),(!Ff(l.immediate,L)&&!L||!Ff(_.decay,m)||!Ff(_.velocity,v))&&(D=!0)}if(I&&_p(this)&&(l.changed&&!C?D=!0:D||this._stop(c)),!p&&((D||vd(c))&&(l.values=y.getPayload(),l.toValues=vd(h)?null:T==CC?[1]:pu(x)),l.immediate!=L&&(l.immediate=L,!L&&!C&&this._set(c)),D)){const{onRest:N}=l;Qi(nEt,O=>Hce(this,t,O));const P=lh(this,Wx(this,c));EE(this._pendingCalls,P),this._pendingCalls.add(n),l.changed&&Bn.batchedUpdates(()=>{l.changed=!C,N==null||N(P,this),C?p0(a.onRest,P):l.onStart==null||l.onStart(P,this)})}C&&this._set(S),p?n(DCe(t.to,t,this._state,this)):D?this._start():_p(this)&&!g?this._pendingCalls.add(n):n(MCe(S))}_focus(e){const t=this.animation;e!==t.to&&(Dce(this)&&this._detach(),t.to=e,Dce(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;vd(t)&&(Wk(t,this),A$(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;vd(e)&&lO(e,this)}_set(e,t=!0){const n=eu(e);if(!Rt.und(n)){const s=gd(this);if(!s||!Ff(n,s.getValue())){const r=k$(n);!s||s.constructor!=r?VY(this,r.create(n)):s.setValue(n),s&&Bn.batchedUpdates(()=>{this._onChange(n,t)})}}return gd(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Hx(this,"onStart",lh(this,Wx(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),p0(this.animation.onChange,e,this)),p0(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;gd(this).reset(eu(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),_p(this)||(Uce(this,!0),Vx(this)||this._resume())}_resume(){qd.skipAnimation?this.finish():W5.start(this)}_stop(e,t){if(_p(this)){Uce(this,!1);const n=this.animation;Qi(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),aO(this,{type:"idle",parent:this});const s=t?kw(this.get()):lh(this.get(),Wx(this,e??n.to));EE(this._pendingCalls,s),n.changed&&(n.changed=!1,Hx(this,"onRest",s,this))}}}function Wx(i,e){const t=MT(e),n=MT(i.get());return Ff(n,t)}function ICe(i,e=i.loop,t=i.to){let n=p0(e);if(n){const s=n!==!0&&TCe(n),r=(s||i).reverse,o=!s||s.reset;return AT(Io({},i,{loop:e,default:!1,pause:void 0,to:!r||M$(t)?t:void 0,from:o?i.from:void 0,reset:o},s))}}function AT(i){const{to:e,from:t}=i=TCe(i),n=new Set;return Rt.obj(e)&&Wce(e,n),Rt.obj(t)&&Wce(t,n),i.keys=n.size?Array.from(n):null,i}function tEt(i){const e=AT(i);return Rt.und(e.default)&&(e.default=$Y(e)),e}function Wce(i,e){Fg(i,(t,n)=>t!=null&&e.add(n))}const nEt=["onStart","onRest","onChange","onPause","onResume"];function Hce(i,e,t){i.animation[t]=e[t]!==LCe(e,t)?ECe(e[t],i.key):void 0}function Hx(i,e,...t){var n,s,r,o;(n=(s=i.animation)[e])==null||n.call(s,...t),(r=(o=i.defaultProps)[e])==null||r.call(o,...t)}const iEt=["onStart","onChange","onRest"];let sEt=1;class rEt{constructor(e,t){this.id=sEt++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Io({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Rt.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(AT(e)),this}start(e){let{queue:t}=this;return e?t=pu(e).map(AT):this.queue=[],this._flush?this._flush(this,t):(FCe(this,t),R$(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Qi(pu(t),s=>n[s].stop(!!e))}else DT(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Rt.und(e))this.start({pause:!0});else{const t=this.springs;Qi(pu(e),n=>t[n].pause())}return this}resume(e){if(Rt.und(e))this.start({pause:!1});else{const t=this.springs;Qi(pu(e),n=>t[n].resume())}return this}each(e){Fg(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,s=this._active.size>0,r=this._changed.size>0;(s&&!this._started||r&&!this._started)&&(this._started=!0,xL(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!s&&this._started,a=r||o&&n.size?this.get():null;r&&t.size&&xL(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,xL(n,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Bn.onFrame(this._onFrame)}}function R$(i,e){return Promise.all(e.map(t=>NCe(i,t))).then(t=>GY(i,t))}async function NCe(i,e,t){const{keys:n,to:s,from:r,loop:o,onRest:a,onResolve:l}=e,c=Rt.obj(e.default)&&e.default;o&&(e.loop=!1),s===!1&&(e.to=null),r===!1&&(e.from=null);const u=Rt.arr(s)||Rt.fun(s)?s:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Qi(iEt,p=>{const _=e[p];if(Rt.fun(_)){const m=i._events[p];e[p]=({finished:v,cancelled:y})=>{const C=m.get(_);C?(v||(C.finished=!1),y&&(C.cancelled=!0)):m.set(_,{value:null,finished:v||!1,cancelled:y||!1})},c&&(c[p]=e[p])}});const h=i._state;e.pause===!h.paused?(h.paused=e.pause,EE(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const d=(n||Object.keys(i.springs)).map(p=>i.springs[p].start(e)),f=e.cancel===!0||LCe(e,"cancel")===!0;(u||f&&h.asyncId)&&d.push(kCe(++i._lastAsyncId,{props:e,state:h,actions:{pause:E$,resume:E$,start(p,_){f?(DT(h,i._lastAsyncId),_(kw(i))):(p.onRest=a,_(DCe(u,p,h,i)))}}})),h.paused&&await new Promise(p=>{h.resumeQueue.add(p)});const g=GY(i,await Promise.all(d));if(o&&g.finished&&!(t&&g.noop)){const p=ICe(e,o,s);if(p)return FCe(i,[p]),NCe(i,p,!0)}return l&&Bn.batchedUpdates(()=>l(g,i,i.item)),g}function $ce(i,e){const t=Io({},i.springs);return e&&Qi(pu(e),n=>{Rt.und(n.keys)&&(n=AT(n)),Rt.obj(n.to)||(n=Io({},n,{to:void 0})),OCe(t,n,s=>PCe(s))}),RCe(i,t),t}function RCe(i,e){Fg(e,(t,n)=>{i.springs[n]||(i.springs[n]=t,Wk(t,i))})}function PCe(i,e){const t=new eEt;return t.key=i,e&&Wk(t,e),t}function OCe(i,e,t){e.keys&&Qi(e.keys,n=>{(i[n]||(i[n]=t(n)))._prepareNode(e)})}function FCe(i,e){Qi(e,t=>{OCe(i.springs,t,n=>PCe(n,i))})}function oEt(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}const aEt=["children"],K5=i=>{let{children:e}=i,t=oEt(i,aEt);const n=G.useContext(hO),s=t.pause||!!n.pause,r=t.immediate||!!n.immediate;t=Nxt(()=>({pause:s,immediate:r}),[s,r]);const{Provider:o}=hO;return G.createElement(o,{value:t},e)},hO=lEt(K5,{});K5.Provider=hO.Provider;K5.Consumer=hO.Consumer;function lEt(i,e){return Object.assign(i,G.createContext(e)),i.Provider._context=i,i.Consumer._context=i,i}const cEt=()=>{const i=[],e=function(s){Axt();const r=[];return Qi(i,(o,a)=>{if(Rt.und(s))r.push(o.start());else{const l=t(s,o,a);l&&r.push(o.start(l))}}),r};e.current=i,e.add=function(n){i.includes(n)||i.push(n)},e.delete=function(n){const s=i.indexOf(n);~s&&i.splice(s,1)},e.pause=function(){return Qi(i,n=>n.pause(...arguments)),this},e.resume=function(){return Qi(i,n=>n.resume(...arguments)),this},e.set=function(n){Qi(i,s=>s.set(n))},e.start=function(n){const s=[];return Qi(i,(r,o)=>{if(Rt.und(n))s.push(r.start());else{const a=this._getProps(n,r,o);a&&s.push(r.start(a))}}),s},e.stop=function(){return Qi(i,n=>n.stop(...arguments)),this},e.update=function(n){return Qi(i,(s,r)=>s.update(this._getProps(n,s,r))),this};const t=function(s,r,o){return Rt.fun(s)?s(o,r):s};return e._getProps=t,e};function uEt(i,e,t){const n=Rt.fun(e)&&e;n&&!t&&(t=[]);const s=G.useMemo(()=>n||arguments.length==3?cEt():void 0,[]),r=G.useRef(0),o=CCe(),a=G.useMemo(()=>({ctrls:[],queue:[],flush(m,v){const y=$ce(m,v);return r.current>0&&!a.queue.length&&!Object.keys(y).some(S=>!m.springs[S])?R$(m,v):new Promise(S=>{RCe(m,y),a.queue.push(()=>{S(R$(m,v))}),o()})}}),[]),l=G.useRef([...a.ctrls]),c=[],u=Ice(i)||0;G.useMemo(()=>{Qi(l.current.slice(i,u),m=>{Kxt(m,s),m.stop(!0)}),l.current.length=i,h(u,i)},[i]),G.useMemo(()=>{h(0,Math.min(u,i))},t);function h(m,v){for(let y=m;y<v;y++){const C=l.current[y]||(l.current[y]=new rEt(null,a.flush)),S=n?n(y,C):e[y];S&&(c[y]=tEt(S))}}const d=l.current.map((m,v)=>$ce(m,c[v])),f=G.useContext(K5),g=Ice(f),p=f!==g&&jxt(f);UY(()=>{r.current++,a.ctrls=l.current;const{queue:m}=a;m.length&&(a.queue=[],Qi(m,v=>v())),Qi(l.current,(v,y)=>{s==null||s.add(v),p&&v.start({default:f});const C=c[y];C&&(qxt(v,C.ref),v.ref?v.queue.push(C):v.start(C))})}),SCe(()=>()=>{Qi(a.ctrls,m=>m.stop(!0))});const _=d.map(m=>Io({},m));return s?[_,s]:_}function ku(i,e){const t=Rt.fun(i),[[n],s]=uEt(1,t?i:[i],t?e||[]:e);return t||arguments.length==2?[n,s]:n}let Gce;(function(i){i.MOUNT="mount",i.ENTER="enter",i.UPDATE="update",i.LEAVE="leave"})(Gce||(Gce={}));class hEt extends jY{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=TT(...t);const n=this._get(),s=k$(n);VY(this,s.create(n))}advance(e){const t=this._get(),n=this.get();Ff(t,n)||(gd(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&jce(this._active)&&h7(this)}_get(){const e=Rt.arr(this.source)?this.source.map(eu):pu(eu(this.source));return this.calc(...e)}_start(){this.idle&&!jce(this._active)&&(this.idle=!1,Qi(j5(this),e=>{e.done=!1}),qd.skipAnimation?(Bn.batchedUpdates(()=>this.advance()),h7(this)):W5.start(this))}_attach(){let e=1;Qi(pu(this.source),t=>{vd(t)&&Wk(t,this),A$(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Qi(pu(this.source),e=>{vd(e)&&lO(e,this)}),this._active.clear(),h7(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=pu(this.source).reduce((t,n)=>Math.max(t,(A$(n)?n.priority:0)+1),0))}}function dEt(i){return i.idle!==!1}function jce(i){return!i.size||Array.from(i).every(dEt)}function h7(i){i.idle||(i.idle=!0,Qi(j5(i),e=>{e.done=!0}),aO(i,{type:"idle",parent:i}))}qd.assign({createStringInterpolator:bCe,to:(i,e)=>new hEt(i,e)});const fEt=["primitive"].concat(Object.keys(cbe).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));qd.assign({createStringInterpolator:bCe,colors:axt,frameLoop:"demand"});G_t(()=>{Bn.advance()});const gEt=Vxt(fEt,{applyAnimatedValues:Q_}),_r=gEt.animated,YA=(i,e)=>{const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),s=new Set(Object.keys(i[0].morphAttributes)),r={},o={},a=i[0].morphTargetsRelative,l=new Kn;let c=0;if(i.forEach((u,h)=>{let d=0;if(t!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;r[f]===void 0&&(r[f]=[]),r[f].push(u.attributes[f]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!s.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(u.morphAttributes[f])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(u.userData),e){let f;if(u.index)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,h),c+=f}}),t){let u=0;const h=[];i.forEach(d=>{const f=d.index;for(let g=0;g<f.count;++g)h.push(f.getX(g)+u);u+=d.attributes.position.count}),l.setIndex(h)}for(let u in r){const h=Kce(r[u]);if(!h)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,h)}for(let u in o){const h=o[u][0].length;if(h===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let d=0;d<h;++d){const f=[];for(let p=0;p<o[u].length;++p)f.push(o[u][p][d]);const g=Kce(f);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(g)}}return l},Kce=i=>{let e,t,n,s=0;if(i.forEach(r=>{if(e===void 0&&(e=r.array.constructor),e!==r.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=r.itemSize),t!==r.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=r.normalized),n!==r.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=r.array.length}),e&&t){const r=new e(s);let o=0;return i.forEach(a=>{r.set(a.array,o),o+=a.array.length}),new is(r,t,n)}},d7=new Ek,f7=new se,Ay=new se,ju=new se,Lf=new se,ed=new se,Tf=new se,kf=new se,$x=new se,Gx=new se,jx=new se,ZA=new se,Kx=new se,qx=new se,Xx=new se;class qce{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new se,this.endPoint=new se,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(d7,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Ay.copy(e),Ay.x=Math.min(e.x,t.x),Ay.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),ju.setFromMatrixPosition(this.camera.matrixWorld),Lf.copy(Ay),ed.set(t.x,Ay.y,0),Tf.copy(t),kf.set(Ay.x,t.y,0),Lf.unproject(this.camera),ed.unproject(this.camera),Tf.unproject(this.camera),kf.unproject(this.camera),Kx.copy(Lf).sub(ju),qx.copy(ed).sub(ju),Xx.copy(Tf).sub(ju),Kx.normalize(),qx.normalize(),Xx.normalize(),Kx.multiplyScalar(this.deep),qx.multiplyScalar(this.deep),Xx.multiplyScalar(this.deep),Kx.add(ju),qx.add(ju),Xx.add(ju);var n=d7.planes;n[0].setFromCoplanarPoints(ju,Lf,ed),n[1].setFromCoplanarPoints(ju,ed,Tf),n[2].setFromCoplanarPoints(Tf,kf,ju),n[3].setFromCoplanarPoints(kf,Lf,ju),n[4].setFromCoplanarPoints(ed,Tf,kf),n[5].setFromCoplanarPoints(Xx,qx,Kx),n[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const s=Math.min(e.x,t.x),r=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);Lf.set(s,r,-1),ed.set(o,r,-1),Tf.set(o,a,-1),kf.set(s,a,-1),$x.set(s,r,1),Gx.set(o,r,1),jx.set(o,a,1),ZA.set(s,a,1),Lf.unproject(this.camera),ed.unproject(this.camera),Tf.unproject(this.camera),kf.unproject(this.camera),$x.unproject(this.camera),Gx.unproject(this.camera),jx.unproject(this.camera),ZA.unproject(this.camera);var n=d7.planes;n[0].setFromCoplanarPoints(Lf,$x,Gx),n[1].setFromCoplanarPoints(ed,Gx,jx),n[2].setFromCoplanarPoints(jx,ZA,kf),n[3].setFromCoplanarPoints(ZA,$x,Lf),n[4].setFromCoplanarPoints(ed,Tf,kf),n[5].setFromCoplanarPoints(jx,Gx,$x),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),f7.copy(t.geometry.boundingSphere.center),f7.applyMatrix4(t.matrixWorld),e.containsPoint(f7)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}const BCe=G.forwardRef(function({children:e,follow:t=!0,lockX:n=!1,lockY:s=!1,lockZ:r=!1,...o},a){const l=G.useRef(null),c=G.useRef(null),u=new qo;return A5(({camera:h})=>{if(!t||!c.current)return;const d=c.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),h.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),n&&(c.current.rotation.x=d.x),s&&(c.current.rotation.y=d.y),r&&(c.current.rotation.z=d.z)}),G.useImperativeHandle(a,()=>c.current,[]),G.createElement("group",pv({ref:c,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),G.createElement("group",{ref:l},e))});function pEt(){var i=Object.create(null);function e(s,r){var o=s.id,a=s.name,l=s.dependencies;l===void 0&&(l=[]);var c=s.init;c===void 0&&(c=function(){});var u=s.getTransferables;if(u===void 0&&(u=null),!i[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(f){if(f instanceof Error)throw f}),d=i[d.id].value),d}),c=n("<"+a+">.init",c),u&&(u=n("<"+a+">.getTransferables",u));var h=null;typeof c=="function"?h=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),i[o]={id:o,value:h,getTransferables:u},r(h)}catch(d){d&&d.noLog||console.error(d),r(d)}}function t(s,r){var o,a=s.id,l=s.args;(!i[a]||typeof i[a].value!="function")&&r(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=i[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(h){return r(h instanceof Error?h:new Error(""+h))}):u(c)}catch(h){r(h)}function u(h){try{var d=i[a].getTransferables&&i[a].getTransferables(h);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),r(h,d)}catch(f){console.error(f),r(f)}}}function n(s,r){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+r+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(s){var r=s.data,o=r.messageId,a=r.action,l=r.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function mEt(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(r){return r&&r._getInitResult?r._getInitResult():r}):[];var s=Promise.all(t).then(function(r){return n.apply(null,r)});return e._getInitResult=function(){return s},s},e}var zCe=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return zCe=function(){return i},i},_Et=0,vEt=0,g7=!1,TL=Object.create(null),kL=Object.create(null),P$=Object.create(null);function Hk(i){if((!i||typeof i.init!="function")&&!g7)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,s=i.workerId;if(!zCe())return mEt(i);s==null&&(s="#default");var r="workerModule"+ ++_Et,o=i.name||r,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(g7=!0,c=Hk({workerId:s,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+uN(c)+`
)}`}),g7=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=Xce(s,"registerModule",l.workerModuleData);var h=function(){a=null,kL[s].delete(h)};(kL[s]||(kL[s]=new Set)).add(h)}return a.then(function(d){var f=d.isCallable;if(f)return Xce(s,"callModule",{id:r,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:r,name:o,dependencies:e,init:uN(t),getTransferables:n&&uN(n)},l}function yEt(i){kL[i]&&kL[i].forEach(function(e){e()}),TL[i]&&(TL[i].terminate(),delete TL[i])}function uN(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function bEt(i){var e=TL[i];if(!e){var t=uN(pEt);e=TL[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var s=n.data,r=s.messageId,o=P$[r];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete P$[r],o(s)}}return e}function Xce(i,e,t){return new Promise(function(n,s){var r=++vEt;P$[r]=function(o){o.success?n(o.result):s(new Error("Error in worker "+e+" call: "+o.error))},bEt(i).postMessage({messageId:r,action:e,data:t})})}function UCe(){var i=function(e){function t(U,j,W,X,ee,le,fe,be){var ye=1-fe;be.x=ye*ye*U+2*ye*fe*W+fe*fe*ee,be.y=ye*ye*j+2*ye*fe*X+fe*fe*le}function n(U,j,W,X,ee,le,fe,be,ye,xe){var He=1-ye;xe.x=He*He*He*U+3*He*He*ye*W+3*He*ye*ye*ee+ye*ye*ye*fe,xe.y=He*He*He*j+3*He*He*ye*X+3*He*ye*ye*le+ye*ye*ye*be}function s(U,j){for(var W=/([MLQCZ])([^MLQCZ]*)/g,X,ee,le,fe,be;X=W.exec(U);){var ye=X[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(xe){return parseFloat(xe)});switch(X[1]){case"M":fe=ee=ye[0],be=le=ye[1];break;case"L":(ye[0]!==fe||ye[1]!==be)&&j("L",fe,be,fe=ye[0],be=ye[1]);break;case"Q":{j("Q",fe,be,fe=ye[2],be=ye[3],ye[0],ye[1]);break}case"C":{j("C",fe,be,fe=ye[4],be=ye[5],ye[0],ye[1],ye[2],ye[3]);break}case"Z":(fe!==ee||be!==le)&&j("L",fe,be,ee,le);break}}}function r(U,j,W){W===void 0&&(W=16);var X={x:0,y:0};s(U,function(ee,le,fe,be,ye,xe,He,qe,ke){switch(ee){case"L":j(le,fe,be,ye);break;case"Q":{for(var q=le,Ee=fe,De=1;De<W;De++)t(le,fe,xe,He,be,ye,De/(W-1),X),j(q,Ee,X.x,X.y),q=X.x,Ee=X.y;break}case"C":{for(var Ae=le,Me=fe,Je=1;Je<W;Je++)n(le,fe,xe,He,qe,ke,be,ye,Je/(W-1),X),j(Ae,Me,X.x,X.y),Ae=X.x,Me=X.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(U,j){var W=U.getContext?U.getContext("webgl",c):U,X=l.get(W);if(!X){let He=function(Ae){var Me=le[Ae];if(!Me&&(Me=le[Ae]=W.getExtension(Ae),!Me))throw new Error(Ae+" not supported");return Me},qe=function(Ae,Me){var Je=W.createShader(Me);return W.shaderSource(Je,Ae),W.compileShader(Je),Je},ke=function(Ae,Me,Je,Pe){if(!fe[Ae]){var Xe={},Re={},Fe=W.createProgram();W.attachShader(Fe,qe(Me,W.VERTEX_SHADER)),W.attachShader(Fe,qe(Je,W.FRAGMENT_SHADER)),W.linkProgram(Fe),fe[Ae]={program:Fe,transaction:function(te){W.useProgram(Fe),te({setUniform:function(we,Ye){for(var je=[],Ge=arguments.length-2;Ge-- >0;)je[Ge]=arguments[Ge+2];var ot=Re[Ye]||(Re[Ye]=W.getUniformLocation(Fe,Ye));W["uniform"+we].apply(W,[ot].concat(je))},setAttribute:function(we,Ye,je,Ge,ot){var tt=Xe[we];tt||(tt=Xe[we]={buf:W.createBuffer(),loc:W.getAttribLocation(Fe,we),data:null}),W.bindBuffer(W.ARRAY_BUFFER,tt.buf),W.vertexAttribPointer(tt.loc,Ye,W.FLOAT,!1,0,0),W.enableVertexAttribArray(tt.loc),ee?W.vertexAttribDivisor(tt.loc,Ge):He("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(tt.loc,Ge),ot!==tt.data&&(W.bufferData(W.ARRAY_BUFFER,ot,je),tt.data=ot)}})}}}fe[Ae].transaction(Pe)},q=function(Ae,Me){ye++;try{W.activeTexture(W.TEXTURE0+ye);var Je=be[Ae];Je||(Je=be[Ae]=W.createTexture(),W.bindTexture(W.TEXTURE_2D,Je),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST)),W.bindTexture(W.TEXTURE_2D,Je),Me(Je,ye)}finally{ye--}},Ee=function(Ae,Me,Je){var Pe=W.createFramebuffer();xe.push(Pe),W.bindFramebuffer(W.FRAMEBUFFER,Pe),W.activeTexture(W.TEXTURE0+Me),W.bindTexture(W.TEXTURE_2D,Ae),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Ae,0);try{Je(Pe)}finally{W.deleteFramebuffer(Pe),W.bindFramebuffer(W.FRAMEBUFFER,xe[--xe.length-1]||null)}},De=function(){le={},fe={},be={},ye=-1,xe.length=0};var ee=typeof WebGL2RenderingContext<"u"&&W instanceof WebGL2RenderingContext,le={},fe={},be={},ye=-1,xe=[];W.canvas.addEventListener("webglcontextlost",function(Ae){De(),Ae.preventDefault()},!1),l.set(W,X={gl:W,isWebGL2:ee,getExtension:He,withProgram:ke,withTexture:q,withTextureFramebuffer:Ee,handleContextLoss:De})}j(X)}function h(U,j,W,X,ee,le,fe,be){fe===void 0&&(fe=15),be===void 0&&(be=null),u(U,function(ye){var xe=ye.gl,He=ye.withProgram,qe=ye.withTexture;qe("copy",function(ke,q){xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,ee,le,0,xe.RGBA,xe.UNSIGNED_BYTE,j),He("copy",o,a,function(Ee){var De=Ee.setUniform,Ae=Ee.setAttribute;Ae("aUV",2,xe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),De("1i","image",q),xe.bindFramebuffer(xe.FRAMEBUFFER,be||null),xe.disable(xe.BLEND),xe.colorMask(fe&8,fe&4,fe&2,fe&1),xe.viewport(W,X,ee,le),xe.scissor(W,X,ee,le),xe.drawArrays(xe.TRIANGLES,0,3)})})})}function d(U,j,W){var X=U.width,ee=U.height;u(U,function(le){var fe=le.gl,be=new Uint8Array(X*ee*4);fe.readPixels(0,0,X,ee,fe.RGBA,fe.UNSIGNED_BYTE,be),U.width=j,U.height=W,h(fe,be,0,0,X,ee)})}var f=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:h,resizeWebGLCanvasWithoutClearing:d});function g(U,j,W,X,ee,le){le===void 0&&(le=1);var fe=new Uint8Array(U*j),be=X[2]-X[0],ye=X[3]-X[1],xe=[];r(W,function(Ae,Me,Je,Pe){xe.push({x1:Ae,y1:Me,x2:Je,y2:Pe,minX:Math.min(Ae,Je),minY:Math.min(Me,Pe),maxX:Math.max(Ae,Je),maxY:Math.max(Me,Pe)})}),xe.sort(function(Ae,Me){return Ae.maxX-Me.maxX});for(var He=0;He<U;He++)for(var qe=0;qe<j;qe++){var ke=Ee(X[0]+be*(He+.5)/U,X[1]+ye*(qe+.5)/j),q=Math.pow(1-Math.abs(ke)/ee,le)/2;ke<0&&(q=1-q),q=Math.max(0,Math.min(255,Math.round(q*255))),fe[qe*U+He]=q}return fe;function Ee(Ae,Me){for(var Je=1/0,Pe=1/0,Xe=xe.length;Xe--;){var Re=xe[Xe];if(Re.maxX+Pe<=Ae)break;if(Ae+Pe>Re.minX&&Me-Pe<Re.maxY&&Me+Pe>Re.minY){var Fe=m(Ae,Me,Re.x1,Re.y1,Re.x2,Re.y2);Fe<Je&&(Je=Fe,Pe=Math.sqrt(Je))}}return De(Ae,Me)&&(Pe=-Pe),Pe}function De(Ae,Me){for(var Je=0,Pe=xe.length;Pe--;){var Xe=xe[Pe];if(Xe.maxX<=Ae)break;var Re=Xe.y1>Me!=Xe.y2>Me&&Ae<(Xe.x2-Xe.x1)*(Me-Xe.y1)/(Xe.y2-Xe.y1)+Xe.x1;Re&&(Je+=Xe.y1<Xe.y2?1:-1)}return Je!==0}}function p(U,j,W,X,ee,le,fe,be,ye,xe){le===void 0&&(le=1),be===void 0&&(be=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0),_(U,j,W,X,ee,le,fe,null,be,ye,xe)}function _(U,j,W,X,ee,le,fe,be,ye,xe,He){le===void 0&&(le=1),ye===void 0&&(ye=0),xe===void 0&&(xe=0),He===void 0&&(He=0);for(var qe=g(U,j,W,X,ee,le),ke=new Uint8Array(qe.length*4),q=0;q<qe.length;q++)ke[q*4+He]=qe[q];h(fe,ke,ye,xe,U,j,1<<3-He,be)}function m(U,j,W,X,ee,le){var fe=ee-W,be=le-X,ye=fe*fe+be*be,xe=ye?Math.max(0,Math.min(1,((U-W)*fe+(j-X)*be)/ye)):0,He=U-(W+xe*fe),qe=j-(X+xe*be);return He*He+qe*qe}var v=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:p,generateIntoFramebuffer:_}),y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",x=new Float32Array([0,0,2,0,0,2]),E=null,L=!1,T={},D=new WeakMap;function I(U){if(!L&&!V(U))throw new Error("WebGL generation not supported")}function N(U,j,W,X,ee,le,fe){if(le===void 0&&(le=1),fe===void 0&&(fe=null),!fe&&(fe=E,!fe)){var be=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!be)throw new Error("OffscreenCanvas or DOM canvas not supported");fe=E=be.getContext("webgl",{depth:!1})}I(fe);var ye=new Uint8Array(U*j*4);u(fe,function(ke){var q=ke.gl,Ee=ke.withTexture,De=ke.withTextureFramebuffer;Ee("readable",function(Ae,Me){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,U,j,0,q.RGBA,q.UNSIGNED_BYTE,null),De(Ae,Me,function(Je){O(U,j,W,X,ee,le,q,Je,0,0,0),q.readPixels(0,0,U,j,q.RGBA,q.UNSIGNED_BYTE,ye)})})});for(var xe=new Uint8Array(U*j),He=0,qe=0;He<ye.length;He+=4)xe[qe++]=ye[He];return xe}function P(U,j,W,X,ee,le,fe,be,ye,xe){le===void 0&&(le=1),be===void 0&&(be=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0),O(U,j,W,X,ee,le,fe,null,be,ye,xe)}function O(U,j,W,X,ee,le,fe,be,ye,xe,He){le===void 0&&(le=1),ye===void 0&&(ye=0),xe===void 0&&(xe=0),He===void 0&&(He=0),I(fe);var qe=[];r(W,function(ke,q,Ee,De){qe.push(ke,q,Ee,De)}),qe=new Float32Array(qe),u(fe,function(ke){var q=ke.gl,Ee=ke.isWebGL2,De=ke.getExtension,Ae=ke.withProgram,Me=ke.withTexture,Je=ke.withTextureFramebuffer,Pe=ke.handleContextLoss;if(Me("rawDistances",function(Xe,Re){(U!==Xe._lastWidth||j!==Xe._lastHeight)&&q.texImage2D(q.TEXTURE_2D,0,q.RGBA,Xe._lastWidth=U,Xe._lastHeight=j,0,q.RGBA,q.UNSIGNED_BYTE,null),Ae("main",y,C,function(Fe){var wt=Fe.setAttribute,te=Fe.setUniform,Z=!Ee&&De("ANGLE_instanced_arrays"),we=!Ee&&De("EXT_blend_minmax");wt("aUV",2,q.STATIC_DRAW,0,x),wt("aLineSegment",4,q.DYNAMIC_DRAW,1,qe),te.apply(void 0,["4f","uGlyphBounds"].concat(X)),te("1f","uMaxDistance",ee),te("1f","uExponent",le),Je(Xe,Re,function(Ye){q.enable(q.BLEND),q.colorMask(!0,!0,!0,!0),q.viewport(0,0,U,j),q.scissor(0,0,U,j),q.blendFunc(q.ONE,q.ONE),q.blendEquationSeparate(q.FUNC_ADD,Ee?q.MAX:we.MAX_EXT),q.clear(q.COLOR_BUFFER_BIT),Ee?q.drawArraysInstanced(q.TRIANGLES,0,3,qe.length/4):Z.drawArraysInstancedANGLE(q.TRIANGLES,0,3,qe.length/4)})}),Ae("post",o,S,function(Fe){Fe.setAttribute("aUV",2,q.STATIC_DRAW,0,x),Fe.setUniform("1i","tex",Re),q.bindFramebuffer(q.FRAMEBUFFER,be),q.disable(q.BLEND),q.colorMask(He===0,He===1,He===2,He===3),q.viewport(ye,xe,U,j),q.scissor(ye,xe,U,j),q.drawArrays(q.TRIANGLES,0,3)})}),q.isContextLost())throw Pe(),new Error("webgl context lost")})}function V(U){var j=!U||U===E?T:U.canvas||U,W=D.get(j);if(W===void 0){L=!0;var X=null;try{var ee=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],le=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,U);W=le&&ee.length===le.length&&le.every(function(fe,be){return fe===ee[be]}),W||(X="bad trial run results",console.info(ee,le))}catch(fe){W=!1,X=fe.message}X&&console.warn("WebGL SDF generation not supported:",X),L=!1,D.set(j,W)}return W}var z=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:P,generateIntoFramebuffer:O,isSupported:V});function K(U,j,W,X,ee,le){ee===void 0&&(ee=Math.max(X[2]-X[0],X[3]-X[1])/2),le===void 0&&(le=1);try{return N.apply(z,arguments)}catch(fe){return console.info("WebGL SDF generation failed, falling back to JS",fe),g.apply(v,arguments)}}function H(U,j,W,X,ee,le,fe,be,ye,xe){ee===void 0&&(ee=Math.max(X[2]-X[0],X[3]-X[1])/2),le===void 0&&(le=1),be===void 0&&(be=0),ye===void 0&&(ye=0),xe===void 0&&(xe=0);try{return P.apply(z,arguments)}catch(He){return console.info("WebGL SDF generation failed, falling back to JS",He),p.apply(v,arguments)}}return e.forEachPathCommand=s,e.generate=K,e.generateIntoCanvas=H,e.javascript=v,e.pathToLineSegments=r,e.webgl=z,e.webglUtils=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}function wEt(){var i=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},s={};n.L=1,s[1]="L",Object.keys(t).forEach(function(Pe,Xe){n[Pe]=1<<Xe+1,s[n[Pe]]=Pe}),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,l=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,c=n.S|n.WS|n.B|r|n.PDI|l,u=null;function h(){if(!u){u=new Map;var Pe=function(Re){if(t.hasOwnProperty(Re)){var Fe=0;t[Re].split(",").forEach(function(wt){var te=wt.split("+"),Z=te[0],we=te[1];Z=parseInt(Z,36),we=we?parseInt(we,36):0,u.set(Fe+=Z,n[Re]);for(var Ye=0;Ye<we;Ye++)u.set(++Fe,n[Re])})}};for(var Xe in t)Pe(Xe)}}function d(Pe){return h(),u.get(Pe.codePointAt(0))||n.L}function f(Pe){return s[d(Pe)]}var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function p(Pe,Xe){var Re=36,Fe=0,wt=new Map,te=Xe&&new Map,Z;return Pe.split(",").forEach(function we(Ye){if(Ye.indexOf("+")!==-1)for(var je=+Ye;je--;)we(Z);else{Z=Ye;var Ge=Ye.split(">"),ot=Ge[0],tt=Ge[1];ot=String.fromCodePoint(Fe+=parseInt(ot,Re)),tt=String.fromCodePoint(Fe+=parseInt(tt,Re)),wt.set(ot,tt),Xe&&te.set(tt,ot)}}),{map:wt,reverseMap:te}}var _,m,v;function y(){if(!_){var Pe=p(g.pairs,!0),Xe=Pe.map,Re=Pe.reverseMap;_=Xe,m=Re,v=p(g.canonical,!1).map}}function C(Pe){return y(),_.get(Pe)||null}function S(Pe){return y(),m.get(Pe)||null}function x(Pe){return y(),v.get(Pe)||null}var E=n.L,L=n.R,T=n.EN,D=n.ES,I=n.ET,N=n.AN,P=n.CS,O=n.B,V=n.S,z=n.ON,K=n.BN,H=n.NSM,U=n.AL,j=n.LRO,W=n.RLO,X=n.LRE,ee=n.RLE,le=n.PDF,fe=n.LRI,be=n.RLI,ye=n.FSI,xe=n.PDI;function He(Pe,Xe){for(var Re=125,Fe=new Uint32Array(Pe.length),wt=0;wt<Pe.length;wt++)Fe[wt]=d(Pe[wt]);var te=new Map;function Z(mo,za){var wr=Fe[mo];Fe[mo]=za,te.set(wr,te.get(wr)-1),wr&a&&te.set(a,te.get(a)-1),te.set(za,(te.get(za)||0)+1),za&a&&te.set(a,(te.get(a)||0)+1)}for(var we=new Uint8Array(Pe.length),Ye=new Map,je=[],Ge=null,ot=0;ot<Pe.length;ot++)Ge||je.push(Ge={start:ot,end:Pe.length-1,level:Xe==="rtl"?1:Xe==="ltr"?0:k1(ot,!1)}),Fe[ot]&O&&(Ge.end=ot,Ge=null);for(var tt=ee|X|W|j|r|xe|le|O,Oe=function(mo){return mo+(mo&1?1:2)},lt=function(mo){return mo+(mo&1?2:1)},xt=0;xt<je.length;xt++){Ge=je[xt];var ut=[{_level:Ge.level,_override:0,_isolate:0}],nt=void 0,ft=0,At=0,kt=0;te.clear();for(var he=Ge.start;he<=Ge.end;he++){var at=Fe[he];if(nt=ut[ut.length-1],te.set(at,(te.get(at)||0)+1),at&a&&te.set(a,(te.get(a)||0)+1),at&tt)if(at&(ee|X)){we[he]=nt._level;var Ue=(at===ee?lt:Oe)(nt._level);Ue<=Re&&!ft&&!At?ut.push({_level:Ue,_override:0,_isolate:0}):ft||At++}else if(at&(W|j)){we[he]=nt._level;var gt=(at===W?lt:Oe)(nt._level);gt<=Re&&!ft&&!At?ut.push({_level:gt,_override:at&W?L:E,_isolate:0}):ft||At++}else if(at&r){at&ye&&(at=k1(he+1,!0)===1?be:fe),we[he]=nt._level,nt._override&&Z(he,nt._override);var Ct=(at===be?lt:Oe)(nt._level);Ct<=Re&&ft===0&&At===0?(kt++,ut.push({_level:Ct,_override:0,_isolate:1,_isolInitIndex:he})):ft++}else if(at&xe){if(ft>0)ft--;else if(kt>0){for(At=0;!ut[ut.length-1]._isolate;)ut.pop();var cn=ut[ut.length-1]._isolInitIndex;cn!=null&&(Ye.set(cn,he),Ye.set(he,cn)),ut.pop(),kt--}nt=ut[ut.length-1],we[he]=nt._level,nt._override&&Z(he,nt._override)}else at&le?(ft===0&&(At>0?At--:!nt._isolate&&ut.length>1&&(ut.pop(),nt=ut[ut.length-1])),we[he]=nt._level):at&O&&(we[he]=Ge.level);else we[he]=nt._level,nt._override&&at!==K&&Z(he,nt._override)}for(var wn=[],qn=null,St=Ge.start;St<=Ge.end;St++){var Q=Fe[St];if(!(Q&l)){var J=we[St],ne=Q&r,pe=Q===xe;qn&&J===qn._level?(qn._end=St,qn._endsWithIsolInit=ne):wn.push(qn={_start:St,_end:St,_level:J,_startsWithPDI:pe,_endsWithIsolInit:ne})}}for(var ve=[],Te=0;Te<wn.length;Te++){var ze=wn[Te];if(!ze._startsWithPDI||ze._startsWithPDI&&!Ye.has(ze._start)){for(var ht=[qn=ze],ct=void 0;qn&&qn._endsWithIsolInit&&(ct=Ye.get(qn._end))!=null;)for(var zt=Te+1;zt<wn.length;zt++)if(wn[zt]._start===ct){ht.push(qn=wn[zt]);break}for(var sn=[],Hn=0;Hn<ht.length;Hn++)for(var On=ht[Hn],ae=On._start;ae<=On._end;ae++)sn.push(ae);for(var _e=we[sn[0]],ie=Ge.level,ce=sn[0]-1;ce>=0;ce--)if(!(Fe[ce]&l)){ie=we[ce];break}var Ce=sn[sn.length-1],mt=we[Ce],Bt=Ge.level;if(!(Fe[Ce]&r)){for(var jt=Ce+1;jt<=Ge.end;jt++)if(!(Fe[jt]&l)){Bt=we[jt];break}}ve.push({_seqIndices:sn,_sosType:Math.max(ie,_e)%2?L:E,_eosType:Math.max(Bt,mt)%2?L:E})}}for(var Ut=0;Ut<ve.length;Ut++){var dn=ve[Ut],dt=dn._seqIndices,un=dn._sosType,Ji=dn._eosType,Di=we[dt[0]]&1?L:E;if(te.get(H))for(var go=0;go<dt.length;go++){var na=dt[go];if(Fe[na]&H){for(var Ui=un,Sn=go-1;Sn>=0;Sn--)if(!(Fe[dt[Sn]]&l)){Ui=Fe[dt[Sn]];break}Z(na,Ui&(r|xe)?z:Ui)}}if(te.get(T))for(var wi=0;wi<dt.length;wi++){var xn=dt[wi];if(Fe[xn]&T)for(var br=wi-1;br>=-1;br--){var rr=br===-1?un:Fe[dt[br]];if(rr&o){rr===U&&Z(xn,N);break}}}if(te.get(U))for(var Is=0;Is<dt.length;Is++){var gl=dt[Is];Fe[gl]&U&&Z(gl,L)}if(te.get(D)||te.get(P))for(var rs=1;rs<dt.length-1;rs++){var ws=dt[rs];if(Fe[ws]&(D|P)){for(var Pa=0,Fr=0,zh=rs-1;zh>=0&&(Pa=Fe[dt[zh]],!!(Pa&l));zh--);for(var Uh=rs+1;Uh<dt.length&&(Fr=Fe[dt[Uh]],!!(Fr&l));Uh++);Pa===Fr&&(Fe[ws]===D?Pa===T:Pa&(T|N))&&Z(ws,Pa)}}if(te.get(T))for(var ia=0;ia<dt.length;ia++){var Xl=dt[ia];if(Fe[Xl]&T){for(var x1=ia-1;x1>=0&&Fe[dt[x1]]&(I|l);x1--)Z(dt[x1],T);for(ia++;ia<dt.length&&Fe[dt[ia]]&(I|l|T);ia++)Fe[dt[ia]]!==T&&Z(dt[ia],T)}}if(te.get(I)||te.get(D)||te.get(P))for(var Zm=0;Zm<dt.length;Zm++){var Gk=dt[Zm];if(Fe[Gk]&(I|D|P)){Z(Gk,z);for(var tf=Zm-1;tf>=0&&Fe[dt[tf]]&l;tf--)Z(dt[tf],z);for(var nf=Zm+1;nf<dt.length&&Fe[dt[nf]]&l;nf++)Z(dt[nf],z)}}if(te.get(T))for(var sf=0,Qm=un;sf<dt.length;sf++){var jk=dt[sf],uS=Fe[jk];uS&T?Qm===E&&Z(jk,E):uS&o&&(Qm=uS)}if(te.get(a)){var rf=L|T|N,E1=rf|E,Vh=[];{for(var Zg=[],Wh=0;Wh<dt.length;Wh++)if(Fe[dt[Wh]]&a){var ai=Pe[dt[Wh]],hS=void 0;if(C(ai)!==null)if(Zg.length<63)Zg.push({char:ai,seqIndex:Wh});else break;else if((hS=S(ai))!==null)for(var of=Zg.length-1;of>=0;of--){var L1=Zg[of].char;if(L1===hS||L1===S(x(ai))||C(x(L1))===ai){Vh.push([Zg[of].seqIndex,Wh]),Zg.length=of;break}}}Vh.sort(function(mo,za){return mo[0]-za[0]})}for(var dS=0;dS<Vh.length;dS++){for(var Kk=Vh[dS],Bs=Kk[0],Jm=Kk[1],qk=!1,Oa=0,fS=Bs+1;fS<Jm;fS++){var e_=dt[fS];if(Fe[e_]&E1){qk=!0;var Yl=Fe[e_]&rf?L:E;if(Yl===Di){Oa=Yl;break}}}if(qk&&!Oa){Oa=un;for(var gS=Bs-1;gS>=0;gS--){var Xk=dt[gS];if(Fe[Xk]&E1){var Zl=Fe[Xk]&rf?L:E;Zl!==Di?Oa=Zl:Oa=Di;break}}}if(Oa){if(Fe[dt[Bs]]=Fe[dt[Jm]]=Oa,Oa!==Di){for(var Fa=Bs+1;Fa<dt.length;Fa++)if(!(Fe[dt[Fa]]&l)){d(Pe[dt[Fa]])&H&&(Fe[dt[Fa]]=Oa);break}}if(Oa!==Di){for(var Hh=Jm+1;Hh<dt.length;Hh++)if(!(Fe[dt[Hh]]&l)){d(Pe[dt[Hh]])&H&&(Fe[dt[Hh]]=Oa);break}}}}for(var Rc=0;Rc<dt.length;Rc++)if(Fe[dt[Rc]]&a){for(var pS=Rc,mS=Rc,pl=un,t_=Rc-1;t_>=0;t_--)if(Fe[dt[t_]]&l)pS=t_;else{pl=Fe[dt[t_]]&rf?L:E;break}for(var n_=Ji,i_=Rc+1;i_<dt.length;i_++)if(Fe[dt[i_]]&(a|l))mS=i_;else{n_=Fe[dt[i_]]&rf?L:E;break}for(var Ba=pS;Ba<=mS;Ba++)Fe[dt[Ba]]=pl===n_?pl:Di;Rc=mS}}}for(var po=Ge.start;po<=Ge.end;po++){var T1=we[po],Nu=Fe[po];if(T1&1?Nu&(E|T|N)&&we[po]++:Nu&L?we[po]++:Nu&(N|T)&&(we[po]+=2),Nu&l&&(we[po]=po===0?Ge.level:we[po-1]),po===Ge.end||d(Pe[po])&(V|O))for(var Qg=po;Qg>=0&&d(Pe[Qg])&c;Qg--)we[Qg]=Ge.level}}return{levels:we,paragraphs:je};function k1(mo,za){for(var wr=mo;wr<Pe.length;wr++){var Cr=Fe[wr];if(Cr&(L|U))return 1;if(Cr&(O|E)||za&&Cr===xe)return 0;if(Cr&r){var Ql=Yk(wr);wr=Ql===-1?Pe.length:Ql}}return 0}function Yk(mo){for(var za=1,wr=mo+1;wr<Pe.length;wr++){var Cr=Fe[wr];if(Cr&O)break;if(Cr&xe){if(--za===0)return wr}else Cr&r&&za++}return-1}}var qe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ke;function q(){if(!ke){var Pe=p(qe,!0),Xe=Pe.map,Re=Pe.reverseMap;Re.forEach(function(Fe,wt){Xe.set(wt,Fe)}),ke=Xe}}function Ee(Pe){return q(),ke.get(Pe)||null}function De(Pe,Xe,Re,Fe){var wt=Pe.length;Re=Math.max(0,Re==null?0:+Re),Fe=Math.min(wt-1,Fe==null?wt-1:+Fe);for(var te=new Map,Z=Re;Z<=Fe;Z++)if(Xe[Z]&1){var we=Ee(Pe[Z]);we!==null&&te.set(Z,we)}return te}function Ae(Pe,Xe,Re,Fe){var wt=Pe.length;Re=Math.max(0,Re==null?0:+Re),Fe=Math.min(wt-1,Fe==null?wt-1:+Fe);var te=[];return Xe.paragraphs.forEach(function(Z){var we=Math.max(Re,Z.start),Ye=Math.min(Fe,Z.end);if(we<Ye){for(var je=Xe.levels.slice(we,Ye+1),Ge=Ye;Ge>=we&&d(Pe[Ge])&c;Ge--)je[Ge]=Z.level;for(var ot=Z.level,tt=1/0,Oe=0;Oe<je.length;Oe++){var lt=je[Oe];lt>ot&&(ot=lt),lt<tt&&(tt=lt|1)}for(var xt=ot;xt>=tt;xt--)for(var ut=0;ut<je.length;ut++)if(je[ut]>=xt){for(var nt=ut;ut+1<je.length&&je[ut+1]>=xt;)ut++;ut>nt&&te.push([nt+we,ut+we])}}}),te}function Me(Pe,Xe,Re,Fe){var wt=Je(Pe,Xe,Re,Fe),te=[].concat(Pe);return wt.forEach(function(Z,we){te[we]=(Xe.levels[Z]&1?Ee(Pe[Z]):null)||Pe[Z]}),te.join("")}function Je(Pe,Xe,Re,Fe){for(var wt=Ae(Pe,Xe,Re,Fe),te=[],Z=0;Z<Pe.length;Z++)te[Z]=Z;return wt.forEach(function(we){for(var Ye=we[0],je=we[1],Ge=te.slice(Ye,je+1),ot=Ge.length;ot--;)te[je-ot]=Ge[ot]}),te}return e.closingToOpeningBracket=S,e.getBidiCharType=d,e.getBidiCharTypeName=f,e.getCanonicalBracket=x,e.getEmbeddingLevels=He,e.getMirroredCharacter=Ee,e.getMirroredCharactersMap=De,e.getReorderSegments=Ae,e.getReorderedIndices=Je,e.getReorderedString=Me,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}const VCe=/\bvoid\s+main\s*\(\s*\)\s*{/g;function O$(i){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,s){let r=$n[s];return r?O$(r):n}return i.replace(e,t)}const zo=[];for(let i=0;i<256;i++)zo[i]=(i<16?"0":"")+i.toString(16);function CEt(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(zo[i&255]+zo[i>>8&255]+zo[i>>16&255]+zo[i>>24&255]+"-"+zo[e&255]+zo[e>>8&255]+"-"+zo[e>>16&15|64]+zo[e>>24&255]+"-"+zo[t&63|128]+zo[t>>8&255]+"-"+zo[t>>16&255]+zo[t>>24&255]+zo[n&255]+zo[n>>8&255]+zo[n>>16&255]+zo[n>>24&255]).toUpperCase()}const N_=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},SEt=Date.now(),Yce=new WeakMap,Zce=new Map;let xEt=1e10;function F$(i,e){const t=kEt(e);let n=Yce.get(i);if(n||Yce.set(i,n=Object.create(null)),n[t])return new n[t];const s=`_onBeforeCompile${t}`,r=function(c,u){i.onBeforeCompile.call(this,c,u);const h=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let d=Zce[h];if(!d){const f=EEt(this,c,e,t);d=Zce[h]=f}c.vertexShader=d.vertexShader,c.fragmentShader=d.fragmentShader,N_(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-SEt}}),this[s]&&this[s](c)},o=function(){return a(e.chained?i:i.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:i}),Object.defineProperty(u,"id",{value:xEt++}),u.uuid=CEt(),u.uniforms=N_({},c.uniforms,e.uniforms),u.defines=N_({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=N_({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return r},set(c){this[s]=c}},copy:{writable:!0,configurable:!0,value:function(c){return i.copy.call(this,c),!i.isShaderMaterial&&!i.isDerivedMaterial&&(N_(this.extensions,c.extensions),N_(this.defines,c.defines),N_(this.uniforms,xX.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new i.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=F$(i.isDerivedMaterial?i.getDepthMaterial():new l5({depthPacking:_X}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=F$(i.isDerivedMaterial?i.getDistanceMaterial():new c5,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),i.dispose.call(this)}}};return n[t]=o,new o}function EEt(i,{vertexShader:e,fragmentShader:t},n,s){let{vertexDefs:r,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:d,customRewriter:f,timeUniform:g}=n;if(r=r||"",o=o||"",a=a||"",c=c||"",u=u||"",h=h||"",(l||f)&&(e=O$(e)),(d||f)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=O$(t)),f){let p=f({vertexShader:e,fragmentShader:t});e=p.vertexShader,t=p.fragmentShader}if(d){let p=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(p.push(_),"")),h=`${d}
${p.join(`
`)}
${h}`}if(g){const p=`
uniform float ${g};
`;r=p+r,c=p+c}return l&&(e=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${e}
`,r=`${r}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(p,_,m,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,m))?_:`troika_${_}_${s}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),e=Qce(e,s,r,o,a),t=Qce(t,s,c,u,h),{vertexShader:e,fragmentShader:t}}function Qce(i,e,t,n,s){return(n||s||t)&&(i=i.replace(VCe,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${s}
}`),i}function LEt(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}let TEt=0;const Jce=new Map;function kEt(i){const e=JSON.stringify(i,LEt);let t=Jce.get(e);return t==null&&Jce.set(e,t=++TEt),t}function MEt(i,e,t){const{defaultFontURL:n}=t,s=Object.create(null),r=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(v,y){function C(){const S=x=>{console.error(`Failure loading font ${v}${v===n?"":"; trying fallback"}`,x),v!==n&&(v=n,C())};try{const x=new XMLHttpRequest;x.open("get",v,!0),x.responseType="arraybuffer",x.onload=function(){if(x.status>=400)S(new Error(x.statusText));else if(x.status>0)try{const E=i(x.response);y(E)}catch(E){S(E)}},x.onerror=S,x.send()}catch(x){S(x)}}C()}function u(v,y){v||(v=n);let C=s[v];C?C.pending?C.pending.push(y):y(C):(s[v]={pending:[y]},c(v,S=>{let x=s[v].pending;s[v]=S,x.forEach(E=>E(S))}))}function h({text:v="",font:y=n,sdfGlyphSize:C=64,fontSize:S=1,letterSpacing:x=0,lineHeight:E="normal",maxWidth:L=r,direction:T,textAlign:D="left",textIndent:I=0,whiteSpace:N="normal",overflowWrap:P="normal",anchorX:O=0,anchorY:V=0,includeCaretPositions:z=!1,chunkedBoundsSize:K=8192,colorRanges:H=null},U,j=!1){const W=p(),X={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),S=+S,x=+x,L=+L,E=E||"normal",I=+I,u(y,ee=>{const le=isFinite(L);let fe=null,be=null,ye=null,xe=null,He=null,qe=null,ke=null,q=0,Ee=0,De=N!=="nowrap";const{ascender:Ae,descender:Me,unitsPerEm:Je,lineGap:Pe,capHeight:Xe,xHeight:Re}=ee;X.fontLoad=p()-W;const Fe=p(),wt=S/Je;E==="normal"&&(E=(Ae-Me+Pe)/Je),E=E*S;const te=(E-(Ae-Me)*wt)/2,Z=-(Ae*wt+te),we=Math.min(E,(Ae-Me)*wt),Ye=(Ae+Me)/2*wt-we/2;let je=I,Ge=new _;const ot=[Ge];ee.forEachGlyph(v,S,x,(lt,xt,ut)=>{const nt=v.charAt(ut),ft=lt.advanceWidth*wt,At=Ge.count;let kt;if("isEmpty"in lt||(lt.isWhitespace=!!nt&&new RegExp(a).test(nt),lt.canBreakAfter=!!nt&&l.test(nt),lt.isEmpty=lt.xMin===lt.xMax||lt.yMin===lt.yMax||o.test(nt)),!lt.isWhitespace&&!lt.isEmpty&&Ee++,De&&le&&!lt.isWhitespace&&xt+ft+je>L&&At){if(Ge.glyphAt(At-1).glyphObj.canBreakAfter)kt=new _,je=-xt;else for(let at=At;at--;)if(at===0&&P==="break-word"){kt=new _,je=-xt;break}else if(Ge.glyphAt(at).glyphObj.canBreakAfter){kt=Ge.splitAt(at+1);const Ue=kt.glyphAt(0).x;je-=Ue;for(let gt=kt.count;gt--;)kt.glyphAt(gt).x-=Ue;break}kt&&(Ge.isSoftWrapped=!0,Ge=kt,ot.push(Ge),q=L)}let he=Ge.glyphAt(Ge.count);he.glyphObj=lt,he.x=xt+je,he.width=ft,he.charIndex=ut,nt===`
`&&(Ge=new _,ot.push(Ge),je=-(xt+ft+x*S)+I)}),ot.forEach(lt=>{for(let xt=lt.count;xt--;){let{glyphObj:ut,x:nt,width:ft}=lt.glyphAt(xt);if(!ut.isWhitespace){lt.width=nt+ft,lt.width>q&&(q=lt.width);return}}});let tt=0,Oe=0;if(O&&(typeof O=="number"?tt=-O:typeof O=="string"&&(tt=-q*(O==="left"?0:O==="center"?.5:O==="right"?1:f(O)))),V){if(typeof V=="number")Oe=-V;else if(typeof V=="string"){let lt=ot.length*E;Oe=V==="top"?0:V==="top-baseline"?-Z:V==="top-cap"?-Z-Xe*wt:V==="top-ex"?-Z-Re*wt:V==="middle"?lt/2:V==="bottom"?lt:V==="bottom-baseline"?lt-te+Me*wt:f(V)*lt}}if(!j){const lt=e.getEmbeddingLevels(v,T);fe=new Uint16Array(Ee),be=new Float32Array(Ee*2),ye={},qe=[r,r,-r,-r],ke=[];let xt=Z;z&&(He=new Float32Array(v.length*3)),H&&(xe=new Uint8Array(Ee*3));let ut=0,nt=-1,ft=-1,At,kt;if(ot.forEach((he,at)=>{let{count:Ue,width:gt}=he;if(Ue>0){let Ct=0;for(let J=Ue;J--&&he.glyphAt(J).glyphObj.isWhitespace;)Ct++;let cn=0,wn=0;if(D==="center")cn=(q-gt)/2;else if(D==="right")cn=q-gt;else if(D==="justify"&&he.isSoftWrapped){let J=0;for(let ne=Ue-Ct;ne--;)he.glyphAt(ne).glyphObj.isWhitespace&&J++;wn=(q-gt)/J}if(wn||cn){let J=0;for(let ne=0;ne<Ue;ne++){let pe=he.glyphAt(ne);const ve=pe.glyphObj;pe.x+=cn+J,wn!==0&&ve.isWhitespace&&ne<Ue-Ct&&(J+=wn,pe.width+=wn)}}const qn=e.getReorderSegments(v,lt,he.glyphAt(0).charIndex,he.glyphAt(he.count-1).charIndex);for(let J=0;J<qn.length;J++){const[ne,pe]=qn[J];let ve=1/0,Te=-1/0;for(let ze=0;ze<Ue;ze++)if(he.glyphAt(ze).charIndex>=ne){let ht=ze,ct=ze;for(;ct<Ue;ct++){let zt=he.glyphAt(ct);if(zt.charIndex>pe)break;ct<Ue-Ct&&(ve=Math.min(ve,zt.x),Te=Math.max(Te,zt.x+zt.width))}for(let zt=ht;zt<ct;zt++){const sn=he.glyphAt(zt);sn.x=Te-(sn.x+sn.width-ve)}break}}let St;const Q=J=>St=J;for(let J=0;J<Ue;J++){let ne=he.glyphAt(J);St=ne.glyphObj;const pe=St.index,ve=lt.levels[ne.charIndex]&1;if(ve){const Te=e.getMirroredCharacter(v[ne.charIndex]);Te&&ee.forEachGlyph(Te,0,0,Q)}if(z){const{charIndex:Te}=ne,ze=ne.x+tt,ht=ne.x+ne.width+tt;He[Te*3]=ve?ht:ze,He[Te*3+1]=ve?ze:ht,He[Te*3+2]=xt+Ye+Oe;const ct=Te-nt;ct>1&&g(He,nt,ct),nt=Te}if(H){const{charIndex:Te}=ne;for(;Te>ft;)ft++,H.hasOwnProperty(ft)&&(kt=H[ft])}if(!St.isWhitespace&&!St.isEmpty){const Te=ut++;ye[pe]||(ye[pe]={path:St.path,pathBounds:[St.xMin,St.yMin,St.xMax,St.yMax]});const ze=ne.x+tt,ht=xt+Oe;be[Te*2]=ze,be[Te*2+1]=ht;const ct=ze+St.xMin*wt,zt=ht+St.yMin*wt,sn=ze+St.xMax*wt,Hn=ht+St.yMax*wt;ct<qe[0]&&(qe[0]=ct),zt<qe[1]&&(qe[1]=zt),sn>qe[2]&&(qe[2]=sn),Hn>qe[3]&&(qe[3]=Hn),Te%K===0&&(At={start:Te,end:Te,rect:[r,r,-r,-r]},ke.push(At)),At.end++;const On=At.rect;if(ct<On[0]&&(On[0]=ct),zt<On[1]&&(On[1]=zt),sn>On[2]&&(On[2]=sn),Hn>On[3]&&(On[3]=Hn),fe[Te]=pe,H){const ae=Te*3;xe[ae]=kt>>16&255,xe[ae+1]=kt>>8&255,xe[ae+2]=kt&255}}}}xt-=E}),He){const he=v.length-nt;he>1&&g(He,nt,he)}}X.typesetting=p()-Fe,U({glyphIds:fe,glyphPositions:be,glyphData:ye,caretPositions:He,caretHeight:we,glyphColors:xe,chunkedBounds:ke,fontSize:S,unitsPerEm:Je,ascender:Ae*wt,descender:Me*wt,capHeight:Xe*wt,xHeight:Re*wt,lineHeight:E,topBaseline:Z,blockBounds:[tt,Oe-ot.length*E,tt+q,Oe],visibleBounds:qe,timings:X})})}function d(v,y){h(v,C=>{const[S,x,E,L]=C.blockBounds;y({width:E-S,height:L-x})},{metricsOnly:!0})}function f(v){let y=v.match(/^([\d.]+)%$/),C=y?parseFloat(y[1]):NaN;return isNaN(C)?0:C/100}function g(v,y,C){const S=v[y*3],x=v[y*3+1],E=v[y*3+2],L=(x-S)/C;for(let T=0;T<C;T++){const D=(y+T)*3;v[D]=S+L*T,v[D+1]=S+L*(T+1),v[D+2]=E}}function p(){return(self.performance||Date).now()}function _(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return _.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(v){let y=_.flyweight;return y.data=this.data,y.index=v,y},splitAt(v){let y=new _;return y.data=this.data.splice(v*m.length),y}},_.flyweight=m.reduce((v,y,C,S)=>(Object.defineProperty(v,y,{get(){return this.data[this.index*m.length+C]},set(x){this.data[this.index*m.length+C]=x}}),v),{data:null,index:0}),{typeset:h,measure:d,loadFont:u}}const J0=()=>(self.performance||Date).now(),q5=UCe();let eue;function DEt(i,e,t,n,s,r,o,a,l,c,u=!0){return u?IEt(i,e,t,n,s,r,o,a,l,c).then(null,h=>(eue||(console.warn("WebGL SDF generation failed, falling back to JS",h),eue=!0),nue(i,e,t,n,s,r,o,a,l,c))):nue(i,e,t,n,s,r,o,a,l,c)}const hN=[],AEt=5;let B$=0;function WCe(){const i=J0();for(;hN.length&&J0()-i<AEt;)hN.shift()();B$=hN.length?setTimeout(WCe,0):0}const IEt=(...i)=>new Promise((e,t)=>{hN.push(()=>{const n=J0();try{q5.webgl.generateIntoCanvas(...i),e({timing:J0()-n})}catch(s){t(s)}}),B$||(B$=setTimeout(WCe,0))}),NEt=4,REt=2e3,tue={};let PEt=0;function nue(i,e,t,n,s,r,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+PEt++%NEt;let h=tue[u];return h||(h=tue[u]={workerModule:Hk({name:u,workerId:u,dependencies:[UCe,J0],init(d,f){const g=d().javascript.generate;return function(...p){const _=f();return{textureData:g(...p),timing:f()-_}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(i,e,t,n,s,r).then(({textureData:d,timing:f})=>{const g=J0(),p=new Uint8Array(d.length*4);for(let _=0;_<d.length;_++)p[_*4+c]=d[_];return q5.webglUtils.renderImageData(o,p,a,l,i,e,1<<3-c),f+=J0()-g,--h.requests===0&&(h.idleTimer=setTimeout(()=>{yEt(u)},REt)),{timing:f}})}function OEt(i){i._warm||(q5.webgl.isSupported(i),i._warm=!0)}const FEt=q5.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function BEt(){return typeof window>"u"&&(self.window=self),function(i){var e={parse:function(s){var r=e._bin,o=new Uint8Array(s);if(r.readASCII(o,0,4)=="ttcf"){var a=4;r.readUshort(o,a),a+=2,r.readUshort(o,a),a+=2;var l=r.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var h=r.readUint(o,a);a+=4,c.push(e._readFont(o,h))}return c}return[e._readFont(o,0)]},_readFont:function(s,r){var o=e._bin,a=r;o.readFixed(s,r),r+=4;var l=o.readUshort(s,r);r+=2,o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:s,_offset:a},h={},d=0;d<l;d++){var f=o.readASCII(s,r,4);r+=4,o.readUint(s,r),r+=4;var g=o.readUint(s,r);r+=4;var p=o.readUint(s,r);r+=4,h[f]={offset:g,length:p}}for(d=0;d<c.length;d++){var _=c[d];h[_]&&(u[_.trim()]=e[_.trim()].parse(s,h[_].offset,h[_].length,u))}return u},_tabOffset:function(s,r,o){for(var a=e._bin,l=a.readUshort(s,o+4),c=o+12,u=0;u<l;u++){var h=a.readASCII(s,c,4);c+=4,a.readUint(s,c),c+=4;var d=a.readUint(s,c);if(c+=4,a.readUint(s,c),c+=4,h==r)return d}return 0}};e._bin={readFixed:function(s,r){return(s[r]<<8|s[r+1])+(s[r+2]<<8|s[r+3])/65540},readF2dot14:function(s,r){return e._bin.readShort(s,r)/16384},readInt:function(s,r){return e._bin._view(s).getInt32(r)},readInt8:function(s,r){return e._bin._view(s).getInt8(r)},readShort:function(s,r){return e._bin._view(s).getInt16(r)},readUshort:function(s,r){return e._bin._view(s).getUint16(r)},readUshorts:function(s,r,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(s,r+2*l));return a},readUint:function(s,r){return e._bin._view(s).getUint32(r)},readUint64:function(s,r){return 4294967296*e._bin.readUint(s,r)+e._bin.readUint(s,r+4)},readASCII:function(s,r,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(s[r+l]);return a},readUnicode:function(s,r,o){for(var a="",l=0;l<o;l++){var c=s[r++]<<8|s[r++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,r,o){var a=e._bin._tdec;return a&&r==0&&o==s.length?a.decode(s):e._bin.readASCII(s,r,o)},readBytes:function(s,r,o){for(var a=[],l=0;l<o;l++)a.push(s[r+l]);return a},readASCIIArray:function(s,r,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(s[r+l]));return a},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,r,o,a,l){var c=e._bin,u={},h=r;c.readFixed(s,r),r+=4;var d=c.readUshort(s,r);r+=2;var f=c.readUshort(s,r);r+=2;var g=c.readUshort(s,r);return r+=2,u.scriptList=e._lctf.readScriptList(s,h+d),u.featureList=e._lctf.readFeatureList(s,h+f),u.lookupList=e._lctf.readLookupList(s,h+g,l),u},e._lctf.readLookupList=function(s,r,o){var a=e._bin,l=r,c=[],u=a.readUshort(s,r);r+=2;for(var h=0;h<u;h++){var d=a.readUshort(s,r);r+=2;var f=e._lctf.readLookupTable(s,l+d,o);c.push(f)}return c},e._lctf.readLookupTable=function(s,r,o){var a=e._bin,l=r,c={tabs:[]};c.ltype=a.readUshort(s,r),r+=2,c.flag=a.readUshort(s,r),r+=2;var u=a.readUshort(s,r);r+=2;for(var h=c.ltype,d=0;d<u;d++){var f=a.readUshort(s,r);r+=2;var g=o(s,h,l+f,c);c.tabs.push(g)}return c},e._lctf.numOfOnes=function(s){for(var r=0,o=0;o<32;o++)s>>>o&1&&r++;return r},e._lctf.readClassDef=function(s,r){var o=e._bin,a=[],l=o.readUshort(s,r);if(r+=2,l==1){var c=o.readUshort(s,r);r+=2;var u=o.readUshort(s,r);r+=2;for(var h=0;h<u;h++)a.push(c+h),a.push(c+h),a.push(o.readUshort(s,r)),r+=2}if(l==2){var d=o.readUshort(s,r);for(r+=2,h=0;h<d;h++)a.push(o.readUshort(s,r)),r+=2,a.push(o.readUshort(s,r)),r+=2,a.push(o.readUshort(s,r)),r+=2}return a},e._lctf.getInterval=function(s,r){for(var o=0;o<s.length;o+=3){var a=s[o],l=s[o+1];if(s[o+2],a<=r&&r<=l)return o}return-1},e._lctf.readCoverage=function(s,r){var o=e._bin,a={};a.fmt=o.readUshort(s,r),r+=2;var l=o.readUshort(s,r);return r+=2,a.fmt==1&&(a.tab=o.readUshorts(s,r,l)),a.fmt==2&&(a.tab=o.readUshorts(s,r,3*l)),a},e._lctf.coverageIndex=function(s,r){var o=s.tab;if(s.fmt==1)return o.indexOf(r);if(s.fmt==2){var a=e._lctf.getInterval(o,r);if(a!=-1)return o[a+2]+(r-o[a])}return-1},e._lctf.readFeatureList=function(s,r){var o=e._bin,a=r,l=[],c=o.readUshort(s,r);r+=2;for(var u=0;u<c;u++){var h=o.readASCII(s,r,4);r+=4;var d=o.readUshort(s,r);r+=2;var f=e._lctf.readFeatureTable(s,a+d);f.tag=h.trim(),l.push(f)}return l},e._lctf.readFeatureTable=function(s,r){var o=e._bin,a=r,l={},c=o.readUshort(s,r);r+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(s,r);r+=2,l.tab=[];for(var h=0;h<u;h++)l.tab.push(o.readUshort(s,r+2*h));return l},e._lctf.readScriptList=function(s,r){var o=e._bin,a=r,l={},c=o.readUshort(s,r);r+=2;for(var u=0;u<c;u++){var h=o.readASCII(s,r,4);r+=4;var d=o.readUshort(s,r);r+=2,l[h.trim()]=e._lctf.readScriptTable(s,a+d)}return l},e._lctf.readScriptTable=function(s,r){var o=e._bin,a=r,l={},c=o.readUshort(s,r);r+=2,l.default=e._lctf.readLangSysTable(s,a+c);var u=o.readUshort(s,r);r+=2;for(var h=0;h<u;h++){var d=o.readASCII(s,r,4);r+=4;var f=o.readUshort(s,r);r+=2,l[d.trim()]=e._lctf.readLangSysTable(s,a+f)}return l},e._lctf.readLangSysTable=function(s,r){var o=e._bin,a={};o.readUshort(s,r),r+=2,a.reqFeature=o.readUshort(s,r),r+=2;var l=o.readUshort(s,r);return r+=2,a.features=o.readUshorts(s,r,l),a},e.CFF={},e.CFF.parse=function(s,r,o){var a=e._bin;(s=new Uint8Array(s.buffer,r,o))[r=0],s[++r],s[++r],s[++r],r++;var l=[];r=e.CFF.readIndex(s,r,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(s,r+l[u],l[u+1]-l[u]));r+=l[l.length-1];var h=[];r=e.CFF.readIndex(s,r,h);var d=[];for(u=0;u<h.length-1;u++)d.push(e.CFF.readDict(s,r+h[u],r+h[u+1]));r+=h[h.length-1];var f=d[0],g=[];r=e.CFF.readIndex(s,r,g);var p=[];for(u=0;u<g.length-1;u++)p.push(a.readASCII(s,r+g[u],g[u+1]-g[u]));if(r+=g[g.length-1],e.CFF.readSubrs(s,r,f),f.CharStrings){r=f.CharStrings,g=[],r=e.CFF.readIndex(s,r,g);var _=[];for(u=0;u<g.length-1;u++)_.push(a.readBytes(s,r+g[u],g[u+1]-g[u]));f.CharStrings=_}if(f.ROS){r=f.FDArray;var m=[];for(r=e.CFF.readIndex(s,r,m),f.FDArray=[],u=0;u<m.length-1;u++){var v=e.CFF.readDict(s,r+m[u],r+m[u+1]);e.CFF._readFDict(s,v,p),f.FDArray.push(v)}r+=m[m.length-1],r=f.FDSelect,f.FDSelect=[];var y=s[r];if(r++,y!=3)throw y;var C=a.readUshort(s,r);for(r+=2,u=0;u<C+1;u++)f.FDSelect.push(a.readUshort(s,r),s[r+2]),r+=3}return f.Encoding&&(f.Encoding=e.CFF.readEncoding(s,f.Encoding,f.CharStrings.length)),f.charset&&(f.charset=e.CFF.readCharset(s,f.charset,f.CharStrings.length)),e.CFF._readFDict(s,f,p),f},e.CFF._readFDict=function(s,r,o){var a;for(var l in r.Private&&(a=r.Private[1],r.Private=e.CFF.readDict(s,a,a+r.Private[0]),r.Private.Subrs&&e.CFF.readSubrs(s,a+r.Private.Subrs,r.Private)),r)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(r[l]=o[r[l]-426+35])},e.CFF.readSubrs=function(s,r,o){var a=e._bin,l=[];r=e.CFF.readIndex(s,r,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var h=0;h<l.length-1;h++)o.Subrs.push(a.readBytes(s,r+l[h],l[h+1]-l[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,r){for(var o=0;o<s.charset.length;o++)if(s.charset[o]==r)return o;return-1},e.CFF.glyphBySE=function(s,r){return r<0||r>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[r])},e.CFF.readEncoding=function(s,r,o){e._bin;var a=[".notdef"],l=s[r];if(r++,l!=0)throw"error: unknown encoding format: "+l;var c=s[r];r++;for(var u=0;u<c;u++)a.push(s[r+u]);return a},e.CFF.readCharset=function(s,r,o){var a=e._bin,l=[".notdef"],c=s[r];if(r++,c==0)for(var u=0;u<o;u++){var h=a.readUshort(s,r);r+=2,l.push(h)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){h=a.readUshort(s,r),r+=2;var d=0;for(c==1?(d=s[r],r++):(d=a.readUshort(s,r),r+=2),u=0;u<=d;u++)l.push(h),h++}}return l},e.CFF.readIndex=function(s,r,o){var a=e._bin,l=a.readUshort(s,r)+1,c=s[r+=2];if(r++,c==1)for(var u=0;u<l;u++)o.push(s[r+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(s,r+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(s,r+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(r+=l*c)-1},e.CFF.getCharString=function(s,r,o){var a=e._bin,l=s[r],c=s[r+1];s[r+2],s[r+3],s[r+4];var u=1,h=null,d=null;l<=20&&(h=l,u=1),l==12&&(h=100*l+c,u=2),21<=l&&l<=27&&(h=l,u=1),l==28&&(d=a.readShort(s,r+1),u=3),29<=l&&l<=31&&(h=l,u=1),32<=l&&l<=246&&(d=l-139,u=1),247<=l&&l<=250&&(d=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(d=256*-(l-251)-c-108,u=2),l==255&&(d=a.readInt(s,r+1)/65535,u=5),o.val=d??"o"+h,o.size=u},e.CFF.readCharString=function(s,r,o){for(var a=r+o,l=e._bin,c=[];r<a;){var u=s[r],h=s[r+1];s[r+2],s[r+3],s[r+4];var d=1,f=null,g=null;u<=20&&(f=u,d=1),u==12&&(f=100*u+h,d=2),u!=19&&u!=20||(f=u,d=2),21<=u&&u<=27&&(f=u,d=1),u==28&&(g=l.readShort(s,r+1),d=3),29<=u&&u<=31&&(f=u,d=1),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+h+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-h-108,d=2),u==255&&(g=l.readInt(s,r+1)/65535,d=5),c.push(g??"o"+f),r+=d}return c},e.CFF.readDict=function(s,r,o){for(var a=e._bin,l={},c=[];r<o;){var u=s[r],h=s[r+1];s[r+2],s[r+3],s[r+4];var d=1,f=null,g=null;if(u==28&&(g=a.readShort(s,r+1),d=3),u==29&&(g=a.readInt(s,r+1),d=5),32<=u&&u<=246&&(g=u-139,d=1),247<=u&&u<=250&&(g=256*(u-247)+h+108,d=2),251<=u&&u<=254&&(g=256*-(u-251)-h-108,d=2),u==255)throw g=a.readInt(s,r+1)/65535,d=5,"unknown number";if(u==30){var p=[];for(d=1;;){var _=s[r+d];d++;var m=_>>4,v=15&_;if(m!=15&&p.push(m),v!=15&&p.push(v),v==15)break}for(var y="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<p.length;S++)y+=C[p[S]];g=parseFloat(y)}u<=21&&(f=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],d=1,u==12&&(f=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],d=2)),f!=null?(l[f]=c.length==1?c[0]:c,c=[]):c.push(g),r+=d}return l},e.cmap={},e.cmap.parse=function(s,r,o){s=new Uint8Array(s.buffer,r,o),r=0;var a=e._bin,l={};a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);r+=2;var u=[];l.tables=[];for(var h=0;h<c;h++){var d=a.readUshort(s,r);r+=2;var f=a.readUshort(s,r);r+=2;var g=a.readUint(s,r);r+=4;var p="p"+d+"e"+f,_=u.indexOf(g);if(_==-1){var m;_=l.tables.length,u.push(g);var v=a.readUshort(s,g);v==0?m=e.cmap.parse0(s,g):v==4?m=e.cmap.parse4(s,g):v==6?m=e.cmap.parse6(s,g):v==12?m=e.cmap.parse12(s,g):console.debug("unknown format: "+v,d,f,g),l.tables.push(m)}if(l[p]!=null)throw"multiple tables for one platform+encoding";l[p]=_}return l},e.cmap.parse0=function(s,r){var o=e._bin,a={};a.format=o.readUshort(s,r),r+=2;var l=o.readUshort(s,r);r+=2,o.readUshort(s,r),r+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(s[r+c]);return a},e.cmap.parse4=function(s,r){var o=e._bin,a=r,l={};l.format=o.readUshort(s,r),r+=2;var c=o.readUshort(s,r);r+=2,o.readUshort(s,r),r+=2;var u=o.readUshort(s,r);r+=2;var h=u/2;l.searchRange=o.readUshort(s,r),r+=2,l.entrySelector=o.readUshort(s,r),r+=2,l.rangeShift=o.readUshort(s,r),r+=2,l.endCount=o.readUshorts(s,r,h),r+=2*h,r+=2,l.startCount=o.readUshorts(s,r,h),r+=2*h,l.idDelta=[];for(var d=0;d<h;d++)l.idDelta.push(o.readShort(s,r)),r+=2;for(l.idRangeOffset=o.readUshorts(s,r,h),r+=2*h,l.glyphIdArray=[];r<a+c;)l.glyphIdArray.push(o.readUshort(s,r)),r+=2;return l},e.cmap.parse6=function(s,r){var o=e._bin,a={};a.format=o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2,a.firstCode=o.readUshort(s,r),r+=2;var l=o.readUshort(s,r);r+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(s,r)),r+=2;return a},e.cmap.parse12=function(s,r){var o=e._bin,a={};a.format=o.readUshort(s,r),r+=2,r+=2,o.readUint(s,r),r+=4,o.readUint(s,r),r+=4;var l=o.readUint(s,r);r+=4,a.groups=[];for(var c=0;c<l;c++){var u=r+12*c,h=o.readUint(s,u+0),d=o.readUint(s,u+4),f=o.readUint(s,u+8);a.groups.push([h,d,f])}return a},e.glyf={},e.glyf.parse=function(s,r,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(s,r){var o=e._bin,a=s._data,l=e._tabOffset(a,"glyf",s._offset)+s.loca[r];if(s.loca[r]==s.loca[r+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var h=o.readUshort(a,l);if(l+=2,a.length-l<h)return null;c.instructions=o.readBytes(a,l,h),l+=h;var d=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<d;u++){var f=a[l];if(l++,c.flags.push(f),(8&f)!=0){var g=a[l];l++;for(var p=0;p<g;p++)c.flags.push(f),u++}}for(c.xs=[],u=0;u<d;u++){var _=(2&c.flags[u])!=0,m=(16&c.flags[u])!=0;_?(c.xs.push(m?a[l]:-a[l]),l++):m?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<d;u++)_=(4&c.flags[u])!=0,m=(32&c.flags[u])!=0,_?(c.ys.push(m?a[l]:-a[l]),l++):m?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var v=0,y=0;for(u=0;u<d;u++)v+=c.xs[u],y+=c.ys[u],c.xs[u]=v,c.ys[u]=y}else{var C;c.parts=[];do{C=o.readUshort(a,l),l+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(S),S.glyphIndex=o.readUshort(a,l),l+=2,1&C){var x=o.readShort(a,l);l+=2;var E=o.readShort(a,l);l+=2}else x=o.readInt8(a,l),l++,E=o.readInt8(a,l),l++;2&C?(S.m.tx=x,S.m.ty=E):(S.p1=x,S.p2=E),8&C?(S.m.a=S.m.d=o.readF2dot14(a,l),l+=2):64&C?(S.m.a=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2):128&C&&(S.m.a=o.readF2dot14(a,l),l+=2,S.m.b=o.readF2dot14(a,l),l+=2,S.m.c=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2)}while(32&C);if(256&C){var L=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<L;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(s,r,o,a){return e._lctf.parse(s,r,o,a,e.GPOS.subt)},e.GPOS.subt=function(s,r,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(s,o),o+=2,r==1||r==2||r==3||r==7||r==8&&u.fmt<=2){var h=l.readUshort(s,o);o+=2,u.coverage=e._lctf.readCoverage(s,h+c)}if(r==1&&u.fmt==1){var d=l.readUshort(s,o);o+=2;var f=e._lctf.numOfOnes(d);d!=0&&(u.pos=e.GPOS.readValueRecord(s,o,d))}else if(r==2&&u.fmt>=1&&u.fmt<=2){d=l.readUshort(s,o),o+=2;var g=l.readUshort(s,o);o+=2,f=e._lctf.numOfOnes(d);var p=e._lctf.numOfOnes(g);if(u.fmt==1){u.pairsets=[];var _=l.readUshort(s,o);o+=2;for(var m=0;m<_;m++){var v=c+l.readUshort(s,o);o+=2;var y=l.readUshort(s,v);v+=2;for(var C=[],S=0;S<y;S++){var x=l.readUshort(s,v);v+=2,d!=0&&(N=e.GPOS.readValueRecord(s,v,d),v+=2*f),g!=0&&(P=e.GPOS.readValueRecord(s,v,g),v+=2*p),C.push({gid2:x,val1:N,val2:P})}u.pairsets.push(C)}}if(u.fmt==2){var E=l.readUshort(s,o);o+=2;var L=l.readUshort(s,o);o+=2;var T=l.readUshort(s,o);o+=2;var D=l.readUshort(s,o);for(o+=2,u.classDef1=e._lctf.readClassDef(s,c+E),u.classDef2=e._lctf.readClassDef(s,c+L),u.matrix=[],m=0;m<T;m++){var I=[];for(S=0;S<D;S++){var N=null,P=null;d!=0&&(N=e.GPOS.readValueRecord(s,o,d),o+=2*f),g!=0&&(P=e.GPOS.readValueRecord(s,o,g),o+=2*p),I.push({val1:N,val2:P})}u.matrix.push(I)}}}else{if(r==9&&u.fmt==1){var O=l.readUshort(s,o);o+=2;var V=l.readUint(s,o);if(o+=4,a.ltype==9)a.ltype=O;else if(a.ltype!=O)throw"invalid extension substitution";return e.GPOS.subt(s,a.ltype,c+V)}console.debug("unsupported GPOS table LookupType",r,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(s,r,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(s,r):0),r+=1&o?2:0,l.push(2&o?a.readShort(s,r):0),r+=2&o?2:0,l.push(4&o?a.readShort(s,r):0),r+=4&o?2:0,l.push(8&o?a.readShort(s,r):0),r+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(s,r,o,a){return e._lctf.parse(s,r,o,a,e.GSUB.subt)},e.GSUB.subt=function(s,r,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(s,o),o+=2,r!=1&&r!=4&&r!=5&&r!=6)return null;if(r==1||r==4||r==5&&u.fmt<=2||r==6&&u.fmt<=2){var h=l.readUshort(s,o);o+=2,u.coverage=e._lctf.readCoverage(s,c+h)}if(r==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(s,o),o+=2;else if(u.fmt==2){var d=l.readUshort(s,o);o+=2,u.newg=l.readUshorts(s,o,d),o+=2*u.newg.length}}else if(r==4){u.vals=[],d=l.readUshort(s,o),o+=2;for(var f=0;f<d;f++){var g=l.readUshort(s,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(s,c+g))}}else if(r==5&&u.fmt==2){if(u.fmt==2){var p=l.readUshort(s,o);o+=2,u.cDef=e._lctf.readClassDef(s,c+p),u.scset=[];var _=l.readUshort(s,o);for(o+=2,f=0;f<_;f++){var m=l.readUshort(s,o);o+=2,u.scset.push(m==0?null:e.GSUB.readSubClassSet(s,c+m))}}}else if(r==6&&u.fmt==3){if(u.fmt==3){for(f=0;f<3;f++){d=l.readUshort(s,o),o+=2;for(var v=[],y=0;y<d;y++)v.push(e._lctf.readCoverage(s,c+l.readUshort(s,o+2*y)));o+=2*d,f==0&&(u.backCvg=v),f==1&&(u.inptCvg=v),f==2&&(u.ahedCvg=v)}d=l.readUshort(s,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(s,o,d)}}else{if(r==7&&u.fmt==1){var C=l.readUshort(s,o);o+=2;var S=l.readUint(s,o);if(o+=4,a.ltype==9)a.ltype=C;else if(a.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(s,a.ltype,c+S)}console.debug("unsupported GSUB table LookupType",r,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(s,r){var o=e._bin.readUshort,a=r,l=[],c=o(s,r);r+=2;for(var u=0;u<c;u++){var h=o(s,r);r+=2,l.push(e.GSUB.readSubClassRule(s,a+h))}return l},e.GSUB.readSubClassRule=function(s,r){var o=e._bin.readUshort,a={},l=o(s,r),c=o(s,r+=2);r+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(s,r)),r+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(s,r,c),a},e.GSUB.readSubstLookupRecords=function(s,r,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(s,r),a(s,r+2)),r+=4;return l},e.GSUB.readChainSubClassSet=function(s,r){var o=e._bin,a=r,l=[],c=o.readUshort(s,r);r+=2;for(var u=0;u<c;u++){var h=o.readUshort(s,r);r+=2,l.push(e.GSUB.readChainSubClassRule(s,a+h))}return l},e.GSUB.readChainSubClassRule=function(s,r){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(s,r);r+=2,c==1&&u--,a[l[c]]=o.readUshorts(s,r,u),r+=2*a[l[c]].length}return u=o.readUshort(s,r),r+=2,a.subst=o.readUshorts(s,r,2*u),r+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(s,r){var o=e._bin,a=r,l=[],c=o.readUshort(s,r);r+=2;for(var u=0;u<c;u++){var h=o.readUshort(s,r);r+=2,l.push(e.GSUB.readLigature(s,a+h))}return l},e.GSUB.readLigature=function(s,r){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(s,r),r+=2;var l=o.readUshort(s,r);r+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(s,r)),r+=2;return a},e.head={},e.head.parse=function(s,r,o){var a=e._bin,l={};return a.readFixed(s,r),r+=4,l.fontRevision=a.readFixed(s,r),r+=4,a.readUint(s,r),r+=4,a.readUint(s,r),r+=4,l.flags=a.readUshort(s,r),r+=2,l.unitsPerEm=a.readUshort(s,r),r+=2,l.created=a.readUint64(s,r),r+=8,l.modified=a.readUint64(s,r),r+=8,l.xMin=a.readShort(s,r),r+=2,l.yMin=a.readShort(s,r),r+=2,l.xMax=a.readShort(s,r),r+=2,l.yMax=a.readShort(s,r),r+=2,l.macStyle=a.readUshort(s,r),r+=2,l.lowestRecPPEM=a.readUshort(s,r),r+=2,l.fontDirectionHint=a.readShort(s,r),r+=2,l.indexToLocFormat=a.readShort(s,r),r+=2,l.glyphDataFormat=a.readShort(s,r),r+=2,l},e.hhea={},e.hhea.parse=function(s,r,o){var a=e._bin,l={};return a.readFixed(s,r),r+=4,l.ascender=a.readShort(s,r),r+=2,l.descender=a.readShort(s,r),r+=2,l.lineGap=a.readShort(s,r),r+=2,l.advanceWidthMax=a.readUshort(s,r),r+=2,l.minLeftSideBearing=a.readShort(s,r),r+=2,l.minRightSideBearing=a.readShort(s,r),r+=2,l.xMaxExtent=a.readShort(s,r),r+=2,l.caretSlopeRise=a.readShort(s,r),r+=2,l.caretSlopeRun=a.readShort(s,r),r+=2,l.caretOffset=a.readShort(s,r),r+=2,r+=8,l.metricDataFormat=a.readShort(s,r),r+=2,l.numberOfHMetrics=a.readUshort(s,r),r+=2,l},e.hmtx={},e.hmtx.parse=function(s,r,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,h=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(u=l.readUshort(s,r),r+=2,h=l.readShort(s,r),r+=2),c.aWidth.push(u),c.lsBearing.push(h);return c},e.kern={},e.kern.parse=function(s,r,o,a){var l=e._bin,c=l.readUshort(s,r);if(r+=2,c==1)return e.kern.parseV1(s,r-2,o,a);var u=l.readUshort(s,r);r+=2;for(var h={glyph1:[],rval:[]},d=0;d<u;d++){r+=2,o=l.readUshort(s,r),r+=2;var f=l.readUshort(s,r);r+=2;var g=f>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;r=e.kern.readFormat0(s,r,h)}return h},e.kern.parseV1=function(s,r,o,a){var l=e._bin;l.readFixed(s,r),r+=4;var c=l.readUint(s,r);r+=4;for(var u={glyph1:[],rval:[]},h=0;h<c;h++){l.readUint(s,r),r+=4;var d=l.readUshort(s,r);r+=2,l.readUshort(s,r),r+=2;var f=d>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;r=e.kern.readFormat0(s,r,u)}return u},e.kern.readFormat0=function(s,r,o){var a=e._bin,l=-1,c=a.readUshort(s,r);r+=2,a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2;for(var u=0;u<c;u++){var h=a.readUshort(s,r);r+=2;var d=a.readUshort(s,r);r+=2;var f=a.readShort(s,r);r+=2,h!=l&&(o.glyph1.push(h),o.rval.push({glyph2:[],vals:[]}));var g=o.rval[o.rval.length-1];g.glyph2.push(d),g.vals.push(f),l=h}return r},e.loca={},e.loca.parse=function(s,r,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,h=a.maxp.numGlyphs+1;if(u==0)for(var d=0;d<h;d++)c.push(l.readUshort(s,r+(d<<1))<<1);if(u==1)for(d=0;d<h;d++)c.push(l.readUint(s,r+(d<<2)));return c},e.maxp={},e.maxp.parse=function(s,r,o){var a=e._bin,l={},c=a.readUint(s,r);return r+=4,l.numGlyphs=a.readUshort(s,r),r+=2,c==65536&&(l.maxPoints=a.readUshort(s,r),r+=2,l.maxContours=a.readUshort(s,r),r+=2,l.maxCompositePoints=a.readUshort(s,r),r+=2,l.maxCompositeContours=a.readUshort(s,r),r+=2,l.maxZones=a.readUshort(s,r),r+=2,l.maxTwilightPoints=a.readUshort(s,r),r+=2,l.maxStorage=a.readUshort(s,r),r+=2,l.maxFunctionDefs=a.readUshort(s,r),r+=2,l.maxInstructionDefs=a.readUshort(s,r),r+=2,l.maxStackElements=a.readUshort(s,r),r+=2,l.maxSizeOfInstructions=a.readUshort(s,r),r+=2,l.maxComponentElements=a.readUshort(s,r),r+=2,l.maxComponentDepth=a.readUshort(s,r),r+=2),l},e.name={},e.name.parse=function(s,r,o){var a=e._bin,l={};a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);r+=2,a.readUshort(s,r);for(var u,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=r+=2,f=0;f<c;f++){var g=a.readUshort(s,r);r+=2;var p=a.readUshort(s,r);r+=2;var _=a.readUshort(s,r);r+=2;var m=a.readUshort(s,r);r+=2;var v=a.readUshort(s,r);r+=2;var y=a.readUshort(s,r);r+=2;var C,S=h[m],x=d+12*c+y;if(g==0)C=a.readUnicode(s,x,v/2);else if(g==3&&p==0)C=a.readUnicode(s,x,v/2);else if(p==0)C=a.readASCII(s,x,v);else if(p==1)C=a.readUnicode(s,x,v/2);else if(p==3)C=a.readUnicode(s,x,v/2);else{if(g!=1)throw"unknown encoding "+p+", platformID: "+g;C=a.readASCII(s,x,v),console.debug("reading unknown MAC encoding "+p+" as ASCII")}var E="p"+g+","+_.toString(16);l[E]==null&&(l[E]={}),l[E][S!==void 0?S:m]=C,l[E]._lang=_}for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==1033)return l[L];for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==0)return l[L];for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==3084)return l[L];for(var L in l)if(l[L].postScriptName!=null)return l[L];for(var L in l){u=L;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(s,r,o){var a=e._bin.readUshort(s,r);r+=2;var l={};if(a==0)e["OS/2"].version0(s,r,l);else if(a==1)e["OS/2"].version1(s,r,l);else if(a==2||a==3||a==4)e["OS/2"].version2(s,r,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(s,r,l)}return l},e["OS/2"].version0=function(s,r,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(s,r),r+=2,o.usWeightClass=a.readUshort(s,r),r+=2,o.usWidthClass=a.readUshort(s,r),r+=2,o.fsType=a.readUshort(s,r),r+=2,o.ySubscriptXSize=a.readShort(s,r),r+=2,o.ySubscriptYSize=a.readShort(s,r),r+=2,o.ySubscriptXOffset=a.readShort(s,r),r+=2,o.ySubscriptYOffset=a.readShort(s,r),r+=2,o.ySuperscriptXSize=a.readShort(s,r),r+=2,o.ySuperscriptYSize=a.readShort(s,r),r+=2,o.ySuperscriptXOffset=a.readShort(s,r),r+=2,o.ySuperscriptYOffset=a.readShort(s,r),r+=2,o.yStrikeoutSize=a.readShort(s,r),r+=2,o.yStrikeoutPosition=a.readShort(s,r),r+=2,o.sFamilyClass=a.readShort(s,r),r+=2,o.panose=a.readBytes(s,r,10),r+=10,o.ulUnicodeRange1=a.readUint(s,r),r+=4,o.ulUnicodeRange2=a.readUint(s,r),r+=4,o.ulUnicodeRange3=a.readUint(s,r),r+=4,o.ulUnicodeRange4=a.readUint(s,r),r+=4,o.achVendID=[a.readInt8(s,r),a.readInt8(s,r+1),a.readInt8(s,r+2),a.readInt8(s,r+3)],r+=4,o.fsSelection=a.readUshort(s,r),r+=2,o.usFirstCharIndex=a.readUshort(s,r),r+=2,o.usLastCharIndex=a.readUshort(s,r),r+=2,o.sTypoAscender=a.readShort(s,r),r+=2,o.sTypoDescender=a.readShort(s,r),r+=2,o.sTypoLineGap=a.readShort(s,r),r+=2,o.usWinAscent=a.readUshort(s,r),r+=2,o.usWinDescent=a.readUshort(s,r),r+=2},e["OS/2"].version1=function(s,r,o){var a=e._bin;return r=e["OS/2"].version0(s,r,o),o.ulCodePageRange1=a.readUint(s,r),r+=4,o.ulCodePageRange2=a.readUint(s,r),r+=4},e["OS/2"].version2=function(s,r,o){var a=e._bin;return r=e["OS/2"].version1(s,r,o),o.sxHeight=a.readShort(s,r),r+=2,o.sCapHeight=a.readShort(s,r),r+=2,o.usDefault=a.readUshort(s,r),r+=2,o.usBreak=a.readUshort(s,r),r+=2,o.usMaxContext=a.readUshort(s,r),r+=2},e["OS/2"].version5=function(s,r,o){var a=e._bin;return r=e["OS/2"].version2(s,r,o),o.usLowerOpticalPointSize=a.readUshort(s,r),r+=2,o.usUpperOpticalPointSize=a.readUshort(s,r),r+=2},e.post={},e.post.parse=function(s,r,o){var a=e._bin,l={};return l.version=a.readFixed(s,r),r+=4,l.italicAngle=a.readFixed(s,r),r+=4,l.underlinePosition=a.readShort(s,r),r+=2,l.underlineThickness=a.readShort(s,r),r+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,r){var o=s.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return r>=l.map.length?0:l.map[r];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(r<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>r?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[r-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:r+l.idDelta[c])}if(l.format==12){if(r>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var h=l.groups[u];if(h[0]<=r&&r<=h[1])return h[2]+(r-h[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(s,r){var o={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[r]){var a=s.SVG.entries[r];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),s.SVG.entries[r]=a),a)}if(s.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},c=s.CFF,u=s.CFF.Private;if(c.ROS){for(var h=0;c.FDSelect[h+2]<=r;)h+=2;u=c.FDArray[c.FDSelect[h+1]].Private}e.U._drawCFF(s.CFF.CharStrings[r],l,c,u,o)}else s.glyf&&e.U._drawGlyf(r,s,o);return o},e.U._drawGlyf=function(s,r,o){var a=r.glyf[s];a==null&&(a=r.glyf[s]=e.glyf._parseGlyf(r,s)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,r,o))},e.U._simpleGlyph=function(s,r){for(var o=0;o<s.noc;o++){for(var a=o==0?0:s.endPts[o-1]+1,l=s.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,h=c==l?a:c+1,d=1&s.flags[c],f=1&s.flags[u],g=1&s.flags[h],p=s.xs[c],_=s.ys[c];if(c==a)if(d){if(!f){e.U.P.moveTo(r,p,_);continue}e.U.P.moveTo(r,s.xs[u],s.ys[u])}else f?e.U.P.moveTo(r,s.xs[u],s.ys[u]):e.U.P.moveTo(r,(s.xs[u]+p)/2,(s.ys[u]+_)/2);d?f&&e.U.P.lineTo(r,p,_):g?e.U.P.qcurveTo(r,p,_,s.xs[h],s.ys[h]):e.U.P.qcurveTo(r,p,_,(p+s.xs[h])/2,(_+s.ys[h])/2)}e.U.P.closePath(r)}},e.U._compoGlyph=function(s,r,o){for(var a=0;a<s.parts.length;a++){var l={cmds:[],crds:[]},c=s.parts[a];e.U._drawGlyf(c.glyphIndex,r,l);for(var u=c.m,h=0;h<l.crds.length;h+=2){var d=l.crds[h],f=l.crds[h+1];o.crds.push(d*u.a+f*u.b+u.tx),o.crds.push(d*u.c+f*u.d+u.ty)}for(h=0;h<l.cmds.length;h++)o.cmds.push(l.cmds[h])}},e.U._getGlyphClass=function(s,r){var o=e._lctf.getInterval(r,s);return o==-1?0:r[o+2]},e.U.getPairAdjustment=function(s,r,o){var a=!1;if(s.GPOS)for(var l=s.GPOS,c=l.lookupList,u=l.featureList,h=[],d=0;d<u.length;d++){var f=u[d];if(f.tag=="kern"){a=!0;for(var g=0;g<f.tab.length;g++)if(!h[f.tab[g]]){h[f.tab[g]]=!0;for(var p=c[f.tab[g]],_=0;_<p.tabs.length;_++)if(p.tabs[_]!=null){var m,v=p.tabs[_];if((!v.coverage||(m=e._lctf.coverageIndex(v.coverage,r))!=-1)&&p.ltype!=1){if(p.ltype==2){var y=null;if(v.fmt==1){var C=v.pairsets[m];for(d=0;d<C.length;d++)C[d].gid2==o&&(y=C[d])}else if(v.fmt==2){var S=e.U._getGlyphClass(r,v.classDef1),x=e.U._getGlyphClass(o,v.classDef2);y=v.matrix[S][x]}if(y){var E=0;return y.val1&&y.val1[2]&&(E+=y.val1[2]),y.val2&&y.val2[0]&&(E+=y.val2[0]),E}}}}}}}if(s.kern&&!a){var L=s.kern.glyph1.indexOf(r);if(L!=-1){var T=s.kern.rval[L].glyph2.indexOf(o);if(T!=-1)return s.kern.rval[L].vals[T]}}return 0},e.U._applySubs=function(s,r,o,a){for(var l=s.length-r-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,h=o.tabs[c];if(!h.coverage||(u=e._lctf.coverageIndex(h.coverage,s[r]))!=-1){if(o.ltype==1)s[r],h.fmt==1?s[r]=s[r]+h.delta:s[r]=h.newg[u];else if(o.ltype==4)for(var d=h.vals[u],f=0;f<d.length;f++){var g=d[f],p=g.chain.length;if(!(p>l)){for(var _=!0,m=0,v=0;v<p;v++){for(;s[r+m+(1+v)]==-1;)m++;g.chain[v]!=s[r+m+(1+v)]&&(_=!1)}if(_){for(s[r]=g.nglyph,v=0;v<p+m;v++)s[r+v+1]=-1;break}}}else if(o.ltype==5&&h.fmt==2)for(var y=e._lctf.getInterval(h.cDef,s[r]),C=h.cDef[y+2],S=h.scset[C],x=0;x<S.length;x++){var E=S[x],L=E.input;if(!(L.length>l)){for(_=!0,v=0;v<L.length;v++){var T=e._lctf.getInterval(h.cDef,s[r+1+v]);if(y==-1&&h.cDef[T+2]!=L[v]){_=!1;break}}if(_){var D=E.substLookupRecords;for(f=0;f<D.length;f+=2)D[f],D[f+1]}}}else if(o.ltype==6&&h.fmt==3){if(!e.U._glsCovered(s,h.backCvg,r-h.backCvg.length)||!e.U._glsCovered(s,h.inptCvg,r)||!e.U._glsCovered(s,h.ahedCvg,r+h.inptCvg.length))continue;var I=h.lookupRec;for(x=0;x<I.length;x+=2){y=I[x];var N=a[I[x+1]];e.U._applySubs(s,r+y,N,a)}}}}},e.U._glsCovered=function(s,r,o){for(var a=0;a<r.length;a++)if(e._lctf.coverageIndex(r[a],s[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(s,r,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<r.length;c++){var u=r[c];if(u!=-1){for(var h=c<r.length-1&&r[c+1]!=-1?r[c+1]:0,d=e.U.glyphToPath(s,u),f=0;f<d.crds.length;f+=2)a.crds.push(d.crds[f]+l),a.crds.push(d.crds[f+1]);for(o&&a.cmds.push(o),f=0;f<d.cmds.length;f++)a.cmds.push(d.cmds[f]);o&&a.cmds.push("X"),l+=s.hmtx.aWidth[u],c<r.length-1&&(l+=e.U.getPairAdjustment(s,u,h))}}return a},e.U.P={},e.U.P.moveTo=function(s,r,o){s.cmds.push("M"),s.crds.push(r,o)},e.U.P.lineTo=function(s,r,o){s.cmds.push("L"),s.crds.push(r,o)},e.U.P.curveTo=function(s,r,o,a,l,c,u){s.cmds.push("C"),s.crds.push(r,o,a,l,c,u)},e.U.P.qcurveTo=function(s,r,o,a,l){s.cmds.push("Q"),s.crds.push(r,o,a,l)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,r,o,a,l){for(var c=r.stack,u=r.nStems,h=r.haveWidth,d=r.width,f=r.open,g=0,p=r.x,_=r.y,m=0,v=0,y=0,C=0,S=0,x=0,E=0,L=0,T=0,D=0,I={val:0,size:0};g<s.length;){e.CFF.getCharString(s,g,I);var N=I.val;if(g+=I.size,N=="o1"||N=="o18")c.length%2!=0&&!h&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(N=="o3"||N=="o23")c.length%2!=0&&!h&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(N=="o4")c.length>1&&!h&&(d=c.shift()+a.nominalWidthX,h=!0),f&&e.U.P.closePath(l),_+=c.pop(),e.U.P.moveTo(l,p,_),f=!0;else if(N=="o5")for(;c.length>0;)p+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,p,_);else if(N=="o6"||N=="o7")for(var P=c.length,O=N=="o6",V=0;V<P;V++){var z=c.shift();O?p+=z:_+=z,O=!O,e.U.P.lineTo(l,p,_)}else if(N=="o8"||N=="o24"){P=c.length;for(var K=0;K+6<=P;)m=p+c.shift(),v=_+c.shift(),y=m+c.shift(),C=v+c.shift(),p=y+c.shift(),_=C+c.shift(),e.U.P.curveTo(l,m,v,y,C,p,_),K+=6;N=="o24"&&(p+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,p,_))}else{if(N=="o11")break;if(N=="o1234"||N=="o1235"||N=="o1236"||N=="o1237")N=="o1234"&&(v=_,y=(m=p+c.shift())+c.shift(),D=C=v+c.shift(),x=C,L=_,p=(E=(S=(T=y+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,m,v,y,C,T,D),e.U.P.curveTo(l,S,x,E,L,p,_)),N=="o1235"&&(m=p+c.shift(),v=_+c.shift(),y=m+c.shift(),C=v+c.shift(),T=y+c.shift(),D=C+c.shift(),S=T+c.shift(),x=D+c.shift(),E=S+c.shift(),L=x+c.shift(),p=E+c.shift(),_=L+c.shift(),c.shift(),e.U.P.curveTo(l,m,v,y,C,T,D),e.U.P.curveTo(l,S,x,E,L,p,_)),N=="o1236"&&(m=p+c.shift(),v=_+c.shift(),y=m+c.shift(),D=C=v+c.shift(),x=C,E=(S=(T=y+c.shift())+c.shift())+c.shift(),L=x+c.shift(),p=E+c.shift(),e.U.P.curveTo(l,m,v,y,C,T,D),e.U.P.curveTo(l,S,x,E,L,p,_)),N=="o1237"&&(m=p+c.shift(),v=_+c.shift(),y=m+c.shift(),C=v+c.shift(),T=y+c.shift(),D=C+c.shift(),S=T+c.shift(),x=D+c.shift(),E=S+c.shift(),L=x+c.shift(),Math.abs(E-p)>Math.abs(L-_)?p=E+c.shift():_=L+c.shift(),e.U.P.curveTo(l,m,v,y,C,T,D),e.U.P.curveTo(l,S,x,E,L,p,_));else if(N=="o14"){if(c.length>0&&!h&&(d=c.shift()+o.nominalWidthX,h=!0),c.length==4){var H=c.shift(),U=c.shift(),j=c.shift(),W=c.shift(),X=e.CFF.glyphBySE(o,j),ee=e.CFF.glyphBySE(o,W);e.U._drawCFF(o.CharStrings[X],r,o,a,l),r.x=H,r.y=U,e.U._drawCFF(o.CharStrings[ee],r,o,a,l)}f&&(e.U.P.closePath(l),f=!1)}else if(N=="o19"||N=="o20")c.length%2!=0&&!h&&(d=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0,g+=u+7>>3;else if(N=="o21")c.length>2&&!h&&(d=c.shift()+a.nominalWidthX,h=!0),_+=c.pop(),p+=c.pop(),f&&e.U.P.closePath(l),e.U.P.moveTo(l,p,_),f=!0;else if(N=="o22")c.length>1&&!h&&(d=c.shift()+a.nominalWidthX,h=!0),p+=c.pop(),f&&e.U.P.closePath(l),e.U.P.moveTo(l,p,_),f=!0;else if(N=="o25"){for(;c.length>6;)p+=c.shift(),_+=c.shift(),e.U.P.lineTo(l,p,_);m=p+c.shift(),v=_+c.shift(),y=m+c.shift(),C=v+c.shift(),p=y+c.shift(),_=C+c.shift(),e.U.P.curveTo(l,m,v,y,C,p,_)}else if(N=="o26")for(c.length%2&&(p+=c.shift());c.length>0;)m=p,v=_+c.shift(),p=y=m+c.shift(),_=(C=v+c.shift())+c.shift(),e.U.P.curveTo(l,m,v,y,C,p,_);else if(N=="o27")for(c.length%2&&(_+=c.shift());c.length>0;)v=_,y=(m=p+c.shift())+c.shift(),C=v+c.shift(),p=y+c.shift(),_=C,e.U.P.curveTo(l,m,v,y,C,p,_);else if(N=="o10"||N=="o29"){var le=N=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var fe=c.pop(),be=le.Subrs[fe+le.Bias];r.x=p,r.y=_,r.nStems=u,r.haveWidth=h,r.width=d,r.open=f,e.U._drawCFF(be,r,o,a,l),p=r.x,_=r.y,u=r.nStems,h=r.haveWidth,d=r.width,f=r.open}}else if(N=="o30"||N=="o31"){var ye=c.length,xe=(K=0,N=="o31");for(K+=ye-(P=-3&ye);K<P;)xe?(v=_,y=(m=p+c.shift())+c.shift(),_=(C=v+c.shift())+c.shift(),P-K==5?(p=y+c.shift(),K++):p=y,xe=!1):(m=p,v=_+c.shift(),y=m+c.shift(),C=v+c.shift(),p=y+c.shift(),P-K==5?(_=C+c.shift(),K++):_=C,xe=!0),e.U.P.curveTo(l,m,v,y,C,p,_),K+=4}else{if((N+"").charAt(0)=="o")throw console.debug("Unknown operation: "+N,s),N;c.push(N)}}}r.x=p,r.y=_,r.nStems=u,r.haveWidth=h,r.width=d,r.open=f};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function zEt(){return function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(N,P){for(var O=new t(31),V=0;V<31;++V)O[V]=P+=1<<N[V-1];var z=new n(O[30]);for(V=1;V<30;++V)for(var K=O[V];K<O[V+1];++K)z[K]=K-O[V]<<5|V;return[O,z]},l=a(s,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=a(r,0)[0],d=new t(32768),f=0;f<32768;++f){var g=(43690&f)>>>1|(21845&f)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,d[f]=((65280&g)>>>8|(255&g)<<8)>>>1}var p=function(N,P,O){for(var V=N.length,z=0,K=new t(P);z<V;++z)++K[N[z]-1];var H,U=new t(P);for(z=0;z<P;++z)U[z]=U[z-1]+K[z-1]<<1;{H=new t(1<<P);var j=15-P;for(z=0;z<V;++z)if(N[z])for(var W=z<<4|N[z],X=P-N[z],ee=U[N[z]-1]++<<X,le=ee|(1<<X)-1;ee<=le;++ee)H[d[ee]>>>j]=W}return H},_=new e(288);for(f=0;f<144;++f)_[f]=8;for(f=144;f<256;++f)_[f]=9;for(f=256;f<280;++f)_[f]=7;for(f=280;f<288;++f)_[f]=8;var m=new e(32);for(f=0;f<32;++f)m[f]=5;var v=p(_,9),y=p(m,5),C=function(N){for(var P=N[0],O=1;O<N.length;++O)N[O]>P&&(P=N[O]);return P},S=function(N,P,O){var V=P/8|0;return(N[V]|N[V+1]<<8)>>(7&P)&O},x=function(N,P){var O=P/8|0;return(N[O]|N[O+1]<<8|N[O+2]<<16)>>(7&P)},E=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(N,P,O){var V=new Error(P||E[N]);if(V.code=N,Error.captureStackTrace&&Error.captureStackTrace(V,L),!O)throw V;return V},T=function(N,P,O){var V=N.length;if(!V||O&&!O.l&&V<5)return P||new e(0);var z=!P||O,K=!O||O.i;O||(O={}),P||(P=new e(3*V));var H,U=function(nt){var ft=P.length;if(nt>ft){var At=new e(Math.max(2*ft,nt));At.set(P),P=At}},j=O.f||0,W=O.p||0,X=O.b||0,ee=O.l,le=O.d,fe=O.m,be=O.n,ye=8*V;do{if(!ee){O.f=j=S(N,W,1);var xe=S(N,W+1,3);if(W+=3,!xe){var He=N[(Re=((H=W)/8|0)+(7&H&&1)+4)-4]|N[Re-3]<<8,qe=Re+He;if(qe>V){K&&L(0);break}z&&U(X+He),P.set(N.subarray(Re,qe),X),O.b=X+=He,O.p=W=8*qe;continue}if(xe==1)ee=v,le=y,fe=9,be=5;else if(xe==2){var ke=S(N,W,31)+257,q=S(N,W+10,15)+4,Ee=ke+S(N,W+5,31)+1;W+=14;for(var De=new e(Ee),Ae=new e(19),Me=0;Me<q;++Me)Ae[o[Me]]=S(N,W+3*Me,7);W+=3*q;var Je=C(Ae),Pe=(1<<Je)-1,Xe=p(Ae,Je);for(Me=0;Me<Ee;){var Re,Fe=Xe[S(N,W,Pe)];if(W+=15&Fe,(Re=Fe>>>4)<16)De[Me++]=Re;else{var wt=0,te=0;for(Re==16?(te=3+S(N,W,3),W+=2,wt=De[Me-1]):Re==17?(te=3+S(N,W,7),W+=3):Re==18&&(te=11+S(N,W,127),W+=7);te--;)De[Me++]=wt}}var Z=De.subarray(0,ke),we=De.subarray(ke);fe=C(Z),be=C(we),ee=p(Z,fe),le=p(we,be)}else L(1);if(W>ye){K&&L(0);break}}z&&U(X+131072);for(var Ye=(1<<fe)-1,je=(1<<be)-1,Ge=W;;Ge=W){var ot=(wt=ee[x(N,W)&Ye])>>>4;if((W+=15&wt)>ye){K&&L(0);break}if(wt||L(2),ot<256)P[X++]=ot;else{if(ot==256){Ge=W,ee=null;break}var tt=ot-254;if(ot>264){var Oe=s[Me=ot-257];tt=S(N,W,(1<<Oe)-1)+c[Me],W+=Oe}var lt=le[x(N,W)&je],xt=lt>>>4;if(lt||L(3),W+=15&lt,we=h[xt],xt>3&&(Oe=r[xt],we+=x(N,W)&(1<<Oe)-1,W+=Oe),W>ye){K&&L(0);break}z&&U(X+131072);for(var ut=X+tt;X<ut;X+=4)P[X]=P[X-we],P[X+1]=P[X+1-we],P[X+2]=P[X+2-we],P[X+3]=P[X+3-we];X=ut}}O.l=ee,O.p=Ge,O.b=X,ee&&(j=1,O.m=fe,O.d=le,O.n=be)}while(!j);return X==P.length?P:function(nt,ft,At){(At==null||At>nt.length)&&(At=nt.length);var kt=new(nt instanceof t?t:nt instanceof n?n:e)(At-ft);return kt.set(nt.subarray(ft,At)),kt}(P,0,X)},D=new e(0),I=typeof TextDecoder<"u"&&new TextDecoder;try{I.decode(D,{stream:!0})}catch{}return i.convert_streams=function(N){var P=new DataView(N),O=0;function V(){var ke=P.getUint16(O);return O+=2,ke}function z(){var ke=P.getUint32(O);return O+=4,ke}function K(ke){He.setUint16(qe,ke),qe+=2}function H(ke){He.setUint32(qe,ke),qe+=4}for(var U={signature:z(),flavor:z(),length:z(),numTables:V(),reserved:V(),totalSfntSize:z(),majorVersion:V(),minorVersion:V(),metaOffset:z(),metaLength:z(),metaOrigLength:z(),privOffset:z(),privLength:z()},j=0;Math.pow(2,j)<=U.numTables;)j++;j--;for(var W=16*Math.pow(2,j),X=16*U.numTables-W,ee=12,le=[],fe=0;fe<U.numTables;fe++)le.push({tag:z(),offset:z(),compLength:z(),origLength:z(),origChecksum:z()}),ee+=16;var be,ye=new Uint8Array(12+16*le.length+le.reduce(function(ke,q){return ke+q.origLength+4},0)),xe=ye.buffer,He=new DataView(xe),qe=0;return H(U.flavor),K(U.numTables),K(W),K(j),K(X),le.forEach(function(ke){H(ke.tag),H(ke.origChecksum),H(ee),H(ke.origLength),ke.outOffset=ee,(ee+=ke.origLength)%4!=0&&(ee+=4-ee%4)}),le.forEach(function(ke){var q,Ee=N.slice(ke.offset,ke.offset+ke.compLength);if(ke.compLength!=ke.origLength){var De=new Uint8Array(ke.origLength);q=new Uint8Array(Ee,2),T(q,De)}else De=new Uint8Array(Ee);ye.set(De,ke.outOffset);var Ae=0;(ee=ke.outOffset+ke.origLength)%4!=0&&(Ae=4-ee%4),ye.set(new Uint8Array(Ae).buffer,ke.outOffset+ke.origLength),be=ee+Ae}),xe.slice(0,be)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function UEt(i,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,r=2,o=4,a=8,l=16,c=32;let u;function h(S){if(!u){const x={R:r,L:s,D:o,C:l,U:c,T:a};u=new Map;for(let E in n){let L=0;n[E].split(",").forEach(T=>{let[D,I]=T.split("+");D=parseInt(D,36),I=I?parseInt(I,36):0,u.set(L+=D,x[E]);for(let N=I;N--;)u.set(++L,x[E])})}}return u.get(S)||c}const d=1,f=2,g=3,p=4,_=[null,"isol","init","fina","medi"];function m(S){const x=new Uint8Array(S.length);let E=c,L=d,T=-1;for(let D=0;D<S.length;D++){const I=S.codePointAt(D);let N=h(I)|0,P=d;N&a||(E&(s|o|l)?N&(r|o|l)?(P=g,(L===d||L===g)&&x[T]++):N&(s|c)&&(L===f||L===p)&&x[T]--:E&(r|c)&&(L===f||L===p)&&x[T]--,L=x[D]=P,E=N,T=D,I>65535&&D++)}return x}function v(S,x){const E=[];for(let T=0;T<x.length;T++){const D=x.codePointAt(T);D>65535&&T++,E.push(i.U.codeToGlyph(S,D))}const L=S.GSUB;if(L){const{lookupList:T,featureList:D}=L;let I;const N=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,P=[];D.forEach(O=>{if(N.test(O.tag))for(let V=0;V<O.tab.length;V++){if(P[O.tab[V]])continue;P[O.tab[V]]=!0;const z=T[O.tab[V]],K=/^(isol|init|fina|medi)$/.test(O.tag);K&&!I&&(I=m(x));for(let H=0;H<E.length;H++)(!I||!K||_[I[H]]===O.tag)&&i.U._applySubs(E,H,z,T)}})}return E}function y(...S){for(let x=0;x<S.length;x++)if(typeof S[x]=="number")return S[x]}function C(S){const x=Object.create(null),E=S["OS/2"],L=S.hhea,T=S.head.unitsPerEm,D=y(E&&E.sTypoAscender,L&&L.ascender,T),I={unitsPerEm:T,ascender:D,descender:y(E&&E.sTypoDescender,L&&L.descender,0),capHeight:y(E&&E.sCapHeight,D),xHeight:y(E&&E.sxHeight,D),lineGap:y(E&&E.sTypoLineGap,L&&L.lineGap),forEachGlyph(N,P,O,V){let z=0;const K=1/I.unitsPerEm*P,H=v(S,N);let U=0,j=-1;return H.forEach((W,X)=>{if(W!==-1){let ee=x[W];if(!ee){const{cmds:le,crds:fe}=i.U.glyphToPath(S,W);let be="",ye=0;for(let q=0,Ee=le.length;q<Ee;q++){const De=t[le[q]];be+=le[q];for(let Ae=1;Ae<=De;Ae++)be+=(Ae>1?",":"")+fe[ye++]}let xe,He,qe,ke;if(fe.length){xe=He=1/0,qe=ke=-1/0;for(let q=0,Ee=fe.length;q<Ee;q+=2){let De=fe[q],Ae=fe[q+1];De<xe&&(xe=De),Ae<He&&(He=Ae),De>qe&&(qe=De),Ae>ke&&(ke=Ae)}}else xe=qe=He=ke=0;ee=x[W]={index:W,advanceWidth:S.hmtx.aWidth[W],xMin:xe,yMin:He,xMax:qe,yMax:ke,path:be,pathCommandCount:le.length}}j!==-1&&(z+=i.U.getPairAdjustment(S,j,W)*K),V.call(null,ee,z,U),ee.advanceWidth&&(z+=ee.advanceWidth*K),O&&(z+=O*P),j=W}U+=N.codePointAt(U)>65535?2:1}),z}};return I}return function(x){const E=new Uint8Array(x,0,4),L=i._bin.readASCII(E,0,4);if(L==="wOFF")x=e(x);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return C(i.parse(x)[0])}}const VEt=Hk({name:"Typr Font Parser",dependencies:[BEt,zEt,UEt],init(i,e,t){const n=i(),s=e();return t(n,s)}}),Ib={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},WEt=new Pt;function Iy(){return(self.performance||Date).now()}const iue=Object.create(null);function HCe(i,e){i=GEt({},i);const t=Iy();if(i.font=jEt(i.font||Ib.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Ib.sdfGlyphSize,i.colorRanges!=null){let h={};for(let d in i.colorRanges)if(i.colorRanges.hasOwnProperty(d)){let f=i.colorRanges[d];typeof f!="number"&&(f=WEt.set(f).getHex()),h[d]=f}i.colorRanges=h}Object.freeze(i);const{textureWidth:n,sdfExponent:s}=Ib,{sdfGlyphSize:r}=i,o=n/r*4;let a=iue[r];if(!a){const h=document.createElement("canvas");h.width=n,h.height=r*256/o,a=iue[r]={glyphCount:0,sdfGlyphSize:r,sdfCanvas:h,sdfTexture:new nr(h,void 0,void 0,void 0,Fs,Fs),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,HEt(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(i.font);u||a.glyphsByFont.set(i.font,u=new Map),qEt(i).then(h=>{const{glyphIds:d,glyphPositions:f,fontSize:g,unitsPerEm:p,timings:_}=h,m=[],v=new Float32Array(d.length*4),y=g/p;let C=0,S=0;const x=Iy();d.forEach((I,N)=>{let P=u.get(I);if(!P){const{path:K,pathBounds:H}=h.glyphData[I],U=Math.max(H[2]-H[0],H[3]-H[1])/r*(Ib.sdfMargin*r+.5),j=a.glyphCount++,W=[H[0]-U,H[1]-U,H[2]+U,H[3]+U];u.set(I,P={path:K,atlasIndex:j,sdfViewBox:W}),m.push(P)}const{sdfViewBox:O}=P,V=f[S++],z=f[S++];v[C++]=V+O[0]*y,v[C++]=z+O[1]*y,v[C++]=V+O[2]*y,v[C++]=z+O[3]*y,d[N]=P.atlasIndex}),_.quads=(_.quads||0)+(Iy()-x);const E=Iy();_.sdf={};const L=c.height,T=Math.ceil(a.glyphCount/o),D=Math.pow(2,Math.ceil(Math.log2(T*r)));D>L&&(console.info(`Increasing SDF texture size ${L}->${D}`),FEt(c,n,D),l.dispose()),Promise.all(m.map(I=>$Ce(I,a,i.gpuAccelerateSDF).then(({timing:N})=>{_.sdf[I.atlasIndex]=N}))).then(()=>{m.length&&!a.contextLost&&(GCe(a),l.needsUpdate=!0),_.sdfTotal=Iy()-E,_.total=Iy()-t,e(Object.freeze({parameters:i,sdfTexture:l,sdfGlyphSize:r,sdfExponent:s,glyphBounds:v,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{a.contextLost||OEt(c)})}function $Ce({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:s,contextLost:r},o){if(r)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Ib,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),h=u%(a/n)*n,d=Math.floor(u/(a/n))*n,f=e%4;return DEt(n,n,i,t,c,l,s,h,d,f,o)}function HEt(i){const e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(s=>{s.forEach(r=>{n.push($Ce(r,i,!0))})}),Promise.all(n).then(()=>{GCe(i),i.sdfTexture.needsUpdate=!0})})}function $Et({font:i,characters:e,sdfGlyphSize:t},n){let s=Array.isArray(e)?e.join(`
`):""+e;HCe({font:i,sdfGlyphSize:t,text:s},n)}function GEt(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}let QA;function jEt(i){return QA||(QA=typeof document>"u"?{}:document.createElement("a")),QA.href=i,QA.href}function GCe(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:s}=e,r=i.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*s*4)&&(o=new Uint8Array(n*s*4),t.image={width:n,height:s,data:o},t.flipY=!1,t.isDataTexture=!0),r.readPixels(0,0,n,s,r.RGBA,r.UNSIGNED_BYTE,o)}}const KEt=Hk({name:"Typesetter",dependencies:[Ib,VEt,MEt,wEt],init(i,e,t,n){const{defaultFontURL:s}=i;return t(e,n(),{defaultFontURL:s})}}),qEt=Hk({name:"Typesetter",dependencies:[KEt],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){const e=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&e.push(i.caretPositions.buffer),i.glyphColors&&e.push(i.glyphColors.buffer),e}}),sue={};function XEt(i){let e=sue[i];if(!e){const t=new Km(1,1,i,i),n=t.clone(),s=t.attributes,r=n.attributes,o=new Kn,a=s.uv.count;for(let l=0;l<a;l++)r.position.array[l*3]*=-1,r.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Jt([...s[l].array,...r[l].array],s[l].itemSize))}),o.setIndex([...t.index.array,...n.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=sue[i]=o}return e}const YEt="aTroikaGlyphBounds",rue="aTroikaGlyphIndex",ZEt="aTroikaGlyphColor";class QEt extends $X{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Nc,this.boundingBox=new Ic}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===La?t/2:0,e===Ks?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=XEt(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,s,r){p7(this,YEt,e,4),p7(this,rue,t,1),p7(this,ZEt,r,3),this._blockBounds=n,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:s,floor:r,min:o,max:a,sin:l,cos:c}=Math,u=s/2,h=s*2,d=Math.abs(t),f=e[0]/d,g=e[2]/d,p=r((f+u)/h)!==r((g+u)/h)?-d:o(l(f)*d,l(g)*d),_=r((f-u)/h)!==r((g-u)/h)?d:a(l(f)*d,l(g)*d),m=r((f+s)/h)!==r((g+s)/h)?d*2:a(d-c(f)*d,d-c(g)*d);n.min.set(p,e[1],t<0?-m:0),n.max.set(_,e[3],t<0?0:m)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(rue).count,n=this._chunkedBounds;if(n)for(let s=n.length;s--;){t=n[s].end;let r=n[s].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}}function p7(i,e,t,n){const s=i.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(i.setAttribute(e,new Bv(t,n)),delete i._maxInstanceCount,i.dispose()):s&&i.deleteAttribute(e)}const JEt=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,eLt=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,tLt=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,nLt=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function iLt(i){const e=F$(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new rt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Fi(0,0,0,0)},uTroikaClipRect:{value:new Fi(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new rt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Pt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Zn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:JEt,vertexTransform:eLt,fragmentDefs:tLt,fragmentColorTransform:nLt,customRewriter({vertexShader:t,fragmentShader:n}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(n)&&(n=n.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(VCe,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const KY=new Kg({color:16777215,side:Ks,transparent:!0}),oue=8421504,aue=new Rn,JA=new se,m7=new se,Yx=[],sLt=new se,_7="+x+y";function lue(i){return Array.isArray(i)?i[0]:i}let jCe=()=>{const i=new Zs(new Km(1,1),KY);return jCe=()=>i,i},KCe=()=>{const i=new Zs(new Km(1,1,32,1),KY);return KCe=()=>i,i};const rLt={type:"syncstart"},oLt={type:"synccomplete"},qCe=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],aLt=qCe.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let XCe=class extends Zs{constructor(){const e=new QEt;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=oue,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_7,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(rLt),HCe({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(s=>s&&s())})),this.dispatchEvent(oLt),e&&e()})))}onBeforeRender(e,t,n,s,r,o){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r),r._hadOwnSide=r.hasOwnProperty("side"),this.geometry.setSide(r._actualSide=r.side),r.side=Gd}onAfterRender(e,t,n,s,r,o){r._hadOwnSide?r.side=r._actualSide:delete r.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=KY.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=iLt(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return lue(this.material).getDepthMaterial()}get customDistanceMaterial(){return lue(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:a,blockBounds:l}=s;n.uTroikaSDFTexture.value=a,n.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),n.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,n.uTroikaSDFExponent.value=s.sdfExponent,n.uTroikaTotalBounds.value.fromArray(l),n.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let c=0,u=0,h=0,d,f,g,p=0,_=0;if(t){let{outlineWidth:v,outlineOffsetX:y,outlineOffsetY:C,outlineBlur:S,outlineOpacity:x}=this;c=this._parsePercent(v)||0,u=Math.max(0,this._parsePercent(S)||0),d=x,p=this._parsePercent(y)||0,_=this._parsePercent(C)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(g=this.strokeColor,n.uTroikaStrokeColor.value.set(g??oue),f=this.strokeOpacity,f==null&&(f=1)),d=this.fillOpacity;n.uTroikaDistanceOffset.value=c,n.uTroikaPositionOffset.value.set(p,_),n.uTroikaBlurRadius.value=u,n.uTroikaStrokeWidth.value=h,n.uTroikaStrokeOpacity.value=f,n.uTroikaFillOpacity.value=d??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let m=this.clipRect;if(m&&Array.isArray(m)&&m.length===4)n.uTroikaClipRect.value.fromArray(m);else{const v=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(l[0]-v,l[1]-v,l[2]+v,l[3]+v)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const r=t?this.outlineColor||0:this.color;if(r==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Pt;(r!==a._input||typeof r=="object")&&a.set(a._input=r)}let o=this.orientation||_7;if(o!==e._orientation){let a=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==_7&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,h,d]=l;JA.set(0,0,0)[u]=c==="-"?1:-1,m7.set(0,0,0)[d]=h==="-"?-1:1,aue.lookAt(sLt,JA.cross(m7),m7),a.setFromMatrix4(aue)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new rt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new rt){return JA.copy(e),this.localPositionToTextCoords(this.worldToLocal(JA),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:s}=this;if(n){const r=n.blockBounds,o=s?KCe():jCe(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let h=r[0]+c.getX(u)*(r[2]-r[0]);const d=r[1]+c.getY(u)*(r[3]-r[1]);let f=0;s&&(f=s-Math.cos(h/s)*s,h=Math.sin(h/s)*s),l.setXYZ(u,h,d,f)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Yx.length=0,o.raycast(e,Yx);for(let u=0;u<Yx.length;u++)Yx[u].object=this,t.push(Yx[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,aLt.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};qCe.forEach(i=>{const e="_private_"+i;Object.defineProperty(XCe.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const lLt=G.forwardRef(({sdfGlyphSize:i=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:s=1,children:r,characters:o,onSync:a,...l},c)=>{const u=Xr(({invalidate:g})=>g),[h]=G.useState(()=>new XCe),[d,f]=G.useMemo(()=>{const g=[];let p="";return G.Children.forEach(r,_=>{typeof _=="string"||typeof _=="number"?p+=_:g.push(_)}),[g,p]},[r]);return A_t(()=>new Promise(g=>$Et({font:n,characters:o},g)),["troika-text",n,o]),G.useLayoutEffect(()=>void h.sync(()=>{u(),a&&a(h)})),G.useEffect(()=>()=>h.dispose(),[h]),G.createElement("primitive",pv({object:h,ref:c,font:n,text:f,anchorX:e,anchorY:t,fontSize:s,sdfGlyphSize:i},l),d)});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Hs={LEFT:1,RIGHT:2,MIDDLE:4},et=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Ny={NONE:0,IN:1,OUT:-1};function R_(i){return i.isPerspectiveCamera}function Sp(i){return i.isOrthographicCamera}const Ry=Math.PI*2,cue=Math.PI/2,YCe=1e-5,Zx=Math.PI/180;function Zu(i,e,t){return Math.max(e,Math.min(t,i))}function Ss(i,e=YCe){return Math.abs(i)<e}function Ki(i,e,t=YCe){return Ss(i-e,t)}function uue(i,e){return Math.round(i/e)*e}function Qx(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Jx(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function eI(i,e,t,n,s=1/0,r){n=Math.max(1e-4,n);const o=2/n,a=o*r,l=1/(1+a+.48*a*a+.235*a*a*a);let c=i-e;const u=e,h=s*n;c=Zu(c,-h,h),e=i-c;const d=(t.value+o*c)*r;t.value=(t.value-o*d)*l;let f=e+(c+d)*l;return u-i>0==f>u&&(f=u,t.value=(f-u)/r),f}function hue(i,e,t,n,s=1/0,r,o){n=Math.max(1e-4,n);const a=2/n,l=a*r,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,d=e.z,f=i.x-u,g=i.y-h,p=i.z-d;const _=u,m=h,v=d,y=s*n,C=y*y,S=f*f+g*g+p*p;if(S>C){const V=Math.sqrt(S);f=f/V*y,g=g/V*y,p=p/V*y}u=i.x-f,h=i.y-g,d=i.z-p;const x=(t.x+a*f)*r,E=(t.y+a*g)*r,L=(t.z+a*p)*r;t.x=(t.x-a*x)*c,t.y=(t.y-a*E)*c,t.z=(t.z-a*L)*c,o.x=u+(f+x)*c,o.y=h+(g+E)*c,o.z=d+(p+L)*c;const T=_-i.x,D=m-i.y,I=v-i.z,N=o.x-_,P=o.y-m,O=o.z-v;return T*N+D*P+I*O>0&&(o.x=_,o.y=m,o.z=v,t.x=(o.x-_)/r,t.y=(o.y-m)/r,t.z=(o.z-v)/r),o}function v7(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function y7(i,e){return Sp(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let cLt=class{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e)}}};var b7;const uLt="2.9.0",tI=1/8,hLt=/Mac/.test((b7=globalThis==null?void 0:globalThis.navigator)===null||b7===void 0?void 0:b7.platform);let Ln,due,nI,w7,wl,Yn,Ri,Py,eE,td,nd,P_,fue,gue,jc,tE,Oy,pue,C7,mue,S7,x7,iI,Ka=class z$ extends cLt{static install(e){Ln=e.THREE,due=Object.freeze(new Ln.Vector3(0,0,0)),nI=Object.freeze(new Ln.Vector3(0,1,0)),w7=Object.freeze(new Ln.Vector3(0,0,1)),wl=new Ln.Vector2,Yn=new Ln.Vector3,Ri=new Ln.Vector3,Py=new Ln.Vector3,eE=new Ln.Vector3,td=new Ln.Vector3,nd=new Ln.Vector3,P_=new Ln.Vector3,fue=new Ln.Vector3,gue=new Ln.Vector3,jc=new Ln.Spherical,tE=new Ln.Spherical,Oy=new Ln.Box3,pue=new Ln.Box3,C7=new Ln.Sphere,mue=new Ln.Quaternion,S7=new Ln.Quaternion,x7=new Ln.Matrix4,iI=new Ln.Raycaster}static get ACTION(){return et}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=et.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Ny.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ln.Vector3,this._focalOffsetVelocity=new Ln.Vector3,this._zoomVelocity={value:0},this._truckInternal=(m,v,y)=>{let C,S;if(R_(this._camera)){const x=Yn.copy(this._camera.position).sub(this._target),E=this._camera.getEffectiveFOV()*Zx,L=x.length()*Math.tan(E*.5);C=this.truckSpeed*m*L/this._elementRect.height,S=this.truckSpeed*v*L/this._elementRect.height}else if(Sp(this._camera)){const x=this._camera;C=m*(x.right-x.left)/x.zoom/this._elementRect.width,S=v*(x.top-x.bottom)/x.zoom/this._elementRect.height}else return;this.verticalDragToForward?(y?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-S,!0)):y?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+S,this._focalOffsetEnd.z,!0):this.truck(C,S,!0)},this._rotateInternal=(m,v)=>{const y=Ry*this.azimuthRotateSpeed*m/this._elementRect.height,C=Ry*this.polarRotateSpeed*v/this._elementRect.height;this.rotate(y,C,!0)},this._dollyInternal=(m,v,y)=>{const C=Math.pow(.95,-m*this.dollySpeed),S=this._sphericalEnd.radius,x=this._sphericalEnd.radius*C,E=Zu(x,this.minDistance,this.maxDistance),L=E-x;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(x,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(L,!0),this._dollyToNoClamp(E,!0)):this._dollyToNoClamp(E,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?x:E)-S,this._dollyControlCoord.set(v,y)),this._lastDollyDirection=Math.sign(-m)},this._zoomInternal=(m,v,y)=>{const C=Math.pow(.95,m*this.dollySpeed),S=this._zoom,x=this._zoom*C;this.zoomTo(x,!0),this.dollyToCursor&&(this._changedZoom+=x-S,this._dollyControlCoord.set(v,y))},typeof Ln>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Ln.Quaternion().setFromUnitVectors(this._camera.up,nI),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=et.NONE,this._target=new Ln.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ln.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ln.Spherical().setFromVector3(Yn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ln.Vector3,new Ln.Vector3,new Ln.Vector3,new Ln.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ln.Box3(new Ln.Vector3(-1/0,-1/0,-1/0),new Ln.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ln.Vector2,this.mouseButtons={left:et.ROTATE,middle:et.DOLLY,right:et.TRUCK,wheel:R_(this._camera)?et.DOLLY:Sp(this._camera)?et.ZOOM:et.NONE},this.touches={one:et.TOUCH_ROTATE,two:R_(this._camera)?et.TOUCH_DOLLY_TRUCK:Sp(this._camera)?et.TOUCH_ZOOM_TRUCK:et.NONE,three:et.TOUCH_TRUCK};const n=new Ln.Vector2,s=new Ln.Vector2,r=new Ln.Vector2,o=m=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),S=m.clientX/C.width,x=m.clientY/C.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||x<this._interactiveArea.top||x>this._interactiveArea.bottom)return}const v=m.pointerType!=="mouse"?null:(m.buttons&Hs.LEFT)===Hs.LEFT?Hs.LEFT:(m.buttons&Hs.MIDDLE)===Hs.MIDDLE?Hs.MIDDLE:(m.buttons&Hs.RIGHT)===Hs.RIGHT?Hs.RIGHT:null;if(v!==null){const C=this._findPointerByMouseButton(v);C&&this._disposePointer(C)}if((m.buttons&Hs.LEFT)===Hs.LEFT&&this._lockedPointer)return;const y={pointerId:m.pointerId,clientX:m.clientX,clientY:m.clientY,deltaX:0,deltaY:0,mouseButton:v};this._activePointers.push(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,d(m)},a=m=>{m.cancelable&&m.preventDefault();const v=m.pointerId,y=this._lockedPointer||this._findPointerById(v);if(y){if(y.clientX=m.clientX,y.clientY=m.clientY,y.deltaX=m.movementX,y.deltaY=m.movementY,this._state=0,m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(m.buttons&Hs.LEFT)===Hs.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(m.buttons&Hs.MIDDLE)===Hs.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(m.buttons&Hs.RIGHT)===Hs.RIGHT&&(this._state=this._state|this.mouseButtons.right);f()}},l=m=>{const v=this._findPointerById(m.pointerId);if(!(v&&v===this._lockedPointer)){if(v&&this._disposePointer(v),m.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=et.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=et.NONE;g()}};let c=-1;const u=m=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===et.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const x=this._domElement.getBoundingClientRect(),E=m.clientX/x.width,L=m.clientY/x.height;if(E<this._interactiveArea.left||E>this._interactiveArea.right||L<this._interactiveArea.top||L>this._interactiveArea.bottom)return}if(m.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===et.ROTATE||this.mouseButtons.wheel===et.TRUCK){const x=performance.now();c-x<1e3&&this._getClientRect(this._elementRect),c=x}const v=hLt?-1:-3,y=m.deltaMode===1?m.deltaY/v:m.deltaY/(v*10),C=this.dollyToCursor?(m.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,S=this.dollyToCursor?(m.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case et.ROTATE:{this._rotateInternal(m.deltaX,m.deltaY),this._isUserControllingRotate=!0;break}case et.TRUCK:{this._truckInternal(m.deltaX,m.deltaY,!1),this._isUserControllingTruck=!0;break}case et.OFFSET:{this._truckInternal(m.deltaX,m.deltaY,!0),this._isUserControllingOffset=!0;break}case et.DOLLY:{this._dollyInternal(-y,C,S),this._isUserControllingDolly=!0;break}case et.ZOOM:{this._zoomInternal(-y,C,S),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},h=m=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===z$.ACTION.NONE){const v=m instanceof PointerEvent?m.pointerId:0,y=this._findPointerById(v);y&&this._disposePointer(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}m.preventDefault()}},d=m=>{if(!this._enabled)return;if(v7(this._activePointers,wl),this._getClientRect(this._elementRect),n.copy(wl),s.copy(wl),this._activePointers.length>=2){const y=wl.x-this._activePointers[1].clientX,C=wl.y-this._activePointers[1].clientY,S=Math.sqrt(y*y+C*C);r.set(0,S);const x=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,E=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(x,E)}if(this._state=0,!m)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in m&&m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(m.buttons&Hs.LEFT)===Hs.LEFT&&(this._state=this._state|this.mouseButtons.left),(m.buttons&Hs.MIDDLE)===Hs.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(m.buttons&Hs.RIGHT)===Hs.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&et.ROTATE)===et.ROTATE||(this._state&et.TOUCH_ROTATE)===et.TOUCH_ROTATE||(this._state&et.TOUCH_DOLLY_ROTATE)===et.TOUCH_DOLLY_ROTATE||(this._state&et.TOUCH_ZOOM_ROTATE)===et.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&et.TRUCK)===et.TRUCK||(this._state&et.TOUCH_TRUCK)===et.TOUCH_TRUCK||(this._state&et.TOUCH_DOLLY_TRUCK)===et.TOUCH_DOLLY_TRUCK||(this._state&et.TOUCH_ZOOM_TRUCK)===et.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&et.DOLLY)===et.DOLLY||(this._state&et.TOUCH_DOLLY)===et.TOUCH_DOLLY||(this._state&et.TOUCH_DOLLY_TRUCK)===et.TOUCH_DOLLY_TRUCK||(this._state&et.TOUCH_DOLLY_OFFSET)===et.TOUCH_DOLLY_OFFSET||(this._state&et.TOUCH_DOLLY_ROTATE)===et.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&et.ZOOM)===et.ZOOM||(this._state&et.TOUCH_ZOOM)===et.TOUCH_ZOOM||(this._state&et.TOUCH_ZOOM_TRUCK)===et.TOUCH_ZOOM_TRUCK||(this._state&et.TOUCH_ZOOM_OFFSET)===et.TOUCH_ZOOM_OFFSET||(this._state&et.TOUCH_ZOOM_ROTATE)===et.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&et.OFFSET)===et.OFFSET||(this._state&et.TOUCH_OFFSET)===et.TOUCH_OFFSET||(this._state&et.TOUCH_DOLLY_OFFSET)===et.TOUCH_DOLLY_OFFSET||(this._state&et.TOUCH_ZOOM_OFFSET)===et.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},f=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,v7(this._activePointers,wl);const v=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,y=v?-v.deltaX:s.x-wl.x,C=v?-v.deltaY:s.y-wl.y;if(s.copy(wl),((this._state&et.ROTATE)===et.ROTATE||(this._state&et.TOUCH_ROTATE)===et.TOUCH_ROTATE||(this._state&et.TOUCH_DOLLY_ROTATE)===et.TOUCH_DOLLY_ROTATE||(this._state&et.TOUCH_ZOOM_ROTATE)===et.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(y,C),this._isUserControllingRotate=!0),(this._state&et.DOLLY)===et.DOLLY||(this._state&et.ZOOM)===et.ZOOM){const S=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,x=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,E=this.dollyDragInverted?-1:1;(this._state&et.DOLLY)===et.DOLLY?(this._dollyInternal(E*C*tI,S,x),this._isUserControllingDolly=!0):(this._zoomInternal(E*C*tI,S,x),this._isUserControllingZoom=!0)}if((this._state&et.TOUCH_DOLLY)===et.TOUCH_DOLLY||(this._state&et.TOUCH_ZOOM)===et.TOUCH_ZOOM||(this._state&et.TOUCH_DOLLY_TRUCK)===et.TOUCH_DOLLY_TRUCK||(this._state&et.TOUCH_ZOOM_TRUCK)===et.TOUCH_ZOOM_TRUCK||(this._state&et.TOUCH_DOLLY_OFFSET)===et.TOUCH_DOLLY_OFFSET||(this._state&et.TOUCH_ZOOM_OFFSET)===et.TOUCH_ZOOM_OFFSET||(this._state&et.TOUCH_DOLLY_ROTATE)===et.TOUCH_DOLLY_ROTATE||(this._state&et.TOUCH_ZOOM_ROTATE)===et.TOUCH_ZOOM_ROTATE){const S=wl.x-this._activePointers[1].clientX,x=wl.y-this._activePointers[1].clientY,E=Math.sqrt(S*S+x*x),L=r.y-E;r.set(0,E);const T=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&et.TOUCH_DOLLY)===et.TOUCH_DOLLY||(this._state&et.TOUCH_DOLLY_ROTATE)===et.TOUCH_DOLLY_ROTATE||(this._state&et.TOUCH_DOLLY_TRUCK)===et.TOUCH_DOLLY_TRUCK||(this._state&et.TOUCH_DOLLY_OFFSET)===et.TOUCH_DOLLY_OFFSET?(this._dollyInternal(L*tI,T,D),this._isUserControllingDolly=!0):(this._zoomInternal(L*tI,T,D),this._isUserControllingZoom=!0)}((this._state&et.TRUCK)===et.TRUCK||(this._state&et.TOUCH_TRUCK)===et.TOUCH_TRUCK||(this._state&et.TOUCH_DOLLY_TRUCK)===et.TOUCH_DOLLY_TRUCK||(this._state&et.TOUCH_ZOOM_TRUCK)===et.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(y,C,!1),this._isUserControllingTruck=!0),((this._state&et.OFFSET)===et.OFFSET||(this._state&et.TOUCH_OFFSET)===et.TOUCH_OFFSET||(this._state&et.TOUCH_DOLLY_OFFSET)===et.TOUCH_DOLLY_OFFSET||(this._state&et.TOUCH_ZOOM_OFFSET)===et.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(y,C,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},g=()=>{v7(this._activePointers,wl),s.copy(wl),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",p),this._domElement.ownerDocument.addEventListener("pointerlockerror",_),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),d())},this.unlockPointer=()=>{var m,v,y;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(m=this._domElement)===null||m===void 0||m.ownerDocument.exitPointerLock(),(v=this._domElement)===null||v===void 0||v.ownerDocument.removeEventListener("pointerlockchange",p),(y=this._domElement)===null||y===void 0||y.ownerDocument.removeEventListener("pointerlockerror",_),this.cancel()};const p=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},_=()=>{this.unlockPointer()};this._addAllEventListeners=m=>{this._domElement=m,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",h)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",h),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",p),this._domElement.ownerDocument.removeEventListener("pointerlockerror",_))},this.cancel=()=>{this._state!==et.NONE&&(this._state=et.NONE,this._activePointers.length=0,g())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Zu(e.width,0,1),this._interactiveArea.height=Zu(e.height,0,1),this._interactiveArea.x=Zu(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Zu(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const s=Zu(e,this.minAzimuthAngle,this.maxAzimuthAngle),r=Zu(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||Ki(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ki(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Ny.NONE,this._changedDolly=0,this._dollyToNoClamp(Zu(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Ki(o,this._spherical.radius);if(!(n>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const r=!t||Ki(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(eE).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||Ki(this._target.x,this._targetEnd.x,this.restThreshold)&&Ki(this._target.y,this._targetEnd.y,this.restThreshold)&&Ki(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Zu(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||Ki(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),td.setFromMatrixColumn(this._camera.matrix,0),nd.setFromMatrixColumn(this._camera.matrix,1),td.multiplyScalar(e),nd.multiplyScalar(-t);const s=Yn.copy(td).add(nd),r=Ri.copy(this._targetEnd).add(s);return this.moveTo(r.x,r.y,r.z,n)}forward(e,t=!1){Yn.setFromMatrixColumn(this._camera.matrix,0),Yn.crossVectors(this._camera.up,Yn),Yn.multiplyScalar(e);const n=Ri.copy(this._targetEnd).add(Yn);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return Yn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Yn.x,this._targetEnd.y+Yn.y,this._targetEnd.z+Yn.z,t)}moveTo(e,t,n,s=!1){this._isUserControllingTruck=!1;const r=Yn.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const o=!s||Ki(this._target.x,this._targetEnd.x,this.restThreshold)&&Ki(this._target.y,this._targetEnd.y,this.restThreshold)&&Ki(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,s=!1){const a=Yn.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,s)}fitToBox(e,t,{cover:n=!1,paddingLeft:s=0,paddingRight:r=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Oy.copy(e):Oy.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=uue(this._sphericalEnd.theta,cue),h=uue(this._sphericalEnd.phi,cue);l.push(this.rotateTo(u,h,t));const d=Yn.setFromSpherical(this._sphericalEnd).normalize(),f=mue.setFromUnitVectors(d,w7),g=Ki(Math.abs(d.y),1);g&&f.multiply(S7.setFromAxisAngle(nI,u)),f.multiply(this._yAxisUpSpaceInverse);const p=pue.makeEmpty();Ri.copy(c.min).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.min).setX(c.max.x).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.min).setY(c.max.y).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.max).setZ(c.min.z).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.min).setZ(c.max.z).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.max).setY(c.min.y).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.max).setX(c.min.x).applyQuaternion(f),p.expandByPoint(Ri),Ri.copy(c.max).applyQuaternion(f),p.expandByPoint(Ri),p.min.x-=s,p.min.y-=o,p.max.x+=r,p.max.y+=a,f.setFromUnitVectors(w7,d),g&&f.premultiply(S7.invert()),f.premultiply(this._yAxisUpSpace);const _=p.getSize(Yn),m=p.getCenter(Ri).applyQuaternion(f);if(R_(this._camera)){const v=this.getDistanceToFitBox(_.x,_.y,_.z,n);l.push(this.moveTo(m.x,m.y,m.z,t)),l.push(this.dollyTo(v,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Sp(this._camera)){const v=this._camera,y=v.right-v.left,C=v.top-v.bottom,S=n?Math.max(y/_.x,C/_.y):Math.min(y/_.x,C/_.y);l.push(this.moveTo(m.x,m.y,m.z,t)),l.push(this.zoomTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const n=[],r="isObject3D"in e?z$.createBoundingSphere(e,C7):C7.copy(e);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),R_(this._camera)){const o=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(o,t))}else if(Sp(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*r.radius,c=Math.min(o/l,a/l);n.push(this.zoomTo(c,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,s,r,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ny.NONE,this._changedDolly=0;const l=Ri.set(s,r,o),c=Yn.set(e,t,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||Ki(this._target.x,this._targetEnd.x,this.restThreshold)&&Ki(this._target.y,this._targetEnd.y,this.restThreshold)&&Ki(this._target.z,this._targetEnd.z,this.restThreshold)&&Ki(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ki(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ki(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,s,r,o,a,l,c,u,h,d,f,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ny.NONE,this._changedDolly=0;const p=Yn.set(s,r,o),_=Ri.set(e,t,n);jc.setFromVector3(_.sub(p).applyQuaternion(this._yAxisUpSpace));const m=Py.set(u,h,d),v=Ri.set(a,l,c);tE.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(m,f));const y=tE.theta-jc.theta,C=tE.phi-jc.phi,S=tE.radius-jc.radius;this._sphericalEnd.set(jc.radius+S*f,jc.phi+C*f,jc.theta+y*f),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const x=!g||Ki(this._target.x,this._targetEnd.x,this.restThreshold)&&Ki(this._target.y,this._targetEnd.y,this.restThreshold)&&Ki(this._target.z,this._targetEnd.z,this.restThreshold)&&Ki(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ki(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ki(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(x)}setPosition(e,t,n,s=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(e,t,n,s=!1){const r=this.getPosition(Yn),o=this.setLookAt(r.x,r.y,r.z,e,t,n,s);return this._sphericalEnd.phi=Zu(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const r=!s||Ki(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ki(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ki(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),td.setFromMatrixColumn(this._camera.matrixWorldInverse,0),nd.setFromMatrixColumn(this._camera.matrixWorldInverse,1),P_.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=Yn.set(e,t,n),r=s.distanceTo(this._camera.position),o=s.sub(this._camera.position);td.multiplyScalar(o.x),nd.multiplyScalar(o.y),P_.multiplyScalar(o.z),Yn.copy(td).add(nd).add(P_),Yn.z=Yn.z+r,this.dollyTo(r,!1),this.setFocalOffset(-Yn.x,Yn.y,-Yn.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,s){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ln.Vector4,typeof e=="number"?this._viewport.set(e,t,n,s):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,s=!1){if(y7(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=e/t,o=this._camera.getEffectiveFOV()*Zx,a=this._camera.aspect;return((s?r>a:r<a)?t:e/a)*.5/Math.tan(o*.5)+n*.5}getDistanceToFitSphere(e){if(y7(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Zx,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?t:n;return e/Math.sin(s*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Ln.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Ln.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new Ln.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Ln.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Ry,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Ry),this._spherical.theta+=Ry*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Ry)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!Ki(this._camera.up.x,this._cameraUp0.x)||!Ki(this._camera.up.y,this._cameraUp0.y)||!Ki(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(Yn);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,nI),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Yn.subVectors(this._target,this._camera.position).normalize(),t=Ri.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(Yn);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,r=fue.subVectors(this._targetEnd,this._target),o=gue.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Ss(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=eI(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Ss(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=eI(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Ss(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=eI(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Ss(r.x)&&Ss(r.y)&&Ss(r.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;hue(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Ss(o.x)&&Ss(o.y)&&Ss(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;hue(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Ss(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=eI(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(R_(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,d=this._camera,f=this._getCameraDirection(eE),g=Yn.copy(f).cross(d.up).normalize();g.lengthSq()===0&&(g.x=1);const p=Ri.crossVectors(g,f),_=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*Zx*.5),v=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,y=Py.copy(this._targetEnd).add(g.multiplyScalar(this._dollyControlCoord.x*_*d.aspect)).add(p.multiplyScalar(this._dollyControlCoord.y*_)),C=Yn.copy(this._targetEnd).lerp(y,v),S=this._lastDollyDirection===Ny.IN&&this._spherical.radius<=this.minDistance,x=this._lastDollyDirection===Ny.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||x)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const L=Ri.copy(f).multiplyScalar(-h);C.add(L)}this._boundary.clampPoint(C,C);const E=Ri.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(E),this._changedDolly-=h,Ss(this._changedDolly)&&(this._changedDolly=0)}else if(Sp(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,d=this._camera,f=Yn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),g=Ri.set(0,0,-1).applyQuaternion(d.quaternion),p=Py.copy(f).add(g.multiplyScalar(-f.dot(d.up))),m=-(this._zoom-h-this._zoom)/this._zoom,v=this._getCameraDirection(eE),y=this._targetEnd.dot(v),C=Yn.copy(this._targetEnd).lerp(p,m),S=C.dot(v),x=v.multiplyScalar(S-y);C.sub(x),this._boundary.clampPoint(C,C);const E=Ri.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(E),this._changedZoom-=h,Ss(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Ss(this._focalOffset.x)||!Ss(this._focalOffset.y)||!Ss(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),td.setFromMatrixColumn(this._camera.matrix,0),nd.setFromMatrixColumn(this._camera.matrix,1),P_.setFromMatrixColumn(this._camera.matrix,2),td.multiplyScalar(this._focalOffset.x),nd.multiplyScalar(-this._focalOffset.y),P_.multiplyScalar(this._focalOffset.z),Yn.copy(td).add(nd).add(P_),this._camera.position.add(Yn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Yn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Ss(t,this.restThreshold)&&Ss(n,this.restThreshold)&&Ss(s,this.restThreshold)&&Ss(r.x,this.restThreshold)&&Ss(r.y,this.restThreshold)&&Ss(r.z,this.restThreshold)&&Ss(o.x,this.restThreshold)&&Ss(o.y,this.restThreshold)&&Ss(o.z,this.restThreshold)&&Ss(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Qx(this.maxDistance),minZoom:this.minZoom,maxZoom:Qx(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Qx(this.maxPolarAngle),minAzimuthAngle:Qx(this.minAzimuthAngle),maxAzimuthAngle:Qx(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Yn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Jx(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Jx(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Jx(n.maxPolarAngle),this.minAzimuthAngle=Jx(n.minAzimuthAngle),this.maxAzimuthAngle=Jx(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),jc.setFromVector3(Yn.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(jc.theta,jc.phi,t),this.dollyTo(jc.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",uLt),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const s=t.lengthSq();if(s===0)return e;const r=Ri.copy(t).add(e),a=this._boundary.clampPoint(r,Py).sub(r),l=a.lengthSq();if(l===0)return e.add(t);if(l===s)return e;if(n===0)return e.add(t).add(a);{const c=1+n*l/t.dot(a);return e.add(Ri.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(R_(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*Zx,s=Math.tan(n*.5)*t,r=s*e.aspect;this._nearPlaneCorners[0].set(-r,-s,0),this._nearPlaneCorners[1].set(r,-s,0),this._nearPlaneCorners[2].set(r,s,0),this._nearPlaneCorners[3].set(-r,s,0)}else if(Sp(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,s=e.right*t,r=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(s,r,0),this._nearPlaneCorners[2].set(s,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||y7(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(eE);x7.lookAt(due,n,this._camera.up);for(let s=0;s<4;s++){const r=Ri.copy(this._nearPlaneCorners[s]);r.applyMatrix4(x7);const o=Py.addVectors(this._target,r);iI.set(o,n),iI.far=this._spherical.radius+1;const a=iI.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Ln.Sphere){const n=t,s=n.center;Oy.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Oy.expandByObject(o)}),Oy.getCenter(s);let r=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let h=0,d=u.count;h<d;h++)Yn.fromBufferAttribute(u,h),r=Math.max(r,s.distanceToSquared(Yn))}),n.radius=Math.sqrt(r),n}};var X5={exports:{}},_ue={ellipse:"…",chars:[" ","-"],max:140,truncate:!0};function ZCe(i,e,t,n){if(i<=e)return i;if(e<2)return i.slice(0,e-t.length)+t;for(var s=e-t.length,r=Math.floor(s/2),o=r,a=i.length-r,l=0;l<r;l++){var c=i.charAt(l),u=i.length-l,h=i.charAt(u);n.indexOf(c)!==-1&&(o=l),n.indexOf(h)!==-1&&(a=u)}return i.slice(0,o)+t+i.slice(a)}function QCe(i,e,t,n,s){if(i.length<=e)return i;for(var r=e-t.length,o=r,a=0;a<=r;a++){var l=i.charAt(a);n.indexOf(l)!==-1&&(o=a)}return!s&&o==r?"":i.slice(0,o)+t}X5.exports=function(i,e,t){if(typeof i!="string"||i.length===0||e===0)return"";t=t||{};for(var n in _ue)(t[n]===null||typeof t[n]>"u")&&(t[n]=_ue[n]);return t.max=e||t.max,t.truncate=="middle"?ZCe(i,t.max,t.ellipse,t.chars):QCe(i,t.max,t.ellipse,t.chars,t.truncate)};X5.exports.ellipsizeMiddle=ZCe;X5.exports.ellipsize=QCe;var dLt=X5.exports;const fLt=Mi(dLt),JCe=["ctrl","alt","meta","shift"],eSe="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");eSe[1]="_";const qY={};for(const[i,e]of eSe.entries())qY[e]=i;const gLt={space:" ",plus:"+",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",esc:"escape"},XY=4,pLt=9,YY=pLt+XY,mLt=2**XY,tSe=2**YY,_Lt=2**(2*YY),vLt=2**(3*YY);function yLt(i){let e;return i==="+"?["+"]:(i.slice(-1)=="+"?(e=i.slice(0,-2).split("+"),e.push("+")):e=i.split("+"),e.map(t=>gLt[t]||t))}function bLt(i){const e=new Set(i);let t=qY[i[i.length-1].toLowerCase()]||0;for(const n of JCe)t=2*t+(e.has(n)?1:0);return t}function vue(i){return i>>XY}function E7(i){return i%mLt}function wLt(i,e){if(i===void 0||vue(i)>0)return!1;const t=E7(i),n=E7(e);return t===n&&vue(e)===0?!1:(t&E7(e))===t}function CLt(i){let e=qY[i.key.toLowerCase()]||0;for(const t of JCe)e=2*e+(i[`${t}Key`]?1:0);return e}function Y5(i){return i.map(yLt)}function Z5(i){if(i.length>4)throw"Can't encode sequence of more than 4 keys!";let e=0;for(const t of i)e=e*tSe+bLt(t);return e}function SLt(i){return i<tSe?1:i<_Lt?2:i<vLt?3:4}function xLt(i){const e=[];let t=0,n=0;for(let s=i.length-1;s>=0;s--)t=2**n*i[s]+t,n=n+13,e.push(t);return e}function ELt(i={}){return{history:[],historySize:0,bindings:new Map,disabledSequenceCodes:new Set,...i}}function LLt(i,e,t){const n=Z5(Y5(e));return i.bindings.has(n)||i.bindings.set(n,new Set),i.bindings.get(n).add(t),nSe(i)}function TLt(i,e,t){const n=Z5(Y5(e)),s=i.bindings.get(n);return s&&(s.delete(t),s.size==0&&i.bindings.delete(n)),nSe(i)}function kLt(i,e){const t=Z5(Y5(e));return i.disabledSequenceCodes.delete(t),i}function MLt(i,e){const t=Z5(Y5(e));return i.disabledSequenceCodes.add(t),i}function DLt(i,e){const t=CLt(e),n=i.history.at(-1);return wLt(n,t)&&i.history.pop(),i.history.push(t),i.history.length>i.historySize&&i.history.shift(),i}function ALt(i){const e=[];for(const t of xLt(i.history))i.disabledSequenceCodes.has(t)||e.push(...i.bindings.get(t)||[]);return e}function ILt(i,e){i=DLt(i,e);const t=ALt(i);for(const n of t)n(e);return[i,t]}function nSe(i){i.historySize=0;for(const e of i.bindings.keys())i.historySize=Math.max(i.historySize,SLt(e));return i}class NLt{add(...e){const t=e.slice(0,-1),n=e.at(-1);return this.state=LLt(this.state,t,n),this}remove(...e){const t=e.slice(0,-1),n=e.at(-1);return this.state=TLt(this.state,t,n),this}enable(...e){return this.state=kLt(this.state,e),this}disable(...e){return this.state=MLt(this.state,e),this}handle(e){const[t,n]=ILt(this.state,e);return this.state=t,n.length>0}constructor(e){this.state=e,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.handle=this.handle.bind(this)}}function Q5(){return new NLt(ELt())}let yue=!1;const ZY=Q5(),QY=Q5(),JY=Q5(),iSe=new Map;let O_=[];const ym=i=>Array.isArray(i)?i.map(e=>e.toLowerCase()):[i.toLowerCase()],RLt=i=>e=>{const t=e.target,n=t.tagName==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);if(!(t.isContentEditable||(n||t.tagName==="TEXTAREA"||t.tagName==="SELECT")&&!t.readOnly))return i(e)},PLt=i=>{(!i.action||i.action==="keypress")&&ZY.add(...ym(i.keys),i.callback),i.action==="keyup"&&QY.add(...ym(i.keys),i.callback),i.action==="keydown"&&JY.add(...ym(i.keys),i.callback)},OLt=i=>{(!i.action||i.action==="keypress")&&ZY.remove(...ym(i.keys),i.callback),i.action==="keyup"&&QY.remove(...ym(i.keys),i.callback),i.action==="keydown"&&JY.remove(...ym(i.keys),i.callback)},FLt=i=>{var e,t,n;const s=Q5();s.add(...ym(i.keys),i.callback),(t=(e=i.ref)==null?void 0:e.current)==null||t.addEventListener(i.action??"keypress",s.handle),iSe.set((n=i.ref)==null?void 0:n.current,s)},BLt=i=>{var e,t,n,s;if((e=i.ref)!=null&&e.current&&!i.disabled){const r=iSe.get((t=i.ref)==null?void 0:t.current);r.remove(...ym(i.keys),i.callback),(s=(n=i.ref)==null?void 0:n.current)==null||s.removeEventListener(i.action??"keypress",r.handle)}},sSe=(i=[])=>{const[e,t]=G.useState([]);return G.useLayoutEffect(()=>{!yue&&window!==void 0&&(window.addEventListener("keypress",ZY.handle),window.addEventListener("keyup",QY.handle),window.addEventListener("keydown",JY.handle),yue=!0)},[]),G.useLayoutEffect(()=>(i.map(n=>{var s;n.disabled||(n.callback=RLt(n.callback),(s=n.ref)!=null&&s.current?(FLt(n),O_=[...O_,n]):n.ref||(PLt(n),O_=[...O_,n]))}),()=>{i.map(n=>{BLt(n),OLt(n),O_=O_.filter(s=>n!==s)})}),[i]),G.useEffect(()=>{t(O_)},[]),e};function zLt(){try{return navigator.platform.toUpperCase().indexOf("MAC")>=0}catch{return!1}}function ULt(){return zLt()?"⌘":"CTRL"}ULt();/*!
 * hold-event
 * https://github.com/yomotsu/hold-event
 * (c) 2020 @yomotsu
 * Released under the MIT License.
 */var ML;(function(i){i.HOLD_START="holdStart",i.HOLD_END="holdEnd",i.HOLDING="holding"})(ML||(ML={}));class VLt{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}removeEventListener(e,t){const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e)}}}class WLt extends VLt{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=t=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:ML.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const n=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(n,this.holdIntervalDelay):window.requestAnimationFrame(n);const s=performance.now();this._deltaTime=s-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:ML.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(n,this.holdIntervalDelay):window.requestAnimationFrame(n)},this._holdEnd=t=>{if(!this._enabled||!this._holding)return;const n=performance.now();this._deltaTime=n-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:ML.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}}class J5 extends WLt{constructor(e,t){super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const n=r=>{HLt(r)||r.keyCode===e&&this._holdStart(r)},s=r=>{r.keyCode===e&&this._holdEnd(r)};document.addEventListener("keydown",n),document.addEventListener("keyup",s),window.addEventListener("blur",this._holdEnd)}}function HLt(i){const e=i.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}(function(){try{if(typeof document<"u"){var i=document.createElement("style");i.appendChild(document.createTextNode(`._canvas_670zp_1 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
._container_155l7_1 {
  transform-origin: bottom right;
  overflow: hidden;
  position: absolute;
  border: solid 1px var(--radial-menu-border);
}

  ._container_155l7_1._disabled_155l7_7 {
    opacity: 0.6;
  }

  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {
      cursor: not-allowed;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {
      cursor: pointer;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {
        color: var(--radial-menu-active-color);
        background: var(--radial-menu-active-background);
      }

  ._container_155l7_1 ._contentContainer_155l7_10 {
    width: 200%;
    height: 200%;
    transform-origin: 50% 50%;
    border-radius: 50%;
    outline: none;
    transition: background 150ms ease-in-out;
    color: var(--radial-menu-color);
  }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {
      position: absolute;
      width: 100%;
      text-align: center;
    }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {
        display: inline-block;
      }

  ._container_155l7_1 svg {
    margin: 0 auto;
    fill: var(--radial-menu-active-color);
    height: 25px;
    width: 25px;
    display: block;
  }
._container_x9hyx_1 {
  border-radius: 50%;
  z-index: 9;
  position: relative;
  height: 175px;
  width: 175px;
  border: solid 5px var(--radial-menu-border);
  overflow: hidden;
  background: var(--radial-menu-background);
}

  ._container_x9hyx_1:before {
    content: ' ';
    background: var(--radial-menu-border);
    border-radius: 50%;
    height: 25px;
    width: 25px;
    position: absolute;
    z-index: 9;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }`)),document.head.appendChild(i)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var bue,wue;function rSe(i,e=[]){const t=e.length;for(const n of i){const s=e.indexOf(n);if(s>-1){const r=[...e.slice(s),n].map(o=>o.data.id);throw new Error(`Invalid Graph: Circular node path detected: ${r.join(" -> ")}.`)}t>n.depth&&(n.depth=t,rSe(n.out,[...e,n]))}}function oSe(i,e){let t=!1;const n=i.reduce((o,a)=>({...o,[a.id]:{data:a,out:[],depth:-1,ins:[]}}),{});try{for(const o of e){const a=o.source,l=o.target;if(!n.hasOwnProperty(a))throw new Error(`Missing source Node ${a}`);if(!n.hasOwnProperty(l))throw new Error(`Missing target Node ${l}`);const c=n[a],u=n[l];u.ins.push(c),c.out.push(u)}rSe(Object.values(n))}catch{t=!0}const s=Object.keys(n).map(o=>n[o].depth),r=Math.max(...s);return{invalid:t,depths:n,maxDepth:r||1}}const Cue=["radialin","radialout"];function $Lt({nodes:i,edges:e,mode:t="lr",nodeLevelRatio:n=2}){const{depths:s,maxDepth:r,invalid:o}=oSe(i,e);if(o)return null;const a=Cue.includes(t)?1:5,l=i.length/r*n*a;if(t){const c=(f,g)=>p=>f?(s[p.id].depth-r/2)*l*(g?-1:1):void 0,u=c(["lr","rl"].includes(t),t==="rl"),h=c(["td","bu"].includes(t),t==="td"),d=c(["zin","zout"].includes(t),t==="zout");i.forEach(f=>{f.fx=u(f),f.fy=h(f),f.fz=d(f)})}return Cue.includes(t)?Lvt(c=>{const u=s[c.id];return(t==="radialin"?r-u.depth:u.depth)*l}).strength(1):null}function GLt(i){return new Promise((e,t)=>{let n;function s(){n?e(n):(n=i.step(),s())}s()})}function $k(i){const e=[],t=[];return i.forEachNode((n,s)=>{e.push({...s,id:n,radius:s.size||1})}),i.forEachEdge((n,s)=>{t.push({...s,id:n})}),{nodes:e,edges:t}}function jLt(){const i=z=>()=>z;let t=z=>z.index,n=[],s=[],r,o=[100,100],a=i(1),l=i(-1),c=i(100),u=i(.1),h={},d=.1,f=.001,g=[],p=[0,0],_,m=z=>z.cluster,v="treemap",y=!0,C=.1;function S(z){if(!y)return S;v==="force"&&(_.tick(),N());for(let K=0,H=n.length,U,j=z*C;K<H;++K)U=n[K],U.vx+=(h[m(U)].x-U.x)*j,U.vy+=(h[m(U)].y-U.y)*j}function x(){n&&(v==="treemap"?P():V())}S.initialize=function(z){n=z,x()};function E(z){let K=m(z.source),H=m(z.target);return K<=H?K+"~"+H:H+"~"+K}function L(z){let K=new Map,H={};return z.forEach(function(U){K.has(m(U))||K.set(m(U),{count:0,sumforceNodeSize:0})}),z.forEach(function(U){H=K.get(m(U)),H.count=H.count+1,H.sumforceNodeSize=H.sumforceNodeSize+Math.PI*(a(U)*a(U))*1.3,K.set(m(U),H)}),K}function T(z){let K=new Map,H=[];return z.forEach(function(U){let j=E(U),W;K.has(j)?W=K.get(j):W=0,W+=1,K.set(j,W)}),K.forEach(function(U,j){let W,X;W=j.split("~")[0],X=j.split("~")[1],W!==void 0&&X!==void 0&&H.push({source:W,target:X,count:U})}),H}function D(){let z=[],K=[],H=new Map,U,j,W,X,ee;X=L(n),ee=T(s);for(U of X.keys())W=X.get(U),z.push({id:U,size:W.count,r:Math.sqrt(W.sumforceNodeSize/Math.PI)}),H.set(U,j);return ee.forEach(function(le){let fe=H.get(le.source),be=H.get(le.target);fe!==void 0&&be!==void 0&&K.push({source:fe,target:be,count:le.count})}),{nodes:z,links:K}}function I(){let z=[],K,H,U;U=L(S.nodes());for(K of U.keys())H=U.get(K),z.push({id:K,size:H.count});return{id:"clustersTree",children:z}}function N(){return h.none={x:0,y:0},g.forEach(function(z){v==="treemap"?h[z.data.id]={x:z.x0+(z.x1-z.x0)/2-p[0],y:z.y0+(z.y1-z.y0)/2-p[1]}:h[z.id]={x:z.x-p[0],y:z.y-p[1]}}),h}function P(){let z=u1t().size(S.size());r=N5(I()).sum(K=>K.radius).sort(function(K,H){return H.height-K.height||H.value-K.value}),g=z(r).leaves(),N()}function O(){let z=0;n.length!==0&&s.forEach(function(K){let H,U;if(n){if(H=K.source,U=K.target,typeof K.source!="object"&&(H=n.find(j=>j.id===K.source)),typeof K.target!="object"&&(U=n.find(j=>j.id===K.target)),H===void 0||U===void 0)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");K.source=H,K.target=U,K.index=z++}})}function V(){let z;!n||!n.length||(O(),z=D(),_=Wbe(z.nodes).force("x",f$(o[0]/2).strength(.1)).force("y",g$(o[1]/2).strength(.1)).force("collide",Pbe(K=>K.r).iterations(4)).force("charge",Hbe().strength(l)).force("links",Obe(z.nodes.length?z.links:[]).distance(c).strength(u)),g=_.nodes(),N())}return S.template=function(z){return arguments.length?(v=z,x(),S):v},S.groupBy=function(z){return arguments.length?typeof z=="string"?(m=function(K){return K[z]},S):(m=z,S):m},S.enableGrouping=function(z){return arguments.length?(y=z,S):y},S.strength=function(z){return arguments.length?(C=z,S):C},S.getLinkStrength=function(z){return y?m(z.source)===m(z.target)?typeof d=="function"?d(z):d:typeof f=="function"?f(z):f:typeof d=="function"?d(z):d},S.id=function(z){return arguments.length?(t=z,S):t},S.size=function(z){return arguments.length?(o=z,S):o},S.linkStrengthInterCluster=function(z){return arguments.length?(f=z,S):f},S.linkStrengthIntraCluster=function(z){return arguments.length?(d=z,S):d},S.nodes=function(z){return arguments.length?(n=z,S):n},S.links=function(z){return arguments.length?(z===null?s=[]:s=z,x(),S):s},S.template=function(z){return arguments.length?(v=z,x(),S):v},S.forceNodeSize=function(z){return arguments.length?(a=typeof z=="function"?z:i(+z),x(),S):a},S.nodeSize=S.forceNodeSize,S.forceCharge=function(z){return arguments.length?(l=typeof z=="function"?z:i(+z),x(),S):l},S.forceLinkDistance=function(z){return arguments.length?(c=typeof z=="function"?z:i(+z),x(),S):c},S.forceLinkStrength=function(z){return arguments.length?(u=typeof z=="function"?z:i(+z),x(),S):u},S.offset=function(z){return arguments.length?(p=typeof z=="function"?z:i(+z),S):p},S.getFocis=N,S}function vp({graph:i,nodeLevelRatio:e=2,mode:t=null,dimensions:n=2,nodeStrength:s=-250,linkDistance:r=50,clusterStrength:o=.5,linkStrengthInterCluster:a=.01,linkStrengthIntraCluster:l=.5,forceLinkDistance:c=100,forceLinkStrength:u=.1,clusterType:h="force",forceCharge:d=-700,getNodePosition:f,drags:g,clusterAttribute:p,forceLayout:_}){const{nodes:m,edges:v}=$k(i),C=n===2&&v.length>25?s*2:s;let S,x;_==="forceDirected2d"?(S=f$(),x=g$()):(S=f$(600).strength(.05),x=g$(600).strength(.05));const E=Wbe().force("center",p0t(0,0)).force("link",Obe()).force("charge",Hbe().strength(C)).force("x",S).force("y",x).force("z",Tvt()).force("collide",Pbe(I=>I.radius+10)).force("dagRadial",$Lt({nodes:m,edges:v,mode:t,nodeLevelRatio:e})).stop();let L;if(p){let I=d;if(m!=null&&m.length){const N=Math.ceil(m.length/200);I=d*N}L=jLt().strength(o).template(h).groupBy(N=>N.data[p]).links(v).size([100,100]).linkStrengthInterCluster(a).linkStrengthIntraCluster(l).forceLinkDistance(c).forceLinkStrength(u).forceCharge(I).forceNodeSize(N=>N.radius)}let T=E.numDimensions(n).nodes(m);if(L&&(T=T.force("group",L)),r){let I=T.force("link");I&&(I.id(N=>N.id).links(v).distance(r),L&&(I=I.strength((L==null?void 0:L.getLinkStrength)??.1)))}const D=new Map(m.map(I=>[I.id,I]));return{step(){for(;E.alpha()>.01;)E.tick();return!0},getNodePosition(I){var N,P;if(f){const O=f(I,{graph:i,drags:g,nodes:m,edges:v});if(O)return O}return(N=g==null?void 0:g[I])!=null&&N.position?(P=g==null?void 0:g[I])==null?void 0:P.position:D.get(I)}}}function KLt({graph:i,radius:e,drags:t,getNodePosition:n}){const s=m1t(i,{scale:e}),{nodes:r,edges:o}=$k(i);return{step(){return!0},getNodePosition(a){var l,c;if(n){const u=n(a,{graph:i,drags:t,nodes:r,edges:o});if(u)return u}return(l=t==null?void 0:t[a])!=null&&l.position?(c=t==null?void 0:t[a])==null?void 0:c.position:s==null?void 0:s[a]}}}const qLt={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function Sue({graph:i,drags:e,mode:t="td",nodeSeparation:n=1,nodeSize:s=[50,50],getNodePosition:r}){const{nodes:o,edges:a}=$k(i),{depths:l}=oSe(o,a),c=Object.keys(l).map(p=>l[p]),u=Qvt().id(p=>p.data.id).parentId(p=>{var _,m,v;return(v=(m=(_=p.ins)==null?void 0:_[0])==null?void 0:m.data)==null?void 0:v.id})(c),d=r1t().separation(()=>n).nodeSize(s)(N5(u)).descendants(),f=qLt[t],g=new Map(o.map(p=>{const{x:_,y:m}=d.find(v=>v.data.id===p.id);return[p.id,{...p,[f.x]:_*f.factor,[f.y]:m*f.factor,z:0}]}));return{step(){return!0},getNodePosition(p){var _,m;if(r){const v=r(p,{graph:i,drags:e,nodes:o,edges:a});if(v)return v}return(_=e==null?void 0:e[p])!=null&&_.position?(m=e==null?void 0:e[p])==null?void 0:m.position:g.get(p)}}}function XLt({graph:i,margin:e,drags:t,getNodePosition:n,ratio:s,gridSize:r,maxIterations:o}){const{nodes:a,edges:l}=$k(i),c=E1t(i,{maxIterations:o,inputReducer:(u,h)=>({...h,x:h.x||0,y:h.y||0}),settings:{ratio:s,margin:e,gridSize:r}});return{step(){return!0},getNodePosition(u){var h,d;if(n){const f=n(u,{graph:i,drags:t,nodes:a,edges:l});if(f)return f}return(h=t==null?void 0:t[u])!=null&&h.position?(d=t==null?void 0:t[u])==null?void 0:d.position:c==null?void 0:c[u]}}}function YLt({graph:i,drags:e,iterations:t,...n}){G1t.assign(i);const s=U1t(i,{iterations:t,settings:n});return{step(){return!0},getNodePosition(r){var o;return((o=e==null?void 0:e[r])==null?void 0:o.position)||(s==null?void 0:s[r])}}}function ZLt({graph:i,drags:e,getNodePosition:t}){const{nodes:n,edges:s}=$k(i);return{step(){return!0},getNodePosition(r){return t(r,{graph:i,drags:e,nodes:n,edges:s})}}}const QLt=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function JLt({type:i,...e}){if(QLt.includes(i)){const{nodeStrength:t,linkDistance:n,nodeLevelRatio:s}=e;if(i==="forceDirected2d")return vp({...e,dimensions:2,nodeLevelRatio:s||2,nodeStrength:t||-250,linkDistance:n,forceLayout:i});if(i==="treeTd2d")return vp({...e,mode:"td",dimensions:2,nodeLevelRatio:s||5,nodeStrength:t||-250,linkDistance:n||50,forceLayout:i});if(i==="treeLr2d")return vp({...e,mode:"lr",dimensions:2,nodeLevelRatio:s||5,nodeStrength:t||-250,linkDistance:n||50,forceLayout:i});if(i==="radialOut2d")return vp({...e,mode:"radialout",dimensions:2,nodeLevelRatio:s||5,nodeStrength:t||-500,linkDistance:n||100,forceLayout:i});if(i==="treeTd3d")return vp({...e,mode:"td",dimensions:3,nodeLevelRatio:s||2,nodeStrength:t||-500,linkDistance:n||50});if(i==="treeLr3d")return vp({...e,mode:"lr",dimensions:3,nodeLevelRatio:s||2,nodeStrength:t||-500,linkDistance:n||50,forceLayout:i});if(i==="radialOut3d")return vp({...e,mode:"radialout",dimensions:3,nodeLevelRatio:s||2,nodeStrength:t||-500,linkDistance:n||100,forceLayout:i});if(i==="forceDirected3d")return vp({...e,dimensions:3,nodeLevelRatio:s||2,nodeStrength:t||-250,linkDistance:n,forceLayout:i})}else if(i==="circular2d"){const{radius:t}=e;return KLt({...e,radius:t||300})}else{if(i==="hierarchicalTd")return Sue({...e,mode:"td"});if(i==="hierarchicalLr")return Sue({...e,mode:"lr"});if(i==="nooverlap"){const{graph:t,maxIterations:n,ratio:s,margin:r,gridSize:o,...a}=e;return XLt({type:"nooverlap",graph:t,margin:r||10,maxIterations:n||50,ratio:s||10,gridSize:o||20,...a})}else if(i==="forceatlas2"){const{graph:t,iterations:n,gravity:s,scalingRatio:r,...o}=e;return YLt({type:"forceatlas2",graph:t,...o,scalingRatio:r||100,gravity:s||10,iterations:n||50})}else if(i==="custom")return ZLt({type:"custom",...e})}throw new Error(`Layout ${i} not found.`)}function aSe({nodeCount:i,nodePosition:e,labelType:t,camera:n}){return(s,r)=>{var o;if(n&&e&&((o=n==null?void 0:n.position)==null?void 0:o.z)/(n==null?void 0:n.zoom)-(e==null?void 0:e.z)>6e3)return!1;if(t==="all")return!0;if(t==="nodes"&&s==="node")return!0;if(t==="edges"&&s==="edge")return!0;if(t==="auto"&&s==="node"){if(r>7)return!0;if(n&&e&&n.position.z/n.zoom-e.z<3e3)return!0}return!1}}function lSe(i,e){switch(e){case"above":return i;case"below":return-i;case"inline":case"natural":default:return 0}}function e2t({graph:i}){const e=Q1t(i);return{ranks:e,getSizeForNode:t=>e[t]*80}}function t2t({graph:i}){const e=nyt(i);return{ranks:e,getSizeForNode:t=>e[t]*20}}function n2t({graph:i,attribute:e,defaultSize:t}){const n=new Map;return e?i.forEachNode((s,r)=>{var o;const a=(o=r.data)==null?void 0:o[e];isNaN(a)&&console.warn(`Attribute ${a} is not a number for node ${r.id}`),n.set(s,a||0)}):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:s=>!e||!n?t:n.get(s)}}const xue={pagerank:e2t,centrality:t2t,attribute:n2t,none:({defaultSize:i})=>({getSizeForNode:e=>i})};function i2t({type:i,...e}){var t;const n=(t=xue[i])==null?void 0:t.call(xue,e);if(!n&&i!=="default")throw new Error(`Unknown sizing strategy: ${i}`);const{graph:s,minSize:r,maxSize:o}=e,a=new Map;let l,c;if(s.forEachNode((u,h)=>{let d;i==="default"?d=h.size||e.defaultSize:d=n.getSizeForNode(u),(l===void 0||d<l)&&(l=d),(c===void 0||d>c)&&(c=d),a.set(u,d)}),i!=="none"){const u=dwe().domain([l,c]).rangeRound([r,o]);for(const[h,d]of a)a.set(h,u(d))}return a}function s2t(i,e,t){i.clear();for(const n of e)try{i.addNode(n.id,n)}catch({message:s}){console.error(`[Graph] ${s}`)}for(const n of t)try{i.addEdge(n.source,n.target,n)}catch({message:s}){console.error(`[Graph] ${s}`)}return i}function r2t({graph:i,layout:e,sizingType:t,labelType:n,sizingAttribute:s,defaultNodeSize:r,minNodeSize:o,maxNodeSize:a}){const l=[],c=[],u=new Map,h=i2t({graph:i,type:t,attribute:s,minSize:o,maxSize:a,defaultSize:r}),d=i.nodes().length,f=aSe({nodeCount:d,labelType:n});return i.forEachNode((g,p)=>{const _=e.getNodePosition(g),{data:m,fill:v,icon:y,label:C,size:S,...x}=p,E=h.get(p.id),L=f("node",E),D=(i.inboundNeighbors(p.id)||[]).map(N=>i.getNodeAttributes(N)),I={...p,size:E,labelVisible:L,label:C,icon:y,fill:v,parents:D,data:{...x,...m??{}},position:{..._,x:_.x||0,y:_.y||0,z:_.z||1}};u.set(p.id,I),l.push(I)}),i.forEachEdge((g,p)=>{const _=u.get(p.source),m=u.get(p.target);if(_&&m){const{data:v,id:y,label:C,size:S,...x}=p,E=f("edge",S);c.push({...p,id:y,label:C,labelVisible:E,size:S,data:{...x,id:y,...v||{}}})}}),{nodes:l,edges:c}}const Mu={mass:10,tension:1e3,friction:300,precision:.1};function cSe(i,e,t){const n=e.getLength(),s=i==="end"?n:n/2,r=i==="end"?t/2:0,o=(s-r)/n,a=e.getPointAt(o),l=e.getTangentAt(o);return[a,l]}function uSe(i){return[i+6,2+i/1.5]}const L7=.7;function hSe(i,e,t=0){const n=new se(i.x,i.y||0,i.z||0),s=new se(e.x,e.y||0,e.z||0),r=new se().addVectors(n,s).divideScalar(2);return r.setLength(r.length()+t)}function o2t(i,e,t=-1){const n=i.clone(),s=e.clone(),r=new se().subVectors(s,n),o=r.length(),a=r.clone().normalize(),l=new se().subVectors(s,n).divideScalar(2),c=Math.abs(a.x)%1,u=new se(-a.y,a.x-c*a.z,c*a.y).normalize(),h=new se().add(n).add(l).add(u.multiplyScalar(o/4).multiplyScalar(t));return[i,h,e]}function IT(i,e,t,n,s,r){const o=Eue(i,t,e),a=Eue(t,i,n);return s?new m5(...o2t(o,a,r)):new NX(o,a)}function NT(i){return new se(i.position.x,i.position.y,i.position.z||0)}function Eue(i,e,t){const n=i.distanceTo(e);return i.clone().add(e.clone().sub(i).multiplyScalar(t/n))}function Lue(i,e){return{...i,position:{...i.position,x:i.position.x+e.x,y:i.position.y+e.y,z:i.position.z+e.z}}}function a2t({edge:i,edges:e,curved:t}){let n=t,s;const r=e.filter(o=>o.target===i.target&&o.source===i.source).map(o=>o.id);if(r.length>1){n=!0;const o=r.indexOf(i.id);r.length===2?s=o===0?L7:-L7:s=(o-Math.floor(r.length/2))*L7}return{curved:n,curveOffset:s}}function dO(i){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let a of i)e=Math.min(e,a.position.x),t=Math.max(t,a.position.x),n=Math.min(n,a.position.y),s=Math.max(s,a.position.y),r=Math.min(r,a.position.z),o=Math.max(o,a.position.z);return{height:s-n,width:t-e,minX:e,maxX:t,minY:n,maxY:s,minZ:r,maxZ:o,x:(t+e)/2,y:(s+n)/2,z:(o+r)/2}}function l2t(i,e){return e?i.reduce((t,n)=>{const s=n.data[e];return s&&t.set(s,[...t.get(s)||[],n]),t},new Map):new Map}function c2t({nodes:i,clusterAttribute:e}){const t=new Map;if(e){const n=l2t(i,e);for(const[s,r]of n){const o=dO(r);t.set(s,{label:s,nodes:r,position:o})}}return t}const eZ=({sensitivity:i=7,interval:e=50,timeout:t=0,disabled:n,onPointerOver:s,onPointerOut:r})=>{const o=G.useRef(!1),a=G.useRef(null),l=G.useRef(0),c=G.useRef({x:null,y:null,px:null,py:null}),u=G.useCallback(_=>{c.current.x=_.clientX,c.current.y=_.clientY},[]),h=G.useCallback(_=>{a.current=clearTimeout(a.current);const{px:m,x:v,py:y,y:C}=c.current;Math.abs(m-v)+Math.abs(y-C)<i?(l.current=1,s(_)):(c.current.px=v,c.current.py=C,a.current=setTimeout(()=>h(_),e))},[e,s,i]),d=G.useCallback(()=>{clearTimeout(a.current),typeof window<"u"&&document.removeEventListener("mousemove",u,!1)},[u]),f=G.useCallback(_=>{n||(o.current=!0,d(),l.current!==1&&(c.current.px=_.pointer.x,c.current.py=_.pointer.y,typeof window<"u"&&document.addEventListener("mousemove",u,!1),a.current=setTimeout(()=>h(_),t)))},[d,h,n,u,t]),g=G.useCallback(_=>{a.current=clearTimeout(a.current),l.current=0,r(_)},[r]),p=G.useCallback(_=>{o.current=!1,d(),l.current===1&&(a.current=setTimeout(()=>g(_),t))},[d,g,t]);return{pointerOver:f,pointerOut:p}},u2t=({draggable:i,set:e,position:t,onDragStart:n,onDragEnd:s})=>{const r=Xr(p=>p.camera),o=Xr(p=>p.raycaster),a=Xr(p=>p.size),l=Xr(p=>p.gl),{mouse2D:c,mouse3D:u,offset:h,normal:d,plane:f}=G.useMemo(()=>({mouse2D:new rt,mouse3D:new se,offset:new se,normal:new se,plane:new Kf}),[]),g=G.useMemo(()=>l.domElement.getBoundingClientRect(),[l.domElement]);return $wt({onDragStart:({event:p})=>{const{eventObject:_,point:m}=p;_.getWorldPosition(h).sub(m),u.copy(m),n()},onDrag:({xy:p})=>{const _=(p[0]-((g==null?void 0:g.left)??0))/a.width*2-1,m=-((p[1]-((g==null?void 0:g.top)??0))/a.height)*2+1;c.set(_,m),o.setFromCamera(c,r),r.getWorldDirection(d).negate(),f.setFromNormalAndCoplanarPoint(d,u),o.ray.intersectPlane(f,u);const v=new se(t.x,t.y,t.z).copy(u).add(h);return e(v)},onDragEnd:s},{drag:{enabled:i,threshold:10}})},{Provider:h2t,useStore:Gt}=Abt(),d2t=({actives:i=[],selections:e=[],collapsedNodeIds:t=[],theme:n})=>Mbt(s=>({theme:{...n,edge:{...n.edge,label:{...n.edge.label,fontSize:n.edge.label.fontSize??6}}},edges:[],nodes:[],collapsedNodeIds:t,clusters:new Map,panning:!1,draggingId:null,actives:i,edgeContextMenus:new Set,edgeMeshes:[],selections:e,drags:{},graph:new us({multi:!0}),setTheme:r=>s(o=>({...o,theme:r})),setClusters:r=>s(o=>({...o,clusters:r})),setEdgeContextMenus:r=>s(o=>({...o,edgeContextMenus:r})),setEdgeMeshes:r=>s(o=>({...o,edgeMeshes:r})),setPanning:r=>s(o=>({...o,panning:r})),setDrags:r=>s(o=>({...o,drags:r})),setDraggingId:r=>s(o=>({...o,draggingId:r})),setActives:r=>s(o=>({...o,actives:r})),setSelections:r=>s(o=>({...o,selections:r})),setNodes:r=>s(o=>({...o,nodes:r,centerPosition:dO(r)})),setEdges:r=>s(o=>({...o,edges:r})),setNodePosition:(r,o)=>s(a=>{var l,c;const u=a.nodes.find(p=>p.id===r),h=NT(u),f=new se(o.x,o.y,o.z).sub(h),g=[...a.nodes];if((l=a.selections)!=null&&l.includes(r))(c=a.selections)==null||c.forEach(p=>{const _=a.nodes.find(m=>m.id===p);if(_){const m=a.nodes.indexOf(_);g[m]=Lue(_,f)}});else{const p=a.nodes.indexOf(u);g[p]=Lue(u,f)}return{...a,drags:{...a.drags,[r]:u},nodes:g}}),setCollapsedNodeIds:(r=[])=>s(o=>({...o,collapsedNodeIds:r}))}));function dSe({nodeId:i,nodes:e,edges:t,currentHiddenNodes:n,currentHiddenEdges:s}){const r=[],o=[],a=n.map(f=>f.id),l=s.map(f=>f.id),c=t.filter(f=>f.source===i),u=c.map(f=>f.target);o.push(...c);for(const f of u){const g=t.filter(_=>_.target===f&&_.source!==i);let p=!1;if((g.length===0||g.length>0&&!a.includes(f)&&g.map(m=>m.id).every(m=>l.includes(m)))&&(p=!0),p){const _=e.find(v=>v.id===f);_&&r.push(_);const m=dSe({nodeId:f,nodes:e,edges:t,currentHiddenEdges:o,currentHiddenNodes:r});o.push(...m.hiddenEdges),r.push(...m.hiddenNodes)}}const h=Object.values(o.reduce((f,g)=>({...f,[g.id]:g}),{})),d=Object.values(r.reduce((f,g)=>({...f,[g.id]:g}),{}));return{hiddenEdges:h,hiddenNodes:d}}const f2t=({collapsedIds:i,nodes:e,edges:t})=>{const n=[],s=[];for(const c of i){const{hiddenEdges:u,hiddenNodes:h}=dSe({nodeId:c,nodes:e,edges:t,currentHiddenEdges:s,currentHiddenNodes:n});n.push(...h),s.push(...u)}const r=n.map(c=>c.id),o=s.map(c=>c.id),a=e.filter(c=>!r.includes(c.id)),l=t.filter(c=>!o.includes(c.id));return{visibleNodes:a,visibleEdges:l}},g2t=({layoutType:i,sizingType:e,labelType:t,sizingAttribute:n,clusterAttribute:s,selections:r,nodes:o,edges:a,actives:l,collapsedNodeIds:c,defaultNodeSize:u,maxNodeSize:h,minNodeSize:d,layoutOverrides:f})=>{const g=Gt(z=>z.graph),p=Gt(z=>z.setClusters),_=Gt(z=>z.collapsedNodeIds),m=Gt(z=>z.setEdges),v=Gt(z=>z.nodes),y=Gt(z=>z.setNodes),C=Gt(z=>z.setSelections),S=Gt(z=>z.setActives),x=Gt(z=>z.drags),E=Gt(z=>z.setDrags),L=Gt(z=>z.setCollapsedNodeIds),T=G.useRef(!1),D=G.useRef(null),I=Xr(z=>z.camera),{visibleEdges:N,visibleNodes:P}=G.useMemo(()=>f2t({collapsedIds:_,nodes:o,edges:a}),[_,o,a]),O=G.useRef(x);G.useEffect(()=>{O.current=x},[x]);const V=G.useCallback(async z=>{D.current=z||JLt({...f,type:i,graph:g,drags:O.current,clusterAttribute:s}),await GLt(D.current);const K=r2t({graph:g,layout:D.current,sizingType:e,labelType:t,sizingAttribute:n,maxNodeSize:h,minNodeSize:d,defaultNodeSize:u}),H=c2t({nodes:K.nodes,clusterAttribute:s});m(K.edges),y(K.nodes),p(H)},[f,i,s,e,t,n,h,d,u,m,y,p]);G.useEffect(()=>{const z=v.map(H=>({...H,labelVisible:aSe({nodeCount:v==null?void 0:v.length,labelType:t,camera:I,nodePosition:H==null?void 0:H.position})("node",H==null?void 0:H.size)}));z.some((H,U)=>H.labelVisible!==v[U].labelVisible)&&y(z)},[I,I.zoom,I.position.z,y,v,t]),G.useEffect(()=>{T.current&&C(r)},[r,C]),G.useEffect(()=>{T.current&&S(l)},[l,S]),G.useEffect(()=>{async function z(){T.current=!1,s2t(g,P,N),await V(),T.current=!0}z()},[P,N]),G.useEffect(()=>{T.current&&L(c)},[c,L]),G.useEffect(()=>{T.current&&(O.current={},E({}),V())},[i,V,E]),G.useEffect(()=>{T.current&&V(D.current)},[e,n,t,V])},SC=({text:i,fontSize:e,fontUrl:t,color:n,opacity:s,stroke:r,active:o,ellipsis:a,rotation:l})=>{const c=a&&!o?fLt(i,a):i,u=G.useMemo(()=>new Pt(n),[n]),h=G.useMemo(()=>r?new Pt(r):void 0,[r]);return ge.jsx(BCe,{position:[0,0,1],children:ge.jsx(lLt,{font:t,fontSize:e,color:u,fillOpacity:s,textAlign:"center",outlineWidth:r?1:0,outlineColor:h,depthOffset:0,maxWidth:100,overflowWrap:"break-word",rotation:l,children:c})})};SC.defaultProps={opacity:1,fontSize:7,color:"#2A6475",ellipsis:75};const fSe=({color:i,size:e,opacity:t,animated:n,strokeWidth:s,innerRadius:r=4,segments:o=25})=>{const a=G.useMemo(()=>new Pt(i),[i]),{ringSize:l,ringOpacity:c}=ku({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:t,ringSize:[e/2,e/2,1]},config:{...Mu,duration:n?void 0:0}}),u=s/10,h=r+u;return ge.jsx(BCe,{position:[0,0,1],children:ge.jsxs(_r.mesh,{scale:l,children:[ge.jsx("ringGeometry",{attach:"geometry",args:[r,h,o]}),ge.jsx(_r.meshBasicMaterial,{attach:"material",color:a,transparent:!0,depthTest:!1,opacity:c,side:Ks,fog:!0})]})})};fSe.defaultProps={color:"#D8E6EA",size:1,opacity:.5,strokeWidth:5};const gSe=({color:i,id:e,size:t,active:n,selected:s,opacity:r,animated:o})=>{const{scale:a,nodeOpacity:l}=ku({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[t,t,t],nodeOpacity:r},config:{...Mu,duration:o?void 0:0}}),c=G.useMemo(()=>new Pt(i),[i]),u=Gt(h=>h.theme);return ge.jsxs(ge.Fragment,{children:[ge.jsxs(_r.mesh,{userData:{id:e,type:"node"},scale:a,children:[ge.jsx("sphereGeometry",{attach:"geometry",args:[1,25,25]}),ge.jsx(_r.meshPhongMaterial,{attach:"material",side:Ks,transparent:!0,fog:!0,opacity:l,color:c})]}),ge.jsx(fSe,{opacity:s?.5:0,size:t,animated:o,color:s?u.ring.activeFill:u.ring.fill})]})};gSe.defaultProps={opacity:1,active:!1};const pSe=G.createContext({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},dollyIn:()=>{},dollyOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{}}),tZ=()=>{const i=G.useContext(pSe);if(i===void 0)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return i};Ka.install({THREE:{MOUSE:o1e,Vector2:rt,Vector3:se,Vector4:Fi,Quaternion:qo,Matrix4:Rn,Spherical:abe,Box3:Ic,Sphere:Nc,Raycaster:YX,MathUtils:{DEG2RAD:(bue=WP)==null?void 0:bue.DEG2RAD,clamp:(wue=WP)==null?void 0:wue.clamp}}});gbe({ThreeCameraControls:Ka});const eF={ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40},Tue=new J5(eF.ARROW_LEFT,100),kue=new J5(eF.ARROW_RIGHT,100),Mue=new J5(eF.ARROW_UP,100),Due=new J5(eF.ARROW_DOWN,100),mSe=G.forwardRef(({mode:i,children:e,animated:t,disabled:n,minDistance:s,maxDistance:r},o)=>{const a=G.useRef(null),l=Xr(L=>L.camera),c=Xr(L=>L.gl),u=i==="orbit",h=Gt(L=>L.setPanning),d=Gt(L=>L.draggingId);A5((L,T)=>{var D,I;(D=a.current)!=null&&D.enabled&&((I=a.current)==null||I.update(T)),u&&(a.current.azimuthAngle+=20*T*WP.DEG2RAD)},-1),G.useEffect(()=>()=>{var L;return(L=a.current)==null?void 0:L.dispose()},[]);const f=G.useCallback(()=>{var L;(L=a.current)==null||L.zoom(l.zoom/2,t)},[t,l.zoom]),g=G.useCallback(()=>{var L;(L=a.current)==null||L.zoom(-l.zoom/2,t)},[t,l.zoom]),p=G.useCallback(L=>{var T;(T=a.current)==null||T.dolly(L,t)},[t]),_=G.useCallback(L=>{var T;(T=a.current)==null||T.dolly(L,t)},[t]),m=G.useCallback(L=>{var T;u||(T=a.current)==null||T.truck(-.03*L.deltaTime,0,t)},[t,u]),v=G.useCallback(L=>{var T;u||(T=a.current)==null||T.truck(.03*L.deltaTime,0,t)},[t,u]),y=G.useCallback(L=>{var T;u||(T=a.current)==null||T.truck(0,.03*L.deltaTime,t)},[t,u]),C=G.useCallback(L=>{var T;u||(T=a.current)==null||T.truck(0,-.03*L.deltaTime,t)},[t,u]),S=G.useCallback(L=>{L.code==="Space"&&(i==="rotate"?a.current.mouseButtons.left=Ka.ACTION.TRUCK:a.current.mouseButtons.left=Ka.ACTION.ROTATE)},[i]),x=G.useCallback(L=>{L.code==="Space"&&(i==="rotate"?a.current.mouseButtons.left=Ka.ACTION.ROTATE:a.current.mouseButtons.left=Ka.ACTION.TRUCK)},[i]);G.useEffect(()=>(n||(Tue.addEventListener("holding",v),kue.addEventListener("holding",m),Mue.addEventListener("holding",y),Due.addEventListener("holding",C),typeof window<"u"&&(window.addEventListener("keydown",S),window.addEventListener("keyup",x))),()=>{Tue.removeEventListener("holding",v),kue.removeEventListener("holding",m),Mue.removeEventListener("holding",y),Due.removeEventListener("holding",C),typeof window<"u"&&(window.removeEventListener("keydown",S),window.removeEventListener("keyup",x))}),[n,S,x,C,v,m,y]),G.useEffect(()=>{n?(a.current.mouseButtons.left=Ka.ACTION.NONE,a.current.mouseButtons.middle=Ka.ACTION.NONE,a.current.mouseButtons.wheel=Ka.ACTION.NONE):(a.current.mouseButtons.left=Ka.ACTION.TRUCK,a.current.mouseButtons.middle=Ka.ACTION.TRUCK,a.current.mouseButtons.wheel=Ka.ACTION.DOLLY)},[n]),G.useEffect(()=>{const L=()=>h(!0),T=()=>h(!1),D=a.current;return D&&(D.addEventListener("control",L),D.addEventListener("controlend",T)),()=>{D&&(D.removeEventListener("control",L),D.removeEventListener("controlend",T))}},[a,h]),G.useEffect(()=>{d?a.current.mouseButtons.left=Ka.ACTION.NONE:i==="rotate"?a.current.mouseButtons.left=Ka.ACTION.ROTATE:a.current.mouseButtons.left=Ka.ACTION.TRUCK},[d,i]),sSe([{name:"Zoom In",disabled:n,category:"Graph",keys:"command+shift+i",callback:L=>{L.preventDefault(),f()}},{name:"Zoom Out",category:"Graph",disabled:n,keys:"command+shift+o",callback:L=>{L.preventDefault(),g()}}]);const E=G.useMemo(()=>({controls:a.current,zoomIn:()=>f(),zoomOut:()=>g(),dollyIn:(L=1e3)=>p(L),dollyOut:(L=-1e3)=>_(L),panLeft:(L=100)=>v({deltaTime:L}),panRight:(L=100)=>m({deltaTime:L}),panDown:(L=100)=>C({deltaTime:L}),panUp:(L=100)=>y({deltaTime:L}),resetControls:L=>{var T;return(T=a.current)==null?void 0:T.reset(L)}}),[f,g,v,m,C,y,a.current]);return G.useImperativeHandle(o,()=>E),ge.jsxs(pSe.Provider,{value:E,children:[ge.jsx("threeCameraControls",{ref:a,args:[l,c.domElement],smoothTime:.1,minDistance:s,dollyToCursor:!0,maxDistance:r}),e]})});mSe.defaultProps={mode:"rotate",minDistance:1e3,maxDistance:5e4};function _Se(i,e){const t=e.position.z;i<t?i-=t:i+=t;const n=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(n/2)*Math.abs(i)}function p2t(i,e){return _Se(i,e)*e.aspect}function Aue(i,e){var t,n,s,r;const o=p2t(1,i),a=_Se(1,i),l={x0:((t=i==null?void 0:i.position)==null?void 0:t.x)-o/2,x1:((n=i==null?void 0:i.position)==null?void 0:n.x)+o/2,y0:((s=i==null?void 0:i.position)==null?void 0:s.y)-a/2,y1:((r=i==null?void 0:i.position)==null?void 0:r.y)+a/2};return(e==null?void 0:e.x)>l.x0&&(e==null?void 0:e.x)<l.x1&&(e==null?void 0:e.y)>l.y0&&(e==null?void 0:e.y)<l.y1}function Iue(i,e){return e.reduce((t,n)=>Math.abs(n-i%Math.PI)<Math.abs(t-i%Math.PI)?n:t)}function m2t(i,e){const t=Iue(i,[0,Math.PI]),n=Iue(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:t-i%Math.PI,verticalRotation:n-e%Math.PI}}const sI=50,_2t=({animated:i,disabled:e,layoutType:t})=>{const n=Gt(p=>p.nodes),[s,r]=G.useState(!1),o=Xr(p=>p.invalidate),{controls:a}=tZ(),l=Xr(p=>p.camera),c=G.useRef(!1),u=G.useCallback(async(p,_)=>{const m=(_==null?void 0:_.animated)!==void 0?_==null?void 0:_.animated:!0,v=(_==null?void 0:_.centerOnlyIfNodesNotInView)!==void 0?_==null?void 0:_.centerOnlyIfNodesNotInView:!1;if(!c.current||!v||v&&(p!=null&&p.some(y=>!Aue(l,y.position)))){const{x:y,y:C,z:S}=dO(p);await a.setTarget(y,C,S,m),s||r(!0),o()}},[o,a,n]),h=G.useCallback(async(p,_={animated:!0,fitOnlyIfNodesNotInView:!1})=>{const{fitOnlyIfNodesNotInView:m}=_;if(!m||m&&(p!=null&&p.some(v=>!Aue(l,v.position)))){const{minX:v,maxX:y,minY:C,maxY:S,minZ:x,maxZ:E}=dO(p);if(!t.includes("3d")){const{horizontalRotation:L,verticalRotation:T}=m2t(a==null?void 0:a.azimuthAngle,a==null?void 0:a.polarAngle);a==null||a.rotate(L,T,!0)}await(a==null?void 0:a.zoomTo(1,_==null?void 0:_.animated)),await(a==null?void 0:a.fitToBox(new Ic(new se(v,C,x),new se(y,S,E)),_==null?void 0:_.animated,{cover:!1,paddingLeft:sI,paddingRight:sI,paddingBottom:sI,paddingTop:sI}))}},[l,a,t]),d=G.useCallback(p=>{let _=null;return p!=null&&p.length&&(_=p.reduce((m,v)=>{const y=n.find(C=>C.id===v);if(y)m.push(y);else throw new Error(`Attempted to center ${v} but it was not found in the nodes`);return m},[])),_},[n]),f=G.useCallback((p,_)=>{const m=d(p);u(m||n,{animated:i,centerOnlyIfNodesNotInView:_==null?void 0:_.centerOnlyIfNodesNotInView})},[i,u,d,n]),g=G.useCallback(async(p,_)=>{const m=d(p);await h(m||n,{animated:i,..._})},[i,h,d,n]);return G.useLayoutEffect(()=>{async function p(){a&&(n!=null&&n.length)&&(c.current||(await u(n,{animated:!1}),await h(n,{animated:!1}),c.current=!0))}p()},[a,u,n,i,l,h]),sSe([{name:"Center",disabled:e,category:"Graph",keys:["command+shift+c"],callback:()=>u(n)}]),{centerNodes:u,centerNodesById:f,fitNodesInViewById:g,isCentered:s}},vSe=({image:i,id:e,size:t,opacity:n,animated:s})=>{const r=G.useMemo(()=>new Xye().load(i),[i]),{scale:o,spriteOpacity:a}=ku({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[t,t,t],spriteOpacity:n},config:{...Mu,duration:s?void 0:0}});return ge.jsx(_r.sprite,{userData:{id:e,type:"node"},scale:o,children:ge.jsx(_r.spriteMaterial,{attach:"material",opacity:a,fog:!0,depthTest:!1,transparent:!0,side:Ks,children:ge.jsx("primitive",{attach:"map",object:r,minFilter:Fs})})})};vSe.defaultProps={opacity:1};const ySe=({animated:i,disabled:e,id:t,draggable:n,labelFontUrl:s,contextMenu:r,onClick:o,onDoubleClick:a,onPointerOver:l,onDragged:c,onPointerOut:u,onContextMenu:h,renderNode:d})=>{var f,g,p;const _=tZ(),m=Gt(Re=>Re.theme),v=Gt(Re=>Re.nodes.find(Fe=>Fe.id===t)),y=Gt(Re=>Re.edges),C=Gt(Re=>Re.draggingId),S=Gt(Re=>Re.collapsedNodeIds),x=Gt(Re=>Re.setDraggingId),E=Gt(Re=>Re.setNodePosition),L=Gt(Re=>Re.setCollapsedNodeIds),T=Gt(Re=>Re.collapsedNodeIds.includes(t)),D=Gt(Re=>{var Fe;return(Fe=Re.actives)==null?void 0:Fe.includes(t)}),I=Gt(Re=>{var Fe;return(Fe=Re.selections)==null?void 0:Fe.includes(t)}),N=Gt(Re=>{var Fe;return((Fe=Re.selections)==null?void 0:Fe.length)>0}),P=Gt(Re=>Re.centerPosition),O=C===t,{position:V,label:z,subLabel:K,size:H=7,labelVisible:U=!0}=v,j=G.useRef(null),[W,X]=G.useState(!1),[ee,le]=G.useState(!1),fe=W||I||D,be=N?fe?m.node.selectedOpacity:m.node.inactiveOpacity:m.node.opacity,ye=G.useMemo(()=>y.filter(Fe=>Fe.source===t).length>0||T,[y,t,T]),xe=G.useCallback(()=>{ye&&L(T?S.filter(Re=>Re!==t):[...S,t])},[ye,S,t,T,L]),[{nodePosition:He,labelPosition:qe,subLabelPosition:ke}]=ku(()=>({from:{nodePosition:P?[P.x,P.y,0]:[0,0,0],labelPosition:[0,-(H+7),2],subLabelPosition:[0,-(H+14),2]},to:{nodePosition:V?[V.x,V.y,fe?V.z+1:V.z]:[0,0,0],labelPosition:[0,-(H+7),2],subLabelPosition:[0,-(H+14),2]},config:{...Mu,duration:i&&!C?void 0:0}}),[O,V,i,H,fe]),q=u2t({draggable:n,position:V,set:Re=>E(t,Re),onDragStart:()=>{x(t),X(!0)},onDragEnd:()=>{x(null),X(!1),c==null||c(v)}});SL(W&&!C&&o!==void 0,"pointer"),SL(W&&n&&!O&&o===void 0,"grab"),SL(O,"grabbing");const Ee=fe||O,De=Ee?m.node.activeFill:v.fill||m.node.fill,{pointerOver:Ae,pointerOut:Me}=eZ({disabled:e||O,onPointerOver:Re=>{_.controls.truckSpeed=0,X(!0),l==null||l(v,Re)},onPointerOut:Re=>{_.controls.truckSpeed=2,X(!1),u==null||u(v,Re)}}),Je=G.useMemo(()=>d?d({id:t,color:De,size:H,active:Ee,opacity:be,animated:i,selected:I,node:v}):ge.jsx(ge.Fragment,{children:v.icon?ge.jsx(vSe,{id:t,image:v.icon||"",size:H+8,opacity:be,animated:i,color:De,node:v,active:Ee,selected:I}):ge.jsx(gSe,{id:t,size:H,opacity:be,animated:i,color:De,node:v,active:Ee,selected:I})}),[d,t,De,H,Ee,be,i,I,v]),Pe=G.useMemo(()=>{var Re,Fe,wt;return U&&(U||I||W)&&z&&ge.jsxs(ge.Fragment,{children:[ge.jsx(_r.group,{position:qe,children:ge.jsx(SC,{text:z,fontUrl:s,opacity:be,stroke:m.node.label.stroke,active:I||W||O||D,color:I||W||O||D?m.node.label.activeColor:m.node.label.color})}),K&&ge.jsx(_r.group,{position:ke,children:ge.jsx(SC,{text:K,fontUrl:s,fontSize:5,opacity:be,stroke:(Re=m.node.subLabel)==null?void 0:Re.stroke,active:I||W||O||D,color:I||W||O||D?(Fe=m.node.subLabel)==null?void 0:Fe.activeColor:(wt=m.node.subLabel)==null?void 0:wt.color})})]})},[W,D,O,I,z,s,qe,U,be,K,ke,m.node.label.activeColor,m.node.label.color,m.node.label.stroke,(f=m.node.subLabel)==null?void 0:f.activeColor,(g=m.node.subLabel)==null?void 0:g.color,(p=m.node.subLabel)==null?void 0:p.stroke]),Xe=G.useMemo(()=>ee&&r&&ge.jsx(DY,{prepend:!0,center:!0,children:r({data:v,canCollapse:ye,isCollapsed:T,onCollapse:xe,onClose:()=>le(!1)})}),[ee,r,v,ye,T,xe]);return ge.jsxs(_r.group,{renderOrder:1,userData:{id:t,type:"node"},ref:j,position:He,onPointerOver:Ae,onPointerOut:Me,onClick:Re=>{!e&&!O&&(o==null||o(v,{canCollapse:ye,isCollapsed:T},Re))},onDoubleClick:Re=>{!e&&!O&&(a==null||a(v,Re))},onContextMenu:()=>{e||(le(!0),h==null||h(v,{canCollapse:ye,isCollapsed:T,onCollapse:xe}))},...q(),children:[Je,Xe,Pe]})};ySe.defaultProps={draggable:!1};const bSe=({animated:i,color:e,length:t,opacity:n,position:s,rotation:r,size:o,onActive:a,onContextMenu:l})=>{const c=G.useMemo(()=>new Pt(e),[e]),u=G.useRef(null),h=Gt(_=>_.draggingId),d=Gt(_=>_.centerPosition),[{pos:f,arrowOpacity:g}]=ku(()=>({from:{pos:d?[d.x,d.y,d.z]:[0,0,0],arrowOpacity:0},to:{pos:[s.x,s.y,s.z],arrowOpacity:n},config:{...Mu,duration:i&&!h?void 0:0}}),[i,h,n,s]),p=G.useCallback(()=>{var _;const m=new se(0,1,0);(_=u.current)==null||_.quaternion.setFromUnitVectors(m,r)},[r,u]);return G.useEffect(()=>p(),[p]),ge.jsxs(_r.mesh,{position:f,ref:u,scale:[1,1,1],onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),onPointerDown:_=>{_.nativeEvent.buttons===2&&(_.stopPropagation(),l())},children:[ge.jsx("cylinderGeometry",{args:[0,o,t,20,1,!0],attach:"geometry"}),ge.jsx(_r.meshBasicMaterial,{attach:"material",color:c,depthTest:!1,opacity:g,transparent:!0,side:Ks,fog:!0})]})};bSe.defaultProps={size:1,opacity:.5,color:"#D8E6EA"};const wSe=({curveOffset:i,animated:e,color:t,curve:n,curved:s=!1,id:r,opacity:o,size:a,onContextMenu:l,onClick:c,onPointerOver:u,onPointerOut:h})=>{const d=G.useRef(null),f=Gt(v=>v.draggingId),g=G.useMemo(()=>new Pt(t),[t]),p=Gt(v=>v.centerPosition),_=G.useRef(!1),{lineOpacity:m}=ku({from:{lineOpacity:0},to:{lineOpacity:o},config:{...Mu,duration:e?void 0:0}});return ku(()=>{const v=n.getPoint(0),y=n.getPoint(1);return{from:{fromVertices:_.current?[y==null?void 0:y.x,y==null?void 0:y.y,(y==null?void 0:y.z)||0]:[p==null?void 0:p.x,p==null?void 0:p.y,(p==null?void 0:p.z)||0],toVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0]},to:{fromVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0],toVertices:[y==null?void 0:y.x,y==null?void 0:y.y,(y==null?void 0:y.z)||0]},onChange:C=>{const{fromVertices:S,toVertices:x}=C.value,E=new se(...S),L=new se(...x),T=IT(E,0,L,0,s,i);d.current.copy(new Uv(T,20,a/2,5,!1))},config:{...Mu,duration:e&&!f?void 0:0}}},[e,f,n,a]),G.useEffect(()=>{_.current=!0},[]),ge.jsxs("mesh",{userData:{id:r,type:"edge"},onPointerOver:u,onPointerOut:h,onClick:c,onPointerDown:v=>{v.nativeEvent.buttons===2&&(v.stopPropagation(),l())},children:[ge.jsx("tubeGeometry",{attach:"geometry",ref:d}),ge.jsx(_r.meshBasicMaterial,{attach:"material",opacity:m,fog:!0,transparent:!0,depthTest:!1,color:g})]})};wSe.defaultProps={color:"#000",size:1,opacity:1};const Nue=3,CSe=({animated:i,arrowPlacement:e,contextMenu:t,disabled:n,labelPlacement:s,id:r,interpolation:o,labelFontUrl:a,onContextMenu:l,onClick:c,onPointerOver:u,onPointerOut:h})=>{const d=Gt(q=>q.theme),f=Gt(q=>q.draggingId),[g,p]=G.useState(!1),[_,m]=G.useState(!1),v=Gt(q=>q.edges),y=v.find(q=>q.id===r),{target:C,source:S,label:x,labelVisible:E=!1,size:L=1}=y,T=Gt(q=>q.nodes.find(Ee=>Ee.id===S)),D=Gt(q=>q.nodes.find(Ee=>Ee.id===C)),I=(L+d.edge.label.fontSize)/2,[N,P]=G.useMemo(()=>uSe(L),[L]),{curveOffset:O,curved:V}=G.useMemo(()=>a2t({edge:y,edges:v,curved:o==="curved"}),[y,v,o]),[z,K,H]=G.useMemo(()=>{const q=NT(T),Ee=T.size,De=NT(D),Ae=D.size;let Me=IT(q,Ee,De,Ae,V,O);const[Je,Pe]=cSe(e,Me,N);return e==="end"&&(Me=IT(q,Ee,Je,0,V,O)),[Me,Je,Pe]},[T,D,V,O,e,N]),U=G.useMemo(()=>{let q=hSe(T.position,D.position,lSe(I,s));if(V){const Ee=new se().subVectors(q,z.getPoint(.5));switch(s){case"above":Ee.y=Ee.y-Nue;break;case"below":Ee.y=Ee.y+Nue;break}q=q.sub(Ee)}return q},[T.position,D.position,I,s,V,z]),j=Gt(q=>{var Ee;return(Ee=q.selections)==null?void 0:Ee.includes(r)}),W=Gt(q=>{var Ee;return(Ee=q.selections)==null?void 0:Ee.length}),X=Gt(q=>{var Ee;return(Ee=q.actives)==null?void 0:Ee.includes(r)}),ee=Gt(q=>q.centerPosition),le=W?j||X?d.edge.selectedOpacity:d.edge.inactiveOpacity:d.edge.opacity,[{labelPosition:fe}]=ku(()=>({from:{labelPosition:ee?[ee.x,ee.y,ee.z]:[0,0,0]},to:{labelPosition:[U.x,U.y,U.z]},config:{...Mu,duration:i&&!f?void 0:0}}),[U,i,f]),be=G.useMemo(()=>new m1(0,0,s==="natural"?0:Math.atan((D.position.y-T.position.y)/(D.position.x-T.position.x))),[D.position.x,D.position.y,T.position.x,T.position.y,s]);SL(g&&!f&&c!==void 0,"pointer");const{pointerOver:ye,pointerOut:xe}=eZ({disabled:n,onPointerOver:q=>{p(!0),u==null||u(y,q)},onPointerOut:q=>{p(!1),h==null||h(y,q)}}),He=G.useMemo(()=>e!=="none"&&ge.jsx(bSe,{animated:i,color:j||g||X?d.arrow.activeFill:d.arrow.fill,length:N,opacity:le,position:K,rotation:H,size:P,onActive:p,onContextMenu:()=>{n||(m(!0),l==null||l(y))}}),[g,i,N,e,K,H,P,n,y,X,j,l,le,d.arrow.activeFill,d.arrow.fill]),qe=G.useMemo(()=>E&&x&&ge.jsx(_r.group,{position:fe,children:ge.jsx(SC,{text:x,ellipsis:15,fontUrl:a,stroke:d.edge.label.stroke,color:j||g||X?d.edge.label.activeColor:d.edge.label.color,opacity:le,fontSize:d.edge.label.fontSize,rotation:be})}),[g,X,j,x,a,fe,be,E,le,d.edge.label.activeColor,d.edge.label.color,d.edge.label.fontSize,d.edge.label.stroke]),ke=G.useMemo(()=>_&&t&&ge.jsx(DY,{prepend:!0,center:!0,position:U,children:t({data:y,onClose:()=>m(!1)})}),[_,t,U,y]);return ge.jsxs("group",{children:[ge.jsx(wSe,{curveOffset:O,animated:i,color:j||g||X?d.edge.activeFill:d.edge.fill,curve:z,curved:V,id:r,opacity:le,size:L,onClick:q=>{n||c==null||c(y,q)},onPointerOver:ye,onPointerOut:xe,onContextMenu:()=>{n||(m(!0),l==null||l(y))}}),He,qe,ke]})};CSe.defaultProps={labelPlacement:"inline",arrowPlacement:"end"};const Rue=new jm(0,0,0);function v2t(i,e){const t=G.useRef(),n=Gt(l=>l.theme);Gt(l=>{t.current=l});const s=G.useRef(new Map),r=e==="curved",o=G.useCallback(l=>{const c=[],u=s.current,{nodes:h}=t.current;return l.forEach(d=>{const{target:f,source:g,size:p=1}=d,_=h.find(z=>z.id===g),m=h.find(z=>z.id===f);if(!_||!m)return;const v=`fromX:${_.position.x},fromY:${_.position.y},toX:${m.position.x}},toY:${m.position.y}`;if(u.has(v)){const z=u.get(v);c.push(z);return}const y=NT(_),C=_.size+n.edge.label.fontSize,S=NT(m),x=m.size+n.edge.label.fontSize;let E=IT(y,C,S,x,r),L=new Uv(E,20,p/2,5,!1);if(i==="none"){c.push(L),u.set(v,L);return}const[T,D]=uSe(p),[I,N]=cSe(i,E,T),P=new qo;P.setFromUnitVectors(new se(0,1,0),N);const O=new v1(0,D,T,20,1,!0);if(O.applyQuaternion(P),O.translate(I.x,I.y,I.z),i&&i==="end"){const z=IT(y,C,I,0,r);L=new Uv(z,20,p/2,5,!1)}const V=YA([L,O]);c.push(V),u.set(v,V)}),c},[i,r,n.edge.label.fontSize]),a=G.useCallback((l,c)=>{const u=o(l),h=o(c);return YA([h.length?YA(h):Rue,u.length?YA(u):Rue],!0)},[o]);return{getGeometries:o,getGeometry:a}}function y2t(i,e,t){const{onClick:n,onContextMenu:s,onPointerOut:r,onPointerOver:o}=i,a=Gt(g=>g.edgeContextMenus),l=Gt(g=>g.setEdgeContextMenus),c=G.useRef(!1),u=G.useCallback(()=>{c.current=!0},[]),h=G.useRef(!1),d=G.useCallback(()=>{h.current=!0},[]),f=G.useCallback((g,p)=>{n&&c.current&&(c.current=!1,t||p.forEach(_=>{n(_)})),(e||s)&&h.current&&(h.current=!1,t||p.forEach(_=>{a.has(_.id)||(l(new Set([...a,_.id])),s==null||s(_))})),o&&p.filter(m=>!g.includes(m)).forEach(m=>{o(m)}),r&&g.filter(m=>!p.includes(m)).forEach(m=>{r(m)})},[e,t,a,l,n,s,o,r]);return{handleClick:u,handleContextMenu:d,handleIntersections:f}}function b2t(i,e){const t=G.useRef(i);G.useEffect(()=>{t.current=i},[i]);const n=G.useCallback(()=>{const r=t.current.getAttribute("position"),o=Array.from({length:r.array.length}).fill(0),a=Array.from(r.array);return{from:o,to:a}},[]),s=G.useCallback(r=>{const o=new Float32Array(r),a=new is(o,3,!1);t.current.setAttribute("position",a),a.needsUpdate=!0},[]);ku(()=>{if(!e)return null;const r=n();return{from:{positions:r.from},to:{positions:r.to},onChange:o=>{s(o.value.positions)},config:{...Mu,duration:e?void 0:0}}},[e])}function w2t(i,e,t){const[{activeOpacity:n,inactiveOpacity:s}]=ku(()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?t.edge.selectedOpacity:t.edge.opacity,inactiveOpacity:e?t.edge.inactiveOpacity:t.edge.opacity},config:{...Mu,duration:i?void 0:0}}),[i,e,t]);return{activeOpacity:n,inactiveOpacity:s}}const SSe=({animated:i,color:e,contextMenu:t,edge:n,labelFontUrl:s,labelPlacement:r,opacity:o})=>{const a=Gt(L=>L.theme),{target:l,source:c,label:u,labelVisible:h=!1,size:d=1}=n,f=Gt(L=>L.nodes),g=f.find(L=>L.id===c),p=f.find(L=>L.id===l),_=Gt(L=>L.draggingId),m=(d+a.edge.label.fontSize)/2,v=G.useMemo(()=>hSe(g.position,p.position,lSe(m,r)),[g.position,p.position,m,r]),y=Gt(L=>L.edgeContextMenus),C=Gt(L=>L.setEdgeContextMenus),[{labelPosition:S}]=ku(()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[v.x,v.y,v.z]},config:{...Mu,duration:i&&!_?void 0:0}}),[v,i,_]),x=G.useCallback(L=>{y.delete(L.id),C(new Set(y.values()))},[y,C]),E=G.useMemo(()=>new m1(0,0,r==="natural"?0:Math.atan((p.position.y-g.position.y)/(p.position.x-g.position.x))),[p.position.x,p.position.y,g.position.x,g.position.y,r]);return ge.jsxs("group",{children:[h&&u&&ge.jsx(_r.group,{position:S,children:ge.jsx(SC,{text:u,ellipsis:15,fontUrl:s,stroke:a.edge.label.stroke,color:e,opacity:o,fontSize:a.edge.label.fontSize,rotation:E})}),t&&y.has(n.id)&&ge.jsx(DY,{prepend:!0,center:!0,position:v,children:t({data:n,onClose:()=>x(n)})})]})};SSe.defaultProps={labelPlacement:"inline"};const C2t=({interpolation:i="linear",arrowPlacement:e="end",labelPlacement:t="inline",animated:n,contextMenu:s,disabled:r,edges:o,labelFontUrl:a,onClick:l,onContextMenu:c,onPointerOut:u,onPointerOver:h})=>{const d=Gt(j=>j.theme),{getGeometries:f,getGeometry:g}=v2t(e,i),p=Gt(j=>j.draggingId),_=Gt(j=>j.edgeMeshes),m=Gt(j=>j.setEdgeMeshes),v=Gt(j=>j.actives||[]),y=Gt(j=>j.selections||[]),[C,S,x,E]=G.useMemo(()=>{const j=[],W=[],X=[],ee=[];return o.forEach(le=>{if(p===le.source||p===le.target){y.includes(le.id)||v.includes(le.id)?X.push(le):ee.push(le);return}y.includes(le.id)||v.includes(le.id)?j.push(le):W.push(le)}),[j,W,X,ee]},[o,v,y,p]),L=!!y.length,T=G.useMemo(()=>g(C,S),[g,C,S]),{activeOpacity:D,inactiveOpacity:I}=w2t(n,L,d);b2t(T,n),G.useEffect(()=>{if(p===null){const W=f(o).map(X=>new Zs(X));m(W)}},[f,m,o,p]);const N=G.useRef(new Zs),P=G.useRef(new Zs),O=G.useCallback(j=>{if(!j.camera)return[];const W=j.intersectObjects(_);return W.length?W.map(X=>o[_.indexOf(X.object)]):[]},[_,o]),{handleClick:V,handleContextMenu:z,handleIntersections:K}=y2t({onClick:l,onContextMenu:c,onPointerOut:u,onPointerOver:h},s,r),H=G.useRef(null),U=G.useRef([]);return A5(j=>{if(N.current.geometry=T,r)return;const W=H.current;if((p||p===null&&W!==null)&&(P.current.geometry=g(x,E)),H.current=p,p)return;const X=U.current,ee=O(j.raycaster);K(X,ee),ee.join()!==X.join()&&(P.current.geometry=g(ee,[])),U.current=ee}),ge.jsxs("group",{onClick:V,onContextMenu:z,children:[ge.jsxs("mesh",{ref:N,children:[ge.jsx(_r.meshBasicMaterial,{attach:"material-0",color:d.edge.fill,depthTest:!1,fog:!0,opacity:I,side:Ks,transparent:!0}),ge.jsx(_r.meshBasicMaterial,{attach:"material-1",color:d.edge.activeFill,depthTest:!1,fog:!0,opacity:D,side:Ks,transparent:!0})]}),ge.jsxs("mesh",{ref:P,children:[ge.jsx(_r.meshBasicMaterial,{attach:"material-0",color:d.edge.fill,depthTest:!1,fog:!0,opacity:I,side:Ks,transparent:!0}),ge.jsx(_r.meshBasicMaterial,{attach:"material-1",color:d.edge.activeFill,depthTest:!1,fog:!0,opacity:D,side:Ks,transparent:!0})]}),o.map(j=>ge.jsx(SSe,{animated:n,contextMenu:s,color:d.edge.label.color,disabled:r,edge:j,labelFontUrl:a,labelPlacement:t},j.id))]})},xSe=({animated:i,position:e,padding:t,labelFontUrl:n,disabled:s,radius:r,nodes:o,label:a,onClick:l,onPointerOver:c,onPointerOut:u})=>{var h,d,f,g,p;const _=Gt(H=>H.theme),m=Math.max(e.width,e.height)/2,v=m-r+t,[y,C]=G.useState(!1),S=Gt(H=>H.centerPosition),x=Gt(H=>{var U;return(U=H.actives)==null?void 0:U.some(j=>o.some(W=>W.id===j))}),E=Gt(H=>{var U;return(U=H.selections)==null?void 0:U.some(j=>o.some(W=>W.id===j))}),T=Gt(H=>{var U;return((U=H.selections)==null?void 0:U.length)>0})?E||y||x?(h=_.cluster)==null?void 0:h.selectedOpacity:(d=_.cluster)==null?void 0:d.inactiveOpacity:(f=_.cluster)==null?void 0:f.opacity,{circleOpacity:D,circlePosition:I,labelPosition:N}=ku({from:{circlePosition:[S.x,S.y,-1],circleOpacity:0,labelPosition:[0,-v,2]},to:{labelPosition:[0,-v,2],circlePosition:e?[e.x,e.y,-1]:[0,0,-1],circleOpacity:T},config:{...Mu,duration:i?void 0:0}}),P=G.useMemo(()=>{var H;return new Pt((H=_.cluster)==null?void 0:H.stroke)},[(g=_.cluster)==null?void 0:g.stroke]),O=G.useMemo(()=>{var H;return new Pt((H=_.cluster)==null?void 0:H.fill)},[(p=_.cluster)==null?void 0:p.fill]);SL(y&&l!==void 0,"pointer");const{pointerOver:V,pointerOut:z}=eZ({disabled:s,onPointerOver:H=>{C(!0),c==null||c({nodes:o,label:a},H)},onPointerOut:H=>{C(!1),u==null||u({nodes:o,label:a},H)}});return G.useMemo(()=>{var H,U,j;return _.cluster&&ge.jsxs(_r.group,{position:I,onPointerOver:V,onPointerOut:z,onClick:W=>{s||l==null||l({nodes:o,label:a},W)},children:[ge.jsxs("mesh",{children:[ge.jsx("ringGeometry",{attach:"geometry",args:[v,0,128]}),ge.jsx(_r.meshBasicMaterial,{attach:"material",color:O,transparent:!0,depthTest:!1,opacity:(H=_.cluster)!=null&&H.fill?D:0,side:Ks,fog:!0})]}),ge.jsxs("mesh",{children:[ge.jsx("ringGeometry",{attach:"geometry",args:[v,m+t,128]}),ge.jsx(_r.meshBasicMaterial,{attach:"material",color:P,transparent:!0,depthTest:!1,opacity:D,side:Ks,fog:!0})]}),((U=_.cluster)==null?void 0:U.label)&&ge.jsx(_r.group,{position:N,children:ge.jsx(SC,{text:a,opacity:T,fontUrl:n,stroke:_.cluster.label.stroke,active:!1,color:(j=_.cluster)==null?void 0:j.label.color,fontSize:12})})]})},[_.cluster,I,V,z,v,O,D,m,t,P,N,a,T,n,s,l,o])};xSe.defaultProps={radius:2,padding:40};const ESe=G.forwardRef(({onNodeClick:i,onNodeDoubleClick:e,onNodeContextMenu:t,onEdgeContextMenu:n,onEdgeClick:s,onEdgePointerOver:r,onEdgePointerOut:o,onNodePointerOver:a,onNodePointerOut:l,onClusterClick:c,onNodeDragged:u,onClusterPointerOver:h,onClusterPointerOut:d,contextMenu:f,animated:g,disabled:p,draggable:_,edgeLabelPosition:m,edgeArrowPosition:v,edgeInterpolation:y,labelFontUrl:C,renderNode:S,...x},E)=>{const{layoutType:L,clusterAttribute:T}=x,D=Xr(ee=>ee.gl),I=Xr(ee=>ee.scene),N=Xr(ee=>ee.camera);if(g2t(x),T&&!(L==="forceDirected2d"||L==="forceDirected3d"))throw new Error("Clustering is only supported for the force directed layouts.");const P=Gt(ee=>ee.graph),O=Gt(ee=>ee.nodes),V=Gt(ee=>ee.edges),z=Gt(ee=>[...ee.clusters.values()]),{centerNodesById:K,fitNodesInViewById:H,isCentered:U}=_2t({animated:g,disabled:p,layoutType:L});G.useImperativeHandle(E,()=>({centerGraph:K,fitNodesInView:H,graph:P,renderScene:()=>D.render(I,N)}),[K,H,P,D,I,N]);const j=G.useMemo(()=>O.map(ee=>ge.jsx(ySe,{id:ee==null?void 0:ee.id,labelFontUrl:C,draggable:_,disabled:p,animated:g,contextMenu:f,renderNode:S,onClick:i,onDoubleClick:e,onContextMenu:t,onPointerOver:a,onPointerOut:l,onDragged:u},ee==null?void 0:ee.id)),[g,f,p,_,C,O,i,t,e,u,l,a,S]),W=G.useMemo(()=>g?V.map(ee=>ge.jsx(CSe,{id:ee.id,disabled:p,animated:g,labelFontUrl:C,labelPlacement:m,arrowPlacement:v,interpolation:y,contextMenu:f,onClick:s,onContextMenu:n,onPointerOver:r,onPointerOut:o},ee.id)):ge.jsx(C2t,{edges:V,disabled:p,animated:g,labelFontUrl:C,labelPlacement:m,arrowPlacement:v,interpolation:y,contextMenu:f,onClick:s,onContextMenu:n,onPointerOver:r,onPointerOut:o}),[g,f,p,v,y,m,V,C,s,n,o,r]),X=G.useMemo(()=>z.map(ee=>ge.jsx(xSe,{animated:g,disabled:p,labelFontUrl:C,onClick:c,onPointerOver:h,onPointerOut:d,...ee},ee.label)),[g,z,p,C,c,d,h]);return U&&ge.jsxs(G.Fragment,{children:[W,j,X]})});ESe.defaultProps={edgeInterpolation:"linear"};const S2t={canvas:{background:"#1E2026"},node:{fill:"#7A8C9E",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{stroke:"#1E2026",color:"#ACBAC7",activeColor:"#1DE9AC"},subLabel:{stroke:"#1E2026",color:"#ACBAC7",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#54616D",activeFill:"#1DE9AC"},edge:{fill:"#474B56",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#1E2026",color:"#ACBAC7",activeColor:"#1DE9AC",fontSize:6}},arrow:{fill:"#474B56",activeFill:"#1DE9AC"},cluster:{stroke:"#474B56",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#1E2026",color:"#ACBAC7"}}},LSe={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}};function rI(i,e,t){const{offsetX:n,offsetY:s}=i,{width:r,height:o}=t;e.set(n/r*2-1,-(s/o)*2+1)}function x2t(i){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=i.lasso.border,e.style.backgroundColor=i.lasso.background,e.style.position="fixed",e}const E2t=({children:i,type:e="none",onLasso:t,onLassoEnd:n,disabled:s})=>{var r;const o=Gt(P=>P.theme),a=Xr(P=>P.camera),l=Xr(P=>P.gl),c=Xr(P=>P.setEvents),u=Xr(P=>P.size),h=Xr(P=>P.get),d=Xr(P=>P.scene),f=tZ(),g=Gt(P=>P.actives),p=Gt(P=>P.setActives),_=Gt(P=>P.edges),m=Gt(P=>P.edgeMeshes),v=G.useRef(!1),y=G.useRef(null),C=G.useRef(null),S=G.useRef(x2t(o)),x=G.useRef(null),E=G.useRef(!1),L=G.useRef(h().events.enabled),T=G.useRef((r=f.controls)==null?void 0:r.enabled);G.useEffect(()=>{v.current&&(t==null||t(g)),v.current=!0},[g,t]);const D=G.useCallback(P=>{if(E.current){const[O,V,z]=x.current;z.x=Math.max(O.x,P.clientX),z.y=Math.max(O.y,P.clientY),V.x=Math.min(O.x,P.clientX),V.y=Math.min(O.y,P.clientY),S.current.style.left=`${V.x}px`,S.current.style.top=`${V.y}px`,S.current.style.width=`${z.x-V.x}px`,S.current.style.height=`${z.y-V.y}px`,rI(P,y.current.endPoint,u),rI(P,C.current.endPoint,u);const K=[],H=C.current.select().sort(j=>j.uuid).map(j=>_[m.indexOf(j)].id);K.push(...H);const U=y.current.select().sort(j=>j.uuid).filter(j=>{var W,X;return j.isMesh&&((W=j.userData)==null?void 0:W.id)&&(((X=j.userData)==null?void 0:X.type)===e||e==="all")}).map(j=>j.userData.id);K.push(...U),requestAnimationFrame(()=>{p(K)}),document.addEventListener("pointermove",D,{passive:!0,capture:!0,once:!0})}},[_,m,p,u,e]),I=G.useCallback(()=>{var P;E.current&&(c({enabled:L.current}),E.current=!1,(P=S.current.parentElement)==null||P.removeChild(S.current),f.controls.enabled=T.current,n==null||n(g),document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",I))},[c,f.controls,n,g,D]),N=G.useCallback(P=>{var O,V;if(P.shiftKey){L.current=h().events.enabled,T.current=(O=f.controls)==null?void 0:O.enabled,y.current=new qce(a,d);const z=new fT;m.length&&z.add(...m),C.current=new qce(a,z),x.current=[new rt,new rt,new rt];const[K]=x.current;f.controls.enabled=!1,c({enabled:!1}),E.current=!0,(V=l.domElement.parentElement)==null||V.appendChild(S.current),S.current.style.left=`${P.clientX}px`,S.current.style.top=`${P.clientY}px`,S.current.style.width="0px",S.current.style.height="0px",K.x=P.clientX,K.y=P.clientY,rI(P,y.current.startPoint,u),rI(P,C.current.startPoint,u),document.addEventListener("pointermove",D,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",I,{passive:!0})}},[a,f.controls,m,h,l.domElement.parentElement,D,I,d,c,u]);return G.useEffect(()=>{if(!(s||e==="none"))return typeof window<"u"&&(document.addEventListener("pointerdown",N,{passive:!0}),document.addEventListener("pointermove",D,{passive:!0}),document.addEventListener("pointerup",I,{passive:!0})),()=>{typeof window<"u"&&(document.removeEventListener("pointerdown",N),document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",I))}},[e,s,N,D,I]),ge.jsx("group",{children:i})},L2t="_canvas_670zp_1",T2t={canvas:L2t},k2t={alpha:!0,antialias:!0},M2t={position:[0,0,1e3],near:5,far:5e4,fov:10},TSe=G.forwardRef(({cameraMode:i,edges:e,children:t,nodes:n,theme:s,minDistance:r,maxDistance:o,onCanvasClick:a,animated:l,disabled:c,lassoType:u,onLasso:h,onLassoEnd:d,glOptions:f,...g},p)=>{var _,m;const v=G.useRef(null),y=G.useRef(null),C=G.useRef(null);G.useImperativeHandle(p,()=>({centerGraph:(D,I)=>{var N;return(N=v.current)==null?void 0:N.centerGraph(D,I)},fitNodesInView:(D,I)=>{var N;return(N=v.current)==null?void 0:N.fitNodesInView(D,I)},zoomIn:()=>{var D;return(D=y.current)==null?void 0:D.zoomIn()},zoomOut:()=>{var D;return(D=y.current)==null?void 0:D.zoomOut()},dollyIn:D=>{var I;return(I=y.current)==null?void 0:I.dollyIn(D)},dollyOut:D=>{var I;return(I=y.current)==null?void 0:I.dollyOut(D)},panLeft:()=>{var D;return(D=y.current)==null?void 0:D.panLeft()},panRight:()=>{var D;return(D=y.current)==null?void 0:D.panRight()},panDown:()=>{var D;return(D=y.current)==null?void 0:D.panDown()},panUp:()=>{var D;return(D=y.current)==null?void 0:D.panUp()},resetControls:D=>{var I;return(I=y.current)==null?void 0:I.resetControls(D)},getControls:()=>{var D;return(D=y.current)==null?void 0:D.controls},getGraph:()=>{var D;return(D=v.current)==null?void 0:D.graph},exportCanvas:()=>(v.current.renderScene(),C.current.toDataURL())}));const{selections:S,actives:x,collapsedNodeIds:E}=g,L=e.length+n.length>400?!1:l,T=G.useMemo(()=>({...f,...k2t}),[f]);return ge.jsx("div",{className:T2t.canvas,children:ge.jsx(g0t,{legacy:!0,linear:!0,ref:C,flat:!0,gl:T,camera:M2t,onPointerMissed:a,children:ge.jsxs(h2t,{createStore:()=>d2t({selections:S,actives:x,theme:s,collapsedNodeIds:E}),children:[((_=s.canvas)==null?void 0:_.background)&&ge.jsx("color",{attach:"background",args:[s.canvas.background]}),ge.jsx("ambientLight",{intensity:1}),t,((m=s.canvas)==null?void 0:m.fog)&&ge.jsx("fog",{attach:"fog",args:[s.canvas.fog,4e3,9e3]}),ge.jsx(mSe,{mode:i,ref:y,disabled:c,minDistance:r,maxDistance:o,animated:l,children:ge.jsx(E2t,{disabled:c,type:u,onLasso:h,onLassoEnd:d,children:ge.jsx(G.Suspense,{children:ge.jsx(ESe,{ref:v,disabled:c,animated:L,edges:e,nodes:n,...g})})})})]})})})});TSe.defaultProps={cameraMode:"pan",layoutType:"forceDirected2d",sizingType:"default",labelType:"auto",theme:LSe,animated:!0,defaultNodeSize:7,minNodeSize:5,maxNodeSize:15,lassoType:"none",glOptions:{}};const kSe=i=>{const{nodes:e,edges:t}=i,{isDarkMode:n}=KT.useStore(),s=G.useRef(null);return G.useLayoutEffect(()=>{var r;(r=s.current)==null||r.fitNodesInView()},[e,t]),ge.jsx(TSe,{theme:n?S2t:LSe,layoutType:"hierarchicalTd",labelType:"all",edgeLabelPosition:"natural",animated:!1,nodes:e,edges:t,ref:s})},MSe=i=>{const{title:e,active:t,formula:n,children:s,...r}=i,{currentAction:o}=Z3.useStore();return ge.jsxs(B3,{title:ge.jsxs("div",{children:[e,t&&o&&ge.jsx(r1e,{className:"ml-2",action:o})]}),className:"w-full h-full flex flex-col",bodyStyle:{display:"flex",flexDirection:"column",padding:0,flexGrow:1},...r,children:[n&&ge.jsx("div",{className:"p-3",style:{backgroundColor:"var(--semi-color-bg-1)"},children:ge.jsx(Act,{style:{color:"rgba(var(--semi-yellow-6), 1)"},children:`\\(${n}\\)`},`\\(${n}\\)`)}),ge.jsx("div",{className:"relative grow",children:s})]})},dN=i=>{switch(i){case su.Solving:return"#F7BE1E";case su.FullUnSAT:return"#DB4131";case su.PartialUnSAT:return"#FD6353"}throw new Error("Unreachable:"+i)},U$=i=>{switch(i){case bd.Solving:return"#F7BE1E";case bd.Terminated:return"#949494";case bd.Waiting:return"#297AB2";case bd.UNSAT:return"#DB4131";case bd.UnSATBySplit:return"#DB4131"}throw new Error("Unreachable:"+i)},D2t=i=>{switch(i){case O9.Idle:return ge.jsx(mv,{color:"grey",children:"Idle"});case O9.Solving:return ge.jsx(mv,{color:"blue",children:"Solving"})}throw new Error("Unreachable:"+i)},A2t=i=>{const e=[],t=[],n=s=>{e.push({id:String(s.id),fill:U$(s.status),label:String(s.id)}),s.children.forEach(r=>{t.push({id:`${s.id}-${r.id}`,source:String(s.id),target:String(r.id),label:r.label}),n(r)})};return n(i),[e,t]},I2t=i=>{const{active:e,coordinator:t}=i,{id:n,round:s,status:r,root:o,formula:a}=t,l=o.at(-1),[c,u]=G.useMemo(()=>l?A2t(l):[],[l]);return ge.jsx(MSe,{title:ge.jsxs("span",{children:[n," - round ",s]}),active:e,headerExtraContent:D2t(r),formula:a,children:c&&u&&ge.jsx(kSe,{nodes:c,edges:u})})},N2t=i=>{const e=[],t=[],n=s=>{e.push({id:String(s.id),fill:dN(s.status),label:String(s.id)}),s.children.forEach(r=>{t.push({id:`${s.id}-${r.id}`,source:String(s.id),target:String(r.id)}),n(r)})};return n(i),[e,t]},nE=i=>{const{color:e,children:t}=i;return ge.jsxs("div",{className:"flex flex-row items-center mt-3",children:[ge.jsx("div",{style:{width:24,height:24,borderRadius:12,backgroundColor:e}}),ge.jsx("div",{className:"ml-2",children:t})]})},R2t=i=>{const{active:e,root:t,formula:n}=i,[s,r]=G.useMemo(()=>N2t(t),[t]);return ge.jsx(MSe,{title:ge.jsx("span",{children:"Leader"}),active:e,formula:n,children:ge.jsxs("div",{className:"w-full h-full flex flex-row",children:[ge.jsxs("div",{className:"min-w-40 p-2 flex flex-col",style:{backgroundColor:"var(--semi-color-bg-2)"},children:[ge.jsx(nE,{color:dN(su.Solving),children:su.Solving}),ge.jsx(nE,{color:dN(su.PartialUnSAT),children:su.PartialUnSAT}),ge.jsx(nE,{color:dN(su.FullUnSAT),children:su.FullUnSAT}),ge.jsx(nE,{color:U$(bd.Waiting),children:bd.Waiting}),ge.jsx(nE,{color:U$(bd.Terminated),children:bd.Terminated})]}),ge.jsx("div",{className:"relative grow",children:ge.jsx(kSe,{nodes:s,edges:r})})]})})},P2t=()=>{const{currentAction:i,currentState:e}=Z3.useStore(),t=[...e.coordinators],[n,s]=G.useMemo(()=>{const r=t.length+1;return r===1?[1,1]:r===2?[2,1]:r<=4?[2,2]:[3,2]},[t.length]);return ge.jsxs(mj,{type:"grid",className:"h-full w-full overflow-y-auto",children:[ge.jsx("div",{style:{width:`${100/n}%`,height:`${100/s}%`},children:ge.jsx(R2t,{active:(i==null?void 0:i.source)==="Leader",root:e.root,formula:e.formula})}),t.map(([r,o])=>ge.jsx("div",{style:{width:`${100/n}%`,height:`${100/s}%`},children:ge.jsx(I2t,{active:(i==null?void 0:i.source)===r,coordinator:o})},r))]})};function O2t(){return ge.jsxs(Pge,{children:[ge.jsxs(Rge,{size:48,className:"pl-4 pr-4 flex flex-row items-center",style:{backgroundColor:"var(--semi-color-bg-3)"},children:[ge.jsx(Yv.Title,{children:"Distributed-SMT-Solving-Visualization"}),ge.jsx("div",{className:"ml-auto"}),ge.jsx(O6e,{})]}),ge.jsxs(M9,{children:[ge.jsx(Nge,{size:360,style:{backgroundColor:"var(--semi-color-bg-2)"},children:ge.jsx(Pct,{})}),ge.jsx(M9,{children:ge.jsx(P2t,{})})]})]})}const F2t=()=>{const{isDarkMode:i}=KT.useStore();return G.useLayoutEffect(()=>{const e=document.body;i?e.hasAttribute("theme-mode")||e.setAttribute("theme-mode","dark"):e.hasAttribute("theme-mode")&&e.removeAttribute("theme-mode")},[i]),null};OG(document.getElementById("root")).render(ge.jsx(G.StrictMode,{children:ge.jsxs(KT.Provider,{children:[ge.jsx(F2t,{}),ge.jsx(Mct,{children:ge.jsx(Z3.Provider,{children:ge.jsx(O2t,{})})})]})}));
